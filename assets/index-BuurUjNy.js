const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pe-wasm-Co3DzcyP.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/statsWorker-ClpgqEiL.js","assets/utils-5HDDUgPm.js","assets/quantizationUtils-BdN41_Xc.js","assets/geometryEngineWorker-CA-tZxOm.js","assets/geometryEngineJSON-Bvf5zUh7.js","assets/geometryEngineBase-B0ZyeKAX.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-g8TyEeWc.js","assets/date-Ctp1FiBW.js","assets/OptimizedFeatureSet-DWrxeG6N.js","assets/memoryEstimations-CMT4SzJ5.js","assets/OptimizedGeometry-ctYdNoIG.js","assets/executeQueryForSnapping-BMrwN3MM.js","assets/featureConversionUtils-CBlorucq.js","assets/PooledRBush-Ce0wI0lb.js","assets/timeSupport-wEUOQSqn.js","assets/queryUtils-DnEZcHAW.js","assets/optimizedFeatureQueryEngineAdapter-Bd82a8MA.js","assets/QueryEngine-gw3_eh-j.js","assets/WhereClauseCache-DySf_V0x.js","assets/WhereClause-tNfuElsK.js","assets/TimeOnly-3THQQ8Fr.js","assets/QueryEngineCapabilities-B_pTbIiR.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-BGAbcxrt.js","assets/number-DXldYQze.js","assets/clientSideDefaults-CdZFjr9J.js","assets/EdgeProcessingWorker-C9-P9zMO.js","assets/workerHelper-DjRASiBa.js","assets/InterleavedLayout-BMgRF_FZ.js","assets/BufferView-zAxR52uW.js","assets/edgeProcessing-D4au5qdp.js","assets/deduplicate-41W2Xo8h.js","assets/Indices-DeeZVUxP.js","assets/VertexAttribute-Cq4MnHjR.js","assets/glUtil-Cg71w1wQ.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-ssM0QqKk.js","assets/ElevationSamplerWorker-DpFnpV5b.js","assets/MeshLocalVertexSpace-BMUeMy-Q.js","assets/vertexSpaceConversion-Cyco_AuL.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-Dk4dwAN8.js","assets/spatialReferenceEllipsoidUtils-B4Hav144.js","assets/computeTranslationToOriginAndRotation-CdTRRE4h.js","assets/projectPointToVector-CycyCHNm.js","assets/meshVertexSpaceUtils-DeJZdyiY.js","assets/vec3-Du_Awc2F.js","assets/vec4-BNdE_iON.js","assets/FeatureServiceSnappingSourceWorker-CDVkAFEJ.js","assets/symbologySnappingCandidates-COQkF4S9.js","assets/pbfQueryUtils-CoWpC1gm.js","assets/pbf-y3_vskRC.js","assets/query-CvrxY7Xg.js","assets/GeoJSONSourceWorker-DHOhjWUK.js","assets/geojson-8Z1-yrws.js","assets/sourceUtils-Dm_nxCOC.js","assets/MemorySourceWorker-B9BFuzSt.js","assets/PBFDecoderWorker-BAqF32wz.js","assets/dehydratedFeatures-sbejWfdQ.js","assets/FeaturePipelineWorker-CDuuD5KL.js","assets/FeatureMetadata-DHjLLq4R.js","assets/dataViewUtils-TvsUr7hm.js","assets/BoundingBox-j-OHa0PB.js","assets/UpdateTracking2D-C6bLgmat.js","assets/CIMSymbolHelper-C_-iIFr_.js","assets/BidiEngine-QXap_35O.js","assets/fontUtils-DmUOgodR.js","assets/Rect-BgwV4lPu.js","assets/rasterizingUtils-DZu30vQ7.js","assets/floatRGBA-CkSho6R2.js","assets/MeshWriterRegistry-DuyyDa3v.js","assets/TechniqueType-uMFRS8dR.js","assets/PieChartMeshWriter-jTthlqjW.js","assets/libtess-CQ1MDdKV.js","assets/utils-JrJ-1CjI.js","assets/earcut-D9gy186-.js","assets/grouping-CYhDgqp8.js","assets/QueueProcessor-BinXpWME.js","assets/operatorGeodeticDensify-z9ao9-BP.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/parquet-DLKErZGP.js","assets/CircularArray-CujHzHWW.js","assets/PointCloudWorker-CLdpWtdc.js","assets/quat-BKxiWUB9.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-nZdmKIgz.js","assets/I3SBinaryReader-BzLC_jxX.js","assets/orientedBoundingBox-B5Hwz8co.js","assets/plane-BkVanVBa.js","assets/RasterWorker-BNWwKqqx.js","assets/dataUtils-o-R90RXP.js","assets/rasterProjectionHelper-Cl-9gUCR.js","assets/SceneLayerSnappingSourceWorker-CUBiyM6v.js","assets/lineSegment-h-9qhCbx.js","assets/sphere-DLWu6eKr.js","assets/Octree-si7LJGnM.js","assets/SceneLayerWorker-kX8AH9jo.js","assets/projectVectorToVector-CXD7MfO-.js","assets/edgeUtils-UqZKTaEh.js","assets/NormalAttribute.glsl-D-KYZG2O.js","assets/glsl-BH37Aalp.js","assets/ShaderOutput-DnYY5J1_.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-BelyhHk8.js","assets/WorkerTileHandler-BUiK9r8M.js","assets/enums-BRzLM11V.js","assets/config-CIMzMD-H.js","assets/SourceLayerData-DyXXKuDB.js","assets/Feature3DPipelineWorker-B9zEm9Zw.js","assets/LodRenderer-WOcsLrai.js","assets/VerticalOffset.glsl-cgbGV1PN.js","assets/triangle-C_Ho7Jub.js","assets/renderState-Y6C4b7xG.js","assets/boundedPlane-HQ4SDTva.js","assets/requestImageUtils-BTsowxiv.js","assets/TextureFormat-1mYWTFa-.js","assets/HUDMaterial.glsl-BRP9TDxM.js","assets/VertexArrayObject-D8BUTeor.js","assets/HUDVisibility.glsl-BV6Ui8AW.js","assets/doublePrecisionUtils-B0owpBza.js","assets/hydratedFeatures-W_C6fqOn.js","assets/ShaderBuilder-BhBi3jJv.js","assets/RealisticTree.glsl-DDExtdCc.js","assets/LodResources-D_Ve3akO.js","assets/TextureCompressionWorker-DGVtWOnh.js","assets/Popup-C-81ufDQ.js","assets/AttachmentInfo-K-60tlE9.js","assets/featureUtils-COb-58Xe.js","assets/executeQueryJSON-DO4_mY1J.js","assets/shared-C0pYK880.js","assets/ReactiveSet-Cu3n-AJ8.js","assets/ElevationLayer-CRpsKT6K.js","assets/WorkerHandle-CDYh7sBm.js","assets/layersCreator-D9JmvcUB.js","assets/loadUtils-S_rGmvFJ.js","assets/fetchService-Cj3OM0W0.js","assets/associatedFeatureServiceUtils-CsaBvI4C.js","assets/lazyLayerLoader-BBFPObMd.js","assets/portalLayers-DledxBIQ.js","assets/arcgisLayers-Bt-csvzI.js","assets/arcadeUtils-BNnd5lth.js","assets/arcade-BUWOn_D-.js","assets/unitConversion-CV3rWfTH.js","assets/ImmutableArray-BPVd6ESQ.js","assets/webglDeps-DwTwP9Vx.js","assets/FramebufferObject-B1BskXlu.js","assets/ProgramTemplate-CamO9WjC.js","assets/NestedMap-GuqgquCN.js","assets/mapViewDeps-B5fvDLuQ.js","assets/FeatureCommandQueue-CQ9Aznlk.js","assets/GraphShaderModule-BBarpPRO.js","assets/WGLContainer-LmHVZ1Cq.js","assets/Container-DSpu0Eal.js","assets/SDFHelper-D9zNBCgB.js","assets/OverrideHelper-CGqrUmI_.js","assets/GridShader-BdfR2Fn3.js","assets/testSVGPremultipliedAlpha-DhwBUhb3.js","assets/MaterialPrograms-DHK_827R.js","assets/CIMResourceManager-UU28eNNm.js","assets/utils-by40GJa_.js","assets/VertexStream-BG2WCh16.js","assets/utils-ehcGqGxa.js","assets/GraphicsView2D-ByVIaOBj.js","assets/GraphicContainer-C5vOLOnx.js","assets/AGraphicContainer-BDJOr37h.js","assets/TechniqueInstance-kKLNFxbl.js","assets/TileContainer-5EG0iL3t.js","assets/gridUtils-Cm8xrgz-.js","assets/geodesicUtils-2qEj9b_s.js","assets/TileLayerView2D-DuC4YpCu.js","assets/imageUtils-D2MTKIbR.js","assets/BitmapTechnique-6nI4azvO.js","assets/LayerView-CQVnlvN8.js","assets/HighlightGraphicContainer-CCPTZU02.js","assets/RefreshableLayerView-CoTae4Wq.js","assets/MapServiceLayerViewHelper-CH4DzOtc.js","assets/drapedUtils-C15AOIVK.js","assets/popupUtils-AJkLP1Q-.js","assets/FeatureLayerView2D-0MmTY_TV.js","assets/timeSupport-Cg4c0Evx.js","assets/AttributeBinsFeatureSet-CL7d-U2a.js","assets/AttributeBinsQuery-nI2H9Fke.js","assets/BaseDynamicLayerView2D-CjH21iO6.js","assets/BitmapContainer-BI_xmSc6.js","assets/ExportStrategy-C3tkL3ul.js","assets/CatalogLayerView2D-hU99PYke.js","assets/CatalogDynamicGroupLayerView2D-BhXG2i9z.js","assets/CatalogFootprintLayerView2D-jCyXCD69.js","assets/GeoRSSLayerView2D-D7-lEKE1.js","assets/GraphicsLayerView2D-CEUeAyIh.js","assets/GroupLayerView2D-D6Vye4SO.js","assets/ImageryLayerView2D-BxY3E8C5.js","assets/RasterVFDisplayObject-BJfbW0z7.js","assets/ImageryTileLayerView2D-DhTmmfzs.js","assets/rasterUtils-DCGYp7f3.js","assets/KMLLayerView2D-CBBQJ7o6.js","assets/KnowledgeGraphLayerView2D-DuLLJsn6.js","assets/MapImageLayerView2D-BPzAKZTR.js","assets/MapNotesLayerView2D-CS-YbP5h.js","assets/MediaLayerView2D-CH80rAWe.js","assets/OverlayContainer-Ctg4oUkM.js","assets/OGCFeatureLayerView2D-BmDx1G_0.js","assets/RouteLayerView2D-DhLx2Fpf.js","assets/StreamLayerView2D-dEaClrP_.js","assets/SubtypeGroupLayerView2D-BfBuxmqQ.js","assets/VectorTileLayerView2D-DDZ4uZC3.js","assets/VideoLayerView2D-342eC2sW.js","assets/GraphicsLayer-DoTJE-Vj.js","assets/WMSLayerView2D-D16tMBwV.js","assets/WMTSLayerView2D-CDCapNrQ.js","assets/apng-Cr6t1__9.js","assets/webdocSaveUtils-7bbKU9py.js","assets/saveUtils-ohr6pgPw.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/basemapUtils-BioY0wiW.js","assets/resourceUtils-DzJsZ28y.js","assets/layersLoader-DRJCP4hE.js","assets/featureLayerUtils-CBPv59Zt.js","assets/FeatureLayerSource-Di9Oza92.js","assets/External-C--yfaHv.js","assets/MeshTransform-C7H0knU5.js","assets/axisAngleDegrees-DNjRPLaR.js","assets/editingSupport-CpnC6wJb.js","assets/QueryTask-CijJFltl.js","assets/queryAssociations-9h2wQQQV.js","assets/Association-fi22zmMa.js","assets/synthesizeAssociationGeometries-DPDzVS0R.js","assets/MapImageLayer-2rm6uE78.js","assets/index-CVZH03AW.js","assets/customElement-CLO4gsU3.js","assets/index-7tLA-JSp.js","assets/floating-ui-ClPCPMfA.js","assets/debounce-D0G5qrda.js","assets/openCloseComponent-BTGkjX3S.js","assets/dynamicClasses-pKEMtFzB.js","assets/index-CSWhMdti.js","assets/resources6-Cs2_VmEC.js","assets/index-B0XS38To.js","assets/customElement-CJE3smQb.js","assets/index-4WWG3ort.js","assets/FloatingArrow-iLXrCtgj.js","assets/useFocusTrap-DwgIZC58.js","assets/index-BkW_GZi6.js","assets/array-BbE1dLa5.js","assets/index-DO-DEGns.js","assets/index-Cp_tZagG.js","assets/filter-CYJLG1JG.js","assets/utils3-DNnozSoN.js","assets/index-fJVedPAu.js","assets/index-DFlwSnKt.js","assets/index-Dk7uRXM3.js","assets/index-DnDa7YSf.js","assets/utils-DKuMhiJX.js","assets/index-BQkGlfCK.js","assets/resources5-SciNIBSe.js","assets/index-TKnEqfGu.js","assets/index-Dv9oNo5c.js","assets/index-CLq3TOwI.js","assets/previewSymbol2D-DAlyz8lp.js","assets/previewCIMSymbol-Cb59vE95.js","assets/CIMSymbolRasterizer-UgV77kG9.js","assets/index-z3mNsee9.js","assets/index-DgOaXfFf.js","assets/interact.min-g6-tpPva.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var g5={exports:{}},j1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FZ;function V_e(){if(FZ)return j1;FZ=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,n,s){var o=null;if(s!==void 0&&(o=""+s),n.key!==void 0&&(o=""+n.key),"key"in n){s={};for(var a in n)a!=="key"&&(s[a]=n[a])}else s=n;return n=s.ref,{$$typeof:t,type:r,key:o,ref:n!==void 0?n:null,props:s}}return j1.Fragment=e,j1.jsx=i,j1.jsxs=i,j1}var jZ;function F_e(){return jZ||(jZ=1,g5.exports=V_e()),g5.exports}var Be=F_e(),v5={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zZ;function j_e(){if(zZ)return Et;zZ=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function g(Q){return Q===null||typeof Q!="object"?null:(Q=m&&Q[m]||Q["@@iterator"],typeof Q=="function"?Q:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,_={};function x(Q,ge,Ve){this.props=Q,this.context=ge,this.refs=_,this.updater=Ve||w}x.prototype.isReactComponent={},x.prototype.setState=function(Q,ge){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,ge,"setState")},x.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function T(){}T.prototype=x.prototype;function E(Q,ge,Ve){this.props=Q,this.context=ge,this.refs=_,this.updater=Ve||w}var k=E.prototype=new T;k.constructor=E,O(k,x.prototype),k.isPureReactComponent=!0;var M=Array.isArray,R={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function L(Q,ge,Ve,Ne,ke,ct){return Ve=ct.ref,{$$typeof:t,type:Q,key:ge,ref:Ve!==void 0?Ve:null,props:ct}}function F(Q,ge){return L(Q.type,ge,void 0,void 0,void 0,Q.props)}function j(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function B(Q){var ge={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Ve){return ge[Ve]})}var W=/\/+/g;function ie(Q,ge){return typeof Q=="object"&&Q!==null&&Q.key!=null?B(""+Q.key):ge.toString(36)}function oe(){}function ae(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(oe,oe):(Q.status="pending",Q.then(function(ge){Q.status==="pending"&&(Q.status="fulfilled",Q.value=ge)},function(ge){Q.status==="pending"&&(Q.status="rejected",Q.reason=ge)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function Ee(Q,ge,Ve,Ne,ke){var ct=typeof Q;(ct==="undefined"||ct==="boolean")&&(Q=null);var ot=!1;if(Q===null)ot=!0;else switch(ct){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(Q.$$typeof){case t:case e:ot=!0;break;case p:return ot=Q._init,Ee(ot(Q._payload),ge,Ve,Ne,ke)}}if(ot)return ke=ke(Q),ot=Ne===""?"."+ie(Q,0):Ne,M(ke)?(Ve="",ot!=null&&(Ve=ot.replace(W,"$&/")+"/"),Ee(ke,ge,Ve,"",function(ri){return ri})):ke!=null&&(j(ke)&&(ke=F(ke,Ve+(ke.key==null||Q&&Q.key===ke.key?"":(""+ke.key).replace(W,"$&/")+"/")+ot)),ge.push(ke)),1;ot=0;var ai=Ne===""?".":Ne+":";if(M(Q))for(var St=0;St<Q.length;St++)Ne=Q[St],ct=ai+ie(Ne,St),ot+=Ee(Ne,ge,Ve,ct,ke);else if(St=g(Q),typeof St=="function")for(Q=St.call(Q),St=0;!(Ne=Q.next()).done;)Ne=Ne.value,ct=ai+ie(Ne,St++),ot+=Ee(Ne,ge,Ve,ct,ke);else if(ct==="object"){if(typeof Q.then=="function")return Ee(ae(Q),ge,Ve,Ne,ke);throw ge=String(Q),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.")}return ot}function ue(Q,ge,Ve){if(Q==null)return Q;var Ne=[],ke=0;return Ee(Q,Ne,"","",function(ct){return ge.call(Ve,ct,ke++)}),Ne}function he(Q){if(Q._status===-1){var ge=Q._result;ge=ge(),ge.then(function(Ve){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Ve)},function(Ve){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Ve)}),Q._status===-1&&(Q._status=0,Q._result=ge)}if(Q._status===1)return Q._result.default;throw Q._result}var ye=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function Ae(){}return Et.Children={map:ue,forEach:function(Q,ge,Ve){ue(Q,function(){ge.apply(this,arguments)},Ve)},count:function(Q){var ge=0;return ue(Q,function(){ge++}),ge},toArray:function(Q){return ue(Q,function(ge){return ge})||[]},only:function(Q){if(!j(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Et.Component=x,Et.Fragment=i,Et.Profiler=n,Et.PureComponent=E,Et.StrictMode=r,Et.Suspense=l,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Et.act=function(){throw Error("act(...) is not supported in production builds of React.")},Et.cache=function(Q){return function(){return Q.apply(null,arguments)}},Et.cloneElement=function(Q,ge,Ve){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var Ne=O({},Q.props),ke=Q.key,ct=void 0;if(ge!=null)for(ot in ge.ref!==void 0&&(ct=void 0),ge.key!==void 0&&(ke=""+ge.key),ge)!D.call(ge,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&ge.ref===void 0||(Ne[ot]=ge[ot]);var ot=arguments.length-2;if(ot===1)Ne.children=Ve;else if(1<ot){for(var ai=Array(ot),St=0;St<ot;St++)ai[St]=arguments[St+2];Ne.children=ai}return L(Q.type,ke,void 0,void 0,ct,Ne)},Et.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:s,_context:Q},Q},Et.createElement=function(Q,ge,Ve){var Ne,ke={},ct=null;if(ge!=null)for(Ne in ge.key!==void 0&&(ct=""+ge.key),ge)D.call(ge,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(ke[Ne]=ge[Ne]);var ot=arguments.length-2;if(ot===1)ke.children=Ve;else if(1<ot){for(var ai=Array(ot),St=0;St<ot;St++)ai[St]=arguments[St+2];ke.children=ai}if(Q&&Q.defaultProps)for(Ne in ot=Q.defaultProps,ot)ke[Ne]===void 0&&(ke[Ne]=ot[Ne]);return L(Q,ct,void 0,void 0,null,ke)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(Q){return{$$typeof:a,render:Q}},Et.isValidElement=j,Et.lazy=function(Q){return{$$typeof:p,_payload:{_status:-1,_result:Q},_init:he}},Et.memo=function(Q,ge){return{$$typeof:u,type:Q,compare:ge===void 0?null:ge}},Et.startTransition=function(Q){var ge=R.T,Ve={};R.T=Ve;try{var Ne=Q(),ke=R.S;ke!==null&&ke(Ve,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(Ae,ye)}catch(ct){ye(ct)}finally{R.T=ge}},Et.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Et.use=function(Q){return R.H.use(Q)},Et.useActionState=function(Q,ge,Ve){return R.H.useActionState(Q,ge,Ve)},Et.useCallback=function(Q,ge){return R.H.useCallback(Q,ge)},Et.useContext=function(Q){return R.H.useContext(Q)},Et.useDebugValue=function(){},Et.useDeferredValue=function(Q,ge){return R.H.useDeferredValue(Q,ge)},Et.useEffect=function(Q,ge){return R.H.useEffect(Q,ge)},Et.useId=function(){return R.H.useId()},Et.useImperativeHandle=function(Q,ge,Ve){return R.H.useImperativeHandle(Q,ge,Ve)},Et.useInsertionEffect=function(Q,ge){return R.H.useInsertionEffect(Q,ge)},Et.useLayoutEffect=function(Q,ge){return R.H.useLayoutEffect(Q,ge)},Et.useMemo=function(Q,ge){return R.H.useMemo(Q,ge)},Et.useOptimistic=function(Q,ge){return R.H.useOptimistic(Q,ge)},Et.useReducer=function(Q,ge,Ve){return R.H.useReducer(Q,ge,Ve)},Et.useRef=function(Q){return R.H.useRef(Q)},Et.useState=function(Q){return R.H.useState(Q)},Et.useSyncExternalStore=function(Q,ge,Ve){return R.H.useSyncExternalStore(Q,ge,Ve)},Et.useTransition=function(){return R.H.useTransition()},Et.version="19.0.0",Et}var UZ;function DU(){return UZ||(UZ=1,v5.exports=j_e()),v5.exports}var le=DU(),b5={exports:{}},z1={},w5={exports:{}},O5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QZ;function z_e(){return QZ||(QZ=1,function(t){function e(ue,he){var ye=ue.length;ue.push(he);e:for(;0<ye;){var Ae=ye-1>>>1,Q=ue[Ae];if(0<n(Q,he))ue[Ae]=he,ue[ye]=Q,ye=Ae;else break e}}function i(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var he=ue[0],ye=ue.pop();if(ye!==he){ue[0]=ye;e:for(var Ae=0,Q=ue.length,ge=Q>>>1;Ae<ge;){var Ve=2*(Ae+1)-1,Ne=ue[Ve],ke=Ve+1,ct=ue[ke];if(0>n(Ne,ye))ke<Q&&0>n(ct,Ne)?(ue[Ae]=ct,ue[ke]=ye,Ae=ke):(ue[Ae]=Ne,ue[Ve]=ye,Ae=Ve);else if(ke<Q&&0>n(ct,ye))ue[Ae]=ct,ue[ke]=ye,Ae=ke;else break e}}return he}function n(ue,he){var ye=ue.sortIndex-he.sortIndex;return ye!==0?ye:ue.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],p=1,m=null,g=3,w=!1,O=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function k(ue){for(var he=i(u);he!==null;){if(he.callback===null)r(u);else if(he.startTime<=ue)r(u),he.sortIndex=he.expirationTime,e(l,he);else break;he=i(u)}}function M(ue){if(_=!1,k(ue),!O)if(i(l)!==null)O=!0,ae();else{var he=i(u);he!==null&&Ee(M,he.startTime-ue)}}var R=!1,D=-1,L=5,F=-1;function j(){return!(t.unstable_now()-F<L)}function B(){if(R){var ue=t.unstable_now();F=ue;var he=!0;try{e:{O=!1,_&&(_=!1,T(D),D=-1),w=!0;var ye=g;try{t:{for(k(ue),m=i(l);m!==null&&!(m.expirationTime>ue&&j());){var Ae=m.callback;if(typeof Ae=="function"){m.callback=null,g=m.priorityLevel;var Q=Ae(m.expirationTime<=ue);if(ue=t.unstable_now(),typeof Q=="function"){m.callback=Q,k(ue),he=!0;break t}m===i(l)&&r(l),k(ue)}else r(l);m=i(l)}if(m!==null)he=!0;else{var ge=i(u);ge!==null&&Ee(M,ge.startTime-ue),he=!1}}break e}finally{m=null,g=ye,w=!1}he=void 0}}finally{he?W():R=!1}}}var W;if(typeof E=="function")W=function(){E(B)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,oe=ie.port2;ie.port1.onmessage=B,W=function(){oe.postMessage(null)}}else W=function(){x(B,0)};function ae(){R||(R=!0,W())}function Ee(ue,he){D=x(function(){ue(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ue){ue.callback=null},t.unstable_continueExecution=function(){O||w||(O=!0,ae())},t.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<ue?Math.floor(1e3/ue):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(ue){switch(g){case 1:case 2:case 3:var he=3;break;default:he=g}var ye=g;g=he;try{return ue()}finally{g=ye}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ue,he){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var ye=g;g=ue;try{return he()}finally{g=ye}},t.unstable_scheduleCallback=function(ue,he,ye){var Ae=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ae+ye:Ae):ye=Ae,ue){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ye+Q,ue={id:p++,callback:he,priorityLevel:ue,startTime:ye,expirationTime:Q,sortIndex:-1},ye>Ae?(ue.sortIndex=ye,e(u,ue),i(l)===null&&ue===i(u)&&(_?(T(D),D=-1):_=!0,Ee(M,ye-Ae))):(ue.sortIndex=Q,e(l,ue),O||w||(O=!0,ae())),ue},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(ue){var he=g;return function(){var ye=g;g=he;try{return ue.apply(this,arguments)}finally{g=ye}}}}(O5)),O5}var BZ;function U_e(){return BZ||(BZ=1,w5.exports=z_e()),w5.exports}var S5={exports:{}},ns={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qZ;function Q_e(){if(qZ)return ns;qZ=1;var t=DU();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(l,u,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:m==null?null:""+m,children:l,containerInfo:u,implementation:p}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ns.createPortal=function(l,u){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(l,u,null,p)},ns.flushSync=function(l){var u=o.T,p=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=u,r.p=p,r.d.f()}},ns.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},ns.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ns.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var p=u.as,m=a(p,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,w=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;p==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:w}):p==="script"&&r.d.X(l,{crossOrigin:m,integrity:g,fetchPriority:w,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ns.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var p=a(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},ns.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var p=u.as,m=a(p,u.crossOrigin);r.d.L(l,p,{crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ns.preloadModule=function(l,u){if(typeof l=="string")if(u){var p=a(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},ns.requestFormReset=function(l){r.d.r(l)},ns.unstable_batchedUpdates=function(l,u){return l(u)},ns.useFormState=function(l,u,p){return o.H.useFormState(l,u,p)},ns.useFormStatus=function(){return o.H.useHostTransitionStatus()},ns.version="19.0.0",ns}var GZ;function B_e(){if(GZ)return S5.exports;GZ=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),S5.exports=Q_e(),S5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZZ;function q_e(){if(ZZ)return z1;ZZ=1;var t=U_e(),e=DU(),i=B_e();function r(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}var s=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.consumer"),w=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function D(c){return c===null||typeof c!="object"?null:(c=R&&c[R]||c["@@iterator"],typeof c=="function"?c:null)}var L=Symbol.for("react.client.reference");function F(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===L?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case l:return"Fragment";case a:return"Portal";case p:return"Profiler";case u:return"StrictMode";case _:return"Suspense";case x:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case w:return(c.displayName||"Context")+".Provider";case g:return(c._context.displayName||"Context")+".Consumer";case O:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case T:return d=c.displayName||null,d!==null?d:F(c.type)||"Memo";case E:d=c._payload,c=c._init;try{return F(c(d))}catch{}}return null}var j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=Object.assign,W,ie;function oe(c){if(W===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);W=d&&d[1]||"",ie=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+W+c+ie}var ae=!1;function Ee(c,d){if(!c||ae)return"";ae=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(de){var ne=de}Reflect.construct(c,[],_e)}else{try{_e.call()}catch(de){ne=de}c.call(_e.prototype)}}else{try{throw Error()}catch(de){ne=de}(_e=c())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(de){if(de&&ne&&typeof de.stack=="string")return[de.stack,ne.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=b.DetermineComponentFrameRoot(),C=$[0],V=$[1];if(C&&V){var U=C.split(`
`),X=V.split(`
`);for(S=b=0;b<U.length&&!U[b].includes("DetermineComponentFrameRoot");)b++;for(;S<X.length&&!X[S].includes("DetermineComponentFrameRoot");)S++;if(b===U.length||S===X.length)for(b=U.length-1,S=X.length-1;1<=b&&0<=S&&U[b]!==X[S];)S--;for(;1<=b&&0<=S;b--,S--)if(U[b]!==X[S]){if(b!==1||S!==1)do if(b--,S--,0>S||U[b]!==X[S]){var fe=`
`+U[b].replace(" at new "," at ");return c.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",c.displayName)),fe}while(1<=b&&0<=S);break}}}finally{ae=!1,Error.prepareStackTrace=y}return(y=c?c.displayName||c.name:"")?oe(y):""}function ue(c){switch(c.tag){case 26:case 27:case 5:return oe(c.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return c=Ee(c.type,!1),c;case 11:return c=Ee(c.type.render,!1),c;case 1:return c=Ee(c.type,!0),c;default:return""}}function he(c){try{var d="";do d+=ue(c),c=c.return;while(c);return d}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function ye(c){var d=c,y=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(y=d.return),c=d.return;while(c)}return d.tag===3?y:null}function Ae(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function Q(c){if(ye(c)!==c)throw Error(r(188))}function ge(c){var d=c.alternate;if(!d){if(d=ye(c),d===null)throw Error(r(188));return d!==c?null:c}for(var y=c,b=d;;){var S=y.return;if(S===null)break;var $=S.alternate;if($===null){if(b=S.return,b!==null){y=b;continue}break}if(S.child===$.child){for($=S.child;$;){if($===y)return Q(S),c;if($===b)return Q(S),d;$=$.sibling}throw Error(r(188))}if(y.return!==b.return)y=S,b=$;else{for(var C=!1,V=S.child;V;){if(V===y){C=!0,y=S,b=$;break}if(V===b){C=!0,b=S,y=$;break}V=V.sibling}if(!C){for(V=$.child;V;){if(V===y){C=!0,y=$,b=S;break}if(V===b){C=!0,b=$,y=S;break}V=V.sibling}if(!C)throw Error(r(189))}}if(y.alternate!==b)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?c:d}function Ve(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c;for(c=c.child;c!==null;){if(d=Ve(c),d!==null)return d;c=c.sibling}return null}var Ne=Array.isArray,ke=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},ot=[],ai=-1;function St(c){return{current:c}}function ri(c){0>ai||(c.current=ot[ai],ot[ai]=null,ai--)}function Ft(c,d){ai++,ot[ai]=c.current,c.current=d}var Er=St(null),en=St(null),kr=St(null),ya=St(null);function ga(c,d){switch(Ft(kr,d),Ft(en,c),Ft(Er,null),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)&&(d=d.namespaceURI)?fZ(d):0;break;default:if(c=c===8?d.parentNode:d,d=c.tagName,c=c.namespaceURI)c=fZ(c),d=mZ(c,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}ri(Er),Ft(Er,d)}function to(){ri(Er),ri(en),ri(kr)}function gl(c){c.memoizedState!==null&&Ft(ya,c);var d=Er.current,y=mZ(d,c.type);d!==y&&(Ft(en,c),Ft(Er,y))}function va(c){en.current===c&&(ri(Er),ri(en)),ya.current===c&&(ri(ya),L1._currentValue=ct)}var vl=Object.prototype.hasOwnProperty,bl=t.unstable_scheduleCallback,ba=t.unstable_cancelCallback,Ou=t.unstable_shouldYield,is=t.unstable_requestPaint,wn=t.unstable_now,Uc=t.unstable_getCurrentPriorityLevel,Su=t.unstable_ImmediatePriority,nr=t.unstable_UserBlockingPriority,ks=t.unstable_NormalPriority,qO=t.unstable_LowPriority,eT=t.unstable_IdlePriority,s3=t.log,o3=t.unstable_setDisableYieldValue,fm=null,Cs=null;function a3(c){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(fm,c,void 0,(c.current.flags&128)===128)}catch{}}function _u(c){if(typeof s3=="function"&&o3(c),Cs&&typeof Cs.setStrictMode=="function")try{Cs.setStrictMode(fm,c)}catch{}}var Ms=Math.clz32?Math.clz32:c3,l3=Math.log,u3=Math.LN2;function c3(c){return c>>>=0,c===0?32:31-(l3(c)/u3|0)|0}var v0=128,b0=4194304;function Qc(c){var d=c&42;if(d!==0)return d;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function w0(c,d){var y=c.pendingLanes;if(y===0)return 0;var b=0,S=c.suspendedLanes,$=c.pingedLanes,C=c.warmLanes;c=c.finishedLanes!==0;var V=y&134217727;return V!==0?(y=V&~S,y!==0?b=Qc(y):($&=V,$!==0?b=Qc($):c||(C=V&~C,C!==0&&(b=Qc(C))))):(V=y&~S,V!==0?b=Qc(V):$!==0?b=Qc($):c||(C=y&~C,C!==0&&(b=Qc(C)))),b===0?0:d!==0&&d!==b&&(d&S)===0&&(S=b&-b,C=d&-d,S>=C||S===32&&(C&4194176)!==0)?d:b}function mm(c,d){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&d)===0}function h3(c,d){switch(c){case 1:case 2:case 4:case 8:return d+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tT(){var c=v0;return v0<<=1,(v0&4194176)===0&&(v0=128),c}function iT(){var c=b0;return b0<<=1,(b0&62914560)===0&&(b0=4194304),c}function se(c){for(var d=[],y=0;31>y;y++)d.push(c);return d}function li(c,d){c.pendingLanes|=d,d!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Ad(c,d,y,b,S,$){var C=c.pendingLanes;c.pendingLanes=y,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=y,c.entangledLanes&=y,c.errorRecoveryDisabledLanes&=y,c.shellSuspendCounter=0;var V=c.entanglements,U=c.expirationTimes,X=c.hiddenUpdates;for(y=C&~y;0<y;){var fe=31-Ms(y),_e=1<<fe;V[fe]=0,U[fe]=-1;var ne=X[fe];if(ne!==null)for(X[fe]=null,fe=0;fe<ne.length;fe++){var de=ne[fe];de!==null&&(de.lane&=-536870913)}y&=~_e}b!==0&&io(c,b,0),$!==0&&S===0&&c.tag!==0&&(c.suspendedLanes|=$&~(C&~d))}function io(c,d,y){c.pendingLanes|=d,c.suspendedLanes&=~d;var b=31-Ms(d);c.entangledLanes|=d,c.entanglements[b]=c.entanglements[b]|1073741824|y&4194218}function ym(c,d){var y=c.entangledLanes|=d;for(c=c.entanglements;y;){var b=31-Ms(y),S=1<<b;S&d|c[b]&d&&(c[b]|=d),y&=~S}}function Ge(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function gm(){var c=ke.p;return c!==0?c:(c=window.event,c===void 0?32:PZ(c.type))}function Dr(c,d){var y=ke.p;try{return ke.p=c,d()}finally{ke.p=y}}var ro=Math.random().toString(36).slice(2),On="__reactFiber$"+ro,Zi="__reactProps$"+ro,Bc="__reactContainer$"+ro,O0="__reactEvents$"+ro,mt="__reactListeners$"+ro,d3="__reactHandles$"+ro,GO="__reactResources$"+ro,vm="__reactMarker$"+ro;function ZO(c){delete c[On],delete c[Zi],delete c[O0],delete c[mt],delete c[d3]}function wl(c){var d=c[On];if(d)return d;for(var y=c.parentNode;y;){if(d=y[Bc]||y[On]){if(y=d.alternate,d.child!==null||y!==null&&y.child!==null)for(c=vZ(c);c!==null;){if(y=c[On])return y;c=vZ(c)}return d}c=y,y=c.parentNode}return null}function Id(c){if(c=c[On]||c[Bc]){var d=c.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return c}return null}function qc(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c.stateNode;throw Error(r(33))}function Li(c){var d=c[GO];return d||(d=c[GO]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Vr(c){c[vm]=!0}var HO=new Set,rT={};function Gc(c,d){Pd(c,d),Pd(c+"Capture",d)}function Pd(c,d){for(rT[c]=d,c=0;c<d.length;c++)HO.add(d[c])}var Ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p3=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),As={},nT={};function f3(c){return vl.call(nT,c)?!0:vl.call(As,c)?!1:p3.test(c)?nT[c]=!0:(As[c]=!0,!1)}function z(c,d,y){if(f3(d))if(y===null)c.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":c.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){c.removeAttribute(d);return}}c.setAttribute(d,""+y)}}function ce(c,d,y){if(y===null)c.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(d);return}c.setAttribute(d,""+y)}}function Se(c,d,y,b){if(b===null)c.removeAttribute(y);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(y);return}c.setAttributeNS(d,y,""+b)}}function He(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ui(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Hi(c){var d=ui(c)?"checked":"value",y=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),b=""+c[d];if(!c.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var S=y.get,$=y.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return S.call(this)},set:function(C){b=""+C,$.call(this,C)}}),Object.defineProperty(c,d,{enumerable:y.enumerable}),{getValue:function(){return b},setValue:function(C){b=""+C},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Wi(c){c._valueTracker||(c._valueTracker=Hi(c))}function Dn(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var y=d.getValue(),b="";return c&&(b=ui(c)?c.checked?"true":"false":c.value),c=b,c!==y?(d.setValue(c),!0):!1}function sT(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var R1e=/[\n"\\]/g;function wa(c){return c.replace(R1e,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function m3(c,d,y,b,S,$,C,V){c.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?c.type=C:c.removeAttribute("type"),d!=null?C==="number"?(d===0&&c.value===""||c.value!=d)&&(c.value=""+He(d)):c.value!==""+He(d)&&(c.value=""+He(d)):C!=="submit"&&C!=="reset"||c.removeAttribute("value"),d!=null?y3(c,C,He(d)):y!=null?y3(c,C,He(y)):b!=null&&c.removeAttribute("value"),S==null&&$!=null&&(c.defaultChecked=!!$),S!=null&&(c.checked=S&&typeof S!="function"&&typeof S!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?c.name=""+He(V):c.removeAttribute("name")}function bB(c,d,y,b,S,$,C,V){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(c.type=$),d!=null||y!=null){if(!($!=="submit"&&$!=="reset"||d!=null))return;y=y!=null?""+He(y):"",d=d!=null?""+He(d):y,V||d===c.value||(c.value=d),c.defaultValue=d}b=b??S,b=typeof b!="function"&&typeof b!="symbol"&&!!b,c.checked=V?c.checked:!!b,c.defaultChecked=!!b,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(c.name=C)}function y3(c,d,y){d==="number"&&sT(c.ownerDocument)===c||c.defaultValue===""+y||(c.defaultValue=""+y)}function S0(c,d,y,b){if(c=c.options,d){d={};for(var S=0;S<y.length;S++)d["$"+y[S]]=!0;for(y=0;y<c.length;y++)S=d.hasOwnProperty("$"+c[y].value),c[y].selected!==S&&(c[y].selected=S),S&&b&&(c[y].defaultSelected=!0)}else{for(y=""+He(y),d=null,S=0;S<c.length;S++){if(c[S].value===y){c[S].selected=!0,b&&(c[S].defaultSelected=!0);return}d!==null||c[S].disabled||(d=c[S])}d!==null&&(d.selected=!0)}}function wB(c,d,y){if(d!=null&&(d=""+He(d),d!==c.value&&(c.value=d),y==null)){c.defaultValue!==d&&(c.defaultValue=d);return}c.defaultValue=y!=null?""+He(y):""}function OB(c,d,y,b){if(d==null){if(b!=null){if(y!=null)throw Error(r(92));if(Ne(b)){if(1<b.length)throw Error(r(93));b=b[0]}y=b}y==null&&(y=""),d=y}y=He(d),c.defaultValue=y,b=c.textContent,b===y&&b!==""&&b!==null&&(c.value=b)}function _0(c,d){if(d){var y=c.firstChild;if(y&&y===c.lastChild&&y.nodeType===3){y.nodeValue=d;return}}c.textContent=d}var L1e=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function SB(c,d,y){var b=d.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?b?c.setProperty(d,""):d==="float"?c.cssFloat="":c[d]="":b?c.setProperty(d,y):typeof y!="number"||y===0||L1e.has(d)?d==="float"?c.cssFloat=y:c[d]=(""+y).trim():c[d]=y+"px"}function _B(c,d,y){if(d!=null&&typeof d!="object")throw Error(r(62));if(c=c.style,y!=null){for(var b in y)!y.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?c.setProperty(b,""):b==="float"?c.cssFloat="":c[b]="");for(var S in d)b=d[S],d.hasOwnProperty(S)&&y[S]!==b&&SB(c,S,b)}else for(var $ in d)d.hasOwnProperty($)&&SB(c,$,d[$])}function g3(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N1e=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),D1e=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oT(c){return D1e.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var v3=null;function b3(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var x0=null,$0=null;function xB(c){var d=Id(c);if(d&&(c=d.stateNode)){var y=c[Zi]||null;e:switch(c=d.stateNode,d.type){case"input":if(m3(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),d=y.name,y.type==="radio"&&d!=null){for(y=c;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+wa(""+d)+'"][type="radio"]'),d=0;d<y.length;d++){var b=y[d];if(b!==c&&b.form===c.form){var S=b[Zi]||null;if(!S)throw Error(r(90));m3(b,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(d=0;d<y.length;d++)b=y[d],b.form===c.form&&Dn(b)}break e;case"textarea":wB(c,y.value,y.defaultValue);break e;case"select":d=y.value,d!=null&&S0(c,!!y.multiple,d,!1)}}}var w3=!1;function $B(c,d,y){if(w3)return c(d,y);w3=!0;try{var b=c(d);return b}finally{if(w3=!1,(x0!==null||$0!==null)&&(QT(),x0&&(d=x0,c=$0,$0=x0=null,xB(d),c)))for(d=0;d<c.length;d++)xB(c[d])}}function WO(c,d){var y=c.stateNode;if(y===null)return null;var b=y[Zi]||null;if(b===null)return null;y=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(c=c.type,b=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!b;break e;default:c=!1}if(c)return null;if(y&&typeof y!="function")throw Error(r(231,d,typeof y));return y}var O3=!1;if(Ol)try{var XO={};Object.defineProperty(XO,"passive",{get:function(){O3=!0}}),window.addEventListener("test",XO,XO),window.removeEventListener("test",XO,XO)}catch{O3=!1}var Rd=null,S3=null,aT=null;function TB(){if(aT)return aT;var c,d=S3,y=d.length,b,S="value"in Rd?Rd.value:Rd.textContent,$=S.length;for(c=0;c<y&&d[c]===S[c];c++);var C=y-c;for(b=1;b<=C&&d[y-b]===S[$-b];b++);return aT=S.slice(c,1<b?1-b:void 0)}function lT(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function uT(){return!0}function EB(){return!1}function no(c){function d(y,b,S,$,C){this._reactName=y,this._targetInst=S,this.type=b,this.nativeEvent=$,this.target=C,this.currentTarget=null;for(var V in c)c.hasOwnProperty(V)&&(y=c[V],this[V]=y?y($):$[V]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?uT:EB,this.isPropagationStopped=EB,this}return B(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=uT)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=uT)},persist:function(){},isPersistent:uT}),d}var bm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cT=no(bm),YO=B({},bm,{view:0,detail:0}),V1e=no(YO),_3,x3,JO,hT=B({},YO,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T3,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==JO&&(JO&&c.type==="mousemove"?(_3=c.screenX-JO.screenX,x3=c.screenY-JO.screenY):x3=_3=0,JO=c),_3)},movementY:function(c){return"movementY"in c?c.movementY:x3}}),kB=no(hT),F1e=B({},hT,{dataTransfer:0}),j1e=no(F1e),z1e=B({},YO,{relatedTarget:0}),$3=no(z1e),U1e=B({},bm,{animationName:0,elapsedTime:0,pseudoElement:0}),Q1e=no(U1e),B1e=B({},bm,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),q1e=no(B1e),G1e=B({},bm,{data:0}),CB=no(G1e),Z1e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H1e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W1e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X1e(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=W1e[c])?!!d[c]:!1}function T3(){return X1e}var Y1e=B({},YO,{key:function(c){if(c.key){var d=Z1e[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=lT(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?H1e[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T3,charCode:function(c){return c.type==="keypress"?lT(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?lT(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),J1e=no(Y1e),K1e=B({},hT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MB=no(K1e),eSe=B({},YO,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T3}),tSe=no(eSe),iSe=B({},bm,{propertyName:0,elapsedTime:0,pseudoElement:0}),rSe=no(iSe),nSe=B({},hT,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),sSe=no(nSe),oSe=B({},bm,{newState:0,oldState:0}),aSe=no(oSe),lSe=[9,13,27,32],E3=Ol&&"CompositionEvent"in window,KO=null;Ol&&"documentMode"in document&&(KO=document.documentMode);var uSe=Ol&&"TextEvent"in window&&!KO,AB=Ol&&(!E3||KO&&8<KO&&11>=KO),IB=" ",PB=!1;function RB(c,d){switch(c){case"keyup":return lSe.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LB(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var T0=!1;function cSe(c,d){switch(c){case"compositionend":return LB(d);case"keypress":return d.which!==32?null:(PB=!0,IB);case"textInput":return c=d.data,c===IB&&PB?null:c;default:return null}}function hSe(c,d){if(T0)return c==="compositionend"||!E3&&RB(c,d)?(c=TB(),aT=S3=Rd=null,T0=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return AB&&d.locale!=="ko"?null:d.data;default:return null}}var dSe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NB(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!dSe[c.type]:d==="textarea"}function DB(c,d,y,b){x0?$0?$0.push(b):$0=[b]:x0=b,d=HT(d,"onChange"),0<d.length&&(y=new cT("onChange","change",null,y,b),c.push({event:y,listeners:d}))}var e1=null,t1=null;function pSe(c){uZ(c,0)}function dT(c){var d=qc(c);if(Dn(d))return c}function VB(c,d){if(c==="change")return d}var FB=!1;if(Ol){var k3;if(Ol){var C3="oninput"in document;if(!C3){var jB=document.createElement("div");jB.setAttribute("oninput","return;"),C3=typeof jB.oninput=="function"}k3=C3}else k3=!1;FB=k3&&(!document.documentMode||9<document.documentMode)}function zB(){e1&&(e1.detachEvent("onpropertychange",UB),t1=e1=null)}function UB(c){if(c.propertyName==="value"&&dT(t1)){var d=[];DB(d,t1,c,b3(c)),$B(pSe,d)}}function fSe(c,d,y){c==="focusin"?(zB(),e1=d,t1=y,e1.attachEvent("onpropertychange",UB)):c==="focusout"&&zB()}function mSe(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return dT(t1)}function ySe(c,d){if(c==="click")return dT(d)}function gSe(c,d){if(c==="input"||c==="change")return dT(d)}function vSe(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Lo=typeof Object.is=="function"?Object.is:vSe;function i1(c,d){if(Lo(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var y=Object.keys(c),b=Object.keys(d);if(y.length!==b.length)return!1;for(b=0;b<y.length;b++){var S=y[b];if(!vl.call(d,S)||!Lo(c[S],d[S]))return!1}return!0}function QB(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function BB(c,d){var y=QB(c);c=0;for(var b;y;){if(y.nodeType===3){if(b=c+y.textContent.length,c<=d&&b>=d)return{node:y,offset:d-c};c=b}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=QB(y)}}function qB(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?qB(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function GB(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var d=sT(c.document);d instanceof c.HTMLIFrameElement;){try{var y=typeof d.contentWindow.location.href=="string"}catch{y=!1}if(y)c=d.contentWindow;else break;d=sT(c.document)}return d}function M3(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function bSe(c,d){var y=GB(d);d=c.focusedElem;var b=c.selectionRange;if(y!==d&&d&&d.ownerDocument&&qB(d.ownerDocument.documentElement,d)){if(b!==null&&M3(d)){if(c=b.start,y=b.end,y===void 0&&(y=c),"selectionStart"in d)d.selectionStart=c,d.selectionEnd=Math.min(y,d.value.length);else if(y=(c=d.ownerDocument||document)&&c.defaultView||window,y.getSelection){y=y.getSelection();var S=d.textContent.length,$=Math.min(b.start,S);b=b.end===void 0?$:Math.min(b.end,S),!y.extend&&$>b&&(S=b,b=$,$=S),S=BB(d,$);var C=BB(d,b);S&&C&&(y.rangeCount!==1||y.anchorNode!==S.node||y.anchorOffset!==S.offset||y.focusNode!==C.node||y.focusOffset!==C.offset)&&(c=c.createRange(),c.setStart(S.node,S.offset),y.removeAllRanges(),$>b?(y.addRange(c),y.extend(C.node,C.offset)):(c.setEnd(C.node,C.offset),y.addRange(c)))}}for(c=[],y=d;y=y.parentNode;)y.nodeType===1&&c.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<c.length;d++)y=c[d],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}var wSe=Ol&&"documentMode"in document&&11>=document.documentMode,E0=null,A3=null,r1=null,I3=!1;function ZB(c,d,y){var b=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;I3||E0==null||E0!==sT(b)||(b=E0,"selectionStart"in b&&M3(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),r1&&i1(r1,b)||(r1=b,b=HT(A3,"onSelect"),0<b.length&&(d=new cT("onSelect","select",null,d,y),c.push({event:d,listeners:b}),d.target=E0)))}function wm(c,d){var y={};return y[c.toLowerCase()]=d.toLowerCase(),y["Webkit"+c]="webkit"+d,y["Moz"+c]="moz"+d,y}var k0={animationend:wm("Animation","AnimationEnd"),animationiteration:wm("Animation","AnimationIteration"),animationstart:wm("Animation","AnimationStart"),transitionrun:wm("Transition","TransitionRun"),transitionstart:wm("Transition","TransitionStart"),transitioncancel:wm("Transition","TransitionCancel"),transitionend:wm("Transition","TransitionEnd")},P3={},HB={};Ol&&(HB=document.createElement("div").style,"AnimationEvent"in window||(delete k0.animationend.animation,delete k0.animationiteration.animation,delete k0.animationstart.animation),"TransitionEvent"in window||delete k0.transitionend.transition);function Om(c){if(P3[c])return P3[c];if(!k0[c])return c;var d=k0[c],y;for(y in d)if(d.hasOwnProperty(y)&&y in HB)return P3[c]=d[y];return c}var WB=Om("animationend"),XB=Om("animationiteration"),YB=Om("animationstart"),OSe=Om("transitionrun"),SSe=Om("transitionstart"),_Se=Om("transitioncancel"),JB=Om("transitionend"),KB=new Map,eq="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Sl(c,d){KB.set(c,d),Gc(d,[c])}var Oa=[],C0=0,R3=0;function pT(){for(var c=C0,d=R3=C0=0;d<c;){var y=Oa[d];Oa[d++]=null;var b=Oa[d];Oa[d++]=null;var S=Oa[d];Oa[d++]=null;var $=Oa[d];if(Oa[d++]=null,b!==null&&S!==null){var C=b.pending;C===null?S.next=S:(S.next=C.next,C.next=S),b.pending=S}$!==0&&tq(y,S,$)}}function fT(c,d,y,b){Oa[C0++]=c,Oa[C0++]=d,Oa[C0++]=y,Oa[C0++]=b,R3|=b,c.lanes|=b,c=c.alternate,c!==null&&(c.lanes|=b)}function L3(c,d,y,b){return fT(c,d,y,b),mT(c)}function Ld(c,d){return fT(c,null,null,d),mT(c)}function tq(c,d,y){c.lanes|=y;var b=c.alternate;b!==null&&(b.lanes|=y);for(var S=!1,$=c.return;$!==null;)$.childLanes|=y,b=$.alternate,b!==null&&(b.childLanes|=y),$.tag===22&&(c=$.stateNode,c===null||c._visibility&1||(S=!0)),c=$,$=$.return;S&&d!==null&&c.tag===3&&($=c.stateNode,S=31-Ms(y),$=$.hiddenUpdates,c=$[S],c===null?$[S]=[d]:c.push(d),d.lane=y|536870912)}function mT(c){if(50<k1)throw k1=0,zL=null,Error(r(185));for(var d=c.return;d!==null;)c=d,d=c.return;return c.tag===3?c.stateNode:null}var M0={},iq=new WeakMap;function Sa(c,d){if(typeof c=="object"&&c!==null){var y=iq.get(c);return y!==void 0?y:(d={value:c,source:d,stack:he(d)},iq.set(c,d),d)}return{value:c,source:d,stack:he(d)}}var A0=[],I0=0,yT=null,gT=0,_a=[],xa=0,Sm=null,Zc=1,Hc="";function _m(c,d){A0[I0++]=gT,A0[I0++]=yT,yT=c,gT=d}function rq(c,d,y){_a[xa++]=Zc,_a[xa++]=Hc,_a[xa++]=Sm,Sm=c;var b=Zc;c=Hc;var S=32-Ms(b)-1;b&=~(1<<S),y+=1;var $=32-Ms(d)+S;if(30<$){var C=S-S%5;$=(b&(1<<C)-1).toString(32),b>>=C,S-=C,Zc=1<<32-Ms(d)+S|y<<S|b,Hc=$+c}else Zc=1<<$|y<<S|b,Hc=c}function N3(c){c.return!==null&&(_m(c,1),rq(c,1,0))}function D3(c){for(;c===yT;)yT=A0[--I0],A0[I0]=null,gT=A0[--I0],A0[I0]=null;for(;c===Sm;)Sm=_a[--xa],_a[xa]=null,Hc=_a[--xa],_a[xa]=null,Zc=_a[--xa],_a[xa]=null}var Is=null,Vn=null,Xt=!1,_l=null,xu=!1,V3=Error(r(519));function xm(c){var d=Error(r(418,""));throw o1(Sa(d,c)),V3}function nq(c){var d=c.stateNode,y=c.type,b=c.memoizedProps;switch(d[On]=c,d[Zi]=b,y){case"dialog":jt("cancel",d),jt("close",d);break;case"iframe":case"object":case"embed":jt("load",d);break;case"video":case"audio":for(y=0;y<M1.length;y++)jt(M1[y],d);break;case"source":jt("error",d);break;case"img":case"image":case"link":jt("error",d),jt("load",d);break;case"details":jt("toggle",d);break;case"input":jt("invalid",d),bB(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),Wi(d);break;case"select":jt("invalid",d);break;case"textarea":jt("invalid",d),OB(d,b.value,b.defaultValue,b.children),Wi(d)}y=b.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||d.textContent===""+y||b.suppressHydrationWarning===!0||pZ(d.textContent,y)?(b.popover!=null&&(jt("beforetoggle",d),jt("toggle",d)),b.onScroll!=null&&jt("scroll",d),b.onScrollEnd!=null&&jt("scrollend",d),b.onClick!=null&&(d.onclick=WT),d=!0):d=!1,d||xm(c)}function sq(c){for(Is=c.return;Is;)switch(Is.tag){case 3:case 27:xu=!0;return;case 5:case 13:xu=!1;return;default:Is=Is.return}}function n1(c){if(c!==Is)return!1;if(!Xt)return sq(c),Xt=!0,!1;var d=!1,y;if((y=c.tag!==3&&c.tag!==27)&&((y=c.tag===5)&&(y=c.type,y=!(y!=="form"&&y!=="button")||n5(c.type,c.memoizedProps)),y=!y),y&&(d=!0),d&&Vn&&xm(c),sq(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8)if(y=c.data,y==="/$"){if(d===0){Vn=$l(c.nextSibling);break e}d--}else y!=="$"&&y!=="$!"&&y!=="$?"||d++;c=c.nextSibling}Vn=null}}else Vn=Is?$l(c.stateNode.nextSibling):null;return!0}function s1(){Vn=Is=null,Xt=!1}function o1(c){_l===null?_l=[c]:_l.push(c)}var a1=Error(r(460)),oq=Error(r(474)),F3={then:function(){}};function aq(c){return c=c.status,c==="fulfilled"||c==="rejected"}function vT(){}function lq(c,d,y){switch(y=c[y],y===void 0?c.push(d):y!==d&&(d.then(vT,vT),d=y),d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,c===a1?Error(r(483)):c;default:if(typeof d.status=="string")d.then(vT,vT);else{if(c=Ti,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=d,c.status="pending",c.then(function(b){if(d.status==="pending"){var S=d;S.status="fulfilled",S.value=b}},function(b){if(d.status==="pending"){var S=d;S.status="rejected",S.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,c===a1?Error(r(483)):c}throw l1=d,a1}}var l1=null;function uq(){if(l1===null)throw Error(r(459));var c=l1;return l1=null,c}var P0=null,u1=0;function bT(c){var d=u1;return u1+=1,P0===null&&(P0=[]),lq(P0,c,d)}function c1(c,d){d=d.props.ref,c.ref=d!==void 0?d:null}function wT(c,d){throw d.$$typeof===s?Error(r(525)):(c=Object.prototype.toString.call(d),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c)))}function cq(c){var d=c._init;return d(c._payload)}function hq(c){function d(ee,H){if(c){var re=ee.deletions;re===null?(ee.deletions=[H],ee.flags|=16):re.push(H)}}function y(ee,H){if(!c)return null;for(;H!==null;)d(ee,H),H=H.sibling;return null}function b(ee){for(var H=new Map;ee!==null;)ee.key!==null?H.set(ee.key,ee):H.set(ee.index,ee),ee=ee.sibling;return H}function S(ee,H){return ee=Zd(ee,H),ee.index=0,ee.sibling=null,ee}function $(ee,H,re){return ee.index=re,c?(re=ee.alternate,re!==null?(re=re.index,re<H?(ee.flags|=33554434,H):re):(ee.flags|=33554434,H)):(ee.flags|=1048576,H)}function C(ee){return c&&ee.alternate===null&&(ee.flags|=33554434),ee}function V(ee,H,re,be){return H===null||H.tag!==6?(H=PL(re,ee.mode,be),H.return=ee,H):(H=S(H,re),H.return=ee,H)}function U(ee,H,re,be){var Ze=re.type;return Ze===l?fe(ee,H,re.props.children,be,re.key):H!==null&&(H.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===E&&cq(Ze)===H.type)?(H=S(H,re.props),c1(H,re),H.return=ee,H):(H=VT(re.type,re.key,re.props,null,ee.mode,be),c1(H,re),H.return=ee,H)}function X(ee,H,re,be){return H===null||H.tag!==4||H.stateNode.containerInfo!==re.containerInfo||H.stateNode.implementation!==re.implementation?(H=RL(re,ee.mode,be),H.return=ee,H):(H=S(H,re.children||[]),H.return=ee,H)}function fe(ee,H,re,be,Ze){return H===null||H.tag!==7?(H=Rm(re,ee.mode,be,Ze),H.return=ee,H):(H=S(H,re),H.return=ee,H)}function _e(ee,H,re){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=PL(""+H,ee.mode,re),H.return=ee,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case o:return re=VT(H.type,H.key,H.props,null,ee.mode,re),c1(re,H),re.return=ee,re;case a:return H=RL(H,ee.mode,re),H.return=ee,H;case E:var be=H._init;return H=be(H._payload),_e(ee,H,re)}if(Ne(H)||D(H))return H=Rm(H,ee.mode,re,null),H.return=ee,H;if(typeof H.then=="function")return _e(ee,bT(H),re);if(H.$$typeof===w)return _e(ee,LT(ee,H),re);wT(ee,H)}return null}function ne(ee,H,re,be){var Ze=H!==null?H.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Ze!==null?null:V(ee,H,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case o:return re.key===Ze?U(ee,H,re,be):null;case a:return re.key===Ze?X(ee,H,re,be):null;case E:return Ze=re._init,re=Ze(re._payload),ne(ee,H,re,be)}if(Ne(re)||D(re))return Ze!==null?null:fe(ee,H,re,be,null);if(typeof re.then=="function")return ne(ee,H,bT(re),be);if(re.$$typeof===w)return ne(ee,H,LT(ee,re),be);wT(ee,re)}return null}function de(ee,H,re,be,Ze){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return ee=ee.get(re)||null,V(H,ee,""+be,Ze);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case o:return ee=ee.get(be.key===null?re:be.key)||null,U(H,ee,be,Ze);case a:return ee=ee.get(be.key===null?re:be.key)||null,X(H,ee,be,Ze);case E:var Pt=be._init;return be=Pt(be._payload),de(ee,H,re,be,Ze)}if(Ne(be)||D(be))return ee=ee.get(re)||null,fe(H,ee,be,Ze,null);if(typeof be.then=="function")return de(ee,H,re,bT(be),Ze);if(be.$$typeof===w)return de(ee,H,re,LT(H,be),Ze);wT(H,be)}return null}function Ke(ee,H,re,be){for(var Ze=null,Pt=null,at=H,pt=H=0,xn=null;at!==null&&pt<re.length;pt++){at.index>pt?(xn=at,at=null):xn=at.sibling;var Yt=ne(ee,at,re[pt],be);if(Yt===null){at===null&&(at=xn);break}c&&at&&Yt.alternate===null&&d(ee,at),H=$(Yt,H,pt),Pt===null?Ze=Yt:Pt.sibling=Yt,Pt=Yt,at=xn}if(pt===re.length)return y(ee,at),Xt&&_m(ee,pt),Ze;if(at===null){for(;pt<re.length;pt++)at=_e(ee,re[pt],be),at!==null&&(H=$(at,H,pt),Pt===null?Ze=at:Pt.sibling=at,Pt=at);return Xt&&_m(ee,pt),Ze}for(at=b(at);pt<re.length;pt++)xn=de(at,ee,pt,re[pt],be),xn!==null&&(c&&xn.alternate!==null&&at.delete(xn.key===null?pt:xn.key),H=$(xn,H,pt),Pt===null?Ze=xn:Pt.sibling=xn,Pt=xn);return c&&at.forEach(function(ep){return d(ee,ep)}),Xt&&_m(ee,pt),Ze}function $t(ee,H,re,be){if(re==null)throw Error(r(151));for(var Ze=null,Pt=null,at=H,pt=H=0,xn=null,Yt=re.next();at!==null&&!Yt.done;pt++,Yt=re.next()){at.index>pt?(xn=at,at=null):xn=at.sibling;var ep=ne(ee,at,Yt.value,be);if(ep===null){at===null&&(at=xn);break}c&&at&&ep.alternate===null&&d(ee,at),H=$(ep,H,pt),Pt===null?Ze=ep:Pt.sibling=ep,Pt=ep,at=xn}if(Yt.done)return y(ee,at),Xt&&_m(ee,pt),Ze;if(at===null){for(;!Yt.done;pt++,Yt=re.next())Yt=_e(ee,Yt.value,be),Yt!==null&&(H=$(Yt,H,pt),Pt===null?Ze=Yt:Pt.sibling=Yt,Pt=Yt);return Xt&&_m(ee,pt),Ze}for(at=b(at);!Yt.done;pt++,Yt=re.next())Yt=de(at,ee,pt,Yt.value,be),Yt!==null&&(c&&Yt.alternate!==null&&at.delete(Yt.key===null?pt:Yt.key),H=$(Yt,H,pt),Pt===null?Ze=Yt:Pt.sibling=Yt,Pt=Yt);return c&&at.forEach(function(D_e){return d(ee,D_e)}),Xt&&_m(ee,pt),Ze}function yr(ee,H,re,be){if(typeof re=="object"&&re!==null&&re.type===l&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case o:e:{for(var Ze=re.key;H!==null;){if(H.key===Ze){if(Ze=re.type,Ze===l){if(H.tag===7){y(ee,H.sibling),be=S(H,re.props.children),be.return=ee,ee=be;break e}}else if(H.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===E&&cq(Ze)===H.type){y(ee,H.sibling),be=S(H,re.props),c1(be,re),be.return=ee,ee=be;break e}y(ee,H);break}else d(ee,H);H=H.sibling}re.type===l?(be=Rm(re.props.children,ee.mode,be,re.key),be.return=ee,ee=be):(be=VT(re.type,re.key,re.props,null,ee.mode,be),c1(be,re),be.return=ee,ee=be)}return C(ee);case a:e:{for(Ze=re.key;H!==null;){if(H.key===Ze)if(H.tag===4&&H.stateNode.containerInfo===re.containerInfo&&H.stateNode.implementation===re.implementation){y(ee,H.sibling),be=S(H,re.children||[]),be.return=ee,ee=be;break e}else{y(ee,H);break}else d(ee,H);H=H.sibling}be=RL(re,ee.mode,be),be.return=ee,ee=be}return C(ee);case E:return Ze=re._init,re=Ze(re._payload),yr(ee,H,re,be)}if(Ne(re))return Ke(ee,H,re,be);if(D(re)){if(Ze=D(re),typeof Ze!="function")throw Error(r(150));return re=Ze.call(re),$t(ee,H,re,be)}if(typeof re.then=="function")return yr(ee,H,bT(re),be);if(re.$$typeof===w)return yr(ee,H,LT(ee,re),be);wT(ee,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,H!==null&&H.tag===6?(y(ee,H.sibling),be=S(H,re),be.return=ee,ee=be):(y(ee,H),be=PL(re,ee.mode,be),be.return=ee,ee=be),C(ee)):y(ee,H)}return function(ee,H,re,be){try{u1=0;var Ze=yr(ee,H,re,be);return P0=null,Ze}catch(at){if(at===a1)throw at;var Pt=ka(29,at,null,ee.mode);return Pt.lanes=be,Pt.return=ee,Pt}finally{}}}var $m=hq(!0),dq=hq(!1),R0=St(null),OT=St(0);function pq(c,d){c=sh,Ft(OT,c),Ft(R0,d),sh=c|d.baseLanes}function j3(){Ft(OT,sh),Ft(R0,R0.current)}function z3(){sh=OT.current,ri(R0),ri(OT)}var $a=St(null),$u=null;function Nd(c){var d=c.alternate;Ft(tn,tn.current&1),Ft($a,c),$u===null&&(d===null||R0.current!==null||d.memoizedState!==null)&&($u=c)}function fq(c){if(c.tag===22){if(Ft(tn,tn.current),Ft($a,c),$u===null){var d=c.alternate;d!==null&&d.memoizedState!==null&&($u=c)}}else Dd()}function Dd(){Ft(tn,tn.current),Ft($a,$a.current)}function Wc(c){ri($a),$u===c&&($u=null),ri(tn)}var tn=St(0);function ST(c){for(var d=c;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var xSe=typeof AbortController<"u"?AbortController:function(){var c=[],d=this.signal={aborted:!1,addEventListener:function(y,b){c.push(b)}};this.abort=function(){d.aborted=!0,c.forEach(function(y){return y()})}},$Se=t.unstable_scheduleCallback,TSe=t.unstable_NormalPriority,rn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function U3(){return{controller:new xSe,data:new Map,refCount:0}}function h1(c){c.refCount--,c.refCount===0&&$Se(TSe,function(){c.controller.abort()})}var d1=null,Q3=0,L0=0,N0=null;function ESe(c,d){if(d1===null){var y=d1=[];Q3=0,L0=WL(),N0={status:"pending",value:void 0,then:function(b){y.push(b)}}}return Q3++,d.then(mq,mq),d}function mq(){if(--Q3===0&&d1!==null){N0!==null&&(N0.status="fulfilled");var c=d1;d1=null,L0=0,N0=null;for(var d=0;d<c.length;d++)(0,c[d])()}}function kSe(c,d){var y=[],b={status:"pending",value:null,reason:null,then:function(S){y.push(S)}};return c.then(function(){b.status="fulfilled",b.value=d;for(var S=0;S<y.length;S++)(0,y[S])(d)},function(S){for(b.status="rejected",b.reason=S,S=0;S<y.length;S++)(0,y[S])(void 0)}),b}var yq=j.S;j.S=function(c,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&ESe(c,d),yq!==null&&yq(c,d)};var Tm=St(null);function B3(){var c=Tm.current;return c!==null?c:Ti.pooledCache}function _T(c,d){d===null?Ft(Tm,Tm.current):Ft(Tm,d.pool)}function gq(){var c=B3();return c===null?null:{parent:rn._currentValue,pool:c}}var Vd=0,Mt=null,fi=null,Fr=null,xT=!1,D0=!1,Em=!1,$T=0,p1=0,V0=null,CSe=0;function Cr(){throw Error(r(321))}function q3(c,d){if(d===null)return!1;for(var y=0;y<d.length&&y<c.length;y++)if(!Lo(c[y],d[y]))return!1;return!0}function G3(c,d,y,b,S,$){return Vd=$,Mt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,j.H=c===null||c.memoizedState===null?km:Fd,Em=!1,$=y(b,S),Em=!1,D0&&($=bq(d,y,b,S)),vq(c),$}function vq(c){j.H=Tu;var d=fi!==null&&fi.next!==null;if(Vd=0,Fr=fi=Mt=null,xT=!1,p1=0,V0=null,d)throw Error(r(300));c===null||Sn||(c=c.dependencies,c!==null&&RT(c)&&(Sn=!0))}function bq(c,d,y,b){Mt=c;var S=0;do{if(D0&&(V0=null),p1=0,D0=!1,25<=S)throw Error(r(301));if(S+=1,Fr=fi=null,c.updateQueue!=null){var $=c.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}j.H=Cm,$=d(y,b)}while(D0);return $}function MSe(){var c=j.H,d=c.useState()[0];return d=typeof d.then=="function"?f1(d):d,c=c.useState()[0],(fi!==null?fi.memoizedState:null)!==c&&(Mt.flags|=1024),d}function Z3(){var c=$T!==0;return $T=0,c}function H3(c,d,y){d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~y}function W3(c){if(xT){for(c=c.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}xT=!1}Vd=0,Fr=fi=Mt=null,D0=!1,p1=$T=0,V0=null}function so(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Mt.memoizedState=Fr=c:Fr=Fr.next=c,Fr}function jr(){if(fi===null){var c=Mt.alternate;c=c!==null?c.memoizedState:null}else c=fi.next;var d=Fr===null?Mt.memoizedState:Fr.next;if(d!==null)Fr=d,fi=c;else{if(c===null)throw Mt.alternate===null?Error(r(467)):Error(r(310));fi=c,c={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Fr===null?Mt.memoizedState=Fr=c:Fr=Fr.next=c}return Fr}var TT;TT=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function f1(c){var d=p1;return p1+=1,V0===null&&(V0=[]),c=lq(V0,c,d),d=Mt,(Fr===null?d.memoizedState:Fr.next)===null&&(d=d.alternate,j.H=d===null||d.memoizedState===null?km:Fd),c}function ET(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return f1(c);if(c.$$typeof===w)return rs(c)}throw Error(r(438,String(c)))}function X3(c){var d=null,y=Mt.updateQueue;if(y!==null&&(d=y.memoCache),d==null){var b=Mt.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(S){return S.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),y===null&&(y=TT(),Mt.updateQueue=y),y.memoCache=d,y=d.data[d.index],y===void 0)for(y=d.data[d.index]=Array(c),b=0;b<c;b++)y[b]=M;return d.index++,y}function Xc(c,d){return typeof d=="function"?d(c):d}function kT(c){var d=jr();return Y3(d,fi,c)}function Y3(c,d,y){var b=c.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=y;var S=c.baseQueue,$=b.pending;if($!==null){if(S!==null){var C=S.next;S.next=$.next,$.next=C}d.baseQueue=S=$,b.pending=null}if($=c.baseState,S===null)c.memoizedState=$;else{d=S.next;var V=C=null,U=null,X=d,fe=!1;do{var _e=X.lane&-536870913;if(_e!==X.lane?(Ut&_e)===_e:(Vd&_e)===_e){var ne=X.revertLane;if(ne===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),_e===L0&&(fe=!0);else if((Vd&ne)===ne){X=X.next,ne===L0&&(fe=!0);continue}else _e={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(V=U=_e,C=$):U=U.next=_e,Mt.lanes|=ne,Hd|=ne;_e=X.action,Em&&y($,_e),$=X.hasEagerState?X.eagerState:y($,_e)}else ne={lane:_e,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(V=U=ne,C=$):U=U.next=ne,Mt.lanes|=_e,Hd|=_e;X=X.next}while(X!==null&&X!==d);if(U===null?C=$:U.next=V,!Lo($,c.memoizedState)&&(Sn=!0,fe&&(y=N0,y!==null)))throw y;c.memoizedState=$,c.baseState=C,c.baseQueue=U,b.lastRenderedState=$}return S===null&&(b.lanes=0),[c.memoizedState,b.dispatch]}function J3(c){var d=jr(),y=d.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=c;var b=y.dispatch,S=y.pending,$=d.memoizedState;if(S!==null){y.pending=null;var C=S=S.next;do $=c($,C.action),C=C.next;while(C!==S);Lo($,d.memoizedState)||(Sn=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),y.lastRenderedState=$}return[$,b]}function wq(c,d,y){var b=Mt,S=jr(),$=Xt;if($){if(y===void 0)throw Error(r(407));y=y()}else y=d();var C=!Lo((fi||S).memoizedState,y);if(C&&(S.memoizedState=y,Sn=!0),S=S.queue,tL(_q.bind(null,b,S,c),[c]),S.getSnapshot!==d||C||Fr!==null&&Fr.memoizedState.tag&1){if(b.flags|=2048,F0(9,Sq.bind(null,b,S,y,d),{destroy:void 0},null),Ti===null)throw Error(r(349));$||(Vd&60)!==0||Oq(b,d,y)}return y}function Oq(c,d,y){c.flags|=16384,c={getSnapshot:d,value:y},d=Mt.updateQueue,d===null?(d=TT(),Mt.updateQueue=d,d.stores=[c]):(y=d.stores,y===null?d.stores=[c]:y.push(c))}function Sq(c,d,y,b){d.value=y,d.getSnapshot=b,xq(d)&&$q(c)}function _q(c,d,y){return y(function(){xq(d)&&$q(c)})}function xq(c){var d=c.getSnapshot;c=c.value;try{var y=d();return!Lo(c,y)}catch{return!0}}function $q(c){var d=Ld(c,2);d!==null&&Ps(d,c,2)}function K3(c){var d=so();if(typeof c=="function"){var y=c;if(c=y(),Em){_u(!0);try{y()}finally{_u(!1)}}}return d.memoizedState=d.baseState=c,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:c},d}function Tq(c,d,y,b){return c.baseState=y,Y3(c,fi,typeof b=="function"?b:Xc)}function ASe(c,d,y,b,S){if(AT(c))throw Error(r(485));if(c=d.action,c!==null){var $={payload:S,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){$.listeners.push(C)}};j.T!==null?y(!0):$.isTransition=!1,b($),y=d.pending,y===null?($.next=d.pending=$,Eq(d,$)):($.next=y.next,d.pending=y.next=$)}}function Eq(c,d){var y=d.action,b=d.payload,S=c.state;if(d.isTransition){var $=j.T,C={};j.T=C;try{var V=y(S,b),U=j.S;U!==null&&U(C,V),kq(c,d,V)}catch(X){eL(c,d,X)}finally{j.T=$}}else try{$=y(S,b),kq(c,d,$)}catch(X){eL(c,d,X)}}function kq(c,d,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(b){Cq(c,d,b)},function(b){return eL(c,d,b)}):Cq(c,d,y)}function Cq(c,d,y){d.status="fulfilled",d.value=y,Mq(d),c.state=y,d=c.pending,d!==null&&(y=d.next,y===d?c.pending=null:(y=y.next,d.next=y,Eq(c,y)))}function eL(c,d,y){var b=c.pending;if(c.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=y,Mq(d),d=d.next;while(d!==b)}c.action=null}function Mq(c){c=c.listeners;for(var d=0;d<c.length;d++)(0,c[d])()}function Aq(c,d){return d}function Iq(c,d){if(Xt){var y=Ti.formState;if(y!==null){e:{var b=Mt;if(Xt){if(Vn){t:{for(var S=Vn,$=xu;S.nodeType!==8;){if(!$){S=null;break t}if(S=$l(S.nextSibling),S===null){S=null;break t}}$=S.data,S=$==="F!"||$==="F"?S:null}if(S){Vn=$l(S.nextSibling),b=S.data==="F!";break e}}xm(b)}b=!1}b&&(d=y[0])}}return y=so(),y.memoizedState=y.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aq,lastRenderedState:d},y.queue=b,y=Xq.bind(null,Mt,b),b.dispatch=y,b=K3(!1),$=oL.bind(null,Mt,!1,b.queue),b=so(),S={state:d,dispatch:null,action:c,pending:null},b.queue=S,y=ASe.bind(null,Mt,S,$,y),S.dispatch=y,b.memoizedState=c,[d,y,!1]}function Pq(c){var d=jr();return Rq(d,fi,c)}function Rq(c,d,y){d=Y3(c,d,Aq)[0],c=kT(Xc)[0],d=typeof d=="object"&&d!==null&&typeof d.then=="function"?f1(d):d;var b=jr(),S=b.queue,$=S.dispatch;return y!==b.memoizedState&&(Mt.flags|=2048,F0(9,ISe.bind(null,S,y),{destroy:void 0},null)),[d,$,c]}function ISe(c,d){c.action=d}function Lq(c){var d=jr(),y=fi;if(y!==null)return Rq(d,y,c);jr(),d=d.memoizedState,y=jr();var b=y.queue.dispatch;return y.memoizedState=c,[d,b,!1]}function F0(c,d,y,b){return c={tag:c,create:d,inst:y,deps:b,next:null},d=Mt.updateQueue,d===null&&(d=TT(),Mt.updateQueue=d),y=d.lastEffect,y===null?d.lastEffect=c.next=c:(b=y.next,y.next=c,c.next=b,d.lastEffect=c),c}function Nq(){return jr().memoizedState}function CT(c,d,y,b){var S=so();Mt.flags|=c,S.memoizedState=F0(1|d,y,{destroy:void 0},b===void 0?null:b)}function MT(c,d,y,b){var S=jr();b=b===void 0?null:b;var $=S.memoizedState.inst;fi!==null&&b!==null&&q3(b,fi.memoizedState.deps)?S.memoizedState=F0(d,y,$,b):(Mt.flags|=c,S.memoizedState=F0(1|d,y,$,b))}function Dq(c,d){CT(8390656,8,c,d)}function tL(c,d){MT(2048,8,c,d)}function Vq(c,d){return MT(4,2,c,d)}function Fq(c,d){return MT(4,4,c,d)}function jq(c,d){if(typeof d=="function"){c=c();var y=d(c);return function(){typeof y=="function"?y():d(null)}}if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function zq(c,d,y){y=y!=null?y.concat([c]):null,MT(4,4,jq.bind(null,d,c),y)}function iL(){}function Uq(c,d){var y=jr();d=d===void 0?null:d;var b=y.memoizedState;return d!==null&&q3(d,b[1])?b[0]:(y.memoizedState=[c,d],c)}function Qq(c,d){var y=jr();d=d===void 0?null:d;var b=y.memoizedState;if(d!==null&&q3(d,b[1]))return b[0];if(b=c(),Em){_u(!0);try{c()}finally{_u(!1)}}return y.memoizedState=[b,d],b}function rL(c,d,y){return y===void 0||(Vd&1073741824)!==0?c.memoizedState=d:(c.memoizedState=y,c=qG(),Mt.lanes|=c,Hd|=c,y)}function Bq(c,d,y,b){return Lo(y,d)?y:R0.current!==null?(c=rL(c,y,b),Lo(c,d)||(Sn=!0),c):(Vd&42)===0?(Sn=!0,c.memoizedState=y):(c=qG(),Mt.lanes|=c,Hd|=c,d)}function qq(c,d,y,b,S){var $=ke.p;ke.p=$!==0&&8>$?$:8;var C=j.T,V={};j.T=V,oL(c,!1,d,y);try{var U=S(),X=j.S;if(X!==null&&X(V,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var fe=kSe(U,b);m1(c,d,fe,Fo(c))}else m1(c,d,b,Fo(c))}catch(_e){m1(c,d,{then:function(){},status:"rejected",reason:_e},Fo())}finally{ke.p=$,j.T=C}}function PSe(){}function nL(c,d,y,b){if(c.tag!==5)throw Error(r(476));var S=Gq(c).queue;qq(c,S,d,ct,y===null?PSe:function(){return Zq(c),y(b)})}function Gq(c){var d=c.memoizedState;if(d!==null)return d;d={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:ct},next:null};var y={};return d.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:y},next:null},c.memoizedState=d,c=c.alternate,c!==null&&(c.memoizedState=d),d}function Zq(c){var d=Gq(c).next.queue;m1(c,d,{},Fo())}function sL(){return rs(L1)}function Hq(){return jr().memoizedState}function Wq(){return jr().memoizedState}function RSe(c){for(var d=c.return;d!==null;){switch(d.tag){case 24:case 3:var y=Fo();c=Ud(y);var b=Qd(d,c,y);b!==null&&(Ps(b,d,y),v1(b,d,y)),d={cache:U3()},c.payload=d;return}d=d.return}}function LSe(c,d,y){var b=Fo();y={lane:b,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},AT(c)?Yq(d,y):(y=L3(c,d,y,b),y!==null&&(Ps(y,c,b),Jq(y,d,b)))}function Xq(c,d,y){var b=Fo();m1(c,d,y,b)}function m1(c,d,y,b){var S={lane:b,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(AT(c))Yq(d,S);else{var $=c.alternate;if(c.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var C=d.lastRenderedState,V=$(C,y);if(S.hasEagerState=!0,S.eagerState=V,Lo(V,C))return fT(c,d,S,0),Ti===null&&pT(),!1}catch{}finally{}if(y=L3(c,d,S,b),y!==null)return Ps(y,c,b),Jq(y,d,b),!0}return!1}function oL(c,d,y,b){if(b={lane:2,revertLane:WL(),action:b,hasEagerState:!1,eagerState:null,next:null},AT(c)){if(d)throw Error(r(479))}else d=L3(c,y,b,2),d!==null&&Ps(d,c,2)}function AT(c){var d=c.alternate;return c===Mt||d!==null&&d===Mt}function Yq(c,d){D0=xT=!0;var y=c.pending;y===null?d.next=d:(d.next=y.next,y.next=d),c.pending=d}function Jq(c,d,y){if((y&4194176)!==0){var b=d.lanes;b&=c.pendingLanes,y|=b,d.lanes=y,ym(c,y)}}var Tu={readContext:rs,use:ET,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useLayoutEffect:Cr,useInsertionEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useSyncExternalStore:Cr,useId:Cr};Tu.useCacheRefresh=Cr,Tu.useMemoCache=Cr,Tu.useHostTransitionStatus=Cr,Tu.useFormState=Cr,Tu.useActionState=Cr,Tu.useOptimistic=Cr;var km={readContext:rs,use:ET,useCallback:function(c,d){return so().memoizedState=[c,d===void 0?null:d],c},useContext:rs,useEffect:Dq,useImperativeHandle:function(c,d,y){y=y!=null?y.concat([c]):null,CT(4194308,4,jq.bind(null,d,c),y)},useLayoutEffect:function(c,d){return CT(4194308,4,c,d)},useInsertionEffect:function(c,d){CT(4,2,c,d)},useMemo:function(c,d){var y=so();d=d===void 0?null:d;var b=c();if(Em){_u(!0);try{c()}finally{_u(!1)}}return y.memoizedState=[b,d],b},useReducer:function(c,d,y){var b=so();if(y!==void 0){var S=y(d);if(Em){_u(!0);try{y(d)}finally{_u(!1)}}}else S=d;return b.memoizedState=b.baseState=S,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:S},b.queue=c,c=c.dispatch=LSe.bind(null,Mt,c),[b.memoizedState,c]},useRef:function(c){var d=so();return c={current:c},d.memoizedState=c},useState:function(c){c=K3(c);var d=c.queue,y=Xq.bind(null,Mt,d);return d.dispatch=y,[c.memoizedState,y]},useDebugValue:iL,useDeferredValue:function(c,d){var y=so();return rL(y,c,d)},useTransition:function(){var c=K3(!1);return c=qq.bind(null,Mt,c.queue,!0,!1),so().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,d,y){var b=Mt,S=so();if(Xt){if(y===void 0)throw Error(r(407));y=y()}else{if(y=d(),Ti===null)throw Error(r(349));(Ut&60)!==0||Oq(b,d,y)}S.memoizedState=y;var $={value:y,getSnapshot:d};return S.queue=$,Dq(_q.bind(null,b,$,c),[c]),b.flags|=2048,F0(9,Sq.bind(null,b,$,y,d),{destroy:void 0},null),y},useId:function(){var c=so(),d=Ti.identifierPrefix;if(Xt){var y=Hc,b=Zc;y=(b&~(1<<32-Ms(b)-1)).toString(32)+y,d=":"+d+"R"+y,y=$T++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=CSe++,d=":"+d+"r"+y.toString(32)+":";return c.memoizedState=d},useCacheRefresh:function(){return so().memoizedState=RSe.bind(null,Mt)}};km.useMemoCache=X3,km.useHostTransitionStatus=sL,km.useFormState=Iq,km.useActionState=Iq,km.useOptimistic=function(c){var d=so();d.memoizedState=d.baseState=c;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=y,d=oL.bind(null,Mt,!0,y),y.dispatch=d,[c,d]};var Fd={readContext:rs,use:ET,useCallback:Uq,useContext:rs,useEffect:tL,useImperativeHandle:zq,useInsertionEffect:Vq,useLayoutEffect:Fq,useMemo:Qq,useReducer:kT,useRef:Nq,useState:function(){return kT(Xc)},useDebugValue:iL,useDeferredValue:function(c,d){var y=jr();return Bq(y,fi.memoizedState,c,d)},useTransition:function(){var c=kT(Xc)[0],d=jr().memoizedState;return[typeof c=="boolean"?c:f1(c),d]},useSyncExternalStore:wq,useId:Hq};Fd.useCacheRefresh=Wq,Fd.useMemoCache=X3,Fd.useHostTransitionStatus=sL,Fd.useFormState=Pq,Fd.useActionState=Pq,Fd.useOptimistic=function(c,d){var y=jr();return Tq(y,fi,c,d)};var Cm={readContext:rs,use:ET,useCallback:Uq,useContext:rs,useEffect:tL,useImperativeHandle:zq,useInsertionEffect:Vq,useLayoutEffect:Fq,useMemo:Qq,useReducer:J3,useRef:Nq,useState:function(){return J3(Xc)},useDebugValue:iL,useDeferredValue:function(c,d){var y=jr();return fi===null?rL(y,c,d):Bq(y,fi.memoizedState,c,d)},useTransition:function(){var c=J3(Xc)[0],d=jr().memoizedState;return[typeof c=="boolean"?c:f1(c),d]},useSyncExternalStore:wq,useId:Hq};Cm.useCacheRefresh=Wq,Cm.useMemoCache=X3,Cm.useHostTransitionStatus=sL,Cm.useFormState=Lq,Cm.useActionState=Lq,Cm.useOptimistic=function(c,d){var y=jr();return fi!==null?Tq(y,fi,c,d):(y.baseState=c,[c,y.queue.dispatch])};function aL(c,d,y,b){d=c.memoizedState,y=y(b,d),y=y==null?d:B({},d,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var lL={isMounted:function(c){return(c=c._reactInternals)?ye(c)===c:!1},enqueueSetState:function(c,d,y){c=c._reactInternals;var b=Fo(),S=Ud(b);S.payload=d,y!=null&&(S.callback=y),d=Qd(c,S,b),d!==null&&(Ps(d,c,b),v1(d,c,b))},enqueueReplaceState:function(c,d,y){c=c._reactInternals;var b=Fo(),S=Ud(b);S.tag=1,S.payload=d,y!=null&&(S.callback=y),d=Qd(c,S,b),d!==null&&(Ps(d,c,b),v1(d,c,b))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var y=Fo(),b=Ud(y);b.tag=2,d!=null&&(b.callback=d),d=Qd(c,b,y),d!==null&&(Ps(d,c,y),v1(d,c,y))}};function Kq(c,d,y,b,S,$,C){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,$,C):d.prototype&&d.prototype.isPureReactComponent?!i1(y,b)||!i1(S,$):!0}function eG(c,d,y,b){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,b),d.state!==c&&lL.enqueueReplaceState(d,d.state,null)}function Mm(c,d){var y=d;if("ref"in d){y={};for(var b in d)b!=="ref"&&(y[b]=d[b])}if(c=c.defaultProps){y===d&&(y=B({},y));for(var S in c)y[S]===void 0&&(y[S]=c[S])}return y}var IT=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function tG(c){IT(c)}function iG(c){console.error(c)}function rG(c){IT(c)}function PT(c,d){try{var y=c.onUncaughtError;y(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function nG(c,d,y){try{var b=c.onCaughtError;b(y.value,{componentStack:y.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function uL(c,d,y){return y=Ud(y),y.tag=3,y.payload={element:null},y.callback=function(){PT(c,d)},y}function sG(c){return c=Ud(c),c.tag=3,c}function oG(c,d,y,b){var S=y.type.getDerivedStateFromError;if(typeof S=="function"){var $=b.value;c.payload=function(){return S($)},c.callback=function(){nG(d,y,b)}}var C=y.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(c.callback=function(){nG(d,y,b),typeof S!="function"&&(Wd===null?Wd=new Set([this]):Wd.add(this));var V=b.stack;this.componentDidCatch(b.value,{componentStack:V!==null?V:""})})}function NSe(c,d,y,b,S){if(y.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=y.alternate,d!==null&&g1(d,y,S,!0),y=$a.current,y!==null){switch(y.tag){case 13:return $u===null?BL():y.alternate===null&&mr===0&&(mr=3),y.flags&=-257,y.flags|=65536,y.lanes=S,b===F3?y.flags|=16384:(d=y.updateQueue,d===null?y.updateQueue=new Set([b]):d.add(b),GL(c,b,S)),!1;case 22:return y.flags|=65536,b===F3?y.flags|=16384:(d=y.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},y.updateQueue=d):(y=d.retryQueue,y===null?d.retryQueue=new Set([b]):y.add(b)),GL(c,b,S)),!1}throw Error(r(435,y.tag))}return GL(c,b,S),BL(),!1}if(Xt)return d=$a.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=S,b!==V3&&(c=Error(r(422),{cause:b}),o1(Sa(c,y)))):(b!==V3&&(d=Error(r(423),{cause:b}),o1(Sa(d,y))),c=c.current.alternate,c.flags|=65536,S&=-S,c.lanes|=S,b=Sa(b,y),S=uL(c.stateNode,b,S),xL(c,S),mr!==4&&(mr=2)),!1;var $=Error(r(520),{cause:b});if($=Sa($,y),T1===null?T1=[$]:T1.push($),mr!==4&&(mr=2),d===null)return!0;b=Sa(b,y),y=d;do{switch(y.tag){case 3:return y.flags|=65536,c=S&-S,y.lanes|=c,c=uL(y.stateNode,b,c),xL(y,c),!1;case 1:if(d=y.type,$=y.stateNode,(y.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Wd===null||!Wd.has($))))return y.flags|=65536,S&=-S,y.lanes|=S,S=sG(S),oG(S,c,y,b),xL(y,S),!1}y=y.return}while(y!==null);return!1}var aG=Error(r(461)),Sn=!1;function Fn(c,d,y,b){d.child=c===null?dq(d,null,y,b):$m(d,c.child,y,b)}function lG(c,d,y,b,S){y=y.render;var $=d.ref;if("ref"in b){var C={};for(var V in b)V!=="ref"&&(C[V]=b[V])}else C=b;return Im(d),b=G3(c,d,y,C,$,S),V=Z3(),c!==null&&!Sn?(H3(c,d,S),Yc(c,d,S)):(Xt&&V&&N3(d),d.flags|=1,Fn(c,d,b,S),d.child)}function uG(c,d,y,b,S){if(c===null){var $=y.type;return typeof $=="function"&&!IL($)&&$.defaultProps===void 0&&y.compare===null?(d.tag=15,d.type=$,cG(c,d,$,b,S)):(c=VT(y.type,null,b,d,d.mode,S),c.ref=d.ref,c.return=d,d.child=c)}if($=c.child,!vL(c,S)){var C=$.memoizedProps;if(y=y.compare,y=y!==null?y:i1,y(C,b)&&c.ref===d.ref)return Yc(c,d,S)}return d.flags|=1,c=Zd($,b),c.ref=d.ref,c.return=d,d.child=c}function cG(c,d,y,b,S){if(c!==null){var $=c.memoizedProps;if(i1($,b)&&c.ref===d.ref)if(Sn=!1,d.pendingProps=b=$,vL(c,S))(c.flags&131072)!==0&&(Sn=!0);else return d.lanes=c.lanes,Yc(c,d,S)}return cL(c,d,y,b,S)}function hG(c,d,y){var b=d.pendingProps,S=b.children,$=(d.stateNode._pendingVisibility&2)!==0,C=c!==null?c.memoizedState:null;if(y1(c,d),b.mode==="hidden"||$){if((d.flags&128)!==0){if(b=C!==null?C.baseLanes|y:y,c!==null){for(S=d.child=c.child,$=0;S!==null;)$=$|S.lanes|S.childLanes,S=S.sibling;d.childLanes=$&~b}else d.childLanes=0,d.child=null;return dG(c,d,b,y)}if((y&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},c!==null&&_T(d,C!==null?C.cachePool:null),C!==null?pq(d,C):j3(),fq(d);else return d.lanes=d.childLanes=536870912,dG(c,d,C!==null?C.baseLanes|y:y,y)}else C!==null?(_T(d,C.cachePool),pq(d,C),Dd(),d.memoizedState=null):(c!==null&&_T(d,null),j3(),Dd());return Fn(c,d,S,y),d.child}function dG(c,d,y,b){var S=B3();return S=S===null?null:{parent:rn._currentValue,pool:S},d.memoizedState={baseLanes:y,cachePool:S},c!==null&&_T(d,null),j3(),fq(d),c!==null&&g1(c,d,b,!0),null}function y1(c,d){var y=d.ref;if(y===null)c!==null&&c.ref!==null&&(d.flags|=2097664);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(c===null||c.ref!==y)&&(d.flags|=2097664)}}function cL(c,d,y,b,S){return Im(d),y=G3(c,d,y,b,void 0,S),b=Z3(),c!==null&&!Sn?(H3(c,d,S),Yc(c,d,S)):(Xt&&b&&N3(d),d.flags|=1,Fn(c,d,y,S),d.child)}function pG(c,d,y,b,S,$){return Im(d),d.updateQueue=null,y=bq(d,b,y,S),vq(c),b=Z3(),c!==null&&!Sn?(H3(c,d,$),Yc(c,d,$)):(Xt&&b&&N3(d),d.flags|=1,Fn(c,d,y,$),d.child)}function fG(c,d,y,b,S){if(Im(d),d.stateNode===null){var $=M0,C=y.contextType;typeof C=="object"&&C!==null&&($=rs(C)),$=new y(b,$),d.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=lL,d.stateNode=$,$._reactInternals=d,$=d.stateNode,$.props=b,$.state=d.memoizedState,$.refs={},SL(d),C=y.contextType,$.context=typeof C=="object"&&C!==null?rs(C):M0,$.state=d.memoizedState,C=y.getDerivedStateFromProps,typeof C=="function"&&(aL(d,y,C,b),$.state=d.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(C=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),C!==$.state&&lL.enqueueReplaceState($,$.state,null),w1(d,b,$,S),b1(),$.state=d.memoizedState),typeof $.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(c===null){$=d.stateNode;var V=d.memoizedProps,U=Mm(y,V);$.props=U;var X=$.context,fe=y.contextType;C=M0,typeof fe=="object"&&fe!==null&&(C=rs(fe));var _e=y.getDerivedStateFromProps;fe=typeof _e=="function"||typeof $.getSnapshotBeforeUpdate=="function",V=d.pendingProps!==V,fe||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(V||X!==C)&&eG(d,$,b,C),zd=!1;var ne=d.memoizedState;$.state=ne,w1(d,b,$,S),b1(),X=d.memoizedState,V||ne!==X||zd?(typeof _e=="function"&&(aL(d,y,_e,b),X=d.memoizedState),(U=zd||Kq(d,y,U,b,ne,X,C))?(fe||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=X),$.props=b,$.state=X,$.context=C,b=U):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{$=d.stateNode,_L(c,d),C=d.memoizedProps,fe=Mm(y,C),$.props=fe,_e=d.pendingProps,ne=$.context,X=y.contextType,U=M0,typeof X=="object"&&X!==null&&(U=rs(X)),V=y.getDerivedStateFromProps,(X=typeof V=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(C!==_e||ne!==U)&&eG(d,$,b,U),zd=!1,ne=d.memoizedState,$.state=ne,w1(d,b,$,S),b1();var de=d.memoizedState;C!==_e||ne!==de||zd||c!==null&&c.dependencies!==null&&RT(c.dependencies)?(typeof V=="function"&&(aL(d,y,V,b),de=d.memoizedState),(fe=zd||Kq(d,y,fe,b,ne,de,U)||c!==null&&c.dependencies!==null&&RT(c.dependencies))?(X||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(b,de,U),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(b,de,U)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||C===c.memoizedProps&&ne===c.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||C===c.memoizedProps&&ne===c.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=de),$.props=b,$.state=de,$.context=U,b=fe):(typeof $.componentDidUpdate!="function"||C===c.memoizedProps&&ne===c.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||C===c.memoizedProps&&ne===c.memoizedState||(d.flags|=1024),b=!1)}return $=b,y1(c,d),b=(d.flags&128)!==0,$||b?($=d.stateNode,y=b&&typeof y.getDerivedStateFromError!="function"?null:$.render(),d.flags|=1,c!==null&&b?(d.child=$m(d,c.child,null,S),d.child=$m(d,null,y,S)):Fn(c,d,y,S),d.memoizedState=$.state,c=d.child):c=Yc(c,d,S),c}function mG(c,d,y,b){return s1(),d.flags|=256,Fn(c,d,y,b),d.child}var hL={dehydrated:null,treeContext:null,retryLane:0};function dL(c){return{baseLanes:c,cachePool:gq()}}function pL(c,d,y){return c=c!==null?c.childLanes&~y:0,d&&(c|=Ca),c}function yG(c,d,y){var b=d.pendingProps,S=!1,$=(d.flags&128)!==0,C;if((C=$)||(C=c!==null&&c.memoizedState===null?!1:(tn.current&2)!==0),C&&(S=!0,d.flags&=-129),C=(d.flags&32)!==0,d.flags&=-33,c===null){if(Xt){if(S?Nd(d):Dd(),Xt){var V=Vn,U;if(U=V){e:{for(U=V,V=xu;U.nodeType!==8;){if(!V){V=null;break e}if(U=$l(U.nextSibling),U===null){V=null;break e}}V=U}V!==null?(d.memoizedState={dehydrated:V,treeContext:Sm!==null?{id:Zc,overflow:Hc}:null,retryLane:536870912},U=ka(18,null,null,0),U.stateNode=V,U.return=d,d.child=U,Is=d,Vn=null,U=!0):U=!1}U||xm(d)}if(V=d.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return V.data==="$!"?d.lanes=16:d.lanes=536870912,null;Wc(d)}return V=b.children,b=b.fallback,S?(Dd(),S=d.mode,V=mL({mode:"hidden",children:V},S),b=Rm(b,S,y,null),V.return=d,b.return=d,V.sibling=b,d.child=V,S=d.child,S.memoizedState=dL(y),S.childLanes=pL(c,C,y),d.memoizedState=hL,b):(Nd(d),fL(d,V))}if(U=c.memoizedState,U!==null&&(V=U.dehydrated,V!==null)){if($)d.flags&256?(Nd(d),d.flags&=-257,d=yL(c,d,y)):d.memoizedState!==null?(Dd(),d.child=c.child,d.flags|=128,d=null):(Dd(),S=b.fallback,V=d.mode,b=mL({mode:"visible",children:b.children},V),S=Rm(S,V,y,null),S.flags|=2,b.return=d,S.return=d,b.sibling=S,d.child=b,$m(d,c.child,null,y),b=d.child,b.memoizedState=dL(y),b.childLanes=pL(c,C,y),d.memoizedState=hL,d=S);else if(Nd(d),V.data==="$!"){if(C=V.nextSibling&&V.nextSibling.dataset,C)var X=C.dgst;C=X,b=Error(r(419)),b.stack="",b.digest=C,o1({value:b,source:null,stack:null}),d=yL(c,d,y)}else if(Sn||g1(c,d,y,!1),C=(y&c.childLanes)!==0,Sn||C){if(C=Ti,C!==null){if(b=y&-y,(b&42)!==0)b=1;else switch(b){case 2:b=1;break;case 8:b=4;break;case 32:b=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:b=64;break;case 268435456:b=134217728;break;default:b=0}if(b=(b&(C.suspendedLanes|y))!==0?0:b,b!==0&&b!==U.retryLane)throw U.retryLane=b,Ld(c,b),Ps(C,c,b),aG}V.data==="$?"||BL(),d=yL(c,d,y)}else V.data==="$?"?(d.flags|=128,d.child=c.child,d=YSe.bind(null,c),V._reactRetry=d,d=null):(c=U.treeContext,Vn=$l(V.nextSibling),Is=d,Xt=!0,_l=null,xu=!1,c!==null&&(_a[xa++]=Zc,_a[xa++]=Hc,_a[xa++]=Sm,Zc=c.id,Hc=c.overflow,Sm=d),d=fL(d,b.children),d.flags|=4096);return d}return S?(Dd(),S=b.fallback,V=d.mode,U=c.child,X=U.sibling,b=Zd(U,{mode:"hidden",children:b.children}),b.subtreeFlags=U.subtreeFlags&31457280,X!==null?S=Zd(X,S):(S=Rm(S,V,y,null),S.flags|=2),S.return=d,b.return=d,b.sibling=S,d.child=b,b=S,S=d.child,V=c.child.memoizedState,V===null?V=dL(y):(U=V.cachePool,U!==null?(X=rn._currentValue,U=U.parent!==X?{parent:X,pool:X}:U):U=gq(),V={baseLanes:V.baseLanes|y,cachePool:U}),S.memoizedState=V,S.childLanes=pL(c,C,y),d.memoizedState=hL,b):(Nd(d),y=c.child,c=y.sibling,y=Zd(y,{mode:"visible",children:b.children}),y.return=d,y.sibling=null,c!==null&&(C=d.deletions,C===null?(d.deletions=[c],d.flags|=16):C.push(c)),d.child=y,d.memoizedState=null,y)}function fL(c,d){return d=mL({mode:"visible",children:d},c.mode),d.return=c,c.child=d}function mL(c,d){return UG(c,d,0,null)}function yL(c,d,y){return $m(d,c.child,null,y),c=fL(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function gG(c,d,y){c.lanes|=d;var b=c.alternate;b!==null&&(b.lanes|=d),wL(c.return,d,y)}function gL(c,d,y,b,S){var $=c.memoizedState;$===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:y,tailMode:S}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=b,$.tail=y,$.tailMode=S)}function vG(c,d,y){var b=d.pendingProps,S=b.revealOrder,$=b.tail;if(Fn(c,d,b.children,y),b=tn.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&gG(c,y,d);else if(c.tag===19)gG(c,y,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}switch(Ft(tn,b),S){case"forwards":for(y=d.child,S=null;y!==null;)c=y.alternate,c!==null&&ST(c)===null&&(S=y),y=y.sibling;y=S,y===null?(S=d.child,d.child=null):(S=y.sibling,y.sibling=null),gL(d,!1,S,y,$);break;case"backwards":for(y=null,S=d.child,d.child=null;S!==null;){if(c=S.alternate,c!==null&&ST(c)===null){d.child=S;break}c=S.sibling,S.sibling=y,y=S,S=c}gL(d,!0,y,null,$);break;case"together":gL(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Yc(c,d,y){if(c!==null&&(d.dependencies=c.dependencies),Hd|=d.lanes,(y&d.childLanes)===0)if(c!==null){if(g1(c,d,y,!1),(y&d.childLanes)===0)return null}else return null;if(c!==null&&d.child!==c.child)throw Error(r(153));if(d.child!==null){for(c=d.child,y=Zd(c,c.pendingProps),d.child=y,y.return=d;c.sibling!==null;)c=c.sibling,y=y.sibling=Zd(c,c.pendingProps),y.return=d;y.sibling=null}return d.child}function vL(c,d){return(c.lanes&d)!==0?!0:(c=c.dependencies,!!(c!==null&&RT(c)))}function DSe(c,d,y){switch(d.tag){case 3:ga(d,d.stateNode.containerInfo),jd(d,rn,c.memoizedState.cache),s1();break;case 27:case 5:gl(d);break;case 4:ga(d,d.stateNode.containerInfo);break;case 10:jd(d,d.type,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(Nd(d),d.flags|=128,null):(y&d.child.childLanes)!==0?yG(c,d,y):(Nd(d),c=Yc(c,d,y),c!==null?c.sibling:null);Nd(d);break;case 19:var S=(c.flags&128)!==0;if(b=(y&d.childLanes)!==0,b||(g1(c,d,y,!1),b=(y&d.childLanes)!==0),S){if(b)return vG(c,d,y);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Ft(tn,tn.current),b)break;return null;case 22:case 23:return d.lanes=0,hG(c,d,y);case 24:jd(d,rn,c.memoizedState.cache)}return Yc(c,d,y)}function bG(c,d,y){if(c!==null)if(c.memoizedProps!==d.pendingProps)Sn=!0;else{if(!vL(c,y)&&(d.flags&128)===0)return Sn=!1,DSe(c,d,y);Sn=(c.flags&131072)!==0}else Sn=!1,Xt&&(d.flags&1048576)!==0&&rq(d,gT,d.index);switch(d.lanes=0,d.tag){case 16:e:{c=d.pendingProps;var b=d.elementType,S=b._init;if(b=S(b._payload),d.type=b,typeof b=="function")IL(b)?(c=Mm(b,c),d.tag=1,d=fG(null,d,b,c,y)):(d.tag=0,d=cL(null,d,b,c,y));else{if(b!=null){if(S=b.$$typeof,S===O){d.tag=11,d=lG(null,d,b,c,y);break e}else if(S===T){d.tag=14,d=uG(null,d,b,c,y);break e}}throw d=F(b)||b,Error(r(306,d,""))}}return d;case 0:return cL(c,d,d.type,d.pendingProps,y);case 1:return b=d.type,S=Mm(b,d.pendingProps),fG(c,d,b,S,y);case 3:e:{if(ga(d,d.stateNode.containerInfo),c===null)throw Error(r(387));var $=d.pendingProps;S=d.memoizedState,b=S.element,_L(c,d),w1(d,$,null,y);var C=d.memoizedState;if($=C.cache,jd(d,rn,$),$!==S.cache&&OL(d,[rn],y,!0),b1(),$=C.element,S.isDehydrated)if(S={element:$,isDehydrated:!1,cache:C.cache},d.updateQueue.baseState=S,d.memoizedState=S,d.flags&256){d=mG(c,d,$,y);break e}else if($!==b){b=Sa(Error(r(424)),d),o1(b),d=mG(c,d,$,y);break e}else for(Vn=$l(d.stateNode.containerInfo.firstChild),Is=d,Xt=!0,_l=null,xu=!0,y=dq(d,null,$,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(s1(),$===b){d=Yc(c,d,y);break e}Fn(c,d,$,y)}d=d.child}return d;case 26:return y1(c,d),c===null?(y=SZ(d.type,null,d.pendingProps,null))?d.memoizedState=y:Xt||(y=d.type,c=d.pendingProps,b=XT(kr.current).createElement(y),b[On]=d,b[Zi]=c,jn(b,y,c),Vr(b),d.stateNode=b):d.memoizedState=SZ(d.type,c.memoizedProps,d.pendingProps,c.memoizedState),null;case 27:return gl(d),c===null&&Xt&&(b=d.stateNode=bZ(d.type,d.pendingProps,kr.current),Is=d,xu=!0,Vn=$l(b.firstChild)),b=d.pendingProps.children,c!==null||Xt?Fn(c,d,b,y):d.child=$m(d,null,b,y),y1(c,d),d.child;case 5:return c===null&&Xt&&((S=b=Vn)&&(b=p_e(b,d.type,d.pendingProps,xu),b!==null?(d.stateNode=b,Is=d,Vn=$l(b.firstChild),xu=!1,S=!0):S=!1),S||xm(d)),gl(d),S=d.type,$=d.pendingProps,C=c!==null?c.memoizedProps:null,b=$.children,n5(S,$)?b=null:C!==null&&n5(S,C)&&(d.flags|=32),d.memoizedState!==null&&(S=G3(c,d,MSe,null,null,y),L1._currentValue=S),y1(c,d),Fn(c,d,b,y),d.child;case 6:return c===null&&Xt&&((c=y=Vn)&&(y=f_e(y,d.pendingProps,xu),y!==null?(d.stateNode=y,Is=d,Vn=null,c=!0):c=!1),c||xm(d)),null;case 13:return yG(c,d,y);case 4:return ga(d,d.stateNode.containerInfo),b=d.pendingProps,c===null?d.child=$m(d,null,b,y):Fn(c,d,b,y),d.child;case 11:return lG(c,d,d.type,d.pendingProps,y);case 7:return Fn(c,d,d.pendingProps,y),d.child;case 8:return Fn(c,d,d.pendingProps.children,y),d.child;case 12:return Fn(c,d,d.pendingProps.children,y),d.child;case 10:return b=d.pendingProps,jd(d,d.type,b.value),Fn(c,d,b.children,y),d.child;case 9:return S=d.type._context,b=d.pendingProps.children,Im(d),S=rs(S),b=b(S),d.flags|=1,Fn(c,d,b,y),d.child;case 14:return uG(c,d,d.type,d.pendingProps,y);case 15:return cG(c,d,d.type,d.pendingProps,y);case 19:return vG(c,d,y);case 22:return hG(c,d,y);case 24:return Im(d),b=rs(rn),c===null?(S=B3(),S===null&&(S=Ti,$=U3(),S.pooledCache=$,$.refCount++,$!==null&&(S.pooledCacheLanes|=y),S=$),d.memoizedState={parent:b,cache:S},SL(d),jd(d,rn,S)):((c.lanes&y)!==0&&(_L(c,d),w1(d,null,null,y),b1()),S=c.memoizedState,$=d.memoizedState,S.parent!==b?(S={parent:b,cache:b},d.memoizedState=S,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=S),jd(d,rn,b)):(b=$.cache,jd(d,rn,b),b!==S.cache&&OL(d,[rn],y,!0))),Fn(c,d,d.pendingProps.children,y),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}var bL=St(null),Am=null,Jc=null;function jd(c,d,y){Ft(bL,d._currentValue),d._currentValue=y}function Kc(c){c._currentValue=bL.current,ri(bL)}function wL(c,d,y){for(;c!==null;){var b=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),c===y)break;c=c.return}}function OL(c,d,y,b){var S=c.child;for(S!==null&&(S.return=c);S!==null;){var $=S.dependencies;if($!==null){var C=S.child;$=$.firstContext;e:for(;$!==null;){var V=$;$=S;for(var U=0;U<d.length;U++)if(V.context===d[U]){$.lanes|=y,V=$.alternate,V!==null&&(V.lanes|=y),wL($.return,y,c),b||(C=null);break e}$=V.next}}else if(S.tag===18){if(C=S.return,C===null)throw Error(r(341));C.lanes|=y,$=C.alternate,$!==null&&($.lanes|=y),wL(C,y,c),C=null}else C=S.child;if(C!==null)C.return=S;else for(C=S;C!==null;){if(C===c){C=null;break}if(S=C.sibling,S!==null){S.return=C.return,C=S;break}C=C.return}S=C}}function g1(c,d,y,b){c=null;for(var S=d,$=!1;S!==null;){if(!$){if((S.flags&524288)!==0)$=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var C=S.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var V=S.type;Lo(S.pendingProps.value,C.value)||(c!==null?c.push(V):c=[V])}}else if(S===ya.current){if(C=S.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(c!==null?c.push(L1):c=[L1])}S=S.return}c!==null&&OL(d,c,y,b),d.flags|=262144}function RT(c){for(c=c.firstContext;c!==null;){if(!Lo(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Im(c){Am=c,Jc=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function rs(c){return wG(Am,c)}function LT(c,d){return Am===null&&Im(c),wG(c,d)}function wG(c,d){var y=d._currentValue;if(d={context:d,memoizedValue:y,next:null},Jc===null){if(c===null)throw Error(r(308));Jc=d,c.dependencies={lanes:0,firstContext:d},c.flags|=524288}else Jc=Jc.next=d;return y}var zd=!1;function SL(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _L(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Ud(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Qd(c,d,y){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(or&2)!==0){var S=b.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),b.pending=d,d=mT(c),tq(c,null,y),d}return fT(c,b,d,y),mT(c)}function v1(c,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194176)!==0)){var b=d.lanes;b&=c.pendingLanes,y|=b,d.lanes=y,ym(c,y)}}function xL(c,d){var y=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,y===b)){var S=null,$=null;if(y=y.firstBaseUpdate,y!==null){do{var C={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};$===null?S=$=C:$=$.next=C,y=y.next}while(y!==null);$===null?S=$=d:$=$.next=d}else S=$=d;y={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:$,shared:b.shared,callbacks:b.callbacks},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=d:c.next=d,y.lastBaseUpdate=d}var $L=!1;function b1(){if($L){var c=N0;if(c!==null)throw c}}function w1(c,d,y,b){$L=!1;var S=c.updateQueue;zd=!1;var $=S.firstBaseUpdate,C=S.lastBaseUpdate,V=S.shared.pending;if(V!==null){S.shared.pending=null;var U=V,X=U.next;U.next=null,C===null?$=X:C.next=X,C=U;var fe=c.alternate;fe!==null&&(fe=fe.updateQueue,V=fe.lastBaseUpdate,V!==C&&(V===null?fe.firstBaseUpdate=X:V.next=X,fe.lastBaseUpdate=U))}if($!==null){var _e=S.baseState;C=0,fe=X=U=null,V=$;do{var ne=V.lane&-536870913,de=ne!==V.lane;if(de?(Ut&ne)===ne:(b&ne)===ne){ne!==0&&ne===L0&&($L=!0),fe!==null&&(fe=fe.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var Ke=c,$t=V;ne=d;var yr=y;switch($t.tag){case 1:if(Ke=$t.payload,typeof Ke=="function"){_e=Ke.call(yr,_e,ne);break e}_e=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=$t.payload,ne=typeof Ke=="function"?Ke.call(yr,_e,ne):Ke,ne==null)break e;_e=B({},_e,ne);break e;case 2:zd=!0}}ne=V.callback,ne!==null&&(c.flags|=64,de&&(c.flags|=8192),de=S.callbacks,de===null?S.callbacks=[ne]:de.push(ne))}else de={lane:ne,tag:V.tag,payload:V.payload,callback:V.callback,next:null},fe===null?(X=fe=de,U=_e):fe=fe.next=de,C|=ne;if(V=V.next,V===null){if(V=S.shared.pending,V===null)break;de=V,V=de.next,de.next=null,S.lastBaseUpdate=de,S.shared.pending=null}}while(!0);fe===null&&(U=_e),S.baseState=U,S.firstBaseUpdate=X,S.lastBaseUpdate=fe,$===null&&(S.shared.lanes=0),Hd|=C,c.lanes=C,c.memoizedState=_e}}function OG(c,d){if(typeof c!="function")throw Error(r(191,c));c.call(d)}function SG(c,d){var y=c.callbacks;if(y!==null)for(c.callbacks=null,c=0;c<y.length;c++)OG(y[c],d)}function O1(c,d){try{var y=d.updateQueue,b=y!==null?y.lastEffect:null;if(b!==null){var S=b.next;y=S;do{if((y.tag&c)===c){b=void 0;var $=y.create,C=y.inst;b=$(),C.destroy=b}y=y.next}while(y!==S)}}catch(V){Oi(d,d.return,V)}}function Bd(c,d,y){try{var b=d.updateQueue,S=b!==null?b.lastEffect:null;if(S!==null){var $=S.next;b=$;do{if((b.tag&c)===c){var C=b.inst,V=C.destroy;if(V!==void 0){C.destroy=void 0,S=d;var U=y;try{V()}catch(X){Oi(S,U,X)}}}b=b.next}while(b!==$)}}catch(X){Oi(d,d.return,X)}}function _G(c){var d=c.updateQueue;if(d!==null){var y=c.stateNode;try{SG(d,y)}catch(b){Oi(c,c.return,b)}}}function xG(c,d,y){y.props=Mm(c.type,c.memoizedProps),y.state=c.memoizedState;try{y.componentWillUnmount()}catch(b){Oi(c,d,b)}}function Pm(c,d){try{var y=c.ref;if(y!==null){var b=c.stateNode;switch(c.tag){case 26:case 27:case 5:var S=b;break;default:S=b}typeof y=="function"?c.refCleanup=y(S):y.current=S}}catch($){Oi(c,d,$)}}function No(c,d){var y=c.ref,b=c.refCleanup;if(y!==null)if(typeof b=="function")try{b()}catch(S){Oi(c,d,S)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(S){Oi(c,d,S)}else y.current=null}function $G(c){var d=c.type,y=c.memoizedProps,b=c.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":y.autoFocus&&b.focus();break e;case"img":y.src?b.src=y.src:y.srcSet&&(b.srcset=y.srcSet)}}catch(S){Oi(c,c.return,S)}}function TG(c,d,y){try{var b=c.stateNode;l_e(b,c.type,y,d),b[Zi]=d}catch(S){Oi(c,c.return,S)}}function EG(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27||c.tag===4}function TL(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||EG(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==27&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function EL(c,d,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,d?y.nodeType===8?y.parentNode.insertBefore(c,d):y.insertBefore(c,d):(y.nodeType===8?(d=y.parentNode,d.insertBefore(c,y)):(d=y,d.appendChild(c)),y=y._reactRootContainer,y!=null||d.onclick!==null||(d.onclick=WT));else if(b!==4&&b!==27&&(c=c.child,c!==null))for(EL(c,d,y),c=c.sibling;c!==null;)EL(c,d,y),c=c.sibling}function NT(c,d,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,d?y.insertBefore(c,d):y.appendChild(c);else if(b!==4&&b!==27&&(c=c.child,c!==null))for(NT(c,d,y),c=c.sibling;c!==null;)NT(c,d,y),c=c.sibling}var eh=!1,fr=!1,kL=!1,kG=typeof WeakSet=="function"?WeakSet:Set,_n=null,CG=!1;function VSe(c,d){if(c=c.containerInfo,i5=iE,c=GB(c),M3(c)){if("selectionStart"in c)var y={start:c.selectionStart,end:c.selectionEnd};else e:{y=(y=c.ownerDocument)&&y.defaultView||window;var b=y.getSelection&&y.getSelection();if(b&&b.rangeCount!==0){y=b.anchorNode;var S=b.anchorOffset,$=b.focusNode;b=b.focusOffset;try{y.nodeType,$.nodeType}catch{y=null;break e}var C=0,V=-1,U=-1,X=0,fe=0,_e=c,ne=null;t:for(;;){for(var de;_e!==y||S!==0&&_e.nodeType!==3||(V=C+S),_e!==$||b!==0&&_e.nodeType!==3||(U=C+b),_e.nodeType===3&&(C+=_e.nodeValue.length),(de=_e.firstChild)!==null;)ne=_e,_e=de;for(;;){if(_e===c)break t;if(ne===y&&++X===S&&(V=C),ne===$&&++fe===b&&(U=C),(de=_e.nextSibling)!==null)break;_e=ne,ne=_e.parentNode}_e=de}y=V===-1||U===-1?null:{start:V,end:U}}else y=null}y=y||{start:0,end:0}}else y=null;for(r5={focusedElem:c,selectionRange:y},iE=!1,_n=d;_n!==null;)if(d=_n,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,_n=c;else for(;_n!==null;){switch(d=_n,$=d.alternate,c=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&$!==null){c=void 0,y=d,S=$.memoizedProps,$=$.memoizedState,b=y.stateNode;try{var Ke=Mm(y.type,S,y.elementType===y.type);c=b.getSnapshotBeforeUpdate(Ke,$),b.__reactInternalSnapshotBeforeUpdate=c}catch($t){Oi(y,y.return,$t)}}break;case 3:if((c&1024)!==0){if(c=d.stateNode.containerInfo,y=c.nodeType,y===9)a5(c);else if(y===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":a5(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=d.sibling,c!==null){c.return=d.return,_n=c;break}_n=d.return}return Ke=CG,CG=!1,Ke}function MG(c,d,y){var b=y.flags;switch(y.tag){case 0:case 11:case 15:ih(c,y),b&4&&O1(5,y);break;case 1:if(ih(c,y),b&4)if(c=y.stateNode,d===null)try{c.componentDidMount()}catch(V){Oi(y,y.return,V)}else{var S=Mm(y.type,d.memoizedProps);d=d.memoizedState;try{c.componentDidUpdate(S,d,c.__reactInternalSnapshotBeforeUpdate)}catch(V){Oi(y,y.return,V)}}b&64&&_G(y),b&512&&Pm(y,y.return);break;case 3:if(ih(c,y),b&64&&(b=y.updateQueue,b!==null)){if(c=null,y.child!==null)switch(y.child.tag){case 27:case 5:c=y.child.stateNode;break;case 1:c=y.child.stateNode}try{SG(b,c)}catch(V){Oi(y,y.return,V)}}break;case 26:ih(c,y),b&512&&Pm(y,y.return);break;case 27:case 5:ih(c,y),d===null&&b&4&&$G(y),b&512&&Pm(y,y.return);break;case 12:ih(c,y);break;case 13:ih(c,y),b&4&&PG(c,y);break;case 22:if(S=y.memoizedState!==null||eh,!S){d=d!==null&&d.memoizedState!==null||fr;var $=eh,C=fr;eh=S,(fr=d)&&!C?qd(c,y,(y.subtreeFlags&8772)!==0):ih(c,y),eh=$,fr=C}b&512&&(y.memoizedProps.mode==="manual"?Pm(y,y.return):No(y,y.return));break;default:ih(c,y)}}function AG(c){var d=c.alternate;d!==null&&(c.alternate=null,AG(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&ZO(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var zr=null,Do=!1;function th(c,d,y){for(y=y.child;y!==null;)IG(c,d,y),y=y.sibling}function IG(c,d,y){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(fm,y)}catch{}switch(y.tag){case 26:fr||No(y,d),th(c,d,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:fr||No(y,d);var b=zr,S=Do;for(zr=y.stateNode,th(c,d,y),y=y.stateNode,d=y.attributes;d.length;)y.removeAttributeNode(d[0]);ZO(y),zr=b,Do=S;break;case 5:fr||No(y,d);case 6:S=zr;var $=Do;if(zr=null,th(c,d,y),zr=S,Do=$,zr!==null)if(Do)try{c=zr,b=y.stateNode,c.nodeType===8?c.parentNode.removeChild(b):c.removeChild(b)}catch(C){Oi(y,d,C)}else try{zr.removeChild(y.stateNode)}catch(C){Oi(y,d,C)}break;case 18:zr!==null&&(Do?(d=zr,y=y.stateNode,d.nodeType===8?o5(d.parentNode,y):d.nodeType===1&&o5(d,y),F1(d)):o5(zr,y.stateNode));break;case 4:b=zr,S=Do,zr=y.stateNode.containerInfo,Do=!0,th(c,d,y),zr=b,Do=S;break;case 0:case 11:case 14:case 15:fr||Bd(2,y,d),fr||Bd(4,y,d),th(c,d,y);break;case 1:fr||(No(y,d),b=y.stateNode,typeof b.componentWillUnmount=="function"&&xG(y,d,b)),th(c,d,y);break;case 21:th(c,d,y);break;case 22:fr||No(y,d),fr=(b=fr)||y.memoizedState!==null,th(c,d,y),fr=b;break;default:th(c,d,y)}}function PG(c,d){if(d.memoizedState===null&&(c=d.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{F1(c)}catch(y){Oi(d,d.return,y)}}function FSe(c){switch(c.tag){case 13:case 19:var d=c.stateNode;return d===null&&(d=c.stateNode=new kG),d;case 22:return c=c.stateNode,d=c._retryCache,d===null&&(d=c._retryCache=new kG),d;default:throw Error(r(435,c.tag))}}function CL(c,d){var y=FSe(c);d.forEach(function(b){var S=JSe.bind(null,c,b);y.has(b)||(y.add(b),b.then(S,S))})}function Ta(c,d){var y=d.deletions;if(y!==null)for(var b=0;b<y.length;b++){var S=y[b],$=c,C=d,V=C;e:for(;V!==null;){switch(V.tag){case 27:case 5:zr=V.stateNode,Do=!1;break e;case 3:zr=V.stateNode.containerInfo,Do=!0;break e;case 4:zr=V.stateNode.containerInfo,Do=!0;break e}V=V.return}if(zr===null)throw Error(r(160));IG($,C,S),zr=null,Do=!1,$=S.alternate,$!==null&&($.return=null),S.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)RG(d,c),d=d.sibling}var xl=null;function RG(c,d){var y=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Ta(d,c),Ea(c),b&4&&(Bd(3,c,c.return),O1(3,c),Bd(5,c,c.return));break;case 1:Ta(d,c),Ea(c),b&512&&(fr||y===null||No(y,y.return)),b&64&&eh&&(c=c.updateQueue,c!==null&&(b=c.callbacks,b!==null&&(y=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=y===null?b:y.concat(b))));break;case 26:var S=xl;if(Ta(d,c),Ea(c),b&512&&(fr||y===null||No(y,y.return)),b&4){var $=y!==null?y.memoizedState:null;if(b=c.memoizedState,y===null)if(b===null)if(c.stateNode===null){e:{b=c.type,y=c.memoizedProps,S=S.ownerDocument||S;t:switch(b){case"title":$=S.getElementsByTagName("title")[0],(!$||$[vm]||$[On]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=S.createElement(b),S.head.insertBefore($,S.querySelector("head > title"))),jn($,b,y),$[On]=c,Vr($),b=$;break e;case"link":var C=$Z("link","href",S).get(b+(y.href||""));if(C){for(var V=0;V<C.length;V++)if($=C[V],$.getAttribute("href")===(y.href==null?null:y.href)&&$.getAttribute("rel")===(y.rel==null?null:y.rel)&&$.getAttribute("title")===(y.title==null?null:y.title)&&$.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){C.splice(V,1);break t}}$=S.createElement(b),jn($,b,y),S.head.appendChild($);break;case"meta":if(C=$Z("meta","content",S).get(b+(y.content||""))){for(V=0;V<C.length;V++)if($=C[V],$.getAttribute("content")===(y.content==null?null:""+y.content)&&$.getAttribute("name")===(y.name==null?null:y.name)&&$.getAttribute("property")===(y.property==null?null:y.property)&&$.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&$.getAttribute("charset")===(y.charSet==null?null:y.charSet)){C.splice(V,1);break t}}$=S.createElement(b),jn($,b,y),S.head.appendChild($);break;default:throw Error(r(468,b))}$[On]=c,Vr($),b=$}c.stateNode=b}else TZ(S,c.type,c.stateNode);else c.stateNode=xZ(S,b,c.memoizedProps);else $!==b?($===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):$.count--,b===null?TZ(S,c.type,c.stateNode):xZ(S,b,c.memoizedProps)):b===null&&c.stateNode!==null&&TG(c,c.memoizedProps,y.memoizedProps)}break;case 27:if(b&4&&c.alternate===null){S=c.stateNode,$=c.memoizedProps;try{for(var U=S.firstChild;U;){var X=U.nextSibling,fe=U.nodeName;U[vm]||fe==="HEAD"||fe==="BODY"||fe==="SCRIPT"||fe==="STYLE"||fe==="LINK"&&U.rel.toLowerCase()==="stylesheet"||S.removeChild(U),U=X}for(var _e=c.type,ne=S.attributes;ne.length;)S.removeAttributeNode(ne[0]);jn(S,_e,$),S[On]=c,S[Zi]=$}catch(Ke){Oi(c,c.return,Ke)}}case 5:if(Ta(d,c),Ea(c),b&512&&(fr||y===null||No(y,y.return)),c.flags&32){S=c.stateNode;try{_0(S,"")}catch(Ke){Oi(c,c.return,Ke)}}b&4&&c.stateNode!=null&&(S=c.memoizedProps,TG(c,S,y!==null?y.memoizedProps:S)),b&1024&&(kL=!0);break;case 6:if(Ta(d,c),Ea(c),b&4){if(c.stateNode===null)throw Error(r(162));b=c.memoizedProps,y=c.stateNode;try{y.nodeValue=b}catch(Ke){Oi(c,c.return,Ke)}}break;case 3:if(KT=null,S=xl,xl=YT(d.containerInfo),Ta(d,c),xl=S,Ea(c),b&4&&y!==null&&y.memoizedState.isDehydrated)try{F1(d.containerInfo)}catch(Ke){Oi(c,c.return,Ke)}kL&&(kL=!1,LG(c));break;case 4:b=xl,xl=YT(c.stateNode.containerInfo),Ta(d,c),Ea(c),xl=b;break;case 12:Ta(d,c),Ea(c);break;case 13:Ta(d,c),Ea(c),c.child.flags&8192&&c.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(VL=wn()),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,CL(c,b)));break;case 22:if(b&512&&(fr||y===null||No(y,y.return)),U=c.memoizedState!==null,X=y!==null&&y.memoizedState!==null,fe=eh,_e=fr,eh=fe||U,fr=_e||X,Ta(d,c),fr=_e,eh=fe,Ea(c),d=c.stateNode,d._current=c,d._visibility&=-3,d._visibility|=d._pendingVisibility&2,b&8192&&(d._visibility=U?d._visibility&-2:d._visibility|1,U&&(d=eh||fr,y===null||X||d||j0(c)),c.memoizedProps===null||c.memoizedProps.mode!=="manual"))e:for(y=null,d=c;;){if(d.tag===5||d.tag===26||d.tag===27){if(y===null){X=y=d;try{if(S=X.stateNode,U)$=S.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{C=X.stateNode,V=X.memoizedProps.style;var de=V!=null&&V.hasOwnProperty("display")?V.display:null;C.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(Ke){Oi(X,X.return,Ke)}}}else if(d.tag===6){if(y===null){X=d;try{X.stateNode.nodeValue=U?"":X.memoizedProps}catch(Ke){Oi(X,X.return,Ke)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===c)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;y===d&&(y=null),d=d.return}y===d&&(y=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=c.updateQueue,b!==null&&(y=b.retryQueue,y!==null&&(b.retryQueue=null,CL(c,y))));break;case 19:Ta(d,c),Ea(c),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,CL(c,b)));break;case 21:break;default:Ta(d,c),Ea(c)}}function Ea(c){var d=c.flags;if(d&2){try{if(c.tag!==27){e:{for(var y=c.return;y!==null;){if(EG(y)){var b=y;break e}y=y.return}throw Error(r(160))}switch(b.tag){case 27:var S=b.stateNode,$=TL(c);NT(c,$,S);break;case 5:var C=b.stateNode;b.flags&32&&(_0(C,""),b.flags&=-33);var V=TL(c);NT(c,V,C);break;case 3:case 4:var U=b.stateNode.containerInfo,X=TL(c);EL(c,X,U);break;default:throw Error(r(161))}}}catch(fe){Oi(c,c.return,fe)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function LG(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var d=c;LG(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),c=c.sibling}}function ih(c,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)MG(c,d.alternate,d),d=d.sibling}function j0(c){for(c=c.child;c!==null;){var d=c;switch(d.tag){case 0:case 11:case 14:case 15:Bd(4,d,d.return),j0(d);break;case 1:No(d,d.return);var y=d.stateNode;typeof y.componentWillUnmount=="function"&&xG(d,d.return,y),j0(d);break;case 26:case 27:case 5:No(d,d.return),j0(d);break;case 22:No(d,d.return),d.memoizedState===null&&j0(d);break;default:j0(d)}c=c.sibling}}function qd(c,d,y){for(y=y&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,S=c,$=d,C=$.flags;switch($.tag){case 0:case 11:case 15:qd(S,$,y),O1(4,$);break;case 1:if(qd(S,$,y),b=$,S=b.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(X){Oi(b,b.return,X)}if(b=$,S=b.updateQueue,S!==null){var V=b.stateNode;try{var U=S.shared.hiddenCallbacks;if(U!==null)for(S.shared.hiddenCallbacks=null,S=0;S<U.length;S++)OG(U[S],V)}catch(X){Oi(b,b.return,X)}}y&&C&64&&_G($),Pm($,$.return);break;case 26:case 27:case 5:qd(S,$,y),y&&b===null&&C&4&&$G($),Pm($,$.return);break;case 12:qd(S,$,y);break;case 13:qd(S,$,y),y&&C&4&&PG(S,$);break;case 22:$.memoizedState===null&&qd(S,$,y),Pm($,$.return);break;default:qd(S,$,y)}d=d.sibling}}function ML(c,d){var y=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),c=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(c=d.memoizedState.cachePool.pool),c!==y&&(c!=null&&c.refCount++,y!=null&&h1(y))}function AL(c,d){c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&h1(c))}function Gd(c,d,y,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)NG(c,d,y,b),d=d.sibling}function NG(c,d,y,b){var S=d.flags;switch(d.tag){case 0:case 11:case 15:Gd(c,d,y,b),S&2048&&O1(9,d);break;case 3:Gd(c,d,y,b),S&2048&&(c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&h1(c)));break;case 12:if(S&2048){Gd(c,d,y,b),c=d.stateNode;try{var $=d.memoizedProps,C=$.id,V=$.onPostCommit;typeof V=="function"&&V(C,d.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(U){Oi(d,d.return,U)}}else Gd(c,d,y,b);break;case 23:break;case 22:$=d.stateNode,d.memoizedState!==null?$._visibility&4?Gd(c,d,y,b):S1(c,d):$._visibility&4?Gd(c,d,y,b):($._visibility|=4,z0(c,d,y,b,(d.subtreeFlags&10256)!==0)),S&2048&&ML(d.alternate,d);break;case 24:Gd(c,d,y,b),S&2048&&AL(d.alternate,d);break;default:Gd(c,d,y,b)}}function z0(c,d,y,b,S){for(S=S&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var $=c,C=d,V=y,U=b,X=C.flags;switch(C.tag){case 0:case 11:case 15:z0($,C,V,U,S),O1(8,C);break;case 23:break;case 22:var fe=C.stateNode;C.memoizedState!==null?fe._visibility&4?z0($,C,V,U,S):S1($,C):(fe._visibility|=4,z0($,C,V,U,S)),S&&X&2048&&ML(C.alternate,C);break;case 24:z0($,C,V,U,S),S&&X&2048&&AL(C.alternate,C);break;default:z0($,C,V,U,S)}d=d.sibling}}function S1(c,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var y=c,b=d,S=b.flags;switch(b.tag){case 22:S1(y,b),S&2048&&ML(b.alternate,b);break;case 24:S1(y,b),S&2048&&AL(b.alternate,b);break;default:S1(y,b)}d=d.sibling}}var _1=8192;function U0(c){if(c.subtreeFlags&_1)for(c=c.child;c!==null;)DG(c),c=c.sibling}function DG(c){switch(c.tag){case 26:U0(c),c.flags&_1&&c.memoizedState!==null&&E_e(xl,c.memoizedState,c.memoizedProps);break;case 5:U0(c);break;case 3:case 4:var d=xl;xl=YT(c.stateNode.containerInfo),U0(c),xl=d;break;case 22:c.memoizedState===null&&(d=c.alternate,d!==null&&d.memoizedState!==null?(d=_1,_1=16777216,U0(c),_1=d):U0(c));break;default:U0(c)}}function VG(c){var d=c.alternate;if(d!==null&&(c=d.child,c!==null)){d.child=null;do d=c.sibling,c.sibling=null,c=d;while(c!==null)}}function x1(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var y=0;y<d.length;y++){var b=d[y];_n=b,jG(b,c)}VG(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)FG(c),c=c.sibling}function FG(c){switch(c.tag){case 0:case 11:case 15:x1(c),c.flags&2048&&Bd(9,c,c.return);break;case 3:x1(c);break;case 12:x1(c);break;case 22:var d=c.stateNode;c.memoizedState!==null&&d._visibility&4&&(c.return===null||c.return.tag!==13)?(d._visibility&=-5,DT(c)):x1(c);break;default:x1(c)}}function DT(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var y=0;y<d.length;y++){var b=d[y];_n=b,jG(b,c)}VG(c)}for(c=c.child;c!==null;){switch(d=c,d.tag){case 0:case 11:case 15:Bd(8,d,d.return),DT(d);break;case 22:y=d.stateNode,y._visibility&4&&(y._visibility&=-5,DT(d));break;default:DT(d)}c=c.sibling}}function jG(c,d){for(;_n!==null;){var y=_n;switch(y.tag){case 0:case 11:case 15:Bd(8,y,d);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var b=y.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:h1(y.memoizedState.cache)}if(b=y.child,b!==null)b.return=y,_n=b;else e:for(y=c;_n!==null;){b=_n;var S=b.sibling,$=b.return;if(AG(b),b===y){_n=null;break e}if(S!==null){S.return=$,_n=S;break e}_n=$}}}function jSe(c,d,y,b){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ka(c,d,y,b){return new jSe(c,d,y,b)}function IL(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Zd(c,d){var y=c.alternate;return y===null?(y=ka(c.tag,d,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=d,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&31457280,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,d=c.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y.refCleanup=c.refCleanup,y}function zG(c,d){c.flags&=31457282;var y=c.alternate;return y===null?(c.childLanes=0,c.lanes=d,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=y.childLanes,c.lanes=y.lanes,c.child=y.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=y.memoizedProps,c.memoizedState=y.memoizedState,c.updateQueue=y.updateQueue,c.type=y.type,d=y.dependencies,c.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),c}function VT(c,d,y,b,S,$){var C=0;if(b=c,typeof c=="function")IL(c)&&(C=1);else if(typeof c=="string")C=$_e(c,y,Er.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case l:return Rm(y.children,S,$,d);case u:C=8,S|=24;break;case p:return c=ka(12,y,d,S|2),c.elementType=p,c.lanes=$,c;case _:return c=ka(13,y,d,S),c.elementType=_,c.lanes=$,c;case x:return c=ka(19,y,d,S),c.elementType=x,c.lanes=$,c;case k:return UG(y,S,$,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:case w:C=10;break e;case g:C=9;break e;case O:C=11;break e;case T:C=14;break e;case E:C=16,b=null;break e}C=29,y=Error(r(130,c===null?"null":typeof c,"")),b=null}return d=ka(C,y,d,S),d.elementType=c,d.type=b,d.lanes=$,d}function Rm(c,d,y,b){return c=ka(7,c,b,d),c.lanes=y,c}function UG(c,d,y,b){c=ka(22,c,b,d),c.elementType=k,c.lanes=y;var S={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var $=S._current;if($===null)throw Error(r(456));if((S._pendingVisibility&2)===0){var C=Ld($,2);C!==null&&(S._pendingVisibility|=2,Ps(C,$,2))}},attach:function(){var $=S._current;if($===null)throw Error(r(456));if((S._pendingVisibility&2)!==0){var C=Ld($,2);C!==null&&(S._pendingVisibility&=-3,Ps(C,$,2))}}};return c.stateNode=S,c}function PL(c,d,y){return c=ka(6,c,null,d),c.lanes=y,c}function RL(c,d,y){return d=ka(4,c.children!==null?c.children:[],c.key,d),d.lanes=y,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function rh(c){c.flags|=4}function QG(c,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!EZ(d)){if(d=$a.current,d!==null&&((Ut&4194176)===Ut?$u!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||d!==$u))throw l1=F3,oq;c.flags|=8192}}function FT(c,d){d!==null&&(c.flags|=4),c.flags&16384&&(d=c.tag!==22?iT():536870912,c.lanes|=d,B0|=d)}function $1(c,d){if(!Xt)switch(c.tailMode){case"hidden":d=c.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var b=null;y!==null;)y.alternate!==null&&(b=y),y=y.sibling;b===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function sr(c){var d=c.alternate!==null&&c.alternate.child===c.child,y=0,b=0;if(d)for(var S=c.child;S!==null;)y|=S.lanes|S.childLanes,b|=S.subtreeFlags&31457280,b|=S.flags&31457280,S.return=c,S=S.sibling;else for(S=c.child;S!==null;)y|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=c,S=S.sibling;return c.subtreeFlags|=b,c.childLanes=y,d}function zSe(c,d,y){var b=d.pendingProps;switch(D3(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(d),null;case 1:return sr(d),null;case 3:return y=d.stateNode,b=null,c!==null&&(b=c.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),Kc(rn),to(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(n1(d)?rh(d):c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,_l!==null&&(UL(_l),_l=null))),sr(d),null;case 26:return y=d.memoizedState,c===null?(rh(d),y!==null?(sr(d),QG(d,y)):(sr(d),d.flags&=-16777217)):y?y!==c.memoizedState?(rh(d),sr(d),QG(d,y)):(sr(d),d.flags&=-16777217):(c.memoizedProps!==b&&rh(d),sr(d),d.flags&=-16777217),null;case 27:va(d),y=kr.current;var S=d.type;if(c!==null&&d.stateNode!=null)c.memoizedProps!==b&&rh(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return sr(d),null}c=Er.current,n1(d)?nq(d):(c=bZ(S,b,y),d.stateNode=c,rh(d))}return sr(d),null;case 5:if(va(d),y=d.type,c!==null&&d.stateNode!=null)c.memoizedProps!==b&&rh(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return sr(d),null}if(c=Er.current,n1(d))nq(d);else{switch(S=XT(kr.current),c){case 1:c=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:c=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":c=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":c=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":c=S.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof b.is=="string"?S.createElement("select",{is:b.is}):S.createElement("select"),b.multiple?c.multiple=!0:b.size&&(c.size=b.size);break;default:c=typeof b.is=="string"?S.createElement(y,{is:b.is}):S.createElement(y)}}c[On]=d,c[Zi]=b;e:for(S=d.child;S!==null;){if(S.tag===5||S.tag===6)c.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===d)break e;for(;S.sibling===null;){if(S.return===null||S.return===d)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}d.stateNode=c;e:switch(jn(c,y,b),y){case"button":case"input":case"select":case"textarea":c=!!b.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&rh(d)}}return sr(d),d.flags&=-16777217,null;case 6:if(c&&d.stateNode!=null)c.memoizedProps!==b&&rh(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(c=kr.current,n1(d)){if(c=d.stateNode,y=d.memoizedProps,b=null,S=Is,S!==null)switch(S.tag){case 27:case 5:b=S.memoizedProps}c[On]=d,c=!!(c.nodeValue===y||b!==null&&b.suppressHydrationWarning===!0||pZ(c.nodeValue,y)),c||xm(d)}else c=XT(c).createTextNode(b),c[On]=d,d.stateNode=c}return sr(d),null;case 13:if(b=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(S=n1(d),b!==null&&b.dehydrated!==null){if(c===null){if(!S)throw Error(r(318));if(S=d.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[On]=d}else s1(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;sr(d),S=!1}else _l!==null&&(UL(_l),_l=null),S=!0;if(!S)return d.flags&256?(Wc(d),d):(Wc(d),null)}if(Wc(d),(d.flags&128)!==0)return d.lanes=y,d;if(y=b!==null,c=c!==null&&c.memoizedState!==null,y){b=d.child,S=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(S=b.alternate.memoizedState.cachePool.pool);var $=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&($=b.memoizedState.cachePool.pool),$!==S&&(b.flags|=2048)}return y!==c&&y&&(d.child.flags|=8192),FT(d,d.updateQueue),sr(d),null;case 4:return to(),c===null&&KL(d.stateNode.containerInfo),sr(d),null;case 10:return Kc(d.type),sr(d),null;case 19:if(ri(tn),S=d.memoizedState,S===null)return sr(d),null;if(b=(d.flags&128)!==0,$=S.rendering,$===null)if(b)$1(S,!1);else{if(mr!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if($=ST(c),$!==null){for(d.flags|=128,$1(S,!1),c=$.updateQueue,d.updateQueue=c,FT(d,c),d.subtreeFlags=0,c=y,y=d.child;y!==null;)zG(y,c),y=y.sibling;return Ft(tn,tn.current&1|2),d.child}c=c.sibling}S.tail!==null&&wn()>jT&&(d.flags|=128,b=!0,$1(S,!1),d.lanes=4194304)}else{if(!b)if(c=ST($),c!==null){if(d.flags|=128,b=!0,c=c.updateQueue,d.updateQueue=c,FT(d,c),$1(S,!0),S.tail===null&&S.tailMode==="hidden"&&!$.alternate&&!Xt)return sr(d),null}else 2*wn()-S.renderingStartTime>jT&&y!==536870912&&(d.flags|=128,b=!0,$1(S,!1),d.lanes=4194304);S.isBackwards?($.sibling=d.child,d.child=$):(c=S.last,c!==null?c.sibling=$:d.child=$,S.last=$)}return S.tail!==null?(d=S.tail,S.rendering=d,S.tail=d.sibling,S.renderingStartTime=wn(),d.sibling=null,c=tn.current,Ft(tn,b?c&1|2:c&1),d):(sr(d),null);case 22:case 23:return Wc(d),z3(),b=d.memoizedState!==null,c!==null?c.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(y&536870912)!==0&&(d.flags&128)===0&&(sr(d),d.subtreeFlags&6&&(d.flags|=8192)):sr(d),y=d.updateQueue,y!==null&&FT(d,y.retryQueue),y=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048),c!==null&&ri(Tm),null;case 24:return y=null,c!==null&&(y=c.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),Kc(rn),sr(d),null;case 25:return null}throw Error(r(156,d.tag))}function USe(c,d){switch(D3(d),d.tag){case 1:return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Kc(rn),to(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 26:case 27:case 5:return va(d),null;case 13:if(Wc(d),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(r(340));s1()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return ri(tn),null;case 4:return to(),null;case 10:return Kc(d.type),null;case 22:case 23:return Wc(d),z3(),c!==null&&ri(Tm),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 24:return Kc(rn),null;case 25:return null;default:return null}}function BG(c,d){switch(D3(d),d.tag){case 3:Kc(rn),to();break;case 26:case 27:case 5:va(d);break;case 4:to();break;case 13:Wc(d);break;case 19:ri(tn);break;case 10:Kc(d.type);break;case 22:case 23:Wc(d),z3(),c!==null&&ri(Tm);break;case 24:Kc(rn)}}var QSe={getCacheForType:function(c){var d=rs(rn),y=d.data.get(c);return y===void 0&&(y=c(),d.data.set(c,y)),y}},BSe=typeof WeakMap=="function"?WeakMap:Map,or=0,Ti=null,Lt=null,Ut=0,Ei=0,Vo=null,nh=!1,Q0=!1,LL=!1,sh=0,mr=0,Hd=0,Lm=0,NL=0,Ca=0,B0=0,T1=null,Eu=null,DL=!1,VL=0,jT=1/0,zT=null,Wd=null,UT=!1,Nm=null,E1=0,FL=0,jL=null,k1=0,zL=null;function Fo(){if((or&2)!==0&&Ut!==0)return Ut&-Ut;if(j.T!==null){var c=L0;return c!==0?c:WL()}return gm()}function qG(){Ca===0&&(Ca=(Ut&536870912)===0||Xt?tT():536870912);var c=$a.current;return c!==null&&(c.flags|=32),Ca}function Ps(c,d,y){(c===Ti&&Ei===2||c.cancelPendingCommit!==null)&&(q0(c,0),oh(c,Ut,Ca,!1)),li(c,y),((or&2)===0||c!==Ti)&&(c===Ti&&((or&2)===0&&(Lm|=y),mr===4&&oh(c,Ut,Ca,!1)),ku(c))}function GG(c,d,y){if((or&6)!==0)throw Error(r(327));var b=!y&&(d&60)===0&&(d&c.expiredLanes)===0||mm(c,d),S=b?ZSe(c,d):qL(c,d,!0),$=b;do{if(S===0){Q0&&!b&&oh(c,d,0,!1);break}else if(S===6)oh(c,d,0,!nh);else{if(y=c.current.alternate,$&&!qSe(y)){S=qL(c,d,!1),$=!1;continue}if(S===2){if($=d,c.errorRecoveryDisabledLanes&$)var C=0;else C=c.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){d=C;e:{var V=c;S=T1;var U=V.current.memoizedState.isDehydrated;if(U&&(q0(V,C).flags|=256),C=qL(V,C,!1),C!==2){if(LL&&!U){V.errorRecoveryDisabledLanes|=$,Lm|=$,S=4;break e}$=Eu,Eu=S,$!==null&&UL($)}S=C}if($=!1,S!==2)continue}}if(S===1){q0(c,0),oh(c,d,0,!0);break}e:{switch(b=c,S){case 0:case 1:throw Error(r(345));case 4:if((d&4194176)===d){oh(b,d,Ca,!nh);break e}break;case 2:Eu=null;break;case 3:case 5:break;default:throw Error(r(329))}if(b.finishedWork=y,b.finishedLanes=d,(d&62914560)===d&&($=VL+300-wn(),10<$)){if(oh(b,d,Ca,!nh),w0(b,0)!==0)break e;b.timeoutHandle=yZ(ZG.bind(null,b,y,Eu,zT,DL,d,Ca,Lm,B0,nh,2,-0,0),$);break e}ZG(b,y,Eu,zT,DL,d,Ca,Lm,B0,nh,0,-0,0)}}break}while(!0);ku(c)}function UL(c){Eu===null?Eu=c:Eu.push.apply(Eu,c)}function ZG(c,d,y,b,S,$,C,V,U,X,fe,_e,ne){var de=d.subtreeFlags;if((de&8192||(de&16785408)===16785408)&&(R1={stylesheets:null,count:0,unsuspend:T_e},DG(d),d=k_e(),d!==null)){c.cancelPendingCommit=d(eZ.bind(null,c,y,b,S,C,V,U,1,_e,ne)),oh(c,$,C,!X);return}eZ(c,y,b,S,C,V,U,fe,_e,ne)}function qSe(c){for(var d=c;;){var y=d.tag;if((y===0||y===11||y===15)&&d.flags&16384&&(y=d.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var b=0;b<y.length;b++){var S=y[b],$=S.getSnapshot;S=S.value;try{if(!Lo($(),S))return!1}catch{return!1}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function oh(c,d,y,b){d&=~NL,d&=~Lm,c.suspendedLanes|=d,c.pingedLanes&=~d,b&&(c.warmLanes|=d),b=c.expirationTimes;for(var S=d;0<S;){var $=31-Ms(S),C=1<<$;b[$]=-1,S&=~C}y!==0&&io(c,y,d)}function QT(){return(or&6)===0?(C1(0),!1):!0}function QL(){if(Lt!==null){if(Ei===0)var c=Lt.return;else c=Lt,Jc=Am=null,W3(c),P0=null,u1=0,c=Lt;for(;c!==null;)BG(c.alternate,c),c=c.return;Lt=null}}function q0(c,d){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;y!==-1&&(c.timeoutHandle=-1,c_e(y)),y=c.cancelPendingCommit,y!==null&&(c.cancelPendingCommit=null,y()),QL(),Ti=c,Lt=y=Zd(c.current,null),Ut=d,Ei=0,Vo=null,nh=!1,Q0=mm(c,d),LL=!1,B0=Ca=NL=Lm=Hd=mr=0,Eu=T1=null,DL=!1,(d&8)!==0&&(d|=d&32);var b=c.entangledLanes;if(b!==0)for(c=c.entanglements,b&=d;0<b;){var S=31-Ms(b),$=1<<S;d|=c[S],b&=~$}return sh=d,pT(),y}function HG(c,d){Mt=null,j.H=Tu,d===a1?(d=uq(),Ei=3):d===oq?(d=uq(),Ei=4):Ei=d===aG?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Vo=d,Lt===null&&(mr=1,PT(c,Sa(d,c.current)))}function WG(){var c=j.H;return j.H=Tu,c===null?Tu:c}function XG(){var c=j.A;return j.A=QSe,c}function BL(){mr=4,nh||(Ut&4194176)!==Ut&&$a.current!==null||(Q0=!0),(Hd&134217727)===0&&(Lm&134217727)===0||Ti===null||oh(Ti,Ut,Ca,!1)}function qL(c,d,y){var b=or;or|=2;var S=WG(),$=XG();(Ti!==c||Ut!==d)&&(zT=null,q0(c,d)),d=!1;var C=mr;e:do try{if(Ei!==0&&Lt!==null){var V=Lt,U=Vo;switch(Ei){case 8:QL(),C=6;break e;case 3:case 2:case 6:$a.current===null&&(d=!0);var X=Ei;if(Ei=0,Vo=null,G0(c,V,U,X),y&&Q0){C=0;break e}break;default:X=Ei,Ei=0,Vo=null,G0(c,V,U,X)}}GSe(),C=mr;break}catch(fe){HG(c,fe)}while(!0);return d&&c.shellSuspendCounter++,Jc=Am=null,or=b,j.H=S,j.A=$,Lt===null&&(Ti=null,Ut=0,pT()),C}function GSe(){for(;Lt!==null;)YG(Lt)}function ZSe(c,d){var y=or;or|=2;var b=WG(),S=XG();Ti!==c||Ut!==d?(zT=null,jT=wn()+500,q0(c,d)):Q0=mm(c,d);e:do try{if(Ei!==0&&Lt!==null){d=Lt;var $=Vo;t:switch(Ei){case 1:Ei=0,Vo=null,G0(c,d,$,1);break;case 2:if(aq($)){Ei=0,Vo=null,JG(d);break}d=function(){Ei===2&&Ti===c&&(Ei=7),ku(c)},$.then(d,d);break e;case 3:Ei=7;break e;case 4:Ei=5;break e;case 7:aq($)?(Ei=0,Vo=null,JG(d)):(Ei=0,Vo=null,G0(c,d,$,7));break;case 5:var C=null;switch(Lt.tag){case 26:C=Lt.memoizedState;case 5:case 27:var V=Lt;if(!C||EZ(C)){Ei=0,Vo=null;var U=V.sibling;if(U!==null)Lt=U;else{var X=V.return;X!==null?(Lt=X,BT(X)):Lt=null}break t}}Ei=0,Vo=null,G0(c,d,$,5);break;case 6:Ei=0,Vo=null,G0(c,d,$,6);break;case 8:QL(),mr=6;break e;default:throw Error(r(462))}}HSe();break}catch(fe){HG(c,fe)}while(!0);return Jc=Am=null,j.H=b,j.A=S,or=y,Lt!==null?0:(Ti=null,Ut=0,pT(),mr)}function HSe(){for(;Lt!==null&&!Ou();)YG(Lt)}function YG(c){var d=bG(c.alternate,c,sh);c.memoizedProps=c.pendingProps,d===null?BT(c):Lt=d}function JG(c){var d=c,y=d.alternate;switch(d.tag){case 15:case 0:d=pG(y,d,d.pendingProps,d.type,void 0,Ut);break;case 11:d=pG(y,d,d.pendingProps,d.type.render,d.ref,Ut);break;case 5:W3(d);default:BG(y,d),d=Lt=zG(d,sh),d=bG(y,d,sh)}c.memoizedProps=c.pendingProps,d===null?BT(c):Lt=d}function G0(c,d,y,b){Jc=Am=null,W3(d),P0=null,u1=0;var S=d.return;try{if(NSe(c,S,d,y,Ut)){mr=1,PT(c,Sa(y,c.current)),Lt=null;return}}catch($){if(S!==null)throw Lt=S,$;mr=1,PT(c,Sa(y,c.current)),Lt=null;return}d.flags&32768?(Xt||b===1?c=!0:Q0||(Ut&536870912)!==0?c=!1:(nh=c=!0,(b===2||b===3||b===6)&&(b=$a.current,b!==null&&b.tag===13&&(b.flags|=16384))),KG(d,c)):BT(d)}function BT(c){var d=c;do{if((d.flags&32768)!==0){KG(d,nh);return}c=d.return;var y=zSe(d.alternate,d,sh);if(y!==null){Lt=y;return}if(d=d.sibling,d!==null){Lt=d;return}Lt=d=c}while(d!==null);mr===0&&(mr=5)}function KG(c,d){do{var y=USe(c.alternate,c);if(y!==null){y.flags&=32767,Lt=y;return}if(y=c.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!d&&(c=c.sibling,c!==null)){Lt=c;return}Lt=c=y}while(c!==null);mr=6,Lt=null}function eZ(c,d,y,b,S,$,C,V,U,X){var fe=j.T,_e=ke.p;try{ke.p=2,j.T=null,WSe(c,d,y,b,_e,S,$,C,V,U,X)}finally{j.T=fe,ke.p=_e}}function WSe(c,d,y,b,S,$,C,V){do Z0();while(Nm!==null);if((or&6)!==0)throw Error(r(327));var U=c.finishedWork;if(b=c.finishedLanes,U===null)return null;if(c.finishedWork=null,c.finishedLanes=0,U===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var X=U.lanes|U.childLanes;if(X|=R3,Ad(c,b,X,$,C,V),c===Ti&&(Lt=Ti=null,Ut=0),(U.subtreeFlags&10256)===0&&(U.flags&10256)===0||UT||(UT=!0,FL=X,jL=y,KSe(ks,function(){return Z0(),null})),y=(U.flags&15990)!==0,(U.subtreeFlags&15990)!==0||y?(y=j.T,j.T=null,$=ke.p,ke.p=2,C=or,or|=4,VSe(c,U),RG(U,c),bSe(r5,c.containerInfo),iE=!!i5,r5=i5=null,c.current=U,MG(c,U.alternate,U),is(),or=C,ke.p=$,j.T=y):c.current=U,UT?(UT=!1,Nm=c,E1=b):tZ(c,X),X=c.pendingLanes,X===0&&(Wd=null),a3(U.stateNode),ku(c),d!==null)for(S=c.onRecoverableError,U=0;U<d.length;U++)X=d[U],S(X.value,{componentStack:X.stack});return(E1&3)!==0&&Z0(),X=c.pendingLanes,(b&4194218)!==0&&(X&42)!==0?c===zL?k1++:(k1=0,zL=c):k1=0,C1(0),null}function tZ(c,d){(c.pooledCacheLanes&=d)===0&&(d=c.pooledCache,d!=null&&(c.pooledCache=null,h1(d)))}function Z0(){if(Nm!==null){var c=Nm,d=FL;FL=0;var y=Ge(E1),b=j.T,S=ke.p;try{if(ke.p=32>y?32:y,j.T=null,Nm===null)var $=!1;else{y=jL,jL=null;var C=Nm,V=E1;if(Nm=null,E1=0,(or&6)!==0)throw Error(r(331));var U=or;if(or|=4,FG(C.current),NG(C,C.current,V,y),or=U,C1(0,!1),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(fm,C)}catch{}$=!0}return $}finally{ke.p=S,j.T=b,tZ(c,d)}}return!1}function iZ(c,d,y){d=Sa(y,d),d=uL(c.stateNode,d,2),c=Qd(c,d,2),c!==null&&(li(c,2),ku(c))}function Oi(c,d,y){if(c.tag===3)iZ(c,c,y);else for(;d!==null;){if(d.tag===3){iZ(d,c,y);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Wd===null||!Wd.has(b))){c=Sa(y,c),y=sG(2),b=Qd(d,y,2),b!==null&&(oG(y,b,d,c),li(b,2),ku(b));break}}d=d.return}}function GL(c,d,y){var b=c.pingCache;if(b===null){b=c.pingCache=new BSe;var S=new Set;b.set(d,S)}else S=b.get(d),S===void 0&&(S=new Set,b.set(d,S));S.has(y)||(LL=!0,S.add(y),c=XSe.bind(null,c,d,y),d.then(c,c))}function XSe(c,d,y){var b=c.pingCache;b!==null&&b.delete(d),c.pingedLanes|=c.suspendedLanes&y,c.warmLanes&=~y,Ti===c&&(Ut&y)===y&&(mr===4||mr===3&&(Ut&62914560)===Ut&&300>wn()-VL?(or&2)===0&&q0(c,0):NL|=y,B0===Ut&&(B0=0)),ku(c)}function rZ(c,d){d===0&&(d=iT()),c=Ld(c,d),c!==null&&(li(c,d),ku(c))}function YSe(c){var d=c.memoizedState,y=0;d!==null&&(y=d.retryLane),rZ(c,y)}function JSe(c,d){var y=0;switch(c.tag){case 13:var b=c.stateNode,S=c.memoizedState;S!==null&&(y=S.retryLane);break;case 19:b=c.stateNode;break;case 22:b=c.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),rZ(c,y)}function KSe(c,d){return bl(c,d)}var qT=null,H0=null,ZL=!1,GT=!1,HL=!1,Dm=0;function ku(c){c!==H0&&c.next===null&&(H0===null?qT=H0=c:H0=H0.next=c),GT=!0,ZL||(ZL=!0,t_e(e_e))}function C1(c,d){if(!HL&&GT){HL=!0;do for(var y=!1,b=qT;b!==null;){if(c!==0){var S=b.pendingLanes;if(S===0)var $=0;else{var C=b.suspendedLanes,V=b.pingedLanes;$=(1<<31-Ms(42|c)+1)-1,$&=S&~(C&~V),$=$&201326677?$&201326677|1:$?$|2:0}$!==0&&(y=!0,oZ(b,$))}else $=Ut,$=w0(b,b===Ti?$:0),($&3)===0||mm(b,$)||(y=!0,oZ(b,$));b=b.next}while(y);HL=!1}}function e_e(){GT=ZL=!1;var c=0;Dm!==0&&(u_e()&&(c=Dm),Dm=0);for(var d=wn(),y=null,b=qT;b!==null;){var S=b.next,$=nZ(b,d);$===0?(b.next=null,y===null?qT=S:y.next=S,S===null&&(H0=y)):(y=b,(c!==0||($&3)!==0)&&(GT=!0)),b=S}C1(c)}function nZ(c,d){for(var y=c.suspendedLanes,b=c.pingedLanes,S=c.expirationTimes,$=c.pendingLanes&-62914561;0<$;){var C=31-Ms($),V=1<<C,U=S[C];U===-1?((V&y)===0||(V&b)!==0)&&(S[C]=h3(V,d)):U<=d&&(c.expiredLanes|=V),$&=~V}if(d=Ti,y=Ut,y=w0(c,c===d?y:0),b=c.callbackNode,y===0||c===d&&Ei===2||c.cancelPendingCommit!==null)return b!==null&&b!==null&&ba(b),c.callbackNode=null,c.callbackPriority=0;if((y&3)===0||mm(c,y)){if(d=y&-y,d===c.callbackPriority)return d;switch(b!==null&&ba(b),Ge(y)){case 2:case 8:y=nr;break;case 32:y=ks;break;case 268435456:y=eT;break;default:y=ks}return b=sZ.bind(null,c),y=bl(y,b),c.callbackPriority=d,c.callbackNode=y,d}return b!==null&&b!==null&&ba(b),c.callbackPriority=2,c.callbackNode=null,2}function sZ(c,d){var y=c.callbackNode;if(Z0()&&c.callbackNode!==y)return null;var b=Ut;return b=w0(c,c===Ti?b:0),b===0?null:(GG(c,b,d),nZ(c,wn()),c.callbackNode!=null&&c.callbackNode===y?sZ.bind(null,c):null)}function oZ(c,d){if(Z0())return null;GG(c,d,!0)}function t_e(c){h_e(function(){(or&6)!==0?bl(Su,c):c()})}function WL(){return Dm===0&&(Dm=tT()),Dm}function aZ(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:oT(""+c)}function lZ(c,d){var y=d.ownerDocument.createElement("input");return y.name=d.name,y.value=d.value,c.id&&y.setAttribute("form",c.id),d.parentNode.insertBefore(y,d),c=new FormData(c),y.parentNode.removeChild(y),c}function i_e(c,d,y,b,S){if(d==="submit"&&y&&y.stateNode===S){var $=aZ((S[Zi]||null).action),C=b.submitter;C&&(d=(d=C[Zi]||null)?aZ(d.formAction):C.getAttribute("formAction"),d!==null&&($=d,C=null));var V=new cT("action","action",null,b,S);c.push({event:V,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Dm!==0){var U=C?lZ(S,C):new FormData(S);nL(y,{pending:!0,data:U,method:S.method,action:$},null,U)}}else typeof $=="function"&&(V.preventDefault(),U=C?lZ(S,C):new FormData(S),nL(y,{pending:!0,data:U,method:S.method,action:$},$,U))},currentTarget:S}]})}}for(var XL=0;XL<eq.length;XL++){var YL=eq[XL],r_e=YL.toLowerCase(),n_e=YL[0].toUpperCase()+YL.slice(1);Sl(r_e,"on"+n_e)}Sl(WB,"onAnimationEnd"),Sl(XB,"onAnimationIteration"),Sl(YB,"onAnimationStart"),Sl("dblclick","onDoubleClick"),Sl("focusin","onFocus"),Sl("focusout","onBlur"),Sl(OSe,"onTransitionRun"),Sl(SSe,"onTransitionStart"),Sl(_Se,"onTransitionCancel"),Sl(JB,"onTransitionEnd"),Pd("onMouseEnter",["mouseout","mouseover"]),Pd("onMouseLeave",["mouseout","mouseover"]),Pd("onPointerEnter",["pointerout","pointerover"]),Pd("onPointerLeave",["pointerout","pointerover"]),Gc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gc("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var M1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s_e=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(M1));function uZ(c,d){d=(d&4)!==0;for(var y=0;y<c.length;y++){var b=c[y],S=b.event;b=b.listeners;e:{var $=void 0;if(d)for(var C=b.length-1;0<=C;C--){var V=b[C],U=V.instance,X=V.currentTarget;if(V=V.listener,U!==$&&S.isPropagationStopped())break e;$=V,S.currentTarget=X;try{$(S)}catch(fe){IT(fe)}S.currentTarget=null,$=U}else for(C=0;C<b.length;C++){if(V=b[C],U=V.instance,X=V.currentTarget,V=V.listener,U!==$&&S.isPropagationStopped())break e;$=V,S.currentTarget=X;try{$(S)}catch(fe){IT(fe)}S.currentTarget=null,$=U}}}}function jt(c,d){var y=d[O0];y===void 0&&(y=d[O0]=new Set);var b=c+"__bubble";y.has(b)||(cZ(d,c,2,!1),y.add(b))}function JL(c,d,y){var b=0;d&&(b|=4),cZ(y,c,b,d)}var ZT="_reactListening"+Math.random().toString(36).slice(2);function KL(c){if(!c[ZT]){c[ZT]=!0,HO.forEach(function(y){y!=="selectionchange"&&(s_e.has(y)||JL(y,!1,c),JL(y,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[ZT]||(d[ZT]=!0,JL("selectionchange",!1,d))}}function cZ(c,d,y,b){switch(PZ(d)){case 2:var S=A_e;break;case 8:S=I_e;break;default:S=d5}y=S.bind(null,d,y,c),S=void 0,!O3||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),b?S!==void 0?c.addEventListener(d,y,{capture:!0,passive:S}):c.addEventListener(d,y,!0):S!==void 0?c.addEventListener(d,y,{passive:S}):c.addEventListener(d,y,!1)}function e5(c,d,y,b,S){var $=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var C=b.tag;if(C===3||C===4){var V=b.stateNode.containerInfo;if(V===S||V.nodeType===8&&V.parentNode===S)break;if(C===4)for(C=b.return;C!==null;){var U=C.tag;if((U===3||U===4)&&(U=C.stateNode.containerInfo,U===S||U.nodeType===8&&U.parentNode===S))return;C=C.return}for(;V!==null;){if(C=wl(V),C===null)return;if(U=C.tag,U===5||U===6||U===26||U===27){b=$=C;continue e}V=V.parentNode}}b=b.return}$B(function(){var X=$,fe=b3(y),_e=[];e:{var ne=KB.get(c);if(ne!==void 0){var de=cT,Ke=c;switch(c){case"keypress":if(lT(y)===0)break e;case"keydown":case"keyup":de=J1e;break;case"focusin":Ke="focus",de=$3;break;case"focusout":Ke="blur",de=$3;break;case"beforeblur":case"afterblur":de=$3;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=kB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=j1e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=tSe;break;case WB:case XB:case YB:de=Q1e;break;case JB:de=rSe;break;case"scroll":case"scrollend":de=V1e;break;case"wheel":de=sSe;break;case"copy":case"cut":case"paste":de=q1e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=MB;break;case"toggle":case"beforetoggle":de=aSe}var $t=(d&4)!==0,yr=!$t&&(c==="scroll"||c==="scrollend"),ee=$t?ne!==null?ne+"Capture":null:ne;$t=[];for(var H=X,re;H!==null;){var be=H;if(re=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||re===null||ee===null||(be=WO(H,ee),be!=null&&$t.push(A1(H,be,re))),yr)break;H=H.return}0<$t.length&&(ne=new de(ne,Ke,null,y,fe),_e.push({event:ne,listeners:$t}))}}if((d&7)===0){e:{if(ne=c==="mouseover"||c==="pointerover",de=c==="mouseout"||c==="pointerout",ne&&y!==v3&&(Ke=y.relatedTarget||y.fromElement)&&(wl(Ke)||Ke[Bc]))break e;if((de||ne)&&(ne=fe.window===fe?fe:(ne=fe.ownerDocument)?ne.defaultView||ne.parentWindow:window,de?(Ke=y.relatedTarget||y.toElement,de=X,Ke=Ke?wl(Ke):null,Ke!==null&&(yr=ye(Ke),$t=Ke.tag,Ke!==yr||$t!==5&&$t!==27&&$t!==6)&&(Ke=null)):(de=null,Ke=X),de!==Ke)){if($t=kB,be="onMouseLeave",ee="onMouseEnter",H="mouse",(c==="pointerout"||c==="pointerover")&&($t=MB,be="onPointerLeave",ee="onPointerEnter",H="pointer"),yr=de==null?ne:qc(de),re=Ke==null?ne:qc(Ke),ne=new $t(be,H+"leave",de,y,fe),ne.target=yr,ne.relatedTarget=re,be=null,wl(fe)===X&&($t=new $t(ee,H+"enter",Ke,y,fe),$t.target=re,$t.relatedTarget=yr,be=$t),yr=be,de&&Ke)t:{for($t=de,ee=Ke,H=0,re=$t;re;re=W0(re))H++;for(re=0,be=ee;be;be=W0(be))re++;for(;0<H-re;)$t=W0($t),H--;for(;0<re-H;)ee=W0(ee),re--;for(;H--;){if($t===ee||ee!==null&&$t===ee.alternate)break t;$t=W0($t),ee=W0(ee)}$t=null}else $t=null;de!==null&&hZ(_e,ne,de,$t,!1),Ke!==null&&yr!==null&&hZ(_e,yr,Ke,$t,!0)}}e:{if(ne=X?qc(X):window,de=ne.nodeName&&ne.nodeName.toLowerCase(),de==="select"||de==="input"&&ne.type==="file")var Ze=VB;else if(NB(ne))if(FB)Ze=gSe;else{Ze=mSe;var Pt=fSe}else de=ne.nodeName,!de||de.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?X&&g3(X.elementType)&&(Ze=VB):Ze=ySe;if(Ze&&(Ze=Ze(c,X))){DB(_e,Ze,y,fe);break e}Pt&&Pt(c,ne,X),c==="focusout"&&X&&ne.type==="number"&&X.memoizedProps.value!=null&&y3(ne,"number",ne.value)}switch(Pt=X?qc(X):window,c){case"focusin":(NB(Pt)||Pt.contentEditable==="true")&&(E0=Pt,A3=X,r1=null);break;case"focusout":r1=A3=E0=null;break;case"mousedown":I3=!0;break;case"contextmenu":case"mouseup":case"dragend":I3=!1,ZB(_e,y,fe);break;case"selectionchange":if(wSe)break;case"keydown":case"keyup":ZB(_e,y,fe)}var at;if(E3)e:{switch(c){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else T0?RB(c,y)&&(pt="onCompositionEnd"):c==="keydown"&&y.keyCode===229&&(pt="onCompositionStart");pt&&(AB&&y.locale!=="ko"&&(T0||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&T0&&(at=TB()):(Rd=fe,S3="value"in Rd?Rd.value:Rd.textContent,T0=!0)),Pt=HT(X,pt),0<Pt.length&&(pt=new CB(pt,c,null,y,fe),_e.push({event:pt,listeners:Pt}),at?pt.data=at:(at=LB(y),at!==null&&(pt.data=at)))),(at=uSe?cSe(c,y):hSe(c,y))&&(pt=HT(X,"onBeforeInput"),0<pt.length&&(Pt=new CB("onBeforeInput","beforeinput",null,y,fe),_e.push({event:Pt,listeners:pt}),Pt.data=at)),i_e(_e,c,X,y,fe)}uZ(_e,d)})}function A1(c,d,y){return{instance:c,listener:d,currentTarget:y}}function HT(c,d){for(var y=d+"Capture",b=[];c!==null;){var S=c,$=S.stateNode;S=S.tag,S!==5&&S!==26&&S!==27||$===null||(S=WO(c,y),S!=null&&b.unshift(A1(c,S,$)),S=WO(c,d),S!=null&&b.push(A1(c,S,$))),c=c.return}return b}function W0(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function hZ(c,d,y,b,S){for(var $=d._reactName,C=[];y!==null&&y!==b;){var V=y,U=V.alternate,X=V.stateNode;if(V=V.tag,U!==null&&U===b)break;V!==5&&V!==26&&V!==27||X===null||(U=X,S?(X=WO(y,$),X!=null&&C.unshift(A1(y,X,U))):S||(X=WO(y,$),X!=null&&C.push(A1(y,X,U)))),y=y.return}C.length!==0&&c.push({event:d,listeners:C})}var o_e=/\r\n?/g,a_e=/\u0000|\uFFFD/g;function dZ(c){return(typeof c=="string"?c:""+c).replace(o_e,`
`).replace(a_e,"")}function pZ(c,d){return d=dZ(d),dZ(c)===d}function WT(){}function mi(c,d,y,b,S,$){switch(y){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||_0(c,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&_0(c,""+b);break;case"className":ce(c,"class",b);break;case"tabIndex":ce(c,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":ce(c,y,b);break;case"style":_B(c,b,$);break;case"data":if(d!=="object"){ce(c,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||y!=="href")){c.removeAttribute(y);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){c.removeAttribute(y);break}b=oT(""+b),c.setAttribute(y,b);break;case"action":case"formAction":if(typeof b=="function"){c.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(y==="formAction"?(d!=="input"&&mi(c,d,"name",S.name,S,null),mi(c,d,"formEncType",S.formEncType,S,null),mi(c,d,"formMethod",S.formMethod,S,null),mi(c,d,"formTarget",S.formTarget,S,null)):(mi(c,d,"encType",S.encType,S,null),mi(c,d,"method",S.method,S,null),mi(c,d,"target",S.target,S,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){c.removeAttribute(y);break}b=oT(""+b),c.setAttribute(y,b);break;case"onClick":b!=null&&(c.onclick=WT);break;case"onScroll":b!=null&&jt("scroll",c);break;case"onScrollEnd":b!=null&&jt("scrollend",c);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(y=b.__html,y!=null){if(S.children!=null)throw Error(r(60));c.innerHTML=y}}break;case"multiple":c.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":c.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){c.removeAttribute("xlink:href");break}y=oT(""+b),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?c.setAttribute(y,""+b):c.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?c.setAttribute(y,""):c.removeAttribute(y);break;case"capture":case"download":b===!0?c.setAttribute(y,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?c.setAttribute(y,b):c.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?c.setAttribute(y,b):c.removeAttribute(y);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?c.removeAttribute(y):c.setAttribute(y,b);break;case"popover":jt("beforetoggle",c),jt("toggle",c),z(c,"popover",b);break;case"xlinkActuate":Se(c,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Se(c,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Se(c,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Se(c,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Se(c,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Se(c,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Se(c,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Se(c,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Se(c,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":z(c,"is",b);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=N1e.get(y)||y,z(c,y,b))}}function t5(c,d,y,b,S,$){switch(y){case"style":_B(c,b,$);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(y=b.__html,y!=null){if(S.children!=null)throw Error(r(60));c.innerHTML=y}}break;case"children":typeof b=="string"?_0(c,b):(typeof b=="number"||typeof b=="bigint")&&_0(c,""+b);break;case"onScroll":b!=null&&jt("scroll",c);break;case"onScrollEnd":b!=null&&jt("scrollend",c);break;case"onClick":b!=null&&(c.onclick=WT);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rT.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(S=y.endsWith("Capture"),d=y.slice(2,S?y.length-7:void 0),$=c[Zi]||null,$=$!=null?$[y]:null,typeof $=="function"&&c.removeEventListener(d,$,S),typeof b=="function")){typeof $!="function"&&$!==null&&(y in c?c[y]=null:c.hasAttribute(y)&&c.removeAttribute(y)),c.addEventListener(d,b,S);break e}y in c?c[y]=b:b===!0?c.setAttribute(y,""):z(c,y,b)}}}function jn(c,d,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",c),jt("load",c);var b=!1,S=!1,$;for($ in y)if(y.hasOwnProperty($)){var C=y[$];if(C!=null)switch($){case"src":b=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mi(c,d,$,C,y,null)}}S&&mi(c,d,"srcSet",y.srcSet,y,null),b&&mi(c,d,"src",y.src,y,null);return;case"input":jt("invalid",c);var V=$=C=S=null,U=null,X=null;for(b in y)if(y.hasOwnProperty(b)){var fe=y[b];if(fe!=null)switch(b){case"name":S=fe;break;case"type":C=fe;break;case"checked":U=fe;break;case"defaultChecked":X=fe;break;case"value":$=fe;break;case"defaultValue":V=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,d));break;default:mi(c,d,b,fe,y,null)}}bB(c,$,V,U,X,C,S,!1),Wi(c);return;case"select":jt("invalid",c),b=C=$=null;for(S in y)if(y.hasOwnProperty(S)&&(V=y[S],V!=null))switch(S){case"value":$=V;break;case"defaultValue":C=V;break;case"multiple":b=V;default:mi(c,d,S,V,y,null)}d=$,y=C,c.multiple=!!b,d!=null?S0(c,!!b,d,!1):y!=null&&S0(c,!!b,y,!0);return;case"textarea":jt("invalid",c),$=S=b=null;for(C in y)if(y.hasOwnProperty(C)&&(V=y[C],V!=null))switch(C){case"value":b=V;break;case"defaultValue":S=V;break;case"children":$=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:mi(c,d,C,V,y,null)}OB(c,b,S,$),Wi(c);return;case"option":for(U in y)if(y.hasOwnProperty(U)&&(b=y[U],b!=null))switch(U){case"selected":c.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:mi(c,d,U,b,y,null)}return;case"dialog":jt("cancel",c),jt("close",c);break;case"iframe":case"object":jt("load",c);break;case"video":case"audio":for(b=0;b<M1.length;b++)jt(M1[b],c);break;case"image":jt("error",c),jt("load",c);break;case"details":jt("toggle",c);break;case"embed":case"source":case"link":jt("error",c),jt("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in y)if(y.hasOwnProperty(X)&&(b=y[X],b!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mi(c,d,X,b,y,null)}return;default:if(g3(d)){for(fe in y)y.hasOwnProperty(fe)&&(b=y[fe],b!==void 0&&t5(c,d,fe,b,y,void 0));return}}for(V in y)y.hasOwnProperty(V)&&(b=y[V],b!=null&&mi(c,d,V,b,y,null))}function l_e(c,d,y,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,$=null,C=null,V=null,U=null,X=null,fe=null;for(de in y){var _e=y[de];if(y.hasOwnProperty(de)&&_e!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":U=_e;default:b.hasOwnProperty(de)||mi(c,d,de,null,b,_e)}}for(var ne in b){var de=b[ne];if(_e=y[ne],b.hasOwnProperty(ne)&&(de!=null||_e!=null))switch(ne){case"type":$=de;break;case"name":S=de;break;case"checked":X=de;break;case"defaultChecked":fe=de;break;case"value":C=de;break;case"defaultValue":V=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,d));break;default:de!==_e&&mi(c,d,ne,de,b,_e)}}m3(c,C,V,U,X,fe,$,S);return;case"select":de=C=V=ne=null;for($ in y)if(U=y[$],y.hasOwnProperty($)&&U!=null)switch($){case"value":break;case"multiple":de=U;default:b.hasOwnProperty($)||mi(c,d,$,null,b,U)}for(S in b)if($=b[S],U=y[S],b.hasOwnProperty(S)&&($!=null||U!=null))switch(S){case"value":ne=$;break;case"defaultValue":V=$;break;case"multiple":C=$;default:$!==U&&mi(c,d,S,$,b,U)}d=V,y=C,b=de,ne!=null?S0(c,!!y,ne,!1):!!b!=!!y&&(d!=null?S0(c,!!y,d,!0):S0(c,!!y,y?[]:"",!1));return;case"textarea":de=ne=null;for(V in y)if(S=y[V],y.hasOwnProperty(V)&&S!=null&&!b.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:mi(c,d,V,null,b,S)}for(C in b)if(S=b[C],$=y[C],b.hasOwnProperty(C)&&(S!=null||$!=null))switch(C){case"value":ne=S;break;case"defaultValue":de=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:S!==$&&mi(c,d,C,S,b,$)}wB(c,ne,de);return;case"option":for(var Ke in y)if(ne=y[Ke],y.hasOwnProperty(Ke)&&ne!=null&&!b.hasOwnProperty(Ke))switch(Ke){case"selected":c.selected=!1;break;default:mi(c,d,Ke,null,b,ne)}for(U in b)if(ne=b[U],de=y[U],b.hasOwnProperty(U)&&ne!==de&&(ne!=null||de!=null))switch(U){case"selected":c.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:mi(c,d,U,ne,b,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in y)ne=y[$t],y.hasOwnProperty($t)&&ne!=null&&!b.hasOwnProperty($t)&&mi(c,d,$t,null,b,ne);for(X in b)if(ne=b[X],de=y[X],b.hasOwnProperty(X)&&ne!==de&&(ne!=null||de!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,d));break;default:mi(c,d,X,ne,b,de)}return;default:if(g3(d)){for(var yr in y)ne=y[yr],y.hasOwnProperty(yr)&&ne!==void 0&&!b.hasOwnProperty(yr)&&t5(c,d,yr,void 0,b,ne);for(fe in b)ne=b[fe],de=y[fe],!b.hasOwnProperty(fe)||ne===de||ne===void 0&&de===void 0||t5(c,d,fe,ne,b,de);return}}for(var ee in y)ne=y[ee],y.hasOwnProperty(ee)&&ne!=null&&!b.hasOwnProperty(ee)&&mi(c,d,ee,null,b,ne);for(_e in b)ne=b[_e],de=y[_e],!b.hasOwnProperty(_e)||ne===de||ne==null&&de==null||mi(c,d,_e,ne,b,de)}var i5=null,r5=null;function XT(c){return c.nodeType===9?c:c.ownerDocument}function fZ(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mZ(c,d){if(c===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&d==="foreignObject"?0:c}function n5(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var s5=null;function u_e(){var c=window.event;return c&&c.type==="popstate"?c===s5?!1:(s5=c,!0):(s5=null,!1)}var yZ=typeof setTimeout=="function"?setTimeout:void 0,c_e=typeof clearTimeout=="function"?clearTimeout:void 0,gZ=typeof Promise=="function"?Promise:void 0,h_e=typeof queueMicrotask=="function"?queueMicrotask:typeof gZ<"u"?function(c){return gZ.resolve(null).then(c).catch(d_e)}:yZ;function d_e(c){setTimeout(function(){throw c})}function o5(c,d){var y=d,b=0;do{var S=y.nextSibling;if(c.removeChild(y),S&&S.nodeType===8)if(y=S.data,y==="/$"){if(b===0){c.removeChild(S),F1(d);return}b--}else y!=="$"&&y!=="$?"&&y!=="$!"||b++;y=S}while(y);F1(d)}function a5(c){var d=c.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var y=d;switch(d=d.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":a5(y),ZO(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}c.removeChild(y)}}function p_e(c,d,y,b){for(;c.nodeType===1;){var S=y;if(c.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(b){if(!c[vm])switch(d){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if($=c.getAttribute("rel"),$==="stylesheet"&&c.hasAttribute("data-precedence"))break;if($!==S.rel||c.getAttribute("href")!==(S.href==null?null:S.href)||c.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||c.getAttribute("title")!==(S.title==null?null:S.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if($=c.getAttribute("src"),($!==(S.src==null?null:S.src)||c.getAttribute("type")!==(S.type==null?null:S.type)||c.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&$&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(d==="input"&&c.type==="hidden"){var $=S.name==null?null:""+S.name;if(S.type==="hidden"&&c.getAttribute("name")===$)return c}else return c;if(c=$l(c.nextSibling),c===null)break}return null}function f_e(c,d,y){if(d==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!y||(c=$l(c.nextSibling),c===null))return null;return c}function $l(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return c}function vZ(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var y=c.data;if(y==="$"||y==="$!"||y==="$?"){if(d===0)return c;d--}else y==="/$"&&d++}c=c.previousSibling}return null}function bZ(c,d,y){switch(d=XT(y),c){case"html":if(c=d.documentElement,!c)throw Error(r(452));return c;case"head":if(c=d.head,!c)throw Error(r(453));return c;case"body":if(c=d.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}var Ma=new Map,wZ=new Set;function YT(c){return typeof c.getRootNode=="function"?c.getRootNode():c.ownerDocument}var ah=ke.d;ke.d={f:m_e,r:y_e,D:g_e,C:v_e,L:b_e,m:w_e,X:S_e,S:O_e,M:__e};function m_e(){var c=ah.f(),d=QT();return c||d}function y_e(c){var d=Id(c);d!==null&&d.tag===5&&d.type==="form"?Zq(d):ah.r(c)}var X0=typeof document>"u"?null:document;function OZ(c,d,y){var b=X0;if(b&&typeof d=="string"&&d){var S=wa(d);S='link[rel="'+c+'"][href="'+S+'"]',typeof y=="string"&&(S+='[crossorigin="'+y+'"]'),wZ.has(S)||(wZ.add(S),c={rel:c,crossOrigin:y,href:d},b.querySelector(S)===null&&(d=b.createElement("link"),jn(d,"link",c),Vr(d),b.head.appendChild(d)))}}function g_e(c){ah.D(c),OZ("dns-prefetch",c,null)}function v_e(c,d){ah.C(c,d),OZ("preconnect",c,d)}function b_e(c,d,y){ah.L(c,d,y);var b=X0;if(b&&c&&d){var S='link[rel="preload"][as="'+wa(d)+'"]';d==="image"&&y&&y.imageSrcSet?(S+='[imagesrcset="'+wa(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(S+='[imagesizes="'+wa(y.imageSizes)+'"]')):S+='[href="'+wa(c)+'"]';var $=S;switch(d){case"style":$=Y0(c);break;case"script":$=J0(c)}Ma.has($)||(c=B({rel:"preload",href:d==="image"&&y&&y.imageSrcSet?void 0:c,as:d},y),Ma.set($,c),b.querySelector(S)!==null||d==="style"&&b.querySelector(I1($))||d==="script"&&b.querySelector(P1($))||(d=b.createElement("link"),jn(d,"link",c),Vr(d),b.head.appendChild(d)))}}function w_e(c,d){ah.m(c,d);var y=X0;if(y&&c){var b=d&&typeof d.as=="string"?d.as:"script",S='link[rel="modulepreload"][as="'+wa(b)+'"][href="'+wa(c)+'"]',$=S;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=J0(c)}if(!Ma.has($)&&(c=B({rel:"modulepreload",href:c},d),Ma.set($,c),y.querySelector(S)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(P1($)))return}b=y.createElement("link"),jn(b,"link",c),Vr(b),y.head.appendChild(b)}}}function O_e(c,d,y){ah.S(c,d,y);var b=X0;if(b&&c){var S=Li(b).hoistableStyles,$=Y0(c);d=d||"default";var C=S.get($);if(!C){var V={loading:0,preload:null};if(C=b.querySelector(I1($)))V.loading=5;else{c=B({rel:"stylesheet",href:c,"data-precedence":d},y),(y=Ma.get($))&&l5(c,y);var U=C=b.createElement("link");Vr(U),jn(U,"link",c),U._p=new Promise(function(X,fe){U.onload=X,U.onerror=fe}),U.addEventListener("load",function(){V.loading|=1}),U.addEventListener("error",function(){V.loading|=2}),V.loading|=4,JT(C,d,b)}C={type:"stylesheet",instance:C,count:1,state:V},S.set($,C)}}}function S_e(c,d){ah.X(c,d);var y=X0;if(y&&c){var b=Li(y).hoistableScripts,S=J0(c),$=b.get(S);$||($=y.querySelector(P1(S)),$||(c=B({src:c,async:!0},d),(d=Ma.get(S))&&u5(c,d),$=y.createElement("script"),Vr($),jn($,"link",c),y.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},b.set(S,$))}}function __e(c,d){ah.M(c,d);var y=X0;if(y&&c){var b=Li(y).hoistableScripts,S=J0(c),$=b.get(S);$||($=y.querySelector(P1(S)),$||(c=B({src:c,async:!0,type:"module"},d),(d=Ma.get(S))&&u5(c,d),$=y.createElement("script"),Vr($),jn($,"link",c),y.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},b.set(S,$))}}function SZ(c,d,y,b){var S=(S=kr.current)?YT(S):null;if(!S)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(d=Y0(y.href),y=Li(S).hoistableStyles,b=y.get(d),b||(b={type:"style",instance:null,count:0,state:null},y.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){c=Y0(y.href);var $=Li(S).hoistableStyles,C=$.get(c);if(C||(S=S.ownerDocument||S,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(c,C),($=S.querySelector(I1(c)))&&!$._p&&(C.instance=$,C.state.loading=5),Ma.has(c)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Ma.set(c,y),$||x_e(S,c,y,C.state))),d&&b===null)throw Error(r(528,""));return C}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=y.async,y=y.src,typeof y=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=J0(y),y=Li(S).hoistableScripts,b=y.get(d),b||(b={type:"script",instance:null,count:0,state:null},y.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Y0(c){return'href="'+wa(c)+'"'}function I1(c){return'link[rel="stylesheet"]['+c+"]"}function _Z(c){return B({},c,{"data-precedence":c.precedence,precedence:null})}function x_e(c,d,y,b){c.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=c.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),jn(d,"link",y),Vr(d),c.head.appendChild(d))}function J0(c){return'[src="'+wa(c)+'"]'}function P1(c){return"script[async]"+c}function xZ(c,d,y){if(d.count++,d.instance===null)switch(d.type){case"style":var b=c.querySelector('style[data-href~="'+wa(y.href)+'"]');if(b)return d.instance=b,Vr(b),b;var S=B({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return b=(c.ownerDocument||c).createElement("style"),Vr(b),jn(b,"style",S),JT(b,y.precedence,c),d.instance=b;case"stylesheet":S=Y0(y.href);var $=c.querySelector(I1(S));if($)return d.state.loading|=4,d.instance=$,Vr($),$;b=_Z(y),(S=Ma.get(S))&&l5(b,S),$=(c.ownerDocument||c).createElement("link"),Vr($);var C=$;return C._p=new Promise(function(V,U){C.onload=V,C.onerror=U}),jn($,"link",b),d.state.loading|=4,JT($,y.precedence,c),d.instance=$;case"script":return $=J0(y.src),(S=c.querySelector(P1($)))?(d.instance=S,Vr(S),S):(b=y,(S=Ma.get($))&&(b=B({},y),u5(b,S)),c=c.ownerDocument||c,S=c.createElement("script"),Vr(S),jn(S,"link",b),c.head.appendChild(S),d.instance=S);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,JT(b,y.precedence,c));return d.instance}function JT(c,d,y){for(var b=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=b.length?b[b.length-1]:null,$=S,C=0;C<b.length;C++){var V=b[C];if(V.dataset.precedence===d)$=V;else if($!==S)break}$?$.parentNode.insertBefore(c,$.nextSibling):(d=y.nodeType===9?y.head:y,d.insertBefore(c,d.firstChild))}function l5(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.title==null&&(c.title=d.title)}function u5(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.integrity==null&&(c.integrity=d.integrity)}var KT=null;function $Z(c,d,y){if(KT===null){var b=new Map,S=KT=new Map;S.set(y,b)}else S=KT,b=S.get(y),b||(b=new Map,S.set(y,b));if(b.has(c))return b;for(b.set(c,null),y=y.getElementsByTagName(c),S=0;S<y.length;S++){var $=y[S];if(!($[vm]||$[On]||c==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var C=$.getAttribute(d)||"";C=c+C;var V=b.get(C);V?V.push($):b.set(C,[$])}}return b}function TZ(c,d,y){c=c.ownerDocument||c,c.head.insertBefore(y,d==="title"?c.querySelector("head > title"):null)}function $_e(c,d,y){if(y===1||d.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return c=d.disabled,typeof d.precedence=="string"&&c==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function EZ(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var R1=null;function T_e(){}function E_e(c,d,y){if(R1===null)throw Error(r(475));var b=R1;if(d.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var S=Y0(y.href),$=c.querySelector(I1(S));if($){c=$._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(b.count++,b=eE.bind(b),c.then(b,b)),d.state.loading|=4,d.instance=$,Vr($);return}$=c.ownerDocument||c,y=_Z(y),(S=Ma.get(S))&&l5(y,S),$=$.createElement("link"),Vr($);var C=$;C._p=new Promise(function(V,U){C.onload=V,C.onerror=U}),jn($,"link",y),d.instance=$}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(d,c),(c=d.state.preload)&&(d.state.loading&3)===0&&(b.count++,d=eE.bind(b),c.addEventListener("load",d),c.addEventListener("error",d))}}function k_e(){if(R1===null)throw Error(r(475));var c=R1;return c.stylesheets&&c.count===0&&c5(c,c.stylesheets),0<c.count?function(d){var y=setTimeout(function(){if(c.stylesheets&&c5(c,c.stylesheets),c.unsuspend){var b=c.unsuspend;c.unsuspend=null,b()}},6e4);return c.unsuspend=d,function(){c.unsuspend=null,clearTimeout(y)}}:null}function eE(){if(this.count--,this.count===0){if(this.stylesheets)c5(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var tE=null;function c5(c,d){c.stylesheets=null,c.unsuspend!==null&&(c.count++,tE=new Map,d.forEach(C_e,c),tE=null,eE.call(c))}function C_e(c,d){if(!(d.state.loading&4)){var y=tE.get(c);if(y)var b=y.get(null);else{y=new Map,tE.set(c,y);for(var S=c.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<S.length;$++){var C=S[$];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(y.set(C.dataset.precedence,C),b=C)}b&&y.set(null,b)}S=d.instance,C=S.getAttribute("data-precedence"),$=y.get(C)||b,$===b&&y.set(null,S),y.set(C,S),this.count++,b=eE.bind(this),S.addEventListener("load",b),S.addEventListener("error",b),$?$.parentNode.insertBefore(S,$.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(S,c.firstChild)),d.state.loading|=4}}var L1={$$typeof:w,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function M_e(c,d,y,b,S,$,C,V){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=se(0),this.hiddenUpdates=se(null),this.identifierPrefix=b,this.onUncaughtError=S,this.onCaughtError=$,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function kZ(c,d,y,b,S,$,C,V,U,X,fe,_e){return c=new M_e(c,d,y,C,V,U,X,_e),d=1,$===!0&&(d|=24),$=ka(3,null,null,d),c.current=$,$.stateNode=c,d=U3(),d.refCount++,c.pooledCache=d,d.refCount++,$.memoizedState={element:b,isDehydrated:y,cache:d},SL($),c}function CZ(c){return c?(c=M0,c):M0}function MZ(c,d,y,b,S,$){S=CZ(S),b.context===null?b.context=S:b.pendingContext=S,b=Ud(d),b.payload={element:y},$=$===void 0?null:$,$!==null&&(b.callback=$),y=Qd(c,b,d),y!==null&&(Ps(y,c,d),v1(y,c,d))}function AZ(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<d?y:d}}function h5(c,d){AZ(c,d),(c=c.alternate)&&AZ(c,d)}function IZ(c){if(c.tag===13){var d=Ld(c,67108864);d!==null&&Ps(d,c,67108864),h5(c,67108864)}}var iE=!0;function A_e(c,d,y,b){var S=j.T;j.T=null;var $=ke.p;try{ke.p=2,d5(c,d,y,b)}finally{ke.p=$,j.T=S}}function I_e(c,d,y,b){var S=j.T;j.T=null;var $=ke.p;try{ke.p=8,d5(c,d,y,b)}finally{ke.p=$,j.T=S}}function d5(c,d,y,b){if(iE){var S=p5(b);if(S===null)e5(c,d,b,rE,y),RZ(c,b);else if(R_e(S,c,d,y,b))b.stopPropagation();else if(RZ(c,b),d&4&&-1<P_e.indexOf(c)){for(;S!==null;){var $=Id(S);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var C=Qc($.pendingLanes);if(C!==0){var V=$;for(V.pendingLanes|=2,V.entangledLanes|=2;C;){var U=1<<31-Ms(C);V.entanglements[1]|=U,C&=~U}ku($),(or&6)===0&&(jT=wn()+500,C1(0))}}break;case 13:V=Ld($,2),V!==null&&Ps(V,$,2),QT(),h5($,2)}if($=p5(b),$===null&&e5(c,d,b,rE,y),$===S)break;S=$}S!==null&&b.stopPropagation()}else e5(c,d,b,null,y)}}function p5(c){return c=b3(c),f5(c)}var rE=null;function f5(c){if(rE=null,c=wl(c),c!==null){var d=ye(c);if(d===null)c=null;else{var y=d.tag;if(y===13){if(c=Ae(d),c!==null)return c;c=null}else if(y===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return rE=c,null}function PZ(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Uc()){case Su:return 2;case nr:return 8;case ks:case qO:return 32;case eT:return 268435456;default:return 32}default:return 32}}var m5=!1,Xd=null,Yd=null,Jd=null,N1=new Map,D1=new Map,Kd=[],P_e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RZ(c,d){switch(c){case"focusin":case"focusout":Xd=null;break;case"dragenter":case"dragleave":Yd=null;break;case"mouseover":case"mouseout":Jd=null;break;case"pointerover":case"pointerout":N1.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":D1.delete(d.pointerId)}}function V1(c,d,y,b,S,$){return c===null||c.nativeEvent!==$?(c={blockedOn:d,domEventName:y,eventSystemFlags:b,nativeEvent:$,targetContainers:[S]},d!==null&&(d=Id(d),d!==null&&IZ(d)),c):(c.eventSystemFlags|=b,d=c.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),c)}function R_e(c,d,y,b,S){switch(d){case"focusin":return Xd=V1(Xd,c,d,y,b,S),!0;case"dragenter":return Yd=V1(Yd,c,d,y,b,S),!0;case"mouseover":return Jd=V1(Jd,c,d,y,b,S),!0;case"pointerover":var $=S.pointerId;return N1.set($,V1(N1.get($)||null,c,d,y,b,S)),!0;case"gotpointercapture":return $=S.pointerId,D1.set($,V1(D1.get($)||null,c,d,y,b,S)),!0}return!1}function LZ(c){var d=wl(c.target);if(d!==null){var y=ye(d);if(y!==null){if(d=y.tag,d===13){if(d=Ae(y),d!==null){c.blockedOn=d,Dr(c.priority,function(){if(y.tag===13){var b=Fo(),S=Ld(y,b);S!==null&&Ps(S,y,b),h5(y,b)}});return}}else if(d===3&&y.stateNode.current.memoizedState.isDehydrated){c.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}c.blockedOn=null}function nE(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var y=p5(c.nativeEvent);if(y===null){y=c.nativeEvent;var b=new y.constructor(y.type,y);v3=b,y.target.dispatchEvent(b),v3=null}else return d=Id(y),d!==null&&IZ(d),c.blockedOn=y,!1;d.shift()}return!0}function NZ(c,d,y){nE(c)&&y.delete(d)}function L_e(){m5=!1,Xd!==null&&nE(Xd)&&(Xd=null),Yd!==null&&nE(Yd)&&(Yd=null),Jd!==null&&nE(Jd)&&(Jd=null),N1.forEach(NZ),D1.forEach(NZ)}function sE(c,d){c.blockedOn===d&&(c.blockedOn=null,m5||(m5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,L_e)))}var oE=null;function DZ(c){oE!==c&&(oE=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){oE===c&&(oE=null);for(var d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],S=c[d+2];if(typeof b!="function"){if(f5(b||y)===null)continue;break}var $=Id(y);$!==null&&(c.splice(d,3),d-=3,nL($,{pending:!0,data:S,method:y.method,action:b},b,S))}}))}function F1(c){function d(U){return sE(U,c)}Xd!==null&&sE(Xd,c),Yd!==null&&sE(Yd,c),Jd!==null&&sE(Jd,c),N1.forEach(d),D1.forEach(d);for(var y=0;y<Kd.length;y++){var b=Kd[y];b.blockedOn===c&&(b.blockedOn=null)}for(;0<Kd.length&&(y=Kd[0],y.blockedOn===null);)LZ(y),y.blockedOn===null&&Kd.shift();if(y=(c.ownerDocument||c).$$reactFormReplay,y!=null)for(b=0;b<y.length;b+=3){var S=y[b],$=y[b+1],C=S[Zi]||null;if(typeof $=="function")C||DZ(y);else if(C){var V=null;if($&&$.hasAttribute("formAction")){if(S=$,C=$[Zi]||null)V=C.formAction;else if(f5(S)!==null)continue}else V=C.action;typeof V=="function"?y[b+1]=V:(y.splice(b,3),b-=3),DZ(y)}}}function y5(c){this._internalRoot=c}aE.prototype.render=y5.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(r(409));var y=d.current,b=Fo();MZ(y,b,c,d,null,null)},aE.prototype.unmount=y5.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;c.tag===0&&Z0(),MZ(c.current,2,null,c,null,null),QT(),d[Bc]=null}};function aE(c){this._internalRoot=c}aE.prototype.unstable_scheduleHydration=function(c){if(c){var d=gm();c={blockedOn:null,target:c,priority:d};for(var y=0;y<Kd.length&&d!==0&&d<Kd[y].priority;y++);Kd.splice(y,0,c),y===0&&LZ(c)}};var VZ=e.version;if(VZ!=="19.0.0")throw Error(r(527,VZ,"19.0.0"));ke.findDOMNode=function(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=ge(d),c=c!==null?Ve(c):null,c=c===null?null:c.stateNode,c};var N_e={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:j,findFiberByHostInstance:wl,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lE.isDisabled&&lE.supportsFiber)try{fm=lE.inject(N_e),Cs=lE}catch{}}return z1.createRoot=function(c,d){if(!n(c))throw Error(r(299));var y=!1,b="",S=tG,$=iG,C=rG,V=null;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(S=d.onUncaughtError),d.onCaughtError!==void 0&&($=d.onCaughtError),d.onRecoverableError!==void 0&&(C=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(V=d.unstable_transitionCallbacks)),d=kZ(c,1,!1,null,null,y,b,S,$,C,V,null),c[Bc]=d.current,KL(c.nodeType===8?c.parentNode:c),new y5(d)},z1.hydrateRoot=function(c,d,y){if(!n(c))throw Error(r(299));var b=!1,S="",$=tG,C=iG,V=rG,U=null,X=null;return y!=null&&(y.unstable_strictMode===!0&&(b=!0),y.identifierPrefix!==void 0&&(S=y.identifierPrefix),y.onUncaughtError!==void 0&&($=y.onUncaughtError),y.onCaughtError!==void 0&&(C=y.onCaughtError),y.onRecoverableError!==void 0&&(V=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(U=y.unstable_transitionCallbacks),y.formState!==void 0&&(X=y.formState)),d=kZ(c,1,!0,d,y??null,b,S,$,C,V,U,X),d.context=CZ(null),y=d.current,b=Fo(),S=Ud(b),S.callback=null,Qd(y,S,b),d.current.lanes=b,li(d,b),ku(d),c[Bc]=d.current,KL(c),new aE(d)},z1.version="19.0.0",z1}var HZ;function G_e(){if(HZ)return b5.exports;HZ=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),b5.exports=q_e(),b5.exports}var Z_e=G_e(),U1={},WZ;function H_e(){if(WZ)return U1;WZ=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.parse=o,U1.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,w){const O=new s,_=g.length;if(_<2)return O;const x=(w==null?void 0:w.decode)||p;let T=0;do{const E=g.indexOf("=",T);if(E===-1)break;const k=g.indexOf(";",T),M=k===-1?_:k;if(E>M){T=g.lastIndexOf(";",E-1)+1;continue}const R=a(g,T,E),D=l(g,E,R),L=g.slice(R,D);if(O[L]===void 0){let F=a(g,E+1,M),j=l(g,M,F);const B=x(g.slice(F,j));O[L]=B}T=M+1}while(T<_);return O}function a(g,w,O){do{const _=g.charCodeAt(w);if(_!==32&&_!==9)return w}while(++w<O);return O}function l(g,w,O){for(;w>O;){const _=g.charCodeAt(--w);if(_!==32&&_!==9)return w+1}return O}function u(g,w,O){const _=(O==null?void 0:O.encode)||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const x=_(w);if(!e.test(x))throw new TypeError(`argument val is invalid: ${w}`);let T=g+"="+x;if(!O)return T;if(O.maxAge!==void 0){if(!Number.isInteger(O.maxAge))throw new TypeError(`option maxAge is invalid: ${O.maxAge}`);T+="; Max-Age="+O.maxAge}if(O.domain){if(!i.test(O.domain))throw new TypeError(`option domain is invalid: ${O.domain}`);T+="; Domain="+O.domain}if(O.path){if(!r.test(O.path))throw new TypeError(`option path is invalid: ${O.path}`);T+="; Path="+O.path}if(O.expires){if(!m(O.expires)||!Number.isFinite(O.expires.valueOf()))throw new TypeError(`option expires is invalid: ${O.expires}`);T+="; Expires="+O.expires.toUTCString()}if(O.httpOnly&&(T+="; HttpOnly"),O.secure&&(T+="; Secure"),O.partitioned&&(T+="; Partitioned"),O.priority)switch(typeof O.priority=="string"?O.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${O.priority}`)}if(O.sameSite)switch(typeof O.sameSite=="string"?O.sameSite.toLowerCase():O.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${O.sameSite}`)}return T}function p(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function m(g){return n.call(g)==="[object Date]"}return U1}H_e();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var XZ="popstate";function W_e(t={}){function e(r,n){let{pathname:s,search:o,hash:a}=r.location;return c4("",{pathname:s,search:o,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function i(r,n){return typeof n=="string"?n:Ux(n)}return Y_e(e,i,null,t)}function cr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Sc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X_e(){return Math.random().toString(36).substring(2,10)}function YZ(t,e){return{usr:t.state,key:t.key,idx:e}}function c4(t,e,i=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?uO(e):e,state:i,key:e&&e.key||r||X_e()}}function Ux({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function uO(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Y_e(t,e,i,r={}){let{window:n=document.defaultView,v5Compat:s=!1}=r,o=n.history,a="POP",l=null,u=p();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function p(){return(o.state||{idx:null}).idx}function m(){a="POP";let x=p(),T=x==null?null:x-u;u=x,l&&l({action:a,location:_.location,delta:T})}function g(x,T){a="PUSH";let E=c4(_.location,x,T);u=p()+1;let k=YZ(E,u),M=_.createHref(E);try{o.pushState(k,"",M)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;n.location.assign(M)}s&&l&&l({action:a,location:_.location,delta:1})}function w(x,T){a="REPLACE";let E=c4(_.location,x,T);u=p();let k=YZ(E,u),M=_.createHref(E);o.replaceState(k,"",M),s&&l&&l({action:a,location:_.location,delta:0})}function O(x){let T=n.location.origin!=="null"?n.location.origin:n.location.href,E=typeof x=="string"?x:Ux(x);return E=E.replace(/ $/,"%20"),cr(T,`No window.location.(origin|href) available to create URL for href: ${E}`),new URL(E,T)}let _={get action(){return a},get location(){return t(n,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(XZ,m),l=x,()=>{n.removeEventListener(XZ,m),l=null}},createHref(x){return e(n,x)},createURL:O,encodeLocation(x){let T=O(x);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:w,go(x){return o.go(x)}};return _}function hse(t,e,i="/"){return J_e(t,e,i,!1)}function J_e(t,e,i,r){let n=typeof e=="string"?uO(e):e,s=yd(n.pathname||"/",i);if(s==null)return null;let o=dse(t);K_e(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=cxe(s);a=lxe(o[l],u,r)}return a}function dse(t,e=[],i=[],r=""){let n=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(cr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=ad([r,l.relativePath]),p=i.concat(l);s.children&&s.children.length>0&&(cr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),dse(s.children,e,p,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:oxe(u,s.index),routesMeta:p})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))n(s,o);else for(let l of pse(s.path))n(s,o,l)}),e}function pse(t){let e=t.split("/");if(e.length===0)return[];let[i,...r]=e,n=i.endsWith("?"),s=i.replace(/\?$/,"");if(r.length===0)return n?[s,""]:[s];let o=pse(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),n&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function K_e(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:axe(e.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}var exe=/^:[\w-]+$/,txe=3,ixe=2,rxe=1,nxe=10,sxe=-2,JZ=t=>t==="*";function oxe(t,e){let i=t.split("/"),r=i.length;return i.some(JZ)&&(r+=sxe),e&&(r+=ixe),i.filter(n=>!JZ(n)).reduce((n,s)=>n+(exe.test(s)?txe:s===""?rxe:nxe),r)}function axe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,n)=>r===e[n])?t[t.length-1]-e[e.length-1]:0}function lxe(t,e,i=!1){let{routesMeta:r}=t,n={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=BM({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},p),g=l.route;if(!m&&u&&i&&!r[r.length-1].route.index&&(m=BM({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},p)),!m)return null;Object.assign(n,m.params),o.push({params:n,pathname:ad([s,m.pathname]),pathnameBase:fxe(ad([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=ad([s,m.pathnameBase]))}return o}function BM(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,r]=uxe(t.path,t.caseSensitive,t.end),n=e.match(i);if(!n)return null;let s=n[0],o=s.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:r.reduce((u,{paramName:p,isOptional:m},g)=>{if(p==="*"){let O=a[g]||"";o=s.slice(0,s.length-O.length).replace(/(.)\/+$/,"$1")}const w=a[g];return m&&!w?u[p]=void 0:u[p]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function uxe(t,e=!1,i=!0){Sc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function cxe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sc(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function yd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,r=t.charAt(i);return r&&r!=="/"?null:t.slice(i)||"/"}function hxe(t,e="/"){let{pathname:i,search:r="",hash:n=""}=typeof t=="string"?uO(t):t;return{pathname:i?i.startsWith("/")?i:dxe(i,e):e,search:mxe(r),hash:yxe(n)}}function dxe(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?i.length>1&&i.pop():n!=="."&&i.push(n)}),i.length>1?i.join("/"):"/"}function _5(t,e,i,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pxe(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function fse(t){let e=pxe(t);return e.map((i,r)=>r===e.length-1?i.pathname:i.pathnameBase)}function mse(t,e,i,r=!1){let n;typeof t=="string"?n=uO(t):(n={...t},cr(!n.pathname||!n.pathname.includes("?"),_5("?","pathname","search",n)),cr(!n.pathname||!n.pathname.includes("#"),_5("#","pathname","hash",n)),cr(!n.search||!n.search.includes("#"),_5("#","search","hash",n)));let s=t===""||n.pathname==="",o=s?"/":n.pathname,a;if(o==null)a=i;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;n.pathname=g.join("/")}a=m>=0?e[m]:"/"}let l=hxe(n,a),u=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(u||p)&&(l.pathname+="/"),l}var ad=t=>t.join("/").replace(/\/\/+/g,"/"),fxe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mxe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yxe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gxe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var yse=["POST","PUT","PATCH","DELETE"];new Set(yse);var vxe=["GET",...yse];new Set(vxe);var cO=le.createContext(null);cO.displayName="DataRouter";var dP=le.createContext(null);dP.displayName="DataRouterState";var gse=le.createContext({isTransitioning:!1});gse.displayName="ViewTransition";var bxe=le.createContext(new Map);bxe.displayName="Fetchers";var wxe=le.createContext(null);wxe.displayName="Await";var Pc=le.createContext(null);Pc.displayName="Navigation";var W$=le.createContext(null);W$.displayName="Location";var xd=le.createContext({outlet:null,matches:[],isDataRoute:!1});xd.displayName="Route";var VU=le.createContext(null);VU.displayName="RouteError";function Oxe(t,{relative:e}={}){cr(X$(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=le.useContext(Pc),{hash:n,pathname:s,search:o}=Y$(t,{relative:e}),a=s;return i!=="/"&&(a=s==="/"?i:ad([i,s])),r.createHref({pathname:a,search:o,hash:n})}function X$(){return le.useContext(W$)!=null}function s0(){return cr(X$(),"useLocation() may be used only in the context of a <Router> component."),le.useContext(W$).location}var vse="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bse(t){le.useContext(Pc).static||le.useLayoutEffect(t)}function Sxe(){let{isDataRoute:t}=le.useContext(xd);return t?Lxe():_xe()}function _xe(){cr(X$(),"useNavigate() may be used only in the context of a <Router> component.");let t=le.useContext(cO),{basename:e,navigator:i}=le.useContext(Pc),{matches:r}=le.useContext(xd),{pathname:n}=s0(),s=JSON.stringify(fse(r)),o=le.useRef(!1);return bse(()=>{o.current=!0}),le.useCallback((l,u={})=>{if(Sc(o.current,vse),!o.current)return;if(typeof l=="number"){i.go(l);return}let p=mse(l,JSON.parse(s),n,u.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ad([e,p.pathname])),(u.replace?i.replace:i.push)(p,u.state,u)},[e,i,s,n,t])}le.createContext(null);function Y$(t,{relative:e}={}){let{matches:i}=le.useContext(xd),{pathname:r}=s0(),n=JSON.stringify(fse(i));return le.useMemo(()=>mse(t,JSON.parse(n),r,e==="path"),[t,n,r,e])}function xxe(t,e){return wse(t,e)}function wse(t,e,i,r){var E;cr(X$(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n,static:s}=le.useContext(Pc),{matches:o}=le.useContext(xd),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",p=a?a.pathnameBase:"/",m=a&&a.route;{let k=m&&m.path||"";Ose(u,!m||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let g=s0(),w;if(e){let k=typeof e=="string"?uO(e):e;cr(p==="/"||((E=k.pathname)==null?void 0:E.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${k.pathname}" was given in the \`location\` prop.`),w=k}else w=g;let O=w.pathname||"/",_=O;if(p!=="/"){let k=p.replace(/^\//,"").split("/");_="/"+O.replace(/^\//,"").split("/").slice(k.length).join("/")}let x=!s&&i&&i.matches&&i.matches.length>0?i.matches:hse(t,{pathname:_});Sc(m||x!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Sc(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=Cxe(x&&x.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:ad([p,n.encodeLocation?n.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:ad([p,n.encodeLocation?n.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,i,r);return e&&T?le.createElement(W$.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},T):T}function $xe(){let t=Rxe(),e=gxe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=le.createElement(le.Fragment,null,le.createElement("p",null," Hey developer "),le.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",le.createElement("code",{style:s},"ErrorBoundary")," or"," ",le.createElement("code",{style:s},"errorElement")," prop on your route.")),le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},e),i?le.createElement("pre",{style:n},i):null,o)}var Txe=le.createElement($xe,null),Exe=class extends le.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?le.createElement(xd.Provider,{value:this.props.routeContext},le.createElement(VU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kxe({routeContext:t,match:e,children:i}){let r=le.useContext(cO);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),le.createElement(xd.Provider,{value:t},i)}function Cxe(t,e=[],i=null,r=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let n=t,s=i==null?void 0:i.errors;if(s!=null){let l=n.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);cr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),n=n.slice(0,Math.min(n.length,l+1))}let o=!1,a=-1;if(i)for(let l=0;l<n.length;l++){let u=n[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:p,errors:m}=i,g=u.route.loader&&!p.hasOwnProperty(u.route.id)&&(!m||m[u.route.id]===void 0);if(u.route.lazy||g){o=!0,a>=0?n=n.slice(0,a+1):n=[n[0]];break}}}return n.reduceRight((l,u,p)=>{let m,g=!1,w=null,O=null;i&&(m=s&&u.route.id?s[u.route.id]:void 0,w=u.route.errorElement||Txe,o&&(a<0&&p===0?(Ose("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,O=null):a===p&&(g=!0,O=u.route.hydrateFallbackElement||null)));let _=e.concat(n.slice(0,p+1)),x=()=>{let T;return m?T=w:g?T=O:u.route.Component?T=le.createElement(u.route.Component,null):u.route.element?T=u.route.element:T=l,le.createElement(kxe,{match:u,routeContext:{outlet:l,matches:_,isDataRoute:i!=null},children:T})};return i&&(u.route.ErrorBoundary||u.route.errorElement||p===0)?le.createElement(Exe,{location:i.location,revalidation:i.revalidation,component:w,error:m,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}function FU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mxe(t){let e=le.useContext(cO);return cr(e,FU(t)),e}function Axe(t){let e=le.useContext(dP);return cr(e,FU(t)),e}function Ixe(t){let e=le.useContext(xd);return cr(e,FU(t)),e}function jU(t){let e=Ixe(t),i=e.matches[e.matches.length-1];return cr(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function Pxe(){return jU("useRouteId")}function Rxe(){var r;let t=le.useContext(VU),e=Axe("useRouteError"),i=jU("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[i]}function Lxe(){let{router:t}=Mxe("useNavigate"),e=jU("useNavigate"),i=le.useRef(!1);return bse(()=>{i.current=!0}),le.useCallback(async(n,s={})=>{Sc(i.current,vse),i.current&&(typeof n=="number"?t.navigate(n):await t.navigate(n,{fromRouteId:e,...s}))},[t,e])}var KZ={};function Ose(t,e,i){!e&&!KZ[t]&&(KZ[t]=!0,Sc(!1,i))}le.memo(Nxe);function Nxe({routes:t,future:e,state:i}){return wse(t,void 0,i,e)}function $v(t){cr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dxe({basename:t="/",children:e=null,location:i,navigationType:r="POP",navigator:n,static:s=!1}){cr(!X$(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=le.useMemo(()=>({basename:o,navigator:n,static:s,future:{}}),[o,n,s]);typeof i=="string"&&(i=uO(i));let{pathname:l="/",search:u="",hash:p="",state:m=null,key:g="default"}=i,w=le.useMemo(()=>{let O=yd(l,o);return O==null?null:{location:{pathname:O,search:u,hash:p,state:m,key:g},navigationType:r}},[o,l,u,p,m,g,r]);return Sc(w!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:le.createElement(Pc.Provider,{value:a},le.createElement(W$.Provider,{children:e,value:w}))}function Vxe({children:t,location:e}){return xxe(h4(t),e)}function h4(t,e=[]){let i=[];return le.Children.forEach(t,(r,n)=>{if(!le.isValidElement(r))return;let s=[...e,n];if(r.type===le.Fragment){i.push.apply(i,h4(r.props.children,s));return}cr(r.type===$v,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=h4(r.props.children,s)),i.push(o)}),i}var Xk="get",Yk="application/x-www-form-urlencoded";function pP(t){return t!=null&&typeof t.tagName=="string"}function Fxe(t){return pP(t)&&t.tagName.toLowerCase()==="button"}function jxe(t){return pP(t)&&t.tagName.toLowerCase()==="form"}function zxe(t){return pP(t)&&t.tagName.toLowerCase()==="input"}function Uxe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Qxe(t,e){return t.button===0&&(!e||e==="_self")&&!Uxe(t)}var uE=null;function Bxe(){if(uE===null)try{new FormData(document.createElement("form"),0),uE=!1}catch{uE=!0}return uE}var qxe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function x5(t){return t!=null&&!qxe.has(t)?(Sc(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yk}"`),null):t}function Gxe(t,e){let i,r,n,s,o;if(jxe(t)){let a=t.getAttribute("action");r=a?yd(a,e):null,i=t.getAttribute("method")||Xk,n=x5(t.getAttribute("enctype"))||Yk,s=new FormData(t)}else if(Fxe(t)||zxe(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?yd(l,e):null,i=t.getAttribute("formmethod")||a.getAttribute("method")||Xk,n=x5(t.getAttribute("formenctype"))||x5(a.getAttribute("enctype"))||Yk,s=new FormData(a,t),!Bxe()){let{name:u,type:p,value:m}=t;if(p==="image"){let g=u?`${u}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else u&&s.append(u,m)}}else{if(pP(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Xk,r=null,n=Yk,o=t}return s&&n==="text/plain"&&(o=s,s=void 0),{action:r,method:i.toLowerCase(),encType:n,formData:s,body:o}}function zU(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Zxe(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hxe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Wxe(t,e,i){let r=await Promise.all(t.map(async n=>{let s=e.routes[n.route.id];if(s){let o=await Zxe(s,i);return o.links?o.links():[]}return[]}));return Kxe(r.flat(1).filter(Hxe).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function eH(t,e,i,r,n,s){let o=(l,u)=>i[u]?l.route.id!==i[u].route.id:!0,a=(l,u)=>{var p;return i[u].pathname!==l.pathname||((p=i[u].route.path)==null?void 0:p.endsWith("*"))&&i[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var m;let p=r.routes[l.route.id];if(!p||!p.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let g=l.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((m=i[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function Xxe(t,e,{includeHydrateFallback:i}={}){return Yxe(t.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),i&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function Yxe(t){return[...new Set(t)]}function Jxe(t){let e={},i=Object.keys(t).sort();for(let r of i)e[r]=t[r];return e}function Kxe(t,e){let i=new Set;return new Set(e),t.reduce((r,n)=>{let s=JSON.stringify(Jxe(n));return i.has(s)||(i.add(s),r.push({key:s,link:n})),r},[])}function e$e(t,e){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":e&&yd(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function Sse(){let t=le.useContext(cO);return zU(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function t$e(){let t=le.useContext(dP);return zU(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var UU=le.createContext(void 0);UU.displayName="FrameworkContext";function _se(){let t=le.useContext(UU);return zU(t,"You must render this element inside a <HydratedRouter> element"),t}function i$e(t,e){let i=le.useContext(UU),[r,n]=le.useState(!1),[s,o]=le.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:p,onTouchStart:m}=e,g=le.useRef(null);le.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let _=T=>{T.forEach(E=>{o(E.isIntersecting)})},x=new IntersectionObserver(_,{threshold:.5});return g.current&&x.observe(g.current),()=>{x.disconnect()}}},[t]),le.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let w=()=>{n(!0)},O=()=>{n(!1),o(!1)};return i?t!=="intent"?[s,g,{}]:[s,g,{onFocus:Q1(a,w),onBlur:Q1(l,O),onMouseEnter:Q1(u,w),onMouseLeave:Q1(p,O),onTouchStart:Q1(m,w)}]:[!1,g,{}]}function Q1(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function r$e({page:t,...e}){let{router:i}=Sse(),r=le.useMemo(()=>hse(i.routes,t,i.basename),[i.routes,t,i.basename]);return r?le.createElement(s$e,{page:t,matches:r,...e}):null}function n$e(t){let{manifest:e,routeModules:i}=_se(),[r,n]=le.useState([]);return le.useEffect(()=>{let s=!1;return Wxe(t,e,i).then(o=>{s||n(o)}),()=>{s=!0}},[t,e,i]),r}function s$e({page:t,matches:e,...i}){let r=s0(),{manifest:n,routeModules:s}=_se(),{basename:o}=Sse(),{loaderData:a,matches:l}=t$e(),u=le.useMemo(()=>eH(t,e,l,n,r,"data"),[t,e,l,n,r]),p=le.useMemo(()=>eH(t,e,l,n,r,"assets"),[t,e,l,n,r]),m=le.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let O=new Set,_=!1;if(e.forEach(T=>{var k;let E=n.routes[T.route.id];!E||!E.hasLoader||(!u.some(M=>M.route.id===T.route.id)&&T.route.id in a&&((k=s[T.route.id])!=null&&k.shouldRevalidate)||E.hasClientLoader?_=!0:O.add(T.route.id))}),O.size===0)return[];let x=e$e(t,o);return _&&O.size>0&&x.searchParams.set("_routes",e.filter(T=>O.has(T.route.id)).map(T=>T.route.id).join(",")),[x.pathname+x.search]},[o,a,r,n,u,e,t,s]),g=le.useMemo(()=>Xxe(p,n),[p,n]),w=n$e(p);return le.createElement(le.Fragment,null,m.map(O=>le.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...i})),g.map(O=>le.createElement("link",{key:O,rel:"modulepreload",href:O,...i})),w.map(({key:O,link:_})=>le.createElement("link",{key:O,..._})))}function o$e(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var xse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xse&&(window.__reactRouterVersion="7.3.0")}catch{}function a$e({basename:t,children:e,window:i}){let r=le.useRef();r.current==null&&(r.current=W_e({window:i,v5Compat:!0}));let n=r.current,[s,o]=le.useState({action:n.action,location:n.location}),a=le.useCallback(l=>{le.startTransition(()=>o(l))},[o]);return le.useLayoutEffect(()=>n.listen(a),[n,a]),le.createElement(Dxe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:n})}var $se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tse=le.forwardRef(function({onClick:e,discover:i="render",prefetch:r="none",relative:n,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:p,viewTransition:m,...g},w){let{basename:O}=le.useContext(Pc),_=typeof u=="string"&&$se.test(u),x,T=!1;if(typeof u=="string"&&_&&(x=u,xse))try{let j=new URL(window.location.href),B=u.startsWith("//")?new URL(j.protocol+u):new URL(u),W=yd(B.pathname,O);B.origin===j.origin&&W!=null?u=W+B.search+B.hash:T=!0}catch{Sc(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=Oxe(u,{relative:n}),[k,M,R]=i$e(r,g),D=h$e(u,{replace:o,state:a,target:l,preventScrollReset:p,relative:n,viewTransition:m});function L(j){e&&e(j),j.defaultPrevented||D(j)}let F=le.createElement("a",{...g,...R,href:x||E,onClick:T||s?e:L,ref:o$e(w,M),target:l,"data-discover":!_&&i==="render"?"true":void 0});return k&&!_?le.createElement(le.Fragment,null,F,le.createElement(r$e,{page:E})):F});Tse.displayName="Link";var l$e=le.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:r="",end:n=!1,style:s,to:o,viewTransition:a,children:l,...u},p){let m=Y$(o,{relative:u.relative}),g=s0(),w=le.useContext(dP),{navigator:O,basename:_}=le.useContext(Pc),x=w!=null&&y$e(m)&&a===!0,T=O.encodeLocation?O.encodeLocation(m).pathname:m.pathname,E=g.pathname,k=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(E=E.toLowerCase(),k=k?k.toLowerCase():null,T=T.toLowerCase()),k&&_&&(k=yd(k,_)||k);const M=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let R=E===T||!n&&E.startsWith(T)&&E.charAt(M)==="/",D=k!=null&&(k===T||!n&&k.startsWith(T)&&k.charAt(T.length)==="/"),L={isActive:R,isPending:D,isTransitioning:x},F=R?e:void 0,j;typeof r=="function"?j=r(L):j=[r,R?"active":null,D?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(L):s;return le.createElement(Tse,{...u,"aria-current":F,className:j,ref:p,style:B,to:o,viewTransition:a},typeof l=="function"?l(L):l)});l$e.displayName="NavLink";var u$e=le.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:r,replace:n,state:s,method:o=Xk,action:a,onSubmit:l,relative:u,preventScrollReset:p,viewTransition:m,...g},w)=>{let O=f$e(),_=m$e(a,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",T=typeof a=="string"&&$se.test(a),E=k=>{if(l&&l(k),k.defaultPrevented)return;k.preventDefault();let M=k.nativeEvent.submitter,R=(M==null?void 0:M.getAttribute("formmethod"))||o;O(M||k.currentTarget,{fetcherKey:e,method:R,navigate:i,replace:n,state:s,relative:u,preventScrollReset:p,viewTransition:m})};return le.createElement("form",{ref:w,method:x,action:_,onSubmit:r?l:E,...g,"data-discover":!T&&t==="render"?"true":void 0})});u$e.displayName="Form";function c$e(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ese(t){let e=le.useContext(cO);return cr(e,c$e(t)),e}function h$e(t,{target:e,replace:i,state:r,preventScrollReset:n,relative:s,viewTransition:o}={}){let a=Sxe(),l=s0(),u=Y$(t,{relative:s});return le.useCallback(p=>{if(Qxe(p,e)){p.preventDefault();let m=i!==void 0?i:Ux(l)===Ux(u);a(t,{replace:m,state:r,preventScrollReset:n,relative:s,viewTransition:o})}},[l,a,u,i,r,e,t,n,s,o])}var d$e=0,p$e=()=>`__${String(++d$e)}__`;function f$e(){let{router:t}=Ese("useSubmit"),{basename:e}=le.useContext(Pc),i=Pxe();return le.useCallback(async(r,n={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=Gxe(r,e);if(n.navigate===!1){let p=n.fetcherKey||p$e();await t.fetch(p,i,n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||o,formEncType:n.encType||a,flushSync:n.flushSync})}else await t.navigate(n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||o,formEncType:n.encType||a,replace:n.replace,state:n.state,fromRouteId:i,flushSync:n.flushSync,viewTransition:n.viewTransition})},[t,e,i])}function m$e(t,{relative:e}={}){let{basename:i}=le.useContext(Pc),r=le.useContext(xd);cr(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),s={...Y$(t||".",{relative:e})},o=s0();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(p=>p==="")){a.delete("index"),l.filter(m=>m).forEach(m=>a.append("index",m));let p=a.toString();s.search=p?`?${p}`:""}}return(!t||t===".")&&n.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(s.pathname=s.pathname==="/"?i:ad([i,s.pathname])),Ux(s)}function y$e(t,e={}){let i=le.useContext(gse);cr(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ese("useViewTransitionState"),n=Y$(t,{relative:e.relative});if(!i.isTransitioning)return!1;let s=yd(i.currentLocation.pathname,r)||i.currentLocation.pathname,o=yd(i.nextLocation.pathname,r)||i.nextLocation.pathname;return BM(n.pathname,o)!=null||BM(n.pathname,s)!=null}new TextEncoder;var g$e=":",Dg=class{resolve(t){}reject(t){}constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};function v$e(t,e){let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1}function b$e(t,e,i){const{subscribe:r}=w$e(e);return r(n=>{n.some(o=>v$e(t,o.target))&&i()})}var $5={};function w$e(t){const e=t.join(","),i=$5[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe(o){return r.add(o),()=>{r.delete(o),r.size===0&&(n.disconnect(),$5[e]=void 0)}}};return $5[e]=s,s}function O$e(t,e){var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const o=(n=i.getRootNode)==null?void 0:n.call(i);if(o===globalThis.document)return null;i=o.host}return null}function S$e(t,e,i){const r=O$e(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i}function er(t,e,...i){try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}}async function d4(t,e,...i){try{const r=t==null?void 0:t.call(e,...i);return r instanceof Promise?await r:r}catch(r){console.error(r,t)}}var _$e=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],x$e=new Set(_$e),qM="en",$$e={pt:"pt-PT",nb:"no",zh:"zh-CN"};async function T$e(t,e,i=""){const r=`${e}/${i}`,n=`${r}${t}.json`;return T5[n]??(T5[n]=kse(t,r)),await T5[n]}var T5={};async function kse(t,e){const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===qM?{}:await kse(qM,e)}function Cse(t){var i;const e=S$e(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||qM);return{lang:e,t9nLocale:Mse(e)}}function Mse(t){const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=$$e[n]??n,x$e.has(n)?n:i?Mse(r):qM}function E$e(t,e,i,r){let n;const s=()=>void k$e(t,e(),r).then(o=>{((n==null?void 0:n.lang)!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&i(o),n=o}).catch(console.error);return queueMicrotask(s),b$e(t,["lang"],s)}async function k$e(t,e,i=t.tagName.toLowerCase().split("-").slice(1).join("-")){const{lang:r,t9nLocale:n}=Cse(t),s=`${e}/${i}/t9n`,a=i===null?{}:await T$e(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:a}}var QU=t=>t.replace(C$e,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),C$e=/[A-Z]+(?![a-z])|[A-Z]/gu;function M$e(t,e){const i=e/A$e;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n}var A$e=4;function Ase(t){return t!==void 0}function Ise(t){var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||n._offspring.push(t),n._postLoad.promise}return!1}var Jk=Object.defineProperty;function I$e(t){const e=t.split(g$e);return e.length===1?[e[0],QU(e[0])]:e}var P$e=globalThis.HTMLElement??I$e,xw;xw=class extends P$e{constructor(){super(),this._store={},this._pendingAttributes=[],this._postLoad=new Dg,this._postLoaded=new Dg,this._offspring=[],this._saveInstanceProperties();const e=this.constructor;e._LitConstructor?this._initializeComponent({a:e._LitConstructor}):e._loadPromise.then(this._initializeComponent.bind(this)).catch(i=>{this._postLoaded.reject(i),setTimeout(()=>{throw i})})}static _initializePrototype(){var e,i,r;(e=this._properties)==null||e.forEach(this._bindProp,this),(i=this._asyncMethods)==null||i.forEach(this._bindAsync,this),(r=this._syncMethods)==null||r.forEach(this._bindSync,this)}static _bindProp(e){Jk(this.prototype,e,{configurable:!0,enumerable:!0,get(){return this._store[e]},set(i){this._store[e]=i}})}static _bindAsync(e){Jk(this.prototype,e,{async value(...i){return this._litElement||await this._postLoaded.promise,await this._litElement[e](...i)},configurable:!0})}static _bindSync(e){Jk(this.prototype,e,{value(...i){return this._litElement[e](...i)},configurable:!0})}get manager(){var e;return(e=this._litElement)==null?void 0:e.manager}_saveInstanceProperties(){var r;const e=this.constructor,i=this;(r=e._properties)==null||r.forEach(n=>{Object.hasOwn(this,n)&&(this._store[n]=i[n],delete i[n])})}attributeChangedCallback(e,i,r){var n;(n=this._litElement)==null||n.attributeChangedCallback(e,i,r),this._litElement||this._pendingAttributes.push(e)}connectedCallback(){var e,i;this._litElement?(i=(e=this._litElement).connectedCallback)==null||i.call(e):queueMicrotask(()=>{this._ancestorLoad=Ise(this)})}disconnectedCallback(){var e,i;(i=(e=this._litElement)==null?void 0:e.disconnectedCallback)==null||i.call(e)}async componentOnReady(){return await this._postLoaded.promise,this}_initializeComponent(e){var m;const i=this.constructor,r=i._name,n=this._store,s=Object.values(e).find(g=>g.tagName===r),o=`${r}--lazy`;let a=s;for(;a&&!Object.hasOwn(a,"lumina");)a=Object.getPrototypeOf(a);L$e(a),!i._LitConstructor&&(i._LitConstructor=s,customElements.define(o,s)),s.lazy=this;const u=document.createElement(o);s.lazy=void 0,this._litElement=u,this._store=u,this._pendingAttributes.forEach(g=>{const w=this.getAttribute(g);u.attributeChangedCallback(g,null,w)}),Object.entries(n).forEach(R$e,u);const p=this.isConnected;(p||this._ancestorLoad)&&((m=u.connectedCallback)==null||m.call(u),p||u.disconnectedCallback())}addController(){}requestUpdate(){var e;(e=this._litElement)==null||e.requestUpdate()}},xw.lumina=!0;function R$e([t,e]){this[t]=e}function L$e(t){const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},Jk(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))}var Lf={};function N$e(t,e){var i;if(e){const r=t.constructor.elementProperties;t.manager.internals.members=Object.fromEntries(Array.from(r,([n,s])=>s.noAccessor?void 0:[n,[(s.readOnly?2048:0)|(s.state?32:16)]]).filter(Ase))}else{const r=t.constructor,n=((i=r.__registerControllers)==null?void 0:i.call(r,t))??void 0;if(r.__registerControllers=void 0,typeof n!="object")throw new Error("Failed to retrieve component meta");t.manager.internals.members=Object.fromEntries(Object.entries(n).filter(([s,[o]])=>(o&63)!==0))}}function D$e(t,e=8){return t==null||typeof t=="object"||typeof t=="function"?t:(e&4)!==0?t==="false"?!1:t===""||!!t:(e&2)!==0?Number.parseFloat(t):(e&1)!==0?String(t):t}var V$e=(t,e)=>{var i,r;return(r=(i=t.manager.internals.members)==null?void 0:i[e])==null?void 0:r[0]},BU=Symbol.for("controller"),F$e=t=>typeof t=="object"&&t!==null&&(BU in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),TS;function Nb(t){TS!==t&&(TS=t,queueMicrotask(()=>{TS===t&&(TS=void 0)}))}function hO(t){return TS}var Ym=[];function Pse(t){if(t===void 0){Ym=[];return}const e=Ym.indexOf(t);Ym=e===-1?[...Ym,t]:Ym.slice(0,e+1),queueMicrotask(()=>{Ym=[]})}function Rse(){return Ym}var Db;function j$e(t){Db!==t&&(Db=t,queueMicrotask(()=>{Db===t&&(Db=void 0)}))}function z$e(){const t=Db;return Db=void 0,t}var U$e=async(t,e)=>{const i=qU(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},Q$e=async t=>{const e=qU(t);return await e.ready,e},qU=t=>{const i=hO().manager.internals.resolveExports(t);if(i!==void 0)return i;if(F$e(t))return t;const r=z$e();if(r!==void 0)return r},ld={setter:!1,getter:!1,readOnly:!1},GM=new WeakMap,Lse;Lse=BU;var GU=class{constructor(t){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new Dg,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[Lse]=!0,this.ready=this._ready.promise,this._exports=iH(this),this._exportWatchers=new Set;const e=t??hO();this.component=e,this.component.addController(this),this.component.manager===void 0||(Pse(this),queueMicrotask(()=>this.catchUpLifecycle()))}catchUpLifecycle(){const{manager:t}=this.component;t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),t._loadCalled&&this.triggerLoad().then(()=>{t.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(t){const e=this._exports;e!==t&&(this._exports=t,this._exportWatchers.forEach(er),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,e)),this._ready.resolve(t)}setProvisionalExports(t,e=!0){this._exports=e?iH(t):t,this._exportWatchers.forEach(er)}watchExports(t){const e=()=>t(this._exports);return this._exportWatchers.add(e),()=>void this._exportWatchers.delete(e)}get use(){return Nb(this.component),U$e}get useRef(){return Nb(this.component),Q$e}get useRefSync(){return Nb(this.component),qU}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){this._callbacks.hostConnected.push(t)}onDisconnected(t){this._callbacks.hostDisconnected.push(t)}onLoad(t){this._callbacks.hostLoad.push(t)}onLoaded(t){this._callbacks.hostLoaded.push(t)}onUpdate(t){this._callbacks.hostUpdate.push(t)}onUpdated(t){this._callbacks.hostUpdated.push(t)}onDestroy(t){this._callbacks.hostDestroy.push(t)}onLifecycle(t){this._callbacks.hostLifecycle.push(t),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(t)}triggerConnected(){const t=this;t.hostConnected&&er(t.hostConnected,t),this._callbacks.hostConnected.forEach(er),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&er(t.hostDisconnected,t),this._callbacks.hostDisconnected.forEach(er),this._lifecycleCleanups.forEach(er),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const t=this;t.hostLoad&&await d4(t.hostLoad,t),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(d4)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const t=this;t.hostLoaded&&er(t.hostLoaded,t),this._callbacks.hostLoaded.forEach(er),this.loadedCalled=!0}triggerUpdate(t){const e=this;e.hostUpdate&&er(e.hostUpdate,e,t),this._callbacks.hostUpdate.forEach(tH,t)}triggerUpdated(t){const e=this;e.hostUpdated&&er(e.hostUpdated,e,t),this._callbacks.hostUpdated.forEach(tH,t)}triggerDestroy(){const t=this;t.hostDestroy&&er(t.hostDestroy,t),this._callbacks.hostDestroy.forEach(er)}triggerLifecycle(){const t=this;t.hostLifecycle&&this._callLifecycle(()=>t.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(t){Nb(this.component);const e=er(t);(Array.isArray(e)?e:[e]).forEach(r=>{typeof r=="function"?this._lifecycleCleanups.push(r):typeof r=="object"&&typeof r.remove=="function"&&this._lifecycleCleanups.push(r.remove)})}};function tH(t){er(t,void 0,this)}var Nse=GU;function iH(t){if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e=new Proxy(t,{get(i,r,n){if(!(B$e.has(r)&&r in i&&i[r]===e)&&(r in i||r in Promise.prototype||typeof r=="symbol"))return typeof i=="function"?i[r]:Reflect.get(i,r,n)},set:(i,r,n,s)=>Reflect.set(i,r,n,s)});return e}var B$e=new Set(["exports","_exports"]);function q$e(t,e,i){const r=Object.keys(t),n=r.length;rd===void 0&&queueMicrotask(ZU),rd??(rd=new Map);let s=rd.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},rd.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=u=>er(e,null,u),l=o[n];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i}var rd=void 0;function ZU(){Array.from((rd==null?void 0:rd.entries())??[]).forEach(([t,{callbacks:e}])=>{const i=Object.keys(t);e.forEach(r=>r(i))}),rd=void 0}function mg(t,e,i){var r;const n=e,s=t.manager.internals;(r=s.allWatchers)[n]??(r[n]=[]);const o=s.allWatchers[n],a=i,l=(u,p,m)=>er(a,null,u,p,m);return o.push(l),()=>{const u=o.indexOf(l);u!==-1&&o.splice(u,1)}}var G$e=class{constructor(t){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const e=this.component.manager.internals;Object.entries(e.members).forEach(([i,[r]])=>{var n;r&2048&&((n=e.setters)[i]??(n[i]=[]),e.setters[i].push(e.readonlySetter))})},this.trackedValue=p4,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this._exports=new WeakMap,this.readonlySetter=(e,i,r)=>{if(ld.readOnly)return e;throw new Error(`Cannot assign to read-only property "${r}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(e)}"`)},this.component=t}firePropTrackers(t,e){const i=this.keyTrackers;this.trackedValue=p4,this.keyTrackers=[],i.forEach(r=>r(t,e))}getSetProxy(t){const e=this.component,i=e.constructor.prototype;if(this._getSetProxy(i,t,"class"),e.manager.isLit)return;const r=e.el.constructor.prototype;i!==r&&this._getSetProxy(r,t,"html")}_getSetProxy(t,e,i){const r=this.component,n=V$e(r,e);let s;do s=Object.getOwnPropertyDescriptor(t,e);while(!s&&(t=Object.getPrototypeOf(t)));if(!s)return;const o=s.get,a=s.set,l=cE in o,u=cE in a;if(l&&u)return;const p=!l,m=!u,g=p?function(){let _=o.call(this);const x=GM.get(this);if(ld.getter||x===void 0)return _;const T=x.manager.internals;_=T.accessorGetter[e](_,e);const E=T.getters[e]??E5;for(let k=0;k<E.length;k++)_=E[k](_,e);return _}:o,w=m?function(_){var M;const x=o.call(this),T=GM.get(this);if(T===void 0){a.call(this,_);return}let E=T.manager.isLit?_??void 0:D$e(_,n);const k=T.manager.internals;if(E===x)a.call(this,E);else{const R=ld.setter?E5:k.setters[e]??E5;for(let D=0;D<R.length&&(E=R[D](E,x,e),E!==x);D++);E=k.accessorSetter[e](E,x,e),a.call(this,E),E!==x&&((M=k.enabledWatchers[e])==null||M.forEach(D=>D(E,x,e)))}k.keyTrackers.length>0&&(k==null||k.firePropTrackers(e,_))}:a;p&&(g[cE]=!0),m&&(w[cE]=!0),Object.defineProperty(t,e,{...s,get:g,set:w})}markExports(t,e){(typeof e=="object"&&e!==null||typeof e=="function")&&this._exports.set(e,t)}resolveExports(t){if(typeof t=="object"&&t!==null||typeof t=="function")return this._exports.get(t)}},E5=[],cE=Symbol(),p4=Symbol();function HU(t,e,i){const r=t.manager.internals;return r.trackedValue!==p4&&r.trackedValue!==i&&r.firePropTrackers(void 0,void 0),r.keyTrackers.length===0&&queueMicrotask(()=>r.firePropTrackers(void 0,void 0)),r.trackedValue=i,r.keyTrackers.push((n,s)=>er(e,void 0,i===s?n:void 0)),i}function WU(t=[hO(),...Rse()],e,i){const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=a=>{n-=1,a!==void 0&&(n=Math.min(n,0)),n===0&&e(a)};r.forEach(a=>q$e(a,l=>s(l===void 0?void 0:{key:l,host:a,isReactive:!1}),i));const o=r.find(a=>"manager"in a&&typeof a.manager=="object"&&a.manager.component===a);return o&&HU(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i),i}function Z$e(t){ld.setter=!0;try{return t()}finally{ld.setter=!1}}function H$e(t){ld.getter=!0;try{return t()}finally{ld.getter=!1}}function W$e(t){ld.readOnly=!0;try{return t()}finally{ld.readOnly=!1}}var XU=t=>(...e)=>{const i=Rse(),r=new t(...e),n=r.exports;Pse(i.at(-1));const s=r.component.manager.internals;s.markExports(r,n),r.watchExports(a=>s.markExports(r,a)),j$e(r);const o=[r.component,...i].reverse();return WU(o,a=>a===void 0?void 0:X$e(r,a,n),n)};function X$e(t,{host:e,key:i,isReactive:r},n){const s=e,o=s[i]!==t.exports,a=s[i]!==n,l=n!==t.exports;if(o&&!a&&l&&(s[i]=t.exports),e===t.component){if(r){const p=t.component.manager.internals;a&&p.markExports(t,s[i]),mg(t.component,i,m=>{m!==t.exports&&p.markExports(t,m)})}t.assignedProperty=r?void 0:i}t.watchExports(()=>{var g;if(s[i]===t.exports)return;const p=t.component.manager;((g=p.internals.setters[i])==null?void 0:g.includes(p.internals.readonlySetter))?W$e(()=>{s[i]=t.exports}):s[i]=t.exports})}var Y$e=(t,e)=>new J$e(t,e),J$e=class extends Nse{constructor(t,e){const i="addController"in t,r=new Set;function n(l){var u;r.add(l),!(BU in l)&&t.renderRoot&&t.el.isConnected&&((u=l.hostConnected)==null||u.call(l))}function s(l){var u;r.delete(l),(u=l.controllerRemoved)==null||u.call(l)}const o=t;if(o.addController=n,o.removeController=s,!i){const l=e??t.constructor.__forceUpdate;o.requestUpdate=()=>l(t)}super(t),this.internals=new G$e(this.component),this.destroyed=!1,this._updatePromise=new Dg,this._originalLifecycles={},this.isLit=i,this.component.manager=this,N$e(t,i),this._controllers=r,this.exports=void 0,this.hasDestroy=k5 in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const a=this.internals;Object.keys(a.members).forEach(l=>{a.accessorGetter[l]=rH,a.accessorSetter[l]=rH,a.getSetProxy(l)}),i?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(t,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(a.enableReadonly),Nb(t),GM.set(t.el,t),GM.set(t,t)}_bindLifecycleMethods(){const t=this.component,e=this.isLit,i=t.el===t;this._originalLifecycles={_connectedCallback:e||i?void 0:t.connectedCallback,_disconnectedCallback:e||i?void 0:t.disconnectedCallback,_load:e?t.load:t.componentWillLoad,_loaded:e?t.loaded:t.componentDidLoad,_willUpdate:e?void 0:t.componentWillUpdate,_updated:e?void 0:t.componentDidUpdate,_destroy:t.destroy};const r=this._connectedCallback.bind(this),n=this._disconnectedCallback.bind(this),s=this._update.bind(this),o=this._updated.bind(this);e?t.constructor.prototype.addController.call(t,{hostConnected:r,hostDisconnected:n,hostUpdate:s,hostUpdated:o}):(t.connectedCallback=r,t.disconnectedCallback=n,t.componentWillLoad=this._load.bind(this),t.componentDidLoad=this._loaded.bind(this),t.componentWillUpdate=s,t.componentDidUpdate=o),this.hasDestroy&&(t.destroy=this.destroy.bind(this))}_connectedCallback(){var e,i;if(this.destroyed){const r=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${k5} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const t=this.internals;t.enabledWatchers=t.allWatchers,ZU(),(e=t.enableReadonly)==null||e.call(t),this._controllers.forEach(e2e),(i=this._originalLifecycles._connectedCallback)==null||i.call(this.component)}_disconnectedCallback(){var t;this.destroyed||(this._controllers.forEach(t2e),(t=this._originalLifecycles._disconnectedCallback)==null||t.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var t;await Promise.allSettled(Array.from(this._controllers,i2e)),await((t=this._originalLifecycles._load)==null?void 0:t.call(this.component)),this.hasDestroy&&mg(this.component,k5,()=>this._setAutoDestroyTimeout())}_loaded(){var t;this._controllers.forEach(r2e),(t=this._originalLifecycles._loaded)==null||t.call(this.component)}_update(){var e;const t=this.component;return this._controllers.forEach(n2e,t.$changes),(e=this._originalLifecycles._willUpdate)==null?void 0:e.call(this.component)}_updated(){var e;const t=this.component;if(this._controllers.forEach(s2e,t.$changes),(e=this._originalLifecycles._updated)==null||e.call(this.component),this.isLit)t.$changes=new Map;else{const i=this._updatePromise;this._updatePromise=new Dg,i.resolve(!0)}}async destroy(){var t;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(o2e),this._controllers.clear(),await((t=this._originalLifecycles._destroy)==null?void 0:t.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const t=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=M$e(t,K$e)}}},k5="autoDestroyDisabled",K$e=1e3,rH=t=>t;function e2e(t){"triggerConnected"in t?t.triggerConnected():er(t.hostConnected,t)}function t2e(t){"triggerDisconnected"in t?t.triggerDisconnected():er(t.hostDisconnected,t)}async function i2e(t){"triggerLoad"in t?await t.triggerLoad():await d4(t.hostLoad,t)}function r2e(t){"triggerLoaded"in t?t.triggerLoaded():er(t.hostLoaded,t)}function n2e(t){"triggerUpdate"in t?t.triggerUpdate(this):er(t.hostUpdate,t,this)}function s2e(t){"triggerUpdated"in t?t.triggerUpdated(this):er(t.hostUpdated,t,this)}function o2e(t){"triggerDestroy"in t?t.triggerDestroy():er(t.hostDestroy,t)}var a2e=t=>Dse(void 0,t),uft=t=>e=>Dse(e,t),l2e=class extends GU{constructor(t,e){super(t);const i=this.exports;try{Nb(this.component);const r=e(this.component,this),n=this.exports!==i;if(r instanceof Promise){n||this.setProvisionalExports(r);const s=r.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this._ready.reject(o),console.error(o)});this.onLoad(async()=>await s)}else(!n||r!==void 0)&&(this.exports=r),queueMicrotask(()=>super.catchUpLifecycle())}catch(r){this._ready.reject(r),console.error(r)}}catchUpLifecycle(){}},Dse=XU(l2e),YU=(t,e)=>new u2e(t,e),u2e=class extends GU{constructor(t,e){super(),this._attributes=t,this._callback=e,this._observer=new MutationObserver(i=>{i.forEach(r=>{t.includes(r.attributeName)&&e.call(this.component,this.component.el.getAttribute(r.attributeName),r.oldValue,r.attributeName)})})}hostConnected(){this._attributes.forEach(t=>{this.component.el.hasAttribute(t)&&this._callback.call(this.component,null,this.component.el.getAttribute(t),t)}),this._observer.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this._attributes})}hostDisconnected(){this._observer.disconnect()}},c2e=t=>(e={})=>a2e((i,r)=>{const n=Cse(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>E$e(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:u,lang:p})=>{const m={...u,_lang:p,_t9nLocale:l,_loading:!1};r.exports=m;const g=u.componentLabel;typeof g=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=g)),a(o.messageOverrides)},e.name));function a(l){const u=r.exports,p=u._original??u,m=Vse(p,l);l&&(m._original=p),r.exports=m}return"messageOverrides"in o&&r.onLifecycle(()=>mg(o,"messageOverrides",a)),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s});function Vse(t,e){if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=Vse(t[r],n):i[r]=n??t[r]}),i}var JU=t=>h2e,nH="arcgisPropertyChange";function h2e(...t){const e=hO();let r=e[nH];return e.manager.isLit&&(r=e.constructor.$createEvent(nH,void 0,e)),e.manager.onLoad(()=>e.manager.onLifecycle(()=>t.map(n=>mg(e,n,()=>r.emit({name:n}))))),r}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Kk=globalThis,KU=Kk.ShadowRoot&&(Kk.ShadyCSS===void 0||Kk.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,eQ=Symbol(),sH=new WeakMap;let Fse=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==eQ)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(KU&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=sH.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&sH.set(i,e))}return e}toString(){return this.cssText}};const d2e=t=>new Fse(typeof t=="string"?t:t+"",void 0,eQ),Ln=(t,...e)=>{const i=t.length===1?t[0]:e.reduce((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1],t[0]);return new Fse(i,t,eQ)},p2e=(t,e)=>{if(KU)t.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),n=Kk.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},oH=KU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return d2e(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:f2e,defineProperty:m2e,getOwnPropertyDescriptor:y2e,getOwnPropertyNames:g2e,getOwnPropertySymbols:v2e,getPrototypeOf:b2e}=Object,Of=globalThis,aH=Of.trustedTypes,w2e=aH?aH.emptyScript:"",C5=Of.reactiveElementPolyfillSupport,ex=(t,e)=>t,f4={toAttribute(t,e){switch(e){case Boolean:t=t?w2e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},jse=(t,e)=>!f2e(t,e),lH={attribute:!0,type:String,converter:f4,reflect:!1,hasChanged:jse};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Of.litPropertyMetadata??(Of.litPropertyMetadata=new WeakMap);let Tv=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=lH){if(i.state&&(i.attribute=!1),this._$Ei(),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&m2e(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){const{get:n,set:s}=y2e(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get(){return n==null?void 0:n.call(this)},set(o){const a=n==null?void 0:n.call(this);s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??lH}static _$Ei(){if(this.hasOwnProperty(ex("elementProperties")))return;const e=b2e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ex("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ex("properties"))){const i=this.properties,r=[...g2e(i),...v2e(i)];for(const n of r)this.createProperty(n,i[n])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)i.unshift(oH(n))}else e!==void 0&&i.push(oH(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(i=>i(this))}addController(e){var i;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)==null||i.call(e))}removeController(e){var i;(i=this._$EO)==null||i.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return p2e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)})}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$EC(e,i){var s;const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:f4).toAttribute(i,r.type);this._$Em=e,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(e,i){var s;const r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const o=r.getPropertyOptions(n),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:f4;this._$Em=n,this[n]=a.fromAttribute(i,o.type),this._$Em=null}}requestUpdate(e,i,r){if(e!==void 0){if(r??(r=this.constructor.getPropertyOptions(e)),!(r.hasChanged??jse)(this[e],i))return;this.P(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,i,r){this._$AL.has(e)||this._$AL.set(e,i),r.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n)o.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],o)}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(r=this._$EO)==null||r.forEach(n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)}),this.update(i)):this._$EU()}catch(n){throw e=!1,this._$EU(),n}e&&this._$AE(i)}willUpdate(e){}_$AE(e){var i;(i=this._$EO)==null||i.forEach(r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(i=>this._$EC(i,this[i]))),this._$EU()}updated(e){}firstUpdated(e){}};Tv.elementStyles=[],Tv.shadowRootOptions={mode:"open"},Tv[ex("elementProperties")]=new Map,Tv[ex("finalized")]=new Map,C5==null||C5({ReactiveElement:Tv}),(Of.reactiveElementVersions??(Of.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tx=globalThis,ZM=tx.trustedTypes,uH=ZM?ZM.createPolicy("lit-html",{createHTML:t=>t}):void 0,zse="$lit$",nf=`lit$${Math.random().toFixed(9).slice(2)}$`,Use="?"+nf,O2e=`<${Use}>`,Vg=document,Qx=()=>Vg.createComment(""),Bx=t=>t===null||typeof t!="object"&&typeof t!="function",tQ=Array.isArray,S2e=t=>tQ(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",M5=`[ 	
\f\r]`,B1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,cH=/-->/g,hH=/>/g,Vm=RegExp(`>|${M5}(?:([^\\s"'>=/]+)(${M5}*=${M5}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),dH=/'/g,pH=/"/g,Qse=/^(?:script|style|textarea|title)$/i,Bse=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),Me=Bse(1),m4=Bse(2),Ka=Symbol.for("lit-noChange"),ut=Symbol.for("lit-nothing"),fH=new WeakMap,og=Vg.createTreeWalker(Vg,129);function qse(t,e){if(!tQ(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return uH!==void 0?uH.createHTML(e):e}const _2e=(t,e)=>{const i=t.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",o=B1;for(let a=0;a<i;a++){const l=t[a];let u,p,m=-1,g=0;for(;g<l.length&&(o.lastIndex=g,p=o.exec(l),p!==null);)g=o.lastIndex,o===B1?p[1]==="!--"?o=cH:p[1]!==void 0?o=hH:p[2]!==void 0?(Qse.test(p[2])&&(n=RegExp("</"+p[2],"g")),o=Vm):p[3]!==void 0&&(o=Vm):o===Vm?p[0]===">"?(o=n??B1,m=-1):p[1]===void 0?m=-2:(m=o.lastIndex-p[2].length,u=p[1],o=p[3]===void 0?Vm:p[3]==='"'?pH:dH):o===pH||o===dH?o=Vm:o===cH||o===hH?o=B1:(o=Vm,n=void 0);const w=o===Vm&&t[a+1].startsWith("/>")?" ":"";s+=o===B1?l+O2e:m>=0?(r.push(u),l.slice(0,m)+zse+l.slice(m)+nf+w):l+nf+(m===-2?a:w)}return[qse(t,s+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let y4=class Gse{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[u,p]=_2e(e,i);if(this.el=Gse.createElement(u,r),og.currentNode=this.el.content,i===2||i===3){const m=this.el.content.firstChild;m.replaceWith(...m.childNodes)}for(;(n=og.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const m of n.getAttributeNames())if(m.endsWith(zse)){const g=p[o++],w=n.getAttribute(m).split(nf),O=/([.?@])?(.*)/.exec(g);l.push({type:1,index:s,name:O[2],strings:w,ctor:O[1]==="."?$2e:O[1]==="?"?T2e:O[1]==="@"?E2e:mP}),n.removeAttribute(m)}else m.startsWith(nf)&&(l.push({type:6,index:s}),n.removeAttribute(m));if(Qse.test(n.tagName)){const m=n.textContent.split(nf),g=m.length-1;if(g>0){n.textContent=ZM?ZM.emptyScript:"";for(let w=0;w<g;w++)n.append(m[w],Qx()),og.nextNode(),l.push({type:2,index:++s});n.append(m[g],Qx())}}}else if(n.nodeType===8)if(n.data===Use)l.push({type:2,index:s});else{let m=-1;for(;(m=n.data.indexOf(nf,m+1))!==-1;)l.push({type:7,index:s}),m+=nf.length-1}s++}}static createElement(e,i){const r=Vg.createElement("template");return r.innerHTML=e,r}};function $w(t,e,i=t,r){var o,a;if(e===Ka)return e;let n=r!==void 0?(o=i._$Co)==null?void 0:o[r]:i._$Cl;const s=Bx(e)?void 0:e._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((a=n==null?void 0:n._$AO)==null||a.call(n,!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=n:i._$Cl=n),n!==void 0&&(e=$w(t,n._$AS(t,e.values),n,r)),e}let x2e=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,n=((e==null?void 0:e.creationScope)??Vg).importNode(i,!0);og.currentNode=n;let s=og.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let u;l.type===2?u=new fP(s,s.nextSibling,this,e):l.type===1?u=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(u=new k2e(s,this,e)),this._$AV.push(u),l=r[++a]}o!==(l==null?void 0:l.index)&&(s=og.nextNode(),o++)}return og.currentNode=Vg,n}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},fP=class Zse{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=ut,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=$w(this,e,i),Bx(e)?e===ut||e==null||e===""?(this._$AH!==ut&&this._$AR(),this._$AH=ut):e!==this._$AH&&e!==Ka&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):S2e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ut&&Bx(this._$AH)?this._$AA.nextSibling.data=e:this.T(Vg.createTextNode(e)),this._$AH=e}$(e){var s;const{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=y4.createElement(qse(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(i);else{const o=new x2e(n,this),a=o.u(this.options);o.p(i),this.T(a),this._$AH=o}}_$AC(e){let i=fH.get(e.strings);return i===void 0&&fH.set(e.strings,i=new y4(e)),i}k(e){tQ(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const s of e)n===i.length?i.push(r=new Zse(this.O(Qx()),this.O(Qx()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var i;this._$AM===void 0&&(this._$Cv=e,(i=this._$AP)==null||i.call(this,e))}},mP=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=ut,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ut}_$AI(e,i=this,r,n){const s=this.strings;let o=!1;if(s===void 0)e=$w(this,e,i,0),o=!Bx(e)||e!==this._$AH&&e!==Ka,o&&(this._$AH=e);else{const a=e;let l,u;for(e=s[0],l=0;l<s.length-1;l++)u=$w(this,a[r+l],i,l),u===Ka&&(u=this._$AH[l]),o||(o=!Bx(u)||u!==this._$AH[l]),u===ut?e=ut:e!==ut&&(e+=(u??"")+s[l+1]),this._$AH[l]=u}o&&!n&&this.j(e)}j(e){e===ut?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},$2e=class extends mP{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ut?void 0:e}},T2e=class extends mP{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ut)}},E2e=class extends mP{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=$w(this,e,i,0)??ut)===Ka)return;const r=this._$AH,n=e===ut&&r!==ut||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==ut&&(r===ut||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,e):this._$AH.handleEvent(e)}},k2e=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){$w(this,e)}};const C2e={I:fP},A5=tx.litHtmlPolyfillSupport;A5==null||A5(y4,fP),(tx.litHtmlVersions??(tx.litHtmlVersions=[])).push("3.2.1");const M2e=(t,e,i)=>{const r=(i==null?void 0:i.renderBefore)??e;let n=r._$litPart$;if(n===void 0){const s=(i==null?void 0:i.renderBefore)??null;r._$litPart$=n=new fP(e.insertBefore(Qx(),s),s,void 0,i??{})}return n._$AI(t),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Jb=class extends Tv{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=M2e(i,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Ka}};var tse;Jb._$litElement$=!0,Jb.finalized=!0,(tse=globalThis.litElementHydrateSupport)==null||tse.call(globalThis,{LitElement:Jb});const I5=globalThis.litElementPolyfillSupport;I5==null||I5({LitElement:Jb});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yh={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},J$=t=>(...e)=>({_$litDirective$:t,values:e});let K$=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const A2e=J$(class extends K${constructor(t){var e;if(super(t),t.type!==Yh.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!((r=this.nt)!=null&&r.has(s))&&this.st.add(s);return this.render(e)}const i=t.element.classList;for(const s of this.st)s in e||(i.remove(s),this.st.delete(s));for(const s in e){const o=!!e[s];o===this.st.has(s)||(n=this.nt)!=null&&n.has(s)||(o?(i.add(s),this.st.add(s)):(i.remove(s),this.st.delete(s)))}return Ka}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Hse="important",I2e=" !"+Hse,P2e=J$(class extends K${constructor(t){var e;if(super(t),t.type!==Yh.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(I2e);r.includes("-")||s?i.setProperty(r,s?n.slice(0,-11):n,s?Hse:""):i[r]=n}}return Ka}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:R2e}=C2e,Wse=t=>t.strings===void 0,mH=()=>document.createComment(""),wft=(t,e,i)=>{var s;const r=t._$AA.parentNode,n=e===void 0?t._$AB:e._$AA;if(i===void 0){const o=r.insertBefore(mH(),n),a=r.insertBefore(mH(),n);i=new R2e(o,a,t,t.options)}else{const o=i._$AB.nextSibling,a=i._$AM,l=a!==t;if(l){let u;(s=i._$AQ)==null||s.call(i,t),i._$AM=t,i._$AP!==void 0&&(u=t._$AU)!==a._$AU&&i._$AP(u)}if(o!==n||l){let u=i._$AA;for(;u!==o;){const p=u.nextSibling;r.insertBefore(u,n),u=p}}}return i},Oft=(t,e,i=t)=>(t._$AI(e,i),t),L2e={},Xse=(t,e=L2e)=>t._$AH=e,Sft=t=>t._$AH,_ft=t=>{var r;(r=t._$AP)==null||r.call(t,!1,!0);let e=t._$AA;const i=t._$AB.nextSibling;for(;e!==i;){const n=e.nextSibling;e.remove(),e=n}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yH=J$(class extends K${constructor(t){if(super(t),t.type!==Yh.PROPERTY&&t.type!==Yh.ATTRIBUTE&&t.type!==Yh.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!Wse(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===Ka||e===ut)return e;const i=t.element,r=t.name;if(t.type===Yh.PROPERTY){if(e===i[r])return Ka}else if(t.type===Yh.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(r))return Ka}else if(t.type===Yh.ATTRIBUTE&&i.getAttribute(r)===e+"")return Ka;return Xse(t),e}});var Yse=(t="",e={},i=hO())=>{const r={emit:n=>{t===""&&ZU();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&WU(void 0,n=>{t=n.key},r),r},xo=Yse.bind(null,""),N2e=()=>{},kg,gn=(kg=class extends Jb{constructor(){var i,r,n;super(),this.el=this.constructor.lazy??this,this.manager=Y$e(this),this._postLoad=((i=this.constructor.lazy)==null?void 0:i._postLoad)??new Dg,this._offspring=((r=this.constructor.lazy)==null?void 0:r._offspring)??[],this._postLoaded=((n=this.constructor.lazy)==null?void 0:n._postLoaded)??new Dg,this._enableUpdating=this.enableUpdating,this.enableUpdating=N2e;const e=kg.prototype.shouldUpdate;this.shouldUpdate!==e&&(this._originalShouldUpdate=this.shouldUpdate,this.shouldUpdate=e)}static finalizeStyles(e){var n;const i=super.finalizeStyles(e),r=this.shadowRootOptions===Lf;return((n=this.runtime)==null?void 0:n.commonStyles)===void 0||r?i:[this.runtime.commonStyles,...i]}static createProperty(e,i){const r=typeof i=="number"?i:Array.isArray(i)?i[0]:0,n=Array.isArray(i)?i[1]:void 0;super.createProperty(e,{attribute:r&1&&typeof e=="string"?QU(e):!1,reflect:!!(r&2),type:r&4?Boolean:r&8?Number:void 0,state:!!(r&16),readOnly:!!(r&32),noAccessor:!!(r&64),...n})}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const e=!this.manager.connectedCalled;super.connectedCallback(),e&&queueMicrotask(()=>this._load().catch(i=>{this._postLoaded.reject(i),setTimeout(()=>{throw i})}))}createRenderRoot(){const e=this.el.shadowRoot,i=this.constructor,r=i.shadowRootOptions,s=e??(r===Lf?this.el:this.el.attachShadow(r));if(Object.defineProperty(this,"shadowRoot",{value:s}),e)return Jb.prototype.createRenderRoot.call(this),e;if(this.isConnected){const o=s.getRootNode();o.adoptedStyleSheets=[...o.adoptedStyleSheets,...i.elementStyles.map(a=>"styleSheet"in a?a.styleSheet:a)]}return s}async _load(){const e=this.el._ancestorLoad??Ise(this.el);e&&await e,await this.manager._load(),this._enableUpdating(!0),this.performUpdate(),this._postLoad.resolve(),await Promise.resolve();const i=this._offspring.filter(r=>{var n;return!((n=r.manager)!=null&&n.loadedCalled)});i.length&&await Promise.allSettled(i.map(async r=>await r.componentOnReady())),this._offspring.length=0,this.el.setAttribute(this.constructor.runtime.hydratedAttribute,""),this.manager._loaded(),this._postLoaded.resolve()}shouldUpdate(e){var i;return this.$changes=e,((i=this._originalShouldUpdate)==null?void 0:i.call(this,e))??!0}listen(e,i,r){const n=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(this.el.addEventListener(e,n,r),()=>this.el.removeEventListener(e,n,r)))}listenOn(e,i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(e.addEventListener(i,s,n),()=>e.removeEventListener(i,s,n)))}async componentOnReady(){return await this._postLoaded.promise,this}},kg.lumina=!0,kg);gn.$createEvent=Yse;function Jse(t){let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var o;const s=new URL(n,e);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.runtime=r,s.tagName=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r}var Xe=t=>typeof t=="object"&&t!=null?A2e(t):t,Kse=t=>typeof t=="object"&&t!=null?P2e(t):t,tr=ut;function eoe(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}var HM={toAttribute:t=>t===!0?"":t===!1?null:t};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const D2e="calcite-mode-auto",V2e="calcite-mode-dark",iQ={rtl:"calcite--rtl"},xft={filter:250,nextTick:0,resize:150,reposition:100};function gH(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(V2e)||t.contains(D2e)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const ud=globalThis.calciteConfig,$ft=(ud==null?void 0:ud.focusTrapStack)||[],F2e=(ud==null?void 0:ud.logLevel)||"info",vH="3.0.3",j2e="2025-02-19",z2e="0b0b89f59";function U2e(){if(ud&&ud.version)return;console.info(`Using Calcite Components ${vH} [Date: ${j2e}, Revision: ${z2e}]`);const t=ud||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:vH,writable:!1}),globalThis.calciteConfig=t}const e2=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;function Q2e(){e2()&&(document.readyState==="interactive"?gH():document.addEventListener("DOMContentLoaded",()=>gH(),{once:!0})),U2e()}Q2e();const B2e=Jse({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.0.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:hl,getAssetPath:toe,setAssetPath:q2e}=B2e;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */function G2e(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const rQ=()=>G2e([2,1,1,1,3]);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const dO=c2e(toe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const K0={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},Z2e=Ln`:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`;var Cg;let ioe=(Cg=class extends gn{constructor(){super(...arguments),this.messages=dO({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:n,type:s,value:o}=this,a=e.id||rQ(),l=s!=="indeterminate",u=Math.floor(o);return this.el.ariaLabel=r,this.el.ariaValueMax=l?"100":void 0,this.el.ariaValueMin=l?"0":void 0,this.el.ariaValueNow=l?u.toString():void 0,eoe(this.el,"id",a),this.el.role="progressbar",Me`<div class=${Xe(K0.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&l&&Me`<div class=${Xe(K0.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&n&&Me`<div class=${Xe(K0.text)}>${n}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:n}=this,s=i?this.getInlineSize(r):this.getSize(r),o=s*.45;let a;if(e==="progress"){const l=2*o*Math.PI,u=(this.type.startsWith("determinate")?n:24)/100*l,p=l-u;a={"stroke-dasharray":`${u} ${p}`}}return Me`<svg aria-hidden=true class=${Xe({[K0.ring]:!0,[K0.trackRing]:e==="track",[K0.progressRing]:e==="progress"})} style=${Kse(a)} viewBox=${`0 0 ${s} ${s}`}>${m4`<circle cx=${s/2} cy=${s/2} r=${o??ut} />`}</svg>`}},Cg.properties={complete:7,inline:7,label:1,scale:3,text:1,type:3,value:9},Cg.styles=Z2e,Cg);hl("calcite-loader",ioe);const H2e=Object.freeze(Object.defineProperty({__proto__:null,Loader:ioe},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var W2e=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],g4=W2e.join(","),roe=typeof Element>"u",qx=roe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,WM=!roe&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},XM=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},X2e=function(t){var e,i=t==null||(e=t.getAttribute)===null||e===void 0?void 0:e.call(t,"contenteditable");return i===""||i==="true"},Y2e=function(t,e,i){if(XM(t))return[];var r=Array.prototype.slice.apply(t.querySelectorAll(g4));return e&&qx.call(t,g4)&&r.unshift(t),r=r.filter(i),r},J2e=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!XM(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,r);r.flatten?n.push.apply(n,u):n.push({scopeParent:o,candidates:u})}else{var p=qx.call(o,g4);p&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var m=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),g=!XM(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(m&&g){var w=t(m===!0?o.children:m.children,!0,r);r.flatten?n.push.apply(n,w):n.push({scopeParent:o,candidates:w})}else s.unshift.apply(s,o.children)}}return n},noe=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},soe=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||X2e(t))&&!noe(t)?0:t.tabIndex},K2e=function(t,e){var i=soe(t);return i<0&&e&&!noe(t)?0:i},eTe=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},ooe=function(t){return t.tagName==="INPUT"},tTe=function(t){return ooe(t)&&t.type==="hidden"},iTe=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(i){return i.tagName==="SUMMARY"});return e},rTe=function(t,e){for(var i=0;i<t.length;i++)if(t[i].checked&&t[i].form===e)return t[i]},nTe=function(t){if(!t.name)return!0;var e=t.form||WM(t),i=function(s){return e.querySelectorAll('input[type="radio"][name="'+s+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(t.name));else try{r=i(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var n=rTe(r,t.form);return!n||n===t},sTe=function(t){return ooe(t)&&t.type==="radio"},oTe=function(t){return sTe(t)&&!nTe(t)},aTe=function(t){var e,i=t&&WM(t),r=(e=i)===null||e===void 0?void 0:e.host,n=!1;if(i&&i!==t){var s,o,a;for(n=!!((s=r)!==null&&s!==void 0&&(o=s.ownerDocument)!==null&&o!==void 0&&o.contains(r)||t!=null&&(a=t.ownerDocument)!==null&&a!==void 0&&a.contains(t));!n&&r;){var l,u,p;i=WM(r),r=(l=i)===null||l===void 0?void 0:l.host,n=!!((u=r)!==null&&u!==void 0&&(p=u.ownerDocument)!==null&&p!==void 0&&p.contains(r))}}return n},bH=function(t){var e=t.getBoundingClientRect(),i=e.width,r=e.height;return i===0&&r===0},lTe=function(t,e){var i=e.displayCheck,r=e.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var n=qx.call(t,"details>summary:first-of-type"),s=n?t.parentElement:t;if(qx.call(s,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof r=="function"){for(var o=t;t;){var a=t.parentElement,l=WM(t);if(a&&!a.shadowRoot&&r(a)===!0)return bH(t);t.assignedSlot?t=t.assignedSlot:!a&&l!==t.ownerDocument?t=l.host:t=a}t=o}if(aTe(t))return!t.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return bH(t);return!1},uTe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var i=0;i<e.children.length;i++){var r=e.children.item(i);if(r.tagName==="LEGEND")return qx.call(e,"fieldset[disabled] *")?!0:!r.contains(t)}return!0}e=e.parentElement}return!1},cTe=function(t,e){return!(e.disabled||XM(e)||tTe(e)||lTe(e,t)||iTe(e)||uTe(e))},wH=function(t,e){return!(oTe(e)||soe(e)<0||!cTe(t,e))},hTe=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},dTe=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=K2e(a,o),u=o?t(n.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:u})}),r.sort(eTe).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},pTe=function(t,e){e=e||{};var i;return e.getShadowRoot?i=J2e([t],e.includeContainer,{filter:wH.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:hTe}):i=Y2e(t,e.includeContainer,wH.bind(null,e)),dTe(i)};const fTe={getShadowRoot:!0};function Tft(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${rQ()}`:""}function Eft(t){return Array.isArray(t)?t:Array.from(t)}function yP(t){const e="dir",i=`[${e}]`,r=pO(t,i);return r?r.getAttribute(e):"ltr"}function kft(t){return t?parseFloat(getComputedStyle(t).inlineSize):0}function nQ(t){return t.getRootNode()}function Cft(t){const e=nQ(t);return"host"in e?e:null}function Mft(t,e){if(!t)return 0;const i=document.createElement("canvas").getContext("2d");return i.font=e,i.measureText(t).width}function aoe(t){return t.host||null}function sQ(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=nQ(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||sQ(aoe(r),{selector:e,id:i})}function pO(t,e){return t?t.closest(e)||pO(aoe(nQ(t)),e):null}function mTe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function loe(t){if(t)return mTe(t)?t.setFocus():t.focus()}function yTe(t){if(t)return pTe(t,fTe)[0]??t}function uoe(t){var e;(e=yTe(t))==null||e.focus()}function gTe(t,e){return t.filter(i=>i.matches(e))}function YM(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function vTe(t){return(!!t).toString()}function Aft(t){return Mn(t)||OTe(t)}function bTe(t){return STe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function wTe(t){var e;for(const i of t.childNodes)if(i.nodeType===Node.TEXT_NODE&&((e=i.textContent)==null?void 0:e.trim())!==""||i.nodeType===Node.ELEMENT_NODE)return!0;return!1}function OTe(t){return!!bTe(t)}function STe(t){return t.currentTarget.assignedNodes({flatten:!0})}function Mn(t){return!!Kb(t).length}function Kb(t,e){return _Te(t.target,e)}function _Te(t,e){const i=t.assignedElements({flatten:!0});return e?gTe(i,e):i}function xTe(t){return!!(t.isPrimary&&t.button===0)}function Ift(t){return t.detail===0}const hE=(t,e,i,r=!0)=>{const n=t.indexOf(e),s=n===0,o=n===t.length-1;r&&(i=i==="previous"&&s?"last":i==="next"&&o?"first":i);let a;return i==="previous"?a=t[n-1]||t[r?t.length-1:n]:i==="next"?a=t[n+1]||t[r?0:n]:i==="last"?a=t[t.length-1]:a=t[0],loe(a),a};function $Te(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function Pft(t,e,i,r){return coe(t,e,"animation",i,r)}async function Rft(t,e,i,r){return coe(t,e,"transition",i,r)}async function TTe(t,e){await v4(),t==null||t(),await v4(),e==null||e()}function OH(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(n=>n[r]===i)}async function coe(t,e,i,r,n){let s=OH(t,i,e);if(s||(await v4(),s=OH(t,i,e)),!s)return TTe(r,n);r==null||r();try{await s.finished}catch{}finally{n==null||n()}}function v4(){return new Promise(t=>requestAnimationFrame(()=>t()))}function Lft(t){return t.endsWith("px")}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */function JM(t,e,i){if(!e2())return;const r=ETe(t);return new r(e,i)}function ETe(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(s=>s.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const SH=new Set,_H={trace:0,debug:1,info:2,warn:4,error:8,off:10};function kTe(t){return _H[t]>=_H[F2e]}function Ev(t,...e){kTe(t)&&console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let P5;const hoe={debug:t=>Ev("debug",t),info:t=>Ev("info",t),warn:t=>Ev("warn",t),error:t=>Ev("error",t),trace:t=>Ev("trace",t),deprecated:CTe};function CTe(t,{component:e,name:i,suggested:r,removalVersion:n}){const s=`${t}:${t==="component"?"":e}${i}`;if(SH.has(s))return;SH.add(s);const o=Array.isArray(r);o&&!P5&&(P5=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const a=`[${i}] ${t} is deprecated and will be removed in ${n==="future"?"a future version":`v${n}`}.${r?` Use ${o?P5.format(r.map(l=>`"${l}"`)):`"${r}"`} instead.`:""}`;Ev("warn",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const MTe={flipRtl:"flip-rtl"},doe={},R5={},poe={s:16,m:24,l:32};function foe({icon:t,scale:e}){const i=poe[e],r=PTe(t),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function ATe(t){const e=foe(t),i=moe(e);if(i)return i;R5[e]||(R5[e]=fetch(toe(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(hoe.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await R5[e];return doe[e]=r,r}function ITe(t){return moe(foe(t))}function moe(t){return doe[t]}function PTe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const r=/[a-z]/i;t=i.map((n,s)=>n.replace(r,function(o,a){return s===0&&a===0?o:o.toUpperCase()})).join("")}return e?`i${t}`:t}const RTe=Ln`:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`;var Mg;let yoe=(Mg=class extends gn{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e2()||!e||!r)return;const n={icon:e,scale:i},s=ITe(n)||await ATe(n);e===this.icon&&(this.pathData=s)}waitUntilVisible(e){if(this.intersectionObserver=JM("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:n,textLabel:s}=this,o=yP(e),a=poe[n],l=!!s,u=[].concat(r||"");return this.el.ariaHidden=vTe(!l),this.el.ariaLabel=l?s:null,this.el.role=l?"img":null,Me`<svg aria-hidden=true class=${Xe({[MTe.flipRtl]:o==="rtl"&&i,svg:!0})} fill=currentColor height=100% viewBox=${`0 0 ${a} ${a}`} width=100% xmlns=http://www.w3.org/2000/svg>${u.map(p=>typeof p=="string"?m4`<path d=${p??ut} />`:m4`<path d=${p.d??ut} opacity=${("opacity"in p?p.opacity:1)??ut} />`)}</svg>`}},Mg.properties={pathData:16,visible:16,flipRtl:7,icon:3,preload:7,scale:3,textLabel:1},Mg.styles=RTe,Mg);hl("calcite-icon",yoe);const gP=Object.freeze(Object.defineProperty({__proto__:null,Icon:yoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pi=J$(class extends K${constructor(){super(...arguments),this.key=ut}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(Xse(t),this.key=e),i}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ix=(t,e)=>{var r;const i=t._$AN;if(i===void 0)return!1;for(const n of i)(r=n._$AO)==null||r.call(n,e,!1),ix(n,e);return!0},KM=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while((i==null?void 0:i.size)===0)},goe=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),DTe(e)}};function LTe(t){this._$AN!==void 0?(KM(this),this._$AM=t,goe(this)):this._$AM=t}function NTe(t,e=!1,i=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=i;s<r.length;s++)ix(r[s],!1),KM(r[s]);else r!=null&&(ix(r,!1),KM(r));else ix(this,t)}const DTe=t=>{t.type==Yh.CHILD&&(t._$AP??(t._$AP=NTe),t._$AQ??(t._$AQ=LTe))};let VTe=class extends K${constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),goe(this),this.isConnected=e._$AU}_$AO(e,i=!0){var r,n;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(n=this.disconnected)==null||n.call(this)),i&&(ix(this,e),KM(this))}setValue(e){if(Wse(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fg=()=>new FTe;let FTe=class{};const L5=new WeakMap,lu=J$(class extends VTe{render(t){return ut}update(t,[e]){var r;const i=e!==this.Y;return i&&this.Y!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.Y=e,this.ht=(r=t.options)==null?void 0:r.host,this.rt(this.ct=t.element)),ut}rt(t){if(this.isConnected||(t=void 0),typeof this.Y=="function"){const e=this.ht??globalThis;let i=L5.get(e);i===void 0&&(i=new WeakMap,L5.set(e,i)),i.get(this.Y)!==void 0&&this.Y.call(this.ht,void 0),i.set(this.Y,t),t!==void 0&&this.Y.call(this.ht,t)}else this.Y.value=t}get lt(){var t,e;return typeof this.Y=="function"?(t=L5.get(this.ht??globalThis))==null?void 0:t.get(this.Y):(e=this.Y)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */function jTe(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function voe(t){t.target.disabled&&t.preventDefault()}const boe=["mousedown","mouseup","click"];function woe(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const eA={capture:!0};function oQ(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),zTe(t);return}QTe(t),t.el.removeAttribute("aria-disabled")}function zTe(t){t.el.click=jTe,UTe(t.el)}function UTe(t){t.addEventListener("pointerdown",voe,eA),boe.forEach(e=>t.addEventListener(e,woe,eA))}function QTe(t){delete t.el.click,BTe(t.el)}function BTe(t){t.removeEventListener("pointerdown",voe,eA),boe.forEach(e=>t.removeEventListener(e,woe,eA))}const qTe={container:"interaction-container"},aQ=({children:t,disabled:e})=>Me`<div class=${Xe(qTe.container)} .inert=${e}>${t}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */async function Vft(t){await t.componentOnReady()}async function o0(t){if(await t.componentOnReady(),!!e2())return t.requestUpdate(),new Promise(e=>requestAnimationFrame(()=>e()))}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */function ag(t){return t==="l"?"m":"s"}function Fft(t,e,i){!t[e]&&!t[i]&&hoe.warn(`[${t.el.localName}] "${e.toString()}" or "${i.toString()}" is required.`)}function jft(t){return t.hidden||t.itemHidden}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const Tl={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},GTe={tooltip:"tooltip"},ZTe=Ln`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;cursor:pointer;background-color:transparent;--calcite-internal-action-text-color: var(--calcite-color-text-3)}:host([drag-handle]){cursor:move;--calcite-internal-action-text-color: var(--calcite-color-border-input);--calcite-internal-action-padding-inline: var(--calcite-spacing-xxs)}:host,.button{border-radius:var(--calcite-action-corner-radius, var(--calcite-action-corner-radius-start-start, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-start-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-start, var(--calcite-corner-radius)))}.button{position:relative;margin:0;display:flex;inline-size:auto;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-internal-action-text-color));text-align:unset;flex:1 0 auto;cursor:inherit}.button:hover,.button:focus{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}.button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}.icon-container{pointer-events:none;margin:0;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-property:margin;transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus{color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)));background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}:host([active]) .button:active{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]):host([active]) .button{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1)}:host([appearance=transparent]) .button:hover,:host([appearance=transparent]) .button:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([data-active]) .button{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .button{font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, .5rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xxs))}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:.5rem}:host([scale=m]) .button{font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-md))}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:.75rem}:host([scale=l]) .button{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1.25rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xl))}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:.25rem;inline-size:1rem;position:relative}.indicator-without-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color, var(--calcite-action-background-color, var(--calcite-color-foreground-1)))}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`;var Ag;let Ooe=(Ag=class extends gn{constructor(){super(...arguments),this.guid=`calcite-action-${rQ()}`,this.buttonEl=Fg(),this.buttonId=`${this.guid}-button`,this.indicatorId=`${this.guid}-indicator`,this.mutationObserver=JM("mutation",()=>this.requestUpdate()),this.active=!1,this.appearance="solid",this.compact=!1,this.disabled=!1,this.dragHandle=!1,this.iconFlipRtl=!1,this.indicator=!1,this.loading=!1,this.messages=dO({blocking:!0}),this.scale="m",this.textEnabled=!1}async setFocus(){var e;await o0(this),(e=this.buttonEl.value)==null||e.focus()}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}async load(){}updated(){oQ(this)}loaded(){}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}handleTooltipSlotChange(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-tooltip"))[0];i&&(i.referenceElement=this.buttonEl.value)}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[Tl.textContainer]:!0,[Tl.textContainerVisible]:i};return e?Pi("text-container",Me`<div class=${Xe(r)}>${e}</div>`):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:r,buttonId:n}=this;return Me`<div aria-labelledby=${n??tr} aria-live=polite class=${Xe(Tl.indicatorText)} id=${r??tr} role=region>${e?i.indicator:null}</div>`}renderIconContainer(){var w;const{loading:e,icon:i,scale:r,el:n,iconFlipRtl:s,indicator:o}=this,a=r==="l"?"l":"m",l=e?Me`<calcite-loader inline .label=${this.messages.loading} .scale=${a}></calcite-loader>`:null,u=i?Me`<calcite-icon class=${Xe({[Tl.indicatorWithIcon]:o})} .flipRtl=${s} .icon=${i} .scale=${ag(this.scale)}></calcite-icon>`:null,p=l||u,m=p||((w=n.children)==null?void 0:w.length),g=Me`<div class=${Xe({[Tl.slotContainer]:!0,[Tl.slotContainerHidden]:e})}><slot></slot></div>`;return m?Pi("icon-container",Me`<div aria-hidden=true class=${Xe(Tl.iconContainer)}>${p}${g}</div>`):null}renderButton(){const{active:e,compact:i,disabled:r,icon:n,loading:s,textEnabled:o,label:a,text:l,indicator:u,indicatorId:p,buttonId:m,messages:g}=this,w=a||l||"",O=u?g.indicatorLabel.replace("{label}",w):w,_={[Tl.button]:!0,[Tl.buttonTextVisible]:o,[Tl.buttonCompact]:i},x=Me`${this.renderIconContainer()}${this.renderTextContainer()}${!n&&u&&Pi("indicator-no-icon",Me`<div class=${Xe(Tl.indicatorWithoutIcon)}></div>`)||""}`;return this.dragHandle?Me`<span aria-controls=${(u?p:null)??tr} .ariaBusy=${s} .ariaDisabled=${this.disabled?this.disabled:null} .ariaLabel=${O} .ariaPressed=${e} class=${Xe(_)} id=${m??tr} role=button tabindex=${(this.disabled?null:0)??tr} ${lu(this.buttonEl)}>${x}</span>`:Me`<button aria-controls=${(u?p:null)??tr} .ariaBusy=${s} .ariaLabel=${O} .ariaPressed=${e} class=${Xe(_)} .disabled=${r} id=${m??tr} tabindex=${(r?null:0)??tr} ${lu(this.buttonEl)}>${x}</button>`}render(){return aQ({disabled:this.disabled,children:Me`${this.renderButton()}<slot name=${GTe.tooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${this.renderIndicatorText()}`})}},Ag.properties={active:7,alignment:3,appearance:3,compact:7,disabled:7,dragHandle:7,icon:3,iconFlipRtl:7,indicator:7,label:1,loading:7,messageOverrides:0,scale:3,text:1,textEnabled:7},Ag.styles=ZTe,Ag);hl("calcite-action",Ooe);const lQ=Object.freeze(Object.defineProperty({__proto__:null,Action:Ooe},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const lh={container:"container",containerContent:"container-content",hasProgress:"progress-bar",hide:"hide",primary:"primary",secondary:"secondary",tertiary:"tertiary"},ss={logo:"logo",user:"user",progress:"progress",navigationAction:"navigation-action",contentStart:"content-start",contentEnd:"content-end",contentCenter:"content-center",navSecondary:"navigation-secondary",navTertiary:"navigation-tertiary"},HTe={hamburger:"hamburger"},WTe=Ln`:host([hidden]){display:none}[hidden]{display:none}.container{display:flex;inline-size:100%;flex-direction:column;margin-block:0;margin-inline:auto;background-color:var(--calcite-navigation-background-color, var(--calcite-navigation-background, var(--calcite-color-foreground-1)))}.container.primary,.container.secondary,.container.tertiary{border-block-end:1px solid;border-block-end-color:var(--calcite-navigation-border-color, var(--calcite-color-border-3))}.user,.logo{display:flex}.hide{display:none}.primary{block-size:4rem}.secondary,.tertiary{block-size:3rem}.container-content{margin-inline:auto;display:flex;block-size:100%;inline-size:100%;margin-block:0;inline-size:var(--calcite-navigation-width, 100%);max-inline-size:100%}.container-content.progress-bar{margin-block-start:.125rem}slot[name]{display:flex;flex-direction:row}slot[name=navigation-secondary]::slotted(calcite-navigation),slot[name=navigation-tertiary]::slotted(calcite-navigation){inline-size:100%}slot[name=content-start]::slotted(*),slot[name=content-center]::slotted(*),slot[name=content-end]::slotted(*){display:flex;flex-direction:row;align-items:center}slot[name=progress],slot[name=progress] calcite-progress{inset-block-start:0;inset-inline:0}slot[name=content-end]{margin-inline-start:auto}slot[name=content-start]{margin-inline-end:auto}slot[name=content-end],slot[name=logo]~slot[name=user],slot[name=user]:only-child{margin-inline-start:auto}slot[name=content-center]{margin-inline-start:auto;margin-inline-end:auto}slot[name=content-start]~slot[name=content-center]{margin-inline-start:0px}slot[name=content-start]~slot[name=content-end],slot[name=content-center]~slot[name=content-end],slot[name=content-center]~slot[name=user],slot[name=content-end]~slot[name=user]{margin:0}`;var Ig;let XTe=(Ig=class extends gn{constructor(){super(...arguments),this.navigationActionEl=Fg(),this.navigationAction=!1,this.calciteNavigationActionSelect=xo({cancelable:!1})}async setFocus(){var e;return await o0(this),(e=this.navigationActionEl.value)==null?void 0:e.setFocus()}load(){}loaded(){}actionClickHandler(){this.calciteNavigationActionSelect.emit()}handleUserSlotChange(e){this.isPrimaryLevel()&&(this.userSlotHasElements=Mn(e))}handleLogoSlotChange(e){this.isPrimaryLevel()&&(this.logoSlotHasElements=Mn(e))}handleContentStartSlotChange(e){this.isPrimaryLevel()&&(this.primaryContentStartSlotHasElements=Mn(e))}handleContentEndSlotChange(e){this.isPrimaryLevel()&&(this.primaryContentEndSlotHasElements=Mn(e))}handleContentCenterSlotChange(e){this.isPrimaryLevel()&&(this.primaryContentCenterSlotHasElements=Mn(e))}handleSecondarySlotChange(e){this.secondarySlotHasElements=Mn(e)}handleTertiarySlotChange(e){this.tertiarySlotHasElements=Mn(e)}handleMenuActionSlotChange(e){this.isPrimaryLevel()&&(this.navigationActionSlotHasElements=Mn(e),this.navigationActionSlotHasElements&&(this.navigationAction=!1))}handleProgressSlotChange(e){this.isPrimaryLevel()&&(this.progressSlotHasElement=Mn(e))}isPrimaryLevel(){return this.el.slot!==ss.navSecondary&&this.el.slot!==ss.navTertiary}renderMenuAction(){return Me`<slot name=${ss.navigationAction} @slotchange=${this.handleMenuActionSlotChange}>${this.navigationAction&&Me`<calcite-action .icon=${HTe.hamburger} @click=${this.actionClickHandler} .text=${this.label} ${lu(this.navigationActionEl)}></calcite-action>`||""}</slot>`}render(){const e=this.logoSlotHasElements||this.userSlotHasElements||this.navigationActionSlotHasElements||this.primaryContentCenterSlotHasElements||this.primaryContentEndSlotHasElements||this.primaryContentStartSlotHasElements||this.navigationAction,i=this.el.slot;return Me`<div class=${Xe({[lh.container]:!0,[lh.secondary]:i===ss.navSecondary,[lh.tertiary]:i===ss.navTertiary,[lh.primary]:e})}><div class=${Xe({[lh.hide]:!this.progressSlotHasElement,[ss.progress]:!0})}><slot name=${ss.progress} @slotchange=${this.handleProgressSlotChange}></slot></div><div class=${Xe({[lh.containerContent]:!0,[lh.hasProgress]:this.progressSlotHasElement})}>${this.renderMenuAction()}<div class=${Xe({[lh.hide]:!this.logoSlotHasElements,[ss.logo]:!0})}><slot name=${ss.logo} @slotchange=${this.handleLogoSlotChange}></slot></div><slot name=${ss.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot><slot name=${ss.contentCenter} @slotchange=${this.handleContentCenterSlotChange}></slot><slot name=${ss.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot><div class=${Xe({[lh.hide]:!this.userSlotHasElements,[ss.user]:!0})}><slot name=${ss.user} @slotchange=${this.handleUserSlotChange}></slot></div></div></div><slot name=${ss.navSecondary} @slotchange=${this.handleSecondarySlotChange}></slot><slot name=${ss.navTertiary} @slotchange=${this.handleTertiarySlotChange}></slot>`}},Ig.properties={logoSlotHasElements:16,navigationActionSlotHasElements:16,primaryContentCenterSlotHasElements:16,primaryContentEndSlotHasElements:16,primaryContentStartSlotHasElements:16,progressSlotHasElement:16,secondarySlotHasElements:16,tertiarySlotHasElements:16,userSlotHasElements:16,label:1,navigationAction:7},Ig.styles=WTe,Ig);hl("calcite-navigation",XTe);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const uQ=Symbol.for(""),YTe=t=>{if((t==null?void 0:t.r)===uQ)return t==null?void 0:t._$litStatic$},JTe=t=>({_$litStatic$:t,r:uQ}),Gx=(t,...e)=>({_$litStatic$:e.reduce((i,r,n)=>i+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[n+1],t[0]),r:uQ}),xH=new Map,KTe=t=>(e,...i)=>{const r=i.length;let n,s;const o=[],a=[];let l,u=0,p=!1;for(;u<r;){for(l=e[u];u<r&&(s=i[u],(n=YTe(s))!==void 0);)l+=n+e[++u],p=!0;u!==r&&a.push(s),o.push(l),u++}if(u===r&&o.push(e[r]),p){const m=o.join("$$lit$$");(e=xH.get(m))===void 0&&(o.raw=o,xH.set(m,e=o)),i=a}return t(e,...i)},cQ=KTe(Me),eEe=({children:t,...e})=>{const i=e.level?JTe(`h${e.level}`):Gx`div`;return Pi(e.key,cQ`<${i} class=${Xe(e.class)}>${t}</${i}>`)};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const Aa={container:"container",containerLink:"container--link",textContainer:"text-container",heading:"heading",description:"description",image:"image",standalone:"standalone",icon:"icon"},tEe=Ln`:host{display:inline-flex}.container{margin:0;display:flex;align-items:center;justify-content:center;font-size:var(--calcite-font-size-0);line-height:1.25rem;background-color:var(--calcite-navigation-background-color, var(--calcite-internal-navigation-logo-background-color, var(--calcite-color-foreground-1)));border-block-end:2px solid var(--calcite-color-transparent);transition-property:background-color;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}.container--link{cursor:pointer;text-decoration-line:none;outline-color:transparent}:host(:focus) .container--link{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.image,.icon{margin:0;display:flex;block-size:1.75rem;padding-inline:1rem;color:var(--calcite-navigation-logo-text-color, var(--calcite-icon-color, var(--calcite-internal-navigation-logo-text-color, inherit)))}.image~.icon{padding-inline-start:0px}.image~.text-container,.icon~.text-container{padding-inline-start:0px}:host([href]:hover),:host([href]:focus){--calcite-internal-navigation-logo-background-color: var(--calcite-color-foreground-2)}:host([href]:active){--calcite-internal-navigation-logo-background-color: var(--calcite-color-foreground-3)}:host([active]) .container{border-block-end-color:var(--calcite-navigation-accent-color, var(--calcite-color-brand))}:host([active]),:host([href]:active){--calcite-internal-navigation-logo-text-color: var(--calcite-color-brand)}.text-container{margin-block-start:.125rem;display:flex;flex-direction:column;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-inline:1rem;text-align:start}.heading{margin-inline-start:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-navigation-logo-heading-text-color, var(--calcite-color-text-1))}.standalone{font-size:var(--calcite-font-size-1)}.description{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--calcite-color-text-2);color:var(--calcite-navigation-logo-text-color, var(--calcite-color-text-2));font-size:var(--calcite-font-size--1)}:host([hidden]){display:none}[hidden]{display:none}`;var kf;let iEe=(kf=class extends gn{constructor(){super(...arguments),this.iconFlipRtl=!1}async setFocus(){await o0(this),this.href&&this.el.focus()}load(){}loaded(){}renderIcon(){return Me`<calcite-icon class=${Xe(Aa.icon)} .flipRtl=${this.iconFlipRtl} .icon=${this.icon} scale=l></calcite-icon>`}renderHeaderContent(){const{heading:e,headingLevel:i,description:r}=this,n=e?Pi(Aa.heading,eEe({class:{[Aa.heading]:!0,[Aa.standalone]:!this.description},level:i,children:e})):null,s=r?Pi(Aa.description,Me`<span class=${Xe(Aa.description)}>${r}</span>`):null;return n||s?Pi(Aa.textContainer,Me`<div class=${Xe(Aa.textContainer)}>${n}${s}</div>`):null}render(){const{icon:e,href:i,label:r,rel:n,target:s,thumbnail:o}=this,a=Me`${o&&Me`<img alt=${(r||"")??tr} class=${Xe(Aa.image)} src=${o??tr}>`||""}${e&&this.renderIcon()||""}${this.renderHeaderContent()}`;return i?Me`<a class=${Xe({[Aa.container]:!0,[Aa.containerLink]:!0})} href=${i??tr} rel=${n??tr} target=${s??tr}>${a}</a>`:Me`<div class=${Xe(Aa.container)}>${a}</div>`}},kf.properties={active:7,description:1,heading:1,headingLevel:11,href:3,icon:3,iconFlipRtl:7,label:1,rel:3,target:3,thumbnail:1},kf.shadowRootOptions={mode:"open",delegatesFocus:!0},kf.styles=tEe,kf);hl("calcite-navigation-logo",iEe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const rEe=Ln`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing: 26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0,5px,0)}to{opacity:1;transform:translateZ(0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:.25rem;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);inset-block-end:.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}slot[name=modals]::slotted(calcite-modal){position:absolute}:host([hidden]){display:none}[hidden]{display:none}`,Cu={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",contentBehindCenterContent:"center-content"},El={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"};var Pg;let nEe=(Pg=class extends gn{constructor(){super(),this.hasAlerts=!1,this.hasDialogs=!1,this.hasFooter=!1,this.hasHeader=!1,this.hasModals=!1,this.hasOnlyPanelBottom=!1,this.hasPanelBottom=!1,this.hasPanelTop=!1,this.hasSheets=!1,this.panelIsResizing=!1,this.contentBehind=!1,this.listen("calciteInternalShellPanelResizeStart",this.handleCalciteInternalShellPanelResizeStart),this.listen("calciteInternalShellPanelResizeEnd",this.handleCalciteInternalShellPanelResizeEnd)}willUpdate(e){(e.has("hasPanelTop")&&(this.hasUpdated||this.hasPanelTop!==!1)||e.has("hasPanelBottom")&&(this.hasUpdated||this.hasPanelBottom!==!1))&&(this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom)}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}handleHeaderSlotChange(e){this.hasHeader=!!Mn(e)}handleFooterSlotChange(e){this.hasFooter=!!Mn(e)}handleAlertsSlotChange(e){var i;this.hasAlerts=!!Mn(e),(i=Kb(e))==null||i.map(r=>{r.tagName==="CALCITE-ALERT"&&(r.embedded=!0)})}handleSheetsSlotChange(e){var i;this.hasSheets=!!Mn(e),(i=Kb(e))==null||i.map(r=>{r.tagName==="CALCITE-SHEET"&&(r.embedded=!0)})}handleModalsSlotChange(e){this.hasModals=!!Mn(e)}handlePanelTopChange(e){this.hasPanelTop=Mn(e)}handlePanelBottomChange(e){this.hasPanelBottom=Mn(e)}handleDialogsSlotChange(e){var i;this.hasDialogs=!!Mn(e),(i=Kb(e))==null||i.map(r=>{r.tagName==="CALCITE-DIALOG"&&(r.embedded=!0)})}renderHeader(){return Me`<div .hidden=${!this.hasHeader}>${Pi("header",Me`<slot name=${El.header} @slotchange=${this.handleHeaderSlotChange}></slot>`)}</div>`}renderFooter(){return Pi("footer",Me`<div class=${Xe(Cu.footer)} .hidden=${!this.hasFooter}><slot name=${El.footer} @slotchange=${this.handleFooterSlotChange}></slot></div>`)}renderAlerts(){return Me`<div .hidden=${!this.hasAlerts}>${Pi("alerts",Me`<slot name=${El.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</div>`}renderSheets(){return Me`<div .hidden=${!this.hasSheets}>${Pi("sheets",Me`<slot name=${El.sheets} @slotchange=${this.handleSheetsSlotChange}></slot>`)}</div>`}renderModals(){return Me`<div .hidden=${!this.hasModals}>${Pi("modals",Me`<slot name=${El.modals} @slotchange=${this.handleModalsSlotChange}></slot>`)}</div>`}renderDialogs(){return Me`<div .hidden=${!this.hasDialogs}>${Pi("dialogs",Me`<slot name=${El.dialogs} @slotchange=${this.handleDialogsSlotChange}></slot>`)}</div>`}renderContent(){const{panelIsResizing:e}=this,i=Pi("default-slot",Me`<slot></slot>`),r=e?Me`<div class=${Xe(Cu.contentNonInteractive)}>${i}</div>`:i,n=Pi("center-row-slot",Me`<slot name=${El.centerRow}></slot>`),s=Pi("panel-bottom-slot",Me`<slot name=${El.panelBottom} @slotchange=${this.handlePanelBottomChange}></slot>`),o=Pi("panel-top-slot",Me`<slot name=${El.panelTop} @slotchange=${this.handlePanelTopChange}></slot>`),a="content-container";return this.contentBehind?[Pi(a,Me`<div class=${Xe({[Cu.content]:!0,[Cu.contentBehind]:!0})}>${r}</div>`),Me`<div class=${Xe({[Cu.contentBehindCenterContent]:!0,[Cu.contentBottom]:this.hasOnlyPanelBottom})}>${o}${s}${n}</div>`]:[Pi(a,Me`<div class=${Xe({[Cu.content]:!0,[Cu.contentBottom]:this.hasOnlyPanelBottom})}>${o}${r}${s}${n}</div>`)]}renderMain(){return Me`<div class=${Xe(Cu.main)}><slot name=${El.panelStart}></slot>${this.renderContent()}<slot name=${El.panelEnd}></slot></div>`}renderPositionedSlots(){return Me`<div class=${Xe(Cu.positionedSlotWrapper)}>${this.renderAlerts()}${this.renderModals()}${this.renderDialogs()}${this.renderSheets()}</div>`}render(){return Me`${this.renderHeader()}${this.renderMain()}${this.renderFooter()}${this.renderPositionedSlots()}`}},Pg.properties={hasAlerts:16,hasDialogs:16,hasFooter:16,hasHeader:16,hasModals:16,hasOnlyPanelBottom:16,hasPanelBottom:16,hasPanelTop:16,hasSheets:16,panelIsResizing:16,contentBehind:7},Pg.styles=rEe,Pg);hl("calcite-shell",nEe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const sEe=Ln`:host{display:flex}ul{margin:0;display:inline-flex;block-size:100%;align-items:center;padding:0}:host([layout=vertical]) ul{display:flex;inline-size:100%;flex-direction:column}:host([hidden]){display:none}[hidden]{display:none}`;var Cf;let oEe=(Cf=class extends gn{constructor(){super(),this.attributeWatch=YU(["role"],this.handleGlobalAttributesChanged),this.menuItems=[],this.layout="horizontal",this.messages=dO(),this.listen("calciteInternalMenuItemKeyEvent",this.calciteInternalNavMenuItemKeyEvent)}async setFocus(){await o0(this),uoe(this.menuItems[0])}async load(){}willUpdate(e){e.has("layout")&&(this.hasUpdated||this.layout!=="horizontal")&&this.setMenuItemLayout(this.menuItems,this.layout)}loaded(){}handleGlobalAttributesChanged(){this.requestUpdate(),this.setMenuItemLayout(this.menuItems,this.layout)}calciteInternalNavMenuItemKeyEvent(e){const i=e.target,r=e.detail.children,n=e.detail.event.key;e.stopPropagation(),n==="ArrowDown"?i.layout==="vertical"?hE(this.menuItems,i,"next",!1):e.detail.isSubmenuOpen&&r[0].setFocus():n==="ArrowUp"?this.layout==="vertical"?hE(this.menuItems,i,"previous",!1):e.detail.isSubmenuOpen&&r[r.length-1].setFocus():n==="ArrowRight"?this.layout==="horizontal"?hE(this.menuItems,i,"next",!1):e.detail.isSubmenuOpen&&r[0].setFocus():n==="ArrowLeft"?this.layout==="horizontal"?hE(this.menuItems,i,"previous",!1):e.detail.isSubmenuOpen&&this.focusParentElement(e.target):n==="Escape"&&this.focusParentElement(e.target),e.preventDefault()}handleMenuSlotChange(e){this.menuItems=Kb(e),this.setMenuItemLayout(this.menuItems,this.layout)}focusParentElement(e){const i=e.parentElement;i&&(loe(i),i.open=!1)}setMenuItemLayout(e,i){e.forEach(r=>{r.layout=i,this.getEffectiveRole()==="menubar"&&(r.isTopLevelItem=!0,r.topLevelMenuLayout=this.layout)})}getEffectiveRole(){return this.el.role||"menubar"}render(){return Me`<ul .ariaLabel=${this.label} .role=${this.getEffectiveRole()}><slot @slotchange=${this.handleMenuSlotChange}></slot></ul>`}},Cf.properties={label:1,layout:3,messageOverrides:0},Cf.shadowRootOptions={mode:"open",delegatesFocus:!0},Cf.styles=sEe,Cf);hl("calcite-menu",oEe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const ki={container:"container",content:"content",dropdownVertical:"dropdown--vertical",dropdownMenuItems:"dropdown-menu-items",dropdownAction:"dropdown-action",layoutVertical:"layout--vertical",hoverHrefIcon:"hover-href-icon",icon:"icon",iconBreadcrumb:"icon--breadcrumb",iconDropdown:"icon--dropdown",iconEnd:"icon--end",iconStart:"icon--start",isParentVertical:"parent--vertical",itemContent:"item-content",open:"open",nested:"nested",textContainer:"text-container"},aEe=Ln`:host{position:relative;box-sizing:border-box;display:flex;align-items:center;flex-shrink:0}:host .container,:host .item-content,:host .content{min-block-size:3rem}:host([layout=vertical]){inline-size:100%}:host(:not([layout=vertical])){block-size:100%}.container,.item-content{display:flex;block-size:100%;inline-size:100%;flex-direction:row;align-items:stretch}.content{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-items:center;justify-content:center;padding-inline:1rem;font-size:var(--calcite-font-size-0);outline:2px solid transparent;outline-offset:2px;text-decoration:none;padding-block-start:.125rem;border-block-end:.125rem solid var(--calcite-color-transparent);background-color:var(--calcite-menu-background-color, var(--calcite-internal-menu-background-color, var(--calcite-color-foreground-1)));color:var(--calcite-menu-text-color, var(--calcite-internal-menu-text-color, var(--calcite-color-text-2)))}.content:hover{border-block-end-color:var(--calcite-menu-item-accent-color, var(--calcite-color-border-2))}.content:focus{border-block-end-width:4px;outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))));padding-block-start:.25rem;border-block-end-width:.25rem}.content:active{--calcite-internal-menu-background-color: var(--calcite-color-foreground-3);--calcite-internal-menu-text-color: var(--calcite-color-text-1)}.content span{display:inline-flex}.content.layout--vertical{display:flex;inline-size:100%;justify-content:flex-start;padding-block:1rem;border-block-end:0;border-inline-end:.25rem solid var(--calcite-color-transparent)}:host([layout=vertical]) .content{padding-inline:.75rem}:host([active]) .content{--calcite-internal-menu-text-color: var(--calcite-color-text-1);border-color:var(--calcite-menu-item-accent-color, var(--calcite-color-brand))}:host([active]) .icon{--calcite-internal-menu-item-icon-color: var(--calcite-color-brand)}.icon{color:var(--calcite-menu-text-color, var(--calcite-icon-color, var(--calcite-internal-menu-item-icon-color, var(--calcite-color-text-3))))}.icon--start{margin-inline-end:.75rem}.icon--end{margin-inline-start:.75rem}:host([layout=vertical]) .icon--end{margin-inline-start:auto;padding-inline-start:.75rem}.icon--dropdown{position:relative;margin-inline-start:auto;margin-inline-end:0px;padding-inline-start:.5rem}:host([layout=vertical]) .icon--end~.icon--dropdown{margin-inline-start:.75rem}:host([layout=vertical]) .hover-href-icon{padding-inline-start:.5rem}:host([layout=vertical]) .hover-href-icon~.icon--end{margin-inline-start:.5rem}:host([layout=vertical]) .hover-href-icon~.icon--breadcrumb{margin-inline-start:.75rem}.icon--breadcrumb{margin-inline-end:0px;padding-inline-start:.5rem}:host([layout=vertical]) .icon--breadcrumb{margin-inline-start:auto}:host([layout=vertical]) .icon--breadcrumb~.icon--dropdown{margin-inline-start:.5rem}:host([layout=vertical]) .icon--end~.icon--breadcrumb{margin-inline-start:.5rem}:host([breadcrumb]) .content{padding-inline-end:.75rem}calcite-action{position:relative;block-size:auto;border-inline-start:1px solid var(--calcite-color-foreground-1);--calcite-action-background-color: var(--calcite-menu-background-color);--calcite-action-text-color: var(--calcite-menu-text-color)}calcite-action:after{position:absolute;inset-inline-start:-1px;display:block;inline-size:1px;content:"";inset-block:.75rem;background-color:var(--calcite-color-border-3)}calcite-action:hover:after{block-size:100%;inset-block:0}calcite-action:active{--calcite-action-background-color-press: var(--calcite-menu-background-color)}.content:focus~calcite-action,.content:hover~calcite-action{--calcite-action-text-color: var(--calcite-menu-text-color, var(--calcite-color-text-1))}.content:focus~calcite-action:after,.content:hover~calcite-action:after{block-size:100%;inset-block:0}.dropdown-menu-items{position:absolute;display:none;block-size:auto;min-inline-size:100%;flex-direction:column;overflow:visible;border:1px solid var(--calcite-menu-item-sub-menu-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-menu-item-sub-menu-corner-radius, var(--calcite-corner-radius));inset-block-start:100%;z-index:var(--calcite-z-index-dropdown)}.dropdown-menu-items.open{display:block}.dropdown-menu-items.nested{position:absolute;inset-block-start:-1px;transform:translate(calc(100% - 2px))}.parent--vertical{flex-direction:column}.dropdown--vertical.dropdown-menu-items{position:relative;box-shadow:none;inset-block-start:0;transform:none}.dropdown--vertical.dropdown-menu-items:last-of-type{border-inline:0}:host([layout=vertical]:last-of-type) .dropdown-menu-items{border-block-end:0}:host([slot=submenu-item]) .parent--vertical{padding-inline-start:1.5rem}.dropdown-menu-items.nested.calcite--rtl{transform:translate(calc(-100% + 2px))}.dropdown--vertical.dropdown-menu-items.nested.calcite--rtl{transform:none}.hover-href-icon{position:relative;inset-inline-end:.25rem;margin-inline-start:auto;opacity:0;transition:all var(--calcite-internal-animation-timing-medium) ease-in-out}.content:focus .hover-href-icon,.content:hover .hover-href-icon{inset-inline-end:-.25rem;opacity:1}:host([hidden]){display:none}[hidden]{display:none}`;var Rg;let lEe=(Rg=class extends gn{constructor(){super(),this.anchorEl=Fg(),this.dropdownActionEl=Fg(),this.hasSubmenu=!1,this.isTopLevelItem=!1,this.messages=dO(),this.open=!1,this.calciteInternalMenuItemKeyEvent=xo(),this.calciteMenuItemSelect=xo(),this.listenOn(window,"click",this.handleClickOut),this.listen("focusout",this.handleFocusOut),this.listen("blur",this.blurHandler),this.listen("focus",this.focusHandler)}async setFocus(){await o0(this),this.anchorEl.value.focus()}async load(){}loaded(){}handleClickOut(e){this.topLevelMenuLayout!=="vertical"&&this.hasSubmenu&&this.open&&!e.composedPath().includes(this.el)&&(this.open=!1)}handleFocusOut(e){this.topLevelMenuLayout!=="vertical"&&!this.el.contains(e.relatedTarget)&&(this.open=!1)}blurHandler(){this.isFocused=!1}clickHandler(e){(this.href&&e.target===this.dropdownActionEl.value||!this.href&&this.hasSubmenu)&&(this.open=!this.open),this.selectMenuItem(e)}focusHandler(e){const i=e.target;this.isFocused=!0,i.open&&!this.open&&(i.open=!1)}handleMenuItemSlotChange(e){this.submenuItems=Kb(e),this.submenuItems.forEach(i=>{i.topLevelMenuLayout||(i.topLevelMenuLayout=this.topLevelMenuLayout)}),this.hasSubmenu=this.submenuItems.length>0}async keyDownHandler(e){const{hasSubmenu:i,href:r,layout:n,open:s,submenuItems:o}=this,a=e.key,l=e.target===this.dropdownActionEl.value;if(!e.defaultPrevented){if(a===" "||a==="Enter")i&&(!r||r&&l)&&(this.open=!s),!(r&&l)&&a!=="Enter"&&this.selectMenuItem(e),(a===" "||r&&l)&&e.preventDefault();else if(a==="Escape"){if(s){this.open=!1;return}this.calciteInternalMenuItemKeyEvent.emit({event:e}),e.preventDefault()}else if(a==="ArrowDown"||a==="ArrowUp"){if(e.preventDefault(),(l||!r)&&i&&!s&&n==="horizontal"){this.open=!0;return}this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:s&&i})}else if(a==="ArrowLeft")e.preventDefault(),this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:!0});else if(a==="ArrowRight"){if(e.preventDefault(),(l||!r)&&i&&!s&&n==="vertical"){this.open=!0;return}this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:s&&i})}}}selectMenuItem(e){e.target!==this.dropdownActionEl.value&&this.calciteMenuItemSelect.emit()}renderIconStart(){return Pi(ki.iconStart,Me`<calcite-icon class=${`${ki.icon} ${ki.iconStart}`} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} scale=s></calcite-icon>`)}renderIconEnd(){return Pi(ki.iconEnd,Me`<calcite-icon class=${`${ki.icon} ${ki.iconEnd}`} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} scale=s></calcite-icon>`)}renderBreadcrumbIcon(e){return Pi(ki.iconBreadcrumb,Me`<calcite-icon class=${`${ki.icon} ${ki.iconBreadcrumb}`} .icon=${e==="rtl"?"chevron-left":"chevron-right"} scale=s></calcite-icon>`)}renderDropdownIcon(e){const i=e==="rtl"?"chevron-left":"chevron-right";return Pi(ki.iconDropdown,Me`<calcite-icon class=${`${ki.icon} ${ki.iconDropdown}`} .icon=${this.topLevelMenuLayout==="vertical"||this.isTopLevelItem?this.open?"chevron-up":"chevron-down":i} scale=s></calcite-icon>`)}renderDropdownAction(e){const i=e==="rtl"?"chevron-left":"chevron-right";return Pi(ki.dropdownAction,Me`<calcite-action class=${Xe(ki.dropdownAction)} .icon=${this.topLevelMenuLayout==="vertical"||this.isTopLevelItem?this.open?"chevron-up":"chevron-down":i} @click=${this.clickHandler} @keydown=${this.keyDownHandler} .text=${this.messages.open} ${lu(this.dropdownActionEl)}></calcite-action>`)}renderSubmenuItems(e){return Me`<calcite-menu class=${Xe({[ki.dropdownMenuItems]:!0,[ki.open]:this.open,[ki.nested]:!this.isTopLevelItem,[iQ.rtl]:e==="rtl",[ki.dropdownVertical]:this.topLevelMenuLayout==="vertical"})} .label=${this.messages.submenu} layout=vertical role=menu><slot name=submenu-item @slotchange=${this.handleMenuItemSlotChange}></slot></calcite-menu>`}renderHrefIcon(e){return Pi(ki.hoverHrefIcon,Me`<calcite-icon class=${Xe(ki.hoverHrefIcon)} .icon=${e==="rtl"?"arrow-left":"arrow-right"} scale=s></calcite-icon>`)}renderItemContent(e){const i=this.href&&(this.topLevelMenuLayout==="vertical"||!this.isTopLevelItem);return Me`${this.iconStart&&this.renderIconStart()||""}<div class=${Xe(ki.textContainer)}><span>${this.text}</span></div>${i&&this.renderHrefIcon(e)||""}${this.iconEnd&&this.renderIconEnd()||""}${this.breadcrumb?this.renderBreadcrumbIcon(e):null}${!this.href&&this.hasSubmenu?this.renderDropdownIcon(e):null}`}render(){const e=yP(this.el);return Me`<li class=${Xe({[ki.container]:!0,[ki.isParentVertical]:this.topLevelMenuLayout==="vertical"})} role=none><div class=${Xe(ki.itemContent)}><a .ariaCurrent=${this.isFocused?"page":!1} .ariaExpanded=${this.open} .ariaHasPopup=${this.hasSubmenu} .ariaLabel=${this.label} class=${Xe({[ki.layoutVertical]:this.layout==="vertical",[ki.content]:!0})} href=${this.href??tr} @click=${this.clickHandler} @keydown=${this.keyDownHandler} rel=${this.rel??tr} role=menuitem .tabIndex=${this.isTopLevelItem?0:-1} target=${this.target??tr} ${lu(this.anchorEl)}>${this.renderItemContent(e)}</a>${this.href&&this.hasSubmenu?this.renderDropdownAction(e):null}</div>${this.renderSubmenuItems(e)}</li>`}},Rg.properties={hasSubmenu:16,submenuItems:16,active:7,breadcrumb:7,href:1,iconEnd:3,iconFlipRtl:3,iconStart:3,isTopLevelItem:5,label:1,layout:3,messageOverrides:0,open:7,rel:3,target:3,text:1,topLevelMenuLayout:1},Rg.styles=aEe,Rg);hl("calcite-menu-item",lEe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.11 */const uEe=Jse({defaultAssetPath:"https://js.arcgis.com/map-components/4.32/",hydratedAttribute:"hydrated"}),{customElement:fO,getAssetPath:zft,setAssetPath:Uft}=uEe,cEe="modulepreload",hEe=function(t){return"/esri-devsummit-2025/"+t},$H={},J=function(e,i,r){let n=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(i.map(l=>{if(l=hEe(l),l in $H)return;$H[l]=!0;const u=l.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":cEe,u||(m.as="script"),m.crossOrigin="",m.href=l,a&&m.setAttribute("nonce",a),document.head.appendChild(m),u)return new Promise((g,w)=>{m.addEventListener("load",g),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var dEe=typeof window<"u"&&"$arcgis"in window&&typeof window.$arcgis=="object"&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function pEe(t){return t.default!==void 0}async function fEe(){if(dEe)return await window.$arcgis.import("esri/core/reactiveUtils");const t=await J(()=>Promise.resolve().then(()=>RCe),[]);return pEe(t)?t.default:t}var N5;async function Soe(){return N5??(N5=fEe()),await N5}var _oe=(t,e)=>(i,r)=>mEe(i,t,r),xoe=class extends Nse{constructor(t,e,i){super(t),this._loadAccessor=e,this._options=i,this._watchedProperties=new Map,this._isBinding={value:!0},this.setProvisionalExports(yg.makeGetterProxy(t,this._watchedProperties,this._isBinding,this.constructor.allowedPropNameMismatches)),HU(t,r=>{r&&(this._instancePropName=r)},this.exports)}hostConnected(){this._isBinding.value=!1}async hostLoad(){var a,l;this.reactiveUtils=await Soe();const t=this.component,e=this._gatherParameters(),i=((l=(a=this._options)==null?void 0:a.editConstructorProperties)==null?void 0:l.call(t,e))??e,r=i instanceof Promise?await i:i,n=t,s=typeof this._instancePropName=="string"?n[this._instancePropName]:void 0;s!=null&&s!==this.exports?(this._instance=s,s.set(r)):this._instance=await this._createInstance(r),!t.manager.destroyed&&(yg.watchComponentUpdates(this,this._instance,this._watchedProperties),yg.watchAccessorUpdates(this,this._instance,this._watchedProperties),this.exports=this._instance)}_gatherParameters(){return Object.fromEntries(Array.from(this._watchedProperties,([i,r])=>[r,this.component[i]]).filter(([,i])=>i!==void 0))}async _createInstance(t){return this._isAccessorConstructor(this._loadAccessor)?new this._loadAccessor(t):await this._loadAccessor(t)}_isAccessorConstructor(t){return"prototype"in t&&"declaredClass"in t.prototype}hostDestroy(){this._instance&&this._instance.destroy()}async reCreate(){this.hostDestroy(),await this.hostLoad()}},mEe=XU(xoe),yg={makeGetterProxy:(t,e,i,r)=>new Proxy({},{has:(n,s)=>typeof s=="string"||s in n,get:(n,s)=>{const o=Reflect.get(n,s);if(typeof s=="symbol"||s in Promise.prototype)return o;const a=s in n,l=(i==null?void 0:i.value)??!0;if(a||!l)return o;if(!e.has(s))return WU(t,u=>{u!==void 0&&e.set(u.key,s)},o)}}),watchComponentUpdates(t,e,i){function r(a,l){const u=i.get(l),p=e[u];return typeof p=="boolean"&&u!==l&&l.toLowerCase().includes("disable")?!p:p}const n=(a,l,u)=>{const p=i.get(u),m=e[p],g=typeof m=="boolean"&&p!==u&&u.toLowerCase().includes("disable");if((g?!m:s.manager.isLit?m??void 0:m)===a)return a;e[p]=g?!a:a;const O=e[p];return g?!O:O},s=t.component,o=s.manager.internals;i.forEach((a,l)=>{o.accessorGetter[l]=r,o.accessorSetter[l]=n})},watchAccessorUpdates(t,e,i){const{component:r}=t,n=r,s=e,o=yEe(e);H$e(()=>i.forEach((a,l)=>{if(o.has(a))return;const u=n[l];let p=s[a];r.manager.isLit&&(p??(p=void 0));const g=typeof u=="boolean"&&a!==l&&l.toLowerCase().includes("disable")?!u:u;g!=null&&p!==g&&(s[a]=g)})),t.onLifecycle(()=>{if(!e.destroyed)return Array.from(i,([a,l])=>t.reactiveUtils.watch(()=>s[l],()=>{const u=s[l],m=typeof u=="boolean"&&l!==a&&a.toLowerCase().includes("disable")?!u:u;Z$e(()=>{n[a]=m})},{initial:!0}))})},reEmitAccessorEvents(t,e,i,r){if(!("on"in e&&typeof e.on=="function"))return;const s=Object.entries(t.component).map(([l,u])=>{const p=u;if(!l.startsWith(r)||l===r||typeof p!="object"||p===null||!("emit"in p)||typeof p.emit!="function")return;const m=p.emit,g=l.slice(r.length);return[QU(g).toLowerCase(),m]}).filter(Ase);if(s.length===0)return;const o=e,a=()=>o;t.onLifecycle(()=>{if(!e.destroyed)return s.map(([l,u])=>i.on(a,l,u))})},async reCreate(t,e){const i=e.manager.useRefSync(t);i!==void 0&&await i.reCreate()}};function yEe(t){var r;const i=Object.entries(((r=t.__accessor__)==null?void 0:r.metadata)??{});return new Set(i.filter(([n,s])=>(s==null?void 0:s.readOnly)===!0).map(([n])=>n))}function Zr(t,e){const i=hO(),r=i.manager,n=Soe();r.onLoaded(()=>{n.then(o=>r.onLifecycle(()=>o.on(t,e,s.emit)))});const s=i.constructor.$createEvent();return s}function h(t,e,i,r){var n,s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}function Qft(t,e){return function(i,r){e(i,r,t)}}function Bft(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(p){try{u(r.next(p))}catch(m){o(m)}}function l(p){try{u(r.throw(p))}catch(m){o(m)}}function u(p){p.done?s(p.value):n(p.value).then(a,l)}u((r=r.apply(t,[])).next())})}function qft(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:i})}return e}var gEe=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Gft(t){function e(s){t.error=t.hasError?new gEe(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var i,r=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(s).then(n,function(o){return e(o),n()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}let uf;function te(t){return typeof uf[t]=="function"?uf[t]=uf[t](globalThis):uf[t]}var ise,rse,nse,sse;uf=(ise=globalThis.dojoConfig)!=null&&ise.has||(rse=globalThis.esriConfig)!=null&&rse.has?{...(nse=globalThis.dojoConfig)==null?void 0:nse.has,...(sse=globalThis.esriConfig)==null?void 0:sse.has}:{},te.add=(t,e,i,r)=>{(r||uf[t]===void 0)&&(uf[t]=e),i&&te(t)},te.cache=uf,te.add("big-integer-warning-enabled",!0),te.add("esri-deprecation-warnings",!0),te.add("esri-tests-disable-screenshots",!1),te.add("esri-tests-use-full-window",!1),te.add("esri-tests-post-to-influx",!0),te.add("esri-cim-animations-enable-status","enabled"),te.add("esri-cim-animations-spotlight",!1),te.add("esri-cim-animations-freeze-time",!1),te.add("enable-feature:multiple-highlights",!0),(()=>{var e;te.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(te.add("host-browser",t),te.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),te.add("dom",t),te("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,s=parseFloat(n);if(te.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),te.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),te.add("khtml",n.includes("Konqueror")?s:void 0),te.add("edge",parseFloat(r.split("Edge/")[1])||void 0),te.add("opr",parseFloat(r.split("OPR/")[1])||void 0),te.add("webkit",!te("wp")&&!te("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),te.add("chrome",!te("edge")&&!te("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),te.add("android",!te("wp")&&parseFloat(r.split("Android ")[1])||void 0),te.add("safari",!n.includes("Safari")||te("wp")||te("chrome")||te("android")||te("edge")||te("opr")?void 0:parseFloat(n.split("Version/")[1])),te.add("mac",n.includes("Macintosh")),!te("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));te.add(o,l),te.add("ios",l)}te("webkit")||(!r.includes("Gecko")||te("wp")||te("khtml")||te("edge")||te.add("mozilla",s),te("mozilla")&&te.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&te.add("esri-mobile",e),i&&te.add("esri-iPhone",i),te.add("esri-geolocation",!!navigator.geolocation)}te.add("esri-wasm","WebAssembly"in globalThis),te.add("esri-performance-mode-frames-between-render",20),te.add("esri-force-performance-mode",!1),te.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),te.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),te.add("esri-atomics","Atomics"in globalThis),te.add("esri-workers","Worker"in globalThis),te.add("web-feat:cache","caches"in globalThis),te.add("esri-workers-arraybuffer-transfer",!te("safari")||Number(te("safari"))>=12),te.add("workers-pool-size",8),te.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),te.add("featurelayer-simplify-payload-size-factors",[1,1,4]),te.add("featurelayer-fast-triangulation-enabled",!0),te.add("featurelayer-animation-enabled",!0),te.add("featurelayer-snapshot-enabled",!0),te.add("featurelayer-snapshot-point-min-threshold",8e4),te.add("featurelayer-snapshot-point-max-threshold",4e5),te.add("featurelayer-snapshot-point-coverage",.1),te.add("featurelayer-query-max-depth",4),te.add("featurelayer-query-pausing-enabled",!1),te.add("featurelayer-advanced-symbols",!1),te.add("featurelayer-pbf",!0),te.add("featurelayer-pbf-statistics",!1),te.add("feature-layers-workers",!0),te.add("feature-polyline-generalization-factor",1),te.add("mapview-transitions-duration",200),te.add("mapview-essential-goto-duration",200),te.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),te.add("mapserver-pbf-version-support",10.81),te.add("mapservice-popup-identify-max-tolerance",20),te.add("request-queue-concurrency-hosted",16),te.add("request-queue-concurrency-non-hosted",4),te.add("curve-densification-coarse-segments",128),te.add("curve-densification-max-segments",2e3),te.add("curve-densification-min-segments",3),te.add("curve-densification-pixels-per-segment",16),te.add("view-readyState-waiting-delay",1e3),te.add("gradient-depth-bias",.01),te.add("gradient-depth-epsilon",1e-8),te("host-webworker")||te("host-browser")&&(te.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),te.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{te.add("esri-image-decode",!0,!0,!0)}).catch(()=>{te.add("esri-image-decode",!1,!0,!0)})}return!1}),te.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();const TH=new WeakMap;function vEe(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let n=TH.get(t);n||(n=new Set,TH.set(t,n)),n.has(e)||(n.add(e),t.warn(r))}function bEe(t,e,i={}){if(te("esri-deprecation-warnings")){const{moduleName:r}=i;Zx(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function wEe(t,e,i={}){if(te("esri-deprecation-warnings")){const{moduleName:r}=i;Zx(t,`Property: ${(r?r+"::":"")+e}`,i)}}function OEe(t,e,i={}){te("esri-deprecation-warnings")&&Zx(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function Zx(t,e,i={}){if(te("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),n&&(a+=`
	 Version: ${n}`),s)if(Array.isArray(s)){a+=`
	 See for more details:`;for(const l of s)a+=`
		${l}`}else a+=`
	 See ${s} for more details.`;vEe(t,a,o)}}function Zft(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function SEe(t,e){for(const i of t)if(i!=null&&e(i))return i}function tA(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let mO=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(tA(e)){const r=this._getOrCreateGroup(i);for(const n of e)kH(n)&&r.push(n)}else kH(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(dE(e))}remove(e){if(typeof e!="string"&&tA(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(EH(this._getGroup(e)),this._groups.delete(dE(e)),this):this}removeAll(){return this._groups.forEach(EH),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(dE(e),i),i}_getGroup(e){return this._groups.get(dE(e))}};function dE(t){return t||"_default_"}function EH(t){for(const e of t)e instanceof mO?e.removeAll():e.remove()}function kH(t){return t!=null&&(!!t.remove||t instanceof mO)}function Wft(t){}function _Ee(t){return()=>t}function Xft(t){return t}let eC=class Jm{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Jm._m}getInt(){return this._seed=(Jm._a*this._seed+Jm._c)%Jm._m,this._seed}getFloat(){return this.getInt()/(Jm._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Jm._m*r}};eC._m=2147483647,eC._a=48271,eC._c=0;const xEe=1.5,Yft=1/xEe,Jft=.5;function Kft(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function vP(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function CH(t,e,i){let r,n;return i?(r=e.filter(s=>!t.some(o=>i(o,s))),n=t.filter(s=>!e.some(o=>i(o,s)))):(r=e.filter(s=>!t.includes(s)),n=t.filter(s=>!e.includes(s))),{added:r,removed:n}}function emt(t){return t&&typeof t.length=="number"}let $oe=class{constructor(){this.last=0}};const Toe=new $oe;function b4(t,e,i,r){r=r||Toe;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function $Ee(t,e,i,r){const n=t.length,s=b4(t,e,n,r);if(s!==-1)return t[s]=t[n-1],t.pop(),e}const kl=new Set;function TEe(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;kl.clear();for(let a=0;a<r;++a)kl.add(e[a]);n=n||Toe;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(kl.has(t[a])&&(s==null||s.push(t[a]),kl.delete(t[a]),t[a]=t[i-1],--i,--a,kl.size===0||i===0))return kl.clear(),i;for(let a=0;a<o;++a)if(kl.has(t[a])&&(s==null||s.push(t[a]),kl.delete(t[a]),t[a]=t[i-1],--i,--a,kl.size===0||i===0))return kl.clear(),i;return kl.clear(),i}function imt(t,e,i){const r=t.length;if(e>=r)return t.slice();const n=hQ(i),s=new Set,o=[];for(;o.length<e;){const a=Math.floor(n()*r);s.has(a)||(s.add(a),o.push(t[a]))}return o}function hQ(t){return t?(MH.seed=t,()=>MH.getFloat()):Math.random}const MH=new eC;function Eoe(t,e){const i=hQ(e);for(let r=t.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),s=t[r];t[r]=t[n],t[n]=s}return t}function koe(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function pn(t,e){return t!=null}const rmt=[];function nmt(t){return t instanceof ArrayBuffer}function dQ(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function Coe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function Moe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function pQ(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function Aoe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function fQ(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function Ioe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function bP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function wP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function EEe(t){return"buffer"in t}const Poe=1024;function smt(t){return wP(t)||bP(t)||fQ(t)||pQ(t)||dQ(t)}function omt(t){return wP(t)||bP(t)}function amt(t){return wP(t)?179769e303:bP(t)?3402823e32:Ioe(t)?4294967295:Aoe(t)?65535:Coe(t)||Moe(t)?255:fQ(t)?2147483647:pQ(t)?32767:dQ(t)?127:256}function kEe(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function q(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Noe(t);if(e!=null)return e;if(iA(t))return t.clone();if(Roe(t))return t.map(q);if(Loe(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=q(t[r]);return i}function w4(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=Noe(t);if(e!=null)return e;if(Roe(t)){let r=!0;const n=t.map(s=>{const o=w4(s);return s!=null&&o==null&&(r=!1),o});return r?n:null}if(iA(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(Loe(t))return null;const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const n=t[r],s=w4(n);if(n!=null&&s==null)return null;i[r]=s}return i}function iA(t){return typeof t.clone=="function"}function Roe(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function Loe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function AH(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Noe(t){if(dQ(t)||Coe(t)||Moe(t)||pQ(t)||Aoe(t)||fQ(t)||Ioe(t)||bP(t)||wP(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,q(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(q(i));return e}return null}function mQ(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function Doe(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&vP(t,e):t instanceof Set?e instanceof Set&&MEe(t,e):t instanceof Map?e instanceof Map&&AEe(t,e):!!AH(t)&&AH(e)&&CEe(t,e))}function CEe(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function MEe(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function AEe(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function yQ(t,e,i=!1){return Foe(t,e,i)}function t2(t,e){if(e!=null)return e[t]||Voe(t.split("."),!1,e)}function Rr(t,e,i){const r=t.split("."),n=r.pop(),s=Voe(r,!0,i);s&&n&&(s[n]=e)}function IH(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(IH(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(IH(t[i],e[i]))return!0;return!1}return t!==e}function Voe(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function Foe(t,e,i){return e?Object.keys(e).reduce((r,n)=>{let s=r[n],o=e[n];return s===o?r:s===void 0?(r[n]=q(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.slice():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{s.includes(a)||s.push(a)}):r[n]=o.slice())):o&&typeof o=="object"?r[n]=Foe(s,o,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=o),r)},t||{}):t}var ose;const Ht={apiKey:void 0,applicationName:"",applicationUrl:(ose=globalThis.location)==null?void 0:ose.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(yQ(Ht,globalThis.esriConfig,!0),delete Ht.has),!Ht.assetsPath){{const t="4.32";Ht.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Ht.defaultAssetsPath=Ht.assetsPath}const IEe=/\{([^}]+)\}/g;function PH(t){return t??""}function yO(t,e){return e?t.replaceAll(IEe,typeof e=="object"?(i,r)=>PH(t2(r,e)):(i,r)=>PH(e(r))):t}function lmt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e!=null&&e.includes(i)?i:`\\${i}`)}function joe(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let RH;function PEe(t){return RH??(RH=new DOMParser),RH.parseFromString(t||"","text/html").body.innerText||""}function umt(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function cmt(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const LH={info:0,warn:1,error:2,none:3};let pe=class Go{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,Go._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Go.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,Go._loggers.get(e)||new Go({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!Go._throttlingDisabled){const n=LEe(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=Go._tickCounter)return;this._loggedMessages[e].set(n,Go._tickCounter),Go._scheduleTickCounterIncrement()}for(const n of Ht.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",REe)}_matchLevel(e){const i=Ht.log.level||"warn";return LH[this._parentWithMember("level",i)]<=LH[e]}static _scheduleTickCounterIncrement(){Go._tickCounterScheduled||(Go._tickCounterScheduled=!0,Promise.resolve().then(()=>{Go._tickCounter++,Go._tickCounterScheduled=!1}))}};function REe(t,e,...i){console[t](`[${e}]`,...i)}function LEe(...t){return joe(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}pe._loggers=new Map,pe._tickCounter=0,pe._tickCounterScheduled=!1,pe._throttlingDisabled=!1;function i2(t,e){if(t==null)throw new Error(e??"value is None")}function bi(t){return t==null||t.destroy(),null}function hmt(t){return t==null||t.dispose(),null}function qi(t){return t==null||t.remove(),null}function Tw(t){return t==null||t.abort(),null}function dmt(t){return t==null||t.release(),null}function NEe(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function DEe(t,e){let i;return t.some((r,n)=>(i=e(r,n),i!=null)),i??void 0}const zoe=Symbol("Accessor-beforeDestroy"),VEe={remove:()=>{}};function Bt(t){return t?{remove(){t&&(t(),t=void 0)}}:VEe}function Uoe(t){t.forEach(e=>e==null?void 0:e.remove())}function pmt(t){Uoe(t),t.length=0}function r2(t){return Bt(()=>Uoe(t))}function fmt(t){return Bt(()=>{var e;return(e=t())==null?void 0:e.remove()})}function mmt(t){return Bt(()=>t==null?void 0:t.abort())}function FEe(t){return Bt(t!=null?()=>t.destroy():void 0)}function Io(t){return t.__accessor__??null}function jEe(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function tC(t,e,i){return i?rA(t,e,{policy:i,path:""}):rA(t,e,null)}function rA(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const s=n;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=q(e[s]),r;let l=r[s],u=e[s];if(l===u)return r;if(Array.isArray(u)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(p=>{l.includes(p)||l.push(p)}));else if(u&&typeof u=="object")if(i){const p=i.path;i.path=o,r[s]=rA(l,u,i),i.path=p}else r[s]=rA(l,u,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=u);return r},t||{}):t}function Qoe(t){return Array.isArray(t)?t:t.split(".")}function NH(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function zEe(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...NH(i));return e}return NH(t)}function Boe(t,e,i,r){const n=zEe(e);if(n.length!==1){const s=n.map(o=>r(t,o,i));return r2(s)}return r(t,n[0],i)}function qoe(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=Io(e);return jEe(r,i)?r.get(i):e[i]}function Goe(t,e,i){if(t==null)return t;const r=qoe(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:Goe(r,e,i+1)}function n2(t,e,i=0){return typeof e!="string"||e.includes(".")?Goe(t,Qoe(e),i):qoe(e,t)}function qs(t,e){return n2(t,e)}function DH(t,e){return n2(e,t)!==void 0}var wo;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED",t[t.DESTROYED=3]="DESTROYED"})(wo||(wo={}));function s2(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=q(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function OP(t,e){const i=s2(t);let r=i[e];return r||(r=i[e]={}),r}function UEe(t,e){return tC(t,e,BEe)}const QEe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function BEe(t){return QEe.test(t)?"replace":"merge"}function qEe(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function GEe(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let a0=class O4{constructor(e,i,r,n=1,s=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(O4.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):GEe(i)&&i.acquire(...e),i}release(e){e&&!O4.test.disabled&&(this._releaseFunction?this._releaseFunction(e):qEe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};a0.test={disabled:!1};let ZEe=class{constructor(e,i){this._observers=e,this._observer=i}remove(){koe(this._observers,this._observer)}},Zoe=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return HEe;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)n=!0;else if(a===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new ZEe(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const HEe=Bt();var ht;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(ht||(ht={}));const S4=ht.USER+1;function cf(t){switch(t){case"defaults":return ht.DEFAULTS;case"service":return ht.SERVICE;case"portal-item":return ht.PORTAL_ITEM;case"web-scene":return ht.WEB_SCENE;case"web-map":return ht.WEB_MAP;case"link-chart":return ht.LINK_CHART;case"user":return ht.USER;default:return null}}function nA(t){switch(t){case ht.DEFAULTS:return"defaults";case ht.SERVICE:return"service";case ht.PORTAL_ITEM:return"portal-item";case ht.WEB_SCENE:return"web-scene";case ht.WEB_MAP:return"web-map";case ht.LINK_CHART:return"link-chart";case ht.USER:return"user"}}function WEe(t){return nA(t)}var si;(function(t){t[t.Dirty=1]="Dirty",t[t.Overridden=2]="Overridden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(si||(si={}));let SP=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const sA=new SP,ES=[];let rx=sA;function rt(t){rx.onAccessed(t)}let iC=!1,rC=!1;function gd(t,e,i){if(iC)return gQ(t,e,i);let r=null;return Hoe(t),r=e.call(i),Woe(),r}function XEe(t,e){return gd(sA,t,e)}function gQ(t,e,i){const r=iC;iC=!0,Hoe(t);let n=null;try{n=e.call(i)}catch(s){rC&&pe.getLogger("esri.core.accessorSupport.tracking").error(s)}return Woe(),iC=r,n}function Hoe(t){rx=t,ES.push(t)}function Woe(){const t=ES.length;if(t>1){const e=ES.pop();rx=ES[t-2],e.onTrackingEnd()}else if(t===1){const e=ES.pop();rx=sA,e.onTrackingEnd()}else rx=sA}function Xoe(t,e){if(e.flags&si.DepTrackingInitialized)return;e.flags|=si.DepTrackingInitialized;const i=rC;rC=!1,e.flags&si.AutoTracked?gQ(e.trackingTarget,e.metadata.get,t):Yoe(t,e),rC=i}const YEe=[];function Yoe(t,e){e.flags&si.ExplicitlyTracking||(e.flags|=si.ExplicitlyTracking,gQ(e.trackingTarget,()=>{const i=e.metadata.dependsOn||YEe;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=Qoe(r);for(let s=0,o=t;s<n.length&&o!=null&&typeof o=="object";++s)o=VH(o,n[s],s!==n.length-1)}else VH(t,r,!1)}),e.flags&=~si.ExplicitlyTracking)}function VH(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=Io(t);if(n){const s=n.propertiesByName.get(r);s&&(rt(s),Xoe(t,s))}return i?t[r]:void 0}let FH=class extends Zoe{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new SP(this),this.flags=0,this.flags=si.Dirty|(i.nonNullable?si.NonNullable:0)|(i.hasOwnProperty("value")?si.HasDefaultValue:0)|(i.get===void 0?si.DepTrackingInitialized:0)|(i.dependsOn===void 0?si.AutoTracked:0)}destroy(){this.flags&si.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&rt(this);const i=e.store,r=this.propertyName,n=this.flags,s=i.get(r);if(n&si.Computing||~n&si.Dirty&&i.has(r))return s;this.flags|=si.Computing;const o=e.host;let a;n&si.AutoTracked?a=gd(this.trackingTarget,this.metadata.get,o):(Yoe(o,this),a=this.metadata.get.call(o)),this.flags|=si.DepTrackingInitialized,i.set(r,a,ht.COMPUTED);const l=i.get(r);return l===s?this.flags&=~si.Dirty:XEe(this.commit,this),this.flags&=~si.Computing,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~si.Dirty,this.onCommitted()}onInvalidated(){~this.flags&si.Overridden&&(this.flags|=si.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}},JEe=class Joe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Joe;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,q(r))}),i}get(e){return this._values.get(e)}originOf(){return ht.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function pE(t,e,i){return t!==void 0}function jH(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&si.NonNullable)||(r.lifecycle,wo.INITIALIZING,!1))}let KEe=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=wo.INITIALIZING,this.store=new JEe,this.mutable=!0,this._origin=ht.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new FH(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=wo.CONSTRUCTING}constructed(){this.lifecycle=wo.CONSTRUCTED}destroy(){this.lifecycle=wo.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==wo.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);this.mutable&&rt(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&si.HasDefaultValue)return"defaults"}return nA(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(pE(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);pE(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!pE(n))return"";const s=new SP,o=gd(s,()=>{var u;return(u=n.metadata.get)==null?void 0:u.call(e)});let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const l=s.accessed??new Set;if(l.size===0)return a;r+="  ";for(const u of l)u instanceof FH&&(a+=`${r}${u.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(pE(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&si.Overridden)}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&si.Overridden&&(i.flags&=~si.Overridden,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!jH(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:a}=s;if(D5.release(s),!o)return;i=a}r.flags|=si.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!jH(r,e,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:l}=o;if(D5.release(o),!a)return;i=l}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=cf(e)}getDefaultOrigin(){return nA(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==wo.INITIALIZING?this._origin:ht.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;n.has(s,r)&&mQ(i,n.get(s))&&~e.flags&si.Overridden&&r===n.originOf(s)||(e.invalidate(),n.set(s,i,r),e.commit(),Xoe(this.host,e))}_cast(e,i){const r=D5.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},eke=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const D5=new a0(eke);function tke(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(t2(r,e)??"").toString())}let Koe=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&tke(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},G=class eae extends Koe{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return q(i)}catch{return"[object]"}}))}}catch(e){throw pe.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new eae(e.name,e.message,e.details)}};G.prototype.type="error";function oA(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))oA(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(-1,1)[0];return void oA(qs(t,n),s,i)}const r=t.__accessor__;r!=null&&ike(e,r),t[e]=i}}function ike(t,e){if(te("esri-unknown-property-errors")&&!rke(t,e))throw new G("set:unknown-property",nke(t,e))}function rke(t,e){return e.metadata[t]!=null}function nke(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let ske;function oke(){return ske}var zH;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(zH||(zH={}));function ake(t){t.length=0}let Qs=class{constructor(e=50,i=50){this._pool=new a0(Array,void 0,ake,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return V5.acquire()}static release(e){return V5.release(e)}static prune(){V5.prune()}};const V5=new Qs(100);let tae=class extends a0{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const fE=[];function aA(t){fE.push(t),fE.length===1&&queueMicrotask(()=>{const e=fE.slice();fE.length=0;for(const i of e)i()})}let nx=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var _4;(function(t){const e=(s,o,a,l)=>{let u=o,p=o;const m=a>>>1,g=s[u-1];for(;p<=m;){p=u<<1,p<a&&l(s[p-1],s[p])<0&&++p;const w=s[p-1];if(l(w,g)<=0)break;s[u-1]=w,u=p}s[u-1]=g},i=(s,o)=>s<o?-1:s>o?1:0;function r(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let p=a>>>1;p>o;p--)e(s,p,a,l);const u=o+1;for(let p=a-1;p>o;p--){const m=s[o];s[o]=s[p],s[p]=m,e(s,u,p,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let p=a>>>1;p>o;p--)e(s,p,a,l),yield;const u=o+1;for(let p=a-1;p>o;p--){const m=s[o];s[o]=s[p],s[p]=m,e(s,u,p,l),yield}}t.sort=r,t.iterableSort=n})(_4||(_4={}));const UH=_4,lke=1.5,uke=1.1;let gg=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new $oe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>QH(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,QH(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=b4(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(b4(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=TEe(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){UH.sort(this.data,0,this.length,e)}iterableSort(e){return UH.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)if(e.call(i,r[s]))return r[s]}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function QH(t){t.data.length>lke*t.length&&(t.data.length=Math.floor(t.length*uke))}function cke(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Bt(()=>t.clearTimeout(r))}}}const gO=cke(globalThis);function _P(t){return hke(t)||iae(t)}function hke(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function iae(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function o2(t,e,i){if(!_P(t))throw new TypeError("target is not a Evented or EventTarget object");return iae(t)?dke(t,e,i):t.on(e,i)}function dke(t,e,i,r){if(Array.isArray(e)){const n=e.slice();for(const s of n)t.addEventListener(s,i,r);return Bt(()=>{for(const s of n)t.removeEventListener(s,i,r)})}return t.addEventListener(e,i,r),Bt(()=>t.removeEventListener(e,i,r))}function rae(t,e,i){if(!_P(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=o2(t,e,n=>{r.remove(),i.call(t,n)});return r}function Wt(t="Aborted"){return new G("AbortError",t)}function rr(t,e="Aborted"){if(ca(t))throw Wt(e)}function a2(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function ca(t){const e=a2(t);return e!=null&&e.aborted}function uc(t){if(vn(t))throw t}function BH(t){if(!vn(t))throw t}function Co(t,e){const i=a2(t);if(i!=null){if(!i.aborted)return rae(i,"abort",()=>e());e()}}function vQ(t,e){const i=a2(t);if(i!=null)return rr(i),rae(i,"abort",()=>e(Wt()))}function nae(t,e){return a2(e)==null?t:new Promise((i,r)=>{let n=Co(e,()=>r(Wt()));const s=()=>{n=qi(n)};t.then(s,s),t.then(i,r)})}function vn(t){return(t==null?void 0:t.name)==="AbortError"}async function Hx(t){try{return await t}catch(e){if(!vn(e))throw e;return}}async function bQ(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(o=>t[o]),n=await bQ(r),s={};return i.map((o,a)=>s[o]=n[a]),s}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function pke(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function Emt(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function sae(t,e=void 0,i){const r=new AbortController;return Co(i,()=>r.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(e)},t);Co(r,()=>{o&&(clearTimeout(o),s(Wt()))})})}function kmt(t,e,i,r){const n=i&&"abort"in i?i:null;r!=null||n||(r=i);let s=setTimeout(()=>{s=0,n==null||n.abort()},e);const o=()=>r||new G("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(s===0)throw o();return clearTimeout(s),a},a=>{throw clearTimeout(s),s===0?o():a})}function fke(t,e){const i=new AbortController,r=setTimeout(()=>i.abort(),e);return Co(t,()=>{i.abort(),clearTimeout(r)}),{...t,signal:i.signal}}function Rc(t){return t&&typeof t.then=="function"}function x4(t){return Rc(t)?t:Promise.resolve(t)}function l2(t,e=-1){let i,r,n,s,o=null;const a=(...l)=>{if(i){r=l,s&&s.reject(Wt()),s=ha();const g=s.promise;if(o){const w=o;o=null,w.abort()}return g}if(n=s||ha(),s=null,e>0){const g=new AbortController;i=x4(t(...l,g.signal));const w=i;sae(e).then(()=>{i===w&&(s?g.abort():o=g)})}else i=1,i=x4(t(...l));const u=()=>{const g=r;r=n=i=o=null,g!=null&&a(...g)},p=i,m=n;return p.then(u,u),p.then(m.resolve,m.reject),m.promise};return a}function ha(){let t,e;const i=new Promise((n,s)=>{t=n,e=s}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>gO.setTimeout(()=>r.reject(s),n),r.promise=i,r}async function qH(t){await Promise.resolve(),rr(t)}function Cmt(t){return t}function mke(t){return 1e3*t}function Mmt(t){return t}function Amt(t){return .001*t}let yke=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},gke=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},$4=0;const q1={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},T4=["prepare","preRender","render","postRender","update","finish"],E4=[],jg=new gg;let vke=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,oae()}};function bke(){vg!=null&&(cancelAnimationFrame(vg),vg=requestAnimationFrame(wQ))}function oae(){vg==null&&($4=performance.now(),vg=requestAnimationFrame(wQ))}const lA={frameTasks:jg,willDispatch:!1,clearFrameTasks:wke,dispatch:lae,executeFrameTasks:Oke,reschedule:bke};function u2(t){const e=new gke(t);return E4.push(e),lA.willDispatch||(lA.willDispatch=!0,aA(lae)),e}function Ew(t){const e=new yke(t);return jg.push(e),oae(),new vke(e)}let vg=null;function wke(t=!1){jg.forAll(e=>{e.removed=!0}),t&&aae()}function wQ(){const t=performance.now();vg=null,vg=jg.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(wQ):null,lA.executeFrameTasks(t)}function Oke(t){const e=t-$4;$4=t;const i=1e3/60,r=Math.max(0,e-i);q1.time=t,q1.frameDuration=i-r;for(let n=0;n<T4.length;n++){const s=performance.now(),o=T4[n];jg.forAll(a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(q1.elapsedFrameTime=performance.now()-t,q1.deltaTime=a.ticks===0?0:e,(l=a.phases[o])==null||l.call(a,q1)))}),$ke[n].push(performance.now()-s)}aae(),Tke.push(performance.now()-t)}const mE=new gg;function aae(){jg.forAll(t=>{t.removed&&mE.push(t)}),jg.removeUnorderedMany(mE.data,mE.length),mE.clear()}function lae(){for(;E4.length;){const t=E4.shift();t.isActive&&t.callback()}lA.willDispatch=!1}function Ske(t=1,e){const i=ha(),r=()=>{ca(e)?i.reject(Wt()):t===0?i():(--t,aA(()=>r()))};return r(),i.promise}function _ke(t){return Ske(1,t)}async function xke(t){await _ke(t),await new Promise(e=>requestAnimationFrame(()=>{t!=null&&t.aborted||e()}))}const $ke=T4.map(t=>new nx(t)),Tke=new nx("total");function uae(t,e){for(const i of t.values())if(e(i))return!0;return!1}function uA(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function GH(t,e){return e!=null&&t.add(e),t}function OQ(t,e){const i=new Set;return uA(i,t),uA(i,e),i}function Eke(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function Lmt(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function Nmt(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function kke(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function Cke(t,e){return kke(OQ(t,e),Eke(t,e))}let Mke=0;function nC(){return++Mke}let xP=class extends SP{constructor(e){super(new Ake(e)),this._observer&&ZH.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&ZH.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},Ake=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Ike}};const ZH=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function Ike(){}let ew=!1;const cA=[];function cae(t,e){let i=new xP(s),r=null,n=!1;function s(){if(!i||n)return;if(ew)return void dae(s);const a=r;i.clear(),ew=!0,n=!0,r=gd(i,t),n=!1,ew=!1,e(r,a),pae()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=gd(i,t),n=!1,Bt(o)}function hae(t,e){let i=new xP(n),r=null;function n(){e(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=gd(i,t),r):null}return o(),Bt(s)}function SQ(t,e){let i=!1,r=!1;const n=!!(e!=null&&e.sync);let s=new xP(()=>{i||r||(r=!0,n?o():queueMicrotask(o))});function o(){r=!1,s&&!i&&(ew?dae(o):(s.clear(),ew=!0,i=!0,gd(s,t),i=!1,ew=!1,pae()))}function a(){s&&(s.destroy(),s=null)}return i=!0,gd(s,t),i=!1,Bt(a)}function dae(t){cA.includes(t)||cA.unshift(t)}function pae(){for(;cA.length;)cA.pop()()}var sx;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(sx||(sx={}));let Wx=class{constructor(){this.uid=nC(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(sx.Untracked,e,i,r,n,s,mQ)}static acquireTracked(e,i,r,n){return this.pool.acquire(sx.Tracked,e,i,r,null,null,n)}notify(e,i){this.type===sx.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,o,a){this.uid=nC(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=nC(),this.removed=!0}};Wx.pool=new tae(Wx);const sC=new Qs,cd=new Set;let hA;function dA(t){cd.delete(t),cd.add(t),hA||(hA=u2(Lke))}function Pke(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function Rke(t){for(const e of cd.values())e.target===t&&(e.removed=!0)}function Lke(){let t=10;for(;hA&&t--;){hA=null;const e=Nke(),i=sC.acquire();for(const r of e){const n=r.uid;Pke(r),n===r.uid&&r.removed&&i.push(r)}for(const r of cd)r.removed&&(i.push(r),cd.delete(r));for(const r of i)Wx.pool.release(r);sC.release(i),sC.release(e),k4.forEach(r=>r())}}function Nke(){const t=sC.acquire();t.length=cd.size;let e=0;for(const i of cd)t[e]=i,++e;return cd.clear(),t}const k4=new Set;function Dke(t){return k4.add(t),Bt(()=>k4.delete(t))}function Vke(t,e,i){let r=Boe(t,e,i,(n,s,o)=>{let a,l,u=hae(()=>n2(n,s),(p,m)=>{var g;((g=n.__accessor__)==null?void 0:g.lifecycle)===wo.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=Wx.acquireUntracked(p,o,m,n,s),l=a.uid),dA(a))});return Bt(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,dA(a)),a=null),r=u=null})});return r}function Fke(t,e,i){const r=Boe(t,e,i,(n,s,o)=>{let a=!1;return cae(()=>n2(n,s),(l,u)=>{n.__accessor__.lifecycle!==wo.DESTROYED?a||(a=!0,mQ(u,l)||o.call(n,l,u,s,n),a=!1):r.remove()})});return r}function jke(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==wo.DESTROYED?r?Fke(t,e,i):Vke(t,e,i):Bt()}function zke(t,e,i){let r,n,s=hae(t,(o,a)=>{r&&r.uid!==n?s.remove():(r||(r=Wx.acquireTracked(o,e,a,i),n=r.uid),dA(r))});return Bt(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,dA(r)),r=null),s=null})}function Uke(t,e,i){let r=!1;return cae(t,(n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)})}function Qke(t,e,i=!1,r=Doe){return i?Uke(t,e,r):zke(t,e,r)}function HH(t){return uae(cd,e=>e.oldValue===t)}function Bke(t,e){for(const i of t.values())if(e(i))return!0;return!1}function jmt(t,e){for(const i of t.values())if(e(i))return i;return null}function c2(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}function zmt(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const tw=()=>pe.getLogger("esri.core.accessorSupport.ensureTypes");function qke(t){return t==null?t:new Date(t)}function Gke(t){return t==null?t:!!t}function h2(t){return t==null?t:t.toString()}function Bs(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function $P(t){return t==null?t:Math.round(parseFloat(t))}function Zke(t){return null}function Hke(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function fae(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function pA(t,e){return e!=null&&t&&!(e instanceof t)}function mae(t){return t&&"isCollection"in t}function WH(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function Wke(t,e){if(!(e!=null&&e.constructor)||!mae(e.constructor))return C4(t,e)?e:new t(e);const i=WH(t.prototype.itemType),r=WH(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(C4(t,e),e):new t(e):e}function C4(t,e){return!!fae(e)&&(tw().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+TP(t)+"'"),!0)}function vO(t,e){return e==null?e:mae(t)?Wke(t,e):pA(t,e)?C4(t,e)?e:new t(e):e}function TP(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const Xke=new WeakMap;function Yke(t){switch(t){case Number:return e=>Bs(e);case kt:return $P;case Boolean:return Gke;case String:return h2;case Date:return qke;case bO:return Zke;default:return c2(Xke,t,()=>vO.bind(null,t))}}function _r(t,e){const i=Yke(t);return arguments.length===1?i:i(e)}function Xx(t,e,i){return arguments.length===1?Xx.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function Jke(t,e){return arguments.length===1?Xx(i=>_r(t,i)):Xx(i=>_r(t,i),e)}function yae(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>yae(t,e-1,r)):t(i)}function fA(t,e,i){if(arguments.length===2)return s=>fA(t,e,s);if(!i)return i;i=yae(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function Kke(t,e,i){return arguments.length===2?fA(r=>_r(t,r),e):fA(r=>_r(t,r),e,i)}function gae(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function M4(t,e){if(arguments.length===2)return M4(t).call(null,e);const i=new Set,r=t.filter(a=>typeof a!="function"),n=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,p=u==="string"||u==="number";return p&&(i.has(a)||n.some(m=>u==="string"&&m===String||u==="number"&&m===Number))||u==="object"&&n.some(m=>!pA(a,m))?a:(p&&r.length?(s||(s=r.map(m=>typeof m=="string"?`'${m}'`:`${m}`).join(", ")),tw().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(m=>TP(m)).join(", ")),tw().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):tw().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function fu(t,e){if(arguments.length===2)return fu(t).call(null,e);const i={},r=[],n=[];for(const l in t.typeMap){const u=t.typeMap[l];i[l]=_r(u),r.push(TP(u)),n.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!pA(t.base,l)||l==null)return l;const u=a(l)||t.defaultKeyValue,p=i[u];if(!p)return tw().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!pA(t.typeMap[u],l))return l;if(typeof t.key=="string"&&!fae(l)){const m={};for(const g in l)g!==t.key&&(m[g]=l[g]);return p(m)}return p(l)}}let kt=class{},bO=class{};const Bmt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function eCe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function vae(t){switch(t.type){case"native":return _r(t.value);case"array":return Xx(vae(t.value));case"one-of":return tCe(t);default:return null}}function tCe(t){let e=null;return(i,r)=>I4(i,t)?i:(e==null&&(e=A4(t)),tw().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function A4(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case kt:return"integer";case Date:return"date";case bO:return"null";default:return TP(t.value)}case"array":return`array of ${A4(t.value)}`;case"one-of":{const e=t.values.map(i=>A4(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function I4(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case kt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case bO:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!I4(i,e.value));case"one-of":return e.values.some(i=>I4(t,i))}}function f(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=OP(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&pe.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,u=typeof s=="string"?null:s.overridable===!0;let p;n.dependsOn=[l],n.get=function(){let m=qs(this,l);if(typeof m=="function"){p||(p=l.split(".").slice(0,-1).join("."));const g=qs(this,p);g&&(m=m.bind(g))}return m},n.readOnly||(n.set=u?function(m){this._override(i,m)}:function(m){oA(this,l,m)})}const o=t.type,a=t.types;if(!n.cast){let l;o?l=iCe(o):a&&(l=Array.isArray(a)?Xx(fu(a[0])):fu(a)),t.cast=rCe(t.cast,l)}UEe(n,t),t.range&&(n.cast=Hke(n.cast,t.range))}}function bae(t,e,i){const r=OP(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function iCe(t){let e=0,i=t;if(eCe(t))return vae(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(gae(r))return e===0?M4(r):fA(M4(r),e);if(e===1)return Jke(r);if(e>1)return Kke(r,e);const n=t;return n.from?n.from:_r(n)}function rCe(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}function nCe(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(s=>{e[s]=n}),delete e[r]}}}let ll=class extends Koe{constructor(e,i,r){super(e,i,r)}};ll.prototype.type="warning";function wae(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const P4=()=>pe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function XH(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||aCe(t)&&Rr("read.reader",wO(t),e))}function wO(t){var i,r;const e=t.ndimArray??0;if(e>1)return oCe(t);if(e===1)return YH(t);if("type"in t&&Sae(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,s=YH(typeof n=="function"?{type:n}:{types:n});return(o,a,l)=>{const u=s(o,a,l);return u&&new t.type(u)}}return _Q(t)}function _Q(t){return"type"in t?sCe(t.type):lCe(t.types)}function sCe(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void P4().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function Oae(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>Oae(t,n,i,r-1)):t(e,void 0,i)}function oCe(t){const e=_Q(t),i=Oae.bind(null,e),r=t.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=i(n,o,r);let a=r,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)n=[n];return n}}function YH(t){const e=_Q(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function Sae(t){if(!wae(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?xQ(e.Type):_ae(e.Type))}function aCe(t){return"types"in t?_ae(t.types):xQ(t.type)}function xQ(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Sae(t))}function _ae(t){for(const e in t.typeMap)if(!xQ(t.typeMap[e]))return!1;return!0}function lCe(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void P4().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=uCe(t));const l=t.key;if(typeof l!="string")return;const u=n[l],p=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!p){const g=`Type '${u||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new ll(`${i}:unsupported`,g,{definition:n,context:o})),void P4().error(g)}const m=new p;return m.read(n,o),r?r(m):m}}function uCe(t){var i,r;const e={};for(const n in t.typeMap){const s=t.typeMap[n],o=s2(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;if((i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){e[a.json.type[0]]=s;continue}const l=(r=a.json)==null?void 0:r.write;if(!(l!=null&&l.writer)){e[n]=s;continue}const u=l.target,p=typeof u=="string"?u:t.key,m={};l.writer(n,m,p),m[p]&&(e[m[p]]=s)}return e}function cCe(t){if(t.json||(t.json={}),KH(t.json),eW(t.json),JH(t.json),t.json.origins)for(const e in t.json.origins)KH(t.json.origins[e]),eW(t.json.origins[e]),JH(t.json.origins[e]);return!0}function JH(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function KH(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function eW(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function tW(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&wae(t.type))?e.write.writer=pCe:i>1?e.write.writer=fCe(i):e.types?Array.isArray(e.types)?e.write.writer=dCe(e.types[0]):e.write.writer=hCe(e.types):e.write.writer=Yx}function hCe(t){return(e,i,r,n)=>e?xae(e,t,n)?Yx(e,i,r,n):void 0:Yx(e,i,r,n)}function xae(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new G(`${r}:unsupported`,n,{definition:t,context:i})),pe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function dCe(t){return(e,i,r,n)=>!e||!Array.isArray(e)?Yx(e,i,r,n):Yx(e.filter(s=>xae(s,t,n)),i,r,n)}function Yx(t,e,i,r){Rr(i,mA(t,r),e)}function mA(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?yA(t):t}function yA(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function pCe(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(s=>mA(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[mA(t,r)],Rr(i,n,e)}function $ae(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>$ae(r,e,i-1)):mA(t,e)}function fCe(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=$ae(e,n,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}Rr(r,s,i)}}function mCe(t,e){return $Q(t,"any",e==null?void 0:e.origin)}function R4(t,e){return $Q(t,"read",e==null?void 0:e.origin)}function Tae(t,e){return $Q(t,"write",e==null?void 0:e.origin)}function $Q(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}function yCe(t){var i;const e=gCe(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r],s=n.types?vCe(n):e;XH(s,n,!1),n.types&&!n.write&&((i=t.json.write)!=null&&i.enabled)&&(n.write={...t.json.write}),tW(s,n)}XH(e,t.json,!0),tW(e,t.json)}function gCe(t){return t.json.types?L4(t.json):t.type?Eae(t):L4(t)}function vCe(t){return t.type?Eae(t):L4(t)}function Eae(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!gae(i);)i=i[0],e++;return{type:i,ndimArray:e}}function L4(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function bCe(t){cCe(t)&&(nCe(t),yCe(t))}const F5=new Set,j5=new Set;function A(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,OCe(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!F5.has(n.initialize)&&(F5.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!j5.has(n.destroy)&&(j5.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);F5.clear(),j5.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const u=this[zoe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let p=0;p<r.length;p++)r[p].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=s2(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function wCe(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&rt(r);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function OCe(t){const e=t.prototype,i=s2(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];bCe(s),r[n]={enumerable:!0,configurable:!0,get:wCe(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?iW("read-only",n):a.lifecycle===wo.CONSTRUCTED&&s.constructOnly?iW("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const iW=(t,e)=>{pe.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var kae,Cae;function SCe(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Lu=Symbol("Accessor-Handles"),N4=Symbol("Accessor-Initialized");let Ce=class oC{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}s2(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...u){const p=this.inherited;let m;this.inherited=function(...g){if(s.prototype[a])return s.prototype[a].apply(this,g)};try{m=l.apply(this,u)}catch(g){throw this.inherited=p,g}return this.inherited=p,m}:e[a]}for(const a in i){const l=SCe(i[a]);f(l)(o.prototype,a)}return A(r)(o)}static freeze(e){return e instanceof oC?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof oC?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var r;if(this[kae]=null,this[Cae]=!1,this.constructor===oC)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new KEe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[N4]=!0}initialize(){}[zoe](){this[Lu]=bi(this[Lu])}destroy(){var e;this.destroyed||(Rke(this),this.__accessor__.destroy(),(e=oke())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[N4]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===wo.DESTROYED||!1}commitProperty(e){qs(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return oA(this,e,i),this}watch(e,i,r){return bEe(pe.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),jke(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}(this[Lu]??(this[Lu]=new mO)).add(e,i)}removeHandles(e){var i;(i=this[Lu])==null||i.remove(e)}removeAllHandles(){var e;(e=this[Lu])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[Lu])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[Lu])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};kae=Lu,Cae=N4;function _Ce(t,e,i){return bQ(t.map((r,n)=>e.apply(i,[r,n])))}async function xCe(t,e,i){return(await bQ(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function TQ(t){return{ok:!0,value:t}}function EQ(t){return{ok:!1,error:t}}function $Ce(t){return t!=null&&t.ok===!0?t.value:null}function TCe(t){return t!=null&&t.ok===!1?t.error:null}async function EP(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return TQ(await t)}catch(e){return EQ(e)}}async function ECe(t){try{return TQ(await t)}catch(e){return uc(e),EQ(e)}}function d2(t,e){return new fp(t,e)}let fp=class extends Ce{get value(){return $Ce(this._result)}get error(){return TCe(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Tw(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=TQ(n),this._cleanup()},n=>{this._result=EQ(n),this._cleanup()}),this._abortHandle=Co(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=qi(this._abortHandle),this._abortController=null}};h([f()],fp.prototype,"value",null),h([f()],fp.prototype,"error",null),h([f()],fp.prototype,"finished",null),h([f()],fp.prototype,"promise",void 0),h([f()],fp.prototype,"_result",void 0),fp=h([A("esri.core.asyncUtils.ReactiveTask")],fp);let ul=class Mae{constructor(){this._emitter=new Mae.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var u;let o=(u=this._listenersMap)==null?void 0:u.get(n);if(!o)return!1;const a=this._target||this;let l=!1;for(const p of o.slice()){const m="deref"in p?p.deref():p;m?m==null||m.call(a,s):l=!0}return l&&(o=o.filter(p=>!("deref"in p)||p.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return r2(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),Bt(()=>{var u;const a=(u=this._listenersMap)==null?void 0:u.get(n),l=(a==null?void 0:a.indexOf(s))??-1;l>=0&&a.splice(l,1)})}once(n,s){const o=this.on(n,a=>{o.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,a)});return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=h([A("esri.core.Evented")],n),n};let i=class extends Ce{constructor(){super(...arguments),this._emitter=new ul.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=h([A("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(ul);var ti;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(ti||(ti={}));function kQ(t){return(e,i)=>{e[i]=t}}let p2=class extends Zoe{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var Jh;let kCe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},CCe=class{constructor(e,i,r,n,s){this.target=e,this.added=i,this.removed=r,this.start=n,this.deleteCount=s}};const Ia=new a0(kCe,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function rW(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function z5(t){return t?t instanceof Gh?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function U5(t){if(t!=null&&t.length)return t[0]}function MCe(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function Aae(t,e,i,r){e&&e.forEach((n,s,o)=>{t.push(n),Aae(t,i.call(r,n,s,o),i,r)})}const tp=new Set,ip=new Set,rp=new Set,Q5=new Map;let ACe=0,Gh=Jh=class extends ul.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Jh}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new p2,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:ACe++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Jh?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return rt(this._observable),this._items}set items(t){this._emitBeforeChanges(ti.ADD)||(this._splice(0,this.length,z5(t)),this._emitAfterChanges(ti.ADD))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t))}on(t,e){if(this.destroyed)return Bt();if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Bt(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return this._emitter.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,r=this.on(t,n=>{var s;(s=i())==null||s.call(null,n),r.remove()});return r}add(t,e){if(rt(this._observable),this._emitBeforeChanges(ti.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(ti.ADD),this}addMany(t,e=this._items.length){if(rt(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(ti.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,z5(t)),this._emitAfterChanges(ti.ADD),this}at(t){if(rt(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(rt(this._observable),!this.length||this._emitBeforeChanges(ti.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(ti.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return rt(this._observable),this._createNewInstance({items:this._items.map(q)})}concat(...t){rt(this._observable);const e=t.map(z5);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(rt(this._observable),!this.length||this._emitBeforeChanges(ti.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)t.call(e,i[n],n,i);this._emitAfterChanges(ti.REMOVE)}destroyAll(){this.drain(rW)}destroyMany(t){const e=this.removeMany(t);return e.forEach(rW),e}every(t,e){return rt(this._observable),this._items.every(t,e)}filter(t,e){rt(this._observable);const i=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:i})}find(t,e){return rt(this._observable),this._items.find(t,e)}findIndex(t,e){return rt(this._observable),this._items.findIndex(t,e)}flatten(t,e){rt(this._observable);const i=[];return Aae(i,this,t,e),new Jh(i)}forEach(t,e){return rt(this._observable),this._items.forEach(t,e)}getItemAt(t){return rt(this._observable),this._items[t]}getNextIndex(t){rt(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return rt(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return rt(this._observable),this._items.indexOf(t,e)}join(t=","){return rt(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return rt(this._observable),this._items.lastIndexOf(t,e)}map(t,e){rt(this._observable);const i=this._items.map(t,e);return new Jh({items:i})}reorder(t,e=this.length-1){rt(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(ti.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(ti.MOVE)}return t}}pop(){if(rt(this._observable),!this.length||this._emitBeforeChanges(ti.REMOVE))return;const t=U5(this._splice(this.length-1,1));return this._emitAfterChanges(ti.REMOVE),t}push(...t){return rt(this._observable),this._emitBeforeChanges(ti.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(ti.ADD)),this.length}reduce(t,e){rt(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){rt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return rt(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(rt(this._observable),t<0||t>=this.length||this._emitBeforeChanges(ti.REMOVE))return;const e=U5(this._splice(t,1));return this._emitAfterChanges(ti.REMOVE),e}removeMany(t){if(rt(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(ti.REMOVE))return[];const e=t instanceof Jh?t.toArray():t,i=this._items,r=[],n=e.length;for(let s=0;s<n;s++){const o=e[s],a=i.indexOf(o);if(a>-1){const l=1+MCe(e,i,s+1,a+1),u=this._splice(a,l);u&&u.length>0&&r.push.apply(r,u),s+=l-1}}return this._emitAfterChanges(ti.REMOVE),r}reverse(){if(rt(this._observable),this._emitBeforeChanges(ti.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(ti.MOVE),this}shift(){if(rt(this._observable),!this.length||this._emitBeforeChanges(ti.REMOVE))return;const t=U5(this._splice(0,1));return this._emitAfterChanges(ti.REMOVE),t}slice(t=0,e=this.length){return rt(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return rt(this._observable),this._items.some(t,e)}sort(t){if(rt(this._observable),!this.length||this._emitBeforeChanges(ti.MOVE)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(ti.MOVE),this}_requiresSort(t=(e,i)=>e===i?0:e<i?-1:1){const e=this.length-1;for(let i=0;i<e;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,e,...i){rt(this._observable);const r=(e?ti.REMOVE:0)|(i.length?ti.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(r),n}toArray(){return rt(this._observable),this._items.slice()}toJSON(){return rt(this._observable),this.toArray()}toLocaleString(){return rt(this._observable),this._items.toLocaleString()}toString(){return rt(this._observable),this._items.toString()}unshift(...t){return rt(this._observable),!t.length||this._emitBeforeChanges(ti.ADD)||(this._splice(0,0,t),this._emitAfterChanges(ti.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=u2(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=Ia.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(t,0,s),t+=1,l-=1,u-=1);Ia.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Ia.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);Ia.release(a)}}if(i!=null&&i.length){if(n){const p=[];for(const m of i){const g=n.ensureType(m);g==null&&m!=null||p.push(g)}i=p}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=t===this.length;if(a||l){const p=Ia.acquire();p.target=this,p.cancellable=!0;const m=Ia.acquire();m.target=this,m.cancellable=!1;for(const g of i)a?(p.reset(g),this.emit("before-add",p),p.defaultPrevented||(u?r.push(g):r.splice(t++,0,g),this._set("length",r.length),l&&(m.reset(g),this.emit("after-add",m)))):(u?r.push(g):r.splice(t++,0,g),this._set("length",r.length),m.reset(g),this.emit("after-add",m));Ia.release(m),Ia.release(p)}else{if(u)for(const p of i)r.push(p);else r.splice(t,0,...i);this._set("length",r.length)}}if((i!=null&&i.length||o!=null&&o.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const a=new CCe(this,i,o,t,e);this.emit("after-splice",a)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=Ia.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,Ia.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Ia.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Ia.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;tp.clear(),ip.clear(),rp.clear();for(const{added:l,removed:u}of i){if(l)if(rp.size===0&&ip.size===0)for(const p of l)tp.add(p);else for(const p of l)ip.has(p)?(rp.add(p),ip.delete(p)):rp.has(p)||tp.add(p);if(u)if(rp.size===0&&tp.size===0)for(const p of u)ip.add(p);else for(const p of u)tp.has(p)?tp.delete(p):(rp.delete(p),ip.add(p))}const r=Qs.acquire();tp.forEach(l=>{r.push(l)});const n=Qs.acquire();ip.forEach(l=>{n.push(l)});const s=this._items,o=e.items,a=Qs.acquire();if(rp.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),e.listeners&&(r.length||n.length||a.length)){const l={target:this,added:r,removed:n,moved:a},u=e.listeners.length;for(let p=0;p<u;p++){const m=e.listeners[p];m.removed||m.callback.call(this,l)}}Qs.release(r),Qs.release(n),Qs.release(a)}tp.clear(),ip.clear(),rp.clear()}};Gh.ofType=t=>{if(!t)return Jh;if(Q5.has(t))return Q5.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends Jh{};return h([kQ({Type:t,ensureType:typeof t=="function"?_r(t):fu(t)})],i.prototype,"itemType",void 0),i=h([A(`esri.core.Collection<${e}>`)],i),Q5.set(t,i),i},h([f()],Gh.prototype,"_updating",void 0),h([f()],Gh.prototype,"length",void 0),h([f()],Gh.prototype,"items",null),h([f({readOnly:!0})],Gh.prototype,"updating",null),Gh=Jh=h([A("esri.core.Collection")],Gh);const Te=Gh;function Oe(t,e,i={}){return CQ(t,e,i,Pae)}function Kn(t,e,i={}){return CQ(t,e,i,Rae)}function CQ(t,e,i={},r){let n=null;const s=i.once?(o,a)=>{r(o)&&(qi(n),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(n=Qke(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return n}function Ss(t,e,i,r={}){let n=null,s=null,o=null;function a(){var p;n&&s&&(s.remove(),(p=r.onListenerRemove)==null||p.call(r,n),n=null,s=null)}function l(p){r.once&&r.once&&qi(o),i(p)}const u=Oe(t,(p,m)=>{var g;a(),_P(p)&&(n=p,s=o2(p,e,l),(g=r.onListenerAdd)==null||g.call(r,p))},{sync:r.sync,initial:!0});return o=Bt(()=>{u.remove(),a()}),o}function ICe(t,e){return Iae(t,null,e)}function l0(t,e){return Iae(t,Rae,e)}function Iae(t,e,i){if(ca(i))return Promise.reject(Wt());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function s(){n=qi(n)}return new Promise((o,a)=>{n=r2([Co(i,()=>{s(),a(Wt())}),CQ(t,l=>{s(),o(l)},{sync:!1,once:!0},e??Pae)])})}function Pae(t){return!0}function Rae(t){return!!t}function Lae(t,e,i={}){let r=!1;const n=Oe(t,(s,o)=>{r||e(s,o)},i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}function Nae(t,e){const i=new Te,r=Ss(t,"after-splice",({added:n,start:s,deleteCount:o})=>{const a=i.splice(s,o);for(const l of a)l.remove();if(n!=null&&n.length){const l=n.map(e);i.addMany(l,s)}},{sync:!0,onListenerRemove:()=>i.drain(n=>n.remove()),onListenerAdd:n=>i.addMany(n.items.map(e))});return i.addHandles(r),i}function PCe(t,e){const i=new Te,r=Nae(t,a=>d2(async l=>{const u=await e(a,l);if(ca(l))throw u.remove(),Wt();return u})),n=()=>null,s=async a=>{const l=await a.promise,u=r.indexOf(a);u<0||i.splice(u,1,l)};i.addMany(r.items.map(n));for(const a of r)Hx(s(a));const o=r.on("after-splice",({added:a,start:l,deleteCount:u})=>{const p=i.splice(l,u);for(const m of p)m==null||m.remove();if(a!=null&&a.length){i.addMany(a.map(n),l);for(const m of a)Hx(s(m))}});return i.addHandles([FEe(r),o]),i}const mu={sync:!0},It={initial:!0},Us={sync:!0,initial:!0},RCe=Object.freeze(Object.defineProperty({__proto__:null,autorun:SQ,initial:It,mapCollection:Nae,mapCollectionAsync:PCe,on:Ss,once:ICe,pausable:Lae,sync:mu,syncAndInitial:Us,watch:Oe,when:Kn,whenOnce:l0},Symbol.toStringTag,{value:"Module"})),Dae=t=>{let e=class extends t{clone(){var l;const i=Io(this);i2(i,"unable to clone instance of non-accessor class");const r=i.metadata,n=i.store,s={},o=new Map;for(const u in r){const p=r[u],m=n==null?void 0:n.originOf(u),g=p.clonable;if(p.readOnly||g===!1||m!==ht.USER&&m!==ht.DEFAULTS&&m!==ht.WEB_MAP&&m!==ht.WEB_SCENE)continue;const w=this[u];let O=null;O=typeof g=="function"?g(w):g==="reference"?w:w4(w),w!=null&&O==null||(m===ht.DEFAULTS?o.set(u,O):s[u]=O)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const u=(l=Io(a))==null?void 0:l.store;if(u)for(const[p,m]of o)u.set(p,m,ht.DEFAULTS)}return a}};return e=h([A("esri.core.Clonable")],e),e};let kS=class extends Dae(Ce){};kS=h([A("esri.core.Clonable")],kS),function(t){t.ClonableMixin=Dae}(kS||(kS={}));const ft=kS;let Km=class extends ft{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};h([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Km.prototype,"row",void 0),h([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Km.prototype,"column",void 0),h([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Km.prototype,"rows",void 0),h([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Km.prototype,"columns",void 0),Km=h([A("esri.CameraLayout")],Km);const Vae=Km,nW=new Float32Array(1);function Jmt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Po(t,e,i){return Math.min(Math.max(t,e),i)}function Kmt(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function CS(t,e,i){return t+(e-t)*i}function eyt(t,e,i,r,n){return CS(r,n,(t-e)/(i-e))}function kP(t){return t*Math.PI/180}function Fae(t){return 180*t/Math.PI}function tyt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function iyt(t){return Math.acos(Po(t,-1,1))}function LCe(t){return Math.asin(Po(t,-1,1))}function hu(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function jae(t,e,i=1e-6){return!hu(t,e,i)&&t>e}function D4(t,e,i=1e-6){return!hu(t,e,i)&&t<e}function NCe(t,e,i=1e-6){return hu(t,e,i)||t>e}const gA=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function V4(t){return gA.setFloat64(0,t),gA.getBigInt64(0)}function DCe(t){return gA.setBigInt64(0,t),gA.getFloat64(0)}const aC=BigInt("1000000"),VCe=zae(1);function zae(t){const e=V4(t=Math.abs(t)),i=DCe(e<=aC?aC:e-aC);return Math.abs(t-i)}function ryt(t,e,i=VCe){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&zae(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=V4(t),n=V4(e);return r<0!=n<0?!1:!((r<n?n-r:r-n)>aC)}function nyt(t){return Uae(Math.max(-sW,Math.min(t,sW)))}function Uae(t){return nW[0]=t,nW[0]}function syt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(hu(e,1)&&hu(i,1)&&hu(r,1))}const sW=Uae(34028234663852886e22);function oyt(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let MQ=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return oW(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return Po(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+F4(this.range,e-i,r)}minimalMonotonic(e,i,r){return oW(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function oW(t,e,i,r,n=0,s=!1){return(r-=n)<e?r+=F4(t,e-r):r>i&&(r-=F4(t,r-i)),s&&r===i&&(r=e),r+n}function F4(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const lyt=new MQ(0,2*Math.PI),uyt=new MQ(-Math.PI,Math.PI),Qae=new MQ(0,360);let FCe=class Bae{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Bae;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,q(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??ht.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===ht.DEFAULTS){const n=this._values.get(e);if((n==null?void 0:n.origin)!=null&&n.origin>r)return}this._values.set(e,new jCe(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===ht.DEFAULTS?e:ht.USER}},jCe=class{constructor(e,i){this.value=e,this.origin=i}};function qae(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),ht.DEFAULTS)});const r=t.metadata;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),ht.DEFAULTS)})}function zCe(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&DH(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.indexOf(e)===0&&DH(n,i))return!0;return!1}function UCe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function QCe(t,e,i,r,n){let s=R4(e[i],n);UCe(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=R4(e[o],n),zCe(s,i,r)&&(t[o]=!0)}function BCe(t,e,i,r){const n=i.metadata,s=mCe(n[e],r),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const Gae={origin:"service"};function Zae(t,e,i=Gae){if(!e||typeof e!="object")return;const r=Io(t),n=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))QCe(s,n,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=R4(n[o],i).read,l=a==null?void 0:a.source;let u;u=l&&typeof l=="string"?n2(e,l):e[o],a!=null&&a.reader&&(u=a.reader.call(t,u,e,i)),u!==void 0&&r.set(o,u)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||BCe(t,o,r,i)}r.setDefaultOrigin("user")}function Hae(t,e,i,r=Gae){var s;const n={...r,messages:[]};i(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||t.loaded?r!=null&&r.messages&&r.messages.push(o):t.loadWarnings.push(o)})}function qCe(t,e,i,r,n){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,r,s,i,n),s}function Wae(t,e,i,r,n,s){if(!(r!=null&&r.write))return!1;const o=qs(t,i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,s??void 0);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new G("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&pe.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===ht.DEFAULTS)&&GCe(t,i,s,r,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<cf(s.origin))}function GCe(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(t,e,i??void 0);return vP(o,n)}return!1}return s===n}function ZCe(t,e,i,r){const n=Io(t),s=n.metadata,o=Tae(s[e],r);return!!o&&Wae(t,n,e,o,i,r)}function Xae(t,e,i){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return tC(e,t.toJSON(i));const r=Io(t),n=r.metadata;for(const a in n){const l=Tae(n[a],i);if(!Wae(t,r,a,l,void 0,i))continue;const u=qs(t,a),p=qCe(t,l,l.write&&typeof l.write.target=="string"?l.write.target:a,u,i);Object.keys(p).length>0&&(e=tC(e,p),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>tC(e,p,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:WEe(r.store.originOf(a)),newOrigin:i.origin}))}return e}const Yae=t=>{let e=class extends t{constructor(...i){super(...i);const r=Io(this),n=r.store,s=new FCe;r.store=s,qae(r,n,s)}read(i,r){Zae(this,i,r)}write(i,r){return Xae(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return HCe.call(this,i,r)}};return e=h([A("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function HCe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let MS=class extends Yae(Ce){};MS=h([A("esri.core.JSONSupport")],MS),function(t){function e(i){return i&&typeof i=="object"&&"toJSON"in i&&typeof i.toJSON=="function"}t.JSONSupportMixin=Yae,t.isSerializable=e}(MS||(MS={}));const K=MS,WCe=Object.prototype.toString;function XCe(t){const e="__accessorMetadata__"in t?_r(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return YCe.apply(this,i)}}function YCe(t,e,i,r){OP(t,e).cast=r}function JCe(t){return(e,i)=>{OP(e,t).cast=e[i]}}function Rt(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&WCe.call(t[0])==="[object Function]"?XCe(t[0]):t.length===1&&typeof t[0]=="string"?JCe(t[0]):void 0}function ve(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const u=bae(s,l,n);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],i&&(u.read.source=(u.read.source||[]).concat(i))})}}function we(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const u=bae(s,l,n);u.write&&typeof u.write=="object"||(u.write={}),i&&(u.write.target=i),u.write.writer=a[o]}}}let nt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=KCe(e),this.apiValues=aW(this._apiToJSON),this.jsonValues=aW(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&Rr(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function KCe(t){const e={};for(const i in t)e[t[i]]=i;return e}function aW(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function dt(){return function(t,e){return new nt(t,{ignoreUnknown:!0,...e})}}let AQ=class{constructor(e,i,r,n,s,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const dr=new AQ(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),vc=new AQ(3396190,1/169.8944472236118,23e4,6e4,.111),Nf=new AQ(1737400,0,0,0,0),IQ=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,eMe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function lW(t){const e=t==null?void 0:t.match(IQ);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,o=null,a=null;const{devext:l,qaext:u,www:p}=eMe;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=p);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=p);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function tMe(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function Jae(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function Kae(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function iMe(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const rMe=()=>pe.getLogger("esri.core.urlUtils"),OO=Ht.request,uW="esri/config: esriConfig.request.proxyUrl is not set.",ele=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,tle=/^\s*http:/i,nMe=/^\s*https:/i,sMe=/^\s*file:/i,oMe=/:\d+$/,aMe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,lMe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),uMe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let bg=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(lMe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(uMe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const yE={},cMe=new bg(Ht.applicationUrl);let vs=cMe;const hMe=dMe();let PQ=hMe;const RQ=()=>vs,myt=()=>PQ;function dMe(){const t=vs.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${vs.scheme}://${vs.host}${vs.port!=null?`:${vs.port}`:""}`}${e}`}function xr(t){if(!t)return null;const e={path:null,query:null},i=new bg(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=LQ(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function LQ(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function Jx(t,e){return t?Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e==null?void 0:e[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>K.isSerializable(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):K.isSerializable(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function ile(t=!1){let e,i=OO.proxyUrl;if(typeof t=="string"){e=ole(t);const r=CP(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw rMe().warn(uW),new G("urlUtils:proxy-not-set",uW);return e&&z4()&&(i=jQ(i)),xr(i)}function pMe(t,e=!1){const i=CP(t);let r,n;if(i){const s=NQ(i.proxyUrl);r=s.path,n=s.query?LQ(s.query):null}else if(e){const s=ile(t);r=s.path,n=s.query}if(r){const s=xr(t);t=r+"?"+s.path;const o=Jx({...n,...s.query});o&&(t=`${t}?${o}`)}return t}const G1={path:"",query:""};function NQ(t){const e=t.indexOf("?");return e!==-1?(G1.path=t.slice(0,e),G1.query=t.slice(e+1)):(G1.path=t,G1.query=null),G1}function rle(t){return t=(t=bA(t=_Me(t=NQ(t).path),!0)).toLowerCase()}function fMe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:rle(t.urlPrefix)},i=OO.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;n=s;break}o.indexOf(r)===0&&(n=s+1)}return i.splice(n,0,e),n}function CP(t){const e=OO.proxyRules,i=rle(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function mMe(t,e){if(!t||!e)return!1;t=vA(t),e=vA(e);const i=lW(t),r=lW(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&zg(t,e,!0)}function nle(t,e){return t=vA(t),e=vA(e),bA(t)===bA(e)}function vA(t){const e=(t=_s(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function j4(t,e=OO.interceptors){const i=r=>r==null||r instanceof RegExp&&r.test(t)||typeof r=="string"&&t.startsWith(r);if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function zg(t,e,i=!1){if(!t||!e)return!1;const r=Q4(t),n=Q4(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function DQ(t){if(typeof t=="string"){if(!la(t))return!0;t=Q4(t)}if(zg(t,vs))return!0;const e=OO.trustedServers||[];for(let i=0;i<e.length;i++){const r=yMe(e[i]);for(let n=0;n<r.length;n++)if(zg(t,r[n]))return!0}return!1}function yMe(t){return yE[t]||(FQ(t)||_c(t)?yE[t]=[new bg(na(t))]:yE[t]=[new bg(`http://${t}`),new bg(`https://${t}`)]),yE[t]}function na(t,e=PQ,i){return _c(t)?i!=null&&i.preserveProtocolRelative?t:vs.scheme==="http"&&vs.authority===aa(t).slice(2)?`http:${t}`:`https:${t}`:FQ(t)?t:kw(t[0]==="/"?SMe(e):e,t)}function VQ(t,e=PQ,i){if(t==null||!la(t))return t;const r=_s(t),n=r.toLowerCase(),s=_s(e).toLowerCase().replace(/\/+$/,""),o=i?_s(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return t;const a=(m,g,w)=>(w=m.indexOf(g,w))===-1?m.length:w;let l=a(n,"/",n.indexOf("//")+2),u=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(u=l+1,l!==n.length);)l=a(n,"/",l+1);if(u===-1||o&&u<o.length)return t;t=r.slice(u);const p=s.slice(u-1).replaceAll(/[^/]+/g,"").length;if(p>0)for(let m=0;m<p;m++)t=`../${t}`;else t=`./${t}`;return t}function _s(t){return t=TMe(t=$Me(t=xMe(t=na(t=t.trim()))))}function kw(...t){const e=t.filter(pn);if(!(e!=null&&e.length))return;const i=[];if(la(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),wMe(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function aa(t,e=!1){if(t==null||MP(t)||$d(t))return null;let i=t.indexOf("://");if(i===-1&&_c(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=bA(t,!0)),t}function la(t){return _c(t)||FQ(t)}function MP(t){return t!=null&&t.slice(0,5)==="blob:"}function $d(t){return t!=null&&t.slice(0,5)==="data:"}function gMe(t){const e=Df(t);return e!=null&&e.isBase64?Kae(e.data):null}function yyt(t){return iMe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const vMe=/^data:(.*?)(;base64)?,(.*)$/;function Df(t){const e=t.match(vMe);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function sle(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function gyt(t){return(await fetch(t)).blob()}function vyt(t){const e=gMe(t);if(!e)return null;const i=Df(t);return new Blob([e],{type:i.mediaType})}function _c(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function FQ(t){return t!=null&&ele.test(t)}function ole(t){return t!=null&&nMe.test(t)||vs.scheme==="https"&&_c(t)}function bMe(t){return t!=null&&tle.test(t)||vs.scheme==="http"&&_c(t)}function wMe(t){return t!=null&&sMe.test(t)}function jQ(t){return _c(t)?`https:${t}`:t.replace(tle,"https:")}function OMe(){return vs.scheme==="http"}function z4(){return vs.scheme==="https"}function bA(t,e=!1){return _c(t)?t.slice(2):(t=t.replace(ele,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function SMe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function zQ(t){let e=0;if(la(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function byt(t,e){if(!t)return"";const i=xr(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(n,"")}function _Me(t){return t.endsWith("/")?t:`${t}/`}function ale(t){return t.replace(/\/+$/,"")}function xMe(t){if(/^https?:\/\//i.test(t)){const e=NQ(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function $Me(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function TMe(t){const e=OO.httpsDomains;if(!bMe(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),oMe.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return OMe()&&r===vs.authority&&!aMe.test(t)||(z4()&&r===vs.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||z4()&&!CP(t))&&(t=jQ(t)),t}function U4(t,e,i){if(!(e&&i&&t&&la(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function Q4(t){return typeof t=="string"?new bg(na(t)):(t.scheme||(t.scheme=vs.scheme),t)}function wyt(t){return EMe.test(t)}function lle(t,e){const i=xr(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function ule(t,e,i){const r=xr(t),n=r.query||{};return n[e]=String(i),`${r.path}?${Jx(n)}`}function lC(t,e){if(!e)return t;const i=xr(t),r=i.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const n=Jx(r);return n?`${i.path}?${n}`:i.path}function Oyt(t){if(t==null)return null;const e=t.match(cle);return e?e[2]:null}function cW(t){if(t==null)return null;const e=t.match(cle);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function Syt(t){return typeof t=="string"?Df(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(Df(r.result)),r.onerror=n=>i(n)})}const cle=/([^.]*)\.([^/]*)$/,EMe=/(^data:image\/svg|\.svg$)/i,hle="20250306",dle="5ba011c05d762f56d1eec9a1208f6102770f1ce6";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const ple="4.32";let Ye,UQ=ple;UQ="4.32.7";function _yt(t){Ye=t}function kMe(t){const e=Ye==null?void 0:Ye.findCredential(t);return e!=null&&e.token?ule(t,"token",e.token):t}te("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),te("host-webworker");function Vf(t,e){var r;const i=(r=e==null?void 0:e.url)==null?void 0:r.path;if(t&&i&&(t=na(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=VQ(t,e.portalItem.itemUrl);n!=null&&CMe.test(n)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return(t=B4(t,e==null?void 0:e.portal))&&AP.test(t)?BQ(t):t}function f2(t,e,i=Kx.YES){var n,s;if((t=t&&AP.test(t)?mle(t):t)==null)return t;!la(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let r=na(t);if(e){const o=((n=e.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=e.url)==null?void 0:s.path);if(o){const a=B4(o,e.portal),l=B4(r,e.portal);r=VQ(l,a,a),r!=null&&r!==l&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=fle(r,e==null?void 0:e.portal),la(r)&&(r=_s(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!la(r)&&!$d(r)&&i===Kx.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function QQ(t,e,i){return Vf(t,i)}function Ug(t,e,i,r){const n=f2(t,r);n!==void 0&&(e[i]=n)}const AP=/\/items\/([^/]+)\/resources\/(.*)/,CMe=/^\.\/resources\//;function MMe(t){const e=(t==null?void 0:t.match(AP))??null;return(e==null?void 0:e[1])??null}function AMe(t){const e=(t==null?void 0:t.match(AP))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=cW(i);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=cW(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function fle(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?U4(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function B4(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=RQ();return zg(r,`${r.scheme}://${i}`)?U4(t,e.portalHostname,i):U4(t,i,e.portalHostname)}function BQ(t){if(!t)return t||null;let e=t;return e&&Ye&&!Ye.findCredential(e)&&(e=Jae(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function mle(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Ye&&!Ye.findCredential(e)&&(e=Jae(e)),e}var Kx;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(Kx||(Kx={}));const xyt=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Kx},ensureMainOnlineDomain:fle,fromCDNUrl:mle,fromJSON:Vf,itemIdFromResourceUrl:MMe,prefixAndFilenameFromResourceUrl:AMe,read:QQ,toCDNUrl:BQ,toJSON:f2,write:Ug},Symbol.toStringTag,{value:"Module"})),yle={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},gle=Object.values(yle),vle=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${gle.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),IMe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${gle.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),PMe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function $yt(t){return vle.test(t)}function Ff(t){if(t==null)return null;const e=xr(t),i=(e==null?void 0:e.path.match(vle))||(e==null?void 0:e.path.match(IMe));if(!i)return null;const[,r,n,s,o]=i,a=n.indexOf("/");return{title:qQ(a!==-1?n.slice(a+1):n),serverType:yle[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function RMe(t){const e=xr(t).path.match(PMe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function qQ(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function LMe(t,e){const i=[];if(t){const r=Ff(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=qQ(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function wA(t){let e=aa(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")))}function NMe(t,e){return t&&ale(lle(t,e))}function DMe(t){let{url:e}=t;if(!e)return{url:e};e=lle(e,t.logger);const i=xr(e),r=Ff(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=RMe(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:ale(e),layerId:n}}function VMe(t,e,i,r,n){Ug(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=kw(r.url,i,t.layerId.toString()))}function Tyt(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function Eyt(t){var r;if(!t)return!1;const e=new bg(na(t)),i=(r=e.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const FMe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function jMe(t){const e=aa(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!FMe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function GQ(t,e){return!(!e&&!Ht.apiKey||!jMe(t))}function zMe(t,e,i=!1,r){return new Promise((n,s)=>{if(ca(r))return void s(hW());let o=()=>{u(),s(new Error(`Unable to load ${e}`))},a=()=>{const p=t;u(),n(p)},l=()=>{if(!t)return;const p=t;u(),p.src="",s(hW())};const u=()=>{te("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,r!=null&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",l),te("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))})}function hW(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const ble="Timeout exceeded";function UMe(){return new Error(ble)}function kyt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===ble}function QMe(t){Ht.request.crossOriginNoCorsDomains||(Ht.request.crossOriginNoCorsDomains={});const e=Ht.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[aa(i)??""]=0:(e[aa("http://"+i)??""]=0,e[aa("https://"+i)??""]=0)}function BMe(t){const e=Ht.request.crossOriginNoCorsDomains;if(e){let i=aa(t);if(i)return i=i.toLowerCase(),!zg(i,RQ())&&e[i]<Date.now()-36e5}return!1}async function qMe(t){var n;const e=xr(t);t=e.path,((n=e.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=Ht.request.crossOriginNoCorsDomains,r=aa(t);i&&r&&(i[r.toLowerCase()]=Date.now())}async function bt(t,e){var w;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=LQ(e.query.toString().replaceAll("+"," ")));const i=$d(t),r=MP(t);r||i||(t=_s(t));const n={url:t,requestOptions:{...e}},s=O=>({data:O,getAllHeaders:Cw,getHeader:Cw,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=j4(t,Wa.internalInterceptors);if(o){const O=await pW(o,n);if(O!=null)return s(O)}let a=j4(t);if(a){const O=await pW(a,n);if(O!=null)return s(O);a.after||a.error||(a=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(te("host-webworker")||te("host-node")))throw du("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw du("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw du("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await XMe(),OA)return OA.execute(t,e);const l=new AbortController,u=Co(e,()=>l.abort()),p={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:Wa.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},m=e.useRequestQueue?tAe(p):G4(p),g=await m.finally(()=>u==null?void 0:u.remove());return(w=a==null?void 0:a.after)==null||w.call(a,g),g}let OA;const Wa=Ht.request,wle="FormData"in globalThis,GMe=new Set([499,498,403,401]),ZMe=new Set(["COM_0056","COM_0057","SB_0008"]),HMe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Cw=()=>null,SA=Symbol();function WMe(t){const e=aa(t);e&&!bt._corsServers.includes(e)&&bt._corsServers.push(e)}function dW(t){const e=aa(t);return!e||e.endsWith(".arcgis.com")||bt._corsServers.includes(e)||DQ(e)}function du(t,e,i,r){let n="Error";const s={url:i.url,requestOptions:i.requestOptions,getAllHeaders:Cw,getHeader:Cw,ssl:!1};if(e instanceof G)return e.details?(e.details=q(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const o=r&&(()=>Array.from(r.headers)),a=r&&(p=>r.headers.get(p)),l=r==null?void 0:r.status,u=e.message;u&&(n=u),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||l||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?s.messages=[e.details]:s.messages=e.details,s.raw=SA in e?e[SA]:e}return vn(e)?Wt():new G(t,n,s)}async function XMe(){te("host-webworker")&&!OA&&(OA=await J(()=>import("./request-D_IZbutB.js"),[]))}async function q4(){Ye||await J(()=>import("./IdentityManager-TaYTw4GO.js"),[])}async function YMe(t){var a;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let s=null,o=null;if(wle&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Wa.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken&&GQ(e)&&(i.query||(i.query={}),i.query.token=Ht.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!Ole(e)&&!ca(r)){let l;i.authMode==="immediate"?(await q4(),l=await Ye.getCredential(e,{signal:r}),t.credential=l):i.authMode==="no-prompt"?(await q4(),l=await Ye.getCredential(e,{prompt:!1,signal:r}).catch(()=>{}),t.credential=l):Ye&&(l=Ye.findCredential(e)),l&&(t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function Ole(t){return HMe.some(e=>e.test(t))}async function JMe(t){let e=t.params.url;const i=t.params.requestOptions,r=t.fetchOptions??{},n=MP(e)||$d(e),s=i.responseType||"json",o=n?0:i.timeout!=null?i.timeout:Wa.timeout;let a=!1;if(!n){t.useSSL&&(e=jQ(e));let g={...i.query};t.credentialToken&&(g.token=t.credentialToken);let w=Jx(g);te("esri-url-encodes-apostrophe")&&(w=w.replaceAll("'","%27"));const O=e.length+1+w.length;let _;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||O>Wa.maxUrlLength;const x=i.useProxy||!!CP(e);if(x){const T=ile(e);_=T.path,!a&&_.length+1+O>Wa.maxUrlLength&&(a=!0),T.query&&(g={...T.query,...g})}if(r.method==="HEAD"&&(a||x)){if(a)throw O>Wa.maxUrlLength?du("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):du("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(x)throw du("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=lC(e,g):(r.body=Jx(g),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):e=lC(e,g),x&&(t.useProxy=!0,e=`${_}?${e}`),g.token&&wle&&r.body instanceof FormData&&!tMe(e)&&r.body.set("token",g.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!zg(e,RQ())){if(DQ(e))t.withCredentials=!0;else if(Ye){const T=Ye.findServerInfo(e);T!=null&&T.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(r.credentials="include",BMe(e)&&await qMe(a?lC(e,g):e))}let l,u,p=0,m=!1;o>0&&(p=setTimeout(()=>{m=!0,t.controller.abort()},o));try{if(i.responseType==="native-request-init")u=r,u.url=e,i.signal?u.signal=i.signal:delete u.signal;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||KMe(i.headers)||!n&&!t.useProxy&&Wa.proxyUrl&&!dW(e)){if(bt._beforeFetch&&await bt._beforeFetch(e,r),l=await fetch(e,r),bt._afterFetch&&await bt._afterFetch(l),t.useProxy||WMe(e),i.responseType==="native")u=l;else if(r.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(p&&(clearTimeout(p),p=0),s==="json"||s==="xml"||s==="document")if(u)switch(s){case"json":u=JSON.parse(u);break;case"xml":u=fW(u,"application/xml");break;case"document":u=fW(u,"text/html")}else u=null;if(u){if(s==="array-buffer"||s==="blob"){const g=l.headers.get("Content-Type");if(g&&/application\/json|text\/plain/i.test(g)&&u[s==="blob"?"size":"byteLength"]<=750)try{const w=await new Response(u).json();w.error&&(u=w)}catch{}}s==="image"&&u instanceof Blob&&(u=await mW(URL.createObjectURL(u),t,!0))}}else{u=await l.text();try{u=JSON.parse(u)}catch{}}}else u=await mW(e,t)}catch(g){if(g.name==="AbortError")throw m?UMe():Wt("Request canceled");if(!(!l&&g instanceof TypeError&&Wa.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||dW(e))throw g;t.redoRequest=!0,fMe({proxyUrl:Wa.proxyUrl,urlPrefix:aa(e)??""})}finally{p&&clearTimeout(p)}return[l,u]}async function pW(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=du("request:interceptor",n,e)}if((r instanceof Error||r instanceof G)&&(i=du("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function KMe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function fW(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}bt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],bt._beforeFetch=void 0,bt._afterFetch=void 0;const eAe=new Map;async function tAe(t){const e=rAe(t.params.url);if(!e)return G4(t);const{QueueProcessor:i}=await J(()=>import("./QueueProcessor-BinXpWME.js"),[]);return c2(eAe,e.origin,()=>{const n=e.isHosted?te("request-queue-concurrency-hosted"):te("request-queue-concurrency-non-hosted");return new i({concurrency:n,process:s=>{if(ca(s.params.requestOptions))throw du("",Wt("Request canceled"),s.params);return G4(s)}})}).push(t)}async function G4(t){var s,o;let e,i;await YMe(t);try{do[e,i]=await JMe(t);while(!await iAe(t,e,i))}catch(a){const l=du("request:server",a,t.params,e);throw l.details.ssl=t.useSSL,(s=t.interceptor)!=null&&s.error&&t.interceptor.error(l),l}const r=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!DQ(r)){const a=aa(r,!0);a&&Wa.trustedServers.push(a)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&QMe(i.authorizedCrossOriginNoCorsDomains)}const n=t.credential;if(n&&Ye){const a=Ye.findServerInfo(n.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const u=Ye.findCredential(l,n.userId);u&&Ye._getIdenticalSvcIdx(l,u)===-1&&u.resources.unshift(l)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):Cw,getHeader:e?a=>e.headers.get(a):Cw,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function iAe(t,e,i){var u;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[SA]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[SA]=i,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const l=r.authMode;if(s===403&&(a===4||(u=n.message)!=null&&u.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&GMe.has(s)&&!Ole(t.params.url)&&(s!==403||(!o||!ZMe.has(o))&&(a==null||a===2&&t.credentialToken))){await q4();try{const p=await Ye.getCredential(t.params.url,{error:du("request:server",n,t.params),prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=p,t.credentialToken=p.token,t.useSSL=t.useSSL||p.ssl,!1}catch(p){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=p}}if(n)throw n;return!0}function mW(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Wa.priority,n.src=t,zMe(n,t,i,r)}function rAe(t){let e,i;return typeof t=="string"?(e=aa(t,!0),i=wA(t)):(e=t.origin,i=wA(t.toString())),e==null?null:{origin:e,isHosted:i}}function zi(t){if(!Ht.assetsPath)throw pe.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new G("assets:path-not-set","config.assetsPath is not set");return kw(Ht.assetsPath,t)}let B5,Z=null;function ZQ(){return!!Z}function nAe(){return!!te("esri-wasm")}function Sle(){return B5||(B5=J(()=>import("./pe-wasm-Co3DzcyP.js"),__vite__mapDeps([0,1])).then(t=>t.p).then(({default:t})=>t({locateFile:e=>zi(`esri/geometry/support/${e}`)})).then(t=>{$le(t)}),B5)}var Z4,Qi;(function(t){function e(s,o,a){Z.ensureCache.prepare();const l=Yy(a),u=a===l,p=Z.ensureFloat64(l),m=Z._pe_geog_to_proj(Z.getPointer(s),o,p);return m&&sf(a,o,p,u),m}function i(s,o,a,l){switch(l){case Qi.PE_TRANSFORM_P_TO_G:return r(s,o,a);case Qi.PE_TRANSFORM_G_TO_P:return e(s,o,a)}return 0}function r(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){Z.ensureCache.prepare();const u=Yy(a),p=a===u,m=Z.ensureFloat64(u),g=Z._pe_proj_to_geog_center(Z.getPointer(s),o,m,l);return g&&sf(a,o,m,p),g}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=n})(Z4||(Z4={})),function(t){function e(){t.PE_BUFFER_MAX=Z.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=Z.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=Z.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=Z.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=Z.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=Z.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=Z.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=Z.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=Z.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=Z.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=Z.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=Z.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=Z.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=Z.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=Z.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=Z.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=Z.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=Z.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=Z.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=Z.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=Z.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=Z.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=Z.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=Z.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=Z.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=Z.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=Z.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=Z.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=Z.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=Z.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=Z.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=Z.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(Qi||(Qi={}));let _le=null;var H4;(function(t){const e={},i={},r=w=>{const O=w.getType();switch(O){case Qi.PE_TYPE_GEOGCS:w=Z.castObject(w,Z.PeGeogcs);break;case Qi.PE_TYPE_PROJCS:w=Z.castObject(w,Z.PeProjcs);break;case Qi.PE_TYPE_GEOGTRAN:w=Z.castObject(w,Z.PeGeogtran);break;default:O&Qi.PE_TYPE_UNIT&&(w=Z.castObject(w,Z.PeUnit))}return w};function n(){Z.PeFactory.prototype.initialize(null)}function s(w){return o(Qi.PE_TYPE_COORDSYS,w)}function o(w,O){let _=null,x=e[w];if(x||(x={},e[w]=x),x.hasOwnProperty(String(O))&&(_=x[O],Z.compare(_,Z.NULL)&&(_=null)),!_){const T=Z.PeFactory.prototype.factoryByType(w,O);Z.compare(T,Z.NULL)||(_=r(T),x[O]=_)}return _}function a(w,O){let _=null,x=i[w];if(x||(x={},i[w]=x),x.hasOwnProperty(O)&&(_=x[O],Z.compare(_,Z.NULL)&&(_=null)),!_){const T=Z.PeFactory.prototype.fromString(w,O);Z.compare(T,Z.NULL)||(_=r(T),x[O]=_)}return _}function l(w){return o(Qi.PE_TYPE_GEOGCS,w)}function u(w){return o(Qi.PE_TYPE_GEOGTRAN,w)}function p(w){return Z.PeFactory.prototype.getCode(w)}function m(w){return o(Qi.PE_TYPE_PROJCS,w)}function g(w){return o(Qi.PE_TYPE_UNIT,w)}t.initialize=n,t.coordsys=s,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=u,t.getCode=p,t.projcs=m,t.unit=g})(H4||(H4={}));let xle=null;var _A,W4,X4,Y4,J4,K4,xA,eV,$A,TA,tV;function $le(t){function e(s,o,a){s[o]=a(s[o])}Z=t,Qi.init(),_A.init(),xA.init(),$A.init(),TA.init(),_le=class extends Z.PeDouble{constructor(s=NaN){super(s)}destroy(){Z.destroy(this)}[Symbol.dispose](){this.destroy()}},xle=class extends Z.PeGCSExtent{destroy(){Z.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[Z.PeAngunit,Z.PeDatum,Z.PeGeogcs,Z.PeGeogtran,Z.PeObject,Z.PeParameter,Z.PePrimem,Z.PeProjcs,Z.PeSpheroid,Z.PeUnit];for(const s of i)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(Qi.PE_NAME_MAX))});for(const s of[Z.PeGeogtran,Z.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array(Qi.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const p=Z.getValue(l,"*");a[u]=p?Z.wrapPointer(p,Z.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(Z.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return sf(l,a,s.call(this),o),l}),e(Z.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=Z._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!Z.compare(l,Z.NULL)){a=[l];const u=this.getSteps();if(u>1){const p=Z.getPointer(l);for(let m=1;m<u;m++)a.push(Z.wrapPointer(p+o*m,Z.PeGTlistExtendedGTs))}}return a}});const r=Z._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!Z.compare(l,Z.NULL)){a=[l];const u=l.getNump();if(u>1){const p=Z.getPointer(l);for(let m=1;m<u;m++)a.push(Z.wrapPointer(p+r*m,Z.PeHorizon))}}return o.set(s,a),a};e(Z.PeProjcs.prototype,"horizonGcsGenerate",n),e(Z.PeProjcs.prototype,"horizonPcsGenerate",n),Z.PeObject.prototype.toString=function(s=Qi.PE_STR_OPTS_NONE){Z.ensureCache.prepare();const o=Z.getPointer(this),a=Z.ensureInt8(new Array(Qi.PE_BUFFER_MAX));return Z.UTF8ToString(Z._pe_object_to_string_ext(o,s,a))},Z.PeGeogcs.prototype.destroy=function(){this.Delete(),iu(this),this.ptr=0},Z.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},Z.PeProjcs.prototype.destroy=function(){this.Delete(),iu(this),this.ptr=0},Z.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function iu(t){if(!t)return;const e=Z.getClass(t);if(!e)return;const i=Z.getCache(e);if(!i)return;const r=Z.getPointer(t);r&&delete i[r]}function gE(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(Z.ensureInt8(r));return i}function Yy(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function sf(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=Z.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=Z.getValue(i,"double"),t[s][1]=Z.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=Z.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=Z._pe_getPeGTlistExtendedEntrySize()}function r(n,s,o,a,l,u){let p=null;const m=new Z.PeInteger(u);try{const g=Z.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,m);if((u=m.val)&&(p=[g],u>1)){const w=Z.getPointer(g);for(let O=1;O<u;O++)p.push(Z.wrapPointer(w+e*O,Z.PeGTlistExtendedEntry))}}finally{Z.destroy(m)}return p}t.init=i,t.getGTlist=r})(_A||(_A={})),function(t){function e(i){if(i!=null&&i.length){for(const r of i)iu(r),r.getEntries().forEach(n=>{iu(n);const s=n.getGeogtran();iu(s),s.getParameters().forEach(iu),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{iu(o);const a=o.getDatum();iu(a),iu(a.getSpheroid()),iu(o.getPrimem()),iu(o.getUnit())})});Z.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(W4||(W4={})),function(t){function e(i,r,n,s,o){Z.ensureCache.prepare();const a=Yy(n),l=n===a,u=Z.ensureFloat64(a);let p=0;s&&(p=Z.ensureFloat64(s));const m=Z._pe_geog_to_geog(Z.getPointer(i),r,u,p,o);return m&&sf(n,r,u,l),m}t.geogToGeog=e}(X4||(X4={})),function(t){function e(s,o,a,l,u,p,m,g){Z.PeLineType.prototype.geodesic_coordinate(s,o,a,l,u,p,m,g)}function i(s,o,a,l,u,p,m,g,w){Z.PeLineType.prototype.geodetic_coordinate(s,o,a,l,u,p,m,g,w)}function r(s,o,a,l,u,p,m,g,w,O){Z.PeLineType.prototype.geodetic_distance(s,o,a,l,u,p,m,g,w,O)}function n(s,o,a,l,u,p,m,g,w){Z.PeLineType.prototype.great_elliptic_distance(s,o,a,l,u,p,m,g,w)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=r,t.greatEllipticDistance=n}(Y4||(Y4={})),function(t){function e(o,a){return Z.PeMath.prototype.phi_to_eta(o,a)}function i(o,a){return Z.PeMath.prototype.eta_to_phi(o,a)}function r(o,a){return Z.PeMath.prototype.phi_to_phig(o,a)}function n(o,a,l){return Z.PeMath.prototype.q(o,a,l)}function s(o,a){return Z.PeMath.prototype.q90(o,a)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=r,t.q=n,t.q90=s}(J4||(J4={})),function(t){const e=(u,p,m,g,w,O)=>{let _,x;switch(Z.ensureCache.prepare(),u){case"dd":_=Z._pe_geog_to_dd,x=Qi.PE_DD_MAX;break;case"ddm":_=Z._pe_geog_to_ddm,x=Qi.PE_DDM_MAX;break;case"dms":_=Z._pe_geog_to_dms,x=Qi.PE_DMS_MAX}let T=0;p&&(T=Z.getPointer(p));const E=Yy(g),k=Z.ensureFloat64(E),M=gE(m,x),R=_(T,m,k,w,Z.ensureInt32(M));if(R)for(let D=0;D<m;D++)O[D]=Z.UTF8ToString(M[D]);return R},i=(u,p,m,g,w)=>{let O;switch(Z.ensureCache.prepare(),u){case"dd":O=Z._pe_dd_to_geog;break;case"ddm":O=Z._pe_ddm_to_geog;break;case"dms":O=Z._pe_dms_to_geog}let _=0;p&&(_=Z.getPointer(p));const x=g.map(M=>Z.ensureString(M)),T=Z.ensureInt32(x),E=Z.ensureFloat64(new Array(2*m)),k=O(_,m,T,E);return k&&sf(w,m,E),k};function r(u,p,m,g,w){return e("dms",u,p,m,g,w)}function n(u,p,m,g){return i("dms",u,p,m,g)}function s(u,p,m,g,w){return e("ddm",u,p,m,g,w)}function o(u,p,m,g){return i("ddm",u,p,m,g)}function a(u,p,m,g,w){return e("dd",u,p,m,g,w)}function l(u,p,m,g){return i("dd",u,p,m,g)}t.geogToDms=r,t.dmsToGeog=n,t.geogToDdm=s,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l}(K4||(K4={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=Z.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=Z.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=Z.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=Z.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=Z.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,s,o,a,l,u,p){Z.ensureCache.prepare();let m=0;n&&(m=Z.getPointer(n));const g=Yy(o),w=Z.ensureFloat64(g),O=gE(s,Qi.PE_MGRS_MAX),_=Z.ensureInt32(O),x=Z._pe_geog_to_mgrs_extended(m,s,w,a,l,u,_);if(x)for(let T=0;T<s;T++)p[T]=Z.UTF8ToString(O[T]);return x}function r(n,s,o,a,l){Z.ensureCache.prepare();let u=0;n&&(u=Z.getPointer(n));const p=o.map(O=>Z.ensureString(O)),m=Z.ensureInt32(p),g=Z.ensureFloat64(new Array(2*s)),w=Z._pe_mgrs_to_geog_extended(u,s,m,a,g);return w&&sf(l,s,g),w}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(xA||(xA={})),function(t){function e(r,n,s,o,a,l,u){Z.ensureCache.prepare();let p=0;r&&(p=Z.getPointer(r));const m=Yy(s),g=Z.ensureFloat64(m),w=gE(n,Qi.PE_MGRS_MAX),O=Z.ensureInt32(w),_=Z._pe_geog_to_usng(p,n,g,o,a,l,O);if(_)for(let x=0;x<n;x++)u[x]=Z.UTF8ToString(w[x]);return _}function i(r,n,s,o){Z.ensureCache.prepare();let a=0;r&&(a=Z.getPointer(r));const l=s.map(g=>Z.ensureString(g)),u=Z.ensureInt32(l),p=Z.ensureFloat64(new Array(2*n)),m=Z._pe_usng_to_geog(a,n,u,p);return m&&sf(o,n,p),m}t.geogToUsng=e,t.usngToGeog=i}(eV||(eV={})),function(t){function e(){t.PE_UTM_OPTS_NONE=Z.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=Z.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=Z.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,s,o,a,l){Z.ensureCache.prepare();let u=0;n&&(u=Z.getPointer(n));const p=Yy(o),m=Z.ensureFloat64(p),g=gE(s,Qi.PE_UTM_MAX),w=Z.ensureInt32(g),O=Z._pe_geog_to_utm(u,s,m,a,w);if(O)for(let _=0;_<s;_++)l[_]=Z.UTF8ToString(g[_]);return O}function r(n,s,o,a,l){Z.ensureCache.prepare();let u=0;n&&(u=Z.getPointer(n));const p=o.map(O=>Z.ensureString(O)),m=Z.ensureInt32(p),g=Z.ensureFloat64(new Array(2*s)),w=Z._pe_utm_to_geog(u,s,m,a,g);return w&&sf(l,s,g),w}t.init=e,t.geogToUtm=i,t.utmToGeog=r}($A||($A={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=Z.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=Z.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=Z.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=Z.PePCSInfo.prototype.PE_POLE_POINT}function r(n,s=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(n)&&(a=e.get(n),a[s]&&(o=a[s])),o||(o=Z.PePCSInfo.prototype.generate(n,s),a||(a=[],e.set(n,a)),a[s]=o),o}t.init=i,t.generate=r}(TA||(TA={})),function(t){function e(){return Z.PeVersion.prototype.version_string()}t.versionString=e}(tV||(tV={}));const sAe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return Z4},get PeDefs(){return Qi},get PeDouble(){return _le},get PeFactory(){return H4},get PeGCSExtent(){return xle},get PeGTTransformations(){return X4},get PeGTlistExtended(){return _A},get PeGTlistExtendedEntry(){return W4},get PeLineType(){return Y4},get PeMath(){return J4},get PeNotationDms(){return K4},get PeNotationMgrs(){return xA},get PeNotationUsng(){return eV},get PeNotationUtm(){return $A},get PePCSInfo(){return TA},get PeVersion(){return tV},_init:$le,get _pe(){return Z},isLoaded:ZQ,isSupported:nAe,load:Sle},Symbol.toStringTag,{value:"Module"}));var Qg;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(Qg||(Qg={}));let v;const I={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10665:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(v=2e3;v<=2045;v++)I[v]=0;for(v=2056;v<=2065;v++)I[v]=0;for(v=2067;v<=2135;v++)I[v]=0;for(v=2137;v<=2154;v++)I[v]=0;for(v=2161;v<=2170;v++)I[v]=0;for(v=2172;v<=2193;v++)I[v]=0;for(v=2195;v<=2198;v++)I[v]=0;for(v=2200;v<=2203;v++)I[v]=0;for(v=2205;v<=2217;v++)I[v]=0;for(v=2222;v<=2224;v++)I[v]=1;for(v=2225;v<=2250;v++)I[v]=2;for(v=2251;v<=2253;v++)I[v]=1;for(v=2257;v<=2264;v++)I[v]=2;for(v=2274;v<=2279;v++)I[v]=2;for(v=2280;v<=2282;v++)I[v]=1;for(v=2283;v<=2289;v++)I[v]=2;for(v=2290;v<=2292;v++)I[v]=0;for(v=2308;v<=2313;v++)I[v]=0;for(v=2315;v<=2491;v++)I[v]=0;for(v=2494;v<=2866;v++)I[v]=0;for(v=2867;v<=2869;v++)I[v]=1;for(v=2870;v<=2888;v++)I[v]=2;for(v=2891;v<=2895;v++)I[v]=2;for(v=2896;v<=2898;v++)I[v]=1;for(v=2902;v<=2908;v++)I[v]=2;for(v=2915;v<=2920;v++)I[v]=2;for(v=2921;v<=2923;v++)I[v]=1;for(v=2924;v<=2930;v++)I[v]=2;for(v=2931;v<=2962;v++)I[v]=0;for(v=2964;v<=2968;v++)I[v]=2;for(v=2969;v<=2973;v++)I[v]=0;for(v=2975;v<=2991;v++)I[v]=0;for(v=2995;v<=3051;v++)I[v]=0;for(v=3054;v<=3079;v++)I[v]=0;for(v=3081;v<=3088;v++)I[v]=0;for(v=3092;v<=3101;v++)I[v]=0;for(v=3106;v<=3138;v++)I[v]=0;for(v=3146;v<=3151;v++)I[v]=0;for(v=3153;v<=3166;v++)I[v]=0;for(v=3168;v<=3172;v++)I[v]=0;for(v=3174;v<=3203;v++)I[v]=0;for(v=3294;v<=3358;v++)I[v]=0;for(v=3367;v<=3403;v++)I[v]=0;for(v=3408;v<=3416;v++)I[v]=0;for(v=3417;v<=3438;v++)I[v]=2;for(v=3441;v<=3446;v++)I[v]=2;for(v=3447;v<=3450;v++)I[v]=0;for(v=3451;v<=3459;v++)I[v]=2;for(v=3460;v<=3478;v++)I[v]=0;for(v=3554;v<=3559;v++)I[v]=0;for(v=3560;v<=3570;v++)I[v]=2;for(v=3571;v<=3581;v++)I[v]=0;for(v=3594;v<=3597;v++)I[v]=0;for(v=3601;v<=3604;v++)I[v]=0;for(v=3637;v<=3639;v++)I[v]=0;for(v=3665;v<=3667;v++)I[v]=0;for(v=3693;v<=3695;v++)I[v]=0;for(v=3701;v<=3727;v++)I[v]=0;for(v=3728;v<=3739;v++)I[v]=2;for(v=3740;v<=3751;v++)I[v]=0;for(v=3753;v<=3760;v++)I[v]=2;for(v=3761;v<=3773;v++)I[v]=0;for(v=3775;v<=3777;v++)I[v]=0;for(v=3779;v<=3781;v++)I[v]=0;for(v=3783;v<=3785;v++)I[v]=0;for(v=3788;v<=3791;v++)I[v]=0;for(v=3797;v<=3802;v++)I[v]=0;for(v=3814;v<=3816;v++)I[v]=0;for(v=3825;v<=3829;v++)I[v]=0;for(v=3832;v<=3841;v++)I[v]=0;for(v=3844;v<=3852;v++)I[v]=0;for(v=3873;v<=3885;v++)I[v]=0;for(v=3890;v<=3893;v++)I[v]=0;for(v=3907;v<=3912;v++)I[v]=0;for(v=3942;v<=3950;v++)I[v]=0;for(v=3968;v<=3970;v++)I[v]=0;for(v=3973;v<=3976;v++)I[v]=0;for(v=3986;v<=3989;v++)I[v]=0;for(v=3994;v<=3997;v++)I[v]=0;for(v=4048;v<=4051;v++)I[v]=0;for(v=4056;v<=4063;v++)I[v]=0;for(v=4093;v<=4096;v++)I[v]=0;for(v=4390;v<=4398;v++)I[v]=0;for(v=4399;v<=4413;v++)I[v]=2;for(v=4418;v<=4433;v++)I[v]=2;for(v=4455;v<=4457;v++)I[v]=2;for(v=4484;v<=4489;v++)I[v]=0;for(v=4491;v<=4554;v++)I[v]=0;for(v=4568;v<=4589;v++)I[v]=0;for(v=4652;v<=4656;v++)I[v]=0;for(v=4766;v<=4800;v++)I[v]=0;for(v=5014;v<=5016;v++)I[v]=0;for(v=5069;v<=5072;v++)I[v]=0;for(v=5105;v<=5130;v++)I[v]=0;for(v=5167;v<=5188;v++)I[v]=0;for(v=5253;v<=5259;v++)I[v]=0;for(v=5269;v<=5275;v++)I[v]=0;for(v=5292;v<=5311;v++)I[v]=0;for(v=5329;v<=5331;v++)I[v]=0;for(v=5343;v<=5349;v++)I[v]=0;for(v=5355;v<=5357;v++)I[v]=0;for(v=5387;v<=5389;v++)I[v]=0;for(v=5459;v<=5463;v++)I[v]=0;for(v=5479;v<=5482;v++)I[v]=0;for(v=5518;v<=5520;v++)I[v]=0;for(v=5530;v<=5539;v++)I[v]=0;for(v=5550;v<=5552;v++)I[v]=0;for(v=5562;v<=5583;v++)I[v]=0;for(v=5623;v<=5625;v++)I[v]=2;for(v=5631;v<=5639;v++)I[v]=0;for(v=5649;v<=5653;v++)I[v]=0;for(v=5663;v<=5680;v++)I[v]=0;for(v=5682;v<=5685;v++)I[v]=0;for(v=5875;v<=5877;v++)I[v]=0;for(v=5896;v<=5899;v++)I[v]=0;for(v=5921;v<=5940;v++)I[v]=0;for(v=6050;v<=6125;v++)I[v]=0;for(v=6244;v<=6275;v++)I[v]=0;for(v=6328;v<=6348;v++)I[v]=0;for(v=6350;v<=6356;v++)I[v]=0;for(v=6366;v<=6372;v++)I[v]=0;for(v=6381;v<=6387;v++)I[v]=0;for(v=6393;v<=6404;v++)I[v]=0;for(v=6480;v<=6483;v++)I[v]=0;for(v=6511;v<=6514;v++)I[v]=0;for(v=6579;v<=6581;v++)I[v]=0;for(v=6619;v<=6624;v++)I[v]=0;for(v=6625;v<=6627;v++)I[v]=2;for(v=6628;v<=6632;v++)I[v]=0;for(v=6634;v<=6637;v++)I[v]=0;for(v=6669;v<=6692;v++)I[v]=0;for(v=6707;v<=6709;v++)I[v]=0;for(v=6720;v<=6723;v++)I[v]=0;for(v=6732;v<=6738;v++)I[v]=0;for(v=6931;v<=6933;v++)I[v]=0;for(v=6956;v<=6959;v++)I[v]=0;for(v=7005;v<=7007;v++)I[v]=0;for(v=7057;v<=7070;v++)I[v]=2;for(v=7074;v<=7082;v++)I[v]=0;for(v=7109;v<=7118;v++)I[v]=0;for(v=7119;v<=7127;v++)I[v]=1;for(v=7374;v<=7376;v++)I[v]=0;for(v=7528;v<=7586;v++)I[v]=0;for(v=7587;v<=7645;v++)I[v]=2;for(v=7692;v<=7696;v++)I[v]=0;for(v=7755;v<=7787;v++)I[v]=0;for(v=7791;v<=7795;v++)I[v]=0;for(v=7799;v<=7801;v++)I[v]=0;for(v=7803;v<=7805;v++)I[v]=0;for(v=7825;v<=7831;v++)I[v]=0;for(v=7845;v<=7859;v++)I[v]=0;for(v=8013;v<=8032;v++)I[v]=0;for(v=8065;v<=8068;v++)I[v]=1;for(v=8518;v<=8529;v++)I[v]=2;for(v=8533;v<=8536;v++)I[v]=2;for(v=8538;v<=8540;v++)I[v]=2;for(v=8677;v<=8679;v++)I[v]=0;for(v=8836;v<=8840;v++)I[v]=0;for(v=8857;v<=8859;v++)I[v]=0;for(v=8908;v<=8910;v++)I[v]=0;for(v=9154;v<=9159;v++)I[v]=0;for(v=9205;v<=9218;v++)I[v]=0;for(v=9271;v<=9273;v++)I[v]=0;for(v=9295;v<=9297;v++)I[v]=0;for(v=9356;v<=9360;v++)I[v]=0;for(v=9404;v<=9407;v++)I[v]=0;for(v=9476;v<=9482;v++)I[v]=0;for(v=9487;v<=9494;v++)I[v]=0;for(v=9697;v<=9699;v++)I[v]=0;for(v=9821;v<=9865;v++)I[v]=0;for(v=10285;v<=10291;v++)I[v]=0;for(v=10314;v<=10317;v++)I[v]=0;for(v=10448;v<=10465;v++)I[v]=0;for(v=10731;v<=10733;v++)I[v]=0;for(v=11114;v<=11118;v++)I[v]=0;for(v=20004;v<=20032;v++)I[v]=0;for(v=20047;v<=20049;v++)I[v]=0;for(v=20062;v<=20092;v++)I[v]=0;for(v=20135;v<=20138;v++)I[v]=0;for(v=20248;v<=20258;v++)I[v]=0;for(v=20348;v<=20358;v++)I[v]=0;for(v=20436;v<=20440;v++)I[v]=0;for(v=20822;v<=20824;v++)I[v]=0;for(v=20904;v<=20932;v++)I[v]=0;for(v=20934;v<=20936;v++)I[v]=0;for(v=21004;v<=21032;v++)I[v]=0;for(v=21035;v<=21037;v++)I[v]=0;for(v=21095;v<=21097;v++)I[v]=0;for(v=21148;v<=21150;v++)I[v]=0;for(v=21207;v<=21264;v++)I[v]=0;for(v=21307;v<=21364;v++)I[v]=0;for(v=21413;v<=21423;v++)I[v]=0;for(v=21453;v<=21463;v++)I[v]=0;for(v=21473;v<=21483;v++)I[v]=0;for(v=21780;v<=21782;v++)I[v]=0;for(v=21891;v<=21894;v++)I[v]=0;for(v=21896;v<=21899;v++)I[v]=0;for(v=22171;v<=22177;v++)I[v]=0;for(v=22181;v<=22187;v++)I[v]=0;for(v=22191;v<=22197;v++)I[v]=0;for(v=22207;v<=22222;v++)I[v]=0;for(v=22229;v<=22232;v++)I[v]=0;for(v=22234;v<=22236;v++)I[v]=0;for(v=22243;v<=22250;v++)I[v]=0;for(v=22262;v<=22265;v++)I[v]=0;for(v=22307;v<=22322;v++)I[v]=0;for(v=22348;v<=22357;v++)I[v]=0;for(v=22407;v<=22422;v++)I[v]=0;for(v=22462;v<=22465;v++)I[v]=0;for(v=22521;v<=22525;v++)I[v]=0;for(v=22607;v<=22622;v++)I[v]=0;for(v=22641;v<=22646;v++)I[v]=0;for(v=22648;v<=22657;v++)I[v]=0;for(v=22707;v<=22722;v++)I[v]=0;for(v=22762;v<=22765;v++)I[v]=0;for(v=22807;v<=22822;v++)I[v]=0;for(v=22991;v<=22994;v++)I[v]=0;for(v=23028;v<=23038;v++)I[v]=0;for(v=23301;v<=23333;v++)I[v]=2;for(v=23830;v<=23853;v++)I[v]=0;for(v=23866;v<=23872;v++)I[v]=0;for(v=23877;v<=23884;v++)I[v]=0;for(v=23886;v<=23894;v++)I[v]=0;for(v=23946;v<=23948;v++)I[v]=0;for(v=24311;v<=24313;v++)I[v]=0;for(v=24342;v<=24347;v++)I[v]=0;for(v=24370;v<=24374;v++)I[v]=10;for(v=24375;v<=24381;v++)I[v]=0;for(v=24718;v<=24721;v++)I[v]=0;for(v=24817;v<=24821;v++)I[v]=0;for(v=24877;v<=24882;v++)I[v]=0;for(v=24891;v<=24893;v++)I[v]=0;for(v=25391;v<=25395;v++)I[v]=0;for(v=25828;v<=25838;v++)I[v]=0;for(v=26191;v<=26195;v++)I[v]=0;for(v=26391;v<=26393;v++)I[v]=0;for(v=26701;v<=26722;v++)I[v]=0;for(v=26729;v<=26799;v++)I[v]=2;for(v=26801;v<=26803;v++)I[v]=2;for(v=26811;v<=26813;v++)I[v]=2;for(v=26847;v<=26870;v++)I[v]=2;for(v=26891;v<=26899;v++)I[v]=0;for(v=26901;v<=26923;v++)I[v]=0;for(v=26929;v<=26946;v++)I[v]=0;for(v=26948;v<=26998;v++)I[v]=0;for(v=27037;v<=27040;v++)I[v]=0;for(v=27205;v<=27232;v++)I[v]=0;for(v=27258;v<=27260;v++)I[v]=0;for(v=27391;v<=27398;v++)I[v]=0;for(v=27561;v<=27564;v++)I[v]=0;for(v=27571;v<=27574;v++)I[v]=0;for(v=27581;v<=27584;v++)I[v]=0;for(v=27591;v<=27594;v++)I[v]=0;for(v=27700;v<=27707;v++)I[v]=0;for(v=28191;v<=28193;v++)I[v]=0;for(v=28348;v<=28358;v++)I[v]=0;for(v=28402;v<=28432;v++)I[v]=0;for(v=28462;v<=28492;v++)I[v]=0;for(v=29118;v<=29122;v++)I[v]=0;for(v=29168;v<=29172;v++)I[v]=0;for(v=29177;v<=29185;v++)I[v]=0;for(v=29187;v<=29195;v++)I[v]=0;for(v=29900;v<=29903;v++)I[v]=0;for(v=30161;v<=30179;v++)I[v]=0;for(v=30491;v<=30494;v++)I[v]=0;for(v=30729;v<=30732;v++)I[v]=0;for(v=31251;v<=31259;v++)I[v]=0;for(v=31265;v<=31268;v++)I[v]=0;for(v=31275;v<=31279;v++)I[v]=0;for(v=31281;v<=31297;v++)I[v]=0;for(v=31461;v<=31469;v++)I[v]=0;for(v=31491;v<=31495;v++)I[v]=0;for(v=31917;v<=31922;v++)I[v]=0;for(v=31965;v<=32e3;v++)I[v]=0;for(v=32001;v<=32003;v++)I[v]=2;for(v=32005;v<=32031;v++)I[v]=2;for(v=32033;v<=32060;v++)I[v]=2;for(v=32064;v<=32067;v++)I[v]=2;for(v=32074;v<=32077;v++)I[v]=2;for(v=32081;v<=32086;v++)I[v]=0;for(v=32107;v<=32130;v++)I[v]=0;for(v=32133;v<=32159;v++)I[v]=0;for(v=32164;v<=32167;v++)I[v]=2;for(v=32180;v<=32199;v++)I[v]=0;for(v=32201;v<=32260;v++)I[v]=0;for(v=32301;v<=32360;v++)I[v]=0;for(v=32401;v<=32460;v++)I[v]=0;for(v=32501;v<=32560;v++)I[v]=0;for(v=32601;v<=32662;v++)I[v]=0;for(v=32664;v<=32667;v++)I[v]=2;for(v=32701;v<=32761;v++)I[v]=0;for(v=53001;v<=53004;v++)I[v]=0;for(v=53008;v<=53019;v++)I[v]=0;for(v=53021;v<=53032;v++)I[v]=0;for(v=53034;v<=53037;v++)I[v]=0;for(v=53042;v<=53046;v++)I[v]=0;for(v=53074;v<=53080;v++)I[v]=0;for(v=54001;v<=54004;v++)I[v]=0;for(v=54008;v<=54019;v++)I[v]=0;for(v=54021;v<=54032;v++)I[v]=0;for(v=54034;v<=54037;v++)I[v]=0;for(v=54042;v<=54046;v++)I[v]=0;for(v=54048;v<=54053;v++)I[v]=0;for(v=54074;v<=54080;v++)I[v]=0;for(v=54098;v<=54101;v++)I[v]=0;for(v=102001;v<=102040;v++)I[v]=0;for(v=102042;v<=102063;v++)I[v]=0;for(v=102065;v<=102067;v++)I[v]=0;for(v=102070;v<=102117;v++)I[v]=0;for(v=102122;v<=102216;v++)I[v]=0;for(v=102221;v<=102377;v++)I[v]=0;for(v=102382;v<=102388;v++)I[v]=0;for(v=102389;v<=102398;v++)I[v]=2;for(v=102399;v<=102444;v++)I[v]=0;for(v=102445;v<=102447;v++)I[v]=2;for(v=102448;v<=102458;v++)I[v]=0;for(v=102459;v<=102468;v++)I[v]=2;for(v=102469;v<=102499;v++)I[v]=0;for(v=102500;v<=102519;v++)I[v]=1;for(v=102520;v<=102524;v++)I[v]=0;for(v=102525;v<=102529;v++)I[v]=2;for(v=102530;v<=102588;v++)I[v]=0;for(v=102590;v<=102598;v++)I[v]=0;for(v=102601;v<=102603;v++)I[v]=0;for(v=102605;v<=102628;v++)I[v]=0;for(v=102629;v<=102646;v++)I[v]=2;for(v=102648;v<=102700;v++)I[v]=2;for(v=102701;v<=102703;v++)I[v]=0;for(v=102707;v<=102730;v++)I[v]=2;for(v=102733;v<=102758;v++)I[v]=2;for(v=102767;v<=102900;v++)I[v]=0;for(v=102901;v<=102933;v++)I[v]=2;for(v=102934;v<=102950;v++)I[v]=13;for(v=102951;v<=102963;v++)I[v]=0;for(v=102965;v<=102969;v++)I[v]=0;for(v=102971;v<=102973;v++)I[v]=0;for(v=102975;v<=102989;v++)I[v]=0;for(v=102990;v<=102992;v++)I[v]=1;for(v=102997;v<=103002;v++)I[v]=0;for(v=103003;v<=103008;v++)I[v]=2;for(v=103009;v<=103011;v++)I[v]=0;for(v=103012;v<=103014;v++)I[v]=2;for(v=103019;v<=103021;v++)I[v]=0;for(v=103022;v<=103024;v++)I[v]=2;for(v=103029;v<=103031;v++)I[v]=0;for(v=103032;v<=103034;v++)I[v]=2;for(v=103065;v<=103068;v++)I[v]=0;for(v=103074;v<=103076;v++)I[v]=0;for(v=103077;v<=103079;v++)I[v]=1;for(v=103080;v<=103082;v++)I[v]=0;for(v=103083;v<=103085;v++)I[v]=2;for(v=103090;v<=103093;v++)I[v]=0;for(v=103097;v<=103099;v++)I[v]=0;for(v=103100;v<=103102;v++)I[v]=2;for(v=103107;v<=103109;v++)I[v]=0;for(v=103110;v<=103112;v++)I[v]=2;for(v=103113;v<=103116;v++)I[v]=0;for(v=103117;v<=103120;v++)I[v]=2;for(v=103153;v<=103157;v++)I[v]=0;for(v=103158;v<=103162;v++)I[v]=2;for(v=103163;v<=103165;v++)I[v]=0;for(v=103166;v<=103168;v++)I[v]=1;for(v=103169;v<=103171;v++)I[v]=2;for(v=103186;v<=103188;v++)I[v]=0;for(v=103189;v<=103191;v++)I[v]=2;for(v=103192;v<=103195;v++)I[v]=0;for(v=103196;v<=103199;v++)I[v]=2;for(v=103200;v<=103224;v++)I[v]=0;for(v=103225;v<=103227;v++)I[v]=1;for(v=103232;v<=103237;v++)I[v]=0;for(v=103238;v<=103243;v++)I[v]=2;for(v=103244;v<=103246;v++)I[v]=0;for(v=103247;v<=103249;v++)I[v]=2;for(v=103254;v<=103256;v++)I[v]=0;for(v=103257;v<=103259;v++)I[v]=2;for(v=103264;v<=103266;v++)I[v]=0;for(v=103267;v<=103269;v++)I[v]=2;for(v=103300;v<=103375;v++)I[v]=0;for(v=103381;v<=103383;v++)I[v]=0;for(v=103384;v<=103386;v++)I[v]=1;for(v=103387;v<=103389;v++)I[v]=0;for(v=103390;v<=103392;v++)I[v]=2;for(v=103397;v<=103399;v++)I[v]=0;for(v=103400;v<=103471;v++)I[v]=2;for(v=103476;v<=103478;v++)I[v]=0;for(v=103479;v<=103481;v++)I[v]=2;for(v=103486;v<=103488;v++)I[v]=0;for(v=103489;v<=103491;v++)I[v]=2;for(v=103492;v<=103495;v++)I[v]=0;for(v=103496;v<=103499;v++)I[v]=2;for(v=103528;v<=103543;v++)I[v]=0;for(v=103544;v<=103548;v++)I[v]=2;for(v=103549;v<=103551;v++)I[v]=0;for(v=103552;v<=103554;v++)I[v]=1;for(v=103555;v<=103557;v++)I[v]=2;for(v=103558;v<=103560;v++)I[v]=0;for(v=103571;v<=103573;v++)I[v]=0;for(v=103574;v<=103576;v++)I[v]=2;for(v=103577;v<=103580;v++)I[v]=0;for(v=103581;v<=103583;v++)I[v]=2;for(v=103595;v<=103694;v++)I[v]=0;for(v=103696;v<=103699;v++)I[v]=0;for(v=103700;v<=103793;v++)I[v]=2;for(v=103794;v<=103890;v++)I[v]=0;for(v=103891;v<=103896;v++)I[v]=2;for(v=103900;v<=103971;v++)I[v]=2;for(v=103972;v<=103977;v++)I[v]=0;for(v=112e3;v<=112101;v++)I[v]=0;const Tle=[102100,102113,3857,3785,900913],oAe=[104905,104971],aAe=[4326,...Tle,...oAe],e$=[-20037508342788905e-9,20037508342788905e-9],iV=[-20037508342787e-6,20037508342787e-6],q5={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:e$,origin:iV,dx:1e-5},Ele={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:e$,origin:iV,dx:1e-5},102100:q5,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:e$,origin:iV,dx:1e-5},3857:q5,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:q5};function yn(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||xc(t)&&xc(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&i===a}let n,s;return t.wkt2&&e.wkt2?(n=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,s=e.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function Zs(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Ele[e]||null}function EA(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function SO(t){if(!$o(t))return!1;const{wkid:e}=t;if(e)return I[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function lAe(t){return!(kle(t)||Cle(t))}function Bg(t){return(t==null?void 0:t.wkid)===4326}function Cyt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function yW(t){return(t==null?void 0:t.wkid)===Qg.CGCS2000}function xc(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Tle.includes(e)}function uAe(t){return(t==null?void 0:t.wkid)===32662}function IP(t){return t===Qg.GCSMARS2000||t===Qg.GCSMARS2000_SPHERE}function kle(t){return IP(t==null?void 0:t.wkid)}function PP(t){return t===Qg.GCSMOON2000}function Cle(t){return PP(t==null?void 0:t.wkid)}function cAe(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&aAe.includes(e)}function $o(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const Mle={wkid:4326,wkt:yO(Ele[4326].wkTemplate,{Central_Meridian:"0.0"})},Ale={wkid:102100,latestWkid:3857},hAe={wkid:32662};function HQ(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const dAe=HQ(dr),WQ=HQ(vc),XQ=HQ(Nf),pAe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${dr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},fAe=WQ.wkt.toUpperCase(),mAe=XQ.wkt.toUpperCase();function yAe(t){if(t!=null&&$o(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(IP(e))return vc;const r=i==null?void 0:i.toUpperCase();if(i&&r===fAe)return vc;if(PP(e)||r&&r===mAe)return Nf}return dr}function Myt(t){return IP(t)?vc:PP(t)?Nf:dr}function kA(t){return yn(t,dAe)}function jf(t){return kA(t)||yn(t,WQ)||yn(t,XQ)}const YQ=39.37,gAe=dr.radius*Math.PI/200,Ile=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Mw=I,Ple=/UNIT\[([^\]]+)]/i,vAe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),bAe=dt()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Cl=t=>t*t,np=t=>t*t*t,t$={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Cl(.001)},"square-centimeters":{inBaseUnits:Cl(.01)},"square-decimeters":{inBaseUnits:Cl(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Cl(1e3)},"square-inches":{inBaseUnits:Cl(.0254)},"square-feet":{inBaseUnits:Cl(.3048)},"square-yards":{inBaseUnits:Cl(.9144)},"square-miles":{inBaseUnits:Cl(1609.344)},"square-nautical-miles":{inBaseUnits:Cl(1852)},"square-us-feet":{inBaseUnits:Cl(1200/3937)},acres:{inBaseUnits:.0015625*Cl(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*np(.001)},"cubic-centimeters":{inBaseUnits:1e3*np(.01)},"cubic-decimeters":{inBaseUnits:1e3*np(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*np(1e3)},"cubic-inches":{inBaseUnits:1e3*np(.0254)},"cubic-feet":{inBaseUnits:1e3*np(.3048)},"cubic-yards":{inBaseUnits:1e3*np(.9144)},"cubic-miles":{inBaseUnits:1e3*np(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},wAe=(()=>{const t={};for(const e in t$)for(const i in t$[e].units)t[i]=e;return t})();function OAe(t,e,i){return t*t$[i].units[e].inBaseUnits}function SAe(t,e,i){return t/t$[i].units[e].inBaseUnits}const Rle=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],_Ae=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function vd(t){const e=wAe[t];if(!e)throw new Error("unknown type");return e}function gW(t,e=null){return e=e||vd(t),t$[e].baseUnit===t}function Dt(t,e,i){if(e===i)return t;const r=vd(e);if(r!==vd(i))throw new Error("incompatible units");const n=gW(e,r)?t:OAe(t,e,r);return gW(i,r)?n:SAe(n,i,r)}function Ayt(t,e,i,r=!1){if(!r&&SO(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=u0(e);return n!==i&&(t=n?Dt(t,n,i):Dt(t*=ma(e),"meters",i)),t}function Iyt(t,e,i,r=!1){if(!r&&SO(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=u0(i);return e!==n&&(t=n?Dt(t,e,n):Dt(t,e,"meters")/ma(i)),t}function xAe(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function Pyt(t){return xAe(t)}function Ryt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function Lle(t,e){const i=Dt(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Nle(t,e){const i=Dt(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function Dle(t,e){const i=Dt(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function Vle(t,e){const i=Dt(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function $Ae(t,e){const i=Dt(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function TAe(t,e){const i=Dt(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function EAe(t,e,i){return Dt(t,e,"meters")/(i*Math.PI/180)}function JQ(t){return bAe.fromJSON(t.toLowerCase())||null}function CA(t){if(t!=null&&!lAe(t))return 1;const e=ma(t);return e>1e5?1:e}function Fle(t){return ma(t)>=yAe(t).metersPerDegree?"meters":u0(t)}function ma(t,e=dr.metersPerDegree){return kAe(t,!0)??e}function kAe(t,e=!1){const i=(t==null?void 0:t.wkid)??null,r=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(i){if(IP(i))return vc.metersPerDegree;if(PP(i))return Nf.metersPerDegree;n=Mw.values[Mw[i]],!n&&e&&vAe.has(i)&&(n=gAe)}else r&&(Ule(r)?n=vW(Ile.exec(r),n):zle(r)&&(n=vW(Ple.exec(r),n)));return n}function Lyt(t){return SO(t)?1:ma(t)}function vW(t,e){return t!=null&&t[1]?jle(t[1]):e}function jle(t){return parseFloat(t.split(",")[1])}function u0(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let r=null;if(e)r=Mw.units[Mw[e]];else if(i){const n=Ule(i)?Ile:zle(i)?Ple:null;if(n){const s=n.exec(i);s!=null&&s[1]&&(r=MAe(s[1]))}}return r!=null?JQ(r):null}function Nyt(t){const e=u0(t);return e!=null&&Rle.includes(e)?e:null}function Dyt(t){const e=Fle(t);return e!=null&&Rle.includes(e)?e:null}function Vyt(t){const e=u0(t);return e==null?null:_Ae.get(e)}function zle(t){return/^GEOCCS/i.test(t)}function Ule(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const CAe=1e-7;function MAe(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!JQ(i)){const r=jle(t);i=null;const n=Mw.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<CAe){i=Mw.units[s];break}}return i}function Fyt(t){const e=u0(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const AAe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},IAe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},PAe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},RAe=dt()(AAe),LAe=dt()(IAe),jyt=dt()(PAe);var Nu;let ci=Nu=class extends K{static fromJSON(t){if(!t)return null;if((t==null?void 0:t.wkid)===102100)return Nu.WebMercator;if((t==null?void 0:t.wkid)===4326)return Nu.WGS84;const e=new Nu;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return Bg(this)}get isWebMercator(){return xc(this)}get isGeographic(){return SO(this)}get isWrappable(){return cAe(this)}get metersPerUnit(){return ma(this)}get unit(){return u0(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Nu.WGS84)return new Nu(Mle);if(this===Nu.WebMercator)return new Nu(Ale);const t=new Nu;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=q(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:r}=t.imageCoordinateSystem,n=this.imageCoordinateSystem;return e==null||r?JSON.stringify(n)===JSON.stringify(t.imageCoordinateSystem):i?n.id===e&&n.referenceServiceName===i:n.id===e}return yn(this,t)}toJSON(t){return this.write(void 0,t)}};ci.GCS_NAD_1927=null,ci.WGS84=null,ci.WebMercator=null,ci.PlateCarree=null,h([f({readOnly:!0})],ci.prototype,"isWGS84",null),h([f({readOnly:!0})],ci.prototype,"isWebMercator",null),h([f({readOnly:!0})],ci.prototype,"isGeographic",null),h([f({readOnly:!0})],ci.prototype,"isWrappable",null),h([f({type:kt,json:{write:!0}})],ci.prototype,"latestWkid",void 0),h([f({readOnly:!0})],ci.prototype,"metersPerUnit",null),h([f({readOnly:!0})],ci.prototype,"unit",null),h([f({type:kt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],ci.prototype,"wkid",void 0),h([f({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],ci.prototype,"wkt",void 0),h([we("wkt"),we("web-scene","wkt")],ci.prototype,"writeWkt",null),h([f({type:String,json:{write:!1}})],ci.prototype,"wkt2",void 0),h([f({type:kt,json:{write:!0}})],ci.prototype,"vcsWkid",void 0),h([f({type:kt,json:{write:!0}})],ci.prototype,"latestVcsWkid",void 0),h([f()],ci.prototype,"imageCoordinateSystem",void 0),ci=Nu=h([A("esri.geometry.SpatialReference")],ci),ci.prototype.toJSON.isDefaultToJSON=!0,ci.GCS_NAD_1927=Ce.freeze(new ci({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),ci.WGS84=Ce.freeze(new ci(Mle)),ci.WebMercator=Ce.freeze(new ci(Ale)),ci.PlateCarree=Ce.freeze(new ci(hAe));const Je=ci;let Du=class extends K{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Je.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Je)return e;if(e!=null){const r=new Je;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};h([f()],Du.prototype,"type",void 0),h([f({readOnly:!0})],Du.prototype,"cache",null),h([f({readOnly:!0})],Du.prototype,"extent",null),h([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Du.prototype,"hasM",void 0),h([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Du.prototype,"hasZ",void 0),h([f({type:Je,json:{write:!0},value:Je.WGS84})],Du.prototype,"spatialReference",void 0),h([ve("spatialReference")],Du.prototype,"readSpatialReference",null),Du=h([A("esri.geometry.Geometry")],Du);const Td=Du;function Aw(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new G("Mesh geometries are not supported for this operation")}function NAe(t){t.forEach(Aw)}const DAe=57.29577951308232,VAe=.017453292519943;function bW(t){return t*DAe}function wW(t){return t*VAe}function Uyt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/dr.radius))}function rV(t){return t.wkid!=null||t.wkt!=null}const G5=[0,0];function MA(t,e,i,r,n){const s=t,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,G5,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,G5,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,G5,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let u;for(let p=0;p<a.length;p++){const m=a[p];u=[],l.push(u);for(let g=0;g<m.length;g++)u.push(e(m[g][0],m[g][1],[0,0],r)),m[g].length>2&&u[g].push(m[g][2]),m[g].length>3&&u[g].push(m[g][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let u=0;u<a.length;u++)l[u]=e(a[u][0],a[u][1],[0,0],r),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return n}function uC(t,e){const i=t&&(rV(t)?t:t.spatialReference),r=e&&(rV(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!yn(r,i)||xc(r)&&Bg(i)||xc(i)&&Bg(r))}function RP(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(rV(e)?e:e.spatialReference);return uC(i,r)?yn(i,r)?q(t):xc(r)?MA(t,Vb,Je.WebMercator,!1,q(t)):Bg(r)?MA(t,LP,Je.WGS84,!1,q(t)):null:null}function Vb(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=wW(e);return i[0]=wW(t)*dr.radius,i[1]=dr.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function LP(t,e,i=[0,0],r=!1){if(t===e$[0])i[0]=-180;else if(t===e$[1])i[0]=180;else{const n=bW(t/dr.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=bW(Math.PI/2-2*Math.atan(Math.exp(-e/dr.radius))),i}function Sf(t,e=!1,i=q(t)){return Aw(t),Aw(i),MA(t,Vb,Je.WebMercator,e,i)}function Fb(t,e=!1,i=q(t)){return Aw(t),Aw(i),MA(t,LP,Je.WGS84,e,i)}function Qle(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}function FAe(t){var e;return((e=Ble(t,qle))==null?void 0:e[0])??null}function jAe(t){var e;return((e=Ble(t,qle))==null?void 0:e[1])??null}function Ble({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(xc(i))return LP(t,e,r);if(SO(i))return r[0]=t,r[1]=e,r}return null}const qle=[0,0];var cC;const Z5=[0,0];function OW(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Ls=cC=class extends Td{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Ce.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new Je(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)pe.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)pe.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const a=Vb(s.longitude,s.latitude,Z5);t=a[0],e=a[1]}}}else OW(i)?(n=i,i=null):OW(r)&&(n=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?pe.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&pe.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return jAe(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Vb(i,t,Z5)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return FAe(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Vb(t,e,Z5)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new cC;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return cC.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:u,spatialReference:p}=t;if(!s.equals(p))if(s.isWebMercator&&p.isWGS84)[l,u]=Vb(l,u),p=s;else{if(!s.isWGS84||!p.isWebMercator)return!1;[l,u]=LP(l,u),p=s}return e===l&&i===u&&r===o&&n===a&&s.wkid===p.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Zs(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return Qle(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};h([f({readOnly:!0})],Ls.prototype,"cache",null),h([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ls.prototype,"hasM",null),h([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ls.prototype,"hasZ",null),h([f({type:Number})],Ls.prototype,"latitude",null),h([f({type:Number})],Ls.prototype,"longitude",null),h([f({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Rt(t=>isNaN(t)?t:Bs(t))],Ls.prototype,"x",void 0),h([we("x")],Ls.prototype,"writeX",null),h([ve("x")],Ls.prototype,"readX",null),h([f({type:Number,json:{write:!0}})],Ls.prototype,"y",void 0),h([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ls.prototype,"z",void 0),h([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ls.prototype,"m",void 0),Ls=cC=h([A("esri.geometry.Point")],Ls),Ls.prototype.toJSON.isDefaultToJSON=!0;const Ot=Ls;let Vu=class extends ft.ClonableMixin(K){constructor(...e){super(...e),this.position=new Ot([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Vae}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=Bs(e.x||0),s.y=Bs(e.y||0),s.z=e.hasZ?Bs(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new Ot;return r.read(e,i),r.x=Bs(r.x||0),r.y=Bs(r.y||0),r.z=r.hasZ?Bs(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};h([f({type:Ot,json:{write:{isRequired:!0}}})],Vu.prototype,"position",void 0),h([we("position")],Vu.prototype,"writePosition",null),h([ve("position")],Vu.prototype,"readPosition",null),h([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Rt(t=>Qae.normalize(Bs(t)))],Vu.prototype,"heading",void 0),h([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Rt(t=>Po(Bs(t),-180,180))],Vu.prototype,"tilt",void 0),h([f({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Rt(t=>Po(Bs(t,55),1,170))],Vu.prototype,"fov",void 0),h([f({type:Vae,nonNullable:!0,json:{read:!1,write:!1}})],Vu.prototype,"layout",void 0),Vu=h([A("esri.Camera")],Vu);const zAe=Vu,H5=[0,0];function m2(t,e){return e!=null&&zs(t,e.x,e.y,e.z)}function Byt(t,e){var i;if(!((i=e.points)!=null&&i.length))return!1;for(const r of e.points)if(!Iw(t,r))return!1;return!0}function UAe(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?zs(t,i,r,n)&&zs(t,i,o,n)&&zs(t,s,o,n)&&zs(t,s,r,n)&&zs(t,i,r,a)&&zs(t,i,o,a)&&zs(t,s,o,a)&&zs(t,s,r,a):zs(t,i,r)&&zs(t,i,o)&&zs(t,s,o)&&zs(t,s,r)}function Iw(t,e){return zs(t,e[0],e[1])}function QAe(t,e){return zs(t,e[0],e[1],e[2])}function zs(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function KQ(t,e){return H5[1]=e.y,H5[0]=e.x,BAe(t,H5)}function BAe(t,e){return e8(t.rings,e)}function e8(t,e){if(!t)return!1;if(qAe(t))return SW(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=SW(i,t[r],e);return i}function qAe(t){return!Array.isArray(t[0][0])}function SW(t,e,i){const[r,n]=i;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[u,p]=e[a],[m,g]=e[o];(p<n&&g>=n||g<n&&p>=n)&&u+(n-p)/(g-p)*(m-u)<r&&(s=!s)}return s}function GAe(t,e){return m2(t,e)}function ZAe(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function HAe(t,e){const{points:i,hasZ:r}=e,n=r?QAe:Iw;for(const s of i)if(n(t,s))return!0;return!1}const qg=[0,0],Gg=[0,0],Zg=[0,0],Hg=[0,0],WAe=[qg,Gg,Zg,Hg],Gle=[[Zg,qg],[qg,Gg],[Gg,Hg],[Hg,Zg]];function XAe(t,e){return YAe(t,e.rings)}function YAe(t,e){qg[0]=t.xmin,qg[1]=t.ymax,Gg[0]=t.xmax,Gg[1]=t.ymax,Zg[0]=t.xmin,Zg[1]=t.ymin,Hg[0]=t.xmax,Hg[1]=t.ymin;for(const i of WAe)if(e8(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(Iw(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(Iw(t,s)||Zle(r,s,Gle))return!0;r=s}}return!1}function JAe(t,e){qg[0]=t.xmin,qg[1]=t.ymax,Gg[0]=t.xmax,Gg[1]=t.ymax,Zg[0]=t.xmin,Zg[1]=t.ymin,Hg[0]=t.xmax,Hg[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(Iw(t,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(Iw(t,o)||Zle(n,o,Gle))return!0;n=o}}return!1}const $n=[0,0];function KAe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const u=t[a][l],p=t[a][l+1];if(nV(s,o,u,p,$n)&&!($n[0]===s[0]&&$n[1]===s[1]||$n[0]===u[0]&&$n[1]===u[1]||$n[0]===o[0]&&$n[1]===o[1]||$n[0]===p[0]&&$n[1]===p[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],a=i[n+1];for(let l=n+2;l<s;l++){const u=i[l],p=i[l+1];if(nV(o,a,u,p,$n)&&!($n[0]===o[0]&&$n[1]===o[1]||$n[0]===u[0]&&$n[1]===u[1]||$n[0]===a[0]&&$n[1]===a[1]||$n[0]===p[0]&&$n[1]===p[1]))return!0}}}return!1}function Zle(t,e,i){for(let r=0;r<i.length;r++)if(nV(t,e,i[r][0],i[r][1]))return!0;return!1}function nV(t,e,i,r,n){const[s,o]=t,[a,l]=e,[u,p]=i,[m,g]=r,w=m-u,O=s-u,_=a-s,x=g-p,T=o-p,E=l-o,k=x*_-w*E;if(k===0)return!1;const M=(w*T-x*O)/k,R=(_*T-E*O)/k;return M>=0&&M<=1&&R>=0&&R<=1&&(n&&(n[0]=s+M*(a-s),n[1]=o+M*(l-o)),!0)}function eIe(t){switch(t){case"esriGeometryEnvelope":case"extent":return ZAe;case"esriGeometryMultipoint":case"multipoint":return HAe;case"esriGeometryPoint":case"point":return GAe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return XAe;case"esriGeometryPolyline":case"polyline":return JAe}}var Nl;function tIe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function sp(t,e,i){return e==null?i:i==null?e:t(e,i)}let nn=Nl=class extends Td{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return tIe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Je.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??Je.WGS84}}static fromPoint(t){return new Nl({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Ot({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Nl;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&uC(e,i)&&(t=e.isWebMercator?Sf(t):Fb(t,!0)),t.type==="point"?m2(this,t):t.type==="extent"&&UAe(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&uC(e,i)&&(t=e.isWebMercator?Sf(t):Fb(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!yn(e,i)&&uC(e,i)&&(t=e.isWebMercator?Sf(t):Fb(t,!0)),eIe(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=sp(Math.min,this.zmin,t.zmin),this.zmax=sp(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=sp(Math.min,this.mmin,t.mmin),this.mmax=sp(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=sp(Math.max,this.zmin,t.zmin),this.zmax=sp(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=sp(Math.max,this.mmin,t.mmin),this.mmax=sp(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Zs(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Fb(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=W5(r.x,t).x),this.spatialReference=new Je(yO((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??Zs(r);if(n==null)return this;const s=this._getParts(n).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const p=(l.zmax-l.zmin)/2;for(let m=0;m<u.length;m++)u[m].push(p)}if(a){const p=(l.mmax-l.mmin)/2;for(let m=0;m<u.length;m++)u[m].push(p)}return u}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let p;t=t||Zs(o);const[m,g]=t.valid;p=W5(this.xmin,t);const w=p.x,O=p.frameId;p=W5(this.xmax,t);const _=p.x,x=p.frameId,T=w===_&&a>0;if(a>2*g){const E=new Nl(l<u?w:_,n,g,s,o),k=new Nl(m,n,l<u?_:w,s,o),M=new Nl(0,n,g,s,o),R=new Nl(m,n,0,s,o),D=[],L=[];E.contains(M)&&D.push(O),E.contains(R)&&L.push(O),k.contains(M)&&D.push(x),k.contains(R)&&L.push(x);for(let F=O+1;F<x;F++)D.push(F),L.push(F);e.push({extent:E,frameIds:[O]},{extent:k,frameIds:[x]},{extent:M,frameIds:D},{extent:R,frameIds:L})}else w>_||T?e.push({extent:new Nl(w,n,g,s,o),frameIds:[O]},{extent:new Nl(m,n,_,s,o),frameIds:[x]}):e.push({extent:new Nl(w,n,_,s,o),frameIds:[O]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}};function W5(t,e){const[i,r]=e.valid,n=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,o=-s),{x:t,frameId:o}}h([f({readOnly:!0})],nn.prototype,"cache",null),h([f({readOnly:!0})],nn.prototype,"center",null),h([f({readOnly:!0})],nn.prototype,"extent",null),h([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],nn.prototype,"hasM",null),h([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],nn.prototype,"hasZ",null),h([f({readOnly:!0})],nn.prototype,"height",null),h([f({readOnly:!0})],nn.prototype,"width",null),h([f({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],nn.prototype,"xmin",void 0),h([f({type:Number,json:{write:!0}})],nn.prototype,"ymin",void 0),h([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],nn.prototype,"mmin",void 0),h([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],nn.prototype,"zmin",void 0),h([f({type:Number,json:{write:!0}})],nn.prototype,"xmax",void 0),h([f({type:Number,json:{write:!0}})],nn.prototype,"ymax",void 0),h([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],nn.prototype,"mmax",void 0),h([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],nn.prototype,"zmax",void 0),nn=Nl=h([A("esri.geometry.Extent")],nn),nn.prototype.toJSON.isDefaultToJSON=!0;const oi=nn;function Pw(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var sV;function _W(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function iIe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let mp=sV=class extends Td{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var n;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):iIe(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=(n=i.points)==null?void 0:n[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new oi,i=this.hasZ,r=this.hasM,n=i?3:2,s=t[0],o=_W(Math.min),a=_W(Math.max);let l,u,p,m,[g,w]=s,[O,_]=s;for(let x=0,T=t.length;x<T;x++){const E=t[x],[k,M]=E;if(g=o(g,k),w=o(w,M),O=a(O,k),_=a(_,M),i&&E.length>2){const R=E[2];l=o(l,R),p=a(p,R)}if(r&&E.length>n){const R=E[n];u=o(u,R),m=a(m,R)}}return e.xmin=g,e.ymin=w,e.xmax=O,e.ymax=_,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=p):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=u,e.mmax=m):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=q(this.points)}addPoint(t){return Pw(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:q(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new sV(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new Ot(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Ot(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Pw(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};h([f({readOnly:!0})],mp.prototype,"cache",null),h([f()],mp.prototype,"extent",null),h([f({type:[[Number]],json:{write:{isRequired:!0}}})],mp.prototype,"points",void 0),h([we("points")],mp.prototype,"writePoints",null),mp=sV=h([A("esri.geometry.Multipoint")],mp),mp.prototype.toJSON.isDefaultToJSON=!0;const y2=mp;function qyt(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function rIe(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var AA;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(AA||(AA={}));function Gyt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let n=!1,s=!1;return r.forEach(o=>{o.hasZ&&(n=!0),o.hasM&&(s=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a})}return null}function NP(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function Hle(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function nIe(t,e,i,r){return sIe(t,e,i[r],i[r+1])}function sIe(t,e,i,r){const[n,s]=e,[o,a]=i,[l,u]=r,p=l-o,m=u-a,g=p*p+m*m,w=(n-o)*p+(s-a)*m,O=Math.min(1,Math.max(0,w/g));return t[0]=o+p*O,t[1]=a+m*O,t}function Zyt(t,e,i,r,n,s){let o=i,a=r,l=n-o,u=s-a;if(l!==0||u!==0){const p=((t-o)*l+(e-a)*u)/(l*l+u*u);p>1?(o=n,a=s):p>0&&(o+=l*p,a+=u*p)}return l=t-o,u=e-a,l*l+u*u}function Wle(t,e){return Hle(t,e,.5)}function Hyt(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=NP(t[r],t[r+1]);return i}function Wyt(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let n=0;n<i-1;++n){const s=NP(t[n],t[n+1]);if(e-r<s){const o=(e-r)/s;return Hle(t[n],t[n+1],o)}r+=s}return t[i-1]}function Xle(t,e=AA.X,i=AA.Y){let r=0;const n=t.length;let s=t[0];for(let o=1;o<n;o++){const a=t[o];r+=(a[e]-s[e])*(a[i]+s[i]),s=a}if(!Yle(t)){const o=t[0];r+=(o[e]-s[e])*(o[i]+s[i])}return r>=0}function Yle(t){const e=t.length;return e<3||vP(t[0],t[e-1])}function Xyt(t){"rings"in t&&(oIe(t),aIe(t))}function oIe(t){if(!("rings"in t))return!1;let e=!1;for(const i of t.rings)Yle(i)||(i.push(i[0].slice()),e=!0);return e}function aIe(t){if(!("rings"in t)||t.rings.length===0||Xle(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function Yyt(t){return t.type!=="polygon"&&t.type!=="polyline"||lIe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function lIe(t,e){const i=Zs(e);if(!i)return;const r=i.valid[0],n=i.valid[1],s=n-r;for(const o of t){let a=1/0,l=-1/0;for(const p of o){const m=uIe(p[0],r,n);a=Math.min(a,m),l=Math.max(l,m),p[0]=m}const u=l-a;s-u<u&&o.forEach(p=>{p[0]<0&&(p[0]+=s)})}}function uIe(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function Jyt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every((n,s)=>n.length===r[s].length)}function Kyt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function cIe(t){return t?hIe(t.rings,t.hasZ??!1):null}function hIe(t,e){if(!(t!=null&&t.length))return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=Jle(t[s],e,n);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?dIe(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function Jle(t,e,i){let r=0,n=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,u=t.length?t[0][1]:0,p=t.length&&e?t[0][2]:0;for(let g=0;g<t.length;g++){const w=t[g],O=t[(g+1)%t.length],[_,x,T]=w,E=_-l,k=x-u,[M,R,D]=O,L=M-l,F=R-u,j=E*F-L*k;if(o+=j,r+=(E+L)*j,n+=(k+F)*j,e&&w.length>2&&O.length>2){const B=T-p,W=D-p,ie=E*W-L*B;s+=(B+W)*ie,a+=ie}_<i[0]&&(i[0]=_),_>i[1]&&(i[1]=_),x<i[2]&&(i[2]=x),x>i[3]&&(i[3]=x),e&&(T<i[4]&&(i[4]=T),T>i[5]&&(i[5]=T))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const m=[r/(6*o)+l,n/(6*o)+u,o];return e&&(i[4]===i[5]||a===0?(m[3]=(i[4]+i[5])/2,m[4]=0):(m[3]=s/(6*a)+p,m[4]=a)),m}function egt(t,e){let i=0,r=0,n=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const u=[t.x,t.y],[p,m]=l,g=p-s,w=m-o,[O,_]=u,x=O-s,T=_-o,E=g*T-x*w;n+=E,i+=(g+x)*E,r+=(w+T)*E,p<e[0]&&(e[0]=p),p>e[1]&&(e[1]=p),m<e[2]&&(e[2]=m),m>e[3]&&(e[3]=m)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+o,n]):null}function dIe(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,u=t.length;l<u-1;l++){const p=t[l],m=t[l+1];if(p&&m){i[0]=p[0],i[1]=p[1],r[0]=m[0],r[1]=m[1],e&&p.length>2&&m.length>2&&(i[2]=p[2],r[2]=m[2]);const g=NP(i,r);if(g){n+=g;const w=Wle(p,m);s+=g*w[0],o+=g*w[1],e&&w.length>2&&(a+=g*w[2])}}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.length?t[0]:null}function pIe(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=Jle(rIe(t),t.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?fIe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function fIe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,u=t.y,p=t.z;for(;t.nextPoint();){const m=t.x,g=t.y,w=t.z;i[0]=l,i[1]=u,r[0]=m,r[1]=g,e&&(i[2]=p,r[2]=w);const O=NP(i,r);if(O){n+=O;const _=Wle(i,r);s+=O*_[0],o+=O*_[1],e&&_.length>2&&(a+=O*_[2])}l=m,u=g,p=w}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const mIe=1e-6;function tgt(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<mIe){const n=pIe(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)gIe(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const yIe=1/3;function gIe(t,e,i){if(!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,o=i.x-r,a=i.y-n,l=0,u=0;for(;i.nextPoint();)l=i.x-r,u=i.y-n,s=.5*yIe*(l*a-u*o),t[0]+=s*(o+l),t[1]+=s*(a+u),o=l,a=u;const p=i.getCurrentRingArea(),m=[r,n];return m[0]-=e[0],m[1]-=e[1],m[0]*=p,m[1]*=p,t[0]+=m[0],t[1]+=m[1],t}function Gs(t=OIe){return[t[0],t[1],t[2],t[3]]}function Kle(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function igt(t,e,i,r,n=Gs()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function rgt(t,e=Gs()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function vIe(t,e,i=new oi){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function ngt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function sgt(t,e,i){if(e!=null)if("length"in e)oV(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else Kle(i,t)}function ogt(t,e,i=t){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const u=e[l];n=Math.min(n,u[0]),s=Math.min(s,u[1]),o=Math.max(o,u[0]),a=Math.max(a,u[1])}return i[0]=n,i[1]=s,i[2]=o,i[3]=a,i}function agt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function t8(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function i8(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function lgt(t){return t8(t)*i8(t)}function ugt(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function cgt(t){const e=t8(t),i=i8(t);return Math.sqrt(e*e+i*i)}function hgt(t,e){return bIe(t,e.x,e.y)}function bIe(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function dgt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function pgt(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function wIe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function fgt(t,e,i,r=t){return r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function mgt(t){return t?Kle(t,xW):Gs(xW)}function oV(t){return t!=null&&t.length===4}function ygt(t,e){return oV(t)&&oV(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const xW=[1/0,1/0,-1/0,-1/0],OIe=[0,0,0,0];function eue(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function tue(t){return t.points!==void 0}function iue(t){return t.x!==void 0&&t.y!==void 0}function rue(t){return t.paths!==void 0}function nue(t){return t.rings!==void 0}function sue(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const hf=sue(Math.min),df=sue(Math.max);function ggt(t,e){return rue(e)?Rw(t,e.paths,!1,!1):nue(e)?Rw(t,e.rings,!1,!1):tue(e)?r8(t,e.points,!1,!1,!1,!1):eue(e)?oue(t,e):(iue(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function vgt(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=SIe(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return Gs([e,r,i,n])}function SIe(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return Gs([e,r,i,n])}function bgt(t,e){return rue(e)?Rw(t,e.paths,!0,!1):nue(e)?Rw(t,e.rings,!0,!1):tue(e)?r8(t,e.points,!0,!1,!0,!1):eue(e)?oue(t,e,!0,!1,!0,!1):(iue(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Rw(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[u,p]=e[0][0],[m,g]=e[0][0];for(let w=0;w<e.length;w++){const O=e[w];for(let _=0;_<O.length;_++){const x=O[_],[T,E]=x;if(u=hf(u,T),p=hf(p,E),m=df(m,T),g=df(g,E),i&&x.length>2){const k=x[2];s=hf(s,k),o=df(o,k)}if(r&&x.length>n){const k=x[n];a=hf(s,k),l=df(o,k)}}}return i?r?(t[0]=u,t[1]=p,t[2]=s,t[3]=a,t[4]=m,t[5]=g,t[6]=o,t[7]=l,t.length=8,t):(t[0]=u,t[1]=p,t[2]=s,t[3]=m,t[4]=g,t[5]=o,t.length=6,t):r?(t[0]=u,t[1]=p,t[2]=a,t[3]=m,t[4]=g,t[5]=l,t.length=6,t):(t[0]=u,t[1]=p,t[2]=m,t[3]=g,t.length=4,t)}function oue(t,e,i,r,n,s){const o=e.xmin,a=e.xmax,l=e.ymin,u=e.ymax;let p=e.zmin,m=e.zmax,g=e.mmin,w=e.mmax;return n?(p=p||0,m=m||0,s?(g=g||0,w=w||0,t[0]=o,t[1]=l,t[2]=p,t[3]=g,t[4]=a,t[5]=u,t[6]=m,t[7]=w,t):(t[0]=o,t[1]=l,t[2]=p,t[3]=a,t[4]=u,t[5]=m,t)):s?(g=g||0,w=w||0,t[0]=o,t[1]=l,t[2]=g,t[3]=a,t[4]=u,t[5]=w,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=u,t)}function r8(t,e,i,r,n,s){const o=i?3:2,a=r&&s,l=i&&n;if(!e.length||!e[0].length)return null;let u,p,m,g,[w,O]=e[0],[_,x]=e[0];for(let T=0;T<e.length;T++){const E=e[T],[k,M]=E;if(w=hf(w,k),O=hf(O,M),_=df(_,k),x=df(x,M),l&&E.length>2){const R=E[2];u=hf(u,R),p=df(p,R)}if(a&&E.length>o){const R=E[o];m=hf(u,R),g=df(p,R)}}return n?(u=u||0,p=p||0,s?(m=m||0,g=g||0,t[0]=w,t[1]=O,t[2]=u,t[3]=m,t[4]=_,t[5]=x,t[6]=p,t[7]=g,t):(t[0]=w,t[1]=O,t[2]=u,t[3]=_,t[4]=x,t[5]=p,t)):s?(m=m||0,g=g||0,t[0]=w,t[1]=O,t[2]=m,t[3]=_,t[4]=x,t[5]=g,t):(t[0]=w,t[1]=O,t[2]=_,t[3]=x,t)}function _Ie(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function xIe(t){return t.points!==void 0}function $Ie(t){return t.x!==void 0&&t.y!==void 0}function TIe(t){return t.paths!==void 0}function EIe(t){return t.rings!==void 0}const n8=[];function aue(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function lue(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function uue(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function cue(t,e,i,r,n,s,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function s8(t,e=!1,i=!1){return e?i?cue(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):lue(t[0],t[1],t[2],t[3],t[4],t[5]):i?uue(t[0],t[1],t[2],t[3],t[4],t[5]):aue(t[0],t[1],t[2],t[3])}function wgt(t){return t?_Ie(t)?t:$Ie(t)?CIe(t):EIe(t)?hue(t):TIe(t)?due(t):xIe(t)?kIe(t):null:null}function kIe(t){const{hasZ:e,hasM:i,points:r}=t;return s8(r8(n8,r,e??!1,i??!1),e,i)}function CIe(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?cue(e,i,r,n,e,i,r,n):lue(e,i,r,e,i,r):s?uue(e,i,n,e,i,n):aue(e,i,e,i)}function hue(t){const{hasZ:e,hasM:i,rings:r}=t,n=Rw(n8,r,e??!1,i??!1);return n?s8(n,e,i):null}function due(t){const{hasZ:e,hasM:i,paths:r}=t,n=Rw(n8,r,e??!1,i??!1);return n?s8(n,e,i):null}var hC;function $W(t){return!Array.isArray(t[0])}function MIe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function AIe(t){var s,o;if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),MIe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=Je.WGS84),{...t,hasM:i,hasZ:r,rings:e,spatialReference:n}}let Ga=hC=class extends Td{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,n=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new hC(s)}constructor(t){super(AIe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const t=cIe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Ot;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}writeCurveRings(t,e){e.curveRings=q(t)}get extent(){const t=hue(this),{spatialReference:e}=this;return t?new oi({...t,spatialReference:e}):null}get isSelfIntersecting(){return KAe(this.rings)}writeRings(t,e){e.rings=q(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if($W(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new hC;return t.spatialReference=this.spatialReference,t.rings=q(this.rings),t.curveRings=q(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,o,a],[l,u,p,m])=>n===l&&s===u&&(o==null&&p==null||o===p)&&(a==null&&m==null||a===m);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=t.rings[n];if(!vP(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=RP(t,this.spatialReference);return KQ(this,e??t)}isClockwise(t){const e=$W(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return Xle(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new Ot(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new Ot(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new Ot(i[0],i[1],i[2],i[3],this.spatialReference):new Ot(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Pw(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ot(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new Ot(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(Pw(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};h([f({readOnly:!0})],Ga.prototype,"cache",null),h([f({readOnly:!0})],Ga.prototype,"centroid",null),h([f({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Ga.prototype,"curveRings",void 0),h([we("curveRings")],Ga.prototype,"writeCurveRings",null),h([f({readOnly:!0})],Ga.prototype,"extent",null),h([f({readOnly:!0})],Ga.prototype,"isSelfIntersecting",null),h([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ga.prototype,"rings",void 0),h([we("rings")],Ga.prototype,"writeRings",null),Ga=hC=h([A("esri.geometry.Polygon")],Ga);const da=Ga;Ga.prototype.toJSON.isDefaultToJSON=!0;var aV;function IIe(t){return!Array.isArray(t[0])}function PIe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function RIe(t){var s,o;if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),PIe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=Je.WGS84),{...t,hasM:i,hasZ:r,paths:e,spatialReference:n}}let nc=aV=class extends Td{constructor(t){super(RIe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=q(t)}get extent(){const t=due(this),{spatialReference:e}=this;return t?new oi({...t,spatialReference:e}):null}writePaths(t,e){e.paths=q(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(IIe(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new aV;return t.spatialReference=this.spatialReference,t.paths=q(this.paths),t.curvePaths=q(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new Ot(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new Ot(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new Ot(i[0],i[1],i[2],i[3],this.spatialReference):new Ot(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Pw(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new Ot(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ot(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(Pw(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};h([f({readOnly:!0})],nc.prototype,"cache",null),h([f({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],nc.prototype,"curvePaths",void 0),h([we("curvePaths")],nc.prototype,"writeCurvePaths",null),h([f({readOnly:!0})],nc.prototype,"extent",null),h([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],nc.prototype,"paths",void 0),h([we("paths")],nc.prototype,"writePaths",null),nc=aV=h([A("esri.geometry.Polyline")],nc);const el=nc;nc.prototype.toJSON.isDefaultToJSON=!0;function pue(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function fue(t){return t.points!==void 0}function mue(t){return t.x!==void 0&&t.y!==void 0}function o8(t){return t.paths!==void 0||t.curvePaths!==void 0}function wg(t){return t.rings!==void 0||t.curveRings!==void 0}function bd(t){return t==null?null:t instanceof Td?t:mue(t)?Ot.fromJSON(t):o8(t)?el.fromJSON(t):wg(t)?da.fromJSON(t):fue(t)?y2.fromJSON(t):pue(t)?oi.fromJSON(t):null}function g2(t){return t?mue(t)?"esriGeometryPoint":o8(t)?"esriGeometryPolyline":wg(t)?"esriGeometryPolygon":pue(t)?"esriGeometryEnvelope":fue(t)?"esriGeometryMultipoint":null:null}const LIe={esriGeometryPoint:Ot,esriGeometryPolyline:el,esriGeometryPolygon:da,esriGeometryEnvelope:oi,esriGeometryMultipoint:y2,esriGeometryMultiPatch:da};function NIe(t){return t&&LIe[t]||null}const DIe=dt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),TW=dt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),_O={base:Td,key:"type",typeMap:{extent:oi,multipoint:y2,point:Ot,polyline:el,polygon:da}};var lV;let yp=lV=class extends K{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new lV({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};h([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:X5}}}}})],yp.prototype,"rotation",void 0),h([Rt("rotation")],yp.prototype,"castRotation",null),h([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:X5}}}}})],yp.prototype,"scale",void 0),h([f({types:_O,json:{read:bd,write:!0,origins:{"web-scene":{read:bd,write:{overridePolicy:X5}}}}})],yp.prototype,"targetGeometry",void 0),h([f({type:zAe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],yp.prototype,"camera",void 0),yp=lV=h([A("esri.Viewpoint")],yp);const fn=yp;function X5(){return{enabled:!this.camera}}let kv=class extends Te{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(SQ(()=>this._refresh(),mu))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(e){return new Te(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};h([f()],kv.prototype,"getCollections",void 0),h([f()],kv.prototype,"getChildrenFunction",void 0),h([f()],kv.prototype,"itemFilterFunction",void 0),kv=h([A("esri.core.CollectionFlattener")],kv);const i$=kv;let IA=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new p2,this._items=new Set}get length(){return rt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return rt(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){rt(this._observable),yield*this._items}};const yue=new FinalizationRegistry(t=>{t.close()});function VIe(t,e){yue.register(t,e,e)}function FIe(t){yue.unregister(t)}function gue(t,e){return new Proxy({},{get:(i,r,n)=>(...s)=>{let o,a;const l=s[s.length-1];return jIe(l)&&(o=l.signal,a=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function jIe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const zIe={statsWorker:()=>J(()=>import("./statsWorker-ClpgqEiL.js"),__vite__mapDeps([2,3,4])),geometryEngineWorker:()=>J(()=>import("./geometryEngineWorker-CA-tZxOm.js"),__vite__mapDeps([5,6,7,1,8])),arcadeGeometryOperatorsWorker:()=>J(()=>import("./operatorsWorker-B4TNZ0p5.js"),[]),CSVSourceWorker:()=>J(()=>import("./CSVSourceWorker-g8TyEeWc.js"),__vite__mapDeps([9,10,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,4,3,25,26,27,28])),EdgeProcessingWorker:()=>J(()=>import("./EdgeProcessingWorker-C9-P9zMO.js"),__vite__mapDeps([29,30,31,32,33,34,35,36,37,38,39])),ElevationSamplerWorker:()=>J(()=>import("./ElevationSamplerWorker-DpFnpV5b.js"),__vite__mapDeps([40,16,41,42,43,44,45,46,47,48,49,32,50])),FeatureServiceSnappingSourceWorker:()=>J(()=>import("./FeatureServiceSnappingSourceWorker-CDVkAFEJ.js"),__vite__mapDeps([51,14,15,11,12,13,16,17,18,8,19,20,21,22,23,24,4,3,25,26,52,53,54,55])),GeoJSONSourceWorker:()=>J(()=>import("./GeoJSONSourceWorker-DHOhjWUK.js"),__vite__mapDeps([56,15,11,12,13,14,16,17,18,8,19,20,21,22,23,24,4,3,25,26,57,10,28,58])),LercWorker:()=>J(()=>import("./LercWorker-B5c-ENj1.js"),[]),MemorySourceWorker:()=>J(()=>import("./MemorySourceWorker-B9BFuzSt.js").then(t=>t.M),__vite__mapDeps([59,15,11,12,13,14,16,17,18,8,19,20,21,22,23,24,4,3,25,26,28,58,10])),PBFDecoderWorker:()=>J(()=>import("./PBFDecoderWorker-BAqF32wz.js"),__vite__mapDeps([60,61,12,15,11,13,53,54])),FeaturePipelineWorker:()=>J(()=>import("./FeaturePipelineWorker-CDuuD5KL.js").then(t=>t.F),__vite__mapDeps([62,63,64,38,65,66,18,8,17,15,11,12,13,23,67,68,69,70,71,72,4,73,74,75,76,77,78,79,80,19,20,21,22,24,3,25,26,81,82,83,55,53,54,57,10,28,58,84,85])),PointCloudWorker:()=>J(()=>import("./PointCloudWorker-CLdpWtdc.js").then(t=>t.P),__vite__mapDeps([86,87,43,88,89,90,36,91,44,45,46,92])),RasterWorker:()=>J(()=>import("./RasterWorker-BNWwKqqx.js").then(t=>t.G),__vite__mapDeps([93,94,1,95])),SceneLayerSnappingSourceWorker:()=>J(()=>import("./SceneLayerSnappingSourceWorker-CUBiyM6v.js"),__vite__mapDeps([96,97,98,43,92,44,88,99,31,32,33,34,35,36,37,38,39])),SceneLayerWorker:()=>J(()=>import("./SceneLayerWorker-kX8AH9jo.js").then(t=>t.S),__vite__mapDeps([100,41,49,101,47,98,43,92,44,88,90,36,102,72,103,104,105,106,91,87,45,46])),WFSSourceWorker:()=>J(()=>import("./WFSSourceWorker-BelyhHk8.js").then(t=>t.a),__vite__mapDeps([107,15,11,12,13,14,16,17,18,8,19,20,21,22,23,24,4,3,25,26,57,10,58])),WorkerTileHandler:()=>J(()=>import("./WorkerTileHandler-BUiK9r8M.js"),__vite__mapDeps([108,109,70,110,54,12,76,111,38,78,68])),Lyr3DWorker:()=>J(()=>import("./Lyr3DWorker-DFqBjPsL.js"),[]),Feature3DPipelineWorker:()=>J(()=>import("./Feature3DPipelineWorker-B9zEm9Zw.js"),__vite__mapDeps([112,20,15,11,12,13,21,22,23,17,18,8,24,4,3,25,26,16,55,53,54,35,113,101,47,114,44,31,32,115,98,43,92,88,97,116,36,105,106,104,117,118,119,91,87,45,46,37,38,120,72,99,121,122,123,89,48,41,124,125,126,103,127])),TextureCompressionWorker:()=>J(()=>import("./TextureCompressionWorker-DGVtWOnh.js"),__vite__mapDeps([128,119]))},vue="worker:port-closed";var In;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(In||(In={}));let UIe=0;function bue(){return UIe++}function QIe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function r$(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function a8(t,e,i,r){if(e.type===In.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==In.INVOKE&&e.type!==In.RESPONSE)return void t.postMessage(e);let n;if(QIe(i)?(n=EW(i.transferList),e.data=i.result):(n=EW(r),e.data=i),n){if(te("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case In.INVOKE:throw o;case In.RESPONSE:return void a8(t,{type:In.RESPONSE,jobId:e.jobId,error:r$(o)})}}}t.postMessage(e,n)}else t.postMessage(e)}function n$(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function EW(t){if(!(t!=null&&t.length))return null;if(te("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!BIe(i));return e.length?e:null}function BIe(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function _gt(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===vue;if(!(vn(e)||i))throw e;return}}const{CLOSE:kW,ABORT:CW,INVOKE:MW,RESPONSE:Z1,OPEN_PORT:AW,ON:qIe}=In,GIe=2;let ZIe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===In.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},zf=class Cv{static connect(e,i){const r=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new Cv(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),Cv.clients.set(s,n),r.port2}static loadWorker(e){const i=zIe[e];return i?i():Promise.resolve(null)}constructor(e,i,r){this._port=e,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new ZIe(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:kW}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new G(vue,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=bue();return new Promise((a,l)=>{if(ca(n))return this._processWork(),void l(Wt());const u=Co(n,()=>{const m=this._outJobs.get(o);m&&(this._outJobs.delete(o),this._processWork(),qi(m.abortHandle),this._post({type:CW,jobId:o}),l(Wt()))}),p={resolve:a,reject:l,abortHandle:u,debugInfo:e};this._outJobs.set(o,p),this._post({type:MW,jobId:o,methodName:e,abortable:n!=null},i,s)})}createInvokeProxy(e){return gue(this,e)}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:In.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),Bt(()=>{r.port1.postMessage({type:In.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:AW,port:e.port2}),e.port1}_processWork(){var o;if(this._outJobs.size>=GIe)return;const e=(o=this._jobQueue)==null?void 0:o.pop();if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.apply(i,r,n).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{qi(e.abortHandle),e.reject(Wt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const r=n$(e);if(r)switch(r.type){case Z1:this._onResponseMessage(r);break;case MW:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case CW:this._onAbortMessage(r);break;case kW:this._onCloseMessage();break;case AW:this._onOpenPortMessage(r);break;case qIe:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Cv.clients.get(this)===e&&e.destroy(),Cv.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n=[],abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,u=this._client,p=u[i];try{if(!p&&i&&i.includes(".")){const m=i.split(".");for(let g=0;g<m.length-1;g++)u=u[m[g]],p=u[m[g+1]]}if(typeof p!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:o?o.signal:null}),l=p.apply(u,n)}catch(m){return void this._post({type:Z1,jobId:r,error:r$(m)})}Rc(l)?(a.set(r,{controller:o,promise:l}),l.then(m=>{a.has(r)&&(a.delete(r),this._post({type:Z1,jobId:r},m))},m=>{a.has(r)&&(a.delete(r),vn(m)||this._post({type:Z1,jobId:r,error:r$(m||{message:`Error encountered at method ${i}`})}))})):this._post({type:Z1,jobId:r},l)}_onOpenPortMessage(e){new Cv(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,s=>{i.postMessage(s)}),n=o2(e.port,"message",s=>{const o=n$(s);(o==null?void 0:o.type)===In.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),qi(o.abortHandle),r?o.reject(G.fromJSON(JSON.parse(r))):o.resolve(n)}_post(e,i,r){return a8(this._port,e,i,r)}};zf.kernelInfo={buildDate:hle,fullVersion:UQ,revision:dle},zf.clients=new Map;let HIe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new IA}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((r,n)=>{let s=!0;const o=a=>{rr(i.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];Rc(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new zf(u,i,this._ongoingJobsQueue),o(r),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new zf(l,i,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Wt(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,FIe(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=ha();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:r,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a==null?void 0:a.jobAdded())}return n.promise}createInvokeProxy(e){return gue(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>r2(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(i[n]=s.openPort()),--r==0&&e(i)})})}get test(){}};const WIe={async request(t,e){var o,a;const i=t.options,r=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=j4(t.url))!=null&&o.after)?r:"array-buffer";const n=await bt(t.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let ox;var ase,lse;const XIe=((ase=globalThis.esriConfig)==null?void 0:ase.locale)??((lse=globalThis.dojoConfig)==null?void 0:lse.locale);var use;const ax=(use=globalThis.document)==null?void 0:use.documentElement;function wue(){var i;const t=ax==null?void 0:ax.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return XIe??t??e??"en"}function Mo(){return ox===void 0&&(ox=wue()),ox}function YIe(t=Mo()){const e=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(t);return e==null?void 0:e[1].toLowerCase()}const dC=[];function l8(t){return dC.push(t),Bt(()=>dC.splice(dC.indexOf(t),1))}const pC=[];function u8(t){return pC.push(t),Bt(()=>pC.splice(pC.indexOf(t),1))}function IW(){const t=wue();ox!==t&&([...pC].forEach(e=>e(t)),ox=t,[...dC].forEach(e=>e(t)))}var cse;(cse=globalThis.addEventListener)==null||cse.call(globalThis,"languagechange",IW),ax&&new MutationObserver(()=>{IW()}).observe(ax,{attributeFilter:["lang"]});const yu="system",Wg="unknown",$c="UTC",JIe=Intl.DateTimeFormat().resolvedOptions().timeZone,PW=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class c0 extends Error{}class KIe extends c0{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class ePe extends c0{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class tPe extends c0{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class jb extends c0{}class Oue extends c0{constructor(e){super(`Invalid unit ${e}`)}}class ms extends c0{}class op extends c0{constructor(){super("Zone is an abstract class")}}const Le="numeric",gu="short",ua="long",PA={year:Le,month:Le,day:Le},Sue={year:Le,month:gu,day:Le},iPe={year:Le,month:gu,day:Le,weekday:gu},_ue={year:Le,month:ua,day:Le},xue={year:Le,month:ua,day:Le,weekday:ua},$ue={hour:Le,minute:Le},Tue={hour:Le,minute:Le,second:Le},Eue={hour:Le,minute:Le,second:Le,timeZoneName:gu},kue={hour:Le,minute:Le,second:Le,timeZoneName:ua},Cue={hour:Le,minute:Le,hourCycle:"h23"},Mue={hour:Le,minute:Le,second:Le,hourCycle:"h23"},Aue={hour:Le,minute:Le,second:Le,hourCycle:"h23",timeZoneName:gu},Iue={hour:Le,minute:Le,second:Le,hourCycle:"h23",timeZoneName:ua},Pue={year:Le,month:Le,day:Le,hour:Le,minute:Le},Rue={year:Le,month:Le,day:Le,hour:Le,minute:Le,second:Le},Lue={year:Le,month:gu,day:Le,hour:Le,minute:Le},Nue={year:Le,month:gu,day:Le,hour:Le,minute:Le,second:Le},rPe={year:Le,month:gu,day:Le,weekday:gu,hour:Le,minute:Le},Due={year:Le,month:ua,day:Le,hour:Le,minute:Le,timeZoneName:gu},Vue={year:Le,month:ua,day:Le,hour:Le,minute:Le,second:Le,timeZoneName:gu},Fue={year:Le,month:ua,day:Le,weekday:ua,hour:Le,minute:Le,timeZoneName:ua},jue={year:Le,month:ua,day:Le,weekday:ua,hour:Le,minute:Le,second:Le,timeZoneName:ua};class h0{get type(){throw new op}get name(){throw new op}get ianaName(){return this.name}get isUniversal(){throw new op}offsetName(e,i){throw new op}formatOffset(e,i){throw new op}offset(e){throw new op}equals(e){throw new op}get isValid(){throw new op}}let Y5=null;class DP extends h0{static get instance(){return Y5===null&&(Y5=new DP),Y5}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Wue(e,i,r)}formatOffset(e,i){return lx(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let fC={};function nPe(t){return fC[t]||(fC[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),fC[t]}const sPe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function oPe(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,a,l,u,p]=r;return[o,n,s,a,l,u,p]}function aPe(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:o}=i[n],a=sPe[s];s==="era"?r[a]=o:wt(a)||(r[a]=parseInt(o,10))}return r}let vE={};class Ro extends h0{static create(e){return vE[e]||(vE[e]=new Ro(e)),vE[e]}static resetCache(){vE={},fC={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ro.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Wue(e,i,r,this.name)}formatOffset(e,i){return lx(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const r=nPe(this.name);let[n,s,o,a,l,u,p]=r.formatToParts?aPe(r,i):oPe(r,i);a==="BC"&&(n=-Math.abs(n)+1);const g=FP({year:n,month:s,day:o,hour:l===24?0:l,minute:u,second:p,millisecond:0});let w=+i;const O=w%1e3;return w-=O>=0?O:1e3+O,(g-w)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let RW={};function lPe(t,e={}){const i=JSON.stringify([t,e]);let r=RW[i];return r||(r=new Intl.ListFormat(t,e),RW[i]=r),r}let uV={};function cV(t,e={}){const i=JSON.stringify([t,e]);let r=uV[i];return r||(r=new Intl.DateTimeFormat(t,e),uV[i]=r),r}let hV={};function uPe(t,e={}){const i=JSON.stringify([t,e]);let r=hV[i];return r||(r=new Intl.NumberFormat(t,e),hV[i]=r),r}let dV={};function cPe(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=dV[n];return s||(s=new Intl.RelativeTimeFormat(t,e),dV[n]=s),s}let AS=null;function hPe(){return AS||(AS=new Intl.DateTimeFormat().resolvedOptions().locale,AS)}let LW={};function dPe(t){let e=LW[t];if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,LW[t]=e}return e}function pPe(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=cV(t).resolvedOptions(),n=t}catch{const l=t.substring(0,i);r=cV(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function fPe(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function mPe(t){const e=[];for(let i=1;i<=12;i++){const r=We.utc(2009,i,1);e.push(t(r))}return e}function yPe(t){const e=[];for(let i=1;i<=7;i++){const r=We.utc(2016,11,13+i);e.push(t(r))}return e}function bE(t,e,i,r){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):r(e)}function gPe(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class vPe{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=uPe(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):f8(e,3);return Wr(i,this.padTo)}}}class bPe{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Ro.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=cV(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class wPe{constructor(e,i,r){this.opts={style:"long",...r},!i&&Zue()&&(this.rtf=cPe(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):QPe(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const OPe={firstDay:1,minimalDays:4,weekend:[6,7]};class di{static fromOpts(e){return di.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,n,s=!1){const o=e||Sr.defaultLocale,a=o||(s?"en-US":hPe()),l=i||Sr.defaultNumberingSystem,u=r||Sr.defaultOutputCalendar,p=pV(n)||Sr.defaultWeekSettings;return new di(a,l,u,p,o)}static resetCache(){AS=null,uV={},hV={},dV={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return di.create(e,i,r,n)}constructor(e,i,r,n,s){const[o,a,l]=pPe(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||l||null,this.weekSettings=n,this.intl=fPe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=gPe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:di.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,pV(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return bE(this,e,Jue,()=>{const r=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=mPe(s=>this.extract(s,r,"month"))),this.monthsCache[n][e]})}weekdays(e,i=!1){return bE(this,e,tce,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=yPe(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return bE(this,void 0,()=>ice,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[We.utc(2016,11,13,9),We.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return bE(this,e,rce,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[We.utc(-40,1,1),We.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new vPe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new bPe(e,this.intl,i)}relFormatter(e={}){return new wPe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return lPe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Hue()?dPe(this.locale):OPe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let J5=null;class Rn extends h0{static get utcInstance(){return J5===null&&(J5=new Rn(0)),J5}static instance(e){return e===0?Rn.utcInstance:new Rn(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Rn(jP(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${lx(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${lx(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return lx(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class SPe extends h0{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function of(t,e){if(wt(t)||t===null)return e;if(t instanceof h0)return t;if(kPe(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?DP.instance:i==="utc"||i==="gmt"?Rn.utcInstance:Rn.parseSpecifier(i)||Ro.create(t)}else return _f(t)?Rn.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new SPe(t)}const c8={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},NW={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},_Pe=c8.hanidec.replace(/[\[|\]]/g,"").split("");function xPe(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(c8.hanidec)!==-1)e+=_Pe.indexOf(t[i]);else for(const n in NW){const[s,o]=NW[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let Mv={};function $Pe(){Mv={}}function Ml({numberingSystem:t},e=""){const i=t||"latn";return Mv[i]||(Mv[i]={}),Mv[i][e]||(Mv[i][e]=new RegExp(`${c8[i]}${e}`)),Mv[i][e]}let DW=()=>Date.now(),VW="system",FW=null,jW=null,zW=null,UW=60,QW,BW=null;class Sr{static get now(){return DW}static set now(e){DW=e}static set defaultZone(e){VW=e}static get defaultZone(){return of(VW,DP.instance)}static get defaultLocale(){return FW}static set defaultLocale(e){FW=e}static get defaultNumberingSystem(){return jW}static set defaultNumberingSystem(e){jW=e}static get defaultOutputCalendar(){return zW}static set defaultOutputCalendar(e){zW=e}static get defaultWeekSettings(){return BW}static set defaultWeekSettings(e){BW=pV(e)}static get twoDigitCutoffYear(){return UW}static set twoDigitCutoffYear(e){UW=e%100}static get throwOnInvalid(){return QW}static set throwOnInvalid(e){QW=e}static resetCaches(){di.resetCache(),Ro.resetCache(),We.resetCache(),$Pe()}}class uu{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const zue=[0,31,59,90,120,151,181,212,243,273,304,334],Uue=[0,31,60,91,121,152,182,213,244,274,305,335];function tl(t,e){return new uu("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function h8(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function Que(t,e,i){return i+(v2(t)?Uue:zue)[e-1]}function Bue(t,e){const i=v2(t)?Uue:zue,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function d8(t,e){return(t-e+7)%7+1}function RA(t,e=4,i=1){const{year:r,month:n,day:s}=t,o=Que(r,n,s),a=d8(h8(r,n,s),i);let l=Math.floor((o-a+14-e)/7),u;return l<1?(u=r-1,l=s$(u,e,i)):l>s$(r,e,i)?(u=r+1,l=1):u=r,{weekYear:u,weekNumber:l,weekday:a,...zP(t)}}function qW(t,e=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=t,o=d8(h8(r,1,e),i),a=iw(r);let l=n*7+s-o-7+e,u;l<1?(u=r-1,l+=iw(u)):l>a?(u=r+1,l-=iw(r)):u=r;const{month:p,day:m}=Bue(u,l);return{year:u,month:p,day:m,...zP(t)}}function K5(t){const{year:e,month:i,day:r}=t,n=Que(e,i,r);return{year:e,ordinal:n,...zP(t)}}function GW(t){const{year:e,ordinal:i}=t,{month:r,day:n}=Bue(e,i);return{year:e,month:r,day:n,...zP(t)}}function ZW(t,e){if(!wt(t.localWeekday)||!wt(t.localWeekNumber)||!wt(t.localWeekYear)){if(!wt(t.weekday)||!wt(t.weekNumber)||!wt(t.weekYear))throw new jb("Cannot mix locale-based week fields with ISO-based week fields");return wt(t.localWeekday)||(t.weekday=t.localWeekday),wt(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),wt(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function TPe(t,e=4,i=1){const r=VP(t.weekYear),n=il(t.weekNumber,1,s$(t.weekYear,e,i)),s=il(t.weekday,1,7);return r?n?s?!1:tl("weekday",t.weekday):tl("week",t.weekNumber):tl("weekYear",t.weekYear)}function EPe(t){const e=VP(t.year),i=il(t.ordinal,1,iw(t.year));return e?i?!1:tl("ordinal",t.ordinal):tl("year",t.year)}function que(t){const e=VP(t.year),i=il(t.month,1,12),r=il(t.day,1,LA(t.year,t.month));return e?i?r?!1:tl("day",t.day):tl("month",t.month):tl("year",t.year)}function Gue(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=il(e,0,23)||e===24&&i===0&&r===0&&n===0,o=il(i,0,59),a=il(r,0,59),l=il(n,0,999);return s?o?a?l?!1:tl("millisecond",n):tl("second",r):tl("minute",i):tl("hour",e)}function wt(t){return typeof t>"u"}function _f(t){return typeof t=="number"}function VP(t){return typeof t=="number"&&t%1===0}function kPe(t){return typeof t=="string"}function CPe(t){return Object.prototype.toString.call(t)==="[object Date]"}function Zue(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Hue(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function MPe(t){return Array.isArray(t)?t:[t]}function HW(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function APe(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function Lw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pV(t){if(t==null)return null;if(typeof t!="object")throw new ms("Week settings must be an object");if(!il(t.firstDay,1,7)||!il(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!il(e,1,7)))throw new ms("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function il(t,e,i){return VP(t)&&t>=e&&t<=i}function IPe(t,e){return t-e*Math.floor(t/e)}function Wr(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Hp(t){if(!(wt(t)||t===null||t===""))return parseInt(t,10)}function Fm(t){if(!(wt(t)||t===null||t===""))return parseFloat(t)}function p8(t){if(!(wt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function f8(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function v2(t){return t%4===0&&(t%100!==0||t%400===0)}function iw(t){return v2(t)?366:365}function LA(t,e){const i=IPe(e-1,12)+1,r=t+(e-i)/12;return i===2?v2(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function FP(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function WW(t,e,i){return-d8(h8(t,1,e),i)+e-1}function s$(t,e=4,i=1){const r=WW(t,e,i),n=WW(t+1,e,i);return(iw(t)-r+n)/7}function fV(t){return t>99?t:t>Sr.twoDigitCutoffYear?1900+t:2e3+t}function Wue(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function jP(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function Xue(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ms(`Invalid unit value ${t}`);return e}function NA(t,e){const i={};for(const r in t)if(Lw(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=Xue(n)}return i}function lx(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${Wr(i,2)}:${Wr(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${Wr(i,2)}${Wr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function zP(t){return APe(t,["hour","minute","second","millisecond"])}const PPe=["January","February","March","April","May","June","July","August","September","October","November","December"],Yue=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],RPe=["J","F","M","A","M","J","J","A","S","O","N","D"];function Jue(t){switch(t){case"narrow":return[...RPe];case"short":return[...Yue];case"long":return[...PPe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Kue=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ece=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],LPe=["M","T","W","T","F","S","S"];function tce(t){switch(t){case"narrow":return[...LPe];case"short":return[...ece];case"long":return[...Kue];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const ice=["AM","PM"],NPe=["Before Christ","Anno Domini"],DPe=["BC","AD"],VPe=["B","A"];function rce(t){switch(t){case"narrow":return[...VPe];case"short":return[...DPe];case"long":return[...NPe];default:return null}}function FPe(t){return ice[t.hour<12?0:1]}function jPe(t,e){return tce(e)[t.weekday-1]}function zPe(t,e){return Jue(e)[t.month-1]}function UPe(t,e){return rce(e)[t.year<0?0:1]}function QPe(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const m=t==="days";switch(e){case 1:return m?"tomorrow":`next ${n[t][0]}`;case-1:return m?"yesterday":`last ${n[t][0]}`;case 0:return m?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=n[t],p=r?l?u[1]:u[2]||u[1]:l?n[t][0]:t;return o?`${a} ${p} ago`:`in ${a} ${p}`}function XW(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const BPe={D:PA,DD:Sue,DDD:_ue,DDDD:xue,t:$ue,tt:Tue,ttt:Eue,tttt:kue,T:Cue,TT:Mue,TTT:Aue,TTTT:Iue,f:Pue,ff:Lue,fff:Due,ffff:Fue,F:Rue,FF:Nue,FFF:Vue,FFFF:jue};class bs{static create(e,i={}){return new bs(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||a===i?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return BPe[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Wr(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(w,O)=>this.loc.extract(e,w,O),o=w=>e.isOffsetFixed&&e.offset===0&&w.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,w.format):"",a=()=>r?FPe(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(w,O)=>r?zPe(e,w):s(O?{month:w}:{month:w,day:"numeric"},"month"),u=(w,O)=>r?jPe(e,w):s(O?{weekday:w}:{weekday:w,month:"long",day:"numeric"},"weekday"),p=w=>{const O=bs.macroTokenToFormatOpts(w);return O?this.formatWithSystemDefault(e,O):w},m=w=>r?UPe(e,w):s({era:w},"era"),g=w=>{switch(w){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return m("short");case"GG":return m("long");case"GGGGG":return m("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(w)}};return XW(bs.parseFormat(i),g)}formatDurationFromString(e,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>u=>{const p=r(u);return p?this.num(l.get(p),u.length):u},s=bs.parseFormat(i),o=s.reduce((l,{literal:u,val:p})=>u?l:l.concat(p),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return XW(s,n(a))}}const nce=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function xO(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function $O(...t){return e=>t.reduce(([i,r,n],s)=>{const[o,a,l]=s(e,n);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function TO(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function sce(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=Hp(e[i+n]);return[r,null,i+n]}}const oce=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,qPe=`(?:${oce.source}?(?:\\[(${nce.source})\\])?)?`,m8=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ace=RegExp(`${m8.source}${qPe}`),y8=RegExp(`(?:T${ace.source})?`),GPe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ZPe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,HPe=/(\d{4})-?(\d{3})/,WPe=sce("weekYear","weekNumber","weekDay"),XPe=sce("year","ordinal"),YPe=/(\d{4})-(\d\d)-(\d\d)/,lce=RegExp(`${m8.source} ?(?:${oce.source}|(${nce.source}))?`),JPe=RegExp(`(?: ${lce.source})?`);function rw(t,e,i){const r=t[e];return wt(r)?i:Hp(r)}function KPe(t,e){return[{year:rw(t,e),month:rw(t,e+1,1),day:rw(t,e+2,1)},null,e+3]}function EO(t,e){return[{hours:rw(t,e,0),minutes:rw(t,e+1,0),seconds:rw(t,e+2,0),milliseconds:p8(t[e+3])},null,e+4]}function b2(t,e){const i=!t[e]&&!t[e+1],r=jP(t[e+1],t[e+2]),n=i?null:Rn.instance(r);return[{},n,e+3]}function w2(t,e){const i=t[e]?Ro.create(t[e]):null;return[{},i,e+1]}const eRe=RegExp(`^T?${m8.source}$`),tRe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function iRe(t){const[e,i,r,n,s,o,a,l,u]=t,p=e[0]==="-",m=l&&l[0]==="-",g=(w,O=!1)=>w!==void 0&&(O||w&&p)?-w:w;return[{years:g(Fm(i)),months:g(Fm(r)),weeks:g(Fm(n)),days:g(Fm(s)),hours:g(Fm(o)),minutes:g(Fm(a)),seconds:g(Fm(l),l==="-0"),milliseconds:g(p8(u),m)}]}const rRe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function g8(t,e,i,r,n,s,o){const a={year:e.length===2?fV(Hp(e)):Hp(e),month:Yue.indexOf(i)+1,day:Hp(r),hour:Hp(n),minute:Hp(s)};return o&&(a.second=Hp(o)),t&&(a.weekday=t.length>3?Kue.indexOf(t)+1:ece.indexOf(t)+1),a}const nRe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function sRe(t){const[,e,i,r,n,s,o,a,l,u,p,m]=t,g=g8(e,n,r,i,s,o,a);let w;return l?w=rRe[l]:u?w=0:w=jP(p,m),[g,new Rn(w)]}function oRe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const aRe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,lRe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,uRe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function YW(t){const[,e,i,r,n,s,o,a]=t;return[g8(e,n,r,i,s,o,a),Rn.utcInstance]}function cRe(t){const[,e,i,r,n,s,o,a]=t;return[g8(e,a,i,r,n,s,o),Rn.utcInstance]}const hRe=xO(GPe,y8),dRe=xO(ZPe,y8),pRe=xO(HPe,y8),fRe=xO(ace),uce=$O(KPe,EO,b2,w2),mRe=$O(WPe,EO,b2,w2),yRe=$O(XPe,EO,b2,w2),gRe=$O(EO,b2,w2);function vRe(t){return TO(t,[hRe,uce],[dRe,mRe],[pRe,yRe],[fRe,gRe])}function bRe(t){return TO(oRe(t),[nRe,sRe])}function wRe(t){return TO(t,[aRe,YW],[lRe,YW],[uRe,cRe])}function ORe(t){return TO(t,[tRe,iRe])}const SRe=$O(EO);function _Re(t){return TO(t,[eRe,SRe])}const xRe=xO(YPe,JPe),$Re=xO(lce),TRe=$O(EO,b2,w2);function ERe(t){return TO(t,[xRe,uce],[$Re,TRe])}const JW="Invalid Duration",cce={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},kRe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...cce},Pa=146097/400,ev=146097/4800,CRe={years:{quarters:4,months:12,weeks:Pa/7,days:Pa,hours:Pa*24,minutes:Pa*24*60,seconds:Pa*24*60*60,milliseconds:Pa*24*60*60*1e3},quarters:{months:3,weeks:Pa/28,days:Pa/4,hours:Pa*24/4,minutes:Pa*24*60/4,seconds:Pa*24*60*60/4,milliseconds:Pa*24*60*60*1e3/4},months:{weeks:ev/7,days:ev,hours:ev*24,minutes:ev*24*60,seconds:ev*24*60*60,milliseconds:ev*24*60*60*1e3},...cce},lg=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],MRe=lg.slice(0).reverse();function ap(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Gt(r)}function hce(t,e){let i=e.milliseconds??0;for(const r of MRe.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function KW(t,e){const i=hce(t,e)<0?-1:1;lg.reduceRight((r,n)=>{if(wt(e[n]))return r;if(r){const s=e[r]*i,o=t[n][r],a=Math.floor(s/o);e[n]+=a*i,e[r]-=a*o*i}return n},null),lg.reduce((r,n)=>{if(wt(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*t[r][n]}return n},null)}function ARe(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class Gt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?CRe:kRe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||di.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return Gt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new ms(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Gt({values:NA(e,Gt.normalizeUnit),loc:di.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(_f(e))return Gt.fromMillis(e);if(Gt.isDuration(e))return e;if(typeof e=="object")return Gt.fromObject(e);throw new ms(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=ORe(e);return r?Gt.fromObject(r,i):Gt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=_Re(e);return r?Gt.fromObject(r,i):Gt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new ms("need to specify a reason the Duration is invalid");const r=e instanceof uu?e:new uu(e,i);if(Sr.throwOnInvalid)throw new tPe(r);return new Gt({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new Oue(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?bs.create(this.loc,r).formatDurationFromString(this,e):JW}toHuman(e={}){if(!this.isValid)return JW;const i=lg.map(r=>{const n=this.values[r];return wt(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=f8(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},We.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?hce(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Gt.fromDurationLike(e),r={};for(const n of lg)(Lw(i.values,n)||Lw(this.values,n))&&(r[n]=i.get(n)+this.get(n));return ap(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=Gt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Xue(e(this.values[r],r));return ap(this,{values:i},!0)}get(e){return this[Gt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...NA(e,Gt.normalizeUnit)};return ap(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return ap(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return KW(this.matrix,e),ap(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=ARe(this.normalize().shiftToAll().toObject());return ap(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Gt.normalizeUnit(o));const i={},r={},n=this.toObject();let s;for(const o of lg)if(e.indexOf(o)>=0){s=o;let a=0;for(const u in r)a+=this.matrix[u][o]*r[u],r[u]=0;_f(n[o])&&(a+=n[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else _f(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(i[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return KW(this.matrix,i),ap(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return ap(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of lg)if(!i(this.values[r],e.values[r]))return!1;return!0}}const tv="Invalid Interval";function IRe(t,e){return!t||!t.isValid?Or.invalid("missing or invalid start"):!e||!e.isValid?Or.invalid("missing or invalid end"):e<t?Or.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Or{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new ms("need to specify a reason the Interval is invalid");const r=e instanceof uu?e:new uu(e,i);if(Sr.throwOnInvalid)throw new ePe(r);return new Or({invalid:r})}static fromDateTimes(e,i){const r=H1(e),n=H1(i),s=IRe(r,n);return s??new Or({start:r,end:n})}static after(e,i){const r=Gt.fromDurationLike(i),n=H1(e);return Or.fromDateTimes(n,n.plus(r))}static before(e,i){const r=Gt.fromDurationLike(i),n=H1(e);return Or.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=We.fromISO(r,i),o=s.isValid}catch{o=!1}let a,l;try{a=We.fromISO(n,i),l=a.isValid}catch{l=!1}if(o&&l)return Or.fromDateTimes(s,a);if(o){const u=Gt.fromISO(n,i);if(u.isValid)return Or.after(s,u)}else if(l){const u=Gt.fromISO(r,i);if(u.isValid)return Or.before(a,u)}}return Or.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Or.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(H1).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;r.push(Or.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(e){const i=Gt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(Or.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Or.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Or.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&n.push(Or.fromDateTimes(i,l.time)),i=null);return Or.merge(n)}difference(...e){return Or.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:tv}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=PA,i={}){return this.isValid?bs.create(this.s.loc.clone(i),e).formatInterval(this):tv}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:tv}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:tv}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:tv}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:tv}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Gt.invalid(this.invalidReason)}mapEndpoints(e){return Or.fromDateTimes(e(this.s),e(this.e))}}class wE{static hasDST(e=Sr.defaultZone){const i=We.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Ro.isValidZone(e)}static normalizeZone(e){return of(e,Sr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||di.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||di.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||di.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||di.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||di.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||di.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||di.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return di.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return di.create(i,null,"gregory").eras(e)}static features(){return{relative:Zue(),localeWeek:Hue()}}}function eX(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(Gt.fromMillis(r).as("days"))}function PRe(t,e,i){const r=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const p=eX(l,u);return(p-p%7)/7}],["days",eX]],n={},s=t;let o,a;for(const[l,u]of r)i.indexOf(l)>=0&&(o=l,n[l]=u(t,e),a=s.plus(n),a>e?(n[l]--,t=s.plus(n),t>e&&(a=t,n[l]--,t=s.plus(n))):t=a);return[t,n,a,o]}function RRe(t,e,i,r){let[n,s,o,a]=PRe(t,e,i);const l=e-n,u=i.filter(m=>["hours","minutes","seconds","milliseconds"].indexOf(m)>=0);u.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const p=Gt.fromObject(s,r);return u.length>0?Gt.fromMillis(l,r).shiftTo(...u).plus(p):p}const LRe="missing Intl.DateTimeFormat.formatToParts support";function ni(t,e=i=>i){return{regex:t,deser:([i])=>e(xPe(i))}}const NRe="",dce=`[ ${NRe}]`,pce=new RegExp(dce,"g");function DRe(t){return t.replace(/\./g,"\\.?").replace(pce,dce)}function tX(t){return t.replace(/\./g,"").replace(pce," ").toLowerCase()}function Al(t,e){return t===null?null:{regex:RegExp(t.map(DRe).join("|")),deser:([i])=>t.findIndex(r=>tX(i)===tX(r))+e}}function iX(t,e){return{regex:t,deser:([,i,r])=>jP(i,r),groups:e}}function OE(t){return{regex:t,deser:([e])=>e}}function VRe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function FRe(t,e){const i=Ml(e),r=Ml(e,"{2}"),n=Ml(e,"{3}"),s=Ml(e,"{4}"),o=Ml(e,"{6}"),a=Ml(e,"{1,2}"),l=Ml(e,"{1,3}"),u=Ml(e,"{1,6}"),p=Ml(e,"{1,9}"),m=Ml(e,"{2,4}"),g=Ml(e,"{4,6}"),w=x=>({regex:RegExp(VRe(x.val)),deser:([T])=>T,literal:!0}),_=(x=>{if(t.literal)return w(x);switch(x.val){case"G":return Al(e.eras("short"),0);case"GG":return Al(e.eras("long"),0);case"y":return ni(u);case"yy":return ni(m,fV);case"yyyy":return ni(s);case"yyyyy":return ni(g);case"yyyyyy":return ni(o);case"M":return ni(a);case"MM":return ni(r);case"MMM":return Al(e.months("short",!0),1);case"MMMM":return Al(e.months("long",!0),1);case"L":return ni(a);case"LL":return ni(r);case"LLL":return Al(e.months("short",!1),1);case"LLLL":return Al(e.months("long",!1),1);case"d":return ni(a);case"dd":return ni(r);case"o":return ni(l);case"ooo":return ni(n);case"HH":return ni(r);case"H":return ni(a);case"hh":return ni(r);case"h":return ni(a);case"mm":return ni(r);case"m":return ni(a);case"q":return ni(a);case"qq":return ni(r);case"s":return ni(a);case"ss":return ni(r);case"S":return ni(l);case"SSS":return ni(n);case"u":return OE(p);case"uu":return OE(a);case"uuu":return ni(i);case"a":return Al(e.meridiems(),0);case"kkkk":return ni(s);case"kk":return ni(m,fV);case"W":return ni(a);case"WW":return ni(r);case"E":case"c":return ni(i);case"EEE":return Al(e.weekdays("short",!1),1);case"EEEE":return Al(e.weekdays("long",!1),1);case"ccc":return Al(e.weekdays("short",!0),1);case"cccc":return Al(e.weekdays("long",!0),1);case"Z":case"ZZ":return iX(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return iX(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return OE(/[a-z_+-/]{1,256}?/i);case" ":return OE(/[^\S\n\r]/);default:return w(x)}})(t)||{invalidReason:LRe};return _.token=t,_}const jRe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function zRe(t,e,i){const{type:r,value:n}=t;if(r==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=jRe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function URe(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function QRe(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const o in i)if(Lw(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function BRe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return wt(t.z)||(i=Ro.create(t.z)),wt(t.Z)||(i||(i=new Rn(t.Z)),r=t.Z),wt(t.q)||(t.M=(t.q-1)*3+1),wt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),wt(t.u)||(t.S=p8(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),i,r]}let eN=null;function qRe(){return eN||(eN=We.fromMillis(1555555555555)),eN}function GRe(t,e){if(t.literal)return t;const i=bs.macroTokenToFormatOpts(t.val),r=gce(i,e);return r==null||r.includes(void 0)?t:r}function fce(t,e){return Array.prototype.concat(...t.map(i=>GRe(i,e)))}class mce{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=fce(bs.parseFormat(i),e),this.units=this.tokens.map(r=>FRe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=URe(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,r]=QRe(e,this.regex,this.handlers),[n,s,o]=r?BRe(r):[null,null,void 0];if(Lw(r,"a")&&Lw(r,"H"))throw new jb("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function yce(t,e,i){return new mce(t,i).explainFromTokens(e)}function ZRe(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=yce(t,e,i);return[r,n,s,o]}function gce(t,e){if(!t)return null;const r=bs.create(e,t).dtFormatter(qRe()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(o=>zRe(o,t,s))}const tN="Invalid DateTime",HRe=864e13;function IS(t){return new uu("unsupported zone",`the zone "${t.name}" is not supported`)}function iN(t){return t.weekData===null&&(t.weekData=RA(t.c)),t.weekData}function rN(t){return t.localWeekData===null&&(t.localWeekData=RA(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function jm(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new We({...i,...e,old:i})}function vce(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function SE(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function mC(t,e,i){return vce(FP(t),e,i)}function rX(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,LA(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Gt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=FP(s);let[l,u]=vce(a,i,t.zone);return o!==0&&(l+=o,u=t.zone.offset(l)),{ts:l,o:u}}function iv(t,e,i,r,n,s){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,u=We.fromObject(t,{...i,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return We.invalid(new uu("unparsable",`the input "${n}" can't be parsed as ${r}`))}function _E(t,e,i=!0){return t.isValid?bs.create(di.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function nN(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=Wr(t.c.year,i?6:4),e?(r+="-",r+=Wr(t.c.month),r+="-",r+=Wr(t.c.day)):(r+=Wr(t.c.month),r+=Wr(t.c.day)),r}function nX(t,e,i,r,n,s){let o=Wr(t.c.hour);return e?(o+=":",o+=Wr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=Wr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=Wr(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Wr(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Wr(Math.trunc(-t.o/60)),o+=":",o+=Wr(Math.trunc(-t.o%60))):(o+="+",o+=Wr(Math.trunc(t.o/60)),o+=":",o+=Wr(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const bce={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},WRe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},XRe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},wce=["year","month","day","hour","minute","second","millisecond"],YRe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],JRe=["year","ordinal","hour","minute","second","millisecond"];function KRe(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Oue(t);return e}function sX(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return KRe(t)}}function e3e(t){return gC[t]||(yC===void 0&&(yC=Sr.now()),gC[t]=t.offset(yC)),gC[t]}function oX(t,e){const i=of(e.zone,Sr.defaultZone);if(!i.isValid)return We.invalid(IS(i));const r=di.fromObject(e);let n,s;if(wt(t.year))n=Sr.now();else{for(const l of wce)wt(t[l])&&(t[l]=bce[l]);const o=que(t)||Gue(t);if(o)return We.invalid(o);const a=e3e(i);[n,s]=mC(t,a,i)}return new We({ts:n,zone:i,loc:r,o:s})}function aX(t,e,i){const r=wt(i.round)?!0:i.round,n=(o,a)=>(o=f8(o,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),s=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return n(s(i.unit),i.unit);for(const o of i.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(t>e?-0:0,i.units[i.units.length-1])}function lX(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let yC,gC={};class We{constructor(e){const i=e.zone||Sr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new uu("invalid input"):null)||(i.isValid?null:IS(i));this.ts=wt(e.ts)?Sr.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const a=_f(e.o)&&!e.old?e.o:i.offset(this.ts);n=SE(this.ts,a),r=Number.isNaN(n.year)?new uu("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=i,this.loc=e.loc||di.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new We({})}static local(){const[e,i]=lX(arguments),[r,n,s,o,a,l,u]=i;return oX({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){const[e,i]=lX(arguments),[r,n,s,o,a,l,u]=i;return e.zone=Rn.utcInstance,oX({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,i={}){const r=CPe(e)?e.valueOf():NaN;if(Number.isNaN(r))return We.invalid("invalid input");const n=of(i.zone,Sr.defaultZone);return n.isValid?new We({ts:r,zone:n,loc:di.fromObject(i)}):We.invalid(IS(n))}static fromMillis(e,i={}){if(_f(e))return e<-864e13||e>HRe?We.invalid("Timestamp out of range"):new We({ts:e,zone:of(i.zone,Sr.defaultZone),loc:di.fromObject(i)});throw new ms(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(_f(e))return new We({ts:e*1e3,zone:of(i.zone,Sr.defaultZone),loc:di.fromObject(i)});throw new ms("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=of(i.zone,Sr.defaultZone);if(!r.isValid)return We.invalid(IS(r));const n=di.fromObject(i),s=NA(e,sX),{minDaysInFirstWeek:o,startOfWeek:a}=ZW(s,n),l=Sr.now(),u=wt(i.specificOffset)?r.offset(l):i.specificOffset,p=!wt(s.ordinal),m=!wt(s.year),g=!wt(s.month)||!wt(s.day),w=m||g,O=s.weekYear||s.weekNumber;if((w||p)&&O)throw new jb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(g&&p)throw new jb("Can't mix ordinal dates with month/day");const _=O||s.weekday&&!w;let x,T,E=SE(l,u);_?(x=YRe,T=WRe,E=RA(E,o,a)):p?(x=JRe,T=XRe,E=K5(E)):(x=wce,T=bce);let k=!1;for(const B of x){const W=s[B];wt(W)?k?s[B]=T[B]:s[B]=E[B]:k=!0}const M=_?TPe(s,o,a):p?EPe(s):que(s),R=M||Gue(s);if(R)return We.invalid(R);const D=_?qW(s,o,a):p?GW(s):s,[L,F]=mC(D,u,r),j=new We({ts:L,zone:r,o:F,loc:n});return s.weekday&&w&&e.weekday!==j.weekday?We.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${j.toISO()}`):j.isValid?j:We.invalid(j.invalid)}static fromISO(e,i={}){const[r,n]=vRe(e);return iv(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=bRe(e);return iv(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=wRe(e);return iv(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(wt(e)||wt(i))throw new ms("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=di.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,u,p]=ZRe(o,e,i);return p?We.invalid(p):iv(a,l,r,`format ${i}`,e,u)}static fromString(e,i,r={}){return We.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=ERe(e);return iv(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new ms("need to specify a reason the DateTime is invalid");const r=e instanceof uu?e:new uu(e,i);if(Sr.throwOnInvalid)throw new KIe(r);return new We({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=gce(e,di.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return fce(bs.parseFormat(e),di.fromObject(i)).map(n=>n.val).join("")}static resetCache(){yC=void 0,gC={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?iN(this).weekYear:NaN}get weekNumber(){return this.isValid?iN(this).weekNumber:NaN}get weekday(){return this.isValid?iN(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?rN(this).weekday:NaN}get localWeekNumber(){return this.isValid?rN(this).weekNumber:NaN}get localWeekYear(){return this.isValid?rN(this).weekYear:NaN}get ordinal(){return this.isValid?K5(this.c).ordinal:NaN}get monthShort(){return this.isValid?wE.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?wE.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?wE.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?wE.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=FP(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-n*i),a=this.zone.offset(r-s*i);if(o===a)return[this];const l=r-o*i,u=r-a*i,p=SE(l,o),m=SE(u,a);return p.hour===m.hour&&p.minute===m.minute&&p.second===m.second&&p.millisecond===m.millisecond?[jm(this,{ts:l}),jm(this,{ts:u})]:[this]}get isInLeapYear(){return v2(this.year)}get daysInMonth(){return LA(this.year,this.month)}get daysInYear(){return this.isValid?iw(this.year):NaN}get weeksInWeekYear(){return this.isValid?s$(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?s$(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=bs.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(Rn.instance(e),i)}toLocal(){return this.setZone(Sr.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=of(e,Sr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),o=this.toObject();[n]=mC(o,s,e)}return jm(this,{ts:n,zone:e})}else return We.invalid(IS(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return jm(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=NA(e,sX),{minDaysInFirstWeek:r,startOfWeek:n}=ZW(i,this.loc),s=!wt(i.weekYear)||!wt(i.weekNumber)||!wt(i.weekday),o=!wt(i.ordinal),a=!wt(i.year),l=!wt(i.month)||!wt(i.day),u=a||l,p=i.weekYear||i.weekNumber;if((u||o)&&p)throw new jb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new jb("Can't mix ordinal dates with month/day");let m;s?m=qW({...RA(this.c,r,n),...i},r,n):wt(i.ordinal)?(m={...this.toObject(),...i},wt(i.day)&&(m.day=Math.min(LA(m.year,m.month),m.day))):m=GW({...K5(this.c),...i});const[g,w]=mC(m,this.o,this.zone);return jm(this,{ts:g,o:w})}plus(e){if(!this.isValid)return this;const i=Gt.fromDurationLike(e);return jm(this,rX(this,i))}minus(e){if(!this.isValid)return this;const i=Gt.fromDurationLike(e).negate();return jm(this,rX(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=Gt.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?bs.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):tN}toLocaleString(e=PA,i={}){return this.isValid?bs.create(this.loc.clone(i),e).formatDateTime(this):tN}toLocaleParts(e={}){return this.isValid?bs.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=nN(this,o);return a+="T",a+=nX(this,o,i,r,n,s),a}toISODate({format:e="extended"}={}){return this.isValid?nN(this,e==="extended"):null}toISOWeekDate(){return _E(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+nX(this,o==="extended",i,e,r,s):null}toRFC2822(){return _E(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return _E(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?nN(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),_E(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():tN}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return Gt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=MPe(i).map(Gt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=RRe(a,l,s,n);return o?u.negate():u}diffNow(e="milliseconds",i={}){return this.diff(We.now(),e,i)}until(e){return this.isValid?Or.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,r)<=n&&n<=s.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||We.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),aX(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?aX(e.base||We.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(We.isDateTime))throw new ms("min requires all arguments be DateTimes");return HW(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(We.isDateTime))throw new ms("max requires all arguments be DateTimes");return HW(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=di.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return yce(o,e,i)}static fromStringExplain(e,i,r={}){return We.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:n=null}=i,s=di.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new mce(s,e)}static fromFormatParser(e,i,r={}){if(wt(e)||wt(i))throw new ms("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=r,o=di.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!o.equals(i.locale))throw new ms(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:l,specificOffset:u,invalidReason:p}=i.explainFromTokens(e);return p?We.invalid(p):iv(a,l,r,`format ${i.format}`,e,u)}static get DATE_SHORT(){return PA}static get DATE_MED(){return Sue}static get DATE_MED_WITH_WEEKDAY(){return iPe}static get DATE_FULL(){return _ue}static get DATE_HUGE(){return xue}static get TIME_SIMPLE(){return $ue}static get TIME_WITH_SECONDS(){return Tue}static get TIME_WITH_SHORT_OFFSET(){return Eue}static get TIME_WITH_LONG_OFFSET(){return kue}static get TIME_24_SIMPLE(){return Cue}static get TIME_24_WITH_SECONDS(){return Mue}static get TIME_24_WITH_SHORT_OFFSET(){return Aue}static get TIME_24_WITH_LONG_OFFSET(){return Iue}static get DATETIME_SHORT(){return Pue}static get DATETIME_SHORT_WITH_SECONDS(){return Rue}static get DATETIME_MED(){return Lue}static get DATETIME_MED_WITH_SECONDS(){return Nue}static get DATETIME_MED_WITH_WEEKDAY(){return rPe}static get DATETIME_FULL(){return Due}static get DATETIME_FULL_WITH_SECONDS(){return Vue}static get DATETIME_HUGE(){return Fue}static get DATETIME_HUGE_WITH_SECONDS(){return jue}}function H1(t){if(We.isDateTime(t))return t;if(t&&t.valueOf&&_f(t.valueOf()))return We.fromJSDate(t);if(t&&typeof t=="object")return We.fromObject(t);throw new ms(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const t3e="shortOffset";function i3e(t){return"timeZoneIANA"in t}function r3e(t){return t.startsWith("UTC")}function DA(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?vC(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?n3e(i):null}}}}}function vC(t,e=yu){return t?i3e(t)?t.timeZoneIANA:s3e(t,e):e}function n3e(t){return{timeZoneIANA:t}}function s3e(t,e=yu){if(!t||!PW.has(t.timeZone))return e;const i=PW.get(t.timeZone);return r3e(t.timeZone)||t.respectsDaylightSaving?i:o3e(i)}function o3e(t){const e=We.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Rn.instance(-i).formatOffset(0,"narrow")}`}function a3e(t,e,i,r,n){if(e&&n==="date")return{timeZone:$c,timeZoneName:void 0};const s=r.timeStyle||r.hour,o=i===Wg;return{timeZone:o?n==="timestamp-offset"?void 0:t??$c:i,timeZoneName:o&&s?t3e:void 0}}function l3e(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===yu||t===Wg||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const u3e={year:void 0,month:void 0,day:void 0,weekday:void 0},c3e={hour:void 0,minute:void 0,second:void 0},Oce={timeZone:$c},Mu={year:"numeric",month:"numeric",day:"numeric"},W1={year:"numeric",month:"long",day:"numeric"},X1={year:"numeric",month:"short",day:"numeric"},Y1={year:"numeric",month:"long",weekday:"long",day:"numeric"},Wp={hour:"numeric",minute:"numeric"},ey={...Wp,second:"numeric"},Sce={hourCycle:"h23"},J1={...Wp,...Sce},K1={...ey,...Sce},_ce={"short-date":Mu,"short-date-short-time":{...Mu,...Wp},"short-date-short-time-24":{...Mu,...J1},"short-date-long-time":{...Mu,...ey},"short-date-long-time-24":{...Mu,...K1},"short-date-le":Mu,"short-date-le-short-time":{...Mu,...Wp},"short-date-le-short-time-24":{...Mu,...J1},"short-date-le-long-time":{...Mu,...ey},"short-date-le-long-time-24":{...Mu,...K1},"long-month-day-year":W1,"long-month-day-year-short-time":{...W1,...Wp},"long-month-day-year-short-time-24":{...W1,...J1},"long-month-day-year-long-time":{...W1,...ey},"long-month-day-year-long-time-24":{...W1,...K1},"day-short-month-year":X1,"day-short-month-year-short-time":{...X1,...Wp},"day-short-month-year-short-time-24":{...X1,...J1},"day-short-month-year-long-time":{...X1,...ey},"day-short-month-year-long-time-24":{...X1,...K1},"long-date":Y1,"long-date-short-time":{...Y1,...Wp},"long-date-short-time-24":{...Y1,...J1},"long-date-long-time":{...Y1,...ey},"long-date-long-time-24":{...Y1,...K1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Wp,"long-time":ey},h3e=dt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),xce={ar:"ar-u-nu-latn-ca-gregory"};let mV=new WeakMap;const UP=_ce["short-date-short-time"];function d3e(t){let e=mV.get(t);if(!e){const i=Mo(),r=xce[i]||i,n=v8(t.timeZone??yu),s={...t,timeZone:n};e=new Intl.DateTimeFormat(r,s),mV.set(t,e)}return e}function Av(t){return _ce[t]}function rl(t,e=UP){return d3e(e).format(t)}function p3e(t,e=UP){return rl(new Date(t),{...e,...Oce,...c3e})}function f3e(t,e=UP){return rl(new Date(`1970-01-01T${t}Z`),{...e,...Oce,...u3e})}function m3e(t,e=UP){if(e.timeZone)return rl(new Date(t),e);const i=We.fromISO(t,{setZone:!0}),r=Mo(),n=xce[r]??r,s=i.offset===0?$c:e.timeZone,o={...e,timeZone:s};return i.toLocaleString(o,{locale:n})}function v8(t){switch(t){case yu:return JIe;case Wg:return $c;default:return t}}u8(()=>{mV=new WeakMap});const y3e={ar:"ar-u-nu-latn"};let bC=new WeakMap,$ce={};function yV(t){const e=t||$ce;if(!bC.has(e)){const i=Mo(),r=y3e[Mo()]||i;bC.set(e,new Intl.NumberFormat(r,t))}return bC.get(e)}function Tgt(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function pa(t,e){return Object.is(t,-0)&&(t=0),yV(e).format(t)}function Egt(t,e=Mo()){var r,n;if(!t)return null;let i=uX.get(e);if(!i){const s=yV().formatToParts(12345.6),o=[...yV({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((w,O)=>[w,O])),l=new RegExp(`[${(r=s.find(w=>w.type==="group"))==null?void 0:r.value}]`,"g"),u=new RegExp(`[${(n=s.find(w=>w.type==="decimal"))==null?void 0:n.value}]`),p=new RegExp(`[${o.join("")}]`,"g"),m=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,g=/[-\u2212\u2013\u2014\u2015]/g;i=w=>{if((w=w.trim().replaceAll(l,"").replace(u,".").replace(p,_=>String(a.get(_))).replaceAll(m,"").replaceAll(g,"-"))==="")return null;const O=Number(w);return isNaN(O)?null:O},uX.set(e,i)}return i(t)}u8(()=>{bC=new WeakMap,$ce={}});const uX=new Map,Tce=()=>pe.getLogger("esri.intl.substitute");function o$(t,e,i={}){const{format:r={}}=i;return yO(t,n=>g3e(n,e,r))}function g3e(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const o=t2(r,e);if(o==null)return"";const a=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return a?v3e(o,a):n?b3e(o,n):b8(o)}function v3e(t,e){switch(e.type){case"date":return rl(t,e.intlOptions);case"number":return pa(t,e.intlOptions);default:return Tce().warn("missing format descriptor for key {key}"),b8(t)}}function b3e(t,e){switch(e.toLowerCase()){case"dateformat":return rl(t);case"numberformat":return pa(t);default:return Tce().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?rl(t):/^numberformat/i.test(e)?pa(t):b8(t)}}function b8(t){switch(typeof t){case"string":return t;case"number":return pa(t);case"boolean":return""+t;default:return t instanceof Date?rl(t):""}}const cX=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Ece={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function w3e(t){return t in Ece}function hX(t){if(w3e(t)){const e=Ece[t];return e===!0?t:e}return null}const PS=[],nw=new Map;function dX(t){for(const e of nw.keys())Cce(t.pattern,e)&&nw.delete(e)}function O3e(t){return PS.includes(t)||(dX(t),PS.unshift(t)),Bt(()=>{const e=PS.indexOf(t);e>-1&&(PS.splice(e,1),dX(t))})}async function w8(t){const e=Mo();nw.has(t)||nw.set(t,S3e(t,e));const i=nw.get(t);return i&&await _3e.add(i),i}function kce(t){if(!cX.test(t))return null;const e=cX.exec(t);if(e===null)return null;const[,i,r]=e;return hX(i+(r?"-"+r.toUpperCase():""))??hX(i)}async function S3e(t,e){const i=[];for(const r of PS)if(Cce(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new G("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new G("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function Cce(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}u8(()=>{nw.clear()});const _3e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ha())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function x3e(t,e,i,r){const n=e.exec(i);if(!n)throw new G("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=kce(r),l=`${s}${o}.json`,u=a?`${s}${o}_${a}.json`:l;let p;try{p=await pX(t(u))}catch(m){if(u===l)throw new G("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m});try{p=await pX(t(l))}catch(g){throw new G("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:g})}}return p}async function pX(t){if(fX.fetchBundleAsset!=null)return fX.fetchBundleAsset(t);const e=await bt(t,{responseType:"text"});return JSON.parse(e.data)}let $3e=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return x3e(this.getAssetUrl,this.matcher,e,i)}};function T3e(t){return new $3e(t)}const fX={};O3e(T3e({pattern:"esri/",location:zi}));const mX={};function E3e(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...mX.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=mX.baseUrl),e}let k3e=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},wC=class{constructor(){this._dispatcher=new k3e,this._workerPostMessage({type:In.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){aA(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){aA(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=n$(e);if(i&&i.type===In.OPEN){const{modulePath:r,jobId:n}=i;let s=await zf.loadWorker(r);s||(s=await import(r));const o=zf.connect(s);this._workerPostMessage({type:In.OPENED,jobId:n,data:o})}}};const gV=()=>pe.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:C3e}=In,M3e='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let xE,$E;const yX="Failed to create Worker. Fallback to execute module in main thread";async function A3e(){if(!te("esri-workers"))return gX(new wC);if(!xE&&!$E)try{const e=M3e.split("{CONFIGURATION}").join(I3e());xE=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){$E=e||{}}let t;if(xE)try{t=new Worker(xE,{name:"esri-worker-"+P3e++})}catch{gV().warn(yX,$E),t=new wC}else gV().warn(yX,$E),t=new wC;return gX(t)}async function gX(t){return new Promise(e=>{function i(n){const s=n$(n);s&&s.type===C3e&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),gV().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new wC).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function I3e(){let t;if(Ht.default!=null){const n={...Ht};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Ht));t.assetsPath=na(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?na(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Mo(),t.has={"esri-csp-restrictions":te("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":te("esri-2d-update-debug"),"esri-2d-log-updating":te("esri-2d-log-updating"),"featurelayer-pbf":te("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":te("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":te("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":te("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":te("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":te("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":te("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":te("featurelayer-snapshot-enabled"),"esri-atomics":te("esri-atomics"),"esri-shared-array-buffer":te("esri-shared-array-buffer"),"esri-tiles-debug":te("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":te("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":te("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=na(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=na(t.workers.workerPath):t.workers.workerPath=na(zi("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Ht.workers.loaderConfig,i=E3e({baseUrl:e==null?void 0:e.baseUrl,locale:Mo(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:hle,fullVersion:UQ,revision:dle}})}let P3e=0;const{ABORT:vX,INVOKE:R3e,OPEN:L3e,OPENED:N3e,RESPONSE:eS}=In;let D3e=class Mce{static async create(e){const i=await A3e();return new Mce(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),pe.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=bue();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:vQ(r,()=>{this._outJobs.delete(n),this._post({type:vX,jobId:n})})};this._outJobs.set(n,a),this._post({type:L3e,jobId:n,modulePath:e})})}_onMessage(e){const i=n$(e);if(i)switch(i.type){case N3e:this._onOpenedMessage(i);break;case eS:this._onResponseMessage(i);break;case vX:this._onAbortMessage(i);break;case R3e:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=WIe[i];let u;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);u=l.call(null,n,{signal:o?o.signal:null})}catch(p){return void this._post({type:eS,jobId:r,error:r$(p)})}Rc(u)?(a.set(r,{controller:o,promise:u}),u.then(p=>{a.has(r)&&(a.delete(r),this._post({type:eS,jobId:r},p))},p=>{a.has(r)&&(a.delete(r),p||(p={message:"Error encountered at method"+i}),vn(p)||this._post({type:eS,jobId:r,error:r$(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:eS,jobId:r},u)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),qi(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),qi(s.abortHandle),r?s.reject(G.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return a8(this.worker,e,i,r)}};const bX=te("host-browser")?Math.min(navigator.hardwareConcurrency-1,te("workers-pool-size")??8):0;let ug=te("esri-mobile")?Math.min(bX,3):bX;ug||(ug=te("safari")&&te("mac")?7:2);let wX=0;const OC=[];function V3e(){Ace()}async function TE(t,e){const i=new HIe,{registryTarget:r,...n}=e;return await i.open(t,n),r&&VIe(r,i),i}async function F3e(t,e={}){if(typeof t!="string")throw new G("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(te("host-webworker")&&!te("esri-workers")&&(i="local"),i==="local"){let r=await zf.loadWorker(t);r||(r=await import(t)),rr(e.signal);const n=e.client||r;return TE([zf.connect(r,e.schedule)],{...e,client:n})}if(await Ace(),rr(e.signal),i==="dedicated"){const r=wX++%ug;return TE([await OC[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,ug);if(r<ug){const n=new Array(r);for(let s=0;s<r;++s){const o=wX++%ug;n[s]=OC[o].open(t,e)}return TE(n,e)}}return TE(OC.map(r=>r.open(t,e)),e)}let EE=null;async function Ace(){if(EE)return EE;new AbortController;const t=[];for(let e=0;e<ug;e++){const i=D3e.create(e).then(r=>(OC[e]=r,r));t.push(i)}return EE=Promise.all(t),EE}function tm(){return[0,0,0]}function O8(t){return[t[0],t[1],t[2]]}function kO(t,e,i){return[t,e,i]}function j3e(t,e,i){return[t,e,i]}function z3e(t,e=tm()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function U3e(t,e){return new Float64Array(t,e,3)}function Ice(){return tm()}function Pce(){return kO(1,1,1)}function Rce(){return kO(1,0,0)}function Lce(){return kO(0,1,0)}function Nce(){return kO(0,0,1)}const Q3e=Ice(),Dce=Pce(),B3e=Rce(),q3e=Lce(),G3e=Nce();Object.freeze(Object.defineProperty({__proto__:null,ONES:Dce,UNIT_X:B3e,UNIT_Y:q3e,UNIT_Z:G3e,ZEROS:Q3e,clone:O8,create:tm,createView:U3e,freeze:j3e,fromArray:z3e,fromValues:kO,ones:Pce,unitX:Rce,unitY:Lce,unitZ:Nce,zeros:Ice},Symbol.toStringTag,{value:"Module"}));const Agt=Math.PI/180,Igt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,lp=dr.radius,Il=dr.eccentricitySquared,Z3e={a1:lp*Il,a2:lp*Il*lp*Il,a3:lp*Il*Il/2,a4:lp*Il*lp*Il*2.5,a5:lp*Il+lp*Il*Il/2,a6:1-Il},Pgt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:dr.radius,f:dr.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Nf.radius,f:Nf.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:vc.radius,f:vc.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:vc.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var Y;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(Y||(Y={}));const H3e={[Y.WGS84]:{[Y.CGCS2000]:ji,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:ji,[Y.SPHERICAL_ECEF]:cx,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:sw,[Y.PLATE_CARREE]:ow,[Y.WGS84]:ji,[Y.WGS84_ECEF]:uw},[Y.CGCS2000]:{[Y.CGCS2000]:ji,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:ji,[Y.SPHERICAL_ECEF]:cx,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:sw,[Y.PLATE_CARREE]:ow,[Y.WGS84]:ji,[Y.WGS84_ECEF]:uw},[Y.GCSMARS2000]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:ji,[Y.GCSMOON2000]:null,[Y.LON_LAT]:ji,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:_X,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.GCSMOON2000]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:ji,[Y.LON_LAT]:ji,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:SX,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.WEB_MERCATOR]:{[Y.CGCS2000]:ux,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:ux,[Y.SPHERICAL_ECEF]:X3e,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:ji,[Y.PLATE_CARREE]:K3e,[Y.WGS84]:ux,[Y.WGS84_ECEF]:Y3e},[Y.WGS84_ECEF]:{[Y.CGCS2000]:cw,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:cw,[Y.SPHERICAL_ECEF]:lLe,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:uLe,[Y.PLATE_CARREE]:eLe,[Y.WGS84]:cw,[Y.WGS84_ECEF]:ji},[Y.SPHERICAL_ECEF]:{[Y.CGCS2000]:lw,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:lw,[Y.SPHERICAL_ECEF]:ji,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:sLe,[Y.PLATE_CARREE]:tLe,[Y.WGS84]:lw,[Y.WGS84_ECEF]:oLe},[Y.SPHERICAL_MARS_PCPF]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:$X,[Y.GCSMOON2000]:null,[Y.LON_LAT]:$X,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:ji,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.SPHERICAL_MOON_PCPF]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:xX,[Y.LON_LAT]:xX,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:ji,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.UNKNOWN]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:null,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:ji,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.LON_LAT]:{[Y.CGCS2000]:ji,[Y.GCSMARS2000]:ji,[Y.GCSMOON2000]:ji,[Y.LON_LAT]:ji,[Y.SPHERICAL_ECEF]:cx,[Y.SPHERICAL_MARS_PCPF]:_X,[Y.SPHERICAL_MOON_PCPF]:SX,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:sw,[Y.PLATE_CARREE]:ow,[Y.WGS84]:ji,[Y.WGS84_ECEF]:uw},[Y.PLATE_CARREE]:{[Y.CGCS2000]:aw,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:aw,[Y.SPHERICAL_ECEF]:iLe,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:rLe,[Y.PLATE_CARREE]:ji,[Y.WGS84]:aw,[Y.WGS84_ECEF]:nLe}};function Vce(t,e){var i;return(i=W3e(t,e))==null?void 0:i.projector}function W3e(t,e){if(t==null||e==null)return null;if(uh.source.spatialReference===t&&uh.dest.spatialReference===e)return uh;const i=OX(t,uh.source),r=OX(e,uh.dest);return i===Y.UNKNOWN&&r===Y.UNKNOWN?yn(t,e)?uh.projector=ji:uh.projector=null:uh.projector=H3e[i][r],uh}function OX(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=ma(t,1)),kA(t)?e.spatialReferenceId=Y.SPHERICAL_ECEF:Bg(t)?e.spatialReferenceId=Y.WGS84:xc(t)?e.spatialReferenceId=Y.WEB_MERCATOR:uAe(t)?e.spatialReferenceId=Y.PLATE_CARREE:t.wkt===pAe.wkt?e.spatialReferenceId=Y.WGS84_ECEF:t.wkid===Qg.CGCS2000?e.spatialReferenceId=Y.CGCS2000:t.wkt===WQ.wkt?e.spatialReferenceId=Y.SPHERICAL_MARS_PCPF:t.wkt===XQ.wkt?e.spatialReferenceId=Y.SPHERICAL_MOON_PCPF:kle(t)?e.spatialReferenceId=Y.GCSMARS2000:Cle(t)?e.spatialReferenceId=Y.GCSMOON2000:e.spatialReferenceId=Y.UNKNOWN):Y.UNKNOWN}function ji(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function ux(t,e,i,r){i[r]=Dw*(t[e]/Og),i[r+1]=Dw*(Fce-2*Math.atan(Math.exp(-t[e+1]/Og))),i[r+2]=t[e+2]}function X3e(t,e,i,r){const n=t[e]/Og,s=Fce-2*Math.atan(Math.exp(-t[e+1]/Og)),o=Og+t[e+2],a=Math.cos(s)*o;i[r]=Math.cos(n)*a,i[r+1]=Math.sin(n)*a,i[r+2]=Math.sin(s)*o}function Y3e(t,e,i,r){ux(t,e,i,r),uw(i,r,i,r)}function J3e(t,e,i,r,n){const s=.4999999*Math.PI,o=Po(Nw*t[e+1],-s,s),a=Math.sin(o);i[r++]=Nw*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function sw(t,e,i,r){J3e(t,e,i,r,dr)}function ow(t,e,i,r){i[r]=t[e]*TX,i[r+1]=t[e+1]*TX,i[r+2]=t[e+2]}function aw(t,e,i,r){i[r]=t[e]*EX,i[r+1]=t[e+1]*EX,i[r+2]=t[e+2]}function K3e(t,e,i,r){ux(t,e,i,r),ow(i,r,i,r)}function eLe(t,e,i,r){cw(t,e,i,r),ow(i,r,i,r)}function tLe(t,e,i,r){lw(t,e,i,r),ow(i,r,i,r)}function iLe(t,e,i,r){aw(t,e,i,r),cx(i,r,i,r)}function rLe(t,e,i,r){aw(t,e,i,r),sw(i,r,i,r)}function nLe(t,e,i,r){aw(t,e,i,r),uw(i,r,i,r)}function S8(t,e,i,r,n){const s=n+t[e+2],o=Nw*t[e+1],a=Nw*t[e],l=Math.cos(o)*s;i[r]=Math.cos(a)*l,i[r+1]=Math.sin(a)*l,i[r+2]=Math.sin(o)*s}function SX(t,e,i,r){S8(t,e,i,r,Nf.radius)}function _X(t,e,i,r){S8(t,e,i,r,vc.radius)}function cx(t,e,i,r){S8(t,e,i,r,dr.radius)}function _8(t,e,i,r,n){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),u=LCe(a/(l===0?1:l)),p=Math.atan2(o,s);i[r++]=Dw*p,i[r++]=Dw*u,i[r]=l-n}function xX(t,e,i,r){_8(t,e,i,r,Nf.radius)}function $X(t,e,i,r){_8(t,e,i,r,vc.radius)}function lw(t,e,i,r){_8(t,e,i,r,dr.radius)}function sLe(t,e,i,r){lw(t,e,i,r),sw(i,r,i,r)}function oLe(t,e,i,r){lw(t,e,i,r),uw(i,r,i,r)}function aLe(t,e,i,r,n){const s=Nw*t[e],o=Nw*t[e+1],a=t[e+2],l=Math.sin(o),u=Math.cos(o),p=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(p+a)*u*Math.cos(s),i[r++]=(p+a)*u*Math.sin(s),i[r++]=(p*(1-n.eccentricitySquared)+a)*l}function uw(t,e,i,r){aLe(t,e,i,r,dr)}function cw(t,e,i,r){const n=Z3e,s=t[e],o=t[e+1],a=t[e+2];let l,u,p,m,g,w,O,_,x,T,E,k,M,R,D,L,F,j,B,W,ie;l=Math.abs(a),u=s*s+o*o,p=Math.sqrt(u),m=u+a*a,g=Math.sqrt(m),W=Math.atan2(o,s),w=a*a/m,O=u/m,R=n.a2/g,D=n.a3-n.a4/g,O>.3?(_=l/g*(1+O*(n.a1+R+w*D)/g),B=Math.asin(_),T=_*_,x=Math.sqrt(1-T)):(x=p/g*(1-w*(n.a5-R-O*D)/g),B=Math.acos(x),T=1-x*x,_=Math.sqrt(T)),E=1-dr.eccentricitySquared*T,k=dr.radius/Math.sqrt(E),M=n.a6*k,R=p-k*x,D=l-M*_,F=x*R+_*D,L=x*D-_*R,j=L/(M/E+F),B+=j,ie=F+L*j/2,a<0&&(B=-B),i[r++]=Dw*W,i[r++]=Dw*B,i[r]=ie}function lLe(t,e,i,r){cw(t,e,i,r),cx(i,r,i,r)}function uLe(t,e,i,r){cw(t,e,i,r),sw(i,r,i,r)}const uh={source:{spatialReference:null,spatialReferenceId:Y.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Y.UNKNOWN,metersPerUnit:1},projector:ji},Nw=kP(1),Dw=Fae(1),Fce=.5*Math.PI,Og=dr.radius,TX=Og*Math.PI/180,EX=180/(Og*Math.PI);function O2(t,e,i,r,n,s,o=Math.floor(t.length/3)){const a=Vce(e,n);if(a==null)return!1;if(a===ji){if(t===r&&i===s)return!0;const u=i+3*o;for(let p=i,m=s;p<u;p++,m++)r[m]=t[p];return!0}const l=i+3*o;for(let u=i,p=s;u<l;u+=3,p+=3)a(t,u,r,p);return!0}const Rgt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:O2},Symbol.toStringTag,{value:"Module"}));function kX(t,e,i,r,n,s){return kE[0]=t,kE[1]=e,kE[2]=i,O2(kE,r,0,n,s,0)}const kE=tm();let CE=0,sN=class vV{static fromGE(e){const i=new vV;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=CE++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=CE++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=CE++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=CE++}getInverse(){const e=new vV;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},VA=class RS{static cacheKey(e,i){var r,n,s,o,a,l;return[((r=e.wkid)==null?void 0:r.toString())??"-1",((n=e.wkt)==null?void 0:n.toString())??"",((s=e.wkt2)==null?void 0:s.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((a=i.wkt)==null?void 0:a.toString())??"",((l=i.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(e){const i=new RS;let r="";for(const n of e.steps){const s=sN.fromGE(n);i.steps.push(s),r+=s.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof sN?this.steps.push(i):this.steps.push(new sN({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new RS;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[RS.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[RS.cacheKey(e,i)];return n===void 0?null:n}};function jce(t,e,i){if(e==null||i==null||i.vcsWkid||yn(e,i)||jf(e)||jf(i))return null;const r=CA(e)/CA(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>cLe(n,r);case"polyline":case"esriGeometryPolyline":return n=>dLe(n,r);case"polygon":case"esriGeometryPolygon":return n=>hLe(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>pLe(n,r);case"extent":case"esriGeometryEnvelope":return n=>fLe(n,r);default:return null}}function cLe(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function hLe(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function dLe(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function pLe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function fLe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let pu=null,Uf=null,hx=null,SC={};const x8=new p2;function im(){return!!pu&&ZQ()}function zce(){return!!im()||(rt(x8),Qf(),!1)}function Uce(t,e){return!t||!e||Tc(t,e)||zce()}function mLe(t,e){return!Tc(t,e)&&!im()}function Qf(t){return hx==null&&(hx=Promise.all([Sle(),J(()=>import("./geometryEngineBase-B0ZyeKAX.js"),__vite__mapDeps([7,1])).then(e=>e.g),J(()=>import("./hydrated-CEf7vDKJ.js"),[])])),hx.then(([,e,{hydratedAdapter:i}])=>{rr(t),Uf=i,pu=e.default,pu._enableProjection(sAe),x8.notify()})}function rm(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:(NAe(t),bV(Uf,t,t[0].spatialReference,e,i,r)):(Aw(t),bV(Uf,[t],t.spatialReference,e,i,r)[0])}function bV(t,e,i,r,n=null,s=null){if(i==null||r==null)return e;if(Tc(i,r,n))return e.map(o=>_C(o,i,r));if(n==null&&kA(i))return e.map(o=>_C(o,i,Je.WGS84)).map(o=>a$(o,r));if(n==null&&kA(r))return e.map(o=>a$(o,Je.WGS84)).map(o=>_C(o,Je.WGS84,r));if(n==null){const o=VA.cacheKey(i,r);SC[o]!==void 0?n=SC[o]:((n=Bce(i,r,void 0))==null&&(n=new VA),SC[o]=n)}if(pu==null||t==null)throw new QP;return s!=null?pu._project(t,e,i,r,n,s):pu._project(t,e,i,r,n)}function yLe(t,e){const i=Qce([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Qce(t,e){if(!im()){for(const i of t)if(i!=null&&!yn(i.spatialReference,e)&&$o(i.spatialReference)&&$o(e)&&!Tc(i.spatialReference,e))return rt(x8),{pending:Qf(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:yn(i.spatialReference,e)?i:$o(i.spatialReference)&&$o(e)?a$(i,e):null)}}function Bce(t,e,i=null){if(t==null||e==null)return null;if(pu==null||Uf==null)throw new QP;const r=pu._getTransformation(Uf,t,e,i,i==null?void 0:i.spatialReference);return r!==null?VA.fromGE(r):null}function gLe(t,e,i=null){if(pu==null||Uf==null)throw new QP;const r=pu._getTransformationBySuitability(Uf,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const s of r)n.push(VA.fromGE(s));return n}return[]}let QP=class extends G{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function vLe(){pu=null,Uf=null,hx=null,SC={}}const bLe={get loadPromise(){return hx}};function a$(t,e){try{const i=rm(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=jce(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof QP))throw i;return null}}async function wLe(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await $8(r,e,null,i),a$(t,e)}function Tc(t,e,i){return!i&&(!!yn(t,e)||$o(t)&&$o(e)&&!!Vce(t,e))}function OLe(t,e){if(yn(t,e))return!0;if(!$o(t)||!$o(e))return!1;const i=Bg(t)||xc(t)||yW(t),r=Bg(e)||xc(e)||yW(e);return i&&r}async function $8(t,e,i,r){if(im())return qH(r);if(Array.isArray(t)){for(const{source:n,dest:s,geographicTransformation:o}of t)if(n&&s&&!Tc(n,s,o))return Qf(r)}else if(t&&e&&!Tc(t,e,i))return Qf(r);return qH(r)}function _C(t,e,i){return t?"x"in t?qce(t,e,new Ot,i,0):"xmin"in t?Wce(t,e,new oi,i,0):"rings"in t?Hce(t,e,new da,i,0):"paths"in t?Zce(t,e,new el,i,0):"points"in t?Gce(t,e,new y2,i,0):null:null}function SLe(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&qce(t,t.spatialReference,e,i,r)!=null}function qce(t,e,i,r,n){ys[0]=t.x,ys[1]=t.y;const s=t.z;return ys[2]=s!==void 0?s:n,O2(ys,e,0,ys,r,0)?(i.x=ys[0],i.y=ys[1],i.spatialReference=r,s!==void 0||jf(r)?(i.z=ys[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function _Le(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Gce(t,t.spatialReference,e,i,r)!=null}function Gce(t,e,i,r,n){const{points:s,hasZ:o,hasM:a}=t,l=[],u=s.length,p=[];for(const g of s)p.push(g[0],g[1],o?g[2]:n);if(!O2(p,e,0,p,r,0,u))return null;const m=o||jf(r);for(let g=0;g<u;++g){const w=3*g,O=p[w],_=p[w+1];m&&a?l.push([O,_,p[w+2],s[g][3]]):m?l.push([O,_,p[w+2]]):a?l.push([O,_,s[g][2]]):l.push([O,_])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function xLe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Zce(t,t.spatialReference,e,i,r)!=null}function Zce(t,e,i,r,n){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!Xce(s,o??!1,a??!1,e,l,r,n))return null;const u=o||jf(r);return i.paths=l,i.spatialReference=r,i.hasZ=u,i.hasM=a,i}function $Le(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Hce(t,t.spatialReference,e,i,r)!=null}function Hce(t,e,i,r,n){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!Xce(s,o??!1,a??!1,e,l,r,n))return null;const u=o||jf(r);return i.rings=l,i.spatialReference=r,i.hasZ=u,i.hasM=a,i}function TLe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Wce(t,t.spatialReference,e,i,r)!=null}function Wce(t,e,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:p}=t,m=u?t.zmin:n;if(!kX(s,o,m,e,ys,r))return null;const g=u||jf(r);i.xmin=ys[0],i.ymin=ys[1],g&&(i.zmin=ys[2]);const w=u?t.zmax:n;return kX(a,l,w,e,ys,r)?(i.xmax=ys[0],i.ymax=ys[1],g&&(i.zmax=ys[2]),p&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function Xce(t,e,i,r,n,s,o=0){const a=new Array;for(const p of t)for(const m of p)a.push(m[0],m[1],e?m[2]:o);if(!O2(a,r,0,a,s,0))return!1;let l=0;n.length=0;const u=e||jf(s);for(const p of t){const m=new Array;for(const g of p)u&&i?m.push([a[l++],a[l++],a[l++],g[3]]):u?m.push([a[l++],a[l++],a[l++]]):i?(m.push([a[l++],a[l++],g[2]]),l++):(m.push([a[l++],a[l++]]),l++);n.push(m)}return!0}const ys=tm(),Ngt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Tc,getTransformation:Bce,getTransformations:gLe,initializeProjection:$8,isEqualBaseGCS:OLe,isLoaded:im,isLoadedOrLoad:zce,isLoadedOrLoadFor:Uce,load:Qf,project:rm,projectExtent:TLe,projectMany:bV,projectMultipoint:_Le,projectOrLoad:yLe,projectOrLoadMany:Qce,projectPoint:SLe,projectPolygon:$Le,projectPolyline:xLe,projectWithZConversion:wLe,projectWithoutEngine:_C,requiresLoad:mLe,test:bLe,tryProjectWithZConversion:a$,unload:vLe},Symbol.toStringTag,{value:"Module"}));var wV;let Fu=wV=class extends K{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new wV({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};h([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Fu.prototype,"cols",void 0),h([f({type:kt,json:{write:!0}})],Fu.prototype,"level",void 0),h([f({type:String,json:{write:!0}})],Fu.prototype,"levelValue",void 0),h([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Fu.prototype,"origin",void 0),h([f({type:Number,json:{write:!0}})],Fu.prototype,"resolution",void 0),h([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Fu.prototype,"rows",void 0),h([f({type:Number,json:{write:!0}})],Fu.prototype,"scale",void 0),Fu=wV=h([A("esri.layers.support.LOD")],Fu);const Xp=Fu;let ELe=class{constructor(e,i,r,n,s=void 0){this.id=e,this.level=i,this.row=r,this.col=n,this.extent=s}};var gp;const CX=new nt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Qn=gp=class extends K{static create(t={}){const{resolutionFactor:e=1,scales:i,size:r=256,spatialReference:n=Je.WebMercator,numLODs:s=24}=t;if(!$o(n)){const m=[];if(i)for(let g=0;g<i.length;g++){const w=i[g];m.push(new Xp({level:g,scale:w,resolution:w}))}else{let g=5e-4;for(let w=s-1;w>=0;w--)m.unshift(new Xp({level:w,scale:g,resolution:g})),g*=2}return new gp({dpi:96,lods:m,origin:new Ot(0,0,n),size:[r,r],spatialReference:n})}const o=Zs(n),a=t.origin?new Ot({x:t.origin.x,y:t.origin.y,spatialReference:n}):new Ot(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,u=1/(ma(n)*39.37*l),p=[];if(i)for(let m=0;m<i.length;m++){const g=i[m],w=g*u;p.push(new Xp({level:m,scale:g,resolution:w}))}else{let m=SO(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const g=Math.ceil(s/e);p.push(new Xp({level:0,scale:m,resolution:m*u}));for(let w=1;w<g;w++){const O=m/2**e,_=O*u;p.push(new Xp({level:w,scale:O,resolution:_})),m=O}}return new gp({dpi:l,lods:p,origin:a,size:[r,r],spatialReference:n})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=Zs(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return Ot.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const r=[],n=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(s=>{r.push(s.scale),e=s.scale>e?s.scale:e,i=s.scale<i?s.scale:i,n[s.level]=s})),this._set("scales",r),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),r=i+1;return e[i]/(e[i]/e[r])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let r=0;for(;r<i;r++){const n=e[r],s=e[r+1];if(n<=t)return r;if(s===t)return r+1;if(n>t&&s<t)return r+Math.log(n/t)/Math.log(n/s)}return r}tileAt(t,e,i,r){const n=this.lodAt(t);if(!n)return null;let s,o;if(typeof e=="number")s=e,o=i;else if(yn(e.spatialReference,this.spatialReference))s=e.x,o=e.y,r=i;else{const u=RP(e,this.spatialReference);if(u==null)return null;s=u.x,o=u.y,r=i}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return r||(r=new ELe(null,0,0,0,Gs())),r.level=t,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(t,e=gp.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===gp.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<t.level&&(i=o)}if(!i)return;const r=t.level-i.level,n=i.resolution*this.size[0]/2**r,s=i.resolution*this.size[1]/2**r;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=Gs()),t.extent[0]=this.origin.x+t.col*n,t.extent[1]=this.origin.y-(t.row+1)*s,t.extent[2]=t.extent[0]+n,t.extent[3]=t.extent[1]+s}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:r}=i,n=r*this.size[0],s=r*this.size[1];return t[0]=this.origin.x+e.col*n,t[1]=this.origin.y-(e.row+1)*s,t[2]=t[0]+n,t[3]=t[1]+s,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return gp.fromJSON(this.write({}))}getCompatibleForVTL(t){if(this.size[0]!==this.size[1]||this.size[0]===256&&t===512)return null;const e=(this.size[0]===512&&t===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===t&&e===0)return this;const i=[],r=this.lods.length-e;for(let n=0;n<r;n++){const s=n+e,{scale:o,resolution:a}=s>=0?this.lods[s]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new Xp({level:n,scale:o,resolution:a}))}return new gp({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const r=t[i];this._upsampleLevels[r.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/r.resolution:0},e=r}}};h([f({type:Number,json:{write:!0}})],Qn.prototype,"compressionQuality",void 0),h([f({type:Number,json:{write:!0}})],Qn.prototype,"dpi",void 0),h([f({type:String,json:{read:CX.read,write:CX.write,origins:{"web-scene":{read:!1,write:!1}}}})],Qn.prototype,"format",void 0),h([f({readOnly:!0})],Qn.prototype,"isWrappable",null),h([f({type:Ot,json:{write:!0}})],Qn.prototype,"origin",void 0),h([ve("origin")],Qn.prototype,"readOrigin",null),h([f({type:[Xp],value:null,json:{write:!0}})],Qn.prototype,"lods",null),h([f({readOnly:!0})],Qn.prototype,"scales",void 0),h([f({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Qn.prototype,"size",void 0),h([ve("size",["rows","cols"])],Qn.prototype,"readSize",null),h([we("size",{cols:{type:kt},rows:{type:kt}})],Qn.prototype,"writeSize",null),h([f({type:Je,json:{write:!0}})],Qn.prototype,"spatialReference",void 0),Qn=gp=h([A("esri.layers.support.TileInfo")],Qn),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(Qn||(Qn={}));const kLe=Qn,xC={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},oN={xsmall:544,small:768,medium:992,large:1200};function CLe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function aN(t,e){return e?xC[t].valueToClassName[e].split(" "):[]}const MLe=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=oN}initialize(){this.addHandles(Oe(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),It))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!CLe(i)){const r=JSON.stringify(oN,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=oN}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=Qs.acquire(),r=Qs.acquire();let n,s=!1;for(n in xC){const o=this[n],a=xC[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,aN(n,o).forEach(l=>r.push(l)),aN(n,a).forEach(l=>i.push(l)))}s&&(this._applyClassNameChanges(i,r),Qs.release(i),Qs.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(s=>n.classList.remove(s)),i.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in xC)aN(r,this[r]).forEach(n=>i.classList.remove(n))}};return h([f()],e.prototype,"breakpoints",null),h([f()],e.prototype,"orientation",void 0),h([f()],e.prototype,"widthBreakpoint",void 0),h([f()],e.prototype,"heightBreakpoint",void 0),e=h([A("esri.views.BreakpointsOwner")],e),e};function T8(t){return typeof t=="string"?document.getElementById(t):t??null}function MX(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let Sg=class extends Ce{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,Oe)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Kn)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([Ss(e,"after-changes",this._createSyncUpdatingCallback(),mu),Ss(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],s),Bt(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Bt(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(ME)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=n(e,i,r);return this.addHandles(o,s),Bt(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=Oe(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(ME),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(u2(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(ME))}),ME)}}};h([f({readOnly:!0})],Sg.prototype,"updating",void 0),Sg=h([A("esri.core.support.UpdatingHandles")],Sg);const ME=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var FA=function(){return FA=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},FA.apply(this,arguments)},OV={exports:{}},pr={},SV={exports:{}},d0={};function Yce(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function ALe(t,e,i){}function ILe(t,e,i){}var PLe=/javascript\s*\:/img;function RLe(t,e){return PLe.test(e)?"":e}d0.whiteList=Yce();d0.getDefaultWhiteList=Yce;d0.onAttr=ALe;d0.onIgnoreAttr=ILe;d0.safeAttrValue=RLe;var LLe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},tS=LLe;function NLe(t,e){t=tS.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,o="";function a(){if(!r){var p=tS.trim(t.slice(n,s)),m=p.indexOf(":");if(m!==-1){var g=tS.trim(p.slice(0,m)),w=tS.trim(p.slice(m+1));if(g){var O=e(n,o.length,g,w,p);O&&(o+=O+"; ")}}}n=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var u=t.indexOf("*/",s+2);if(u===-1)break;s=u+1,n=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return tS.trim(o)}var DLe=NLe,AE=d0,VLe=DLe;function AX(t){return t==null}function FLe(t){var e={};for(var i in t)e[i]=t[i];return e}function Jce(t){t=FLe(t||{}),t.whiteList=t.whiteList||AE.whiteList,t.onAttr=t.onAttr||AE.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||AE.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||AE.safeAttrValue,this.options=t}Jce.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=VLe(t,function(l,u,p,m,g){var w=r[p],O=!1;if(w===!0?O=w:typeof w=="function"?O=w(m):w instanceof RegExp&&(O=w.test(m)),O!==!0&&(O=!1),m=o(p,m),!!m){var _={position:u,sourcePosition:l,source:g,isWhite:O};if(O){var x=n(p,m,_);return AX(x)?p+":"+m:x}else{var x=s(p,m,_);if(!AX(x))return x}}});return a};var jLe=Jce;(function(t,e){var i=d0,r=jLe;function n(o,a){var l=new r(a);return l.process(o)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})(SV,SV.exports);var E8=SV.exports,k8={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},zLe=E8.FilterCSS,ULe=E8.getDefaultWhiteList,jA=k8;function Kce(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var ehe=new zLe;function QLe(t,e,i){}function BLe(t,e,i){}function qLe(t,e,i){}function GLe(t,e,i){}function the(t){return t.replace(HLe,"&lt;").replace(WLe,"&gt;")}function ZLe(t,e,i,r){if(i=ahe(i),e==="href"||e==="src"){if(i=jA.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(IE.lastIndex=0,IE.test(i))return""}else if(e==="style"){if(IX.lastIndex=0,IX.test(i)||(PX.lastIndex=0,PX.test(i)&&(IE.lastIndex=0,IE.test(i))))return"";r!==!1&&(r=r||ehe,i=r.process(i))}return i=lhe(i),i}var HLe=/</g,WLe=/>/g,XLe=/"/g,YLe=/&quot;/g,JLe=/&#([a-zA-Z0-9]*);?/gim,KLe=/&colon;?/gim,e5e=/&newline;?/gim,IE=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,IX=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,PX=/u\s*r\s*l\s*\(.*/gi;function ihe(t){return t.replace(XLe,"&quot;")}function rhe(t){return t.replace(YLe,'"')}function nhe(t){return t.replace(JLe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function she(t){return t.replace(KLe,":").replace(e5e," ")}function ohe(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return jA.trim(e)}function ahe(t){return t=rhe(t),t=nhe(t),t=she(t),t=ohe(t),t}function lhe(t){return t=ihe(t),t=the(t),t}function t5e(){return""}function i5e(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:jA.indexOf(t,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var u="[/removed]",p=l.position+u.length;return n.push([s!==!1?s:l.position,p]),s=!1,u}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return jA.forEach(n,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function r5e(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function n5e(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}pr.whiteList=Kce();pr.getDefaultWhiteList=Kce;pr.onTag=QLe;pr.onIgnoreTag=BLe;pr.onTagAttr=qLe;pr.onIgnoreTagAttr=GLe;pr.safeAttrValue=ZLe;pr.escapeHtml=the;pr.escapeQuote=ihe;pr.unescapeQuote=rhe;pr.escapeHtmlEntities=nhe;pr.escapeDangerHtml5Entities=she;pr.clearNonPrintableCharacter=ohe;pr.friendlyAttrValue=ahe;pr.escapeAttrValue=lhe;pr.onIgnoreTagStripAll=t5e;pr.StripTagBody=i5e;pr.stripCommentTag=r5e;pr.stripBlankChar=n5e;pr.cssFilter=ehe;pr.getDefaultCSSWhiteList=ULe;var BP={},Yp=k8;function s5e(t){var e=Yp.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Yp.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function o5e(t){return t.slice(0,2)==="</"}function a5e(t,e,i){var r="",n=0,s=!1,o=!1,a=0,l=t.length,u="",p="";e:for(a=0;a<l;a++){var m=t.charAt(a);if(s===!1){if(m==="<"){s=a;continue}}else if(o===!1){if(m==="<"){r+=i(t.slice(n,a)),s=a,n=a;continue}if(m===">"){r+=i(t.slice(n,s)),p=t.slice(s,a+1),u=s5e(p),r+=e(s,r.length,u,p,o5e(p)),n=a+1,s=!1;continue}if(m==='"'||m==="'")for(var g=1,w=t.charAt(a-g);w.trim()===""||w==="=";){if(w==="="){o=m;continue e}w=t.charAt(a-++g)}}else if(m===o){o=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var l5e=/[^a-zA-Z0-9\\_:.-]/gim;function u5e(t,e){var i=0,r=0,n=[],s=!1,o=t.length;function a(g,w){if(g=Yp.trim(g),g=g.replace(l5e,"").toLowerCase(),!(g.length<1)){var O=e(g,w||"");O&&n.push(O)}}for(var l=0;l<o;l++){var u=t.charAt(l),p,m;if(s===!1&&u==="="){s=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:h5e(t,l+1);continue}if(s!==!1&&l===r){if(m=t.indexOf(u,l+1),m===-1)break;p=Yp.trim(t.slice(r+1,m)),a(s,p),s=!1,l=m,i=l+1;continue}if(/\s|\n|\t/.test(u))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(m=c5e(t,l),m===-1){p=Yp.trim(t.slice(i,l)),a(p),s=!1,i=l+1;continue}else{l=m-1;continue}else if(m=d5e(t,l-1),m===-1){p=Yp.trim(t.slice(i,l)),p=RX(p),a(s,p),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?a(t.slice(i)):a(s,RX(Yp.trim(t.slice(i))))),Yp.trim(n.join(" "))}function c5e(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function h5e(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function d5e(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function p5e(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function RX(t){return p5e(t)?t.substr(1,t.length-2):t}BP.parseTag=a5e;BP.parseAttr=u5e;var f5e=E8.FilterCSS,nu=pr,uhe=BP,m5e=uhe.parseTag,y5e=uhe.parseAttr,$C=k8;function PE(t){return t==null}function g5e(t){var e=$C.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=$C.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=$C.trim(t.slice(0,-1))),{html:t,closing:i}}function v5e(t){var e={};for(var i in t)e[i]=t[i];return e}function b5e(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function che(t){t=v5e(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=nu.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=b5e(t.whiteList||t.allowList):t.whiteList=nu.whiteList,t.onTag=t.onTag||nu.onTag,t.onTagAttr=t.onTagAttr||nu.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||nu.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||nu.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||nu.safeAttrValue,t.escapeHtml=t.escapeHtml||nu.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new f5e(t.css))}che.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,u=i.escapeHtml,p=e.cssFilter;i.stripBlankChar&&(t=nu.stripBlankChar(t)),i.allowCommentTag||(t=nu.stripCommentTag(t));var m=!1;i.stripIgnoreTagBody&&(m=nu.StripTagBody(i.stripIgnoreTagBody,s),s=m.onIgnoreTag);var g=m5e(t,function(w,O,_,x,T){var E={sourcePosition:w,position:O,isClosing:T,isWhite:Object.prototype.hasOwnProperty.call(r,_)},k=n(_,x,E);if(!PE(k))return k;if(E.isWhite){if(E.isClosing)return"</"+_+">";var M=g5e(x),R=r[_],D=y5e(M.html,function(L,F){var j=$C.indexOf(R,L)!==-1,B=o(_,L,F,j);return PE(B)?j?(F=l(_,L,F,p),F?L+'="'+F+'"':L):(B=a(_,L,F,j),PE(B)?void 0:B):B});return x="<"+_,D&&(x+=" "+D),M.closing&&(x+=" /"),x+=">",x}else return k=s(_,x,E),PE(k)?u(x):k},u);return m&&(g=m.remove(g)),g};var w5e=che;(function(t,e){var i=pr,r=BP,n=w5e;function s(a,l){var u=new n(l);return u.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(OV,OV.exports);var rv=OV.exports,O5e=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},S5e=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=FA(FA({},rv.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):rv.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new rv.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?rv.escapeAttrValue(e):!s&&!n?rv.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):rv.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var u=r.validate(l,i);return u.isValid?a.concat([l]):(n=!0,a.concat([u.sanitized]))},[]);else if(O5e(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var u=e[l],p=r.validate(u,i);return p.isValid?a[l]=u:(n=!0,a[l]=p.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const qP=new Map;function hhe(){qP.clear()}function _5e(t){return qP.get(t)}function x5e(t,e){qP.set(t,e)}function lN(t){qP.delete(t)}function zb(...t){const e=Qs.acquire();for(let r=0;r<t.length;r++){const n=t[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return Qs.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{var n;hhe();for(const s of r)(n=t.get(s.target))==null||n(s)}),i=(r,n,s)=>(t.set(r,n),e.observe(r,s),Bt(()=>{e.unobserve(r),t.delete(r)}));return(r,n,s)=>{let o=null;return r2([Oe(()=>typeof r=="function"?r():r,a=>{o==null||o.remove(),a&&(o=i(a,n,s))},Us),Bt(()=>o==null?void 0:o.remove())])}})();function S2(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function Fgt(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function jgt(t){const e="data-node-ref";this[t.getAttribute(e)]=t}const $5e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],T5e=$5e.reduce((t,e)=>(t[e]=[],t),{}),E5e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],dhe=new S5e({whiteList:T5e,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(E5e.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function phe(t){return t==="Enter"||t===" "}async function dx(t,e){await xke(a2(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const fhe="http://www.w3.org/",GP=`${fhe}2000/svg`,mhe=`${fhe}1999/xlink`;let LX=[],C8=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},M8=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),yhe=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},k5e=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(M8(t[r],e))return r}return-1},uN=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(M8(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},C5e=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},_V=[],xV=!1,ghe=t=>{(t.children||[]).forEach(ghe),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},NX=()=>{xV=!1,_V.forEach(ghe),_V.length=0},DX=t=>{_V.push(t),xV||(xV=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(NX,{timeout:16}):setTimeout(NX,16))},VX=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),DX(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),DX(t))},M5e=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")TV(t,l,!0);else if(a==="classes"){let u=Object.keys(l),p=u.length;for(let m=0;m<p;m++){let g=u[m];l[g]&&t.classList.add(g)}}else if(a==="styles"){let u=Object.keys(l),p=u.length;for(let m=0;m<p;m++){let g=u[m],w=l[g];w&&(yhe(w),i.styleApplyer(t,g,w))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&function(){let p=l;l=function(m){p.apply(this,[m]),m.target["oninput-value"]=m.target.value}}()),t[a]=l):i.namespace===GP?a==="href"?t.setAttributeNS(mhe,a,l):t.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?t[a]=dhe.sanitize(l):$V(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function $V(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let zA,A5e=(t,e,i)=>{if(e)for(let r of e)px(r,t,void 0,i)},vhe=(t,e,i)=>{A5e(t,e.children,i),e.text&&(t.textContent=e.text),M5e(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},px=(t,e,i,r)=>{let n,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")n=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let p=o.charAt(s-1),m=o.slice(s,l);p==="."?n.classList.add(m):p==="#"?n.id=m:(m==="svg"&&(r=C8(r,{namespace:GP})),r.namespace!==void 0?n=t.domNode=a.createElementNS(r.namespace,m):(n=t.domNode=t.domNode||a.createElement(m),m==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=l+1}}vhe(n,t,r)}},TV=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},I5e=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let l=s[a],u=i[l],p=e[l];if(l==="class")p!==u&&(TV(t,p,!1),TV(t,u,!0));else if(l==="classes"){let m=t.classList,g=Object.keys(u),w=g.length;for(let O=0;O<w;O++){let _=g[O],x=!!u[_];x!==!!p[_]&&(n=!0,x?m.add(_):m.remove(_))}}else if(l==="styles"){let m=Object.keys(u),g=m.length;for(let w=0;w<g;w++){let O=m[w],_=u[O];_!==p[O]&&(n=!0,_?(yhe(_),r.styleApplyer(t,O,_)):r.styleApplyer(t,O,""))}}else if(u||typeof p!="string"||(u=""),l!=="value"||$V(t)){if(u!==p){let m=typeof u;m==="function"&&r.eventHandlerInterceptor||(r.namespace===GP?l==="href"?t.setAttributeNS(mhe,l,u):t.setAttribute(l,u):m==="string"?l==="innerHTML"?t[l]=dhe.sanitize(u):l==="role"&&u===""?t.removeAttribute(l):$V(t)&&l in t?t[l]=u:t.setAttribute(l,u):t[l]!==u&&(t[l]=u),n=!0)}}else{let m=t[l];m!==u&&(t["oninput-value"]?m===t["oninput-value"]:u!==p)&&(t[l]=u,t["oninput-value"]=void 0),u!==p&&(n=!0)}}return n},P5e=(t,e,i,r,n)=>{if(i===r)return!1;r=r||LX;let s,o=(i=i||LX).length,a=r.length,l=0,u=0,p=!1;for(;u<a;){let m=l<o?i[l]:void 0,g=r[u];if(m!==void 0&&M8(m,g))p=zA(m,g,n)||p,l++;else{let w=k5e(i,g,l+1);if(w>=0){for(s=l;s<w;s++)VX(i[s]),uN(i,s,t,"removed");p=zA(i[w],g,n)||p,l=w+1}else px(g,e,l<o?i[l].domNode:void 0,n),C5e(g),uN(r,u,t,"added")}u++}if(o>l)for(s=l;s<o;s++)VX(i[s]),uN(i,s,t,"removed");return p};zA=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=C8(i,{namespace:GP})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=P5e(e,r,t.children,e.children,i)||s,s=I5e(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let RE=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,zA(r,i,e)},domNode:t.domNode});const R5e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let LS=t=>C8(R5e,t),pf={append:(t,e,i)=>(i=LS(i),px(e,t,void 0,i),RE(e,i)),insertBefore:(t,e,i)=>(i=LS(i),px(e,t.parentNode,t,i),RE(e,i)),merge:(t,e,i)=>(i=LS(i),e.domNode=t,vhe(t,e,i),RE(e,i)),replace:(t,e,i)=>(i=LS(i),px(e,t.parentNode,t,i),t.parentNode.removeChild(t),RE(e,i))},bhe,L5e=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};bhe=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let N5e=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?bhe(i.children,n=>n.domNode===r):void 0}),i},D5e=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),o=L5e(n.currentTarget,s.domNode);o.reverse();let a,l=N5e(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,s,o,a)=>r},UA=t=>{let e,i,r=LS(t),n=r.performanceLogger,s=!0,o=!1,a=[],l=[],u=(m,g,w)=>{let O,_=()=>O;r.eventHandlerInterceptor=D5e(e,_,n),O=m(g,w(),r),a.push(O),l.push(w)},p=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let m=0;m<a.length;m++){let g=l[m]();n("rendered",void 0),a[m].update(g),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:p,scheduleRender:()=>{i||o||(i=requestAnimationFrame(p))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(m,g)=>{u(pf.append,m,g)},insertBefore:(m,g)=>{u(pf.insertBefore,m,g)},merge:(m,g)=>{u(pf.merge,m,g)},replace:(m,g)=>{u(pf.replace,m,g)},detach:m=>{for(let g=0;g<l.length;g++)if(l[g]===m)return l.splice(g,1),a.splice(g,1)[0];throw new Error("renderFunction was not found")}},e},vp=class extends Ce{constructor(){super(...arguments),this.items=new Te,this._watchUpdatingTracking=new Sg,this._callbacks=new Map,this._projector=UA(),this._hiddenProjector=UA()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};h([f({readOnly:!0})],vp.prototype,"surface",void 0),h([f({readOnly:!0})],vp.prototype,"items",void 0),h([f({readOnly:!0})],vp.prototype,"needsRender",null),h([f({readOnly:!0})],vp.prototype,"_watchUpdatingTracking",void 0),h([f({readOnly:!0})],vp.prototype,"updating",null),vp=h([A("esri.views.overlay.ViewOverlay")],vp);const FX=vp,cN=[0,0];function V5e(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return cN[0]=i.left+((e==null?void 0:e.pageXOffset)??0),cN[1]=i.top+((e==null?void 0:e.pageYOffset)??0),cN}function jX(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function F5e(t){const e=document.createElement("div");return t.appendChild(e),e}const nv=16,iS=750,j5e=512,z5e=2,U5e=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:nv,time:iS},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Oe(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),Oe(()=>this.navigating,r=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([Oe(()=>this.ui,(i,r)=>this._handleUIChange(i,r),It),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){var i;this.destroyed||((i=this.ui)==null||i.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=T8(i);if(n||typeof i!="string"||pe.getLogger(this).error("#container",`element with id '${i}' not found`),r===n)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(jX(this.root),this._set("root",null)),this.userContent&&(MX(this.userContent,r),jX(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",MX(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new FX;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(Oe(()=>l.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Ew({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=qi(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,n){const s=this.position;return i-=s?s[0]:0,r-=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const s=this.position;return i+=s?s[0]:0,r+=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(Oe(()=>this.root,n=>{i.container=n?F5e(n):null},It),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=nv,i.time=iS;const r=Ew({prepare:o=>{const a=this._measure(),l=this._freqInfo;if(l.time+=o.deltaTime,a&&(l.freq=nv,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const u=this._position();l.freq=u||a?nv:Math.min(iS,l.freq*z5e),!a&&l.freq>=j5e&&(r.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver(o=>{i.freq=nv,i.time=iS,r.resume()});this.container!=null&&n.observe(this.container);const s=Bt(()=>n.disconnect());this.addHandles([o2(window,"resize",()=>{i.freq=nv,i.time=iS,r.resume()}),s,r],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return r===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&V5e(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return h([f()],e.prototype,"container",null),h([f({readOnly:!0})],e.prototype,"focused",null),h([f({readOnly:!0})],e.prototype,"height",void 0),h([f()],e.prototype,"messagesCommon",void 0),h([f({type:FX})],e.prototype,"overlay",void 0),h([f({readOnly:!0})],e.prototype,"position",void 0),h([f({readOnly:!0})],e.prototype,"resizing",void 0),h([f({readOnly:!0})],e.prototype,"root",void 0),h([f({value:null,readOnly:!0})],e.prototype,"size",null),h([f({readOnly:!0})],e.prototype,"surface",void 0),h([f({readOnly:!0})],e.prototype,"suspended",void 0),h([f({nonNullable:!0})],e.prototype,"ui",void 0),h([f({readOnly:!0})],e.prototype,"userContent",void 0),h([f({readOnly:!0})],e.prototype,"width",void 0),h([f()],e.prototype,"widthBreakpoint",void 0),e=h([A("esri.views.DOMContainer")],e),e},Q5e=te("mac")?"Meta":"Control",B5e=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),q5e=t=>B5e.has(t);let G5e=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},bn=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new G5e(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=p=>{const m=this._incoming[p.match.eventType];if(m){const g=m.indexOf(p);m.splice(g,1),o(),this._manager&&this._manager.updateDependencies()}},l=new Z5e(s,r,{onPause:a,onRemove:a,onResume:p=>{const m=this._incoming[p.match.eventType];m&&!m.includes(p)&&(m.push(p),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[s.eventType];return u||(u=[],this._incoming[s.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new H5e(e,{onEmit:(r,n,s,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,n,s,o)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},Z5e=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},H5e=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},W5e=class extends bn{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=e;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},X5e=class{constructor(e,i){this._observable=new p2,this._value=e,this._equalityFunction=i}get value(){return rt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Vw(t,e=Doe){return new X5e(t,e)}let Y5e=class extends bn{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Vw(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},J5e=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new tae(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=Dke(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)HH(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)HH(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},Ra=class extends Ce{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Q5e,this._latestPointerType="mouse",this._propertiesPool=new J5e({latestPointerLocation:tNe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=bc.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,u,p,m)=>{this._emitInputEvent(o.priorityIndex+1,a,l,u,m,p)},setPointerCapture:(a,l)=>{this._setPointerCapture(n,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):pe.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)q5e(a)||i.add(a)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const s=this._propertiesPool.get("latestPointerLocation");s.x=i,s.y=r,this._set("latestPointerLocation",s)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=i.native;s("Alt",!!(o!=null&&o.altKey)),s("Control",!!(o!=null&&o.ctrlKey)),s("Ctrl",!!(o!=null&&o.ctrlKey)),s("Shift",!!(o!=null&&o.shiftKey)),s("Meta",!!(o!=null&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new W5e((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new Y5e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],bc.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,bc.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,u={event:new K5e(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new IA,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r,n;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:s,priorityIndex:o}=e.events.pop(),a=(i=s.data)==null?void 0:i.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((n=(r=e.currentHandler).eventCallback)==null||n.call(r,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new IA;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>this._onEventReceived(i,r))},disablePointerCapture:e}}};h([f({readOnly:!0})],Ra.prototype,"hasPendingInputs",null),h([f({constructOnly:!0})],Ra.prototype,"eventSource",void 0),h([f({constructOnly:!0})],Ra.prototype,"recognizers",void 0),h([f()],Ra.prototype,"_latestPointerType",void 0),h([f()],Ra.prototype,"latestPointerType",null),h([f()],Ra.prototype,"multiTouchActive",null),h([f({readOnly:!0})],Ra.prototype,"latestPointerLocation",void 0),h([f()],Ra.prototype,"_paused",void 0),h([f({readOnly:!0})],Ra.prototype,"updating",null),Ra=h([A("esri.views.input.InputManager")],Ra);let K5e=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=Jp.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Jp.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Jp.STOPPED)}async(e){this._propagationState|=Jp.PAUSED;const i=(r,n)=>{this._propagationState&=~Jp.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&Jp.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Jp;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Jp||(Jp={}));const bc={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let eNe=class{};const tNe=eNe;function up(t){return t!=null&&"open"in t&&"declaredClass"in t}function zX(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const iNe=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Oe(()=>[this.ui,this.popup],([i,r],n)=>{const s="popup",o="manual";if(n){const[a,l]=n;a&&up(l)&&(l.view=null,zX(l)&&a.remove(l,s))}i&&up(r)&&(r.view=this,zX(r)&&i.add(r,{key:s,position:o,internal:!0}))},It),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(up(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),up(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},bc.WIDGET)]),l0(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{J(()=>import("./Popup-C-81ufDQ.js").then(i=>i.P),__vite__mapDeps([129,130,131,132,55,53,54,12,13,11,133,23,134]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(up(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void pe.getLogger(this).error(new G("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),up(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!up(this.popup))return this._popupSetupTask=d2(async r=>{const{default:n}=await J(()=>import("./Popup-C-81ufDQ.js").then(o=>o.P),__vite__mapDeps([129,130,131,132,55,53,54,12,13,11,133,23,134]));if(rr(r),!this.popup||up(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},n){const s=[],o=[];let a=!1;const l=fke(n,te("popup-view-fetch-timeout")??nNe),u=g=>{const w=new rNe(g);return o.push(w),s.push(w.promise),w},p=g=>{const w=o.at(-1);return w&&w.layerView===g&&!a?w:u(g)};for(const g of r)"graphic"in g?(p(g.layerView).graphics.push(g.graphic),a=!1):(s.push(g.layerView.fetchPopupFeaturesAtLocation(g.mapPoint,l)),a=!0);o.map(g=>g.resolve(l));const m=pke(s).then(g=>g.filter(w=>!!w).flat());return{pendingFeatures:s,allGraphicsPromise:m,location:i}}async _getPopupHits(i,r){const{hits:n,location:s}=await this.popupHitTest(i);rr(r);const o=[];for(const a of n)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,r)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return h([f()],e.prototype,"popup",void 0),h([f()],e.prototype,"popupEnabled",void 0),e=h([A("esri.views.PopupView")],e),e};let rNe=class{constructor(e){this.layerView=e,this._resolver=ha(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let s;return i.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const nNe=5e3;function wd(t,e,i=Te){return e||(e=new i),e===t||(e.removeAll(),sNe(t)?e.addMany(t):t&&e.add(t)),e}function whe(t){return t}function sNe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var Kp;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Kp||(Kp={}));let oNe=class{constructor(){this._resolver=ha(),this._status=Kp.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Kp.RESOLVED,this._cleanUp()},()=>{this._status=Kp.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Kp.RESOLVED}isRejected(){return this._status===Kp.REJECTED}isFulfilled(){return this._status!==Kp.PENDING}abort(){this._resolver.reject(Wt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=ha(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||vn(n)||this._resolver.reject(n)}),e.resolve()}};const Ohe=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new oNe,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=h([A("esri.core.Promise")],e),e};let NS=class extends Ohe(Ce){};NS=h([A("esri.core.Promise")],NS),function(t){t.EsriPromiseMixin=Ohe}(NS||(NS={}));const CO=NS,aNe="not-loaded",lNe="loading",uNe="failed",UX="loaded",She=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const u=vQ(s,l);this.destroyed&&l(new G("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===aNe){this._set("loadStatus",lNe);const a=this._loadController=new AbortController;n({signal:a.signal})}return r(),o}})),this.when(()=>{this._set("loadStatus",UX),this._loadController=null},r=>{this._set("loadStatus",uNe),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=Tw(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===UX}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new G("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return h([f({readOnly:!0})],e.prototype,"loaded",null),h([f({readOnly:!0})],e.prototype,"loadError",void 0),h([f({clonable:!1})],e.prototype,"loadStatus",void 0),h([f({type:[ll],readOnly:!0})],e.prototype,"loadWarnings",null),e=h([A("esri.core.Loadable")],e),e};let DS=class extends She(CO){};DS=h([A("esri.core.Loadable")],DS),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=She,t.isLoadable=e}(DS||(DS={}));const fa=DS;async function ZP(t,e){return await t.load(),cNe(t,e)}async function cNe(t,e){const i=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):Te.isCollection(o)?o.forEach(a=>r(a)):fa.isLoadable(o)&&i.push(o))};e(r);let n=null;if(await xCe(i,async s=>{const o=await EP(hNe(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return t}function hNe(t){return"loadAll"in t&&typeof t.loadAll=="function"}let LE;function dNe(t){return LE&&!LE.destroyed||(LE=t()),LE}var EV;const pNe=new nt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let La=EV=class extends Ce{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new EV({categories:this.categories?q(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=RP(this.extent,Je.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>pNe.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};h([f()],La.prototype,"categories",void 0),h([f()],La.prototype,"disableExtraQuery",void 0),h([f({type:oi})],La.prototype,"extent",void 0),h([f()],La.prototype,"filter",void 0),h([f()],La.prototype,"num",void 0),h([f()],La.prototype,"query",void 0),h([f()],La.prototype,"sortField",void 0),h([f()],La.prototype,"sortOrder",null),h([f()],La.prototype,"start",void 0),La=EV=h([A("esri.portal.PortalQueryParams")],La);const sa=La;var kV;let Ur=kV=class extends K{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new G("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new kV({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=_r(sa,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new sa,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new sa,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const n=r.contentCategorySetsGroupQuery;if(n){const s=new sa({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(s,e)}throw new G("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const n=r.results[0],s=new sa({num:1,query:`typekeywords:"${t}"`});return n.queryItems(s,e)}throw new G("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};h([f()],Ur.prototype,"access",void 0),h([f({type:Date})],Ur.prototype,"created",void 0),h([f()],Ur.prototype,"description",void 0),h([f()],Ur.prototype,"id",void 0),h([f()],Ur.prototype,"isInvitationOnly",void 0),h([f({type:Date})],Ur.prototype,"modified",void 0),h([f()],Ur.prototype,"owner",void 0),h([f()],Ur.prototype,"portal",void 0),h([f()],Ur.prototype,"snippet",void 0),h([f()],Ur.prototype,"sortField",void 0),h([f()],Ur.prototype,"sortOrder",void 0),h([f()],Ur.prototype,"sourceJSON",void 0),h([f()],Ur.prototype,"tags",void 0),h([f()],Ur.prototype,"thumbnail",void 0),h([f({readOnly:!0})],Ur.prototype,"thumbnailUrl",null),h([f()],Ur.prototype,"title",void 0),h([f({readOnly:!0})],Ur.prototype,"url",null),Ur=kV=h([A("esri.portal.PortalGroup")],Ur);const CV=Ur;let ty=class extends Ce{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};h([f()],ty.prototype,"nextQueryParams",void 0),h([f()],ty.prototype,"queryParams",void 0),h([f()],ty.prototype,"results",void 0),h([f()],ty.prototype,"total",void 0),ty=h([A("esri.portal.PortalQueryResult")],ty);const fNe=ty;let vh=class extends K{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new G("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};h([f({type:Date})],vh.prototype,"created",void 0),h([f()],vh.prototype,"id",void 0),h([f()],vh.prototype,"portal",void 0),h([f()],vh.prototype,"title",void 0),h([f({readOnly:!0})],vh.prototype,"url",null),h([f()],vh.prototype,"username",void 0),vh=h([A("esri.portal.PortalFolder")],vh);const mNe=vh;var MV;let Si=MV=class extends K{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.username}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,r=t==null?void 0:t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=t.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:e}},o=await this.portal.request(i,s);for(const a of o.results){const l=t.find(m=>a.itemId===m.id),u=a.success;let p=null;u?(l.id=null,l.portal=null):a.error&&(p=new G("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:u,error:p})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=mNe.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=CV.fromJSON(i);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await J(()=>Promise.resolve().then(()=>_he),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:r});let s;return n!=null&&n.items?(s=n.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new CV({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new G("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new G("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new MV({sourceJSON:t});return e.read(t),e}};h([f()],Si.prototype,"access",void 0),h([f({type:Date})],Si.prototype,"created",void 0),h([f()],Si.prototype,"culture",void 0),h([f()],Si.prototype,"description",void 0),h([f()],Si.prototype,"email",void 0),h([f()],Si.prototype,"favGroupId",void 0),h([f()],Si.prototype,"fullName",void 0),h([f({type:Date})],Si.prototype,"modified",void 0),h([f()],Si.prototype,"orgId",void 0),h([f()],Si.prototype,"portal",void 0),h([f()],Si.prototype,"preferredView",void 0),h([f()],Si.prototype,"privileges",void 0),h([f()],Si.prototype,"region",void 0),h([f()],Si.prototype,"role",void 0),h([f()],Si.prototype,"roleId",void 0),h([f()],Si.prototype,"sourceJSON",void 0),h([f()],Si.prototype,"thumbnail",void 0),h([f({readOnly:!0})],Si.prototype,"thumbnailUrl",null),h([f()],Si.prototype,"units",void 0),h([f({readOnly:!0})],Si.prototype,"userContentUrl",null),h([f({readOnly:!0})],Si.prototype,"url",null),h([f()],Si.prototype,"username",void 0),h([f()],Si.prototype,"userLicenseTypeId",void 0),h([f()],Si.prototype,"userType",void 0),Si=MV=h([A("esri.portal.PortalUser")],Si);const A8=Si;var Zo;let rS;const QX={PortalGroup:()=>Promise.resolve({default:CV}),PortalItem:()=>J(()=>Promise.resolve().then(()=>_he),void 0),PortalUser:()=>Promise.resolve({default:A8})};let $e=Zo=class extends K.JSONSupportMixin(fa){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ht.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){BX.unregister(this),this.defaultBasemap=bi(this.defaultBasemap),this.defaultDevBasemap=bi(this.defaultDevBasemap),this.defaultVectorBasemap=bi(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=qi(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Ht.request.trustedServers.includes(e)||Ht.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,e=!t||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get hasAPIKey(){return GQ(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.slice(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=A8.fromJSON(t),e.portal=this),e}load(t){const e=J(()=>Promise.resolve().then(()=>LNe),void 0).then(({default:i})=>{rr(t),rS=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var r;if(!this.hasAPIKey&&Ye){const n=Ye;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Zo.AUTH_MODE_AUTO&&this.authMode!==Zo.AUTH_MODE_NO_PROMPT||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",yNe(new WeakRef(this))),BX.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await J(async()=>{const{default:i}=await import("./ElevationLayer-CRpsKT6K.js").then(r=>r.E);return{default:i}},__vite__mapDeps([135,12,136]))).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(t,e);i.unshift(...r)}return i}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const e=new sa;e.query=this.default3DBasemapQuery,e.disableExtraQuery=!0;const i=(await this.queryItems(e,t)).results.find(r=>r.type==="Web Scene");return i?new rS({portalItem:i}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):ca(t)?Promise.reject(Wt()):Promise.resolve([])}async fetchClassificationSchema(t){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",t).then(e=>e.classificationSchema):null}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new sa({num:100,sortField:"title"});if(e!=null&&e.length){const r=[];for(const n of e)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,t).then(n=>n.results)}return ca(t)?Promise.reject(Wt()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Mo();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Mo();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return dNe(()=>new Zo)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const r=this.restUrl+"/portals/self",n={authMode:t,query:{culture:Mo().toLowerCase()},withCredentials:!0,...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),e&&(n.query.default=!0),this.request(r,n)}queryPortal(t,e,i,r){const n=_r(sa,e),s=o=>this.request(this.restUrl+t,{...n.toRequestOptions(this),...r}).then(a=>{const l=n.clone();return l.start=a.nextStart,new fNe({nextQueryParams:l,queryParams:n,total:a.total,results:Zo._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(uc(l),a)));return i&&QX[i]?QX[i]().then(({default:o})=>(rr(r),s(o))):s()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new G("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Zo.AUTH_MODE_ANONYMOUS||this.authMode===Zo.AUTH_MODE_NO_PROMPT&&!Ye)return Promise.reject(new G("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Ye?Ye.getCredential(this.restUrl,{prompt:this.authMode!==Zo.AUTH_MODE_NO_PROMPT}).then(e=>t(e)):t(this.credential)}normalizeUrl(t){var i;const e=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(r=>{const n=Zo._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():r)).then(()=>n,()=>n)})}request(t,e={}){const i={f:"json",...e.query},{authMode:r=this.authMode===Zo.AUTH_MODE_ANONYMOUS||this.authMode===Zo.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=e,u={authMode:r,body:n,cacheBust:s,method:o,query:i,responseType:a,timeout:0,signal:l};return e.withCredentials&&(u.withCredentials=!0),bt(this._normalizeSSL(t),u).then(p=>p.data)}toJSON(){throw new G("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Zo({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new G("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new sa;i.query=t||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,e);if(!r.total)return[];const n=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const s=await n.queryItems(i,e);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new rS({portalItem:o})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];if(this.hasAPIKey)return[];const r=new sa({query:i,disableExtraQuery:!0}),n=await this.queryGroups(r,e);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,e);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new rS({portalItem:a})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=rS.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,r){let n;if(i){const s=r!=null?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(n=n.map(o=>{const a=Object.assign(t?t.fromJSON(o):o,e);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};$e.AUTH_MODE_ANONYMOUS="anonymous",$e.AUTH_MODE_AUTO="auto",$e.AUTH_MODE_IMMEDIATE="immediate",$e.AUTH_MODE_NO_PROMPT="no-prompt",h([f()],$e.prototype,"access",void 0),h([f()],$e.prototype,"allSSL",void 0),h([f()],$e.prototype,"authMode",void 0),h([f()],$e.prototype,"authorizedCrossOriginDomains",void 0),h([ve("authorizedCrossOriginDomains")],$e.prototype,"readAuthorizedCrossOriginDomains",null),h([f()],$e.prototype,"basemapGalleryGroupQuery",void 0),h([f({json:{name:"3DBasemapGalleryGroupQuery"}})],$e.prototype,"basemapGalleryGroupQuery3D",void 0),h([f()],$e.prototype,"bingKey",void 0),h([f()],$e.prototype,"canListApps",void 0),h([f()],$e.prototype,"canListData",void 0),h([f()],$e.prototype,"canListPreProvisionedItems",void 0),h([f()],$e.prototype,"canProvisionDirectPurchase",void 0),h([f()],$e.prototype,"canSearchPublic",void 0),h([f()],$e.prototype,"canShareBingPublic",void 0),h([f()],$e.prototype,"canSharePublic",void 0),h([f()],$e.prototype,"canSignInArcGIS",void 0),h([f()],$e.prototype,"canSignInIDP",void 0),h([f()],$e.prototype,"colorSetsGroupQuery",void 0),h([f()],$e.prototype,"commentsEnabled",void 0),h([f({type:Date})],$e.prototype,"created",void 0),h([f()],$e.prototype,"credential",void 0),h([f()],$e.prototype,"culture",void 0),h([f()],$e.prototype,"currentVersion",void 0),h([f()],$e.prototype,"customBaseUrl",void 0),h([f()],$e.prototype,"default3DBasemapQuery",void 0),h([f()],$e.prototype,"defaultBasemap",void 0),h([ve("defaultBasemap")],$e.prototype,"readDefaultBasemap",null),h([f()],$e.prototype,"defaultDevBasemap",void 0),h([ve("defaultDevBasemap")],$e.prototype,"readDefaultDevBasemap",null),h([f({type:oi})],$e.prototype,"defaultExtent",void 0),h([f()],$e.prototype,"defaultVectorBasemap",void 0),h([ve("defaultVectorBasemap")],$e.prototype,"readDefaultVectorBasemap",null),h([f()],$e.prototype,"description",void 0),h([f()],$e.prototype,"devBasemapGalleryGroupQuery",void 0),h([f()],$e.prototype,"eueiEnabled",void 0),h([f({readOnly:!0})],$e.prototype,"extraQuery",null),h([f()],$e.prototype,"featuredGroups",void 0),h([f()],$e.prototype,"featuredItemsGroupQuery",void 0),h([f()],$e.prototype,"galleryTemplatesGroupQuery",void 0),h([f()],$e.prototype,"layoutGroupQuery",void 0),h([f()],$e.prototype,"livingAtlasGroupQuery",void 0),h([f({readOnly:!0})],$e.prototype,"hasAPIKey",null),h([f()],$e.prototype,"hasCategorySchema",void 0),h([f()],$e.prototype,"hasClassificationSchema",void 0),h([f()],$e.prototype,"helpBase",void 0),h([f()],$e.prototype,"helperServices",void 0),h([f()],$e.prototype,"helpMap",void 0),h([f()],$e.prototype,"homePageFeaturedContent",void 0),h([f()],$e.prototype,"homePageFeaturedContentCount",void 0),h([f()],$e.prototype,"httpPort",void 0),h([f()],$e.prototype,"httpsPort",void 0),h([f()],$e.prototype,"id",void 0),h([f()],$e.prototype,"ipCntryCode",void 0),h([f({readOnly:!0})],$e.prototype,"isOrganization",null),h([f()],$e.prototype,"isPortal",void 0),h([f()],$e.prototype,"isReadOnly",void 0),h([f({readOnly:!0})],$e.prototype,"itemPageUrl",null),h([f()],$e.prototype,"layerTemplatesGroupQuery",void 0),h([f()],$e.prototype,"maxTokenExpirationMinutes",void 0),h([f({type:Date})],$e.prototype,"modified",void 0),h([f()],$e.prototype,"name",void 0),h([f()],$e.prototype,"portalHostname",void 0),h([f()],$e.prototype,"portalMode",void 0),h([f()],$e.prototype,"portalProperties",void 0),h([f()],$e.prototype,"region",void 0),h([f()],$e.prototype,"recycleBinEnabled",void 0),h([f({readOnly:!0})],$e.prototype,"restUrl",null),h([f()],$e.prototype,"rotatorPanels",void 0),h([f()],$e.prototype,"showHomePageDescription",void 0),h([f()],$e.prototype,"sourceJSON",void 0),h([f()],$e.prototype,"staticImagesUrl",void 0),h([f({json:{name:"2DStylesGroupQuery"}})],$e.prototype,"stylesGroupQuery2d",void 0),h([f({json:{name:"stylesGroupQuery"}})],$e.prototype,"stylesGroupQuery3d",void 0),h([f()],$e.prototype,"supportsHostedServices",void 0),h([f()],$e.prototype,"symbolSetsGroupQuery",void 0),h([f()],$e.prototype,"templatesGroupQuery",void 0),h([f()],$e.prototype,"thumbnail",void 0),h([f({readOnly:!0})],$e.prototype,"thumbnailUrl",null),h([f()],$e.prototype,"units",void 0),h([f()],$e.prototype,"url",void 0),h([f()],$e.prototype,"urlKey",void 0),h([ve("urlKey")],$e.prototype,"readUrlKey",null),h([f()],$e.prototype,"user",void 0),h([ve("user")],$e.prototype,"readUser",null),h([f()],$e.prototype,"use3dBasemaps",void 0),h([f()],$e.prototype,"useDefault3dBasemap",void 0),h([f()],$e.prototype,"useStandardizedQuery",void 0),h([f()],$e.prototype,"useVectorBasemaps",void 0),h([f()],$e.prototype,"vectorBasemapGalleryGroupQuery",void 0),$e=Zo=h([A("esri.portal.Portal")],$e);const Lr=$e,BX=new FinalizationRegistry(t=>{t.remove()});function yNe(t){const e=Ye;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let bh=class extends Ce{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:qX(e.path,e.portalItem)}:e}set path(e){e!=null&&la(e)?pe.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return qX(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new G("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:r}=await J(()=>import("./resourceUtils-DzJsZ28y.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function qX(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&la(t)&&(t=VQ(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}h([f()],bh.prototype,"portalItem",void 0),h([f({type:String,value:null})],bh.prototype,"path",null),h([Rt("path")],bh.prototype,"_castPath",null),h([f({type:String,readOnly:!0})],bh.prototype,"url",null),h([f({type:String,readOnly:!0})],bh.prototype,"cdnUrl",null),h([f({type:String,readOnly:!0})],bh.prototype,"itemRelativeUrl",null),bh=h([A("esri.portal.PortalItemResource")],bh);const gNe=bh;let VS=class extends Ce{constructor(e){super(e),this.created=null,this.rating=null}};h([f({type:Date})],VS.prototype,"created",void 0),h([f()],VS.prototype,"rating",void 0),VS=h([A("esri.portal.PortalRating")],VS);const hN=VS;var iy;const vNe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),bNe=new Set(["KML","GeoJson","CSV"]);let yt=iy=class extends K.JSONSupportMixin(fa){static from(t){return vO(iy,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new oi(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var w;const t=((w=this.type)==null?void 0:w.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,a=!1,l=!1,u=!1,p=!1,m=!1,g=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),u=e.includes("Spatiotemporal"),p=e.includes("UtilityNetwork"),n=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":p?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(u=e.includes("Spatiotemporal"),m=e.includes("Relational"),n=u||m?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(g=e.includes("Map"),n=g?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",n?zi(i+n+r+".png"):null}get isLayer(){return this.type!=null&&vNe.has(this.type)}get itemCdnUrl(){return BQ(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,r,n;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((n=(r=this.portal)==null?void 0:r.user)==null?void 0:n.username);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Lr.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof hN?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new hN({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:q(this.applicationProxies),avgRating:this.avgRating,categories:q(this.categories),classification:q(this.classification),created:q(this.created),culture:this.culture,description:this.description,extent:q(this.extent),groupCategories:q(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:q(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:q(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new iy({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const r=t[i];r&&(t[i]=JSON.stringify(r))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new hN(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},iy)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new G("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new G("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:n,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new iy({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")$d(e)?r.query={data:e}:r.query={url:na(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new G("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await J(()=>import("./resourceUtils-DzJsZ28y.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await J(()=>import("./resourceUtils-DzJsZ28y.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await J(()=>import("./resourceUtils-DzJsZ28y.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new G("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await J(()=>import("./resourceUtils-DzJsZ28y.js"),[]);return e(this,t)}resourceFromPath(t){return new gNe({portalItem:this,path:t})}toJSON(){var i,r;const t=this.extent,e={accessInformation:this.accessInformation,categories:q(this.categories),classification:q(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};return kEe(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new iy({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};h([f({type:["private","shared","org","public"]})],yt.prototype,"access",void 0),h([f()],yt.prototype,"accessInformation",void 0),h([f({type:String})],yt.prototype,"apiKey",void 0),h([f({json:{read:{source:"appProxies"}}})],yt.prototype,"applicationProxies",void 0),h([f()],yt.prototype,"avgRating",void 0),h([f()],yt.prototype,"categories",void 0),h([f()],yt.prototype,"classification",void 0),h([f({type:Date})],yt.prototype,"created",void 0),h([f()],yt.prototype,"culture",void 0),h([f()],yt.prototype,"description",void 0),h([f({readOnly:!0})],yt.prototype,"displayName",null),h([f({type:oi})],yt.prototype,"extent",void 0),h([ve("extent")],yt.prototype,"readExtent",null),h([f()],yt.prototype,"groupCategories",void 0),h([f({readOnly:!0})],yt.prototype,"iconUrl",null),h([f()],yt.prototype,"id",void 0),h([f({readOnly:!0})],yt.prototype,"isLayer",null),h([f({type:Boolean,readOnly:!0})],yt.prototype,"isOrgItem",void 0),h([f()],yt.prototype,"itemControl",void 0),h([f({readOnly:!0})],yt.prototype,"itemPageUrl",null),h([f({readOnly:!0})],yt.prototype,"itemUrl",null),h([f()],yt.prototype,"licenseInfo",void 0),h([f({type:Date})],yt.prototype,"modified",void 0),h([f()],yt.prototype,"name",void 0),h([f()],yt.prototype,"numComments",void 0),h([f()],yt.prototype,"numRatings",void 0),h([f()],yt.prototype,"numViews",void 0),h([f()],yt.prototype,"owner",void 0),h([f()],yt.prototype,"ownerFolder",void 0),h([f({type:Lr})],yt.prototype,"portal",void 0),h([f()],yt.prototype,"screenshots",void 0),h([f()],yt.prototype,"size",void 0),h([f()],yt.prototype,"snippet",void 0),h([f()],yt.prototype,"sourceJSON",void 0),h([f({type:String})],yt.prototype,"sourceUrl",void 0),h([f({type:String})],yt.prototype,"spatialReference",void 0),h([f()],yt.prototype,"tags",void 0),h([f()],yt.prototype,"thumbnail",void 0),h([f({readOnly:!0})],yt.prototype,"thumbnailUrl",null),h([f()],yt.prototype,"title",void 0),h([f()],yt.prototype,"type",void 0),h([f()],yt.prototype,"typeKeywords",void 0),h([f({type:String,json:{read(t,e){var i;if(bNe.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],yt.prototype,"url",void 0),h([f({readOnly:!0})],yt.prototype,"userItemUrl",null),yt=iy=h([A("esri.portal.PortalItem")],yt);const Hs=yt,_he=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"}));async function wNe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await w8("esri/t9n/basemaps");return i[t]||i[e]}const AV={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return zi("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return zi("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return zi("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return zi("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return zi("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return zi("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};let wh=class extends Ce{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:kce(e??Mo())??"global";return i=i==="no"?"nb":i,i}};h([f()],wh.prototype,"apiKey",void 0),h([f()],wh.prototype,"id",void 0),h([f()],wh.prototype,"language",void 0),h([f()],wh.prototype,"places",void 0),h([f()],wh.prototype,"serviceUrl",void 0),h([f()],wh.prototype,"worldview",void 0),wh=h([A("esri.support.BasemapStyle")],wh);const ONe=wh;function xhe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function SNe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Xa(t){return(t==null?void 0:t.type)==="subtype-sublayer"}const l0t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function IV(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function u0t(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function HP(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function c0t(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t==null?void 0:t.source)==null?void 0:i.type)==="feature-layer"}async function I8(t,e){const i=Ye==null?void 0:Ye.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await bt(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function $he(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function _Ne(t){return $he(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function xNe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function $Ne(t){return!!xNe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const TNe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),The=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wcs","wfs","wms","wmts"]),ENe=new Set([...The,"link-chart"]);function kNe(t){switch(t.layerContainerType){case"basemap":return TNe;case"operational-layers":return t.origin==="link-chart"?ENe:The;default:return null}}function CNe(t,e){if(e.restrictedWebMapWriting){const i=kNe(e);return i==null||i.has(t.type)&&!HP(t)}return!0}function MNe(t,e){var i;if(e)if(HP(t)){const r=t2("featureCollection.layers",e),n=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;n&&GX(t,n)}else t.type!=="group"&&GX(t,e)}function GX(t,e){"maxScale"in t&&(e.maxScale=yA(t.maxScale)??void 0),"minScale"in t&&(e.minScale=yA(t.minScale)??void 0)}function ANe(t,e){if(MNe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=yA(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(HP(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function PV(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new G("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(HP(t)&&!t.isTable)e=t.resourceInfo;else if(CNe(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&ANe(t,e=q(e)),e}var FS;let INe=0,Ho=FS=class extends K.JSONSupportMixin(fa){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+INe++,this.baseLayers=new Te,this.referenceLayers=new Te;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&pe.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{pe.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=bi(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",wd(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=PV(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&r.push(s)}),this.referenceLayers.forEach(n=>{const s=PV(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&(n.type!=="scene"&&(s.isReference=!0),r.push(s))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",wd(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return ZP(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>iA(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>iA(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new FS({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){var i;return t=t||{},e!=null&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const n=q(r);return n.url&&_c(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&_c(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:r}=this;rr(t);const n=[];if(e){const s=e.context?e.context.url:null;if(n.push(this._loadLayersFromJSON(e.data,s,t)),e.data.id&&!e.data.title){const o=e.data.id;n.push(wNe(o).then(a=>{a&&this.read({title:a},e.context)}))}}else i?n.push(this._loadFromItem(i,t)):r&&n.push(this._loadFromStylesService(r,t));await Promise.all(n)}async _loadLayersFromJSON(t,e,i){var l,u;const r=(l=this.resourceInfo)==null?void 0:l.context,n=((u=this.portalItem)==null?void 0:u.portal)||(r==null?void 0:r.portal)||null,s=RNe[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await J(async()=>{const{populateOperationalLayers:p}=await import("./layersCreator-D9JmvcUB.js");return{populateOperationalLayers:p}},__vite__mapDeps([137,138,139,140,141,142])),a=[];if(rr(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const p={context:{...r,origin:s,url:e,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},m=O=>s==="web-scene"&&O.layerType==="ArcGISSceneServiceLayer"||O.isReference,g=o(this.baseLayers,t.baseMapLayers.filter(O=>!m(O)),p);a.push(g);const w=o(this.referenceLayers,t.baseMapLayers.filter(m),p);a.push(w)}await Promise.allSettled(a)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),n=xr(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:PNe[t.type||""]??"web-map",portal:t.portal||Lr.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||Lr.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,e)}async _loadFromStylesService(t,e){const i=t.serviceUrl.endsWith("/webmaps")?t.serviceUrl.slice(0,-8):t.serviceUrl,r=`${i}/styles/${t.id}/self`,n=`${i}/webmaps/${t.id}`,[s,o]=await Promise.all([(await bt(r,{query:{token:t.apiKey},signal:e==null?void 0:e.signal})).data,(await bt(n,{query:{language:t.languageParameter,places:t.places,worldview:t.worldview,token:t.apiKey},signal:e==null?void 0:e.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=s.thumbnailUrl);const a=xr(n);if(this._set("resourceInfo",{data:o.baseMap??{},context:{origin:"web-map",url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:o.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,a,e),t.apiKey)for(const l of[...this.baseLayers,...this.referenceLayers])"apiKey"in l&&(l.apiKey=t.apiKey)}static fromId(t){const e=AV[t];return e?e.itemId?new FS({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):FS.fromJSON(e,{origin:e.is3d?"web-scene":"web-map"}):null}};h([f({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Te}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],Ho.prototype,"baseLayers",null),h([f({type:String,json:{origins:{"web-scene":{write:!0}}}})],Ho.prototype,"id",void 0),h([f({type:Hs})],Ho.prototype,"portalItem",void 0),h([f()],Ho.prototype,"referenceLayers",null),h([f({readOnly:!0})],Ho.prototype,"resourceInfo",void 0),h([f({type:Je})],Ho.prototype,"spatialReference",void 0),h([f({type:ONe})],Ho.prototype,"style",void 0),h([f()],Ho.prototype,"thumbnailUrl",void 0),h([f({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Ho.prototype,"title",void 0),h([we("title")],Ho.prototype,"writeTitle",null),Ho=FS=h([A("esri.Basemap")],Ho);const PNe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},RNe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},fx=Ho,LNe=Object.freeze(Object.defineProperty({__proto__:null,default:fx},Symbol.toStringTag,{value:"Module"})),QA={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Ehe(t){return!!QA[t]||!!QA[t.toLowerCase()]}function P8(t){return QA[t]??QA[t.toLowerCase()]}function NNe(t){return[...P8(t)]}function dN(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function khe(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*dN(o,s,n+1/3)),Math.round(255*dN(o,s,n)),Math.round(255*dN(o,s,n-1/3)),r]}function DNe(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=i,a[3]=n*l/255),l=o&r,o>>=i,a[2]=n*l,l=o&r,o>>=i,a[1]=n*l,l=o&r,o>>=i,a[0]=n*l,a}const h0t=2.2;function NE(t){return Po($P(t),0,255)}function DE(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}function VE(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let xe=class sn{static blendColors(e,i,r,n=new sn){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),s=r[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),sn.fromArray(a,i)}return sn.fromArray(n.map(a=>parseFloat(a)),i)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return sn.fromArray(khe(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(e,i=new sn){if(e[0]!=="#"||isNaN(+`0x${e.slice(1)}`))return null;switch(e.length){case 4:case 5:{const r=parseInt(e.slice(1,2),16),n=parseInt(e.slice(2,3),16),s=parseInt(e.slice(3,4),16),o=e.length===5?15:parseInt(e.slice(4),16);return sn.fromArray([r+16*r,n+16*n,s+16*s,(o+16*o)/255],i)}case 7:case 9:{const r=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16),o=e.length===7?255:parseInt(e.slice(7),16);return sn.fromArray([r,n,s,o/255],i)}default:return null}}static fromArray(e,i=new sn){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=Ehe(e)?P8(e):null;return r&&sn.fromArray(r,i)||sn.fromRgb(e,i)||sn.fromHex(e,i)}static fromJSON(e){return e!=null?new sn([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?sn.fromString(e,this):Array.isArray(e)?sn.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof sn||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,r=(e==null?void 0:e.digits)??6,n=r===3||r===4,s=r===4||r===8,o=`#${VE(this.r,n)}${VE(this.g,n)}${VE(this.b,n)}${s?VE(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=sn.AlphaMode.ALWAYS){const i=NE(this.r),r=NE(this.g),n=NE(this.b);return e===sn.AlphaMode.ALWAYS||this.a!==1?[i,r,n,NE(255*this.a)]:[i,r,n]}clone(){return new sn(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(DE(this.r,0,255)),this.g=Math.round(DE(this.g,0,255)),this.b=Math.round(DE(this.b,0,255)),this.a=DE(this.a,0,1),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};xe.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(xe);function Re(t,e={}){const i=t instanceof nt?t:new nt(t,e),{alwaysWriteDefaults:r,default:n,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return f({type:s?i.apiValues:String,json:{type:i.jsonValues,default:n,name:o,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}var RV;let TC=RV=class extends K{constructor(t){super(t),this.type="none"}clone(){return new RV({type:this.type})}};h([Re({none:"none",stayAbove:"stay-above"}),f({json:{write:{isRequired:!0}}})],TC.prototype,"type",void 0),TC=RV=h([A("esri.ground.NavigationConstraint")],TC);const VNe=Symbol("GroundInstance");function WP(t){const e=$P(100*(1-t));return Math.max(0,Math.min(e,100))}function l$(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var Che,LV;let Oh=LV=class extends K.JSONSupportMixin(fa){constructor(t){super(t),this[Che]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Te;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&pe.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{vn(t)||pe.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)bi(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get layers(){return this._get("layers")}set layers(t){this._set("layers",wd(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};_Ee(s)().write(o,r)&&n.push(o)}else r!=null&&r.messages&&r.messages.push(new G("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return ZP(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await J(()=>import("./ElevationQuery-c0zhQ8Qp.js"),[]);rr(e);const r=new i,n=this.layers.filter(ZX).toArray();return r.queryAll(n,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await J(()=>import("./ElevationQuery-c0zhQ8Qp.js"),[]);rr(e);const r=new i,n=this.layers.filter(ZX).toArray();return r.createSamplerAll(n,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:q(this.surfaceColor),navigationConstraint:q(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new LV({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=(e==null?void 0:e.origin)||"web-scene",n=(e==null?void 0:e.portal)||null,s=(e==null?void 0:e.url)||null,{populateOperationalLayers:o}=await J(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-D9JmvcUB.js");return{populateOperationalLayers:l}},__vite__mapDeps([137,138,139,140,141,142]));rr(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}};function FNe(t){return t&&"createElevationSampler"in t}function ZX(t){return t.type==="elevation"||FNe(t)}Che=VNe,h([f({json:{read:!1,write:{isRequired:!0}}})],Oh.prototype,"layers",null),h([we("layers")],Oh.prototype,"writeLayers",null),h([f({readOnly:!0})],Oh.prototype,"resourceInfo",void 0),h([f({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:kt,read:{reader:l$,source:"transparency"},write:{writer:(t,e)=>{e.transparency=WP(t)},target:"transparency"}}})],Oh.prototype,"opacity",void 0),h([f({type:xe,json:{type:[kt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Oh.prototype,"surfaceColor",void 0),h([f({type:TC,json:{write:!0}})],Oh.prototype,"navigationConstraint",void 0),Oh=LV=h([A("esri.Ground")],Oh);const BA=Oh,FE=new WeakMap;function R8(t){return!t.destroyed&&(FE.has(t)||t.addHandles([Oe(()=>{const e=t.parent;return!(!e||!("type"in e))&&(e.type==="catalog-dynamic-group"||R8(e))},e=>FE.set(t,e),Us),Bt(()=>FE.delete(t))]),FE.get(t))}function HX(t,e){var a;const i=t.parent,r=t.layer;if((r==null?void 0:r.type)!=="map-image"||!r.sourceJSON||!i)return!1;const n=r.sourceJSON.layers;if(!n)return!1;const s=n.find(l=>t.id===l.id),o=e==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return(s==null?void 0:s.type)===o&&((a=n.find(l=>l.id===i.id))==null?void 0:a.type)==="Catalog Layer"}function jNe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function zNe(t){var e,i;return!(!jNe(t)||!((i=(e=_Ne(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!$Ne(t)||R8(t))}const UNe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,QNe="screenUtils.toPt: input not recognized!",Mhe=96;function wi(t){return t?t/72*Mhe:0}function $s(t){return t?72*t/Mhe:0}function Vt(t){if(typeof t=="string"){const e=t.match(UNe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",s=r==="px"?$s(i):i;return n?-s:s}return console.warn(QNe),null}return t}function Xr(t=0,e=0){return{x:t,y:e}}function d0t(t){return t?Xr(t.x,t.y):null}function p0t(t=0,e=0){return[t,e]}function f0t(t=0,e=0,i=0){return[t,e,i]}function m0t(t){return t}function y0t(t){return t}function g0t(t){return t}function v0t(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function XP(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function BNe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function qNe(t,e,i,r,n,s,o,a,l,u,p,m,g,w,O,_){const x=new Float32Array(16);return x[0]=t,x[1]=e,x[2]=i,x[3]=r,x[4]=n,x[5]=s,x[6]=o,x[7]=a,x[8]=l,x[9]=u,x[10]=p,x[11]=m,x[12]=g,x[13]=w,x[14]=O,x[15]=_,x}function GNe(t,e){return new Float32Array(t,e,16)}const ZNe=XP();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:ZNe,clone:BNe,create:XP,createView:GNe,fromValues:qNe},Symbol.toStringTag,{value:"Module"}));let L8=1e-6;function Ws(){return L8}function HNe(t){L8=t}const YP=Math.random,WNe=Math.PI/180,XNe=180/Math.PI;function N8(t){return t*WNe}function YNe(t){return t*XNe}function JNe(t,e){return Math.abs(t-e)<=L8*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:YP,equals:JNe,getEpsilon:Ws,setEpsilon:HNe,toDegree:YNe,toRadian:N8},Symbol.toStringTag,{value:"Module"}));function Ahe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function nm(t,e,i,r,n,s,o,a,l,u,p,m,g,w,O,_,x){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t[9]=p,t[10]=m,t[11]=g,t[12]=w,t[13]=O,t[14]=_,t[15]=x,t}function JP(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function sm(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function KNe(t,e){return Ihe(t,e)||JP(t),t}function Ihe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],m=e[9],g=e[10],w=e[11],O=e[12],_=e[13],x=e[14],T=e[15],E=i*a-r*o,k=i*l-n*o,M=i*u-s*o,R=r*l-n*a,D=r*u-s*a,L=n*u-s*l,F=p*_-m*O,j=p*x-g*O,B=p*T-w*O,W=m*x-g*_,ie=m*T-w*_,oe=g*T-w*x;let ae=E*oe-k*ie+M*W+R*B-D*j+L*F;return ae?(ae=1/ae,t[0]=(a*oe-l*ie+u*W)*ae,t[1]=(n*ie-r*oe-s*W)*ae,t[2]=(_*L-x*D+T*R)*ae,t[3]=(g*D-m*L-w*R)*ae,t[4]=(l*B-o*oe-u*j)*ae,t[5]=(i*oe-n*B+s*j)*ae,t[6]=(x*M-O*L-T*k)*ae,t[7]=(p*L-g*M+w*k)*ae,t[8]=(o*ie-a*B+u*F)*ae,t[9]=(r*B-i*ie-s*F)*ae,t[10]=(O*D-_*M+T*E)*ae,t[11]=(m*M-p*D-w*E)*ae,t[12]=(a*j-o*W-l*F)*ae,t[13]=(i*W-r*j+n*F)*ae,t[14]=(_*k-O*R-x*E)*ae,t[15]=(p*R-m*k+g*E)*ae,t):null}function eDe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],m=e[9],g=e[10],w=e[11],O=e[12],_=e[13],x=e[14],T=e[15];return t[0]=a*(g*T-w*x)-m*(l*T-u*x)+_*(l*w-u*g),t[1]=-(r*(g*T-w*x)-m*(n*T-s*x)+_*(n*w-s*g)),t[2]=r*(l*T-u*x)-a*(n*T-s*x)+_*(n*u-s*l),t[3]=-(r*(l*w-u*g)-a*(n*w-s*g)+m*(n*u-s*l)),t[4]=-(o*(g*T-w*x)-p*(l*T-u*x)+O*(l*w-u*g)),t[5]=i*(g*T-w*x)-p*(n*T-s*x)+O*(n*w-s*g),t[6]=-(i*(l*T-u*x)-o*(n*T-s*x)+O*(n*u-s*l)),t[7]=i*(l*w-u*g)-o*(n*w-s*g)+p*(n*u-s*l),t[8]=o*(m*T-w*_)-p*(a*T-u*_)+O*(a*w-u*m),t[9]=-(i*(m*T-w*_)-p*(r*T-s*_)+O*(r*w-s*m)),t[10]=i*(a*T-u*_)-o*(r*T-s*_)+O*(r*u-s*a),t[11]=-(i*(a*w-u*m)-o*(r*w-s*m)+p*(r*u-s*a)),t[12]=-(o*(m*x-g*_)-p*(a*x-l*_)+O*(a*g-l*m)),t[13]=i*(m*x-g*_)-p*(r*x-n*_)+O*(r*g-n*m),t[14]=-(i*(a*x-l*_)-o*(r*x-n*_)+O*(r*l-n*a)),t[15]=i*(a*g-l*m)-o*(r*g-n*m)+p*(r*l-n*a),t}function tDe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],p=t[9],m=t[10],g=t[11],w=t[12],O=t[13],_=t[14],x=t[15];return(e*o-i*s)*(m*x-g*_)-(e*a-r*s)*(p*x-g*O)+(e*l-n*s)*(p*_-m*O)+(i*a-r*o)*(u*x-g*w)-(i*l-n*o)*(u*_-m*w)+(r*l-n*a)*(u*O-p*w)}function Phe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],m=e[8],g=e[9],w=e[10],O=e[11],_=e[12],x=e[13],T=e[14],E=e[15];let k=i[0],M=i[1],R=i[2],D=i[3];return t[0]=k*r+M*a+R*m+D*_,t[1]=k*n+M*l+R*g+D*x,t[2]=k*s+M*u+R*w+D*T,t[3]=k*o+M*p+R*O+D*E,k=i[4],M=i[5],R=i[6],D=i[7],t[4]=k*r+M*a+R*m+D*_,t[5]=k*n+M*l+R*g+D*x,t[6]=k*s+M*u+R*w+D*T,t[7]=k*o+M*p+R*O+D*E,k=i[8],M=i[9],R=i[10],D=i[11],t[8]=k*r+M*a+R*m+D*_,t[9]=k*n+M*l+R*g+D*x,t[10]=k*s+M*u+R*w+D*T,t[11]=k*o+M*p+R*O+D*E,k=i[12],M=i[13],R=i[14],D=i[15],t[12]=k*r+M*a+R*m+D*_,t[13]=k*n+M*l+R*g+D*x,t[14]=k*s+M*u+R*w+D*T,t[15]=k*o+M*p+R*O+D*E,t}function iDe(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],u=e[3],p=e[4],m=e[5],g=e[6],w=e[7],O=e[8],_=e[9],x=e[10],T=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=p,t[5]=m,t[6]=g,t[7]=w,t[8]=O,t[9]=_,t[10]=x,t[11]=T,t[12]=o*r+p*n+O*s+e[12],t[13]=a*r+m*n+_*s+e[13],t[14]=l*r+g*n+x*s+e[14],t[15]=u*r+w*n+T*s+e[15]}return t}function rDe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function nDe(t,e,i,r){let n=r[0],s=r[1],o=r[2],a=Math.sqrt(n*n+s*s+o*o);if(a<=Ws())return void Ahe(t,e);a=1/a,n*=a,s*=a,o*=a;const l=Math.sin(i),u=Math.cos(i),p=1-u,m=e[0],g=e[1],w=e[2],O=e[3],_=e[4],x=e[5],T=e[6],E=e[7],k=e[8],M=e[9],R=e[10],D=e[11],L=n*n*p+u,F=s*n*p+o*l,j=o*n*p-s*l,B=n*s*p-o*l,W=s*s*p+u,ie=o*s*p+n*l,oe=n*o*p+s*l,ae=s*o*p-n*l,Ee=o*o*p+u;t[0]=m*L+_*F+k*j,t[1]=g*L+x*F+M*j,t[2]=w*L+T*F+R*j,t[3]=O*L+E*F+D*j,t[4]=m*B+_*W+k*ie,t[5]=g*B+x*W+M*ie,t[6]=w*B+T*W+R*ie,t[7]=O*B+E*W+D*ie,t[8]=m*oe+_*ae+k*Ee,t[9]=g*oe+x*ae+M*Ee,t[10]=w*oe+T*ae+R*Ee,t[11]=O*oe+E*ae+D*Ee,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function sDe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],p=e[9],m=e[10],g=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+u*r,t[5]=o*n+p*r,t[6]=a*n+m*r,t[7]=l*n+g*r,t[8]=u*n-s*r,t[9]=p*n-o*r,t[10]=m*n-a*r,t[11]=g*n-l*r,t}function oDe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],u=e[8],p=e[9],m=e[10],g=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-u*r,t[1]=o*n-p*r,t[2]=a*n-m*r,t[3]=l*n-g*r,t[8]=s*r+u*n,t[9]=o*r+p*n,t[10]=a*r+m*n,t[11]=l*r+g*n,t}function aDe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],u=e[4],p=e[5],m=e[6],g=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+u*r,t[1]=o*n+p*r,t[2]=a*n+m*r,t[3]=l*n+g*r,t[4]=u*n-s*r,t[5]=p*n-o*r,t[6]=m*n-a*r,t[7]=g*n-l*r,t}function lDe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function uDe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function cDe(t,e,i){if(e===0)return JP(t);let r=i[0],n=i[1],s=i[2],o=Math.sqrt(r*r+n*n+s*s);if(o<=Ws())return null;o=1/o,r*=o,n*=o,s*=o;const a=Math.sin(e),l=Math.cos(e),u=1-l;return t[0]=r*r*u+l,t[1]=n*r*u+s*a,t[2]=s*r*u-n*a,t[3]=0,t[4]=r*n*u-s*a,t[5]=n*n*u+l,t[6]=s*n*u+r*a,t[7]=0,t[8]=r*s*u+n*a,t[9]=n*s*u-r*a,t[10]=s*s*u+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hDe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dDe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pDe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Rhe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,l=n+n,u=s+s,p=r*a,m=r*l,g=r*u,w=n*l,O=n*u,_=s*u,x=o*a,T=o*l,E=o*u;return t[0]=1-(w+_),t[1]=m+E,t[2]=g-T,t[3]=0,t[4]=m-E,t[5]=1-(p+_),t[6]=O+x,t[7]=0,t[8]=g+T,t[9]=O-x,t[10]=1-(p+w),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function fDe(t,e){const i=mDe,r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],m=r*r+n*n+s*s+o*o;return m>0?(i[0]=2*(a*o+p*r+l*s-u*n)/m,i[1]=2*(l*o+p*n+u*r-a*s)/m,i[2]=2*(u*o+p*s+a*n-l*r)/m):(i[0]=2*(a*o+p*r+l*s-u*n),i[1]=2*(l*o+p*n+u*r-a*s),i[2]=2*(u*o+p*s+a*n-l*r)),Rhe(t,e,i),t}const mDe=tm();function yDe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function gDe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],p=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+u*u+p*p),t}function vDe(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function bDe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3],l=n+n,u=s+s,p=o+o,m=n*l,g=n*u,w=n*p,O=s*u,_=s*p,x=o*p,T=a*l,E=a*u,k=a*p,M=r[0],R=r[1],D=r[2];return t[0]=(1-(O+x))*M,t[1]=(g+k)*M,t[2]=(w-E)*M,t[3]=0,t[4]=(g-k)*R,t[5]=(1-(m+x))*R,t[6]=(_+T)*R,t[7]=0,t[8]=(w+E)*D,t[9]=(_-T)*D,t[10]=(1-(m+O))*D,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function wDe(t,e,i,r,n){const s=e[0],o=e[1],a=e[2],l=e[3],u=s+s,p=o+o,m=a+a,g=s*u,w=s*p,O=s*m,_=o*p,x=o*m,T=a*m,E=l*u,k=l*p,M=l*m,R=r[0],D=r[1],L=r[2],F=n[0],j=n[1],B=n[2],W=(1-(_+T))*R,ie=(w+M)*R,oe=(O-k)*R,ae=(w-M)*D,Ee=(1-(g+T))*D,ue=(x+E)*D,he=(O+k)*L,ye=(x-E)*L,Ae=(1-(g+_))*L;return t[0]=W,t[1]=ie,t[2]=oe,t[3]=0,t[4]=ae,t[5]=Ee,t[6]=ue,t[7]=0,t[8]=he,t[9]=ye,t[10]=Ae,t[11]=0,t[12]=i[0]+F-(W*F+ae*j+he*B),t[13]=i[1]+j-(ie*F+Ee*j+ye*B),t[14]=i[2]+B-(oe*F+ue*j+Ae*B),t[15]=1,t}function ODe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,u=i*o,p=r*o,m=r*a,g=n*o,w=n*a,O=n*l,_=s*o,x=s*a,T=s*l;return t[0]=1-m-O,t[1]=p+T,t[2]=g-x,t[3]=0,t[4]=p-T,t[5]=1-u-O,t[6]=w+_,t[7]=0,t[8]=g+x,t[9]=w-_,t[10]=1-u-m,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function SDe(t,e,i,r,n,s,o){const a=1/(i-e),l=1/(n-r),u=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(n+r)*l,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0,t}function _De(t,e,i,r,n){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(r-n),t[10]=(n+r)*o,t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t}function xDe(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(n+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(n-s)*u*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function $De(t,e,i,r,n,s,o){const a=1/(e-i),l=1/(r-n),u=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*l,t[14]=(o+s)*u,t[15]=1,t}function TDe(t,e,i,r){const n=e[0],s=e[1],o=e[2];let a=n-i[0],l=s-i[1],u=o-i[2];const p=Ws();if(Math.abs(a)<p&&Math.abs(l)<p&&Math.abs(u)<p)return void JP(t);let m=1/Math.sqrt(a*a+l*l+u*u);a*=m,l*=m,u*=m;const g=r[0],w=r[1],O=r[2];let _=w*u-O*l,x=O*a-g*u,T=g*l-w*a;m=Math.sqrt(_*_+x*x+T*T),m?(m=1/m,_*=m,x*=m,T*=m):(_=0,x=0,T=0);let E=l*T-u*x,k=u*_-a*T,M=a*x-l*_;m=Math.sqrt(E*E+k*k+M*M),m?(m=1/m,E*=m,k*=m,M*=m):(E=0,k=0,M=0),t[0]=_,t[1]=E,t[2]=a,t[3]=0,t[4]=x,t[5]=k,t[6]=l,t[7]=0,t[8]=T,t[9]=M,t[10]=u,t[11]=0,t[12]=-(_*n+x*s+T*o),t[13]=-(E*n+k*s+M*o),t[14]=-(a*n+l*s+u*o),t[15]=1}function EDe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=r[0],l=r[1],u=r[2];let p=n-i[0],m=s-i[1],g=o-i[2],w=p*p+m*m+g*g;w>0&&(w=1/Math.sqrt(w),p*=w,m*=w,g*=w);let O=l*g-u*m,_=u*p-a*g,x=a*m-l*p;return w=O*O+_*_+x*x,w>0&&(w=1/Math.sqrt(w),O*=w,_*=w,x*=w),t[0]=O,t[1]=_,t[2]=x,t[3]=0,t[4]=m*x-g*_,t[5]=g*O-p*x,t[6]=p*_-m*O,t[7]=0,t[8]=p,t[9]=m,t[10]=g,t[11]=0,t[12]=n,t[13]=s,t[14]=o,t[15]=1,t}function kDe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function CDe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function MDe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function Lhe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function ADe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function IDe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function PDe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function RDe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],p=t[8],m=t[9],g=t[10],w=t[11],O=t[12],_=t[13],x=t[14],T=t[15],E=e[0],k=e[1],M=e[2],R=e[3],D=e[4],L=e[5],F=e[6],j=e[7],B=e[8],W=e[9],ie=e[10],oe=e[11],ae=e[12],Ee=e[13],ue=e[14],he=e[15],ye=Ws();return Math.abs(i-E)<=ye*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(r-k)<=ye*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(n-M)<=ye*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(s-R)<=ye*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(o-D)<=ye*Math.max(1,Math.abs(o),Math.abs(D))&&Math.abs(a-L)<=ye*Math.max(1,Math.abs(a),Math.abs(L))&&Math.abs(l-F)<=ye*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(u-j)<=ye*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(p-B)<=ye*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(m-W)<=ye*Math.max(1,Math.abs(m),Math.abs(W))&&Math.abs(g-ie)<=ye*Math.max(1,Math.abs(g),Math.abs(ie))&&Math.abs(w-oe)<=ye*Math.max(1,Math.abs(w),Math.abs(oe))&&Math.abs(O-ae)<=ye*Math.max(1,Math.abs(O),Math.abs(ae))&&Math.abs(_-Ee)<=ye*Math.max(1,Math.abs(_),Math.abs(Ee))&&Math.abs(x-ue)<=ye*Math.max(1,Math.abs(x),Math.abs(ue))&&Math.abs(T-he)<=ye*Math.max(1,Math.abs(T),Math.abs(he))}function LDe(t){const e=Ws(),i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],p=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(n*n+a*a+p*p))<=e}function NDe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const DDe=Phe,VDe=Lhe;Object.freeze(Object.defineProperty({__proto__:null,add:MDe,adjoint:eDe,copy:Ahe,determinant:tDe,equals:RDe,exactEquals:PDe,frob:CDe,fromQuat:ODe,fromQuat2:fDe,fromRotation:cDe,fromRotationTranslation:Rhe,fromRotationTranslationScale:bDe,fromRotationTranslationScaleOrigin:wDe,fromScaling:uDe,fromTranslation:lDe,fromXRotation:hDe,fromYRotation:dDe,fromZRotation:pDe,frustum:SDe,getRotation:vDe,getScaling:gDe,getTranslation:yDe,hasIdentityRotation:NDe,identity:JP,invert:Ihe,invertOrIdentity:KNe,isOrthoNormal:LDe,lookAt:TDe,mul:DDe,multiply:Phe,multiplyScalar:ADe,multiplyScalarAndAdd:IDe,ortho:$De,perspective:_De,perspectiveFromFieldOfView:xDe,rotate:nDe,rotateX:sDe,rotateY:oDe,rotateZ:aDe,scale:rDe,set:nm,str:kDe,sub:VDe,subtract:Lhe,targetTo:EDe,translate:iDe,transpose:sm},Symbol.toStringTag,{value:"Module"}));const FDe=(t,e)=>{const i=nm(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return sm(i,i)},jDe=(t,e)=>{const i=nm(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return sm(i,i)},zDe=(t,e)=>{const i=1-e,r=nm(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return sm(r,r)},UDe=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=nm(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return sm(n,n)},QDe=(t,e)=>{const i=1-2*e,r=nm(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return sm(r,r)},BDe=(t,e)=>{const i=nm(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return sm(i,i)},qDe=(t,e)=>{const i=1-e,r=nm(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return sm(r,r)};let Nhe=class Dhe{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=bo(e.strength,i.strength,r),this.radius=bo(e.radius,i.radius,r),this.threshold=bo(e.threshold,i.threshold,r)}clone(){return new Dhe(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:mx(this.radius),strength:this.strength,threshold:this.threshold}}},Vhe=class Fhe{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(bo(e.radius,i.radius,r))}clone(){return new Fhe(this.radius)}toJSON(){return{type:"blur",radius:mx(this.radius)}}},NV=class jhe{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=bo(e.amount,i.amount,r),this._updateMatrix()}clone(){return new jhe(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||XP();switch(this.type){case"brightness":this._colorMatrix=FDe(e,this.amount);break;case"contrast":this._colorMatrix=jDe(e,this.amount);break;case"grayscale":this._colorMatrix=zDe(e,this.amount);break;case"invert":this._colorMatrix=QDe(e,this.amount);break;case"saturate":this._colorMatrix=BDe(e,this.amount);break;case"sepia":this._colorMatrix=qDe(e,this.amount)}}},zhe=class Uhe{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=bo(e.offsetX,i.offsetX,r),this.offsetY=bo(e.offsetY,i.offsetY,r),this.blurRadius=bo(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(bo(e.color[0],i.color[0],r)),this.color[1]=Math.round(bo(e.color[1],i.color[1],r)),this.color[2]=Math.round(bo(e.color[2],i.color[2],r)),this.color[3]=bo(e.color[3],i.color[3],r)}clone(){return new Uhe(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:mx(this.offsetX),yoffset:mx(this.offsetY),blurRadius:mx(this.blurRadius),color:e}}},Qhe=class Bhe{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=bo(e.angle,i.angle,r),this._updateMatrix()}clone(){return new Bhe(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||XP();this._colorMatrix=UDe(e,this.angle)}},qhe=class Ghe{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=bo(e.amount,i.amount,r)}clone(){return new Ghe(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function bo(t,e,i){return t+(e-t)*i}function mx(t){return Math.round(1e3*$s(t))/1e3}function GDe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new NV(t.type,0);case"saturate":case"brightness":case"contrast":return new NV(t.type,1);case"opacity":return new qhe(1);case"hue-rotate":return new Qhe(0);case"blur":return new Vhe(0);case"drop-shadow":return new zhe(0,0,0,[...P8("transparent")]);case"bloom":return new Nhe(0,0,1)}}function Zhe(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function Hhe(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(GDe(i[n]))}function ZDe(t){const e=t[0];return!!e&&"type"in e}const pN=()=>pe.getLogger("esri.support.basemapUtils");function HDe(){return{}}function WDe(t){for(const e in t){const i=t[e];bi(i),delete t[e]}}function XDe(t,e){let i;if(typeof t=="string"){const r=t in AV,n=!r&&t.includes("/");if(!r&&!n){if(Ht.apiKey)pN().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(AV).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");pN().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(i=e[t]),i||(i=r?fx.fromId(t):new fx({style:{id:t}}),e&&(e[t]=i))}else i=_r(fx,t);return i!=null&&i.destroyed&&(pN().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function YDe(t){return new i$({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function fN(t){for(const e of t.values())e==null||e.destroy();t.clear()}const WX={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function JDe(t){let e=null;if(typeof t=="string")if(t in WX){const i=WX[t];e=new BA({resourceInfo:{data:{layers:[i]}}})}else pe.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=_r(BA,t);return e}let Whe=0;const Xhe=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Whe++})}};return e=h([A("esri.core.Identifiable")],e),e},KDe=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Whe++})}};return e=h([A("esri.core.Identifiable.NumericIdentifiable")],e),e};let jS=class extends Xhe(class{}){};jS=h([A("esri.core.Identifiable")],jS),function(t){t.IdentifiableMixin=Xhe,t.NumericIdentifiableMixin=KDe}(jS||(jS={}));const Ed=jS;async function e4e(t){var r;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await J(async()=>{const{fromItem:n}=await import("./portalLayers-DledxBIQ.js");return{fromItem:n}},__vite__mapDeps([142,140,139,138,141]));try{return await i(e)}catch(n){const s=e==null?void 0:e.portalItem,o=(s==null?void 0:s.id)||"unset",a=((r=s==null?void 0:s.portal)==null?void 0:r.url)||Ht.portalUrl;throw pe.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",n),n}}const DV={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function mN(t,e,i,r=yu){const n=new Ro(v8(r)),s=We.fromJSDate(t,{zone:n}),o=i==="decades"||i==="centuries"?"year":Jhe(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function w0t(t,e,i="milliseconds"){const r=t.getTime(),n=Yhe(e,i,"milliseconds");return new Date(r+n)}function XX(t,e,i=yu){const r=new Ro(v8(i)),n=We.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=n.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=Jhe(e);return n.startOf(s).toJSDate()}function Yhe(t,e,i){return t===0?0:t*DV[e]/DV[i]}function O0t(t,e){return t&&e?t.intersection(e):t||e}function Jhe(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Na;let ia=Na=class extends K{static get allTime(){return YX}static get empty(){return t4e}static fromArray(t){return new Na({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(Na.allTime)}get isEmpty(){return this.equals(Na.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=(t==null?void 0:t.getTime())??null}clone(){return new Na({end:this.end,start:this.start})}equals(t){var s,o,a,l;if(!t)return!1;const e=((s=this.start)==null?void 0:s.getTime())??this.start,i=((o=this.end)==null?void 0:o.getTime())??this.end,r=((a=t.start)==null?void 0:a.getTime())??t.start,n=((l=t.end)==null?void 0:l.getTime())??t.end;return e===r&&i===n}expandTo(t,e=yu){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=XX(i,t,e));let r=this.end;if(r){const n=XX(r,t,e);r=r.getTime()===n.getTime()?n:mN(n,1,t,e)}return new Na({start:i,end:r})}intersection(t){var a,l,u,p;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Na.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((a=this.start)==null?void 0:a.getTime())??-1/0,i=((l=this.end)==null?void 0:l.getTime())??1/0,r=((u=t.start)==null?void 0:u.getTime())??-1/0,n=((p=t.end)==null?void 0:p.getTime())??1/0;let s,o;return r>=e&&r<=i?s=r:e>=r&&e<=n&&(s=e),i>=r&&i<=n?o=i:n>=e&&n<=i&&(o=n),s==null||o==null||isNaN(s)||isNaN(o)?Na.empty:new Na({start:s===-1/0?null:new Date(s),end:o===1/0?null:new Date(o)})}offset(t,e,i=yu){if(this.isEmpty||this.isAllTime)return this.clone();const r=new Na,{start:n,end:s}=this;return n!=null&&(r.start=mN(n,t,e,i)),s!=null&&(r.end=mN(s,t,e,i)),r}toArray(){var t,e;return this.isEmpty?[void 0,void 0]:[((t=this.start)==null?void 0:t.getTime())??null,((e=this.end)==null?void 0:e.getTime())??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return YX.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Na({start:e,end:i})}};h([f({type:Date,json:{write:{allowNull:!0}}})],ia.prototype,"end",void 0),h([ve("end")],ia.prototype,"readEnd",null),h([we("end")],ia.prototype,"writeEnd",null),h([f({readOnly:!0,json:{read:!1}})],ia.prototype,"isAllTime",null),h([f({readOnly:!0,json:{read:!1}})],ia.prototype,"isEmpty",null),h([f({type:Date,json:{write:{allowNull:!0}}})],ia.prototype,"start",void 0),h([ve("start")],ia.prototype,"readStart",null),h([we("start")],ia.prototype,"writeStart",null),ia=Na=h([A("esri.time.TimeExtent")],ia);const mn=ia,YX=new ia,t4e=new ia({start:void 0,end:void 0});let i4e=0,gr=class extends ul.EventedMixin(Ed.IdentifiableMixin(fa)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new oi(-180,-90,180,90,Je.WGS84),this.id=Date.now().toString(16)+"-layer-"+i4e++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Je.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await J(async()=>{const{fromUrl:r}=await import("./arcgisLayers-Bt-csvzI.js");return{fromUrl:r}},__vite__mapDeps([143,140,139,141]))).fromUrl(i)}static fromPortalItem(e){return e4e(e)}initialize(){this.when().catch(e=>{vn(e)||pe.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&e&&(e=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return xr(this.url)}createLayerView(e,i){return Promise.reject(new G("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await bt(e,{query:{f:"json"},responseType:"json"})).data;throw new G("layer:no-attribution-data","Layer does not have attribution data")}};h([f({type:String})],gr.prototype,"attributionDataUrl",void 0),h([f({readOnly:!0})],gr.prototype,"effectiveVisible",null),h([f({type:oi})],gr.prototype,"fullExtent",void 0),h([f({readOnly:!0})],gr.prototype,"hasAttributionData",null),h([f({type:String,clonable:!1})],gr.prototype,"id",void 0),h([f({type:Boolean,nonNullable:!0})],gr.prototype,"legendEnabled",void 0),h([f({type:["show","hide","hide-children"]})],gr.prototype,"listMode",void 0),h([f({type:Number,range:{min:0,max:1},nonNullable:!0})],gr.prototype,"opacity",void 0),h([f({clonable:!1})],gr.prototype,"parent",void 0),h([f({readOnly:!0})],gr.prototype,"parsedUrl",null),h([f({type:Boolean,readOnly:!0})],gr.prototype,"persistenceEnabled",void 0),h([f({type:Boolean})],gr.prototype,"popupEnabled",void 0),h([f({type:Boolean})],gr.prototype,"attributionVisible",void 0),h([f({type:Je})],gr.prototype,"spatialReference",void 0),h([f({type:String})],gr.prototype,"title",void 0),h([f({readOnly:!0,json:{read:!1}})],gr.prototype,"type",void 0),h([f()],gr.prototype,"url",void 0),h([f({type:mn})],gr.prototype,"visibilityTimeExtent",void 0),h([f({type:Boolean,nonNullable:!0})],gr.prototype,"visible",void 0),gr=h([A("esri.layers.Layer")],gr);const D8=gr;function VV(t,e,i){let r,n;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=VV(r.layers,e,i),n))return n}}const r4e=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new Te;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||pe.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void pe.getLogger(this).error("#add()","Cannot add layer to itself.");r(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",wd(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof D8){const s=i;s.parent===this?this.reorder(s,r):n.add(s,r)}else Rc(i)?i.then(s=>{this.destroyed||this.add(s,r)}):pe.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let s=n.getNextIndex(r);i.slice().forEach(o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(i){return VV(this.layers,"id",i)}findLayerByUid(i){return VV(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return h([f()],e.prototype,"layers",null),e=h([A("esri.support.LayersMixin")],e),e},n4e=new Set(["feature","subtype-group"]);function FV(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const o=FV(s.tables,e,i);if(o)return o}}}const s4e=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new Te,this.addHandles([this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n4e.has(n.type)||pe.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",wd(i,this._get("tables")))}findTableById(i){return FV(this.tables,"id",i)}findTableByUid(i){return FV(this.tables,"uid",i)}};return h([f()],e.prototype,"tables",null),e=h([A("esri.support.TablesMixin")],e),e};let Dl=class extends s4e(r4e(ul.EventedMixin(Ce))){constructor(e){super(e),this.allLayers=new i$({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=YDe(this),this.basemap=null,this.editableLayers=new i$({getCollections:()=>[this.allLayers],itemFilterFunction:zNe}),this.ground=new BA,this._basemapCache=HDe()}destroy(){WDe(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=bi(this.basemap),bi(this.ground),this._set("ground",null)}castBasemap(e){return XDe(e,this._basemapCache)}castGround(e){return JDe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};h([f({readOnly:!0,dependsOn:[]})],Dl.prototype,"allLayers",void 0),h([f({readOnly:!0})],Dl.prototype,"allTables",void 0),h([f({type:fx,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Dl.prototype,"basemap",void 0),h([Rt("basemap")],Dl.prototype,"castBasemap",null),h([f({readOnly:!0})],Dl.prototype,"editableLayers",void 0),h([f({type:BA,nonNullable:!0})],Dl.prototype,"ground",void 0),h([Rt("ground")],Dl.prototype,"castGround",null),h([f()],Dl.prototype,"undoRedo",void 0),Dl=h([A("esri.Map")],Dl);const Khe=Dl;let yx=class extends Te{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Te.ofType(this.itemType.Type))(e):new Te(e)}};function JX(t,e){return{type:t,cast:whe,set(i){const r=wd(i,this._get(e),t);r.owner=this,this._set(e,r)}}}h([f()],yx.prototype,"owner",null),yx=h([A("esri.core.support.OwningCollection")],yx);var zS;const qA=dt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),ede=qA.jsonValues.slice();$Ee(ede,"orthometric");const gx=dt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Vl=zS=class extends K{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return qA.write(t,e,i)}readHeightModel(t,e,i){return qA.read(t)||(i!=null&&i.messages&&i.messages.push(o4e(t,{context:i})),null)}readHeightUnit(t,e,i){return gx.read(t)||(i!=null&&i.messages&&i.messages.push(KX(t,{context:i})),null)}readHeightUnitService(t,e,i){return JQ(t)||gx.read(t)||(i!=null&&i.messages&&i.messages.push(KX(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new zS({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=Fle(e);return new zS({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new zS;return e.read(t,{origin:"web-scene"}),e}};function KX(t,e){return new ll("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function o4e(t,e){return new ll("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}h([f({type:qA.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:ede,default:"ellipsoidal",write:{isRequired:!0}}}}})],Vl.prototype,"heightModel",void 0),h([we("web-scene","heightModel")],Vl.prototype,"writeHeightModel",null),h([ve(["web-scene","service"],"heightModel")],Vl.prototype,"readHeightModel",null),h([f({type:gx.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:gx.jsonValues,write:{writer:gx.write,isRequired:!0}}}}})],Vl.prototype,"heightUnit",void 0),h([ve("web-scene","heightUnit")],Vl.prototype,"readHeightUnit",null),h([ve("service","heightUnit")],Vl.prototype,"readHeightUnitService",null),h([f({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Vl.prototype,"vertCRS",void 0),h([ve("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Vl.prototype,"readVertCRS",null),Vl=zS=h([A("esri.geometry.HeightModelInfo")],Vl);const _2=Vl;let GA=class extends yx{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(pe.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};GA=h([A("esri.support.AnalysesCollection")],GA);let yN;async function a4e(){return yN==null&&(yN=J(()=>import("./WhereClauseCache-DySf_V0x.js"),__vite__mapDeps([21,22,23])).then(t=>new t.WhereClauseCache(500,500))),yN}async function V8(t,e){const i=await a4e(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function tde(t,e){return t||(t=null),e||(e=null),t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function l4e(t,e){return t||(t=null),e||(e=null),t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function T0t(t,e){return e.length===0?null:`${t} IN (${u4e(e)})`}function u4e(t){return t.map(e=>typeof e=="string"?c4e(e):e).join(",")}function c4e(t){return`'${t.replaceAll("'","''")}'`}function eY(t){return typeof t=="number"}function E0t(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function k0t(t){return typeof t=="boolean"}function x2(t){return typeof t=="string"||t instanceof String}function h4e(t){return t==null||x2(t)}function C0t(t){return Array.isArray(t)}function d4e(t){return(t==null?void 0:t.declaredClass)==="esri.Graphic"}function M0t(t){return t instanceof Date}const p4e="HH:mm",f4e="HH:mm:ss",m4e="HH:mm:ss.SSS",y4e=[m4e,f4e,p4e,"TT"],g4e="yyyy-MM-dd";function tY(t){if(!t||!x2(t))return null;const e=We.fromFormat(t,g4e);return e.isValid?e:null}function iY(t){return t&&x2(t)?DEe(y4e,e=>{const i=We.fromFormat(t,e);return i.isValid?i:null})??null:null}function rY(t){if(!t||!x2(t))return null;const e=We.fromISO(t);return e.isValid?e:null}var ZA;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(ZA||(ZA={}));const ide=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function v4e(t){return t!=null&&ide.has(t.type)}function rde(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function nde(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function sde(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const b4e=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);OQ(ide,b4e);function A0t(t,e){const i=t==null?void 0:t.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=v4e(t);return rde(t)||sde(t)||nde(t)?{...w4e(t,n,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:s}}function w4e(t,e,i){var r,n,s,o,a,l;return rde(t)?{min:(r=tY(i))==null?void 0:r.toMillis(),max:(n=tY(e))==null?void 0:n.toMillis(),rawMin:i,rawMax:e}:sde(t)?{min:(s=iY(i))==null?void 0:s.toMillis(),max:(o=iY(e))==null?void 0:o.toMillis(),rawMin:i,rawMax:e}:nde(t)?{min:(a=rY(i))==null?void 0:a.toMillis(),max:(l=rY(e))==null?void 0:l.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function O4e(t){if(!t)return;const e=t.match(S4e);return e!=null&&e.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const S4e=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function _4e(t){var e,i;return((i=(e=t.match(x4e))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const x4e=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let au=class{};function $4e(t){return t instanceof h0?t===au.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function P0t(t){return $4e(t)?au.instance:t}au.instance=new Ro("Etc/UTC");var HA;(function(t){t.TimeZoneNotRecognized="TimeZoneNotRecognized"})(HA||(HA={}));const T4e={[HA.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let E4e=class ode extends Error{constructor(e,i){super(yO(T4e[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,ode)}};function sv(t,e,i){return t<e?t-e:t>i?t-i:0}function ov(t,e,i){return t<e?e:t>i?i:t}let jE=class Mr{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,n=0,s=0,o=0,a=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)||isNaN(o)||isNaN(a))return null;const u=We.local(e,i).daysInMonth;let p=We.fromObject({day:ov(r,1,u),year:e,month:ov(i,1,12),hour:ov(n,0,23),minute:ov(s,0,59),second:ov(o,0,59),millisecond:ov(a,0,999)},{zone:zm(l)});return p=p.plus({months:sv(i,1,12),days:sv(r,1,u),hours:sv(n,0,23),minutes:sv(s,0,59),seconds:sv(o,0,59),milliseconds:sv(a,0,999)}),new Mr(p)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=zm(i);return e.isUnknownTimeZone||r===au.instance?Mr.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Mr(e._date.setZone(r))}static dateJSToArcadeDate(e){return new Mr(We.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=zm(i);return new Mr(We.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new Mr(We.fromMillis(e,{zone:au.instance}))}static unknownDateJSToArcadeDate(e){return new Mr(We.fromMillis(e.getTime(),{zone:au.instance}))}static epochToArcadeDate(e,i="system"){const r=zm(i);return new Mr(We.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new Mr(e)}clone(){return new Mr(this._date)}changeTimeZone(e){const i=zm(e);return Mr.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=zm(i);return e.zone===au.instance||r===au.instance?Mr.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Mr(e.setZone(r))}static nowToArcadeDate(e){const i=zm(e);return new Mr(We.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Mr(We.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Mr.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===au.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new Mr(this._date.plus(e))}diff(e,i="milliseconds"){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Mr(this._date.toUTC())}toLocal(){return new Mr(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=We.fromISO(e,{setZone:!0});return new Mr(i)}};function zm(t,e=!0){if(t instanceof h0)return t;if(t.toLowerCase()==="system")return"system";if(t.toLowerCase()==="utc")return"UTC";if(t.toLowerCase()==="unknown")return au.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){const r=Rn.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=Ro.create(t);if(!i.isValid){if(e)throw new E4e(HA.TimeZoneNotRecognized);return null}return i}const k4e=()=>pe.getLogger("esri.support.arcadeOnDemand"),C4e=["geometry","scale","timeProperties"];function R0t(t,e){if(e!=null)for(const i of C4e)e.hasArcadeDependency(i)&&t.add(i);return t}let gN;function Ec(){return gN||(gN=(async()=>{const t=await J(()=>import("./arcadeUtils-BNnd5lth.js"),__vite__mapDeps([144,145,146,147,133,23,27,15,11,12,13,22]));return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel}})()),gN}const L0t=(t,e,i)=>ade.create(t,e,i,null,["$feature","$view"],[]),M4e=(t,e,i,r)=>ade.create(t,e,i,r,["$feature","$view"],[]);let ade=class lde{constructor(e,i,r,n,s,o,a){this._dependencies=new Map,this.services=null,this.script=e,this.evaluate=n;const l=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=l??[],this._syntaxTree=r,this._arcade=i,this._arcadeFeature=s,this._spatialReference=a,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}static async create(e,i,r,n,s,o){const{arcade:a,Feature:l,Dictionary:u}=await Ec(),p=i instanceof Je?i:Je.fromJSON(i);let m;try{m=a.parseScript(e,o)}catch(F){return k4e().error(new G("arcade-bad-expression","Failed to parse arcade script",{script:e,error:F})),null}const g=s.reduce((F,j)=>({...F,[j]:null}),{});let w=null;n!=null&&(w=new u(n),w.immutable=!0,g.$config=null);const O=a.scriptUsesGeometryEngine(m),_=O&&a.enableGeometrySupport(),x=a.scriptUsesFeatureSet(m)&&a.enableFeatureSetSupport(),T=a.scriptIsAsync(m),E=T&&a.enableAsyncSupport(),k={vars:g,spatialReference:p,useAsync:!!E};await Promise.all([_,x,E]);const M=new Set;await a.loadDependentModules(M,m,null,T,O);const R=new u;R.immutable=!1,R.setField("scale",0);const D=a.compileScript(m,k),L=(F,j)=>{var W;const B=(W=F.$view)==null?void 0:W.timeZone;if("$view"in F&&F.$view){let ie;if(R.setField("scale",typeof F.$view=="object"&&"scale"in F.$view?F.$view.scale:void 0),typeof F.$view=="object"&&"timeProperties"in F.$view&&F.$view.timeProperties!=null){const{currentStart:oe,currentEnd:ae}=F.$view.timeProperties;ie=new u({currentStart:oe!=null?B!=null?jE.epochToArcadeDate(oe,B):jE.unknownEpochToArcadeDate(oe):void 0,currentEnd:ae!=null?B!=null?jE.epochToArcadeDate(ae,B):jE.unknownEpochToArcadeDate(ae):void 0,startIncluded:!0,endIncluded:!0})}R.setField("timeProperties",ie),F.$view=R}return w&&(F.$config=w),D({vars:F,spatialReference:p,services:j,timeZone:B})};return new lde(e,a,m,L,new l,r,p)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}references(e){return this._dependencies.get(e)??!1}};const A4e=/^([0-9_])/,I4e=/[^a-z0-9_\u0080-\uffff]+/gi;function P4e(t){return t==null?null:t.trim().replaceAll(I4e,"_").replace(A4e,"F$1")||null}const R4e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],L4e=["field","normalizationField"];function nY(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(sY(R4e,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)sY(L4e,r,e)}}function sY(t,e,i){if(t)for(const r of t){const n=t2(r,e),s=n&&typeof n!="function"&&i.get(n);s&&Rr(r,s.name,e)}}function ude(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const vN=new Set;function KP(t,e){return t&&e?(vN.clear(),Xg(vN,t,e),Array.from(vN).sort()):[]}function Xg(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)Xs(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function Xs(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function N0t(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function D0t(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=KP(t,e);return r.length/t.fields.length>=i?["*"]:r}async function Ts(t,e,i){var s;if(!i)return;let r;const n=O4e(i);if(n)r=[n];else{const{arcadeUtils:o}=await Ec();r=o.extractFieldNames(i,(s=e==null?void 0:e.fields)==null?void 0:s.map(a=>a.name))}for(const o of r)Xs(t,e,o)}async function F8(t,e,i){if(i&&i!=="1=1"){const r=await V8(i,e);if(!r.isStandardized)throw new G("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Xg(t,e,r.fieldNames)}}function N4e({displayField:t,fields:e}){return t||(e!=null&&e.length?bN(e,"name-or-title")||bN(e,"unique-identifier")||bN(e,"type-or-category")||D4e(e):null)}function D4e(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function bN(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function V0t(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function V4e(t,e,i){i.onStatisticExpression?Ts(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function F0t(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(cde(t,e,n)),i.fields&&r.push(...i.fields.map(async s=>V4e(t,e.fieldsIndex,s))),await Promise.all(r)}async function j0t(t,e){var s,o,a;const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const n=[(s=r.latestObservations.renderer)==null?void 0:s.collectRequiredFields(t,i),(o=r.previousObservations.renderer)==null?void 0:o.collectRequiredFields(t,i),(a=r.trackLines.renderer)==null?void 0:a.collectRequiredFields(t,i)];r.popupTemplate&&n.push(cde(t,e,r.popupTemplate));for(const l of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(l)for(const u of l)n.push(pde(t,i,u));await Promise.all(n)}async function cde(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(s=>Ts(t,e.fieldsIndex,s.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(Ts(t,e.fieldsIndex,s.expressionInfo.expression));await Promise.all(r)}async function z0t(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&Xg(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Xg(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await F8(t,e.fieldsIndex,i.where))}async function U0t(t,e,i){e&&i&&await Promise.all(i.map(r=>F4e(t,e,r)))}async function F4e(t,e,i){e&&i&&(i.valueExpression?await Ts(t,e.fieldsIndex,i.valueExpression):i.field&&Xs(t,e.fieldsIndex,i.field))}function Q0t(t){return t?KP(t.fieldsIndex,hde(t)):[]}function j4e(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?KP(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function B0t(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map(n=>F8(t,r,n.where)))}const z4e=new Set(["oid","global-id","guid"]),U4e=new Set(["oid","global-id"]),Q4e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function B4e(t){const e=new Set;dde(t).forEach(r=>e.add(r)),j4e(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function hde(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function dde(t){return hde(t).map(e=>e.toLowerCase())}function q4e(t,e){var i;return t.editable&&!z4e.has(t.type)&&!dde(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function G4e(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||B4e(e).includes(i)||U4e.has(t.type)||Q4e.some(n=>n.test(i)))}async function Z4e(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i!=null&&i.length&&await Promise.all(i.map(n=>pde(t,r,n)))}async function pde(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Ts(t,e,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Xs(t,e,o.slice(1,-1))})}await F8(t,e,n)}function H4e(t){const e=t.defaultValue;return e!==void 0&&mde(t,e)?e:t.nullable?null:void 0}function q0t(t){const e=typeof t=="string"?{type:t}:t;return vde(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function fde(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function W4e(t){return t===null||fde(t)}function X4e(t){return t===null||Number.isInteger(t)}function Y4e(){return!0}function mde(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?X4e:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?W4e:fde;break;case"string":case"esriFieldTypeString":i=t.nullable?h4e:x2;break;default:i=Y4e}return arguments.length===1?i:i(e)}const J4e=["integer","small-integer","big-integer"],K4e=["single","double"],eVe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],tVe=["esriFieldTypeSingle","esriFieldTypeDouble"],yde=new Set([...J4e,...eVe]),iVe=new Set([...K4e,...tVe]),rVe=OQ(yde,iVe);function nVe(t){return t!=null&&yde.has(t.type)}function gde(t){return t!=null&&rVe.has(t.type)}function vde(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function j8(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function sVe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function oVe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function bde(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function oY(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function aY(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function G0t(t,e){return aVe(t,e)===null}var WA,XA;function Z0t(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function aVe(t,e){return t==null||t.nullable&&e===null?null:mde(t,e)?gde(t)&&!lVe(t.type,Number(e))?WA.OUT_OF_RANGE:null:XA.INVALID_TYPE}function lVe(t,e){const i=typeof t=="string"?wde(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=n:e>=r&&e<=n}function wde(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return uVe;case"esriFieldTypeInteger":case"integer":return cVe;case"esriFieldTypeBigInteger":case"big-integer":return hVe;case"esriFieldTypeSingle":case"single":return dVe;case"esriFieldTypeDouble":case"double":return pVe}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(WA||(WA={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(XA||(XA={}));const uVe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},cVe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},hVe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},dVe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},pVe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function H0t(t,e,i){switch(t){case ZA.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case ZA.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case XA.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case WA.OUT_OF_RANGE:{const{min:r,max:n}=wde(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function fVe(t,e){return!mVe(t,e,null)}function mVe(t,e,i){if(!(e!=null&&e.attributes)||!t)return!0;const r=new Set(Object.keys(e.attributes));let n=!1;for(const s of t)if(!r.has(s)&&(n=!0,i==null))break;return n}function yVe(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}async function gVe(t,e){const i=new Set;return t!=null&&t.collectRequiredFields&&await t.collectRequiredFields(i,e),Array.from(i).sort()}function z8(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let EC=class extends K{constructor(e){super(e),this.type=null}};h([f({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],EC.prototype,"type",void 0),EC=h([A("esri.popup.content.Content")],EC);const kd=EC,zE=new nt({asc:"ascending",desc:"descending"});let US=class extends ft.ClonableMixin(K){constructor(e){super(e),this.field=null,this.order="ascending"}};h([f({type:String,json:{write:!0}})],US.prototype,"field",void 0),h([f({type:zE.apiValues,json:{type:zE.jsonValues,read:zE.read,write:zE.write}})],US.prototype,"order",void 0),US=h([A("esri.popup.support.AttachmentsOrderByInfo")],US);const vVe=US;let bp=class extends ft.ClonableMixin(kd){constructor(e){super(e),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};h([f({type:String,json:{write:!0}})],bp.prototype,"description",void 0),h([f({type:["auto","preview","list"],json:{write:!0}})],bp.prototype,"displayType",void 0),h([f({type:[vVe],json:{write:!0}})],bp.prototype,"orderByFields",void 0),h([f({type:String,json:{write:!0}})],bp.prototype,"title",void 0),h([f({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],bp.prototype,"type",void 0),bp=h([A("esri.popup.content.AttachmentsContent")],bp);const Fw=bp;var jV;let ry=jV=class extends kd{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new jV({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?q(this.outFields):null})}};h([f()],ry.prototype,"creator",void 0),h([f()],ry.prototype,"destroyer",void 0),h([f()],ry.prototype,"outFields",void 0),h([f({type:["custom"],readOnly:!0})],ry.prototype,"type",void 0),ry=jV=h([A("esri.popup.content.CustomContent")],ry);const bVe=ry;var zV;let Iv=zV=class extends K{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new zV({title:this.title,expression:this.expression})}};h([f({type:String,json:{write:!0}})],Iv.prototype,"title",void 0),h([f({type:String,json:{write:!0}})],Iv.prototype,"expression",void 0),h([f({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Iv.prototype,"returnType",void 0),Iv=zV=h([A("esri.popup.ElementExpressionInfo")],Iv);const wVe=Iv;var UV;let QS=UV=class extends kd{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new UV({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};h([f({type:wVe,json:{write:!0}})],QS.prototype,"expressionInfo",void 0),h([f({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],QS.prototype,"type",void 0),QS=UV=h([A("esri.popup.content.ExpressionContent")],QS);const eR=QS;let Pv=class extends ft.ClonableMixin(K){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};h([Re(h3e)],Pv.prototype,"dateFormat",void 0),h([f({type:Boolean,json:{write:!0}})],Pv.prototype,"digitSeparator",void 0),h([f({type:kt,json:{write:!0}})],Pv.prototype,"places",void 0),Pv=h([A("esri.popup.support.FieldInfoFormat")],Pv);const kC=Pv;var QV;let Fl=QV=class extends K{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new QV({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};h([f({type:String,json:{write:!0}})],Fl.prototype,"fieldName",void 0),h([f({type:kC,json:{write:!0}})],Fl.prototype,"format",void 0),h([f({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Fl.prototype,"isEditable",void 0),h([f({type:String,json:{write:!0}})],Fl.prototype,"label",void 0),h([Re(new nt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Fl.prototype,"stringFieldOption",void 0),h([f({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Fl.prototype,"statisticType",void 0),h([f({type:String,json:{write:!0}})],Fl.prototype,"tooltip",void 0),h([f({type:Boolean,json:{write:!0}})],Fl.prototype,"visible",void 0),Fl=QV=h([A("esri.popup.FieldInfo")],Fl);const U8=Fl;var BV;let Sh=BV=class extends kd{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new BV(q({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};h([f({type:Object,json:{write:!0}})],Sh.prototype,"attributes",void 0),h([f({type:String,json:{write:!0}})],Sh.prototype,"description",void 0),h([f({type:[U8]})],Sh.prototype,"fieldInfos",void 0),h([we("fieldInfos")],Sh.prototype,"writeFieldInfos",null),h([f({type:String,json:{write:!0}})],Sh.prototype,"title",void 0),h([f({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Sh.prototype,"type",void 0),Sh=BV=h([A("esri.popup.content.FieldsContent")],Sh);const jw=Sh;let ny=class extends K{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};h([f({type:String,json:{write:!0}})],ny.prototype,"altText",void 0),h([f({type:String,json:{write:!0}})],ny.prototype,"caption",void 0),h([f({type:String,json:{write:!0}})],ny.prototype,"title",void 0),h([f({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],ny.prototype,"type",void 0),ny=h([A("esri.popup.content.mixins.MediaInfo")],ny);const Q8=ny;var qV;let sy=qV=class extends Ce{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new qV({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};h([f()],sy.prototype,"color",void 0),h([f()],sy.prototype,"fieldName",void 0),h([f()],sy.prototype,"tooltip",void 0),h([f()],sy.prototype,"value",void 0),sy=qV=h([A("esri.popup.content.support.ChartMediaInfoValueSeries")],sy);const OVe=sy;var GV;let wp=GV=class extends K{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new GV({colors:q(this.colors),fields:q(this.fields),normalizeField:this.normalizeField,series:q(this.series),tooltipField:this.tooltipField})}};h([f({type:[xe],json:{type:[[kt]],write:!0}})],wp.prototype,"colors",void 0),h([f({type:[String],json:{write:{isRequired:!0}}})],wp.prototype,"fields",void 0),h([f({type:String,json:{write:!0}})],wp.prototype,"normalizeField",void 0),h([f({type:[OVe],json:{read:!1}})],wp.prototype,"series",void 0),h([f({type:String,json:{write:!0}})],wp.prototype,"tooltipField",void 0),wp=GV=h([A("esri.popup.content.support.ChartMediaInfoValue")],wp);const SVe=wp;let BS=class extends Q8{constructor(e){super(e),this.type=null,this.value=void 0}};h([f({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],BS.prototype,"type",void 0),h([f({type:SVe,json:{write:{isRequired:!0}}})],BS.prototype,"value",void 0),BS=h([A("esri.popup.content.mixins.ChartMediaInfo")],BS);const tR=BS,iR=dt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var ZV;let CC=ZV=class extends tR{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new ZV({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};h([f({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:iR.write,isRequired:!0}}})],CC.prototype,"type",void 0),CC=ZV=h([A("esri.popup.content.BarChartMediaInfo")],CC);const Ode=CC;var HV;let MC=HV=class extends tR{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new HV({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};h([f({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:iR.write,isRequired:!0}}})],MC.prototype,"type",void 0),MC=HV=h([A("esri.popup.content.ColumnChartMediaInfo")],MC);const Sde=MC;var WV;let qS=WV=class extends K{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new WV({linkURL:this.linkURL,sourceURL:this.sourceURL})}};h([f({type:String,json:{write:!0}})],qS.prototype,"linkURL",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],qS.prototype,"sourceURL",void 0),qS=WV=h([A("esri.popup.content.support.ImageMediaInfoValue")],qS);const _Ve=qS;var XV;let Rv=XV=class extends Q8{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new XV({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};h([f({type:Number,json:{write:!0}})],Rv.prototype,"refreshInterval",void 0),h([f({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Rv.prototype,"type",void 0),h([f({type:_Ve,json:{write:{isRequired:!0}}})],Rv.prototype,"value",void 0),Rv=XV=h([A("esri.popup.content.ImageMediaInfo")],Rv);const _de=Rv;var YV;let AC=YV=class extends tR{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new YV({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};h([f({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:iR.write,isRequired:!0}}})],AC.prototype,"type",void 0),AC=YV=h([A("esri.popup.content.LineChartMediaInfo")],AC);const xde=AC;var JV;let IC=JV=class extends tR{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new JV({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};h([f({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:iR.write,isRequired:!0}}})],IC.prototype,"type",void 0),IC=JV=h([A("esri.popup.content.PieChartMediaInfo")],IC);const $de=IC,KV={base:Q8,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Ode,"column-chart":Sde,"line-chart":xde,"pie-chart":$de,image:_de}};var eF;let jl=eF=class extends kd{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?_de.fromJSON(e):e.type==="barchart"?Ode.fromJSON(e):e.type==="columnchart"?Sde.fromJSON(e):e.type==="linechart"?xde.fromJSON(e):e.type==="piechart"?$de.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new eF(q({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};h([f()],jl.prototype,"activeMediaInfoIndex",void 0),h([f({type:Object,json:{write:!0}})],jl.prototype,"attributes",void 0),h([f({type:String,json:{write:!0}})],jl.prototype,"description",void 0),h([f({types:[KV]})],jl.prototype,"mediaInfos",void 0),h([ve("mediaInfos")],jl.prototype,"readMediaInfos",null),h([we("mediaInfos")],jl.prototype,"writeMediaInfos",null),h([f({type:String,json:{write:!0}})],jl.prototype,"title",void 0),h([f({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],jl.prototype,"type",void 0),jl=eF=h([A("esri.popup.content.MediaContent")],jl);const u$=jl;var tF;let GS=tF=class extends K{constructor(t){super(t),this.field=null,this.order=null}clone(){return new tF({field:this.field,order:this.order})}};h([f({type:String,json:{write:!0}})],GS.prototype,"field",void 0),h([f({type:["asc","desc"],json:{write:!0}})],GS.prototype,"order",void 0),GS=tF=h([A("esri.popup.support.RelatedRecordsInfoFieldOrder")],GS);const B8=GS;let ju=class extends ft.ClonableMixin(kd){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};h([f({type:String,json:{write:!0}})],ju.prototype,"description",void 0),h([f({type:Number,json:{type:kt,write:!0}})],ju.prototype,"displayCount",void 0),h([f({type:["list"],json:{write:{isRequired:!0}}})],ju.prototype,"displayType",void 0),h([f({type:[B8],json:{write:!0}})],ju.prototype,"orderByFields",void 0),h([f({type:Number,json:{type:kt,write:{isRequired:!0}}})],ju.prototype,"relationshipId",void 0),h([f({type:String,json:{write:!0}})],ju.prototype,"title",void 0),h([f({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ju.prototype,"type",void 0),ju=h([A("esri.popup.content.RelationshipContent")],ju);const c$=ju;var iF;let ZS=iF=class extends kd{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new iF({text:this.text})}};h([f({type:String,json:{write:!0}})],ZS.prototype,"text",void 0),h([f({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ZS.prototype,"type",void 0),ZS=iF=h([A("esri.popup.content.TextContent")],ZS);const h$=ZS;let _h=class extends ft.ClonableMixin(K){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};h([f({type:String,json:{write:!0}})],_h.prototype,"title",void 0),h([f({type:String,json:{write:!0}})],_h.prototype,"description",void 0),h([f({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],_h.prototype,"type",void 0),h([f({type:Number,json:{type:kt,write:!0}})],_h.prototype,"associatedNetworkSourceId",void 0),h([f({type:Number,json:{type:kt,write:!0}})],_h.prototype,"associatedAssetGroup",void 0),h([f({type:Number,json:{type:kt,write:!0}})],_h.prototype,"associatedAssetType",void 0),_h=h([A("esri.popup.support.UtilityNetworkAssociationType")],_h);const Tde=_h;let Op=class extends ft.ClonableMixin(kd){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};h([f({type:String,json:{write:!0}})],Op.prototype,"description",void 0),h([f({type:Number,json:{type:kt,write:!0}})],Op.prototype,"displayCount",void 0),h([f({type:String,json:{write:!0}})],Op.prototype,"title",void 0),h([f({type:[Tde],json:{write:!0}})],Op.prototype,"associationTypes",void 0),h([Re({utilityNetworkAssociations:"utility-network-associations"})],Op.prototype,"type",void 0),Op=h([A("esri.popup.content.UtilityNetworkAssociationsContent")],Op);const q8=Op,xVe={base:null,key:"type",typeMap:{attachment:Fw,media:u$,text:h$,expression:eR,field:jw,relationship:c$,utilityNetworkAssociations:q8}},$Ve={base:null,key:"type",typeMap:{attachment:Fw,media:u$,text:h$,expression:eR,field:jw,relationship:c$}};var rF;let oy=rF=class extends K{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new rF({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([f({type:String,json:{write:!0}})],oy.prototype,"name",void 0),h([f({type:String,json:{write:!0}})],oy.prototype,"title",void 0),h([f({type:String,json:{write:!0}})],oy.prototype,"expression",void 0),h([f({type:["string","number"],json:{write:!0}})],oy.prototype,"returnType",void 0),oy=rF=h([A("esri.popup.ExpressionInfo")],oy);const TVe=oy;var nF;let HS=nF=class extends K{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new nF({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};h([f({type:Boolean,json:{write:!0}})],HS.prototype,"returnTopmostRaster",void 0),h([f({type:Boolean,json:{write:!0}})],HS.prototype,"showNoDataRecords",void 0),HS=nF=h([A("esri.popup.LayerOptions")],HS);const EVe=HS;var sF;let WS=sF=class extends K{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new sF({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?q(this.orderByFields):null})}};h([f({type:Boolean,json:{write:!0}})],WS.prototype,"showRelatedRecords",void 0),h([f({type:[B8],json:{write:!0}})],WS.prototype,"orderByFields",void 0),WS=sF=h([A("esri.popup.RelatedRecordsInfo")],WS);const lY=WS;var oF;let Da=oF=class extends Ed.IdentifiableMixin(Ce){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new oF({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};h([f()],Da.prototype,"active",void 0),h([f()],Da.prototype,"className",void 0),h([f()],Da.prototype,"disabled",void 0),h([f()],Da.prototype,"icon",void 0),h([f()],Da.prototype,"id",void 0),h([f()],Da.prototype,"indicator",void 0),h([f()],Da.prototype,"title",void 0),h([f()],Da.prototype,"type",void 0),h([f()],Da.prototype,"visible",void 0),Da=oF=h([A("esri.support.actions.ActionBase")],Da);const rR=Da;var aF;let PC=aF=class extends rR{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new aF({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};h([f()],PC.prototype,"image",void 0),PC=aF=h([A("esri.support.actions.ActionButton")],PC);const Ede=PC;var lF;let XS=lF=class extends rR{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new lF({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};h([f()],XS.prototype,"image",void 0),h([f()],XS.prototype,"value",void 0),XS=lF=h([A("esri.support.actions.ActionToggle")],XS);const kde=XS,nS="relationships/",uY="expression/",kVe=Te.ofType({key:"type",defaultKeyValue:"button",base:rR,typeMap:{button:Ede,toggle:kde}}),CVe={base:kd,key:"type",typeMap:{media:u$,custom:bVe,text:h$,attachments:Fw,fields:jw,expression:eR,relationship:c$,utilityNetworkAssociations:q8}},Cde=new Set(["attachments","fields","media","text","expression","relationship"]),MVe=new Set([...Cde,"utility-network-associations"]);let Qr=class extends ft.ClonableMixin(K){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>fu(CVe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Rc(e)?e:(pe.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,r,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const a=o?o.filter(u=>u.type==="fields"):[],l=a.length&&a.every(u=>{var p;return(p=u.fieldInfos)==null?void 0:p.length});i.fieldInfos=e.filter(Boolean).map(u=>{const p=u.toJSON(n);return l&&(p.visible=!1),p})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),Xg(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(n=>(r==null?void 0:r.origin)==="web-scene"?Cde.has(n.type):MVe.has(n.type)).map(n=>n==null?void 0:n.toJSON(r)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=q(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(n=>{const s=i.fieldInfos.find(o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=n.fieldName)==null?void 0:l.toLowerCase())});s?s.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,o;const r=((s=e.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,e.relationshipId)))||[],n=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=q(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),u$.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),h$.fromJSON(s)):s.type==="attachments"?Fw.fromJSON(s):s.type==="fields"?jw.fromJSON(s):s.type==="expression"?eR.fromJSON(s):s.type==="relationship"?c$.fromJSON(s):s.type==="utilityNetworkAssociations"?q8.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(nS)))return null;const n=i.replace(nS,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return!Number.isNaN(s)&&o?c$.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${nS}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new h$({text:e})):s.push(new jw),Array.isArray(i)&&i.length&&s.push(u$.fromJSON({mediaInfos:i})),r&&s.push(Fw.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(l=>{const u=this._toRelationshipContent(l);u&&s.push(u)}),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:u,linkURL:p}=s,m=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(u),...this._extractFieldNames(p),...o??[]];return a&&m.push(a),l&&m.push(l),m}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(n=>Ts(e,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(nS)||i.startsWith(uY))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return z8(e).filter(i=>!(i.indexOf(nS)===0||i.indexOf(uY)===0))}};h([f({type:kVe})],Qr.prototype,"actions",void 0),h([f()],Qr.prototype,"content",void 0),h([Rt("content")],Qr.prototype,"castContent",null),h([ve("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Qr.prototype,"readContent",null),h([we("web-scene","content",{popupElements:{type:Te.ofType($Ve)},showAttachments:{type:Boolean},mediaInfos:{type:Te.ofType(KV)},description:{type:String},relatedRecordsInfo:{type:lY}})],Qr.prototype,"writeWebSceneContent",null),h([we("content",{popupElements:{type:Te.ofType(xVe)},showAttachments:{type:Boolean},mediaInfos:{type:Te.ofType(KV)},description:{type:String},relatedRecordsInfo:{type:lY}})],Qr.prototype,"writeWebMapContent",null),h([f({type:[TVe],json:{write:!0}})],Qr.prototype,"expressionInfos",void 0),h([f({type:[U8]})],Qr.prototype,"fieldInfos",void 0),h([we("fieldInfos")],Qr.prototype,"writeFieldInfos",null),h([f({type:EVe})],Qr.prototype,"layerOptions",void 0),h([we("layerOptions")],Qr.prototype,"writeLayerOptions",null),h([f({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Qr.prototype,"lastEditInfoEnabled",void 0),h([f()],Qr.prototype,"outFields",void 0),h([f()],Qr.prototype,"overwriteActions",void 0),h([f()],Qr.prototype,"returnGeometry",void 0),h([f({json:{type:String}})],Qr.prototype,"title",void 0),h([we("title")],Qr.prototype,"writeTitle",null),Qr=h([A("esri.PopupTemplate")],Qr);const MO=Qr,cY=new nt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let AVe=0,Lv=class extends K{constructor(e){super(e),this.id="sym"+AVe++,this.type=null,this.color=new xe([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};h([f({type:cY.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:cY.write,isRequired:!0}}})],Lv.prototype,"type",void 0),h([f({type:xe,json:{write:{allowNull:!0}}})],Lv.prototype,"color",void 0),h([ve("color")],Lv.prototype,"readColor",null),Lv=h([A("esri.symbols.Symbol")],Lv);const ts=Lv;var uF;let Sp=uF=class extends ts{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(s=>{const o=s.valueExpressionInfo;return o?Ts(t,e,o.expression):null});await Promise.all(n)}}}clone(){return new uF({data:q(this.data)})}hash(){return joe(JSON.stringify(this.data)).toString()}};h([f({json:{write:!1}})],Sp.prototype,"color",void 0),h([f({json:{write:!0}})],Sp.prototype,"data",void 0),h([ve("data",["symbol"])],Sp.prototype,"readData",null),h([we("data",{})],Sp.prototype,"writeData",null),h([Re({CIMSymbolReference:"cim"},{readOnly:!0})],Sp.prototype,"type",void 0),Sp=uF=h([A("esri.symbols.CIMSymbol")],Sp);const om=Sp;let Nv=class extends K{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};h([f({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Nv.prototype,"enabled",void 0),h([we("enabled")],Nv.prototype,"writeEnabled",null),h([f({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Nv.prototype,"type",void 0),Nv=h([A("esri.symbols.Symbol3DLayer")],Nv);const Lc=Nv;function IVe(t,e){const i=e.transparency!=null?l$(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new xe([r[0]||0,r[1]||0,r[2]||0,i]):null}function PVe(t,e){e.color=t.toJSON().slice(0,3);const i=WP(t.a);i!==0&&(e.transparency=i)}function am(t){return{type:xe,nonNullable:t==null?void 0:t.nonNullable,json:{type:[kt],default:null,read:{source:["color","transparency"],reader:IVe},write:{target:{color:{type:[kt],isRequired:t==null?void 0:t.colorRequiredOnWrite},transparency:{type:kt}},writer:PVe}}}}const kc={type:Number,cast:Vt,json:{write:!0}};let ay=class extends K{constructor(e){super(e),this.color=new xe([0,0,0,1]),this.extensionLength=0,this.size=$s(1)}clone(){}cloneProperties(){return{color:q(this.color),size:this.size,extensionLength:this.extensionLength}}};h([f({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],ay.prototype,"type",void 0),h([f(am({colorRequiredOnWrite:!0}))],ay.prototype,"color",void 0),h([f({...kc,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],ay.prototype,"extensionLength",void 0),h([f(kc)],ay.prototype,"size",void 0),ay=h([A("esri.symbols.edges.Edges3D")],ay);const G8=ay;var cF;let RC=cF=class extends G8{constructor(t){super(t),this.type="sketch"}clone(){return new cF(this.cloneProperties())}};h([Re({sketch:"sketch"},{readOnly:!0})],RC.prototype,"type",void 0),RC=cF=h([A("esri.symbols.edges.SketchEdges3D")],RC);const RVe=RC;var hF;let LC=hF=class extends G8{constructor(t){super(t),this.type="solid"}clone(){return new hF(this.cloneProperties())}};h([Re({solid:"solid"},{readOnly:!0})],LC.prototype,"type",void 0),LC=hF=h([A("esri.symbols.edges.SolidEdges3D")],LC);const Mde=LC,Ade={types:{key:"type",base:G8,typeMap:{solid:Mde,sketch:RVe}},json:{write:!0}};var dF;let To=dF=class extends K{constructor(t){super(t),this.color=null,this.emissiveFactor=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?O8(this.emissiveFactor):null};return new dF(t)}};h([f(am())],To.prototype,"color",void 0),h([f({type:[Number],json:{write:!1}})],To.prototype,"emissiveFactor",void 0),To=dF=h([A("esri.symbols.support.Symbol3DMaterial")],To);var pF;let _p=pF=class extends Lc{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var t,e;return new pF({edges:(t=this.edges)==null?void 0:t.clone(),enabled:this.enabled,material:(e=this.material)==null?void 0:e.clone(),castShadows:this.castShadows,size:this.size})}};h([Re({Extrude:"extrude"},{readOnly:!0})],_p.prototype,"type",void 0),h([f({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],_p.prototype,"size",void 0),h([f({type:To,json:{write:!0}})],_p.prototype,"material",void 0),h([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],_p.prototype,"castShadows",void 0),h([f(Ade)],_p.prototype,"edges",void 0),_p=pF=h([A("esri.symbols.ExtrudeSymbol3DLayer")],_p);const Ide=_p;let NC=class extends K{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};h([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],NC.prototype,"type",void 0),NC=h([A("esri.symbols.patterns.LinePattern3D")],NC);const Pde=NC,LVe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var fF;const NVe=dt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let YS=fF=class extends Pde{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new fF(t)}};h([f({type:["style"],json:{write:{isRequired:!0}}})],YS.prototype,"type",void 0),h([Re(NVe),f({type:LVe,json:{write:{isRequired:!0}}})],YS.prototype,"style",void 0),YS=fF=h([A("esri.symbols.patterns.LineStylePattern3D")],YS);const Z8=YS;let DC=class extends K{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};h([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],DC.prototype,"type",void 0),DC=h([A("esri.symbols.patterns.Pattern3D")],DC);const Rde=DC,DVe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var mF;let JS=mF=class extends Rde{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new mF({style:this.style})}};h([f({type:["style"],json:{write:{isRequired:!0}}})],JS.prototype,"type",void 0),h([f({type:DVe,json:{read:!0,write:{isRequired:!0}}})],JS.prototype,"style",void 0),JS=mF=h([A("esri.symbols.patterns.StylePattern3D")],JS);const Lde=JS,VVe={types:{key:"type",base:Rde,typeMap:{style:Lde}},json:{write:!0}},Nde={types:{key:"type",base:Pde,typeMap:{style:Z8}},json:{write:!0}},vx=new xe("white"),FVe=new xe([255,255,255,0]);function jVe(t){return t.r===0&&t.g===0&&t.b===0}var yF;let bx=yF=class extends To{constructor(t){super(t),this.colorMixMode=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?O8(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new yF(t)}};h([Re({multiply:"multiply",replace:"replace",tint:"tint"})],bx.prototype,"colorMixMode",void 0),bx=yF=h([A("esri.symbols.support.Symbol3DFillMaterial")],bx);function zVe(t,e=!1){return t<=Poe?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function cvt(t){return(EEe(t)?t.byteLength/8:t.length)<=Poe?Array.from(t):new Float64Array(t)}function hvt(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function $2(t=qVe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function H8(t,e,i,r,n,s,o=$2()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function dvt(t,e=$2()){return UVe(t,0,t.length/3,e)}function UVe(t,e,i,r=$2()){return Dde(r,gF),QVe(r,t,e,i),r}function pvt(t,e=zVe(24)){const[i,r,n,s,o,a]=t;return e[0]=i,e[1]=r,e[2]=n,e[3]=i,e[4]=r,e[5]=a,e[6]=i,e[7]=o,e[8]=n,e[9]=i,e[10]=o,e[11]=a,e[12]=s,e[13]=r,e[14]=n,e[15]=s,e[16]=r,e[17]=a,e[18]=s,e[19]=o,e[20]=n,e[21]=s,e[22]=o,e[23]=a,e}function fvt(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new oi(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function mvt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function yvt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function gvt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function QVe(t,e,i=0,r=e.length/3){let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],u=t[5];for(let p=0;p<r;p++)n=Math.min(n,e[i+3*p]),s=Math.min(s,e[i+3*p+1]),o=Math.min(o,e[i+3*p+2]),a=Math.max(a,e[i+3*p]),l=Math.max(l,e[i+3*p+1]),u=Math.max(u,e[i+3*p+2]);t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=u}function vvt(t,e,i){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],u=t[5];if(i)for(let p=0;p<r;p++){const m=e[p];n=Math.min(n,m[0]),s=Math.min(s,m[1]),o=Math.min(o,m[2]),a=Math.max(a,m[0]),l=Math.max(l,m[1]),u=Math.max(u,m[2])}else for(let p=0;p<r;p++){const m=e[p];n=Math.min(n,m[0]),s=Math.min(s,m[1]),a=Math.max(a,m[0]),l=Math.max(l,m[1])}t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=u}function bvt(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function T2(t){return t[0]>=t[3]?0:t[3]-t[0]}function E2(t){return t[1]>=t[4]?0:t[4]-t[1]}function k2(t){return t[2]>=t[5]?0:t[5]-t[2]}function wvt(t){const e=T2(t),i=k2(t),r=E2(t);return Math.sqrt(e*e+i*i+r*r)}function Ovt(t,e=[0,0,0]){return e[0]=t[0]+T2(t)/2,e[1]=t[1]+E2(t)/2,e[2]=t[2]+k2(t)/2,e}function Svt(t,e=[0,0,0]){return e[0]=T2(t),e[1]=E2(t),e[2]=k2(t),e}function _vt(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function BVe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function xvt(t,e){return e==null||BVe(t,e)}function $vt(t,e,i,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+r,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+r,n}function Tvt(t,e,i=t){const r=t[0]+T2(t)/2,n=t[1]+E2(t)/2,s=t[2]+k2(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=n+(t[1]-n)*e,i[2]=s+(t[2]-s)*e,i[3]=r+(t[3]-r)*e,i[4]=n+(t[4]-n)*e,i[5]=s+(t[5]-s)*e,i}function Evt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function kvt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function Cvt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function Dde(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Mvt(t){return t?Dde(t,gF):$2(gF)}function Avt(t,e){return e||(e=Gs()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function Ivt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function Pvt(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function hY(t){return t.length===6}function Rvt(t){return T2(t)===0&&E2(t)===0&&k2(t)===0}function Lvt(t,e,i){if(t==null||e==null)return t===e;if(!hY(t)||!hY(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const gF=[1/0,1/0,1/0,-1/0,-1/0,-1/0],qVe=[0,0,0,0,0,0];$2();function Nvt(t,{isPrimitive:e,width:i,depth:r,height:n}){const s=e?10:1;if(i==null&&n==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=kO(i,r,n);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const GVe=H8(-.5,-.5,-.5,.5,.5,.5),ZVe=H8(-.5,-.5,0,.5,.5,1),HVe=H8(-.5,-.5,0,.5,.5,.5);function Dvt(t){switch(t){case"sphere":case"cube":case"diamond":return GVe;case"cylinder":case"cone":case"inverted-cone":return ZVe;case"tetrahedron":return HVe;default:return}}const W8=["butt","square","round"],WVe=[...W8,"none"],Vde=["miter","bevel","round"];var vF;let ly=vF=class extends K{constructor(t){super(t),this.color=new xe([0,0,0,1]),this.size=$s(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new vF(t)}};h([f(am({colorRequiredOnWrite:!0}))],ly.prototype,"color",void 0),h([f({...kc,json:{write:{isRequired:!0}}})],ly.prototype,"size",void 0),h([f(Nde)],ly.prototype,"pattern",void 0),h([f({type:W8,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],ly.prototype,"patternCap",void 0),ly=vF=h([A("esri.symbols.support.Symbol3DOutline")],ly);var VC;let xh=VC=class extends Lc{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new VC(t)}static fromSimpleFillSymbol(t){var r,n,s;const e=t.outline&&t.outline.style&&t.outline.style!=="solid"?new Z8({style:t.outline.style}):null,i={size:((r=t.outline)==null?void 0:r.width)??0,color:(((n=t.outline)==null?void 0:n.color)??vx).clone(),pattern:e};return e&&((s=t.outline)!=null&&s.cap)&&(i.patternCap=t.outline.cap),new VC({material:new bx({color:(t.color??FVe).clone()}),pattern:t.style&&t.style!=="solid"?new Lde({style:t.style}):null,outline:i})}};h([Re({Fill:"fill"},{readOnly:!0})],xh.prototype,"type",void 0),h([f({type:bx,json:{write:!0}})],xh.prototype,"material",void 0),h([f(VVe)],xh.prototype,"pattern",void 0),h([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],xh.prototype,"castShadows",void 0),h([f({type:ly,json:{write:!0}})],xh.prototype,"outline",void 0),h([f(Ade)],xh.prototype,"edges",void 0),xh=VC=h([A("esri.symbols.FillSymbol3DLayer")],xh);const p0=xh;var bF;const XVe=dt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let uy=bF=class extends K{constructor(t){super(t)}readHref(t,e,i){return t?Vf(t,i):e.dataURI}writeHref(t,e,i,r){t&&($d(t)?e.dataURI=t:(e.href=f2(t,r),la(e.href)&&(e.href=_s(e.href))))}clone(){return new bF({href:this.href,primitive:this.primitive})}};h([f({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],uy.prototype,"href",void 0),h([ve("href")],uy.prototype,"readHref",null),h([we("href",{href:{type:String},dataURI:{type:String}})],uy.prototype,"writeHref",null),h([Re(XVe)],uy.prototype,"primitive",void 0),uy=bF=h([A("esri.symbols.support.IconSymbol3DLayerResource")],uy);const YVe="circle";var wF;let Ub=wF=class extends Ce{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new wF({x:this.x,y:this.y})}};h([f({type:Number})],Ub.prototype,"x",void 0),h([f({type:Number})],Ub.prototype,"y",void 0),Ub=wF=h([A("esri.symbols.support.Symbol3DAnchorPosition2D")],Ub);var OF;let KS=OF=class extends K{constructor(t){super(t),this.color=new xe([0,0,0,1]),this.size=$s(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new OF(t)}};h([f(am({colorRequiredOnWrite:!0}))],KS.prototype,"color",void 0),h([f({...kc,json:{write:{isRequired:!0}}})],KS.prototype,"size",void 0),KS=OF=h([A("esri.symbols.support.Symbol3DIconOutline")],KS);var Dv;const Fde="esri.symbols.IconSymbol3DLayer";let zl=Dv=class extends Lc{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Dv({anchor:this.anchor,anchorPosition:q(this.anchorPosition),enabled:this.enabled,material:q(this.material),outline:q(this.outline),resource:q(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||vx,i=dY(t),r=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||vx).clone()}:null;return new Dv({size:t.size,angle:t.angle,resource:{primitive:KVe(t.style)},material:{color:e},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||jVe(t.color)?vx:t.color,i=dY(t);return new Dv({size:t.width<=t.height?t.height:t.width,angle:t.angle,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new Dv({resource:{href:sle({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};h([f({type:To,json:{write:!0}})],zl.prototype,"material",void 0),h([f({type:uy,json:{write:!0}})],zl.prototype,"resource",void 0),h([Re({Icon:"icon"},{readOnly:!0})],zl.prototype,"type",void 0),h([f({...kc,json:{write:{isRequired:!0}}})],zl.prototype,"size",void 0),h([Re({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],zl.prototype,"anchor",void 0),h([f({type:Ub,json:{type:[Number],read:{reader:t=>new Ub({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],zl.prototype,"anchorPosition",void 0),h([f({type:KS,json:{write:!0}})],zl.prototype,"outline",void 0),h([f({type:Number,json:{write:!0,default:0}})],zl.prototype,"angle",void 0),zl=Dv=h([A(Fde)],zl);const cg=zl;function dY(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=pY(t.xoffset),n=pY(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function pY(t){return isFinite(t)?t:0}const JVe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function KVe(t){return JVe[t]||(pe.getLogger(Fde).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const eFe=["begin","end","begin-end"],jde=["arrow","circle","square","diamond","cross","x"];let cy=class extends ft.ClonableMixin(K){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};h([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],cy.prototype,"type",void 0),h([f({type:eFe,json:{default:"begin-end",write:!0}})],cy.prototype,"placement",void 0),h([f({type:jde,json:{default:"arrow",write:!0}})],cy.prototype,"style",void 0),h([f({type:xe,json:{type:[kt],default:null,write:!0}})],cy.prototype,"color",void 0),cy=h([A("esri.symbols.LineStyleMarker3D")],cy);const SF=cy;var FC;let zu=FC=class extends Lc{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=$s(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new FC(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??$s(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new Z8({style:t.style}):null,material:new To({color:(t.color||vx).clone()}),marker:t.marker?new SF({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new FC(e)}};h([f({type:To,json:{write:!0}})],zu.prototype,"material",void 0),h([Re({Line:"line"},{readOnly:!0})],zu.prototype,"type",void 0),h([f({type:Vde,json:{write:!0,default:"miter"}})],zu.prototype,"join",void 0),h([f({type:W8,json:{write:!0,default:"butt"}})],zu.prototype,"cap",void 0),h([f({...kc,json:{write:{isRequired:!0}}})],zu.prototype,"size",void 0),h([f(Nde)],zu.prototype,"pattern",void 0),h([f({types:{key:"type",base:SF,typeMap:{style:SF}},json:{write:!0}})],zu.prototype,"marker",void 0),zu=FC=h([A("esri.symbols.LineSymbol3DLayer")],zu);const AO=zu;var _F;const tFe=dt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let e_=_F=class extends K{clone(){return new _F({href:this.href,primitive:this.primitive})}};h([f({type:String,json:{read:QQ,write:Ug}})],e_.prototype,"href",void 0),h([Re(tFe)],e_.prototype,"primitive",void 0),e_=_F=h([A("esri.symbols.support.ObjectSymbol3DLayerResource")],e_);const iFe="sphere";var xF;let Jy=xF=class extends Ce{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new xF({x:this.x,y:this.y,z:this.z})}};h([f({type:Number})],Jy.prototype,"x",void 0),h([f({type:Number})],Jy.prototype,"y",void 0),h([f({type:Number})],Jy.prototype,"z",void 0),Jy=xF=h([A("esri.symbols.support.Symbol3DAnchorPosition3D")],Jy);var $F;let cs=$F=class extends Lc{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,e,i;return new $F({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((e=this.material)==null?void 0:e.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};h([f({type:To,json:{write:!0}})],cs.prototype,"material",void 0),h([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],cs.prototype,"castShadows",void 0),h([f({type:e_,json:{write:!0}})],cs.prototype,"resource",void 0),h([Re({Object:"object"},{readOnly:!0})],cs.prototype,"type",void 0),h([f({type:Number,json:{write:!0}})],cs.prototype,"width",void 0),h([f({type:Number,json:{write:!0}})],cs.prototype,"height",void 0),h([f({type:Number,json:{write:!0}})],cs.prototype,"depth",void 0),h([Re({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],cs.prototype,"anchor",void 0),h([f({type:Jy,json:{type:[Number],read:{reader:t=>new Jy({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],cs.prototype,"anchorPosition",void 0),h([f({type:Number,json:{write:!0}})],cs.prototype,"heading",void 0),h([f({type:Number,json:{write:!0}})],cs.prototype,"tilt",void 0),h([f({type:Number,json:{write:!0}})],cs.prototype,"roll",void 0),h([f({readOnly:!0})],cs.prototype,"isPrimitive",null),cs=$F=h([A("esri.symbols.ObjectSymbol3DLayer")],cs);const X8=cs;var TF;let Ns=TF=class extends Lc{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new TF({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};h([f({type:To,json:{write:!0}})],Ns.prototype,"material",void 0),h([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ns.prototype,"castShadows",void 0),h([Re({Path:"path"},{readOnly:!0})],Ns.prototype,"type",void 0),h([f({type:["circle","quad"],json:{write:!0,default:"circle"}})],Ns.prototype,"profile",void 0),h([f({type:Vde,json:{write:!0,default:"miter"}})],Ns.prototype,"join",void 0),h([f({type:WVe,json:{write:!0,default:"butt"}})],Ns.prototype,"cap",void 0),h([f({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Ns.prototype,"width",void 0),h([ve("width",["width","size","height"])],Ns.prototype,"readWidth",null),h([f({type:Number,json:{write:!0}})],Ns.prototype,"height",void 0),h([ve("height",["height","size","width"])],Ns.prototype,"readHeight",null),h([f({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Ns.prototype,"anchor",void 0),h([f({type:["heading","all"],json:{write:!0,default:"all"}})],Ns.prototype,"profileRotation",void 0),Ns=TF=h([A("esri.symbols.PathSymbol3DLayer")],Ns);const Y8=Ns,rFe=["none","underline","line-through"],nFe=["normal","italic","oblique"],sFe=["normal","lighter","bold","bolder"],zde={type:Number,cast:t=>{const e=Bs(t);return e===0?1:Po(e,.1,4)},nonNullable:!0},oFe=["left","right","center"],aFe=["baseline","top","middle","bottom"],Ude={type:oFe,nonNullable:!0},Qde={type:aFe,nonNullable:!0},Fvt=8;var EF;let $h=EF=class extends K{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Vt(t)}clone(){return new EF({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};h([f({type:rFe,json:{default:"none",write:!0}})],$h.prototype,"decoration",void 0),h([f({type:String,json:{write:!0}})],$h.prototype,"family",void 0),h([f({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],$h.prototype,"size",void 0),h([Rt("size")],$h.prototype,"castSize",null),h([f({type:nFe,json:{default:"normal",write:!0}})],$h.prototype,"style",void 0),h([f({type:sFe,json:{default:"normal",write:!0}})],$h.prototype,"weight",void 0),$h=EF=h([A("esri.symbols.Font")],$h);const nR=$h;var kF;let Qb=kF=class extends K{constructor(){super(...arguments),this.color=new xe([0,0,0,1]),this.size=0}clone(){const t={color:q(this.color),size:this.size};return new kF(t)}};h([f(am())],Qb.prototype,"color",void 0),h([f(kc)],Qb.prototype,"size",void 0),Qb=kF=h([A("esri.symbols.support.Symbol3DHalo")],Qb);let wx=class extends ft.ClonableMixin(K){constructor(e){super(e),this.color=null}};h([f(am())],wx.prototype,"color",void 0),wx=h([A("esri.symbols.support.Symbol3DTextBackground")],wx);var jC;let ao=jC=class extends Lc{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,r){const n={...r,textSymbol3D:!0};e.font=t.write({},n),delete e.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new jC({enabled:this.enabled,font:this.font&&q(this.font),halo:this.halo&&q(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:q(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new jC({font:t.font!=null?t.font.clone():new nR,halo:lFe(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new To({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new wx({color:t.backgroundColor.clone()}):null})}};function lFe(t,e){return t&&e!=null&&e>0?new Qb({color:q(t),size:e}):null}h([f({type:nR,json:{write:!0}})],ao.prototype,"font",null),h([we("font")],ao.prototype,"writeFont",null),h([f({type:Qb,json:{write:!0}})],ao.prototype,"halo",void 0),h([f({...Ude,json:{default:"center",write:!0}})],ao.prototype,"horizontalAlignment",void 0),h([f({...zde,json:{default:1,write:!0}})],ao.prototype,"lineHeight",void 0),h([f({type:To,json:{write:!0}})],ao.prototype,"material",void 0),h([f({type:wx,json:{write:!0}})],ao.prototype,"background",void 0),h([f(kc)],ao.prototype,"size",null),h([f({type:String,json:{write:!0}})],ao.prototype,"text",void 0),h([Re({Text:"text"},{readOnly:!0})],ao.prototype,"type",void 0),h([f({...Qde,json:{default:"baseline",write:!0}})],ao.prototype,"verticalAlignment",void 0),ao=jC=h([A("esri.symbols.TextSymbol3DLayer")],ao);const IO=ao;var CF;let xp=CF=class extends Lc{constructor(t){super(t),this.color=MF.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new CF({color:q(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};h([f({type:xe,nonNullable:!0,json:{type:[kt],write:(t,e,i)=>e[i]=t.toArray(xe.AlphaMode.UNLESS_OPAQUE),default:()=>MF.clone(),defaultEquals:t=>t.toCss(!0)===MF.toCss(!0)}})],xp.prototype,"color",void 0),h([Re({Water:"water"},{readOnly:!0})],xp.prototype,"type",void 0),h([f({type:["small","medium","large"],json:{write:!0,default:"medium"}})],xp.prototype,"waterbodySize",void 0),h([f({type:Number,json:{write:!0,default:null}})],xp.prototype,"waveDirection",void 0),h([f({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],xp.prototype,"waveStrength",void 0),xp=CF=h([A("esri.symbols.WaterSymbol3DLayer")],xp);const Bde=xp,MF=new xe([0,119,190]);var AF;let hy=AF=class extends Ce{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new AF({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};h([f({type:String})],hy.prototype,"name",void 0),h([f({type:String})],hy.prototype,"styleUrl",void 0),h([f({type:String})],hy.prototype,"styleName",void 0),h([f({type:Lr})],hy.prototype,"portal",void 0),hy=AF=h([A("esri.symbols.support.StyleOrigin")],hy);const d$=hy;var IF;let _g=IF=class extends Ce{constructor(){super(...arguments),this.url=""}clone(){return new IF({url:this.url})}};h([f({type:String})],_g.prototype,"url",void 0),_g=IF=h([A("esri.symbols.support.Thumbnail")],_g);const qde={icon:cg,object:X8,line:AO,path:Y8,fill:p0,extrude:Ide,text:IO,water:Bde},uFe=Te.ofType({base:Lc,key:"type",typeMap:qde,errorContext:"symbol-layer"});let Uu=class extends ts{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,n=r||Te;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&pe.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){wd(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=Vf(e.styleUrl,r);return new d$({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new d$({portal:(r==null?void 0:r.portal)||Lr.getDefault(),styleName:e.styleName,name:e.name});r!=null&&r.messages&&r.messages.push(new ll("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=f2(e.styleUrl,n);la(s)&&(s=_s(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&(n!=null&&n.portal)&&!nle(e.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new ll("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Lc||e&&qde[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};h([f({json:{read:!1,write:!1}})],Uu.prototype,"color",null),h([f({type:uFe,nonNullable:!0,json:{write:!0}}),Rt(whe)],Uu.prototype,"symbolLayers",null),h([f({type:d$})],Uu.prototype,"styleOrigin",void 0),h([ve("styleOrigin")],Uu.prototype,"readStyleOrigin",null),h([we("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Uu.prototype,"writeStyleOrigin",null),h([f({type:_g,json:{read:!1}})],Uu.prototype,"thumbnail",void 0),h([f({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Uu.prototype,"type",void 0),Uu=h([A("esri.symbols.Symbol3D")],Uu);const C2=Uu;let t_=class extends K{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};h([f({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],t_.prototype,"type",void 0),h([f({readOnly:!0})],t_.prototype,"visible",void 0),t_=h([A("esri.symbols.callouts.Callout3D")],t_);const Gde=t_;var PF;let zC=PF=class extends K{constructor(t){super(t),this.color=new xe("white")}clone(){return new PF({color:q(this.color)})}};h([f(am({colorRequiredOnWrite:!0}))],zC.prototype,"color",void 0),zC=PF=h([A("esri.symbols.callouts.LineCallout3DBorder")],zC);const cFe=zC;var RF;let $p=RF=class extends Gde{constructor(t){super(t),this.type="line",this.color=new xe([0,0,0,1]),this.size=$s(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new RF({color:q(this.color),size:this.size,border:q(this.border)})}};h([Re({line:"line"})],$p.prototype,"type",void 0),h([f(am({colorRequiredOnWrite:!0}))],$p.prototype,"color",void 0),h([f({...kc,json:{write:{isRequired:!0}}})],$p.prototype,"size",void 0),h([f({type:cFe,json:{write:!0}})],$p.prototype,"border",void 0),h([f({readOnly:!0})],$p.prototype,"visible",null),$p=RF=h([A("esri.symbols.callouts.LineCallout3D")],$p);const Zde=$p;function J8(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function Hde(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!(e!=null&&e.visible)&&!!J8(t)}function Qvt(t){return t.type==="point-3d"||t.type==="label-3d"}function Bvt(t){return t.horizontalAlignment==="center"}const Wde={types:{key:"type",base:Gde,typeMap:{line:Zde}},json:{write:!0}};var LF;let Vv=LF=class extends K{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new LF({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};h([f({...kc,json:{write:{isRequired:!0}}})],Vv.prototype,"screenLength",void 0),h([f({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Vv.prototype,"minWorldLength",void 0),h([f({type:Number,json:{write:!0}})],Vv.prototype,"maxWorldLength",void 0),Vv=LF=h([A("esri.symbols.support.Symbol3DVerticalOffset")],Vv);const K8=Vv;var UC;const Xde=Te.ofType({base:null,key:"type",typeMap:{text:IO}});let Tp=UC=class extends C2{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Xde,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Hde(this)}hasVisibleVerticalOffset(){return J8(this)}clone(){return new UC({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail),callout:q(this.callout),verticalOffset:q(this.verticalOffset)})}static fromTextSymbol(t){return new UC({symbolLayers:new Te([IO.fromTextSymbol(t)])})}};h([f({type:K8,json:{write:!0}})],Tp.prototype,"verticalOffset",void 0),h([f(Wde)],Tp.prototype,"callout",void 0),h([f({json:{read:!1,write:!1}})],Tp.prototype,"styleOrigin",void 0),h([f({type:Xde})],Tp.prototype,"symbolLayers",void 0),h([Re({LabelSymbol3D:"label-3d"},{readOnly:!0})],Tp.prototype,"type",void 0),Tp=UC=h([A("esri.symbols.LabelSymbol3D")],Tp);const sR=Tp;var QC;const Yde=Te.ofType({base:null,key:"type",typeMap:{line:AO,path:Y8}}),hFe=Te.ofType({base:null,key:"type",typeMap:{line:AO,path:Y8}});let i_=QC=class extends C2{constructor(t){super(t),this.symbolLayers=new Yde,this.type="line-3d"}clone(){return new QC({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleLineSymbol(t){return new QC({symbolLayers:new Te([AO.fromSimpleLineSymbol(t)])})}};h([f({type:Yde,json:{type:hFe}})],i_.prototype,"symbolLayers",void 0),h([Re({LineSymbol3D:"line-3d"},{readOnly:!0})],i_.prototype,"type",void 0),i_=QC=h([A("esri.symbols.LineSymbol3D")],i_);const f0=i_;var BC;const Jde=Te.ofType({base:null,key:"type",typeMap:{fill:p0}});let r_=BC=class extends C2{constructor(t){super(t),this.symbolLayers=new Jde,this.type="mesh-3d"}clone(){return new BC({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleFillSymbol(t){return new BC({symbolLayers:new Te([p0.fromSimpleFillSymbol(t)])})}};h([f({type:Jde})],r_.prototype,"symbolLayers",void 0),h([Re({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],r_.prototype,"type",void 0),r_=BC=h([A("esri.symbols.MeshSymbol3D")],r_);const M2=r_;let n_=class extends ts{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};h([Re({esriSLS:"simple-line"},{readOnly:!0})],n_.prototype,"type",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],n_.prototype,"width",void 0),n_=h([A("esri.symbols.LineSymbol")],n_);const dFe=n_;var NF;let Qu=NF=class extends K{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new NF({color:q(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};h([f({type:["begin","end","begin-end"],json:{write:!0}})],Qu.prototype,"placement",void 0),h([Re({"line-marker":"line-marker"},{readOnly:!0}),f({json:{origins:{"web-map":{write:!1}}}})],Qu.prototype,"type",void 0),h([f({type:jde})],Qu.prototype,"style",void 0),h([we("style")],Qu.prototype,"writeStyle",null),h([f({type:xe,value:null,json:{write:{allowNull:!0}}})],Qu.prototype,"color",null),h([ve("color")],Qu.prototype,"readColor",null),h([we("color")],Qu.prototype,"writeColor",null),Qu=NF=h([A("esri.symbols.LineSymbolMarker")],Qu);const pFe=Qu;var DF;const wN=new nt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Th=DF=class extends dFe{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=Vt(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Vt(s)),o}clone(){var t;return new DF({color:q(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};h([Re({esriSLS:"simple-line"},{readOnly:!0})],Th.prototype,"type",void 0),h([f({type:wN.apiValues,json:{read:wN.read,write:wN.write}})],Th.prototype,"style",void 0),h([f({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Th.prototype,"cap",void 0),h([f({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Th.prototype,"join",void 0),h([f({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":pFe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Th.prototype,"marker",void 0),h([f({type:Number,json:{read:!1,write:!1}})],Th.prototype,"miterLimit",void 0),Th=DF=h([A("esri.symbols.SimpleLineSymbol")],Th);const es=Th;let s_=class extends ts{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};h([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":es}},json:{default:null,write:!0}})],s_.prototype,"outline",void 0),h([f({type:["simple-fill","picture-fill"],readOnly:!0})],s_.prototype,"type",void 0),s_=h([A("esri.symbols.FillSymbol")],s_);const Kde=s_;function fFe(t,e,i){return e.imageData?sle({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):epe(e.url,i)}function epe(t,e){if(!la(t)){const i=yFe(e);if(i)return kw(i,"images",t)}return Vf(t,e)}function mFe(t,e,i,r){if($d(t)){const n=Df(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&Ug(i.url,e,"url",r)}else Ug(t,e,"url",r)}const tpe={json:{read:{source:["imageData","url"],reader:fFe},write:{writer(t,e,i,r){mFe(t,e,this.source,r)}}}},ipe={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=epe(e.url,i)),r}}}};function yFe(t){var n,s;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(n=i.parsedUrl)==null?void 0:n.path:r==="map-image"||r==="tile"?(s=t.url)==null?void 0:s.path:null}var VF;let Va=VF=class extends Kde{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=Vt(i)),r!=null&&(n.height=Vt(r)),n}clone(){const t=new VF({color:q(this.color),height:this.height,outline:q(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",q(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};h([Re({esriPFS:"picture-fill"},{readOnly:!0})],Va.prototype,"type",void 0),h([f(tpe)],Va.prototype,"url",void 0),h([f({type:Number,json:{write:!0}})],Va.prototype,"xscale",void 0),h([f({type:Number,json:{write:!0}})],Va.prototype,"yscale",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Va.prototype,"width",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Va.prototype,"height",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Va.prototype,"xoffset",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Va.prototype,"yoffset",void 0),h([f(ipe)],Va.prototype,"source",void 0),Va=VF=h([A("esri.symbols.PictureFillSymbol")],Va);const e9=Va;let Ep=class extends ts{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};h([f({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Ep.prototype,"angle",void 0),h([f({type:["simple-marker","picture-marker"],readOnly:!0})],Ep.prototype,"type",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Ep.prototype,"xoffset",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Ep.prototype,"yoffset",void 0),h([f({cast:t=>t==="auto"?t:Bs(Vt(t)),json:{write:!0}})],Ep.prototype,"size",void 0),Ep=h([A("esri.symbols.MarkerSymbol")],Ep);const rpe=Ep;var FF;let Ul=FF=class extends rpe{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Vt(e)),i!=null&&(r.height=Vt(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new FF({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",q(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};h([f({json:{write:!1}})],Ul.prototype,"color",void 0),h([Re({esriPMS:"picture-marker"},{readOnly:!0})],Ul.prototype,"type",void 0),h([f(tpe)],Ul.prototype,"url",void 0),h([f(ipe)],Ul.prototype,"source",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Ul.prototype,"height",void 0),h([ve("height",["height","size"])],Ul.prototype,"readHeight",null),h([f({type:Number,cast:Vt,json:{write:!0}})],Ul.prototype,"width",void 0),h([f({json:{write:!1}})],Ul.prototype,"size",void 0),Ul=FF=h([A("esri.symbols.PictureMarkerSymbol")],Ul);const A2=Ul;var dy;const npe=Te.ofType({base:null,key:"type",typeMap:{icon:cg,object:X8,text:IO}});let py=dy=class extends C2{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new npe,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Hde(this)}hasVisibleVerticalOffset(){return J8(this)}clone(){return new dy({verticalOffset:q(this.verticalOffset),callout:q(this.callout),styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new dy({symbolLayers:new Te([cg.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new dy({symbolLayers:new Te([cg.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new dy(i!=null&&i.callout?{symbolLayers:new Te([cg.fromCIMSymbol(t)]),callout:new Zde({size:.5,color:new xe([0,0,0])}),verticalOffset:new K8({screenLength:40})}:{symbolLayers:new Te([cg.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new dy({symbolLayers:new Te([IO.fromTextSymbol(t)])})}};h([f({type:K8,json:{write:!0}})],py.prototype,"verticalOffset",void 0),h([f(Wde)],py.prototype,"callout",void 0),h([f({type:npe,json:{origins:{"web-scene":{write:!0}}}})],py.prototype,"symbolLayers",void 0),h([Re({PointSymbol3D:"point-3d"},{readOnly:!0})],py.prototype,"type",void 0),py=dy=h([A("esri.symbols.PointSymbol3D")],py);const od=py;var o_;const spe=Te.ofType({base:null,key:"type",typeMap:{extrude:Ide,fill:p0,icon:cg,line:AO,object:X8,text:IO,water:Bde}});let a_=o_=class extends C2{constructor(t){super(t),this.symbolLayers=new spe,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Zx(pe.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Zx(pe.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Ss(()=>this.symbolLayers,"after-add",({item:e})=>t(e),mu))}clone(){return new o_({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromJSON(t){var i;const e=new o_;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),n=e.symbolLayers.at(1);!n.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new o_({symbolLayers:new Te([p0.fromSimpleFillSymbol(t)])})}};h([f({type:spe,json:{write:!0}})],a_.prototype,"symbolLayers",void 0),h([Re({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],a_.prototype,"type",void 0),a_=o_=h([A("esri.symbols.PolygonSymbol3D")],a_);const lm=a_;var jF;const ON=new nt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let fy=jF=class extends Kde{constructor(...t){super(...t),this.color=new xe([0,0,0,.25]),this.outline=new es,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new jF({color:q(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};h([f()],fy.prototype,"color",void 0),h([f()],fy.prototype,"outline",void 0),h([Re({esriSFS:"simple-fill"},{readOnly:!0})],fy.prototype,"type",void 0),h([f({type:ON.apiValues,json:{read:ON.read,write:ON.write}})],fy.prototype,"style",void 0),fy=jF=h([A("esri.symbols.SimpleFillSymbol")],fy);const Nc=fy;var zF;const SN=new nt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Bu=zF=class extends rpe{constructor(...t){super(...t),this.color=new xe([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new es}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=Vt(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new zF({angle:this.angle,color:q(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};h([f()],Bu.prototype,"color",void 0),h([we("color")],Bu.prototype,"writeColor",null),h([Re({esriSMS:"simple-marker"},{readOnly:!0})],Bu.prototype,"type",void 0),h([f()],Bu.prototype,"size",void 0),h([f({type:SN.apiValues,json:{read:SN.read,write:SN.write}})],Bu.prototype,"style",void 0),h([f({type:String,json:{write:!0}})],Bu.prototype,"path",null),h([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":es}},json:{default:null,write:!0}})],Bu.prototype,"outline",void 0),Bu=zF=h([A("esri.symbols.SimpleMarkerSymbol")],Bu);const Jn=Bu;var UF;let Di=UF=class extends ts{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new nR,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return Vt(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new UF({angle:this.angle,backgroundColor:q(this.backgroundColor),borderLineColor:q(this.borderLineColor),borderLineSize:this.borderLineSize,color:q(this.color),font:this.font&&this.font.clone(),haloColor:q(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};h([f({type:xe,json:{write:!0}})],Di.prototype,"backgroundColor",void 0),h([f({type:xe,json:{write:!0}})],Di.prototype,"borderLineColor",void 0),h([f({type:Number,json:{write:!0},cast:Vt})],Di.prototype,"borderLineSize",void 0),h([f({type:nR,json:{write:!0}})],Di.prototype,"font",void 0),h([f({...Ude,json:{write:!0}})],Di.prototype,"horizontalAlignment",void 0),h([f({type:Boolean,json:{write:!0}})],Di.prototype,"kerning",void 0),h([f({type:xe,json:{write:!0}})],Di.prototype,"haloColor",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Di.prototype,"haloSize",void 0),h([f({type:Boolean,json:{write:!0}})],Di.prototype,"rightToLeft",void 0),h([f({type:Boolean,json:{write:!0}})],Di.prototype,"rotated",void 0),h([f({type:String,json:{write:!0}})],Di.prototype,"text",void 0),h([Re({esriTS:"text"},{readOnly:!0})],Di.prototype,"type",void 0),h([f({...Qde,json:{write:!0}})],Di.prototype,"verticalAlignment",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Di.prototype,"xoffset",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Di.prototype,"yoffset",void 0),h([f({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Di.prototype,"angle",void 0),h([f({type:Number,json:{write:!0}})],Di.prototype,"width",void 0),h([f({type:Number})],Di.prototype,"lineWidth",void 0),h([we("lineWidth")],Di.prototype,"writeLineWidth",null),h([Rt("lineWidth")],Di.prototype,"castLineWidth",null),h([f(zde)],Di.prototype,"lineHeight",void 0),h([we("lineHeight")],Di.prototype,"writeLineHeight",null),Di=UF=h([A("esri.symbols.TextSymbol")],Di);const PO=Di;var QF;let Ql=QF=class extends ts{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:Lr.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new QF({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){const e=t&&"acceptedFormats"in t?t.acceptedFormats:["web"];return this._fetchSymbol({...t,acceptedFormats:e})}async fetchCIMSymbol(t){const e=await this.fetchSymbol({...t,acceptedFormats:["cim"]});if((e==null?void 0:e.type)!=="cim")throw new G("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const o=i&&e.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await J(()=>Promise.resolve().then(()=>cht),void 0);rr(t);const n=r(this,{portal:this.portal},t);n.catch(o=>{pe.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await n;return e!=null&&e.set(i,s.clone()),s}};h([f({json:{write:!1}})],Ql.prototype,"color",void 0),h([f({type:String,json:{write:!0}})],Ql.prototype,"styleName",void 0),h([f({type:Lr,json:{write:!1}})],Ql.prototype,"portal",void 0),h([f({type:String,json:{read:QQ,write:Ug}})],Ql.prototype,"styleUrl",void 0),h([f({type:_g,json:{read:!1}})],Ql.prototype,"thumbnail",void 0),h([f({type:String,json:{write:!0}})],Ql.prototype,"name",void 0),h([Re({styleSymbolReference:"web-style"},{readOnly:!0})],Ql.prototype,"type",void 0),h([f()],Ql.prototype,"_fetchCacheKey",null),Ql=QF=h([A("esri.symbols.WebStyleSymbol")],Ql);const Bf=Ql;function oR(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Dc(t){switch(t==null?void 0:t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const ff={base:ts,key:"type",typeMap:{"simple-fill":Nc,"picture-fill":e9,"picture-marker":A2,"simple-line":es,"simple-marker":Jn,text:PO,"label-3d":sR,"line-3d":f0,"mesh-3d":M2,"point-3d":od,"polygon-3d":lm,"web-style":Bf,cim:om},errorContext:"symbol"},Hvt={base:ts,key:"type",typeMap:{"picture-marker":A2,"simple-marker":Jn,"point-3d":od,cim:om},errorContext:"symbol"},Wvt={base:ts,key:"type",typeMap:{"simple-line":es,"line-3d":f0,cim:om},errorContext:"symbol"},Xvt={base:ts,key:"type",typeMap:{"simple-fill":Nc,"picture-fill":e9,"polygon-3d":lm,cim:om},errorContext:"symbol"},gFe={base:ts,key:"type",typeMap:{"picture-marker":A2,"simple-marker":Jn,text:PO,"web-style":Bf,cim:om},errorContext:"symbol"},vFe=wO({types:ff}),ope={base:ts,key:"type",typeMap:{"simple-fill":Nc,"picture-fill":e9,"picture-marker":A2,"simple-line":es,"simple-marker":Jn,text:PO,"line-3d":f0,"mesh-3d":M2,"point-3d":od,"polygon-3d":lm,"web-style":Bf,cim:om},errorContext:"symbol"},bFe={base:ts,key:"type",typeMap:{text:PO,"label-3d":sR},errorContext:"symbol"},fY={base:ts,key:"type",typeMap:{"line-3d":f0,"mesh-3d":M2,"point-3d":od,"polygon-3d":lm,"web-style":Bf,cim:om},errorContext:"symbol"},wFe={base:ts,key:"type",typeMap:{"label-3d":sR},errorContext:"symbol"},ape=fu(ff);var BF;function OFe(t){if(!t)return null;const e={};for(const i in t){const r=bd(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function SFe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}let lo=BF=class extends ft.ClonableMixin(K){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:nC(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&OEe(pe.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),(t==null?void 0:t.type)!=="mesh"&&this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}get version(){return this._version}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new BF({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const e=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[e,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var t;return{aggregateGeometries:SFe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:K.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(n.action=r),t==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Kn(()=>{var t,e;return((t=this.geometry)==null?void 0:t.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(e=this.geometry.transform)==null?void 0:e.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:t,origin:e})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===e||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=e,this.notifyMeshTransformChanged())}),Kn(()=>{var t;return((t=this.geometry)==null?void 0:t.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var e;const t=this.geometry;(t==null?void 0:t.type)==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(e=t.transform)==null?void 0:e.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(t,e)=>t===e,sync:!0})])}};h([f({value:null,json:{read:OFe}})],lo.prototype,"aggregateGeometries",null),h([f({value:null})],lo.prototype,"attributes",null),h([f({value:null,types:_O,json:{read:bd}})],lo.prototype,"geometry",null),h([f({type:Boolean})],lo.prototype,"isAggregate",void 0),h([f({clonable:"reference"})],lo.prototype,"layer",void 0),h([f({clonable:"reference"})],lo.prototype,"origin",void 0),h([f({type:MO})],lo.prototype,"popupTemplate",void 0),h([f({clonable:"reference"})],lo.prototype,"sourceLayer",void 0),h([f({value:null,types:ff})],lo.prototype,"symbol",null),h([f({clonable:!1,json:{read:!1,write:!1}})],lo.prototype,"_version",void 0),h([f({type:Boolean,value:!0})],lo.prototype,"visible",null),lo=BF=h([A("esri.Graphic")],lo);const Cc=lo;let Ox=class extends yx{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};h([kQ({Type:Cc,ensureType:_r(Cc)})],Ox.prototype,"itemType",void 0),Ox=h([A("esri.support.GraphicsCollection")],Ox);let kp=class extends Ce{constructor(e){super(e),this.view=null,this.baseLayerViews=new Te,this.referenceLayerViews=new Te,this._loadingHandle=Oe(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},It)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){var e;return((e=this.view)==null?void 0:e.suspended)??!0}get updating(){var i,r,n;if((i=this.view)!=null&&i.suspended)return!1;const e=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap;return!!(e!=null&&e.loaded)&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};h([f({constructOnly:!0})],kp.prototype,"view",void 0),h([f({readOnly:!0})],kp.prototype,"baseLayerViews",void 0),h([f({readOnly:!0})],kp.prototype,"referenceLayerViews",void 0),h([f({readOnly:!0})],kp.prototype,"suspended",null),h([f({type:Boolean,readOnly:!0})],kp.prototype,"updating",null),kp=h([A("esri.views.BasemapView")],kp);const _Fe=kp;function xFe(t){return"tryRecycleWith"in t}function $Fe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let TFe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=ha(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Co(this._controller.signal,()=>{const n=new G("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!xFe(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let n=0;n<e.length;n++){const s=e[n];if(s.type!==i)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){e.splice(n,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(rr(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((u,p)=>Co(this._controller.signal,()=>p(Wt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:r}=this;this._map=r.map;try{let o,a;if(await i.load({signal:e}),i.prefetchResources&&await i.prefetchResources({signal:e}),kFe(i))o=await i.createLayerView(r,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new G("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(i);rr(e),o="default"in p?new p.default({layer:i,view:r}):new p({layer:i,view:r})}const l=()=>{a=qi(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=Co(e,l),rr(e);try{await o.when()}catch(p){throw l(),p}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(i)))return l(),void this._deferred.reject(new G("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=o,i.emit("layerview-create",{view:r,layerView:o}),r.emit("layerview-create",{layer:i,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){i.emit("layerview-create-error",{view:r,error:o}),r.emit("layerview-create-error",{layer:i,error:o}),this.done=!0,this._deferred.reject(new G("layerview:create-error","layerview creation failed",{layer:i,error:o}))}}},Fa=class extends Ce{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Sg,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const n of i)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=ha(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(u2(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,u,p;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,o=m=>{if(m!=null){for(const g of m)if(g){r.add(g);const w=this._layerLayerViewInfoMap.get(g);w&&s?w.start():w||this._recyclingInfoMap.has(g)||n.push(g),"layers"in g&&g.layers&&o(g.layers)}}};for(const m of this._rootCollectionNames)o(qs(this,m));for(const[m,g]of this._layerLayerViewInfoMap)if(!r.has(m)){this._layerLayerViewInfoMap.delete(g.layer);const w=g.tryRecycle(n);w?(this.notifyChange("updating"),this._recyclingInfoMap.set(g.layer,g),w.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(g.layer),this._layerLayerViewInfoMap.set(g.layer,g),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(g.layer),g.destroy(),this._reschedule()})):g.destroy()}for(const[m,g]of this._recyclingInfoMap)r.has(m)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(g.layer),g.destroy());for(const m of n)this._createLayerView(m);this._refreshCollections();const a=[(l=i==null?void 0:i.ground)==null?void 0:l.layers,(u=i==null?void 0:i.basemap)==null?void 0:u.baseLayers,(p=i==null?void 0:i.basemap)==null?void 0:p.referenceLayers,i==null?void 0:i.layers].filter(m=>!!m);r.forEach(m=>"layers"in m&&a.push(m.layers)),this.addHandles(a.map(m=>this._watchUpdatingTracking.addOnCollectionChange(()=>m,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Ss(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Oe(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Us)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),fN(this._recyclingInfoMap),fN(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Wt()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Bke(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(fN(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new G("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,i){var s;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!(r!=null&&r.done))return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in e&&((s=e.layers)!=null&&s.length))&&e.layers.some(o=>this.isCreatingLayerViewsForLayer(o,n))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(qs(this,e),qs(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i&&i.removeAll());let n=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=r,i.at(n)!==a&&i.splice(n,0,a),"layers"in s&&$Fe(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<i.length&&i.splice(n,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new TFe(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(vn(r)||r.name==="cancelled:layerview-create")||pe.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};h([f()],Fa.prototype,"_workPromise",void 0),h([f({readOnly:!0})],Fa.prototype,"_watchUpdatingTracking",void 0),h([f({readOnly:!0})],Fa.prototype,"_layersToLayerViews",null),h([f({readOnly:!0})],Fa.prototype,"_rootCollectionNames",null),h([f()],Fa.prototype,"layerViewImporter",void 0),h([f()],Fa.prototype,"supportsGround",void 0),h([f({readOnly:!0})],Fa.prototype,"updating",null),h([f({readOnly:!0})],Fa.prototype,"updatingRemaining",null),h([f({constructOnly:!0})],Fa.prototype,"view",void 0),Fa=h([A("esri.views.LayerViewManager")],Fa);const EFe=Fa;function kFe(t){return t.createLayerView!==D8.prototype.createLayerView}let Wo=class extends Ce{constructor(e){super(e),this.factor=1.5,this.offset=Xr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};h([f({type:Number})],Wo.prototype,"factor",void 0),h([f({nonNullable:!0})],Wo.prototype,"offset",void 0),h([f()],Wo.prototype,"position",void 0),h([f({type:Number,range:{min:0}})],Wo.prototype,"size",void 0),h([f()],Wo.prototype,"maskUrl",void 0),h([f()],Wo.prototype,"maskEnabled",void 0),h([f()],Wo.prototype,"overlayUrl",void 0),h([f()],Wo.prototype,"overlayEnabled",void 0),h([f({readOnly:!0})],Wo.prototype,"version",null),h([f({type:Boolean})],Wo.prototype,"visible",void 0),Wo=h([A("esri.views.Magnifier")],Wo);const lpe=Wo;let xg=class{constructor(e){this._observable=new p2,this._map=new Map(e)}get size(){return rt(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return rt(this._observable),this._map.entries()}forEach(e,i){rt(this._observable),this._map.forEach((r,n)=>e.call(i,r,n,this),i)}get(e){return rt(this._observable),this._map.get(e)}has(e){return rt(this._observable),this._map.has(e)}keys(){return rt(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return rt(this._observable),this._map.values()}[Symbol.iterator](){return rt(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var qF;let hg=qF=class extends K{constructor(t){super(t),this.name=null,this.code=null}clone(){return new qF({name:this.name,code:this.code})}};h([f({type:String,json:{write:{isRequired:!0}}})],hg.prototype,"name",void 0),h([f({type:[String,Number],json:{write:{isRequired:!0}}})],hg.prototype,"code",void 0),hg=qF=h([A("esri.layers.support.CodedValue")],hg);const CFe=new nt({inherited:"inherited",codedValue:"coded-value",range:"range"});let l_=class extends K{constructor(e){super(e),this.name=null,this.type=null}};h([f({type:String,json:{write:!0}})],l_.prototype,"name",void 0),h([Re(CFe),f({json:{write:{isRequired:!0}}})],l_.prototype,"type",void 0),l_=h([A("esri.layers.support.Domain")],l_);const aR=l_;var GF;let u_=GF=class extends aR{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(r=>(String(r.code)===i&&(e=r.name),!!e))}return e}clone(){return new GF({codedValues:q(this.codedValues),name:this.name})}};h([f({type:[hg],json:{write:{isRequired:!0}}})],u_.prototype,"codedValues",void 0),h([Re({codedValue:"coded-value"})],u_.prototype,"type",void 0),u_=GF=h([A("esri.layers.support.CodedValueDomain")],u_);const lR=u_;var ZF;let qC=ZF=class extends aR{constructor(t){super(t),this.type="inherited"}clone(){return new ZF}};h([Re({inherited:"inherited"})],qC.prototype,"type",void 0),qC=ZF=h([A("esri.layers.support.InheritedDomain")],qC);const upe=qC;var HF;let Fv=HF=class extends aR{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new HF({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};h([f({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],Fv.prototype,"maxValue",void 0),h([f({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],Fv.prototype,"minValue",void 0),h([Re({range:"range"})],Fv.prototype,"type",void 0),Fv=HF=h([A("esri.layers.support.RangeDomain")],Fv);const cpe=Fv,hpe={key:"type",base:aR,typeMap:{range:cpe,"coded-value":lR,inherited:upe}};function uR(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return cpe.fromJSON(t);case"codedValue":return lR.fromJSON(t);case"inherited":return upe.fromJSON(t)}return null}const t9=new nt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var WF;const MFe=new nt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let hs=WF=class extends K{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?MFe.fromJSON(i.fieldValueType):null}clone(){var t;return new WF({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((t=this.domain)==null?void 0:t.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};h([f({type:String,json:{write:!0}})],hs.prototype,"alias",void 0),h([f({type:[String,Number],json:{write:{allowNull:!0}}})],hs.prototype,"defaultValue",void 0),h([f()],hs.prototype,"description",void 0),h([ve("description")],hs.prototype,"readDescription",null),h([f({types:hpe,json:{read:{reader:uR},write:!0}})],hs.prototype,"domain",void 0),h([f({type:Boolean,json:{write:!0}})],hs.prototype,"editable",void 0),h([f({type:kt,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],hs.prototype,"length",void 0),h([f({type:String,json:{write:!0}})],hs.prototype,"name",void 0),h([f({type:Boolean,json:{write:!0}})],hs.prototype,"nullable",void 0),h([Re(t9)],hs.prototype,"type",void 0),h([f()],hs.prototype,"valueType",void 0),h([ve("valueType",["description"])],hs.prototype,"readValueType",null),h([f({type:Boolean,json:{read:!1}})],hs.prototype,"visible",void 0),hs=WF=h([A("esri.layers.support.Field")],hs);const cR=hs;var XF;let jv=XF=class extends K{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new XF({mapLayerId:t,gdbVersion:e})}};h([Re({mapLayer:"map-layer"}),f({json:{write:{isRequired:!0}}})],jv.prototype,"type",void 0),h([f({type:kt,json:{write:{isRequired:!0}}})],jv.prototype,"mapLayerId",void 0),h([f({type:String,json:{write:!0}})],jv.prototype,"gdbVersion",void 0),jv=XF=h([A("esri.layers.support.source.MapLayerSource")],jv);var YF;let Eh=YF=class extends K{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new YF(s)}};h([Re({queryTable:"query-table"}),f({json:{write:{isRequired:!0}}})],Eh.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],Eh.prototype,"workspaceId",void 0),h([f({type:String,json:{write:!0}})],Eh.prototype,"query",void 0),h([f({type:String,json:{write:!0}})],Eh.prototype,"oidFields",void 0),h([f({type:Je,json:{write:!0}})],Eh.prototype,"spatialReference",void 0),h([Re(DIe)],Eh.prototype,"geometryType",void 0),Eh=YF=h([A("esri.layers.support.source.QueryTableDataSource")],Eh);var JF;let zv=JF=class extends K{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new JF({workspaceId:t,dataSourceName:e})}};h([Re({raster:"raster"}),f({json:{write:{isRequired:!0}}})],zv.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],zv.prototype,"dataSourceName",void 0),h([f({type:String,json:{write:!0}})],zv.prototype,"workspaceId",void 0),zv=JF=h([A("esri.layers.support.source.RasterDataSource")],zv);var KF;let my=KF=class extends K{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new KF({workspaceId:t,gdbVersion:e,dataSourceName:i})}};h([Re({table:"table"}),f({json:{write:{isRequired:!0}}})],my.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],my.prototype,"workspaceId",void 0),h([f({type:String,json:{write:!0}})],my.prototype,"gdbVersion",void 0),h([f({type:String,json:{write:!0}})],my.prototype,"dataSourceName",void 0),my=KF=h([A("esri.layers.support.source.TableDataSource")],my);var ej,tj;const AFe=dt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Xo=ej=class extends K{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return mY()(t,e,i)}castLeftTableSource(t){return fu(ij(),t)}readRightTableSource(t,e,i){return mY()(t,e,i)}castRightTableSource(t){return fu(ij(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new ej(s)}};h([Re({joinTable:"join-table"}),f({json:{write:{isRequired:!0}}})],Xo.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],Xo.prototype,"leftTableKey",void 0),h([f({type:String,json:{write:!0}})],Xo.prototype,"rightTableKey",void 0),h([f({json:{write:!0}})],Xo.prototype,"leftTableSource",void 0),h([ve("leftTableSource")],Xo.prototype,"readLeftTableSource",null),h([Rt("leftTableSource")],Xo.prototype,"castLeftTableSource",null),h([f({json:{write:!0}})],Xo.prototype,"rightTableSource",void 0),h([ve("rightTableSource")],Xo.prototype,"readRightTableSource",null),h([Rt("rightTableSource")],Xo.prototype,"castRightTableSource",null),h([Re(AFe)],Xo.prototype,"joinType",void 0),Xo=ej=h([A("esri.layers.support.source.JoinTableDataSource")],Xo);let _N=null;function mY(){return _N||(_N=wO({types:ij()})),_N}let xN=null;function ij(){return xN||(xN={key:"type",base:null,typeMap:{"data-layer":su,"map-layer":jv}}),xN}const IFe={key:"type",base:null,typeMap:{"join-table":Xo,"query-table":Eh,raster:zv,table:my}};let su=tj=class extends K{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new tj({fields:t,dataSource:e})}};h([Re({dataLayer:"data-layer"}),f({json:{write:{isRequired:!0}}})],su.prototype,"type",void 0),h([f({type:[cR],json:{write:!0}})],su.prototype,"fields",void 0),h([f({types:IFe,json:{write:!0}})],su.prototype,"dataSource",void 0),su=tj=h([A("esri.layers.support.source.DataLayerSource")],su),su.from=_r(su);let yy=class extends ft.ClonableMixin(K){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};h([f({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],yy.prototype,"onFields",void 0),h([f({type:String,json:{write:!0}})],yy.prototype,"operator",void 0),h([f({type:String,json:{write:!0}})],yy.prototype,"searchTerm",void 0),h([f({type:String,json:{write:!0}})],yy.prototype,"searchType",void 0),yy=h([A("esri.rest.support.FullTextSearch")],yy);const PFe=yy;var rj;const yY=new nt({upperLeft:"upper-left",lowerLeft:"lower-left"});let gy=rj=class extends K{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new rj(q({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};h([f({type:oi,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],gy.prototype,"extent",void 0),h([f({type:["view","edit"],json:{write:!0}})],gy.prototype,"mode",void 0),h([f({type:String,json:{read:yY.read,write:yY.write}})],gy.prototype,"originPosition",void 0),h([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],gy.prototype,"tolerance",void 0),gy=rj=h([A("esri.rest.support.QuantizationParameters")],gy);const dpe=gy,RFe=new nt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var nj;const gY=new nt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Bl=nj=class extends K{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=q(t))}clone(){return new nj({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:q(this.statisticParameters)})}};h([f({type:Number,json:{write:!0}})],Bl.prototype,"maxPointCount",void 0),h([f({type:Number,json:{write:!0}})],Bl.prototype,"maxRecordCount",void 0),h([f({type:Number,json:{write:!0}})],Bl.prototype,"maxVertexCount",void 0),h([f({type:String,json:{write:!0}})],Bl.prototype,"onStatisticField",void 0),h([f({type:String,json:{write:!0}})],Bl.prototype,"outStatisticFieldName",void 0),h([f({type:String,json:{read:{source:"statisticType",reader:gY.read},write:{target:"statisticType",writer:gY.write}}})],Bl.prototype,"statisticType",void 0),h([f({type:Object})],Bl.prototype,"statisticParameters",void 0),h([we("statisticParameters")],Bl.prototype,"writeStatisticParameters",null),Bl=nj=h([A("esri.rest.support.StatisticDefinition")],Bl);const LFe=Bl;var GC;const NFe=new nt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let it=GC=class extends K{static from(t){return vO(GC,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const r in t){const n=t[r];Array.isArray(n)?i[r]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?i[r]=n.getTime():i[r]=n}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new GC(q({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};it.MAX_MAX_RECORD_COUNT_FACTOR=5,h([f({json:{write:!0}})],it.prototype,"aggregateIds",void 0),h([f({type:Boolean,json:{write:!0}})],it.prototype,"cacheHint",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],it.prototype,"compactGeometryEnabled",void 0),h([f({json:{write:!0}})],it.prototype,"datumTransformation",void 0),h([Rt("datumTransformation")],it.prototype,"castDatumTransformation",null),h([f({type:Boolean,json:{default:!1,write:!0}})],it.prototype,"defaultSpatialReferenceEnabled",void 0),h([f({type:Number,json:{write:!0}})],it.prototype,"distance",void 0),h([f({type:su,json:{write:!0}})],it.prototype,"dynamicDataSource",void 0),h([f({type:String,json:{write:!0}})],it.prototype,"formatOf3DObjects",void 0),h([f({type:[PFe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],it.prototype,"fullText",void 0),h([f({type:String,json:{write:!0}})],it.prototype,"gdbVersion",void 0),h([f({types:_O,json:{read:bd,write:!0}})],it.prototype,"geometry",void 0),h([f({type:Number,json:{write:!0}})],it.prototype,"geometryPrecision",void 0),h([f({type:[String],json:{write:!0}})],it.prototype,"groupByFieldsForStatistics",void 0),h([f({type:String,json:{write:!0}})],it.prototype,"having",void 0),h([f({type:Date})],it.prototype,"historicMoment",void 0),h([we("historicMoment")],it.prototype,"writeHistoricMoment",null),h([f({type:Number,json:{write:!0}})],it.prototype,"maxAllowableOffset",void 0),h([f({type:Number,cast:t=>t<1?1:t>it.MAX_MAX_RECORD_COUNT_FACTOR?it.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],it.prototype,"maxRecordCountFactor",void 0),h([f({type:["xyFootprint"],json:{write:!0}})],it.prototype,"multipatchOption",void 0),h([f({type:Number,json:{read:{source:"resultRecordCount"}}})],it.prototype,"num",void 0),h([f({json:{write:!0}})],it.prototype,"objectIds",void 0),h([f({type:[String],json:{write:!0}})],it.prototype,"orderByFields",void 0),h([f({type:[String],json:{write:!0}})],it.prototype,"outFields",void 0),h([f({type:Je,json:{name:"outSR",write:!0}})],it.prototype,"outSpatialReference",void 0),h([f({type:[LFe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],it.prototype,"outStatistics",void 0),h([f({json:{write:!0}})],it.prototype,"parameterValues",void 0),h([we("parameterValues")],it.prototype,"writeParameterValues",null),h([f({type:Ot,json:{write:!0}})],it.prototype,"pixelSize",void 0),h([f({type:dpe,json:{write:!0}})],it.prototype,"quantizationParameters",void 0),h([f({type:[Object],json:{write:!0}})],it.prototype,"rangeValues",void 0),h([f({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],it.prototype,"relationParameter",void 0),h([f({type:String,json:{write:!0}})],it.prototype,"resultType",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],it.prototype,"returnCentroid",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],it.prototype,"returnDistinctValues",void 0),h([f({type:Boolean,json:{default:!0,write:!0}})],it.prototype,"returnExceededLimitFeatures",void 0),h([f({type:Boolean,json:{write:!0}})],it.prototype,"returnGeometry",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],it.prototype,"returnQueryGeometry",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],it.prototype,"returnM",void 0),h([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],it.prototype,"returnZ",void 0),h([f({type:Boolean,json:{write:!0}})],it.prototype,"returnTrueCurves",void 0),h([f({type:Je,json:{write:!0}})],it.prototype,"sourceSpatialReference",void 0),h([Re(RFe,{ignoreUnknown:!1,name:"spatialRel"})],it.prototype,"spatialRelationship",void 0),h([f({type:Number,json:{read:{source:"resultOffset"}}})],it.prototype,"start",void 0),h([we("start"),we("num")],it.prototype,"writeStart",null),h([f({type:String,json:{write:!0}})],it.prototype,"sqlFormat",void 0),h([f({type:String,json:{write:!0}})],it.prototype,"text",void 0),h([f({type:mn,json:{write:!0}})],it.prototype,"timeExtent",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],it.prototype,"timeReferenceUnknownClient",void 0),h([Re(NFe,{ignoreUnknown:!1}),f({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],it.prototype,"units",void 0),h([f({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],it.prototype,"where",void 0),h([we("where")],it.prototype,"writeWhere",null),it=GC=h([A("esri.rest.support.Query")],it);const Mc=it;function UE(t){return!!(t!=null&&typeof t=="object"&&"createQuery"in t&&t.createQuery&&"on"in t&&t.on)}let qu=class extends ul.EventedAccessor{constructor(e){super(e),this._selectionMap=new xg,this._sources=new Te,this._trashCan=[],this._layerEditHandles=new Te,this._vizTaskId=0,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([Oe(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Ss(()=>this.sources,"change",i=>{const r=this._selectionMap;for(const n of i.removed)r.delete(n);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const e=new Te;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(i=>"sublayers"in i&&i.sublayers?i.sublayers:null).forEach(i=>{(UE(i)&&!SNe(i)||Xa(i))&&e.add(i)}),this.sources=e)})}destroy(){this._layerEditHandles.drain(qi)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){wd(e,this._sources)}async getSelectedFeatures(e,i={},r="layerView"){const{view:n,selections:s}=this,o=(e!==void 0?s.filter(a=>e.includes(a.layer)):s).filter(a=>a.selection.length>0).map(async a=>{const{layer:l,selection:u}=a,p=Xa(l)?l.parent:l;if(p==null||!bY(p))return null;if(r==="layer")return wY(p,u,i);if(vY(p))return null;const m=await n.whenLayerView(p).catch(()=>null);return m?wY(m,u,i):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(e){const i=new Map;for(const[s,o]of this._selectionMap)i.set(s,[...o.selection]);let r=!1;const n=e.current.concat(e.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(UE(o)||Xa(o))&&a!==null){const l=c2(i,o,()=>[]);l.includes(a)||(l.push(a),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(UE(o)||Xa(o))&&a!==null){const l=i.get(o),u=l==null?void 0:l.indexOf(a);u!==void 0&&u>=0&&(l==null||l.splice(u,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,u]of i){const p=s.get(l);p!==void 0&&o.push(p),s.set(l,{selection:u}),a.push({layer:l,selection:u,...CH(p!==void 0?p.selection:[],u)})}this._onSelectionChange(a)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){const i=this._selectionMap.get(e);return i==null?void 0:i.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),n=r!==void 0?[...r.selection]:[];for(const s of i)n.includes(s)||n.push(s);this._setSelection(e,n)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const n=[];for(const s of r.selection)i.includes(s)||n.push(s);this._setSelection(e,n)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const n=new Set(r.selection),s=new Set(i),o=Cke(n,s);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:e,view:i,_selectionMap:r,showHighlight:n}=this,s=this._vizTaskId;for(const a of e){const l=r.get(a),u=Xa(a)?a.parent:a;if(u!=null&&bY(u)){if(vY(u))continue;i.whenLayerView(u).then(p=>{var m;(m=l==null?void 0:l.highlightHandle)==null||m.remove(),l!=null&&n&&s===this._vizTaskId&&"highlight"in p&&typeof p.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=p.highlight(l.selection,this.highlightName))}).catch(()=>{var p;(p=l==null?void 0:l.highlightHandle)==null||p.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(qi);for(const e of this.sources){const i=Xa(e)?e.parent:e;if(i!=null&&UE(i)){const r=i.on("edits",n=>{this._handleEditChanges(n,e)});this._layerEditHandles.push(r)}}}_handleEditChanges(e,i){if(e.deletedFeatures!==void 0&&e.deletedFeatures.length>0&&this._selectionMap.has(i)){const r=e.deletedFeatures.filter(n=>n.error==null).map(n=>n.objectId).filter(pn);this.removeFromSelection(i,r)}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!VFe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const n={layer:e,selection:[...i],...CH(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};h([f({readOnly:!0,nonNullable:!0})],qu.prototype,"selections",null),h([f({readOnly:!0,nonNullable:!0})],qu.prototype,"count",null),h([f({constructOnly:!0,nonNullable:!0})],qu.prototype,"view",void 0),h([f({readOnly:!0,nonNullable:!0})],qu.prototype,"hasSelection",null),h([f()],qu.prototype,"showHighlight",void 0),h([f()],qu.prototype,"sources",null),h([f()],qu.prototype,"highlightName",void 0),qu=h([A("esri.views.SelectionManager")],qu);const vY=t=>{var e;return Xa(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},DFe=t=>t.layer!==void 0,bY=t=>(t==null?void 0:t.when)!==void 0,VFe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},wY=async(t,e,i={})=>{let r;if(DFe(t)){const n=t;r=n===void 0?null:await n.queryFeatures(new Mc({...i,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const n=t;r=n===void 0?null:await n.queryFeatures(new Mc({...i,objectIds:e})).then(s=>({data:s,layer:n}))}return r},FFe=qu;let c_=class extends ft.ClonableMixin(Ce){constructor(e){super(e),this.accentColor=new xe([255,127,0]),this.textColor=new xe([255,255,255])}};h([f({type:xe,nonNullable:!0})],c_.prototype,"accentColor",void 0),h([f({type:xe,nonNullable:!0})],c_.prototype,"textColor",void 0),c_=h([A("esri.views.Theme")],c_);const sj=c_;var OY;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(OY||(OY={}));const ppe=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],fpe={};function mpe(t){return!!fpe[t]}function jFe(t){for(const e of t)if(!mpe(e))return!1;return!0}ppe.forEach(t=>{fpe[t]=!0});let ype=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!jFe(s))return s.some(mpe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:n=r,n=n??bc.DEFAULT;const l=this._createUniqueGroupName(),u=new zFe(this.view,s,a,o);this._handlers.set(l,{handler:u,priority:n});for(const p of s){const m=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,m+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],n),Bt(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},zFe=class extends bn{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,o=>n(BFe(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>n(qFe(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>n(GFe(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>n(ZFe(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>n(HFe(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>n(WFe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>n(XFe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>n(sS(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>n(sS(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>n(sS(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>n(YFe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>n(JFe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>n(sS(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>n(sS(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{n(KFe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{n(UFe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{n(QFe(o))})}}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,u=i.buttons,{cancelable:p,timestamp:m}=e,g={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:g,pointerType:o,button:a,buttons:u,radius:i.radius,angle:Fae(i.angle),native:l,timestamp:m,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:w=>e.async(w),preventDefault:()=>e.preventDefault()}}};function UFe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function QFe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function BFe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:p}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:p,screenPoint:Xr(s,o),mapPoint:I2(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function qFe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:p}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:I2(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function GFe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:p,timestamp:m}=e;return{type:"immediate-click",pointerId:u,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:m,mapPoint:I2(t,s,o),eventId:l,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}function ZFe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:p,timestamp:m}=e;return{type:"immediate-double-click",pointerId:u,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:m,mapPoint:I2(t,s,o),eventId:l,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}function HFe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:u}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:u,mapPoint:I2(t,s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}function I2(t,e,i){return t.toMap(Xr(e,i),{exclude:[]})}function WFe(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:o=>t.async(o),preventDefault:()=>t.preventDefault()}}function XFe(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:n}=t;return{type:"key-up",key:e,native:i,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:s=>t.async(s),preventDefault:()=>t.preventDefault()}}function sS(t,e){const{x:i,y:r,button:n,buttons:s,native:o,eventId:a}=t.data,l=o.pointerId,u=o.pointerType,{cancelable:p,timestamp:m}=t;return{type:e,x:i,y:r,pointerId:l,pointerType:u,button:n,buttons:s,native:o,timestamp:m,eventId:a,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}function YFe(t){const{x:e,y:i,buttons:r,native:n,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,u=t.data.action,p={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:m,timestamp:g}=t;return{type:"pointer-drag",x:e,y:i,pointerId:a,pointerType:l,button:o,buttons:r,action:u,origin:p,native:n,timestamp:g,eventId:s,cancelable:m,stopPropagation:()=>t.stopPropagation(),async:w=>t.async(w),preventDefault:()=>t.preventDefault()}}function JFe(t){const{cancelable:e,data:i,timestamp:r}=t,{x:n,y:s,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),async:l=>t.async(l),preventDefault:()=>t.preventDefault()}}function KFe(t){const{action:e,state:i,device:r}=t.data,{cancelable:n,timestamp:s}=t,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:a,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:l=>t.async(l),preventDefault:()=>t.preventDefault()}}var p$,SY,_Y;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(p$||(p$={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(SY||(SY={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(_Y||(_Y={}));function eje(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return pe.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function oj(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(p$.USER)&&t.getEditableFlag(p$.MANAGER)}function Gu(t){return Xr(t.x,t.y)}function gpe(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?Xr(e.clientX-i.left,e.clientY-i.top):Xr(0,0)}function vpe(t,e){return e instanceof Event?gpe(t,e):Gu(e)}function bpe(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let tje=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":$Y(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!TY(e))break;const n=Gu(e),s=av(n,e.pointerType,i.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!TY(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=Gu(e);a.x=Po(a.x,0,i.view.width),a.y=Po(a.y,0,i.view.height);const l=n.start,u=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,u?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,u&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=Gu(e),s=av(n,e.pointerType,i.forEachTool);if(ije(e)||i.forEachTool(u=>{if((s==null||s.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let p=!1;u.manipulators.forEach(({manipulator:m})=>{m.selected&&(m.selected=!1,p=!0)}),p&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),$N(o,r);break}case"click":{const n=Gu(e),s=av(n,e.pointerType,i.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const n=Gu(e),s=av(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),$N(o,r);break}case"immediate-double-click":{const n=Gu(e),s=av(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&$N(o,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Gu(i)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){var n;const r=(n=this._grabbedManipulators.get(e.pointerId))==null?void 0:n.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Gu(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=xY(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=xY(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),e(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),o=SEe(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},n=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},p)=>{o(a,l)&&(this._grabbedManipulators.delete(p),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Xr(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!$Y(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Gu(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){var a;let s=av(e,r,n);const o=(a=this._hoveredManipulators.get(i))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}};function xY(t){for(const{manipulator:e}of t.values())if(e!=null&&e.interactive){if(e.grabbing&&e.grabCursor)return e.grabCursor;if(e.cursor)return e.cursor}return null}function av(t,e,i){let r=null;return i(n=>{if(n.manipulators==null||!oj(n))return!1;const s=n.manipulators.intersect(t,e);return s!=null&&(r={tool:n,manipulator:s},!0)}),r}function $Y(t){return t==="mouse"}function TY(t){return t.pointerType!=="mouse"||t.button===0}function ije(t){return!!t.native.shiftKey}function $N(t,e){t!=null&&t.consumesClicks&&e()}const EY="attached",TN="tools",rje=1e3;let Zu=class extends Ce{constructor(e){super(e),this._updatingHandles=new Sg,this._clock=gO,this._manipulatorState=new tje,this.tools=new Te,this.cursor=null,this._interacting=!1,this._interactingTimeout=rje,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(ppe,e=>{this._handleInputEvent(e)},bc.TOOL),...eje(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void pe.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=oj(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=qi(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var e;this.view.type==="3d"?this.addHandles([Oe(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i)))],EY):this.addHandles(Oe(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(EY),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!i&&n.visible&&n.handleInputEvent(r)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(TN),this._forEachTool(e=>{if(e instanceof Ce){const i=Oe(()=>[e.cursor,e.visible,e.editable],()=>{oj(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,TN)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],TN)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,p$.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};h([f({constructOnly:!0,nonNullable:!0})],Zu.prototype,"view",void 0),h([f({value:null})],Zu.prototype,"activeTool",null),h([f({readOnly:!0,type:Te})],Zu.prototype,"tools",void 0),h([f({readOnly:!0})],Zu.prototype,"cursor",void 0),h([f({readOnly:!0})],Zu.prototype,"updating",null),h([f()],Zu.prototype,"_interacting",void 0),h([f({readOnly:!0})],Zu.prototype,"interacting",null),Zu=h([A("esri.views.ToolViewManager")],Zu);const nje=new xe("cyan"),sje=1,oje=.25,aje=new xe("black"),lje=.4,uje=.2,hbt=.25,wpe="default",cje="temporary",hje=new xe("yellow");var aj;let Yo=aj=class extends Ce{constructor(t){super(t),this.name=wpe,this.color=nje.clone(),this.haloColor=null,this.haloOpacity=sje,this.fillOpacity=oje,this.shadowColor=aje.clone(),this.shadowOpacity=lje,this.shadowDifference=uje,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){var t,e;return new aj({...this,color:this.color.clone(),haloColor:(t=this.haloColor)==null?void 0:t.clone(),shadowColor:(e=this.shadowColor)==null?void 0:e.clone()})}assignFrom(t){var e;this.color=t.color.clone(),this.haloColor=(e=t.haloColor)==null?void 0:e.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};h([f({type:String,constructOnly:!0,nonNullable:!0})],Yo.prototype,"name",void 0),h([f({type:xe,nonNullable:!0})],Yo.prototype,"color",void 0),h([f({type:xe})],Yo.prototype,"haloColor",void 0),h([f({nonNullable:!0})],Yo.prototype,"haloOpacity",void 0),h([f({nonNullable:!0})],Yo.prototype,"fillOpacity",void 0),h([f({type:xe,nonNullable:!0})],Yo.prototype,"shadowColor",void 0),h([f({nonNullable:!0})],Yo.prototype,"shadowOpacity",void 0),h([f({nonNullable:!0})],Yo.prototype,"shadowDifference",void 0),h([f({nonNullable:!0})],Yo.prototype,"haloWidth",void 0),h([f({nonNullable:!0})],Yo.prototype,"haloBlur",void 0),Yo=aj=h([A("esri.views.support.HighlightOptions")],Yo);const xf=Yo;function dje(){return new(Te.ofType(xf))([new xf({name:wpe}),new xf({name:cje,color:hje})])}let Uv=class extends Ce{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":pje.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return fje[this.deviceType]}};h([f({nonNullable:!0,readOnly:!0})],Uv.prototype,"nativeIndex",void 0),h([f({type:String,readOnly:!0})],Uv.prototype,"deviceType",null),h([f({type:Number,readOnly:!0})],Uv.prototype,"axisThreshold",null),Uv=h([A("esri.views.input.gamepad.GamepadInputDevice")],Uv);const i9=Uv,pje=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),fje={standard:.15,spacemouse:.025,unknown:0};let h_=class extends Ce{constructor(...e){super(...e),this.devices=new Te,this.enabledFocusMode="document"}};h([f({type:Te.ofType(i9),readOnly:!0})],h_.prototype,"devices",void 0),h([f({type:["document","view","none"]})],h_.prototype,"enabledFocusMode",void 0),h_=h([A("esri.views.input.gamepad.GamepadSettings")],h_);const mje=h_;let ZC=class extends Ce{constructor(){super(...arguments),this.gamepad=new mje}};h([f({readOnly:!0})],ZC.prototype,"gamepad",void 0),ZC=h([A("esri.views.input.Input")],ZC);const yje=ZC,Ope=()=>Ht.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,EN=()=>f({type:["pan","rotate","zoom","none"],nonNullable:!0});let vy=class extends Ce{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};h([EN()],vy.prototype,"dragPrimary",void 0),h([EN()],vy.prototype,"dragSecondary",void 0),h([EN()],vy.prototype,"dragTertiary",void 0),h([f({type:["zoom","none"],nonNullable:!0})],vy.prototype,"mouseWheel",void 0),vy=h([A("esri.views.navigation.NavigationActionMap")],vy);const r9=vy;let Cp=class extends Ce{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};h([f({type:Boolean,nonNullable:!0})],Cp.prototype,"enabled",void 0),h([f({type:i9})],Cp.prototype,"device",void 0),h([f({type:["pan","zoom"],nonNullable:!0})],Cp.prototype,"mode",void 0),h([f({type:["forward-down","forward-up"],nonNullable:!0})],Cp.prototype,"tiltDirection",void 0),h([f({type:Number,nonNullable:!0})],Cp.prototype,"velocityFactor",void 0),Cp=h([A("esri.views.navigation.gamepad.GamepadSettings")],Cp);const Spe=Cp;let Mp=class extends Ce{constructor(e){super(e),this.actionMap=new r9,this.browserTouchPanEnabled=!0,this.gamepad=new Spe,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!Ope()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){wEe(pe.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};h([f({type:r9,nonNullable:!0})],Mp.prototype,"actionMap",void 0),h([f({type:Boolean})],Mp.prototype,"browserTouchPanEnabled",void 0),h([f({type:Spe,nonNullable:!0})],Mp.prototype,"gamepad",void 0),h([f({type:Boolean})],Mp.prototype,"momentumEnabled",void 0),h([f({type:Boolean})],Mp.prototype,"mouseWheelZoomEnabled",null),Mp=h([A("esri.views.navigation.Navigation")],Mp);const hR=Mp;function vbt(t,e,i){const r=_pe(t),n=e,s=gje(r,n,i);if(r){const o=_2.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new G("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new G("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!vje(t)||s===vo.Unsupported)return new G("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case vo.Units:{const o=(r==null?void 0:r.heightUnit)||"unknown",a=(n==null?void 0:n.heightUnit)||"unknown",l=new G("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new G("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case vo.HeightModel:{const o=(r==null?void 0:r.heightModel)||"unknown",a=(n==null?void 0:n.heightModel)||"unknown",l=new G("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new G("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case vo.CRS:{const o=(r==null?void 0:r.vertCRS)||"unknown",a=(n==null?void 0:n.vertCRS)||"unknown",l=new G("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new G("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}}return null}function gje(t,e,i){if(!kY(t)||!kY(e))return vo.Unsupported;if(t==null||e==null)return vo.Ok;if(!i&&t.heightUnit!==e.heightUnit)return vo.Units;if(t.heightModel!==e.heightModel)return vo.HeightModel;switch(t.heightModel){case"gravity-related-height":return vo.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?vo.Ok:vo.CRS;default:return vo.Unsupported}}var vo;function kY(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function vje(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!Tpe(t)}function _pe(t){var r;if(t.type==="integrated-mesh-3dtiles")return null;const e=t.url?Ff(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&xpe(t)&&t.heightModelInfo?t.heightModelInfo:Tpe(t)?_2.deriveUnitFromSR(wje,t.spatialReference):null}function xpe(t){return"heightModelInfo"in t}function $pe(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Tpe(t){return $pe(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Epe(t)}function bje(t){return t.layers!=null||Epe(t)||$pe(t)||xpe(t)}function Epe(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(vo||(vo={}));const wje=new _2({heightModel:"gravity-related-height"});var YA;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(YA||(YA={}));let lj,kN=null;async function Oje(t){kN||(kN=J(()=>import("./geometryServiceUtils-CJSnLRc_.js"),[]).then(e=>lj=e)),await kN,rr(t)}async function kpe(t,e,i,r){if(!t)return null;const n=t.spatialReference;return im()||Tc(n,e)?rm(t,e):lj?lj.projectGeometry(t,e,i,r):(await Promise.race([Oje(r),Qf(r)]),kpe(t,e,i,r))}let yi=class extends Ce{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Tw(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,s,o;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,n);s!=null&&(e=s)}return(e==null?void 0:e.length)===1})&&(e==null?void 0:e.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=(s=this.map)==null?void 0:s.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.baseLayers},{layers:e==null?void 0:e.layers}],a=>{var l;return!(!("tileInfo"in a)||!((l=a.tileInfo)!=null&&l.spatialReference.equals(i)))&&(r=a,!0)},a=>"tileInfo"in a);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,n=>{var o,a;const s=_pe(n);return!!s&&(e={heightModelInfo:s,vcsWkid:(o=n.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=n.spatialReference)==null?void 0:a.latestVcsWkid},!0)},n=>bje(n));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of n)e.push({extent:a,layer:r});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Tw(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:d2(async s=>{try{const o=await kpe(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(ca(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const n of e)for(const s of i){if(!n.spatialReference.equals(s.spatialReference))continue;const o=_je(n.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:n.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==YA.Local)&&(e=e.filter(({viewingMode:r})=>r!==YA.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport(n,e);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e,i,r=()=>!0){var s;switch(this._loadMaybe((s=this.map)==null?void 0:s.call(this))){case"loading":return!0;case"failed":return!1}const n=new Sje(r,i);for(const o of e)if(this._collectCollection(o,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{vn(i)}),"loading"):e.loadStatus:"loaded"}};h([f()],yi.prototype,"required",void 0),h([f({constructOnly:!0})],yi.prototype,"map",void 0),h([f({constructOnly:!0})],yi.prototype,"getSpatialReferenceSupport",void 0),h([f()],yi.prototype,"defaultSpatialReference",void 0),h([f()],yi.prototype,"userSpatialReference",void 0),h([f()],yi.prototype,"sourcePreloadCount",void 0),h([f()],yi.prototype,"priorityCollection",void 0),h([f()],yi.prototype,"requiresExtentInSpatialReference",void 0),h([f()],yi.prototype,"suspended",void 0),h([f({readOnly:!0})],yi.prototype,"ready",null),h([f({readOnly:!0})],yi.prototype,"heightModelInfoReady",null),h([f({readOnly:!0})],yi.prototype,"spatialReference",null),h([f({readOnly:!0})],yi.prototype,"extent",null),h([f({readOnly:!0})],yi.prototype,"heightModelInfo",null),h([f({readOnly:!0})],yi.prototype,"vcsWkid",null),h([f({readOnly:!0})],yi.prototype,"latestVcsWkid",null),h([f({readOnly:!0})],yi.prototype,"viewingMode",null),h([f({readOnly:!0})],yi.prototype,"tileInfo",null),h([f({readOnly:!0})],yi.prototype,"mapCollections",null),h([f({readOnly:!0})],yi.prototype,"_spatialReferenceTask",null),h([f({readOnly:!0})],yi.prototype,"_tileInfoTask",null),h([f({readOnly:!0})],yi.prototype,"_heightModelInfoTask",null),h([f({readOnly:!0})],yi.prototype,"_extentCandidatesTask",null),h([f()],yi.prototype,"_extentTask",null),h([f()],yi.prototype,"_projectExtentTask",void 0),yi=h([A("esri.views.support.DefaultsFromMap")],yi);let Sje=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function _je(t,e){return t!=null?e!=null?t===e&&t:t:e}let Qv=class extends Ce{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};h([f()],Qv.prototype,"featureTitleFields",void 0),h([f()],Qv.prototype,"utilityNetworkFields",void 0),h([f()],Qv.prototype,"globalIdField",void 0),Qv=h([A("esri.views.support.RequiredFieldsOptions")],Qv);const xje=Qv;var d_;let Qe=d_=class extends ul.EventedMixin(CO.EsriPromiseMixin(Ce)){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.handles=new mO,this.updatingHandles=new Sg,this.allLayerViews=new i$({getCollections:()=>{var e,i,r;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:Tje}),this.groundView=null,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Ox,this.analyses=new GA,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Te,this.magnifier=new lpe,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new yje,this.navigation=new hR,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new ype(this),this.persistableViewModels=new Te,this.requiredFieldsOptions=new xje,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(Oe(()=>this.preconditionsReady,e=>{var r,n;const i=this.ready;if(e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,d_.views.add(this)):(this._lockedSpatialReference=null,d_.views.remove(this)),this.notifyChange("spatialReference"),!e&&i)(r=this.toolViewManager)==null||r.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(e&&!i){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new G("startup-error",null,s)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},mu))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,l0(()=>this.ready)))),this.basemapView=new _Fe({view:this}),this.layerViewManager=new EFe({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new Zu({view:this}),this.selectionManager=new FFe({view:this}),this.addHandles([Kn(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{pe.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),Oe(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},Us),Oe(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},mu),Oe(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},Us)])}destroy(){var t,e;this.destroyed||(d_.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=bi(this.graphics),this.analyses=bi(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),bi(this.analysisViewManager),this.toolViewManager=bi(this.toolViewManager),this.layerViewManager=bi(this.layerViewManager),this.selectionManager=bi(this.selectionManager),this.basemapView=bi(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=bi(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return pe.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new yi({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(t,e)=>this.getSpatialReferenceSupport(t,e),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??dje()}set highlights(t){this._set("highlights",wd(t,this._get("highlights"),Te.ofType(xf)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||fa.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(pe.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),fa.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",t))}get readyState(){var t,e,i,r;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((t=this.defaultsFromMap)==null?void 0:t.ready)??!1)&&!this.spatialReference){const n=!("loaded"in this.map)||this.map.loaded,s=this.map.ground.loaded,o=((e=this.map.basemap)==null?void 0:e.loaded)??!0;return n&&o&&s&&!((i=this.map)!=null&&i.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=d2(a=>sae(te("view-readyState-waiting-delay"),null,a)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(r=this._readyStateWaitingTask)!=null&&r.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=Tw(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var e,i;const t=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)){const r=t.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return t}set spatialReference(t){const e=!yn(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(t){this._userTimeExtent=t}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??yu}set timeZone(t){this._userTimeZone=t,l3e(t)||pe.getLogger(this).warn("#timeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){var t;return((t=this.toolViewManager)==null?void 0:t.cursor)??this._cursor??"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new sj}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(t){throw new G("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport(t)!=null}when(t,e){return this.isResolved()&&!this.ready&&pe.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Kn(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Qe.views=new Te,h([f()],Qe.prototype,"_userSpatialReference",void 0),h([f()],Qe.prototype,"activeTool",null),h([f({readOnly:!0})],Qe.prototype,"allLayerViews",void 0),h([f()],Qe.prototype,"groundView",void 0),h([f()],Qe.prototype,"animation",null),h([f()],Qe.prototype,"basemapView",void 0),h([f()],Qe.prototype,"center",null),h([f()],Qe.prototype,"defaultsFromMapSettings",null),h([f()],Qe.prototype,"defaultsFromMap",null),h([f()],Qe.prototype,"displayFilterEnabled",void 0),h([f()],Qe.prototype,"fatalError",void 0),h([f({type:oi})],Qe.prototype,"extent",null),h([f(JX(Ox,"graphics"))],Qe.prototype,"graphics",void 0),h([f(JX(GA,"analyses"))],Qe.prototype,"analyses",void 0),h([f({readOnly:!0,type:_2})],Qe.prototype,"heightModelInfo",null),h([f({type:Te.ofType(xf)})],Qe.prototype,"highlights",null),h([f({readOnly:!0})],Qe.prototype,"interacting",null),h([f({readOnly:!0})],Qe.prototype,"navigating",null),h([f({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Qe.prototype,"preconditionsReady",null),h([f({readOnly:!0})],Qe.prototype,"typeSpecificPreconditionsReady",void 0),h([f({type:Te,readOnly:!0})],Qe.prototype,"layerViews",void 0),h([f()],Qe.prototype,"resolution",null),h([f({type:lpe})],Qe.prototype,"magnifier",void 0),h([f({value:null,type:Khe})],Qe.prototype,"map",null),h([f()],Qe.prototype,"padding",void 0),h([f({readOnly:!0})],Qe.prototype,"ready",void 0),h([f()],Qe.prototype,"_readyStateWaitingTask",void 0),h([f({readOnly:!0})],Qe.prototype,"readyState",null),h([f({type:Je})],Qe.prototype,"spatialReference",null),h([f()],Qe.prototype,"stationary",null),h([f({readOnly:!0})],Qe.prototype,"supportsGround",void 0),h([f({type:mn})],Qe.prototype,"timeExtent",null),h([f({type:String,nonNullable:!0})],Qe.prototype,"timeZone",null),h([f()],Qe.prototype,"tools",null),h([f()],Qe.prototype,"toolViewManager",void 0),h([f({readOnly:!0})],Qe.prototype,"type",void 0),h([f({type:Number})],Qe.prototype,"scale",void 0),h([f({readOnly:!0})],Qe.prototype,"updating",void 0),h([f({readOnly:!0})],Qe.prototype,"initialExtentRequired",void 0),h([f({readOnly:!0})],Qe.prototype,"initialExtent",null),h([f()],Qe.prototype,"cursor",null),h([f({readOnly:!0})],Qe.prototype,"input",void 0),h([f({type:hR,nonNullable:!0})],Qe.prototype,"navigation",void 0),h([f()],Qe.prototype,"layerViewManager",void 0),h([f()],Qe.prototype,"analysisViewManager",void 0),h([f()],Qe.prototype,"selectionManager",void 0),h([f()],Qe.prototype,"width",void 0),h([f()],Qe.prototype,"height",void 0),h([f({readOnly:!0})],Qe.prototype,"resizing",void 0),h([f({value:null,readOnly:!0})],Qe.prototype,"size",null),h([f({readOnly:!0})],Qe.prototype,"suspended",void 0),h([f({readOnly:!0})],Qe.prototype,"viewEvents",void 0),h([f({readOnly:!0})],Qe.prototype,"persistableViewModels",void 0),h([f()],Qe.prototype,"_isValid",void 0),h([f()],Qe.prototype,"_readyCycleForced",void 0),h([f()],Qe.prototype,"_lockedSpatialReference",void 0),h([f()],Qe.prototype,"_userTimeZone",void 0),h([f()],Qe.prototype,"_lockedTimeZone",void 0),h([f()],Qe.prototype,"_userTimeExtent",void 0),h([f()],Qe.prototype,"_lockedTimeExtent",void 0),h([f({type:sj})],Qe.prototype,"theme",void 0),h([f({readOnly:!0,type:sj})],Qe.prototype,"effectiveTheme",null),Qe=d_=h([A("esri.views.View")],Qe);const CN=globalThis.$arcgis;CN&&!CN.views&&Object.defineProperty(CN,"views",{configurable:!1,enumerable:!0,writable:!1,value:Qe.views});const $je=Qe;function Tje(t){return t.layerViews}function hw(t,e){return t[0]=e[0],t[1]=e[1],t}function An(t,e,i){return t[0]=e,t[1]=i,t}function Cpe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function f$(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function Mpe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function Ape(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function Eje(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function kje(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Cje(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function Mje(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function Aje(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function P2(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Ije(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function dR(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function JA(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function KA(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function Ipe(t){const e=t[0],i=t[1];return e*e+i*i}function Ppe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Pje(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function uj(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function Rpe(t,e){return t[0]*e[0]+t[1]*e[1]}function Lpe(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function Rje(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function Lje(t,e=1){const i=2*YP()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function Nje(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function cc(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function Dje(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Vje(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function Fje(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=n*a-s*o+i[0],t[1]=n*o+s*a+i[1],t}function jje(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*n+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function zje(t){return"vec2("+t[0]+", "+t[1]+")"}function Uje(t,e){return t[0]===e[0]&&t[1]===e[1]}function Qje(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],o=Ws();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function Bje(t,e,i,r,n){let s=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const qje=KA,n9=f$,Gje=Mpe,Zje=Ape,Hje=dR,Wje=JA,Xje=Ipe;Object.freeze(Object.defineProperty({__proto__:null,add:Cpe,angle:jje,ceil:Eje,copy:hw,cross:Lpe,dist:Hje,distance:dR,div:Zje,divide:Ape,dot:Rpe,equals:Qje,exactEquals:Uje,floor:kje,inverse:Pje,len:qje,length:KA,lerp:Rje,max:Mje,min:Cje,mul:Gje,multiply:Mpe,negate:Ppe,normalize:uj,projectAndScale:Bje,random:Lje,rotate:Fje,round:Aje,scale:P2,scaleAndAdd:Ije,set:An,sqrDist:Wje,sqrLen:Xje,squaredDistance:JA,squaredLength:Ipe,str:zje,sub:n9,subtract:f$,transformMat2:Nje,transformMat2d:cc,transformMat3:Dje,transformMat4:Vje},Symbol.toStringTag,{value:"Module"}));function hr(){return[0,0]}function Yje(t){return[t[0],t[1]]}function R2(t,e){return[t,e]}function Jje(t,e){return[t,e]}function Kje(t,e=hr()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function eze(t,e){return new Float64Array(t,e,2)}function Npe(){return hr()}function Dpe(){return R2(1,1)}function Vpe(){return R2(1,0)}function Fpe(){return R2(0,1)}const tze=Npe(),ize=Dpe(),rze=Vpe(),nze=Fpe();Object.freeze(Object.defineProperty({__proto__:null,ONES:ize,UNIT_X:rze,UNIT_Y:nze,ZEROS:tze,clone:Yje,create:hr,createView:eze,freeze:Jje,fromArray:Kje,fromValues:R2,ones:Dpe,unitX:Vpe,unitY:Fpe,zeros:Npe},Symbol.toStringTag,{value:"Module"}));function sze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function pR(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function oze(t,e,i,r,n,s,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t}function s9(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5];let l=i*s-r*n;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*a-s*o)*l,t[5]=(r*o-i*a)*l,t):null}function aze(t){return t[0]*t[3]-t[1]*t[2]}function Ky(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],p=i[1],m=i[2],g=i[3],w=i[4],O=i[5];return t[0]=r*u+s*p,t[1]=n*u+o*p,t[2]=r*m+s*g,t[3]=n*m+o*g,t[4]=r*w+s*O+a,t[5]=n*w+o*O+l,t}function L2(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=Math.sin(i),p=Math.cos(i);return t[0]=r*p+s*u,t[1]=n*p+o*u,t[2]=r*-u+s*p,t[3]=n*-u+o*p,t[4]=a,t[5]=l,t}function fR(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],p=i[1];return t[0]=r*u,t[1]=n*u,t[2]=s*p,t[3]=o*p,t[4]=a,t[5]=l,t}function zw(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],p=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*u+s*p+a,t[5]=n*u+o*p+l,t}function jpe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function zpe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function o9(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function lze(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function uze(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function cze(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function Upe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function hze(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function dze(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function pze(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function fze(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=e[0],u=e[1],p=e[2],m=e[3],g=e[4],w=e[5],O=Ws();return Math.abs(i-l)<=O*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=O*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-p)<=O*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(s-m)<=O*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-g)<=O*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-w)<=O*Math.max(1,Math.abs(a),Math.abs(w))}const mze=Ky,yze=Upe;Object.freeze(Object.defineProperty({__proto__:null,add:cze,copy:sze,determinant:aze,equals:fze,exactEquals:pze,frob:uze,fromRotation:jpe,fromScaling:zpe,fromTranslation:o9,identity:pR,invert:s9,mul:mze,multiply:Ky,multiplyScalar:hze,multiplyScalarAndAdd:dze,rotate:L2,scale:fR,set:oze,str:lze,sub:yze,subtract:Upe,translate:zw},Symbol.toStringTag,{value:"Module"}));function hd(){return[1,0,0,1,0,0]}function gze(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function vze(t,e,i,r,n,s){return[t,e,i,r,n,s]}function bze(t,e){return new Float64Array(t,e,6)}const wze=hd();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:wze,clone:gze,create:hd,createView:bze,fromValues:vze},Symbol.toStringTag,{value:"Module"}));const QE={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new el({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Je.WebMercator}),minus180Line:new el({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Je.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new el({paths:[[[180,-180],[180,180]]],spatialReference:Je.WGS84}),minus180Line:new el({paths:[[[-180,-180],[-180,180]]],spatialReference:Je.WGS84})}};function dg(t,e){return Math.ceil((t-e)/(2*e))}function Qpe(t,e){const i=Sx(t);for(const r of i)for(const n of r)n[0]+=e;return t}function Sx(t){return wg(t)?t.rings:t.paths}function Bpe(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function af(t){return typeof t=="string"?xr(t):q(t)}function qpe(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[n]=s.map(o=>qpe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i==null?void 0:i[n]);r[n]=e?o:JSON.stringify(o)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function eI(t,e){var i;return t?GQ(t,e)?e||Ht.apiKey:(i=Ye==null?void 0:Ye.findCredential(t))==null?void 0:i.token:null}async function Oze(t,e,i,r){const n=af(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...n.query,f:"json",sr:EA(s),target:JSON.stringify({geometryType:g2(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await bt(n.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(p=>{const m=bd(p);return m.spatialReference=s,m})}}function Sze(t){return{geometryType:g2(t[0]),geometries:t.map(e=>e.toJSON())}}function Gpe(t,e,i){const r=NIe(e);return t.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}async function _ze(t,e,i){const r=typeof t=="string"?xr(t):t,n=e[0].spatialReference,s=g2(e[0]),o={...i,query:{...r.query,f:"json",sr:EA(n),geometries:JSON.stringify(Sze(e))}},{data:a}=await bt(r.path+"/simplify",o);return Gpe(a.geometries,s,n)}const Zpe=()=>pe.getLogger("esri.geometry.support.normalizeUtils");function xze(t){return t.type==="polygon"}function $ze(t){return t[0].type==="polygon"}function Tze(t){return t[0].type==="polyline"}function CY(t){const e=[];let i=0,r=0;for(let n=0;n<t.length;n++){const s=t[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function Eze(t,e){if(!(t instanceof el||t instanceof da)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw Zpe().error(n),new G(n)}const i=Sx(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],u=n[o+1][0],p=n[o+1][1],m=Math.sqrt((u-a)*(u-a)+(p-l)*(p-l)),g=(p-l)/m,w=(u-a)/m,O=m/e;if(O>1){for(let E=1;E<=O-1;E++){const k=E*e,M=w*k+a,R=g*k+l;s.push([M,R])}const _=(m+Math.floor(O-1)*e)/2,x=w*_+a,T=g*_+l;s.push([x,T])}s.push([u,p])}}return xze(t)?new da({rings:r,spatialReference:t.spatialReference}):new el({paths:r,spatialReference:t.spatialReference})}function MY(t,e,i){if(e){const r=Eze(t,1e6);t=Fb(r,!0)}return i&&(t=Qpe(t,i)),t}function AY(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=dg(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=dg(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=dg(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=dg(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function kze(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],o=Sx(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let p=0;for(let g=0;g<l.length;g++){const w=l[g][0];p=w>p?w:p}p=Number(p.toFixed(9));const m=-360*dg(p,180);for(let g=0;g<l.length;g++){const w=s.getPoint(a,g);s.setPoint(a,g,w.clone().offset(m,0))}return!0}})}if(n===i){if($ze(t))for(const a of Sx(s))t[n]=t[n].addRing(a);else if(Tze(t))for(const a of Sx(s))t[n]=t[n].addPath(a)}else i=n,t[n]=s}return t}async function Hpe(t,e,i){if(!Array.isArray(t))return Hpe([t],e);e&&typeof e!="string"&&Zpe().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??Ht.geometryServiceUrl;let n,s,o,a,l,u,p,m,g=0;const w=[],O=[];for(const M of t)if(M!=null)if(n||(n=M.spatialReference,s=Zs(n),o=n.isWebMercator,u=o?102100:4326,a=QE[u].maxX,l=QE[u].minX,p=QE[u].plus180Line,m=QE[u].minus180Line),s)if(M.type==="mesh")O.push(M);else if(M.type==="point")O.push(AY(M.clone(),a,l));else if(M.type==="multipoint"){const R=M.clone();R.points=R.points.map(D=>AY(D,a,l)),O.push(R)}else if(M.type==="extent"){const R=M.clone()._normalize(!1,!1,s);O.push(R.rings?new da(R):R)}else if(M.extent){const R=M.extent,D=dg(R.xmin,l)*(2*a);let L=D===0?M.clone():Qpe(M.clone(),D);R.offset(D,0);let{xmin:F,xmax:j}=R;F=Number(F.toFixed(9)),j=Number(j.toFixed(9)),R.intersects(p)&&j!==a?(g=j>g?j:g,L=MY(L,o),w.push(L),O.push("cut")):R.intersects(m)&&F!==l?(g=j*(2*a)>g?j*(2*a):g,L=MY(L,o,360),w.push(L),O.push("cut")):O.push(L)}else O.push(M.clone());else O.push(M);else O.push(M);let _=dg(g,a),x=-90;const T=_,E=new el;for(;_>0;){const M=360*_-180;E.addPath([[M,x],[M,-1*x]]),x*=-1,_--}if(w.length>0&&T>0){const M=kze(w,await Oze(r,w,E,i)),R=[],D=[];for(let j=0;j<O.length;j++){const B=O[j];if(B!=="cut")D.push(B);else{const W=M.shift(),ie=t[j];ie!=null&&ie.type==="polygon"&&ie.rings&&ie.rings.length>1&&W.rings.length>=ie.rings.length?(R.push(W),D.push("simplify")):D.push(o?Sf(W):W)}}if(!R.length)return D;const L=await _ze(r,R,i),F=[];for(let j=0;j<D.length;j++){const B=D[j];B!=="simplify"?F.push(B):F.push(o?Sf(L.shift()):L.shift())}return F}const k=[];for(let M=0;M<O.length;M++){const R=O[M];if(R!=="cut")k.push(R);else{const D=w.shift();k.push(o===!0?Sf(D):D)}}return k}function Cze(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&Zs(t.spatialReference);if(!i)return e;const[r,n]=i.valid,s=2*n,{width:o}=e;let a,{xmin:l,xmax:u}=e;if([l,u]=[u,l],t.type==="extent"||o===0||o<=n||o>s||l<r||u>n)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=CY(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=CY(t.paths);break;case"multipoint":a=t.points}const p=e.clone();for(let m=0;m<a.length;m++){let g=a[m][0];g<0?(g+=n,u=Math.max(g,u)):(g-=n,l=Math.min(g,l))}return p.xmin=l,p.xmax=u,p.width<o?(p.xmin-=n,p.xmax-=n,p):e}function a9(t,e,i){const r=Zs(i);if(r==null)return t;const[n,s]=r.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<n&&(a=-Math.ceil(Math.abs(e-n)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<n&&(l=-Math.ceil(Math.abs(t-n)/o));let u=t+(a-l)*o;const p=u-e;return p>s?u-=o:p<n&&(u+=o),u}function Sbt(t,e){const i=Zs(e);if(i){const[r,n]=i.valid,s=n-r;if(t<r)for(;t<r;)t+=s;if(t>n)for(;t>n;)t-=s}return t}const Wpe=96,Xpe=39.37,Mze=180/Math.PI;function Ype(t){return t.wkid?t:t.spatialReference||Je.WGS84}function l9(t,e){return e.type?An(t,e.x,e.y):hw(t,e)}function Jpe(t){return ma(t)}function mR(t,e,i=0){let r=t.width,n=t.height;if(i!==0){const a=kP(i),l=Math.abs(Math.cos(a)),u=Math.abs(Math.sin(a));r=t.width*l+t.height*u,n=t.width*u+t.height*l}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,n/o)*Dze(t.spatialReference)}async function p_(t,e,i,r){var a,l,u;let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(Te.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const p=t.every(w=>"attributes"in w),m=t.some(w=>!w.geometry);let g=t;if(p&&m&&e&&e.allLayerViews){const w=new Map;for(const T of t){const E=T.layer,k=w.get(E)||[],M=T.attributes[E.objectIdField];M!=null&&k.push(M),w.set(E,k)}const O=[];w.forEach((T,E)=>{var M;const k=(M=e.allLayerViews)==null?void 0:M.find(R=>R.layer.id===E.id);if(k&&"queryFeatures"in k){const R=E.createQuery();R.objectIds=T,R.returnGeometry=!0,O.push(k.queryFeatures(R))}});const _=await Promise.all(O),x=[];for(const T of _)if(T&&T.features&&T.features.length)for(const E of T.features)E.geometry!=null&&x.push(E.geometry);g=x}for(const w of g)r=await p_(w,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new Ot(t);else if(t instanceof Td)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const p=t.layer,m=(a=e.allLayerViews)==null?void 0:a.find(g=>g.layer.id===p.id);if(m&&"queryFeatures"in m){const g=p.createQuery();g.objectIds=[t.attributes[p.objectIdField]],g.returnGeometry=!0;const w=await m.queryFeatures(g);n=(u=(l=w==null?void 0:w.features)==null?void 0:l[0])==null?void 0:u.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new oi({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=Cze(n);break;default:s=n.extent}if(!s)return null;im()||Tc(s.spatialReference,i)||await Qf();const o=rm(s,i);if(!o)return null;if(r){const p=o.center,m=p.clone();m.x=a9(p.x,r.center.x,i),m.x!==p.x&&o.centerAt(m),r=r.union(o)}else r=o;return r}function Aze(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every(i=>"layer"in i)){let i=0,r=0;for(const n of t){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(i=s.minScale<i?s.minScale:i,r=s.maxScale>r?s.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function IY(t,e){const i=Ype(t);return yn(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:rm(t,e)}async function Ize(t,e){var x;if(!t||!e)return new fn({targetGeometry:new Ot,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=e,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;t instanceof fn?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let u=null;l!=null&&l.targetGeometry?u=l.targetGeometry:t instanceof oi?u=t:t instanceof Td?u=await p_(t,e,i):t&&(u=await p_(t.center,e,i)||await p_(t.target,e,i)||await p_(t,e,i)),!u&&(s!=null&&s.targetGeometry)?u=s.targetGeometry:!u&&e.extent&&(u=e.extent),i||(i=Ype(e.spatialReference||e.extent||u)),im()||yn(u.spatialReference,i)||Tc(u.spatialReference,i)||await Qf();const p=IY(u,i),m="center"in p?p.center:p;e.pickClosestTarget!==!1&&m.type==="point"&&((x=s.targetGeometry)==null?void 0:x.type)==="point"&&(m.x=a9(m.x,s.targetGeometry.x,m.spatialReference));let g=0;l?g=l.rotation:t.hasOwnProperty("rotation")?g=t.rotation:s&&(g=s.rotation);let w=0;w=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0?s.scale:mR(IY(u.extent,i),a,g);const O=Aze(t.target??t);O&&(O.min&&O.min<w?w=O.min:O.max&&O.max>w&&(w=O.max));let _=new fn({targetGeometry:m,scale:w,rotation:g});return r&&(_=r.fit(_),r.constrainByGeometry(_),r.rotationEnabled||(_.rotation=s.rotation)),_}function Os(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function Pze(t,e,i){return i?An(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):P2(t,e,.5)}const Kpe=function(){const t=hr();return function(e,i,r){const n=i.targetGeometry;l9(t,n);const s=.5*RO(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}}();function Rze(t,e,i,r,n){var s;return cj(t,e,i.center),t.scale=mR(i,r),(s=n==null?void 0:n.constraints)==null||s.constrain(t),t}function Lze(t,e,i,r){return h9(t,e,i,r),s9(t,t)}const efe=function(){const t=hr();return function(e,i,r){return n9(e,Vze(e,i),Pze(t,i,r))}}(),Nze=function(){const t=hd(),e=hr();return function(i,r,n,s){const o=RO(r),a=u9(r);return An(e,o,o),zpe(t,e),L2(t,t,a),zw(t,t,efe(e,n,s)),zw(t,t,[0,s.top-s.bottom]),An(i,t[4],t[5])}}();function RO(t){var e;return t.scale*tfe((e=t.targetGeometry)==null?void 0:e.spatialReference)}function tfe(t){return $o(t)?1/(Jpe(t)*Xpe*Wpe):1}function u9(t){return N8(t.rotation)||0}function Dze(t){return $o(t)?Jpe(t)*Xpe*Wpe:1}function Vze(t,e){return P2(t,e,.5)}const c9=function(){const t=hr(),e=hr(),i=hr();return function(r,n,s,o,a,l){return Ppe(t,n),P2(e,s,.5*l),An(i,1/o*l,-1/o*l),o9(r,e),a&&L2(r,r,a),fR(r,r,i),zw(r,r,t),r}}(),h9=function(){const t=hr();return function(e,i,r,n){const s=RO(i),o=u9(i);return l9(t,i.targetGeometry),c9(e,t,r,s,o,n)}}(),Fze=function(){const t=hr();return function(e,i,r,n){const s=RO(i);return l9(t,i.targetGeometry),c9(e,t,r,s,0,n)}}();function ife(t){const e=Zs(t);return e?e.valid[1]-e.valid[0]:0}function jze(t,e){return Math.round(ife(t)/e)}const zze=function(){const t=hr(),e=hr(),i=[0,0,0];return function(r,n,s){f$(t,r,n),uj(t,t),f$(e,r,s),uj(e,e),Lpe(i,t,e);let o=Math.acos(Rpe(t,e)/(KA(t)*KA(e)))*Mze;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),Uze=function(){const t=hr();return function(e,i,r,n){const s=e.targetGeometry;return Os(e,i),Nze(t,i,r,n),s.x+=t[0],s.y+=t[1],e}}(),cj=function(t,e,i){Os(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},Qze=function(){const t=hr();return function(e,i,r,n,s){s||(s="center"),n9(t,r,n),P2(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":An(t,0,0);break;case"left":An(t,-o,0);break;case"top":An(t,0,a);break;case"right":An(t,o,0);break;case"bottom":An(t,0,-a);break;case"top-left":An(t,-o,a);break;case"bottom-left":An(t,-o,-a);break;case"top-right":An(t,o,a);break;case"bottom-right":An(t,o,-a)}return yR(e,i,t),e}}();function _bt(t,e,i){return Os(t,e),t.rotation+=i,t}function Bze(t,e,i){return Os(t,e),t.rotation=i,t}const qze=function(){const t=hr();return function(e,i,r,n,s){return Os(e,i),isNaN(r)||r===0||(nfe(t,n,i,s),e.scale=i.scale*r,sfe(t,t,e,s),yR(e,e,An(t,t[0]-n[0],n[1]-t[1]))),e}}();function PY(t,e,i){return Os(t,e),t.scale=i,t}const rfe=function(){const t=hr();return function(e,i,r,n,s,o){return Os(e,i),isNaN(r)||r===0||(nfe(t,s,i,o),e.scale=i.scale*r,e.rotation+=n,sfe(t,t,e,o),yR(e,e,An(t,t[0]-s[0],s[1]-t[1]))),e}}(),xbt=function(){const t=hr(),e=hr();return function(i,r,n,s,o,a,l){return efe(e,a,l),Cpe(t,o,e),s?rfe(i,r,n,s,t,a):qze(i,r,n,t,a)}}(),nfe=function(){const t=hd();return function(e,i,r,n){return cc(e,i,Lze(t,r,n,1))}}(),sfe=function(){const t=hd();return function(e,i,r,n){return cc(e,i,h9(t,r,n,1))}}(),yR=function(){const t=hr(),e=hd();return function(i,r,n){Os(i,r);const s=RO(r),o=i.targetGeometry;return jpe(e,u9(r)),fR(e,e,R2(s,s)),cc(t,n,e),o.x+=t[0],o.y+=t[1],i}}();function tI(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function Gze(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Zze(t,e,i,r,n,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function Hze(t,e){return new Float32Array(t,e,6)}function ofe(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function Wze(t,e,i,r=0,n=0,s=2){const o=n||e.length/s;for(let a=r;a<o;a++)ofe(t,e,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:Gze,create:tI,createView:Hze,fromValues:Zze,transform:ofe,transformMany:Wze},Symbol.toStringTag,{value:"Module"}));function Xze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Yze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function afe(t,e,i,r,n,s,o,a,l,u){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t}function lfe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Jze(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Kze(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],m=p*o-a*u,g=-p*s+a*l,w=u*s-o*l;let O=i*m+r*g+n*w;return O?(O=1/O,t[0]=m*O,t[1]=(-p*r+n*u)*O,t[2]=(a*r-n*o)*O,t[3]=g*O,t[4]=(p*i-n*l)*O,t[5]=(-a*i+n*s)*O,t[6]=w*O,t[7]=(-u*i+r*l)*O,t[8]=(o*i-r*s)*O,t):null}function e6e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8];return t[0]=o*p-a*u,t[1]=n*u-r*p,t[2]=r*a-n*o,t[3]=a*l-s*p,t[4]=i*p-n*l,t[5]=n*s-i*a,t[6]=s*u-o*l,t[7]=r*l-i*u,t[8]=i*o-r*s,t}function t6e(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8];return e*(u*s-o*l)+i*(-u*n+o*a)+r*(l*n-s*a)}function d9(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],m=e[8],g=i[0],w=i[1],O=i[2],_=i[3],x=i[4],T=i[5],E=i[6],k=i[7],M=i[8];return t[0]=g*r+w*o+O*u,t[1]=g*n+w*a+O*p,t[2]=g*s+w*l+O*m,t[3]=_*r+x*o+T*u,t[4]=_*n+x*a+T*p,t[5]=_*s+x*l+T*m,t[6]=E*r+k*o+M*u,t[7]=E*n+k*a+M*p,t[8]=E*s+k*l+M*m,t}function hj(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],m=e[8],g=i[0],w=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=g*r+w*o+u,t[7]=g*n+w*a+p,t[8]=g*s+w*l+m,t}function ufe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],m=e[8],g=Math.sin(i),w=Math.cos(i);return t[0]=w*r+g*o,t[1]=w*n+g*a,t[2]=w*s+g*l,t[3]=w*o-g*r,t[4]=w*a-g*n,t[5]=w*l-g*s,t[6]=u,t[7]=p,t[8]=m,t}function i6e(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function r6e(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function n6e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function s6e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o6e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function a6e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function l6e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,u=i*o,p=r*o,m=r*a,g=n*o,w=n*a,O=n*l,_=s*o,x=s*a,T=s*l;return t[0]=1-m-O,t[3]=p-T,t[6]=g+x,t[1]=p+T,t[4]=1-u-O,t[7]=w-_,t[2]=g-x,t[5]=w+_,t[8]=1-u-m,t}function u6e(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],p=e[10],m=p*o-a*u,g=-p*s+a*l,w=u*s-o*l,O=i*m+r*g+n*w;if(!O)return null;const _=1/O;return t[0]=m*_,t[1]=(-p*r+n*u)*_,t[2]=(a*r-n*o)*_,t[3]=g*_,t[4]=(p*i-n*l)*_,t[5]=(-a*i+n*s)*_,t[6]=w*_,t[7]=(-u*i+r*l)*_,t[8]=(o*i-r*s)*_,t}function c6e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],m=e[9],g=e[10],w=e[11],O=e[12],_=e[13],x=e[14],T=e[15],E=i*a-r*o,k=i*l-n*o,M=i*u-s*o,R=r*l-n*a,D=r*u-s*a,L=n*u-s*l,F=p*_-m*O,j=p*x-g*O,B=p*T-w*O,W=m*x-g*_,ie=m*T-w*_,oe=g*T-w*x;let ae=E*oe-k*ie+M*W+R*B-D*j+L*F;return ae?(ae=1/ae,t[0]=(a*oe-l*ie+u*W)*ae,t[1]=(l*B-o*oe-u*j)*ae,t[2]=(o*ie-a*B+u*F)*ae,t[3]=(n*ie-r*oe-s*W)*ae,t[4]=(i*oe-n*B+s*j)*ae,t[5]=(r*B-i*ie-s*F)*ae,t[6]=(_*L-x*D+T*R)*ae,t[7]=(x*M-O*L-T*k)*ae,t[8]=(O*D-_*M+T*E)*ae,t):null}function h6e(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function d6e(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function p6e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function f6e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function cfe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function m6e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function y6e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function g6e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function v6e(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],p=t[8],m=e[0],g=e[1],w=e[2],O=e[3],_=e[4],x=e[5],T=e[6],E=e[7],k=e[8],M=Ws();return Math.abs(i-m)<=M*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(r-g)<=M*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-w)<=M*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(s-O)<=M*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(o-_)<=M*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-x)<=M*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-T)<=M*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-E)<=M*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(p-k)<=M*Math.max(1,Math.abs(p),Math.abs(k))}function b6e(t){const e=Ws(),i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],p=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(n*n+a*a+p*p))<=e}const w6e=d9,O6e=cfe;Object.freeze(Object.defineProperty({__proto__:null,add:f6e,adjoint:e6e,copy:Yze,determinant:t6e,equals:v6e,exactEquals:g6e,frob:p6e,fromMat2d:a6e,fromMat4:Xze,fromQuat:l6e,fromRotation:s6e,fromScaling:o6e,fromTranslation:n6e,identity:lfe,invert:Kze,isOrthoNormal:b6e,mul:w6e,multiply:d9,multiplyScalar:m6e,multiplyScalarAndAdd:y6e,normalFromMat4:c6e,normalFromMat4Legacy:u6e,projection:h6e,rotate:ufe,scale:i6e,scaleByVec2:r6e,set:afe,str:d6e,sub:O6e,subtract:cfe,translate:hj,transpose:Jze},Symbol.toStringTag,{value:"Module"}));function HC(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function S6e(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function _6e(t,e,i,r,n,s,o,a,l){const u=new Float32Array(9);return u[0]=t,u[1]=e,u[2]=i,u[3]=r,u[4]=n,u[5]=s,u[6]=o,u[7]=a,u[8]=l,u}function x6e(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:S6e,create:HC,createView:x6e,fromValues:_6e},Symbol.toStringTag,{value:"Module"}));function hfe(){return new Float32Array(2)}function $6e(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function Uw(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function T6e(t,e){return new Float32Array(t,e,2)}function dfe(){return hfe()}function pfe(){return Uw(1,1)}function ffe(){return Uw(1,0)}function mfe(){return Uw(0,1)}const E6e=dfe(),k6e=pfe(),C6e=ffe(),M6e=mfe();Object.freeze(Object.defineProperty({__proto__:null,ONES:k6e,UNIT_X:C6e,UNIT_Y:M6e,ZEROS:E6e,clone:$6e,create:hfe,createView:T6e,fromValues:Uw,ones:pfe,unitX:ffe,unitY:mfe,zeros:dfe},Symbol.toStringTag,{value:"Module"}));function A6e(t){return t instanceof Float32Array&&t.length>=2}function I6e(t){return Array.isArray(t)&&t.length>=2}function MN(t){return A6e(t)||I6e(t)}var dj;const ch=[0,0];let kh=dj=class extends K{constructor(t){super(t),this._viewpoint2D={center:hr(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new oi,this.id=0,this.inverseTransform=hd(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=hd(),this.transformNoRotation=hd(),this.displayMat3=HC(),this.displayViewMat3=HC(),this.viewMat3=HC(),this.viewMat2d=tI(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Os(i,t.viewpoint),this._set("size",hw(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new dj({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return MN(e)?cc(t,e,this.inverseTransform):(ch[0]=e,ch[1]=i,cc(t,ch,this.inverseTransform))}toScreen(t,e,i){return MN(e)?cc(t,e,this.transform):(ch[0]=e,ch[1]=i,cc(t,ch,this.transform))}toScreenNoRotation(t,e,i){return MN(e)?cc(t,e,this.transformNoRotation):(ch[0]=e,ch[1]=i,cc(t,ch,this.transformNoRotation))}wrapMapCoordinate(t,e){hw(t,e);const[i]=e,[r]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:a}=n;if(s.isWrappable){const l=ife(s)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(i<o||i>a)&&(t[0]=a9(i,r,s)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return c9(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new fn({targetGeometry:new Ot(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=RO(o),this.rotation=r,this.scale=i,this.spatialReference=e,hw(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;afe(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=lfe(this.viewMat3),p=Uw(s[0]/2,s[1]/2),m=Uw(-s[0]/2,-s[1]/2),g=N8(r);hj(u,u,p),ufe(u,u,g),hj(u,u,m),d9(this.displayViewMat3,this.displayMat3,u);const w=o9(this.viewMat2d,p);return L2(w,w,g),zw(w,w,m),Kpe(this.extent,o,s),h9(this.transform,o,s,n),s9(this.inverseTransform,this.transform),Fze(this.transformNoRotation,o,s,n),this.worldScreenWidth=jze(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};h([f({readOnly:!0})],kh.prototype,"id",void 0),h([f({value:1,json:{write:!0}})],kh.prototype,"pixelRatio",null),h([f({json:{write:!0}})],kh.prototype,"size",null),h([f()],kh.prototype,"spatialReference",void 0),h([f({type:fn,json:{write:!0}})],kh.prototype,"viewpoint",null),h([f({readOnly:!0})],kh.prototype,"visibleArea",null),kh=dj=h([A("esri.views.2d.ViewState")],kh);const RY=kh;var pj,fj;let Kh=pj=class extends Ce{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new pj({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};h([f()],Kh.prototype,"left",void 0),h([f()],Kh.prototype,"top",void 0),h([f()],Kh.prototype,"right",void 0),h([f()],Kh.prototype,"bottom",void 0),Kh=pj=h([A("esri.views.2d.PaddedViewState.Padding")],Kh);let Bv=fj=class extends RY{constructor(...t){super(...t),this.paddedViewState=new RY,this._updateContent=(()=>{const e=hr();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;An(e,r.left+r.right,r.top+r.bottom),f$(e,i,e),hw(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(Oe(()=>[this.size,this.padding],()=>this._updateContent(),mu)),this.padding=new Kh,this.size=[0,0]}set padding(t){this._set("padding",t||new Kh)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=Uze(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:s}=e,{x:o,y:a,spatialReference:l}=r,u=this._viewpoint2D;u.center[0]=o,u.center[1]=a,u.rotation=n,u.scale=s,u.spatialReference=l,this._update()}}clone(){return new fj({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};h([f()],Bv.prototype,"paddedViewState",void 0),h([f({type:Kh})],Bv.prototype,"padding",null),h([f()],Bv.prototype,"viewpoint",null),Bv=fj=h([A("esri.views.2d.PaddedViewState")],Bv);const p9=Bv;var Gn;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(Gn||(Gn={}));const yfe=Symbol("Yield");let P6e=class{constructor(){this._tasks=new Array,this._runningTasks=Vw(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return yfe;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return++this._runningTasks.value,new Promise((n,s)=>this._tasks.push(new LY(n,s,e,i,r))).finally(()=>--this._runningTasks.value)}unshift(e,i,r){return++this._runningTasks.value,new Promise((n,s)=>this._tasks.unshift(new LY(n,s,e,i,r))).finally(()=>--this._runningTasks.value)}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const n=ca(i.signal);if(n&&!i.abortCallback)i.reject(Wt());else{const s=n?(r=i.abortCallback)==null?void 0:r.call(i,Wt()):i.callback(e);Rc(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(n){i.reject(n)}return!0}cancelAll(){const e=Wt();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0}},LY=class{constructor(e,i,r,n=void 0,s=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=s}},f_=class extends Ce{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};h([f()],f_.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),h([f()],f_.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),f_=h([A("esri.views.support.debugFlags")],f_);const R6e=new f_;function L6e(){return new iI.Scheduler}var Tt;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(Tt||(Tt={}));const Za=0,NY=new Map([[Tt.RESOURCE_CONTROLLER_IMMEDIATE,Za],[Tt.RESOURCE_CONTROLLER,4],[Tt.SLIDE,Za],[Tt.STREAM_DATA_LOADER,Za],[Tt.ELEVATION_QUERY,Za],[Tt.TERRAIN_SURFACE,1],[Tt.SURFACE_GEOMETRY_UPDATES,1],[Tt.LOD_RENDERER,2],[Tt.GRAPHICS_CORE,2],[Tt.I3S_CONTROLLER,2],[Tt.POINT_CLOUD_LAYER,2],[Tt.FEATURE_TILE_FETCHER,2],[Tt.CLOUDS_GENERATOR,2],[Tt.OVERLAY,4],[Tt.STAGE,4],[Tt.GRAPHICS_DECONFLICTOR,4],[Tt.FILTER_VISIBILITY,4],[Tt.SCALE_VISIBILITY,4],[Tt.FRUSTUM_VISIBILITY,4],[Tt.POINT_OF_INTEREST_FREQUENT,6],[Tt.POINT_OF_INTEREST_INFREQUENT,30],[Tt.LABELER,8],[Tt.FEATURE_QUERY_ENGINE,8],[Tt.FEATURE_TILE_TREE,16],[Tt.FEATURE_TILE_TREE_ACTIVE,Za],[Tt.ELEVATION_ALIGNMENT,12],[Tt.ELEVATION_ALIGNMENT_SCENE,14],[Tt.TEXT_TEXTURE_ATLAS,12],[Tt.TEXTURE_UNLOAD,12],[Tt.LINE_OF_SIGHT_TOOL,16],[Tt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Za],[Tt.SNAPPING,Za],[Tt.SHADOW_ACCUMULATOR,30],[Tt.MAPVIEW_FETCH_QUEUE,Za],[Tt.MAPVIEW_LAYERVIEW_UPDATE,2],[Tt.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Za]]);function DY(t){return NY.has(t)?NY.get(t):typeof t=="number"?t:1}const N6e=6.5,VY=1,D6e=30,V6e=1e3/30,F6e=100,FY=.9;var iI,Um;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=Vw(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new nx("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Gn.INTERACTING,this._tasks=new gg,this._runQueue=new gg,this._load=0,this._idleStateCallbacks=new gg,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Oe(()=>R6e.SCHEDULER_LOG_SLOW_TASKS,s=>this._debug=s,It);for(const s of Object.keys(Tt))this.performanceInfo.tasks.set(Tt[s],new nx(Tt[s]))}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),qi(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(s,o){const a=new i(this,s,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new nx(s)),a}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===Gn.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(u){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===Gn.IDLE&&u()),a.idleBegin=u},set idleEnd(u){a.idleEnd=u}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==Gn.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}frame(s){this._startFrameTaskTimes();const o=this._updateBudget(s);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=N6e,a=s.frameDuration,l=VY;switch(this.state){case Gn.IDLE:o=0,a=Math.max(F6e,s.frameDuration),l=D6e;break;case Gn.INTERACTING:a=Math.max(V6e,s.frameDuration);case Gn.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==Gn.IDLE&&a<VY&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Gn.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case Gn.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return Um.SCHEDULED;let o=Um.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=Um.READY:o!==Um.READY&&(o=Um.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*FY+s*(1-FY)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===Za&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==Za&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===yfe&&(o.blockFrame=this._frameNumber)}catch(l){pe.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,l),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,Tt.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-s;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const s of Object.keys(Tt))this._frameTaskTimes.set(Tt[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(s)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a){this._scheduler=s,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new P6e,this._handles=new mO,this._basePriority=DY(o),this.schedulePriority=this._basePriority,this._task=Vw(a??this._queue),this._handles.add(Kn(()=>this.task.running,l=>s.taskRunningChanged(l)))}remove(){this.processQueue(gfe),this._scheduler.removeTask(this),this.schedule=jY.schedule,this.reschedule=jY.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const o=DY(s);this._basePriority!==Za&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){return this._queue.runTask(s)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Gn.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(iI||(iI={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Um||(Um={}));const gfe=(()=>{const t=new iI.Budget;return t.enabled=!1,t})();let j6e=class{remove(){}processQueue(){}schedule(e,i,r){try{if(ca(i)){const n=Wt();return r?Promise.resolve(r(n)):Promise.reject(n)}return x4(e(gfe))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const jY=new j6e;let z6e=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=L6e(),this._schedulerHandle=Kn(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||Rc(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var a,l,u;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:s,state:{id:o}}=this.view;r==null||r.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),(l=this.view.graphicsTileStore)==null||l.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=Gn.ANIMATING:this.view.interacting?this._scheduler.state=Gn.INTERACTING:this._scheduler.state=Gn.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==Gn.IDLE||((u=this._frameTaskHandle)==null||u.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new p9,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Oe(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Ew(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}},Ap=class extends CO{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=ha(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new G("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Rc(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};h([f({readOnly:!0})],Ap.prototype,"done",null),h([f({readOnly:!0,type:String})],Ap.prototype,"state",void 0),h([f()],Ap.prototype,"target",void 0),Ap=h([A("esri.views.ViewAnimation")],Ap),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Ap||(Ap={}));const mj=Ap;let WC=class extends Ce{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void pe.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new mj;this.view.animation=r,await l0(()=>this.view.ready,i);const n={...i,animate:(i==null?void 0:i.animate)??!Ope(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:p,allLayerViews:m}=this.view,g=Ize(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:p,allLayerViews:m,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(g),this._gotoTask={},n.animate?this._gotoAnimated(g,n):this._gotoImmediate(g,n)}_gotoImmediate(e,i){const r=this._gotoTask,n=this.view.animation,s=e.then(o=>{if(rr(i),r!==this._gotoTask)throw new G("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(r,n,s,i)}_gotoAnimated(e,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=e.then(o=>{if(rr(i),r!==this._gotoTask)throw new G("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,s,i)}_cancellableGoTo(e,i,r,n){const s=()=>e===this._gotoTask;return nae(r,n).finally(()=>{s()&&(i.done||i.stop())})}};h([f({constructOnly:!0})],WC.prototype,"view",void 0),WC=h([A("esri.views.2d.GoToManager")],WC);function U6e(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n,s,o,a;const l=[0,0],u=Q6e(t);for(let g=0;g<u.length;g++){const w=u[g];for(let O=0;O<w.length-1;O++){nIe(l,r,w,O);const _=dR(r,l);(n==null||_<n)&&(n=_,s=[...l],o=g,a=O)}}if(n==null||!s||o==null||a==null)throw new G("nearest-coordinate:failed","Failed to find the nearest coordinate");const[p,m]=s;return{coordinate:new Ot({x:p,y:m,spatialReference:i}),distance:n}}function Q6e(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var yj;let eg=yj=class extends Ed.NumericIdentifiableMixin(Ce){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return rm(this.geometry,this.spatialReference)}catch(t){return pe.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?m2(this.normalizedGeometry,i):KQ(this.normalizedGeometry,i))return t;const{coordinate:r}=U6e(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new yj({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};h([f({constructOnly:!0})],eg.prototype,"geometry",void 0),h([f({readOnly:!0})],eg.prototype,"normalizedGeometry",null),h([f({constructOnly:!0})],eg.prototype,"spatialReference",void 0),eg=yj=h([A("esri.views.2d.constraints.GeometryConstraint")],eg);var gj;let m_=gj=class extends Ed.NumericIdentifiableMixin(Ce){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new gj({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};h([f()],m_.prototype,"enabled",void 0),h([f()],m_.prototype,"rotationEnabled",void 0),m_=gj=h([A("esri.views.2d.constraints.RotationConstraint")],m_);const vfe=m_;var vj;let uo=vj=class extends Ed.NumericIdentifiableMixin(Ce){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,u=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(p=>p.clone()),e.sort((p,m)=>m.scale-p.scale),e.forEach((p,m)=>p.level=m);for(const p of e)!l&&i>0&&i>=p.scale&&(o=p.level,l=!0),!u&&r>0&&r>=p.scale&&(a=t?t.level:-1,u=!0),t=p;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1,e.length),e.forEach((p,m)=>{this._lodByScale[p.scale]=p,this._scales[m]=p.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&s){const u=(l-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*u,n.y=s.y+(n.y-s.y)*u}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new vj({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};h([f({readOnly:!0})],uo.prototype,"effectiveLODs",void 0),h([f({readOnly:!0})],uo.prototype,"effectiveMinZoom",void 0),h([f({readOnly:!0})],uo.prototype,"effectiveMaxZoom",void 0),h([f({readOnly:!0})],uo.prototype,"effectiveMinScale",void 0),h([f({readOnly:!0})],uo.prototype,"effectiveMaxScale",void 0),h([f()],uo.prototype,"lods",void 0),h([f()],uo.prototype,"minZoom",void 0),h([f()],uo.prototype,"maxZoom",void 0),h([f()],uo.prototype,"minScale",void 0),h([f()],uo.prototype,"maxScale",void 0),h([f()],uo.prototype,"snapToZoom",void 0),uo=vj=h([A("esri.views.2d.constraints.ZoomConstraint")],uo);const bfe=uo,B6e={base:null,key:"type",typeMap:{extent:oi,polygon:da}};let vr=class extends Ce{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Te}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new eg({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new vfe({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const e=this._get("_zoom"),i=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new bfe({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,e)}),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};h([f({readOnly:!0})],vr.prototype,"effectiveLODs",null),h([f({readOnly:!0})],vr.prototype,"effectiveMinScale",null),h([f({readOnly:!0})],vr.prototype,"effectiveMaxScale",null),h([f({readOnly:!0})],vr.prototype,"effectiveMinZoom",null),h([f({readOnly:!0})],vr.prototype,"effectiveMaxZoom",null),h([f({types:B6e,value:null})],vr.prototype,"geometry",null),h([f({type:[Xp]})],vr.prototype,"lods",void 0),h([f()],vr.prototype,"minScale",void 0),h([f()],vr.prototype,"maxScale",void 0),h([f()],vr.prototype,"minZoom",void 0),h([f()],vr.prototype,"maxZoom",void 0),h([f()],vr.prototype,"rotationEnabled",void 0),h([f()],vr.prototype,"snapToZoom",void 0),h([f({type:Te})],vr.prototype,"customConstraints",void 0),h([f()],vr.prototype,"view",void 0),h([f({readOnly:!0})],vr.prototype,"version",null),h([f({type:eg,readOnly:!0})],vr.prototype,"_geometry",null),h([f({type:vfe})],vr.prototype,"_rotation",null),h([f({readOnly:!0,type:bfe})],vr.prototype,"_zoom",null),vr=h([A("esri.views.2d.MapViewConstraints")],vr);const zY=vr;let ds=class extends Ce{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Oe(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},mu)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Ot({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void pe.getLogger(this).error(new G("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;cj(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void pe.getLogger(this).error(new G("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void pe.getLogger(this).error(new G("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;Rze(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;Bze(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;PY(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var s;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new G("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new G("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new G("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void pe.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new fn({targetGeometry:new Ot,scale:0,rotation:0});Os(n,i),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,s;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;PY(r,r,i),this.viewpoint=r,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),u=this._get("zoom"),p=u!=null&&r!=null&&r.zoomToScale(u)||void 0;let m,g,w;const O=l==null?void 0:l.rotation,_=l==null?void 0:l.targetGeometry;(_==null?void 0:_.type)==="extent"?m=_:(_==null?void 0:_.type)==="point"&&(g=_,w=l==null?void 0:l.scale);const x=s??m;return{center:n??g??(x==null?void 0:x.center),rotation:a??O,scale:(o??p??w??(x&&mR(x,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var o;const s=e.targetGeometry;try{this._project(e,r)}catch(a){pe.getLogger(this).warn(new ll("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:a})),e.targetGeometry=n||new Ot({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(e),this._set("state",new p9({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,o=new Ot({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){var l;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const u=i.viewpoint.clone();u.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=u}const r=i.clone(),[n,s]=i.center;let o=null;try{o=this._project(new Ot({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(u){ZQ()||pe.getLogger(this).warn(new ll("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:u}))}o||(o=new Ot({x:0,y:0,spatialReference:e}));const a=cj(new fn({targetGeometry:new Ot,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const p=[i.size[0]/2,i.size[1]/2],m=[p[0]+20,p[1]],g=i.toMap([0,0],m),{x:w,y:O}=this._project(new Ot({x:g[0],y:g[1],spatialReference:i.spatialReference}),e);g[0]=w,g[1]=O,r.toScreen(g,g);const _=zze(p,g,m),x=Math.hypot(g[0]-p[0],g[1]-p[1])/20;!Number.isFinite(x)||Math.abs(x)>4?(a.rotation=0,a.targetGeometry=new Ot({x:0,y:0,spatialReference:e})):(a.scale*=x,a.scale>te("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(_)?_:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){var o;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,i],Qze(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new Ot({x:r,y:n,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),Xr(n[0],n[1])}_project(e,i){var s;const r=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(s=r.spatialReference)!=null&&s.imageCoordinateSystem||yn(i,r.spatialReference))return e;const n=rm(r,i);if(!n)throw new G("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return q6e(e)?(e.targetGeometry=n,e):n}};function q6e(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}h([f({type:Ot})],ds.prototype,"center",null),h([f()],ds.prototype,"constraints",void 0),h([f({type:oi})],ds.prototype,"extent",null),h([f({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],ds.prototype,"padding",null),h([f()],ds.prototype,"ready",void 0),h([f()],ds.prototype,"resizeAlign",void 0),h([f({readOnly:!0})],ds.prototype,"resolution",null),h([f({type:Number})],ds.prototype,"rotation",null),h([f({type:Number})],ds.prototype,"scale",null),h([f({readOnly:!0})],ds.prototype,"state",void 0),h([f({type:fn})],ds.prototype,"viewpoint",null),h([f({readOnly:!0})],ds.prototype,"visibleArea",null),h([f()],ds.prototype,"zoom",null),ds=h([A("esri.views.2d.ViewStateManager")],ds);function wfe(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function Ofe(t,e){return e.some(i=>wfe(t,i))}function UY(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(n=>n.value===t).map(n=>n.key)}let QY=class extends bn{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){wfe(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},G6e=class extends bn{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,u=this._startScale*l,p=u/this._currentScale;a.setViewpointImmediate(p),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:p}=l;if(!p||!u)return void a.end();const m=l.snapScale(this._currentScale),g=(s.y>0?Math.max(m,l.snapToPreviousScale(this._startScale)):Math.min(m,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(g).then(()=>{a.end()});break}}}},gR=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},Z6e=class extends bn{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new gR({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&Ofe(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},H6e=class extends bn{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new gR({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&Ofe(o.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function Sfe(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function W6e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function X6e(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function Y6e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function _fe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function xfe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function $fe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function J6e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function K6e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function eUe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function tUe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function iUe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function rUe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function nUe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function sUe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Tfe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function oUe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function Efe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function kfe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function Cfe(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function aUe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function lUe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function bj(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function Mfe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function uUe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2];return t[0]=n*l-s*a,t[1]=s*o-r*l,t[2]=r*a-n*o,t}function cUe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],u=n*l-s*a,p=s*o-r*l,m=r*a-n*o,g=Math.sqrt(u*u+p*p+m*m);return t[0]=u/g,t[1]=p/g,t[2]=m/g,t}function hUe(t,e,i,r){const n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}function dUe(t,e,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,u=o*(s-1),p=o*(3-2*s);return t[0]=e[0]*a+i[0]*l+r[0]*u+n[0]*p,t[1]=e[1]*a+i[1]*l+r[1]*u+n[1]*p,t[2]=e[2]*a+i[2]*l+r[2]*u+n[2]*p,t}function pUe(t,e,i,r,n,s){const o=1-s,a=o*o,l=s*s,u=a*o,p=3*s*a,m=3*l*o,g=l*s;return t[0]=e[0]*u+i[0]*p+r[0]*m+n[0]*g,t[1]=e[1]*u+i[1]*p+r[1]*m+n[1]*g,t[2]=e[2]*u+i[2]*p+r[2]*m+n[2]*g,t}function fUe(t,e=1){const i=YP,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function mUe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function yUe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function gUe(t,e,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],l=e[1],u=e[2],p=n*u-s*l,m=s*a-r*u,g=r*l-n*a,w=n*g-s*m,O=s*p-r*g,_=r*m-n*p,x=2*o;return t[0]=a+p*x+2*w,t[1]=l+m*x+2*O,t[2]=u+g*x+2*_,t}function vUe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function bUe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function wUe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function OUe(t,e){bj(BY,t),bj(qY,e);const i=Mfe(BY,qY);return i>1?0:i<-1?Math.PI:Math.acos(i)}const BY=tm(),qY=tm();function SUe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function _Ue(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function xUe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2],l=Ws();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function $Ue(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const TUe=_fe,EUe=xfe,kUe=$fe,CUe=Efe,MUe=kfe,AUe=Sfe,IUe=Cfe;Object.freeze(Object.defineProperty({__proto__:null,abs:eUe,add:Y6e,angle:OUe,bezier:pUe,ceil:J6e,clamp:nUe,copy:W6e,cross:uUe,crossAndNormalize:cUe,direction:$Ue,dist:CUe,distance:Efe,div:kUe,divide:$fe,dot:Mfe,equals:xUe,exactEquals:_Ue,floor:K6e,hermite:dUe,inverse:lUe,len:AUe,length:Sfe,lerp:hUe,max:rUe,min:iUe,mul:EUe,multiply:xfe,negate:aUe,normalize:bj,random:fUe,rotateX:vUe,rotateY:bUe,rotateZ:wUe,round:sUe,scale:Tfe,scaleAndAdd:oUe,set:X6e,sign:tUe,sqrDist:MUe,sqrLen:IUe,squaredDistance:kfe,squaredLength:Cfe,str:SUe,sub:TUe,subtract:_fe,transformMat3:yUe,transformMat4:mUe,transformQuat:gUe},Symbol.toStringTag,{value:"Module"}));function Pl(t){let e=t*t;return t<0&&(e*=-1),e}function PUe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function RUe(t,e,i){const r=i,n=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=Pl(n.axes[0]),r.translation[1]=Pl(n.axes[1]),r.translation[2]=Pl(n.buttons[7])-Pl(n.buttons[6]),r.heading=Pl(n.axes[2]),r.tilt=Pl(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Pl(n.axes[0]),r.translation[1]=1.2*Pl(n.axes[1]),r.translation[2]=2*-Pl(n.axes[2]),r.heading=1.2*Pl(n.axes[5]),r.tilt=1.2*Pl(n.axes[3])),r.tilt*=o,Tfe(r.translation,r.translation,a),r}function LUe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let NUe=class extends bn{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new mO,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Oe(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Ew({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},It)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){var r;const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,PUe(this._transformation)):(this._currentDevice=e.data.device,RUe(e.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(e){var m;const i=this._transformation;if(LUe(i))return void((m=this._frameTask)==null?void 0:m.pause());const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=VUe*n*e;yR(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*FUe*e,a=this._view.constraints.rotationEnabled?-i.heading*DUe*e:0,l=this._view.size,u=[l[0]/2,l[1]];rfe(r,r,o,a,u,l);const p=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=p}};const DUe=.06,VUe=.7,FUe=6e-4;function Afe(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Bt(()=>document.removeEventListener("visibilitychange",e))}let jUe=class extends bn{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=Afe(n=>n?null:this._stopMovement())}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},zUe=class extends bn{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=Afe(n=>n?null:this._handleStop())}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(e.data.key);if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Bb;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(Bb||(Bb={}));let UUe=class extends bn{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=Bb.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=Bb.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case Bb.IN:o=s.zoomIn();break;case Bb.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const QUe=.6;let BUe=class extends bn{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,o=1/QUe**(1/60*s),a=i.zoom(o,[r,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},qUe=class extends bn{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new gR({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function GY(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>HUe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function GUe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function ZUe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function HUe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let WUe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,GY(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(ZY(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new i9(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Ew({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;ZY(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=GY(s),l=r||ZUe(a);o&&(o.timestamp===n.timestamp||!o.active&&l||GUe(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}};function XUe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function ZY(t){for(const e of navigator.getGamepads())XUe(e)&&t(e)}const HY=te("edge"),YUe=te("chrome"),JUe=te("ff"),KUe=te("safari"),WY="esri-view-surface",lv={touchNone:`${WY}--touch-none`,touchPan:`${WY}--touch-pan`};let Ife=class Pfe{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new WUe(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=bi(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(AN[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&AN[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(AN[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?lv.touchNone:lv.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?lv.touchPan:lv.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(lv.touchNone),this._element.classList.remove(lv.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=gpe(this._element,e);return Pfe.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&te("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:HY&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}HY?r*=.7:YUe||KUe?r*=.6:JUe&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};Ife.test={disableSubpixelCoordinates:!1};const AN={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let eQe=class extends bn{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const Wn={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function rI(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function tQe(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function iQe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Xr()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[k,M]=t,[R,D]=[M.x-k.x,M.y-k.y];return e.radius=Math.sqrt(R*R+D*D)/2,e.center.x=(k.x+M.x)/2,e.center.y=(k.y+M.y)/2,e}let i=0,r=0;for(let k=0;k<t.length;k++)i+=t[k].x,r+=t[k].y;i/=t.length,r/=t.length;const n=t.map(k=>k.x-i),s=t.map(k=>k.y-r);let o=0,a=0,l=0,u=0,p=0,m=0,g=0;for(let k=0;k<n.length;k++){const M=n[k],R=s[k],D=M*M,L=R*R;o+=D,a+=L,l+=M*R,u+=D*M,p+=L*R,m+=M*L,g+=R*D}const w=.5*(u+m),O=.5*(p+g),_=o*a-l*l,x=(w*a-O*l)/_,T=(o*O-l*w)/_,E=Xr(x+i,T+r);return{radius:Math.sqrt(x*x+T*T+(o+a)/t.length),center:E}}function $g(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}let rQe=class extends bn{constructor(e=Wn.maximumDoubleClickDelay,i=Wn.maximumDoubleClickDistance,r=Wn.maximumDoubleTouchDelay,n=Wn.maximumDoubleTouchDistance,s=gO){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Xr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new gR({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=qi(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=qi(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=IN("begin",Xr(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=IN("update",Xr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=IN("end",Xr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=$g(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),rI(n.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=$g(i),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function IN(t,e,i){const{button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}=i;return{action:t,delta:e,button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}}let nQe=class extends bn{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:sQe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=BE(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=XC(n,Rfe(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=BE(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=BE(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=XC(r,i)-e,r.lastAngle=XC(r,i)-e})}_emitEvent(e,i,r){const n=BE(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Rfe(t){const e=[];return t.forEach(i=>{e.push(Xr(i.event.x,i.event.y))}),iQe(e)}function BE(t){const e=Rfe(t);let i=0;return t.forEach(r=>{let n=XC(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const o=n-r.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function sQe(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function XC(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}var XY;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(XY||(XY={}));let oQe=class extends bn{constructor(e=Wn.maximumDoubleClickDelay,i=Wn.maximumDoubleClickDistance,r=Wn.maximumDoubleTouchDelay,n=Wn.maximumDoubleTouchDistance,s=gO){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=$g(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=$g(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),rI(s,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):rI(n,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=$g(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},aQe=class extends bn{constructor(e=Wn.maximumClickDelay,i=Wn.movementUntilMouseDrag,r=Wn.movementUntilPenDrag,n=Wn.movementUntilTouchDrag,s=Wn.holdDelay,o=gO){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",a=>this._handlePointerDown(a)),this.registerIncoming("pointer-up",a=>this._handlePointerLoss(a,"pointer-up")),this.registerIncoming("pointer-capture-lost",a=>this._handlePointerLoss(a,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",a=>this._handlePointerLoss(a,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",a=>this._handlePointerMove(a)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=qi(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(qE("update",n,i),void 0,n.modifiers):tQe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(qE("start",n,i)):this._pointerDrag.emit(qE("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(qE("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function qE(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let lQe=class extends bn{constructor(e=Wn.maximumDoubleClickDelay,i=Wn.maximumDoubleClickDistance,r=Wn.maximumDoubleTouchDelay,n=Wn.maximumDoubleTouchDistance,s=gO){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=qi(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=qi(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=uQe(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,l=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;rI(o,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=$g(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=$g(i),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function uQe(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const GE={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},YY=Symbol("handles");let by=class extends Ce{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([Kn(()=>!e(),()=>this._disconnect()),Kn(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(YY),this._inputManager=bi(this._inputManager)}_connect(){const e=this.view.surface,i=new Ife(e,this.view.input),r=[new oQe,new aQe,new lQe,new nQe(this.view.navigation),new rQe],n=new Ra({eventSource:i,recognizers:r}),s=new Z6e(this.view,["primary"]),o=new H6e(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new eQe],bc.INTERNAL),n.installHandlers("navigation",[new qUe(this.view),new NUe(this.view),new BUe(this.view),new QY(this.view),new QY(this.view,[GE.counter]),s,new jUe(this.view,GE.pan),new UUe(this.view,GE.zoom),new zUe(this.view,GE.rotate),o,new G6e(this.view,"touch")],bc.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,this.addHandles([Oe(()=>{var a,l;return(l=(a=this.view)==null?void 0:a.navigation)==null?void 0:l.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},It),Oe(()=>{const{actionMap:a}=this.view.navigation;return{panActions:UY("pan",a),rotateActions:UY("rotate",a)}},({panActions:a,rotateActions:l})=>{s.pointerActions=a,o.pointerActions=l},Us)],YY)}get test(){}};h([f()],by.prototype,"view",void 0),h([f()],by.prototype,"latestPointerType",null),h([f()],by.prototype,"latestPointerLocation",null),h([f()],by.prototype,"multiTouchActive",null),by=h([A("esri.views.2d.input.MapViewInputManager")],by);const cQe=by,JY=160;let y_=class extends Ce{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=JY&&this.clear()},JY))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};h([f()],y_.prototype,"_timer",void 0),h([f()],y_.prototype,"stationary",null),y_=h([A("esri.views.2d.support.StationaryManager")],y_);const hQe=t=>{let e=class extends t{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new ds({constraints:new zY({view:this})}),this.goToManager=new WC({view:this}),this.stationaryManager=new y_,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new z6e(this),this.inputManager=new cQe({view:this}),this.viewEvents=new ype(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Oe(()=>this.viewpoint,()=>this.stationaryManager.flip(),mu),this.on("resize",r=>this.stateManager.resize(r.width,r.height))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var i;return((i=this.stateManager)==null?void 0:i.extent)??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(i){const r=this._get("animation");if(i===r)return;if(r&&r.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const n=()=>{var s;this.destroyed||i===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame())};i.when(n,n)}get constraints(){var i;return(i=this.stateManager)==null?void 0:i.constraints}set constraints(i){i.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=i,r==null||r.destroy()}get padding(){var i;return(i=this.stateManager)==null?void 0:i.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}on(i,r,n,s){return this.inputManager&&this.viewEvents.on(i,r,n,s)||super.on(i,r)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,r){return this.goToManager.goTo(i,r)}};return h([f({readOnly:!0})],e.prototype,"animationManager",void 0),h([f({readOnly:!0})],e.prototype,"fullOpacity",void 0),h([f()],e.prototype,"stateManager",void 0),h([f()],e.prototype,"constraintsInfo",null),h([f()],e.prototype,"extent",null),h([f()],e.prototype,"goToManager",void 0),h([f({readOnly:!0})],e.prototype,"state",null),h([f({readOnly:!0})],e.prototype,"mapViewNavigation",void 0),h([f()],e.prototype,"renderingOptions",void 0),h([f({readOnly:!0})],e.prototype,"interacting",null),h([f()],e.prototype,"stationary",null),h([f()],e.prototype,"animation",null),h([f({type:zY})],e.prototype,"constraints",null),h([f({readOnly:!0})],e.prototype,"inputManager",void 0),h([f()],e.prototype,"padding",null),h([f()],e.prototype,"resizeAlign",null),h([f()],e.prototype,"rotation",null),h([f({readOnly:!0})],e.prototype,"viewEvents",void 0),h([f({type:fn})],e.prototype,"viewpoint",null),e=h([A("esri.views.Viewport2DMixin")],e),e};let KY=class{constructor(e){this._view=e,this.viewpoint=new fn({targetGeometry:new Ot,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return tfe(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=Qle(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=kP(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=CS(e.center.x,i.center.x,n),l.y=CS(e.center.y,i.center.y,n),this.viewpoint.scale=CS(e.scale,i.scale+a,o);let u=e.rotation;const p=i.rotation;Math.abs(p-u)>=180&&(u+=360*(u<p?1:-1)),this.viewpoint.rotation=CS(u,p,s)}copyFrom(e){Os(this.viewpoint,e.viewpoint),this._view=e.view}};function oS(t,e,i,r){const n=3*t,s=3*(i-t)-n,o=1-n-s,a=3*e,l=3*(r-e)-a,u=1-a-l;function p(O){return((o*O+s)*O+n)*O}function m(O){return((u*O+l)*O+a)*O}function g(O){return(3*o*O+2*s)*O+n}function w(O,_){let x,T,E,k,M,R;for(E=O,R=0;R<8;R++){if(k=p(E)-O,Math.abs(k)<_)return E;if(M=g(E),Math.abs(M)<1e-6)break;E-=k/M}if(x=0,T=1,E=O,E<x)return x;if(E>T)return T;for(;x<T;){if(k=p(E),Math.abs(k-O)<_)return E;O>k?x=E:T=E,E=.5*(T-x)+x}return E}return function(O,_=1e-6){return m(w(O,_))}}const Ha={};Ha.ease=oS(.25,.1,.25,1),Ha.linear=oS(0,0,1,1),Ha.easeIn=Ha["ease-in"]=oS(.42,0,1,1),Ha.easeOut=Ha["ease-out"]=oS(0,0,.58,1),Ha.easeInOut=Ha["ease-in-out"]=oS(.42,0,.58,1);const dQe=t=>t,vR=t=>t*t,f9=t=>1-vR(1-t),pQe=t=>t<.5?vR(2*t)/2:(f9(2*(t-.5))+1)/2,m9=t=>t*t*t,Lfe=t=>1-m9(1-t),fQe=t=>t<.5?m9(2*t)/2:(Lfe(2*(t-.5))+1)/2,y9=t=>t*t*t*t,Nfe=t=>1-y9(1-t),mQe=t=>t<.5?y9(2*t)/2:(Nfe(2*(t-.5))+1)/2,g9=t=>t*t*t*t*t,Dfe=t=>1-g9(1-t),yQe=t=>t<.5?g9(2*t)/2:(Dfe(2*(t-.5))+1)/2,v9=t=>1-Math.cos(t*Math.PI/2),Vfe=t=>1-v9(1-t),gQe=t=>t<.5?v9(2*t)/2:(Vfe(2*(t-.5))+1)/2,b9=t=>2**(10*(t-1)),w9=t=>1-b9(1-t),vQe=t=>t<.5?b9(2*t)/2:(w9(2*(t-.5))+1)/2,O9=t=>-(Math.sqrt(1-t*t)-1),Ffe=t=>1-O9(1-t),bQe=t=>t<.5?O9(2*t)/2:(Ffe(2*(t-.5))+1)/2;function dl(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function pl(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const wQe=pl(dl(1),1),OQe=pl(dl(1),0),wj=pl(dl(1),.5),SQe=pl(dl(2),1),_Qe=pl(dl(2),0),xQe=pl(dl(2),.5),$Qe=pl(dl(3),1),TQe=pl(dl(3),0),EQe=pl(dl(3),.5),kQe=pl(dl(4),1),CQe=pl(dl(4),0),MQe=pl(dl(4),.5),eJ={linear:dQe,"in-quad":vR,"out-quad":f9,"in-out-quad":pQe,"in-coast-quad":wQe,"out-coast-quad":OQe,"in-out-coast-quad":wj,"in-cubic":m9,"out-cubic":Lfe,"in-out-cubic":fQe,"in-coast-cubic":SQe,"out-coast-cubic":_Qe,"in-out-coast-cubic":xQe,"in-quart":y9,"out-quart":Nfe,"in-out-quart":mQe,"in-coast-quart":$Qe,"out-coast-quart":TQe,"in-out-coast-quart":EQe,"in-quint":g9,"out-quint":Dfe,"in-out-quint":yQe,"in-coast-quint":kQe,"out-coast-quint":CQe,"in-out-coast-quint":MQe,"in-sine":v9,"out-sine":Vfe,"in-out-sine":gQe,"in-expo":b9,"out-expo":w9,"in-out-expo":vQe,"in-circ":O9,"out-circ":Ffe,"in-out-circ":bQe,ease:t=>Ha.ease(t),"ease-in":t=>Ha.easeIn(t),"ease-out":t=>Ha.easeOut(t),"ease-in-out":t=>Ha.easeInOut(t)};let AQe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const nI={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},jfe={maxDuration:4e3};let IQe=class zfe{constructor(e){this._createCamera=e,this.compared=new AQe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:nI.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new zfe(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??nI.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Ws()}get hasFov(){return Math.abs(this.compared.fov)>Ws()}get hasRotate(){return this.compared.rotate>Ws()}},PQe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},RQe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,n=0;const s=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],u=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,i),s.hasPan&&!isNaN(i.pan)&&isFinite(s.compared.pan)?i.pan=(r+u.compared.pan*i.pan)/s.compared.pan:i.pan=1,s.hasRotate&&!isNaN(i.rotate)&&isFinite(s.compared.rotate)?i.rotate=(n+u.compared.rotate*i.rotate)/s.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(u.compared.targetZoom)){const{sourceZoom:p,targetZoom:m}=u.compared,g=i.zoom*(m-p)+p,w=this.segments[0].definition.compared.sourceZoom,O=this.segments[this.segments.length-1].definition.compared.targetZoom,_=Math.abs(m-w)>Math.abs(p-w)?m:p;i.zoomOffset=_-O,i.zoom=(g-w)/(_-w)}else i.zoom=1;return i}e-=l.time,r+=u.compared.pan,n+=u.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},PN=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;r&&(n&&(o=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&n&&s){const u=o+a+o*a;this._zoomPixelFlow=o*a/u*l,this._panPixelFlow=a/u*l,this._rotatePixelFlow=o/u*l}else if(r&&n){const u=1+o;this._zoomPixelFlow=o/u*l,this._panPixelFlow=1/u*l}else if(r&&s){const u=1+a;this._zoomPixelFlow=a/u*l,this._rotatePixelFlow=1/u*l}else if(n&&s){const u=this._panPixelsAtSource/this._rotatePixels,p=1+u;this._panPixelFlow=u/p*l,this._rotatePixelFlow=1/p*l}else n?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const u=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=u,this._panPixelFlow/=u,this._rotatePixelFlow/=u}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/LQe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const LQe=kP(45);function NQe(t,e,i){const r=e-t.compared.sourceZoom,n=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+n)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*n)}function DQe(t,e,i){const r=1/e,n=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,u=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*l*u-t.halfWindowSize*n*s*o*l+t.halfWindowSize*n*s*o*u/(a*a)}function VQe(t,e,i){const r=e-t.compared.sourceZoom,n=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),a=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a+2*n*o+2*s-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function FQe(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function jQe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function zQe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function UQe(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function QQe(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function BQe(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function qQe(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function GQe(t,e,i){const r=Math.log(e/t.compared.targetZoom),n=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*n*s*a+t.halfWindowSize*r*n*s*l/(o*o)+t.halfWindowSize*n*s*a*l/e}function ZQe(t,e,i){const r=e-t.compared.targetZoom,n=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a-2*n*o+2*s+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function HQe(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function WQe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function XQe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function YQe(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,n=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*n);return t.compared.sourceZoom<=t.compared.targetZoom?s*(i-n):s*(i+n)}function JQe(t,e){let i=KQe(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},n=r.ascensionFactor===0,s=r.descensionFactor===0,o=n?FQe:NQe,a=n?jQe:DQe,l=n?zQe:VQe,u=s?HQe:qQe,p=s?WQe:GQe,m=s?XQe:ZQe,g=M=>o(t,M,r)+UQe(t,M,r)+u(t,M,r),w=M=>a(t,M,r)+QQe(t,M,r)+p(t,M,r),O=M=>l(t,M,r)+BQe(t,M,r)+m(t,M,r);let _=g(i);const x=YQe(t);let T;const E=e.maximumIterations||20,k=e.maximumDistance!=null?e.maximumDistance:1/0;for(T=0;T<E;T++){const M=e.desiredSlope??1e-6;let R=w(i);Math.abs(R)>M&&(R+=M);const D=R/O(i);if(isNaN(D)||i>=k&&D<0){if(!isFinite(k))return null;i=k,_=g(i);break}if(i-=D,i<t.compared.sourceZoom||i<t.compared.targetZoom)return null;const L=g(i);if(Math.abs(L-_)/_<=.005)break;_=L}return _>x*(1-.3)||i<t.compared.sourceZoom||i<t.compared.targetZoom?null:i}function KQe(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let e8e=class extends RQe{constructor(e,i){super(),this._preallocSegments=[new PN,new PN,new PN],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i!=null&&i.apex?JQe(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=f9(r.zoom):e===this._descensionSegment&&(r.zoom=vR(r.zoom))}_updateWithApex(e,i){const[r,n,s]=this._preallocSegments,o=(i==null?void 0:i.ascensionFactor)??.5,a=Math.min(1-o,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=e,n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+l,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const t8e=new PQe;let i8e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=wj,this.definition=new IQe(e),this.path=new e8e}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(mke(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?wj:w9)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,t8e);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??nI.minDuration/r,s=i.maxDuration??nI.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,n),s)}};const r8e=2e3,n8e=64;let s8e=class{constructor(e){this._view=e,this._animation=new i8e(()=>new KY(this._view)),this._current=new KY(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){Os(this._current.viewpoint,e),Os(this._source.viewpoint,e),Os(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),Os(e,this._current.viewpoint)}},qv=class extends Ce{constructor(e){super(e),this._animation=null,this._destinationViewState=new p9,this.updateFunction=null,this.easing=eJ.ease,this.viewpoint=new fn({targetGeometry:new Ot,scale:0,rotation:0}),this._updateTask=Ew({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new s8e(e.view)}destroy(){this._updateTask=qi(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const n=this.viewpoint;Os(n,i);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(i.scale,s.scale)*n8e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??jfe.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?eJ[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,o8e(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new mj({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==mj.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function o8e(t,e,i,r){if((e==null?void 0:e.duration)!=null)return!0;const{time:n,isLinear:s}=t,o=(e==null?void 0:e.speedFactor)||1;if(n>((e==null?void 0:e.maxDuration)??jfe.maxDuration/o))return!1;if(s){const l=hr(),u=Xr(...r.toScreen(l,...i.center)),p=Xr(...i.toScreen(l,...r.center)),m=p!=null&&p.x>-1*i.size[0]&&p.x<(1.5+.5)*i.size[0]&&p.y>-1*i.size[1]&&p.y<(1.5+.5)*i.size[1],g=u!=null&&u.x>-1*r.size[0]&&u.x<(1.5+.5)*r.size[0]&&u.y>-1*r.size[1]&&u.y<(1.5+.5)*r.size[1];if(n>r8e/o&&!m&&!g)return!1}return!0}h([f()],qv.prototype,"easing",void 0),h([f()],qv.prototype,"view",void 0),h([f()],qv.prototype,"viewpoint",void 0),qv=h([A("esri.views.2d.AnimationManager")],qv);const a8e=qv;function Ai(){return Promise.all([J(()=>import("./webglDeps-DwTwP9Vx.js"),__vite__mapDeps([148,121,12,149,150,151])),J(()=>import("./mapViewDeps-B5fvDLuQ.js"),__vite__mapDeps([152,69,153,67,68,13,12,70,71,72,65,74,154,149,121,150,125,106,66,38,155,64,89,156,110,78,15,11,80,157,75,76,77,158,4,109,148,151,159,85,160,63,18,8,17,23,161,116,104,123,162,54,163,79,164,165,73,166,43,61,167,168,169,170,118,171,172]))])}const aS=()=>Ai().then(()=>J(()=>import("./TileLayerView2D-DuC4YpCu.js"),__vite__mapDeps([173,72,66,70,67,68,69,13,12,71,65,158,4,156,155,64,38,150,121,89,110,78,15,11,109,159,154,149,125,106,153,74,80,85,160,63,18,8,17,23,54,75,76,77,116,104,166,43,61,174,175,170,176,177,168,169,178,179,180,181]))),Qm=()=>Ai().then(()=>J(()=>import("./FeatureLayerView2D-0MmTY_TV.js").then(t=>t.F),__vite__mapDeps([182,15,11,12,13,183,184,185,18,8,26,176,156,169,66,64,38,65,149,121,170,155,150,89,110,78,153,67,68,69,70,71,72,74,154,125,106,80,85,157,84,181,178]))),tJ={"base-dynamic":()=>Ai().then(()=>J(()=>import("./BaseDynamicLayerView2D-CjH21iO6.js"),__vite__mapDeps([186,187,155,64,38,65,150,121,12,89,156,110,78,15,11,13,175,154,149,125,106,74,176,188,178]))),"base-tile":aS,"bing-maps":aS,catalog:()=>Ai().then(()=>J(()=>import("./CatalogLayerView2D-hU99PYke.js"),__vite__mapDeps([189,176,156]))),"catalog-dynamic-group":()=>Ai().then(()=>J(()=>import("./CatalogDynamicGroupLayerView2D-BhXG2i9z.js"),__vite__mapDeps([190,176,156]))),"catalog-footprint":()=>Ai().then(()=>J(()=>import("./CatalogFootprintLayerView2D-jCyXCD69.js"),__vite__mapDeps([191,182,15,11,12,13,183,184,185,18,8,26,176,156,169,66,64,38,65,149,121,170,155,150,89,110,78,153,67,68,69,70,71,72,74,154,125,106,80,85,157,84,181,178]))),csv:Qm,"geo-rss":()=>Ai().then(()=>J(()=>import("./GeoRSSLayerView2D-D7-lEKE1.js"),__vite__mapDeps([192,176,156,167,168,169,66,64,38,65,149,121,12,170,155,150,89,110,78,15,11,13,153,67,68,69,70,71,72,74,154,125,106,80,166,158,4,63,18,8,17,23,43,61]))),feature:Qm,geojson:Qm,parquet:Qm,graphics:()=>Ai().then(()=>J(()=>import("./GraphicsLayerView2D-CEUeAyIh.js"),__vite__mapDeps([193,176,156,167,168,169,66,64,38,65,149,121,12,170,155,150,89,110,78,15,11,13,153,67,68,69,70,71,72,74,154,125,106,80,166,158,4,63,18,8,17,23,43,61]))),group:()=>Ai().then(()=>J(()=>import("./GroupLayerView2D-D6Vye4SO.js"),__vite__mapDeps([194,176,156]))),imagery:()=>Ai().then(()=>J(()=>import("./ImageryLayerView2D-BxY3E8C5.js"),__vite__mapDeps([195,196,121,12,38,94,155,64,65,150,89,156,110,78,15,11,13,176,166,67,68,69,70,71,72,158,4,63,66,18,8,17,23,153,74,154,149,125,106,80,43,61,177,168,169,170,187,175,188,95,183,181,178]))),"imagery-tile":()=>Ai().then(()=>J(()=>import("./ImageryTileLayerView2D-DhTmmfzs.js").then(t=>t.I),__vite__mapDeps([197,196,121,12,38,94,155,64,65,150,89,156,110,78,15,11,13,176,198,164,77,149,170,95,183,181,178]))),kml:()=>Ai().then(()=>J(()=>import("./KMLLayerView2D-CBBQJ7o6.js").then(t=>t.K),__vite__mapDeps([199,175,156,154,149,121,12,150,125,106,74,187,155,64,38,65,89,110,78,15,11,13,176,167,168,169,66,170,153,67,68,69,70,71,72,80,166,158,4,63,18,8,17,23,43,61,95,164,77,161,148,151,116,104,160,123,198]))),"knowledge-graph":()=>Ai().then(()=>J(()=>import("./KnowledgeGraphLayerView2D-DuLLJsn6.js"),__vite__mapDeps([200,176,156]))),"link-chart":()=>Ai().then(()=>J(()=>import("./KnowledgeGraphLayerView2D-DuLLJsn6.js"),__vite__mapDeps([200,176,156]))),"knowledge-graph-sublayer":Qm,"map-image":()=>Ai().then(()=>J(()=>import("./MapImageLayerView2D-BPzAKZTR.js"),__vite__mapDeps([201,187,155,64,38,65,150,121,12,89,156,110,78,15,11,13,175,154,149,125,106,74,176,166,67,68,69,70,71,72,158,4,63,66,18,8,17,23,153,80,43,61,177,168,169,170,188,183,178,179,180,181]))),"map-notes":()=>Ai().then(()=>J(()=>import("./MapNotesLayerView2D-CS-YbP5h.js"),__vite__mapDeps([202,176,156,167,168,169,66,64,38,65,149,121,12,170,155,150,89,110,78,15,11,13,153,67,68,69,70,71,72,74,154,125,106,80,166,158,4,63,18,8,17,23,43,61]))),media:()=>Ai().then(()=>J(()=>import("./MediaLayerView2D-CH80rAWe.js").then(t=>t.M),__vite__mapDeps([203,63,64,38,65,66,18,8,17,15,11,12,13,23,67,68,69,70,71,72,4,158,156,155,150,121,89,110,78,109,159,154,149,125,106,153,74,80,85,160,54,75,76,77,116,104,166,43,61,163,79,204,165,176]))),"ogc-feature":()=>Ai().then(()=>J(()=>import("./OGCFeatureLayerView2D-BmDx1G_0.js"),__vite__mapDeps([205,182,15,11,12,13,183,184,185,18,8,26,176,156,169,66,64,38,65,149,121,170,155,150,89,110,78,153,67,68,69,70,71,72,74,154,125,106,80,85,157,84,181,178]))),"open-street-map":aS,"oriented-imagery":Qm,route:()=>Ai().then(()=>J(()=>import("./RouteLayerView2D-DhLx2Fpf.js").then(t=>t.R),__vite__mapDeps([206,176,156,167,168,169,66,64,38,65,149,121,12,170,155,150,89,110,78,15,11,13,153,67,68,69,70,71,72,74,154,125,106,80,166,158,4,63,18,8,17,23,43,61]))),stream:()=>Ai().then(()=>J(()=>import("./StreamLayerView2D-dEaClrP_.js"),__vite__mapDeps([207,182,15,11,12,13,183,184,185,18,8,26,176,156,169,66,64,38,65,149,121,170,155,150,89,110,78,153,67,68,69,70,71,72,74,154,125,106,80,85,157,84,181,178]))),"subtype-group":()=>Ai().then(()=>J(()=>import("./SubtypeGroupLayerView2D-BfBuxmqQ.js"),__vite__mapDeps([208,182,15,11,12,13,183,184,185,18,8,26,176,156,169,66,64,38,65,149,121,170,155,150,89,110,78,153,67,68,69,70,71,72,74,154,125,106,80,85,157,84,181,178]))),tile:aS,"vector-tile":()=>Ai().then(()=>J(()=>import("./VectorTileLayerView2D-DDZ4uZC3.js"),__vite__mapDeps([209,109,70,54,12,71,72,121,110,155,64,38,65,150,89,156,78,15,11,13,170,16,111,176,178]))),video:()=>Ai().then(()=>J(()=>import("./VideoLayerView2D-342eC2sW.js").then(t=>t.V),__vite__mapDeps([210,211,204,89,155,64,38,65,150,121,12,156,110,78,15,11,13,153,67,68,69,70,71,72,74,154,149,125,106,66,80,165,176,167,168,169,170,166,158,4,63,18,8,17,23,43,61]))),wcs:()=>Ai().then(()=>J(()=>import("./ImageryTileLayerView2D-DhTmmfzs.js").then(t=>t.I),__vite__mapDeps([197,196,121,12,38,94,155,64,65,150,89,156,110,78,15,11,13,176,198,164,77,149,170,95,183,181,178]))),"web-tile":aS,wfs:Qm,wms:()=>Ai().then(()=>J(()=>import("./WMSLayerView2D-D16tMBwV.js").then(t=>t.W),__vite__mapDeps([212,187,155,64,38,65,150,121,12,89,156,110,78,15,11,13,175,154,149,125,106,74,176,188,178,183]))),wmts:()=>Ai().then(()=>J(()=>import("./WMTSLayerView2D-CDCapNrQ.js"),__vite__mapDeps([213,174,175,156,154,149,121,12,150,125,106,74,155,64,38,65,89,110,78,15,11,13,170,176,178]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function l8e(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new G(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const iJ={hasLayerViewModule:t=>tJ[t.type]!=null,importLayerView:t=>{const e=tJ[t.type];if(e==null)throw l8e(t);return e(t)}};let qf=class wy{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new wy(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new wy(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const n=this.clone();return n.col+=e,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new wy(e,i,r,n),new wy(e,i,r+1,n),new wy(e,i+1,r,n),new wy(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};qf.pool=new a0(qf,null,null,25,50);function uv(t,e){return[t,e]}function Bm(t,e,i){return t[0]=e,t[1]=i,t}function u8e(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const Rl=new qf("0/0/0/0");let c8e=class Ufe{static create(e,i,r=null){const n=Zs(e.spatialReference),s=i.origin||uv(e.origin.x,e.origin.y),o=uv(e.size[0]*i.resolution,e.size[1]*i.resolution),a=uv(-1/0,-1/0),l=uv(1/0,1/0),u=uv(1/0,1/0);r!=null&&(Bm(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),Bm(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),Bm(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:p,rows:m}=i;let g,w,O,_;return!r&&p&&m&&(Bm(a,p[0],m[0]),Bm(l,p[1],m[1]),Bm(u,p[1]-p[0]+1,m[1]-m[0]+1)),e.isWrappable?(g=uv(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),u[1]),w=!0,O=n.origin,_=n.valid):(g=u,w=!1),new Ufe(i.level,i.resolution,i.scale,s,a,l,u,o,g,w,O,_)}constructor(e,i,r,n,s,o,a,l,u,p,m,g){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=u,this.wrap=p,this._spatialReferenceOrigin=m,this._spatialReferenceValid=g}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?n[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){Rl.set(i);const n=r?Rl.col:this.denormalizeCol(Rl.col,Rl.world),s=Rl.row;return u8e(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){Rl.set(i);const n=r?Rl.col:this.denormalizeCol(Rl.col,Rl.world);return Array.isArray(e)?Bm(e,this.getXForColumn(n),this.getYForRow(Rl.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(Rl.row)),e}},m$=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let s=r;s<=n;s++){const o=e.getWorldForColumn(s);yield new qf(e.level,i,e.normalizeCol(s),o)}}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++)e.call(i,s,o,n.normalizeCol(u),n.getWorldForColumn(u))}};m$.pool=new a0(m$);let RN=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const Ni=new qf("0/0/0/0");let h8e=class Qfe{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,o]=i,a=s-r,l=o-n,u=l!==0?a/l:0,p=(Math.ceil(n)-n)*u,m=(Math.floor(n)-n)*u;return new Qfe(r,Math.floor(n),Math.ceil(o),u,a<0?p:m,a<0?m:p,a<0?s:r,a<0?r:s)}constructor(e,i,r,n,s,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const jo=[[0,0],[0,0],[0,0],[0,0]],d8e=1e-6;let p8e=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=r&&a.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>c8e.create(e,a,i));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){Ni.set(i);const n=this._infoByLevel[Ni.level];return n?n.getTileBounds(e,Ni,r):e}getTileCoords(e,i,r=!1){Ni.set(i);const n=this._infoByLevel[Ni.level];return n?n.getTileCoords(e,Ni,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=m$.pool.acquire(s),a=this._wrap;let l,u,p,m=1/0,g=-1/0;const w=o.spans;jo[0][0]=jo[0][1]=jo[1][1]=jo[3][0]=-i,jo[1][0]=jo[2][0]=e.size[0]+i,jo[2][1]=jo[3][1]=e.size[1]+i;for(const T of jo)e.toMap(T,T),T[0]=s.getColumnForX(T[0]),T[1]=s.getRowForY(T[1]);const O=[];let _=3;for(let T=0;T<4;T++){if(jo[T][1]===jo[_][1]){_=T;continue}const E=h8e.create(jo[T],jo[_]);m=Math.min(E.ymin,m),g=Math.max(E.ymax,g),O[E.ymin]===void 0&&(O[E.ymin]=[]),O[E.ymin].push(E),_=T}if(m==null||g==null||g-m>100)return null;let x=[];for(l=m;l<g;){O[l]!=null&&(x=x.concat(O[l])),u=1/0,p=-1/0;for(let T=x.length-1;T>=0;T--){const E=x[T];u=Math.min(u,E.getLeftCol()),p=Math.max(p,E.getRightCol())}if(u=Math.floor(u),p=Math.floor(p),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const T=Math.floor(p/s.worldSize[0]);for(let E=Math.floor(u/s.worldSize[0]);E<=T;E++)w.push(new RN(l,Math.max(s.getFirstColumnForWorld(E),u),Math.min(s.getLastColumnForWorld(E),p)))}else w.push(new RN(l,u,p));else u>s.last[0]||p<s.first[0]||(u=Math.max(u,s.first[0]),p=Math.min(p,s.last[0]),w.push(new RN(l,u,p)));l+=1;for(let T=x.length-1;T>=0;T--){const E=x[T];E.ymax>=l?E.incrRow():x.splice(T,1)}}return o}getTileParentId(e){Ni.set(e);const i=this._infoByLevel[Ni.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Ni,this._lodInfos[r],Ni),Ni.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Ni.set(i);const r=this._infoByLevel[Ni.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(Ni,n,Ni);const o=n.denormalizeCol(Ni.col,Ni.world);for(const a of e.spans)if(a.row===Ni.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,a,l,u]=e.spans.reduce((_,x)=>(_[0]=Math.min(_[0],x.row),_[1]=Math.max(_[1],x.row),_[2]=Math.min(_[2],x.colFrom),_[3]=Math.max(_[3],x.colTo),_),[1/0,-1/0,1/0,-1/0]),p=r.denormalizeCol(Ni.col,Ni.world),m=n.getColumnForX(r.getXForColumn(p)),g=n.getRowForY(r.getYForRow(Ni.row)),w=n.getColumnForX(r.getXForColumn(p+1))-1,O=n.getRowForY(r.getYForRow(Ni.row+1))-1;return!(m>u||w<l||g>a||O<o)}const s=n.denormalizeCol(Ni.col,Ni.world);return e.spans.some(o=>o.row===Ni.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=Zs(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+d8e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}},f8e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},m8e=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new xg,this._controllers=new xg,this._processingItems=new xg,this._pausedSignal=Vw(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new IA(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=qi(this._schedule),this._task=qi(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=Co(i,()=>n.abort()));const o=()=>{const p=this._processingItems.get(e);p&&p.controller.abort(),a(),u.reject(Wt())},a=()=>{l.remove(),s!=null&&s.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=vQ(n.signal,o),u=ha();return this._deferreds.set(e,u),this._controllers.set(e,n),u.promise.then(a,a),this._queue.push(e),this._scheduleNext(),u.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var i;const e=this._queue.popLast();return e&&((i=this._deferreds.get(e))==null||i.reject(Wt()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=u2(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new f8e(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}Rc(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){}};const rJ=[0,0];let Ch=class extends Ce{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:n}=this;this._queue=new m8e({concurrency:e,scheduler:r,priority:n,process:(s,o)=>{const a=this._keyToItem.get(s);return i(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=bi(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(e.key),s=c2(this._tilesByScale,n,()=>new Set),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return s.add(e.key),this._keyToItem.set(i,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const o of e)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(uae(a,l=>i.has(l))){const l=Math.abs(o-r);l<s&&(n=a,s=l)}return this._getClosestTileKey(n,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,n=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of e)if(i.has(a.id)){r.getTileCoords(rJ,a);const l=dR(rJ,n);l<o&&(o=l,s=a)}return s}};h([f({constructOnly:!0})],Ch.prototype,"concurrency",void 0),h([f({constructOnly:!0})],Ch.prototype,"priority",void 0),h([f({constructOnly:!0})],Ch.prototype,"process",void 0),h([f({constructOnly:!0})],Ch.prototype,"scheduler",void 0),h([f()],Ch.prototype,"state",void 0),h([f({constructOnly:!0})],Ch.prototype,"tileInfoView",void 0),Ch=h([A("esri.views.2d.tiling.TileQueue")],Ch);const mwt=Ch;let y8e=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];nJ(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],u=r*o[1],p=[0,0],m=[0,0];for(s.sort((g,w)=>(p[0]=a.x+l*(g.col+.5),p[1]=a.y-u*(g.row+.5),m[0]=a.x+l*(w.col+.5),m[1]=a.y-u*(w.row+.5),JA(p,i)-JA(m,i)));s.length>0;){const g=s.pop();if(this._removeTile(g.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),nJ(this._tilePerId,e)}};function nJ(t,e){t.delete(e)}const qm=new qf(0,0,0,0),hh=new Map,lS=[],LN=[];let gwt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new y8e(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var T,E;const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,u=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>a||n<l))return this.tiles.length=0,void this.clear();const p=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!p)return this.tiles.length=0,void this.clear();const{spans:m,lodInfo:g}=p,{level:w}=g;this.tiles.length=0,r.forEach(k=>k.visible=!0);let O=0,_=0;if(m.length>0)for(const{row:k,colFrom:M,colTo:R}of m)for(let D=M;D<=R;D++){O++;const L=qm.set(w,k,g.normalizeCol(D),g.getWorldForColumn(D)).id;let F=r.get(L);if(F)F.isReady?(hh.set(L,F),_++):u||this._addParentTile(L,hh);else{if((T=this._tileCache)!=null&&T.has(L)){if(F=this._tileCache.pop(L),this.tileIndex.set(L,F),F.isReady){hh.set(L,F),_++;continue}}else F=this.acquireTile(qm),this.tileIndex.set(L,F);u||this._addParentTile(L,hh)}}const x=_===O;for(const[k,M]of r){if(hh.has(k))continue;qm.set(k);const R=this.tileInfoView.intersects(p,qm),D=this.cachePolicy==="purge"?qm.level!==w:qm.level>w;!R||!u&&x?!D&&R||lS.push(M):M.isReady?D&&this.cachePolicy==="purge"&&this._hasReadyAncestor(qm,w)?lS.push(M):LN.push(M):D&&lS.push(M)}for(const k of LN)k.isReady&&hh.set(k.key.id,k);for(const k of lS)this._tileCache?this._tileCache.add(k):this.releaseTile(k),r.delete(k.key.id);for(const k of hh.values())this.tiles.push(k);for(const k of r.values())hh.has(k.key.id)||(k.visible=!1);(E=this._tileCache)==null||E.prune(w,s,o),m$.pool.release(p),LN.length=0,lS.length=0,hh.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())e(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var s;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=Gs();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=Gs();if(this.tileInfoView.getTileBounds(s,n.key,!0),wIe(s,r))return!0}return!1}};function g8e(t,e,i,r,n){Bfe(t,e,i||0,r||t.length-1,n||v8e)}function Bfe(t,e,i,r,n){for(;r>i;){if(r-i>600){var s=r-i+1,o=e-i+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);Bfe(t,e,Math.max(i,Math.floor(e-o*l/s+u)),Math.min(r,Math.floor(e+(s-o)*l/s+u)),n)}var p=t[e],m=i,g=r;for(uS(t,i,e),n(t[r],p)>0&&uS(t,i,r);m<g;){for(uS(t,m,g),m++,g--;n(t[m],p)<0;)m++;for(;n(t[g],p)>0;)g--}n(t[i],p)===0?uS(t,i,g):uS(t,++g,r),g<=e&&(i=g+1),e<=g&&(r=g-1)}}function uS(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function v8e(t,e){return t<e?-1:t>e?1:0}function sI(t,e){if(!(this instanceof sI))return new sI(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function b8e(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function cv(t,e){g_(t,0,t.children.length,e,t)}function g_(t,e,i,r,n){n||(n=Gv(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],v_(n,t.leaf?r(s):s);return n}function v_(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function sJ(t,e){return t.minX-e.minX}function oJ(t,e){return t.minY-e.minY}function NN(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ZE(t){return t.maxX-t.minX+(t.maxY-t.minY)}function w8e(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function O8e(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function DN(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function HE(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Gv(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function aJ(t,e,i,r,n){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,g8e(t,s,e,i,n),o.push(e,s,s,i))}sI.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!HE(t,e))return i;for(var n,s,o,a,l=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],HE(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):DN(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!HE(t,e))return!1;for(var r,n,s,o,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],HE(t,o=e.leaf?i(s):s)){if(e.leaf||DN(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Gv([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,n,s,o=this.data,a=this.toBBox(t),l=[],u=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=u.pop(),s=!0),o.leaf&&(n=b8e(t,o.children,e))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!DN(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(l.push(o),u.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:sJ,compareMinY:oJ,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,o=this._maxEntries;if(s<=o)return cv(n=Gv(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=Gv([])).leaf=!1,n.height=r;var a,l,u,p,m=Math.ceil(s/o),g=m*Math.ceil(Math.sqrt(o));for(aJ(t,e,i,g,this.compareMinX),a=e;a<=i;a+=g)for(aJ(t,a,u=Math.min(a+g-1,i),m,this.compareMinY),l=a;l<=u;l+=m)p=Math.min(l+m-1,u),n.children.push(this._build(t,l,p,r-1));return cv(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,a,l,u,p,m;r.push(e),!e.leaf&&r.length-1!==i;){for(p=m=1/0,n=0,s=e.children.length;n<s;n++)l=NN(o=e.children[n]),(u=w8e(t,o)-l)<m?(m=u,p=l<p?l:p,a=o):u===m&&l<p&&(p=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),v_(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=Gv(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,cv(i,this.toBBox),cv(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=Gv([t,e]),this.data.height=t.height+1,this.data.leaf=!1,cv(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,a,l,u,p;for(l=u=1/0,r=e;r<=i-e;r++)o=O8e(n=g_(t,0,r,this.toBBox),s=g_(t,r,i,this.toBBox)),a=NN(n)+NN(s),o<l?(l=o,p=r,u=a<u?a:u):o===l&&a<u&&(u=a,p=r);return p},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:sJ,n=t.leaf?this.compareMinY:oJ;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,a=g_(t,0,e,o),l=g_(t,i-e,i,o),u=ZE(a)+ZE(l);for(n=e;n<i-e;n++)s=t.children[n],v_(a,t.leaf?o(s):s),u+=ZE(a);for(n=i-e-1;n>=e;n--)s=t.children[n],v_(l,t.leaf?o(s):s),u+=ZE(l);return u},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)v_(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():cv(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function S8e(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let lJ=class qfe{constructor(e,i){this.key=new qf(0,0,0,0),this.bounds=Gs(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return vIe(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return S8e(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=Qs.acquire();for(let r=0;r<e.length;r++)i[r]=new qfe(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return dpe.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Gm={added:[],removed:[]},VN=new Set,_8e=new qf(0,0,0,0);function x8e(t,e){const i=Zs(e);if(!i)return null;const[r,n]=i.valid;return t[2]>n?[Gs([t[0],t[1],n,t[3]]),Gs([r,t[1],r+t[2]-n,t[3]])]:t[0]<r?[Gs([r,t[1],t[2],t[3]]),Gs([n-(r-t[0]),t[1],n,t[3]])]:null}let $8e=class extends ul{constructor(e){super(),this._tiles=new Map,this._index=sI(9,te("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||t8(e)===0||i8(e)===0)return[];const i=x8e(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new lJ(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++){const p=_8e.set(s,o,n.normalizeCol(u),n.getWorldForColumn(u)).id;if(VN.add(p),!this.has(p)){const m=new lJ(this.tileScheme,p);this._tiles.set(p,m),this._index.insert(m),this.tiles.push(m),Gm.added.push(m)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];VN.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Gm.removed.push(a))}(Gm.added.length||Gm.removed.length)&&this.emit("update",Gm),m$.pool.release(i),VN.clear(),Gm.added.length=0,Gm.removed.length=0}};const wwt=1e-30,uJ=512,WE=16777216,Owt=8,Swt=29,_wt=24,xwt=4,$wt=0,Twt=0,Ewt=0,kwt=1,Cwt=2,Mwt=3,Awt=4,Iwt=5,Pwt=6,Rwt=12,Lwt=13,Nwt=5,T8e=6,Dwt=5,Vwt=6;var cJ;(function(t){t[t.FilterFlags=0]="FilterFlags",t[t.Animation=1]="Animation",t[t.GPGPU=2]="GPGPU",t[t.VV=3]="VV",t[t.DD0=4]="DD0",t[t.DD1=5]="DD1",t[t.DD2=6]="DD2",t[t.LocalTimeOrigin=7]="LocalTimeOrigin"})(cJ||(cJ={}));const Gfe=6,E8e=1<<Gfe,Fwt=E8e<<1,jwt=1.05,zwt=3,Uwt=1,Qwt=3,Bwt=3,qwt=5,Gwt=6,Zwt=1.15,k8e=4,Hwt=128,C8e=256,Wwt=C8e-2*k8e,Xwt=2,Ywt=128,Jwt=1,Kwt=10,eOt=1024,tOt=128,iOt=4,rOt=1,nOt=1<<20,sOt=.75,oOt=10,aOt=.75,lOt=256,uOt=32,cOt=512,hOt=0,dOt=1,M8e=1,pOt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],fOt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],cS=256;var hJ,dJ,pJ,fJ,Oj,mJ,yJ,sc,Sj,_x,cn,oI,Ja,Ii,qe,y$,Zh,gJ,vJ,bJ;(function(t){t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t[t.COLOR=16384]="COLOR"})(hJ||(hJ={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(dJ||(dJ={})),function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(pJ||(pJ={})),function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(fJ||(fJ={})),function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(Oj||(Oj={})),function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(mJ||(mJ={})),function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"}(yJ||(yJ={})),function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"}(sc||(sc={})),function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"}(Sj||(Sj={})),function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"}(_x||(_x={})),function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(cn||(cn={})),function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(oI||(oI={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(Ja||(Ja={})),function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"}(Ii||(Ii={})),function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"}(qe||(qe={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(y$||(y$={})),function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(Zh||(Zh={})),function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"}(gJ||(gJ={})),function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"}(vJ||(vJ={})),function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(bJ||(bJ={}));const mOt=33984;var aI,wJ,OJ;(function(t){t[t.Texture=0]="Texture",t[t.BufferObject=1]="BufferObject",t[t.VertexArrayObject=2]="VertexArrayObject",t[t.Shader=3]="Shader",t[t.Program=4]="Program",t[t.FramebufferObject=5]="FramebufferObject",t[t.Renderbuffer=6]="Renderbuffer",t[t.TransformFeedback=7]="TransformFeedback",t[t.Sync=8]="Sync",t[t.UNCOUNTED=9]="UNCOUNTED",t[t.LinesOfCode=9]="LinesOfCode",t[t.Uniform=10]="Uniform",t[t.COUNT=11]="COUNT"})(aI||(aI={})),function(t){t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(wJ||(wJ={})),function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"}(OJ||(OJ={}));const yOt=33306;var Cn,SJ,_J,xJ,$J,TJ,EJ;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Cn||(Cn={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(SJ||(SJ={})),function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"}(_J||(_J={})),function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"}(xJ||(xJ={})),function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"}($J||($J={})),function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(TJ||(TJ={})),function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(EJ||(EJ={}));const A8e=()=>pe.getLogger("esri.views.webgl.checkWebGLError");function I8e(t,e){switch(e){case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const Zfe=!!te("enable-feature:webgl-debug");function Hfe(){return Zfe}function gOt(){return Zfe}function hv(t){if(Hfe()){const e=t.getError();if(e){const i=I8e(t,e),r=new Error().stack;A8e().error(new G("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}var _j;(function(t){t[t.Texture=0]="Texture",t[t.RenderBuffer=1]="RenderBuffer"})(_j||(_j={}));function P8e(t){switch(t){case sc.BYTE:case sc.UNSIGNED_BYTE:return 1;case sc.SHORT:case sc.UNSIGNED_SHORT:case sc.HALF_FLOAT:return 2;case sc.FLOAT:case sc.INT:case sc.UNSIGNED_INT:return 4}}function R8e(t){const e=t.gl;switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case e.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case e.INVALID_OPERATION:return"The specified command is not allowed for the current state";case e.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case e.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case e.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function vOt(t,e,i,r,n=0){var o;const s=t.gl;t.bindBuffer(i);for(const a of r){const l=e.get(a.name);if(l==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const u=n*a.stride;if(a.count<=4)s.vertexAttribPointer(l,a.count,a.type,a.normalized,a.stride,a.offset+u),s.enableVertexAttribArray(l),a.divisor>0&&t.gl.vertexAttribDivisor(l,a.divisor);else if(a.count===9)for(let p=0;p<3;p++)s.vertexAttribPointer(l+p,3,a.type,a.normalized,a.stride,a.offset+12*p+u),s.enableVertexAttribArray(l+p),a.divisor>0&&t.gl.vertexAttribDivisor(l+p,a.divisor);else if(a.count===16)for(let p=0;p<4;p++)s.vertexAttribPointer(l+p,4,a.type,a.normalized,a.stride,a.offset+16*p+u),s.enableVertexAttribArray(l+p),a.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(l+p,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(Hfe()){const p=R8e(t),m=P8e(a.type),g=a.offset,w=Math.round(m/g)!==m/g?`. Offset not a multiple of stride. DataType requires ${m} bytes, but descriptor has an offset of ${g}`:"";p&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${u}${w}:`,p,a)}}}function bOt(t,e,i,r){var s,o,a;const n=t.gl;t.bindBuffer(i);for(const l of r){const u=e.get(l.name);if(l.count<=4)n.disableVertexAttribArray(u),l.divisor&&l.divisor>0&&((s=t.gl)==null||s.vertexAttribDivisor(u,0));else if(l.count===9)for(let p=0;p<3;p++)n.disableVertexAttribArray(u+p),l.divisor&&l.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(u+p,0));else if(l.count===16)for(let p=0;p<4;p++)n.disableVertexAttribArray(u+p),l.divisor&&l.divisor>0&&((a=t.gl)==null||a.vertexAttribDivisor(u+p,0));else console.error("Unsupported vertex attribute element count: "+l.count)}t.unbindBuffer(Oj.ARRAY_BUFFER)}function L8e(t){switch(t){case Ii.ALPHA:case Ii.LUMINANCE:case Ii.RED:case Ii.RED_INTEGER:case qe.R8:case qe.R8I:case qe.R8UI:case qe.R8_SNORM:case Zh.STENCIL_INDEX8:return 1;case Ii.LUMINANCE_ALPHA:case Ii.RG:case Ii.RG_INTEGER:case qe.RGBA4:case qe.R16F:case qe.R16I:case qe.R16UI:case qe.RG8:case qe.RG8I:case qe.RG8UI:case qe.RG8_SNORM:case qe.RGB565:case qe.RGB5_A1:case Zh.DEPTH_COMPONENT16:return 2;case Ii.DEPTH_COMPONENT:case Ii.RGB:case Ii.RGB_INTEGER:case qe.RGB8:case qe.RGB8I:case qe.RGB8UI:case qe.RGB8_SNORM:case qe.SRGB8:case Zh.DEPTH_COMPONENT24:return 3;case Ii.DEPTH_STENCIL:case Ii.DEPTH24_STENCIL8:case Ii.RGBA:case Ii.RGBA_INTEGER:case qe.RGBA8:case qe.R32F:case qe.R11F_G11F_B10F:case qe.RG16F:case qe.R32I:case qe.R32UI:case qe.RG16I:case qe.RG16UI:case qe.RGBA8I:case qe.RGBA8UI:case qe.RGBA8_SNORM:case qe.SRGB8_ALPHA8:case qe.RGB9_E5:case qe.RGB10_A2UI:case qe.RGB10_A2:case Zh.DEPTH_STENCIL:case Zh.DEPTH_COMPONENT32F:case Zh.DEPTH24_STENCIL8:return 4;case Zh.DEPTH32F_STENCIL8:return 5;case qe.RGB16F:case qe.RGB16I:case qe.RGB16UI:return 6;case qe.RG32F:case qe.RG32I:case qe.RG32UI:case qe.RGBA16F:case qe.RGBA16I:case qe.RGBA16UI:return 8;case qe.RGB32F:case qe.RGB32I:case qe.RGB32UI:return 12;case qe.RGBA32F:case qe.RGBA32I:case qe.RGBA32UI:return 16;case Cn.COMPRESSED_RGB_S3TC_DXT1_EXT:case Cn.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Cn.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Cn.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Cn.COMPRESSED_R11_EAC:case Cn.COMPRESSED_SIGNED_R11_EAC:case Cn.COMPRESSED_RGB8_ETC2:case Cn.COMPRESSED_SRGB8_ETC2:case Cn.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Cn.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Cn.COMPRESSED_RG11_EAC:case Cn.COMPRESSED_SIGNED_RG11_EAC:case Cn.COMPRESSED_RGBA8_ETC2_EAC:case Cn.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let Wfe=class{constructor(e=0,i=e){this.width=e,this.height=i,this.target=Ja.TEXTURE_2D,this.pixelFormat=Ii.RGBA,this.dataType=y$.UNSIGNED_BYTE,this.samplingMode=cn.LINEAR,this.wrapMode=oI.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.shouldCompress=!1,this.depth=1,this.isImmutable=!1}};function N8e(t){return t.width<=0||t.height<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:L8e(t.internalFormat))*(t.target===Ja.TEXTURE_CUBE_MAP?6:1))}const D8e=()=>pe.getLogger("esri/views/webgl/textureUtils");function XE(t){(t.width!=null&&t.width<0||t.height!=null&&t.height<0||t.depth!=null&&t.depth<0)&&D8e().error("Negative dimension parameters are not allowed!")}function V8e(t){return t in qe}function F8e(t){return t in Cn}function Zv(t){return t!=null&&"type"in t&&t.type==="compressed"}function j8e(t){return t!=null&&"byteLength"in t}function kJ(t){return t!=null&&!Zv(t)&&!j8e(t)}function dv(t){return t===Ja.TEXTURE_3D||t===Ja.TEXTURE_2D_ARRAY}function CJ(t,e,i,r=1){let n=Math.max(e,i);return t===Ja.TEXTURE_3D&&(n=Math.max(n,r)),Math.floor(Math.log2(n))+1}function YE(t){if(t.internalFormat!=null)return t.internalFormat===Ii.DEPTH_STENCIL?Ii.DEPTH24_STENCIL8:t.internalFormat;switch(t.dataType){case y$.FLOAT:switch(t.pixelFormat){case Ii.RGBA:return qe.RGBA32F;case Ii.RGB:return qe.RGB32F;default:throw new G("Unable to derive format")}case y$.UNSIGNED_BYTE:switch(t.pixelFormat){case Ii.RGBA:return qe.RGBA8;case Ii.RGB:return qe.RGB8}}return t.internalFormat=t.pixelFormat===Ii.DEPTH_STENCIL?Ii.DEPTH24_STENCIL8:t.pixelFormat}function z8e(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let U8e=class Xfe extends Wfe{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case qe.R16F:case qe.R16I:case qe.R16UI:case qe.R32F:case qe.R32I:case qe.R32UI:case qe.R8_SNORM:case qe.R8:case qe.R8I:case qe.R8UI:this.pixelFormat=Ii.RED}}static validate(e,i){return new Xfe(e,i)}};const cp=()=>pe.getLogger("esri/views/webgl/Texture");let xj=class Ds{constructor(e,i=null,r=null){if(this.type=_j.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,this._compressionAbortController=Vw(null),"context"in e)this._descriptor=e,r=i;else{const n=U8e.validate(e,i);if(!n)throw new G("Texture descriptor invalid");this._descriptor=n}this._descriptor.target===Ja.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return N8e(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return this._compressionAbortController.value!==null}dispose(){this.abortCompression(),this._glName&&this._descriptor.context.instanceCounter.decrement(aI.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new G("Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===Ja.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.shouldCompress=e}setData(e){this.abortCompression(),!Zv(e)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in Cn&&(this._descriptor.internalFormat=void 0),this._setData(e),!Zv(e)&&this._descriptor.shouldCompress&&this._compressOnWorker(e)}updateData(e,i,r,n,s,o,a=0){o||cp().error("An attempt to use uninitialized data!"),this._glName||cp().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=YE(l);const{context:u,pixelFormat:p,dataType:m,target:g,isImmutable:w}=l;if(w&&!this._wasImmutablyAllocated)throw new G("Cannot update immutable texture before allocation!");const O=u.bindTexture(this,Ds.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>l.width||r+s>l.height)&&cp().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:_}=u;a&&(n&&s||cp().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),_.pixelStorei(_.UNPACK_SKIP_ROWS,a)),kJ(o)?_.texSubImage2D(g,e,i,r,n,s,p,m,o):Zv(o)?_.compressedTexSubImage2D(g,e,i,r,n,s,l.internalFormat,o.levels[e]):_.texSubImage2D(g,e,i,r,n,s,p,m,o),a&&_.pixelStorei(_.UNPACK_SKIP_ROWS,0),u.bindTexture(O,Ds.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,n,s,o,a,l){l||cp().error("An attempt to use uninitialized data!"),this._glName||cp().error("An attempt to update an uninitialized texture!");const u=this._descriptor;u.internalFormat=YE(u);const{context:p,pixelFormat:m,dataType:g,isImmutable:w,target:O}=u;if(w&&!this._wasImmutablyAllocated)throw new G("Cannot update immutable texture before allocation!");dv(O)||cp().warn("Attempting to set 3D texture data on a non-3D texture");const _=p.bindTexture(this,Ds.TEXTURE_UNIT_FOR_UPDATES);p.setActiveTexture(Ds.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+s>u.width||r+o>u.height||n+a>u.depth)&&cp().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:x}=p;if(Zv(l))l=l.levels[e],x.compressedTexSubImage3D(O,e,i,r,n,s,o,a,u.internalFormat,l);else{const T=l;x.texSubImage3D(O,e,i,r,n,s,o,a,m,g,T)}p.bindTexture(_,Ds.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new G("Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,XE(e)}e.samplingMode===cn.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=cn.LINEAR_MIPMAP_NEAREST):e.samplingMode===cn.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=cn.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,Ds.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Ds.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,Ds.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new G("Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,XE(e)}e.samplingMode===cn.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=cn.LINEAR):e.samplingMode===cn.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=cn.NEAREST)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,XE(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=Tw(this._compressionAbortController.value))}_setData(e,i){var l;const r=this._descriptor,n=(l=r.context)==null?void 0:l.gl;if(!n)return;hv(n),this._glName||(this._glName=n.createTexture(),this._glName&&r.context.instanceCounter.increment(aI.Texture,this)),XE(r);const s=r.context.bindTexture(this,Ds.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(Ds.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),hv(n);const o=i??r.target,a=dv(o);if(kJ(e))this._setDataFromTexImageSource(e,o);else{const{width:u,height:p,depth:m}=r;if(u==null||p==null)throw new G("Width and height must be specified!");if(a&&m==null)throw new G("Depth must be specified!");if(r.internalFormat=YE(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,u,p,m),Zv(e)){if(!F8e(r.internalFormat))throw new G("Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,u,p,m,e),hv(n),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),hv(n),r.context.bindTexture(s,Ds.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=Ja.TEXTURE_CUBE_MAP_POSITIVE_X;i<=Ja.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,n=this._descriptor;n.internalFormat=YE(n);const s=dv(i),{width:o,height:a,depth:l}=z8e(e);n.width&&n.height,n.width||(n.width=o),n.height||(n.height=a),s&&n.depth,s&&(n.depth=l),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,n.internalFormat,n.hasMipmap,o,a,l),this._texImage(i,0,n.internalFormat,o,a,l,e),hv(r),n.hasMipmap&&(this.generateMipmap(),hv(r))}_setDataFromCompressedSource(e,i,r){const n=this._descriptor,{width:s,height:o,depth:a}=n,l=e.levels,u=CJ(r,s,o,a),p=Math.min(u,l.length)-1;this._descriptor.context.gl.texParameteri(n.target,n.context.gl.TEXTURE_MAX_LEVEL,p),this._forEachMipmapLevel((m,g,w,O)=>{const _=l[Math.min(m,l.length-1)];this._compressedTexImage(r,m,i,g,w,O,_)},p)}_texStorage(e,i,r,n,s,o){const{gl:a}=this._descriptor.context;if(!V8e(i))throw new G("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?CJ(e,n,s,o):1;if(dv(e)){if(o==null)throw new G("Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,i,n,s,o)}else a.texStorage2D(e,l,i,n,s);this._wasImmutablyAllocated=!0}_texImage(e,i,r,n,s,o,a){const l=this._descriptor.context.gl,u=dv(e),{isImmutable:p,pixelFormat:m,dataType:g}=this._descriptor;if(p){if(a!=null){const w=a;if(u){if(o==null)throw new G("Missing depth dimension for 3D texture upload");l.texSubImage3D(e,i,0,0,0,n,s,o,m,g,w)}else l.texSubImage2D(e,i,0,0,n,s,m,g,w)}}else{const w=a;if(u){if(o==null)throw new G("Missing depth dimension for 3D texture upload");l.texImage3D(e,i,r,n,s,o,0,m,g,w)}else l.texImage2D(e,i,r,n,s,0,m,g,w)}}_compressedTexImage(e,i,r,n,s,o,a){const l=this._descriptor.context.gl,u=dv(e);if(this._descriptor.isImmutable){if(a!=null)if(u){if(o==null)throw new G("Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,n,s,o,r,a)}else l.compressedTexSubImage2D(e,i,0,0,n,s,r,a)}else if(u){if(o==null)throw new G("Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,r,n,s,o,0,a)}else l.compressedTexImage2D(e,i,r,n,s,0,a)}async _compressOnWorker(e){var n,s;if(!Ds.compressionWorkerHandle||!Ds.compressionWorkerHandle.isCompressible(e))return;const i=(n=this._descriptor.context)==null?void 0:n.gl.getExtension("WEBGL_compressed_texture_etc"),r=(s=this._descriptor.context)==null?void 0:s.gl.getExtension("WEBGL_compressed_texture_s3tc");if(i||r){const o=new AbortController;this._compressionAbortController.value=o;const a={data:await createImageBitmap(e),flipped:this.descriptor.flipped,width:e.width,height:e.height,hasMipmap:this._descriptor.hasMipmap,hasETC:!!i,hasS3TC:!!r};Ds.compressionWorkerHandle.invoke(a,this._compressionAbortController.value.signal).then(l=>{l&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=l.internalFormat,this._setData(l.compressedTexture)),o===this._compressionAbortController.value&&(this._compressionAbortController.value=null)}).catch(l=>{vn(l)||o!==this._compressionAbortController.value||(this._compressionAbortController.value=null)})}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:n,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===Ja.TEXTURE_3D;if(r==null||n==null||l&&s==null)throw new G("Missing texture dimensions for mipmap calculation");for(let u=0;e(u,r,n,s),o&&(r!==1||n!==1||l&&s!==1)&&!(u>=i);++u)r=Math.max(1,r>>1),n=Math.max(1,n>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){var s;const e=this._descriptor,i=(s=e.context)==null?void 0:s.gl;let r=e.samplingMode,n=e.samplingMode;r===cn.LINEAR_MIPMAP_NEAREST||r===cn.LINEAR_MIPMAP_LINEAR?(r=cn.LINEAR,e.hasMipmap||(n=cn.LINEAR)):r!==cn.NEAREST_MIPMAP_NEAREST&&r!==cn.NEAREST_MIPMAP_LINEAR||(r=cn.NEAREST,e.hasMipmap||(n=cn.NEAREST)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){var r;const e=this._descriptor,i=(r=e.context)==null?void 0:r.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}};xj.TEXTURE_UNIT_FOR_UPDATES=0,xj.compressionWorkerHandle=null;const FN=()=>pe.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function Q8e(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const B8e=[0,0,0,0];let Yfe=class{constructor(){this.type="single",this._highlightOptions=new xf,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*cS),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,T8e),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var e;(e=this._shadeTex)==null||e.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<Gfe)-1,activeGradient:this}]}_updateGradientTexture(e){const i=q8e(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,Q8e(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*M8e,u=Math.abs(n)>l?Math.round(10*(Math.abs(n)-l))/10:0,p=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let m;u&&!p?FN().error("The outer rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!u&&p?FN().error("The inner rim of the highlight is "+p+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):u&&p&&FN().error("The highlight is "+Math.max(u,p)+"px away from the edge of the feature; consider reducing some width values.");const g=[void 0,void 0,void 0,void 0];function w(_,x,T){g[0]=(1-T)*_[0]+T*x[0],g[1]=(1-T)*_[1]+T*x[1],g[2]=(1-T)*_[2]+T*x[2],g[3]=(1-T)*_[3]+T*x[3]}const{_texelData:O}=this;for(let _=0;_<cS;++_)m=n+_/(cS-1)*(a-n),m<n?(g[0]=0,g[1]=0,g[2]=0,g[3]=0):m<s?w(B8e,r.outlineColor,(m-n)/(s-n)):m<o?[g[0],g[1],g[2],g[3]]=r.outlineColor:m<a?w(r.outlineColor,r.fillColor,(m-o)/(a-o)):[g[0],g[1],g[2],g[3]]=r.fillColor,O[4*_]=255*g[0],O[4*_+1]=255*g[1],O[4*_+2]=255*g[2],O[4*_+3]=255*g[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=a,!this._shadeTex){const _=new Wfe;_.wrapMode=oI.CLAMP_TO_EDGE,_.width=cS,_.height=1,this._shadeTex=new xj(e,_)}this._shadeTex.updateData(0,0,0,cS,1,this._texelData)}};function q8e(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let G8e=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new Yfe),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:e,activeGradient:n}),e<<=1}return i}};var MJ,AJ,IJ,PJ,RJ,LJ,lI,NJ,DJ;(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"})(MJ||(MJ={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(AJ||(AJ={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(IJ||(IJ={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(PJ||(PJ={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(RJ||(RJ={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SIMPLE=1]="SIMPLE",t[t.DOT_DENSITY=2]="DOT_DENSITY",t[t.OUTLINE_FILL=3]="OUTLINE_FILL",t[t.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",t[t.HEATMAP=5]="HEATMAP",t[t.PIE_CHART=6]="PIE_CHART"}(LJ||(LJ={})),function(t){t[t.All=0]="All",t[t.Highlight=1]="Highlight",t[t.InsideEffect=2]="InsideEffect",t[t.OutsideEffect=3]="OutsideEffect"}(lI||(lI={})),function(t){t[t.BATCHING=0]="BATCHING",t[t.STRICT_ORDER=1]="STRICT_ORDER",t[t.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(NJ||(NJ={})),function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT"}(DJ||(DJ={}));const Jfe={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:t=>t.stencilRef,compare:Sj.EQUAL,mask:255,op:{fail:_x.KEEP,zFail:_x.KEEP,zPass:_x.REPLACE}}}},Z8e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},H8e={...Jfe,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function W8e({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},n){const s=1/2**(i-n.key.level),o=1/2**(r-n.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[n.x,n.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:ma(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function Kfe(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="highlight"}function eme(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="hittest"}function X8e(t){if(!eme(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function Y8e(t){if(!Kfe(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function _Ot(t,e,i){const r={};for(const n in i)i[n]instanceof Function?r[n]=i[n](t,e):r[n]=i[n];return r}function xOt(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:W8e(t,e),hittestRequest:X8e(t),highlight:Y8e(t)}}function $Ot(t){return{inside:t.selection===lI.InsideEffect,outside:t.selection===lI.OutsideEffect}}function J8e(t){return eme(t)?Z8e:Kfe(t)&&t.passOptions.stepType==="clear"?H8e:Jfe}function TOt(t){const{row:e,col:i}=t.key,r=i*uJ,n=e*uJ;return{tileOffsetFromLocalOrigin:[r%WE,n%WE],maxIntsToLocalOrigin:[Math.floor(r/WE),Math.floor(n/WE)]}}const K8e=new nt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function EOt(t){return K8e.toJSON(t)}function kOt(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:n}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function e9e(t,e){return e==null?(t==null||t.destroy(),null):((t==null?void 0:t.type)==="single"&&Array.isArray(e)&&(t.destroy(),t=null),(t==null?void 0:t.type)!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new G8e:new Yfe),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function COt(t,e,i,r){const{painter:n,highlightGradient:s}=t,{highlight:o}=n.effects;if(!s)return;const a=t.passOptions,l=s.getReasonsWithGradients();for(let u=0;u<l.length;u++){const p={...t,passOptions:{type:"highlight",activeGradient:l[u].activeGradient,activeReasons:l[u].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(p),i(p),u<l.length-1){let g=0;for(let w=u+1;w<l.length;w++)g|=l[w].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:l[u].activeGradient,activeReasons:g,stepType:"clear",highlightAll:e}})}const m={...t,passOptions:{type:"highlight",activeGradient:l[u].activeGradient,activeReasons:l[u].activeReasons,stepType:"draw",highlightAll:e}};n.setPipelineState(J8e(t)),n.updatePipelineState(t.context),o.draw(m),o.unbind()}t.passOptions=a}function MOt(t){if(!t)return[];let e=d4e(t)?[t]:Te.isCollection(t)?t.toArray():Array.isArray(t)?t:[];return e=e==null?void 0:e.filter(pn),((e==null?void 0:e.length)??0)===0?[]:e}const JE=t=>parseFloat(t)/100;function t9e(t,e,i){const r=typeof t.left=="string"?JE(t.left)*e:t.left,n=typeof t.right=="string"?JE(t.right)*e:t.right,s=typeof t.top=="string"?JE(t.top)*i:t.top,o=typeof t.bottom=="string"?JE(t.bottom)*i:t.bottom,a=s;return{xmin:r,xmax:Math.max(e-n,r),ymin:a,ymax:Math.max(i-o,s)}}function tme(t,e,i,r){switch(e.type){case"rect":{const{width:n,height:s}=t,{xmin:o,xmax:a,ymin:l,ymax:u}=t9e(e,n,s),{x:p,y:m}=i;return p>o&&p<a&&m>l&&m<u}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||e8(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?KQ(e.geometry,r):m2(e.geometry,r))}}function i9e(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function r9e(t,e){if(!t.highlights){if(!e)return;t.highlights=new Te([new xf])}const i=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function n9e(t,e,i){const r=bpe(e)?vpe(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,l=null;i!=null&&i.include?FJ(i.include,VJ(t,g=>{n.add(g),jN(g,w=>s.add(w))},(g,w)=>{s.add(g),n.add(w)},g=>{a||(a=new Set),a.add(g)},g=>n.add(g),()=>o=!0)):(o=!0,n=new Set(t.allLayerViews),n.forEach(g=>{jN(g,w=>s.add(w))})),i!=null&&i.exclude&&FJ(i.exclude,VJ(t,g=>{n.delete(g),jN(g,w=>s.delete(w))},g=>s.delete(g),g=>{l||(l=new Set),l.add(g)}));const u=t.toMap(r),p=t.allLayerViews.filter(g=>!g.suspended&&n.has(g)&&g.clips.every(w=>tme(t,w,r,u))).reverse();let m=[...o?t.graphicsView.hitTest(u).map(g=>({type:"graphic",graphic:g,layer:null,mapPoint:u})):[],...await Promise.all(p.map(g=>g.hitTest(u,r)).toArray())].filter(pn).flat().filter(pn);return m=m.filter(g=>{var w;return g.type!=="graphic"||((w=g.layer)==null?void 0:w.type)!=="subtype-group"||s.has(g.graphic.layer)}),a&&(m=m.filter(g=>!("graphic"in g)||!g.graphic||(a==null?void 0:a.has($j(g.graphic))))),l&&(m=m.filter(g=>!("graphic"in g)||!g.graphic||!(l!=null&&l.has($j(g.graphic))))),{screenPoint:r,results:m}}function VJ(t,e,i,r,n,s){return o=>{if(o instanceof Cc){if(o.layer===t)s==null||s();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&(n==null||n(a))}r($j(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&i(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function FJ(t,e){if(t)if(tA(t))for(const i of t)if(tA(i))for(const r of i)e(r);else e(i);else e(t)}function $j(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function jN({layer:t},e){(t==null?void 0:t.type)==="subtype-group"&&t.sublayers.forEach(i=>{e(i)})}let hS=null,uI=!0;function s9e(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(uI)try{return new ImageData(t,e)}catch{uI=!1}return ime(t,e,i)}function AOt(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(uI)try{return new ImageData(t,e,i)}catch{uI=!1}const n=ime(e,i,r);return n.data.set(t,0),n}function o9e(){return hS||(hS=document.createElement("canvas"),hS.width=1,hS.height=1),hS}function ime(t,e,i){return i||(i=o9e()),i.getContext("2d").createImageData(t,e)}async function a9e(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await bt(i,{...e,responseType:"image"});return r}catch(r){throw vn(r)?r:new G("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function IOt(t,e){const{arrayBuffer:i,mediaType:r}=await l9e(t,e),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await J(()=>import("./gif-CCq1556-.js"),[]);if(s(i))return o(i,e)}if(n){const{isAnimatedPNG:s,parseApng:o}=await J(()=>import("./apng-Cr6t1__9.js"),__vite__mapDeps([214,1]));if(s(i))return o(i,e)}return a9e(new Blob([i],{type:r}),e)}async function l9e(t,e){var n;const i=Df(t);if(i!=null&&i.isBase64)return{arrayBuffer:Kae(i.data),mediaType:i.mediaType};const r=await bt(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:((n=r.getHeader)==null?void 0:n.call(r,"Content-Type"))??""}}function rme(t,e,i){const{ctx:r,canvas:n}=sme(t,i),s=r.getImageData(0,0,t.width,t.height),o=ame(n,e);return ome(n),{dataUrl:o,data:s}}function nme(t,e){const{ctx:i,canvas:r}=sme(t,e),n=i.getImageData(0,0,t.width,t.height);return ome(r),n}function sme(t,e){const i=u9e();e.premultipliedAlpha&&p9e(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&d9e(r),{ctx:r,canvas:i}}function ome(t){t.width=0,t.height=0}function u9e(){return zN==null&&(zN=document.createElement("canvas")),zN}let zN=null;function ame(t,e){const i=f9e[e.format],r=e.quality/100;return t.toDataURL(i,r)}function lme(t,e){const i=h9e(t),r=y9e[i];return{format:i,quality:Po(e??r,0,100)}}function ume(t,e){return e/Math.max(t[0],t[1])}function c9e(t,e,i,r=0,n=0,s=t.width-r,o=t.height-n,a=!1){const{data:l}=t,{width:u,height:p,data:m}=e,g=s/u,w=o/p,O=Math.ceil(g/2),_=Math.ceil(w/2),x=t.width;for(let T=0;T<p;T++)for(let E=0;E<u;E++){const k=4*(E+(a?p-T-1:T)*u);let M=0,R=0,D=0,L=0,F=0,j=0;const B=(T+.5)*w;for(let W=Math.floor(T*w);W<(T+1)*w;W++){const ie=Math.abs(B-(W+.5))/_,oe=(E+.5)*g,ae=ie*ie;for(let Ee=Math.floor(E*g);Ee<(E+1)*g;Ee++){const ue=Math.abs(oe-(Ee+.5))/O,he=Math.sqrt(ae+ue*ue);if(he>=1)continue;let ye=2*he*he*he-3*he*he+1;const Ae=4*(r+Ee+(n+W)*x);j+=ye*l[Ae+3],R+=ye,!i&&l[Ae+3]<255&&(ye=ye*l[Ae+3]/255),D+=ye*l[Ae],L+=ye*l[Ae+1],F+=ye*l[Ae+2],M+=ye}}m[k]=D/M,m[k+1]=L/M,m[k+2]=F/M,m[k+3]=j/R}return e}function h9e(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return m9e}}function d9e(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function p9e(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const f9e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},jJ=98,m9e="png",y9e={png:100,jpg:jJ,jpeg:jJ},POt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:s9e,encode:rme,encodeData:nme,getFormatAndQuality:lme,getMaximumResolutionScale:ume,resampleHermite:c9e,toDataUrl:ame},Symbol.toStringTag,{value:"Module"})),cme={flipY:!0,premultipliedAlpha:!0};async function g9e(t,e){const i=await hme(t,e),{format:r,quality:n}=lme(e==null?void 0:e.format,e==null?void 0:e.quality);return rme(i,{format:r,quality:n},cme)}async function v9e(t,e){const i=await hme(t,e);return nme(i,cme)}function hme(t,e){const i=O9e(e||{},w9e(t.stage,t.size),t.size,t.padding),r=b9e(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e==null?void 0:e.rotation)}function b9e(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const n=e.find(s=>s.layer.id===r.id);n!=null&&n.container&&i.push(n.container)}),i}function w9e(t,e){return Math.min(4,ume(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function O9e(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;t.width!=null&&t.height!=null?n=[t.width,t.height]:t.width==null&&t.height!=null?n=[t.height,t.height]:t.width!=null&&t.height==null?n=[t.width,t.width]:t.width==null&&t.height==null&&(n=null);const s=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,u=t.area||{x:0,y:0,width:s,height:o};if(n){const p=s/o,m=n[0]/n[1];if(m>p){const g=u.width/m;u={x:u.x,y:Math.round(u.y+(u.height-g)/2),width:u.width,height:Math.round(g)}}else{const g=u.height*m;u={x:Math.round(u.x+(u.width-g)/2),y:u.y,width:Math.round(g),height:u.height}}}else n=[u.width,u.height];return n[0]>u.width?(a=Math.min(n[0]/u.width,e),l=n[0]/u.width/a):(a=1,l=n[0]/u.width),{cropArea:{x:Math.round((u.x+r.left)*a),y:Math.round((u.y+r.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:l,resolutionScale:a}}const S9e=t=>t.includes("Brush");let dme=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),S9e(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function _9e(t,e){const i=e.debugRendererInfo&&t.getExtension("WEBGL_debug_renderer_info");return i?{getUnmaskedRendererWebGL:()=>t.getParameter(i.UNMASKED_RENDERER_WEBGL)}:null}let zJ;function x9e(){return zJ??(zJ=E9e()),zJ}let $9e=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function T9e(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0)),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function E9e(){var i;const t=new $9e,e=T9e(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null,t.unmaskedRenderer=((i=_9e(e,{debugRendererInfo:!0}))==null?void 0:i.getUnmaskedRendererWebGL())??"unknown"),t}function k9e(t){const e=x9e();return e.available?t==="3d"&&e.majorPerformanceCaveat?new G("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new G("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new G("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new G("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function C9e(t){return t&&"nodeType"in t}function M9e(t){return t&&typeof t.render=="function"}const UJ={component:"esri-component"};let Oy=class extends Ce{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(UJ.component),i&&i.classList.remove(UJ.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||C9e(e)?(this._set("widget",null),T8(e)):(M9e(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};h([f()],Oy.prototype,"id",null),h([f()],Oy.prototype,"node",null),h([Rt("node")],Oy.prototype,"castNode",null),h([f({readOnly:!0})],Oy.prototype,"widget",void 0),Oy=h([A("esri.views.ui.Component")],Oy);const YC=Oy,pme="calcite-mode-";function A9e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function fme(){return A9e().startsWith("dark")}function I9e(){return`${pme}${fme()?"dark":"light"}`}function P9e(t){R9e(t),t.classList.add(I9e())}function R9e(t){Array.from(t.classList).forEach(e=>{e.startsWith(pme)&&t.classList.remove(e)})}const L9e={left:0,top:0,bottom:0,right:0},mme={bottom:30,top:15,right:15,left:15},dh="esri-ui",oo={ui:dh,corner:`${dh}-corner`,innerContainer:`${dh}-inner-container`,manualContainer:`${dh}-manual-container`,cornerContainer:`${dh}-corner-container`,topLeft:`${dh}-top-left`,topRight:`${dh}-top-right`,bottomLeft:`${dh}-bottom-left`,bottomRight:`${dh}-bottom-right`};function N9e(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function KE(t){return t===0?"0":`${t}px`}function UN(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function QN(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let Hu=class extends ul.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Mo(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&QN(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&QN(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Oe(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,It),Oe(()=>this.padding,this._applyUIPadding,It),Oe(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},It),l8(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(oo.ui),P9e(e),this._attachContainers(e)),i&&(i.classList.remove(oo.ui),QN(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...mme,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,i));const o=UN(e);o&&({index:r,position:i,component:e,key:n}=o),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r,n,s)}remove(e,i){var n,s;if(!e)return;if(Array.isArray(e))return e.map(o=>this.remove(o,i));const r=this._find(e);if(r){if(this._componentMap.has(r)&&((n=this._componentMap.get(r))==null?void 0:n.key)!==i)return;const o=this._components.indexOf(r),a=r.node.parentNode;return a==null||a.removeChild(r.node),this._componentMap.delete(r),(s=r.widget)==null||s.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||i.removeInternal});for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let r;const n=UN(e)||UN(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof YC||(e=new YC({node:e}));const{widget:o}=e;o!=null&&o instanceof Ce&&o.addHandles(Bt(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,internal:s})}_find(e){return e?e instanceof YC?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??L9e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(oo.innerContainer,oo.cornerContainer);const i=document.createElement("div");i.classList.add(oo.innerContainer,oo.manualContainer);const r=document.createElement("div");r.classList.add(oo.topLeft,oo.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(oo.topRight,oo.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(oo.bottomLeft,oo.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(oo.bottomRight,oo.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=S2();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:r,"top-trailing":a?r:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var u,p;const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],o=n!=null&&n>-1;if(N9e(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(n===0){const{firstChild:m}=s;return void(m?(u=m.parentNode)==null?void 0:u.insertBefore(r.node,m):s.appendChild(r.node))}if(n>=a.length)return void s.appendChild(r.node);const l=a[n];(p=l.parentNode)==null||p.insertBefore(r.node,l)}_toPixelPosition(e){return{top:KE(e.top),left:KE(e.left),right:KE(e.right),bottom:KE(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(pn).filter(n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}};h([f()],Hu.prototype,"_locale",void 0),h([f()],Hu.prototype,"container",null),h([f()],Hu.prototype,"height",null),h([f({value:mme})],Hu.prototype,"padding",null),h([Rt("padding")],Hu.prototype,"castPadding",null),h([f()],Hu.prototype,"view",void 0),h([f()],Hu.prototype,"width",null),Hu=h([A("esri.views.ui.UI")],Hu);const D9e=Hu,V9e="randomUUID"in crypto;function bR(){if(V9e)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function VOt(){return`{${bR().toUpperCase()}}`}function F9e(){return`{${bR()}}`}function j9e(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}const z9e={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},U9e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},Q9e=t=>({...U9e,...t}),B9e=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},q9e=(t,e)=>t.find(e),QJ=(t,e,i=!1)=>{let r=t;return e.forEach((n,s)=>{const o=r!=null&&r.children?q9e(r.children,a=>a.domNode===n):void 0;i&&!o&&s!==e.length-1||(r=o)}),r},G9e=t=>{let e;const i={...z9e,...t},r=Q9e(i),n=r.performanceLogger;let s,o=!0,a=!1;const l=[],u=[],p=(g,w,O)=>{var T;let _;r.eventHandlerInterceptor=(E,k,M,R)=>function(D){let L;n("domEvent",D);const F=B9e(D.currentTarget,_.domNode),j=F.some(W=>{var ie;return customElements.get((ie=W==null?void 0:W.tagName)==null?void 0:ie.toLowerCase())});if(D.eventPhase===Event.CAPTURING_PHASE||!j)F.reverse(),L=QJ(_.getLastRender(),F);else{const W=D.composedPath(),ie=W.slice(W.indexOf(D.currentTarget),W.indexOf(_.domNode)).reverse();L=QJ(_.getLastRender(),ie,!0)}let B;return L&&(B=i.handleInterceptedEvent(e,L,this,D)),n("domEventProcessed",D),B},(T=i.postProcessProjectionOptions)==null||T.call(i,r);const x=O();_=g(w,x,r),r.eventHandlerInterceptor=void 0,l.push(_),u.push(O),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(_,x)};let m=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let g=0;g<l.length;g++){const w=u[g]();n("rendered",void 0);try{l[g].update(w)}catch(O){console.error(O)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(m=i.modifyDoRenderImplementation(m,l,u)),e={renderNow:m,scheduleRender:()=>{s||a||(s=requestAnimationFrame(m))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(g,w)=>{p(pf.append,g,w)},insertBefore:(g,w)=>{p(pf.insertBefore,g,w)},merge:(g,w)=>{p(pf.merge,g,w)},replace:(g,w)=>{p(pf.replace,g,w)},detach:g=>{for(let w=0;w<u.length;w++)if(u[w]===g)return u.splice(w,1),l.splice(w,1)[0];throw new Error("renderFunction was not found")}},e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */let yme=!1;const Z9e=t=>{yme=!0,q2e(t)};let gme;function H9e(){yme||Z9e(na(zi(gme)))}function um(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}gme="components/assets";const vme=Symbol("widget"),bme=Symbol("widget-test-data"),W9e=[],X9e={},cI=new WeakMap;function wme(t,e){let i=e.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=wme(t,i[n]);else i=W9e;const r=e.vnodeSelector;if(hI(r)){const n=e.properties||X9e,s=n.key||r,o={key:s,afterCreate:Y9e,afterUpdate:J9e,afterRemoved:Ome,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function Y9e(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=t,cI.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),r.addHandles(Bt(()=>Ome(t))),queueMicrotask(()=>{o[bme].projector.renderNow()})}function J9e(t,e,i,{widgetProperties:r}){var s;const n=cI.get(t);n&&(n.set(r),(s=n.afterUpdate)==null||s.call(n,n,t))}function Ome(t){var i;const e=cI.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),cI.delete(t))}function hI(t){return typeof t=="function"&&t[vme]}const BJ=new Set;function K9e(t){BJ.add(t),t.finally(()=>BJ.delete(t))}var Sme;const e7e="esri.widgets.Widget";let t7e=0;function _me(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?_me(t[r],e[r]):t[r]=e[r]);return t}const i7e=G9e({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,o)=>{const a=e==null?void 0:e(r,n,s,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||l){const u=r[2].toLowerCase()+r.slice(3),p=w=>a==null?void 0:a.call(s,w);s.addEventListener(u,p,l);const m=()=>s.removeEventListener(u,p,l),g=o.afterRemoved;o.afterRemoved=w=>{g==null||g(w),m()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(hhe(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let BN=!1,Br=class extends CO.EsriPromiseMixin(ul.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=i7e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=l2(async()=>{var l;if((l=this._messageBundleProps)!=null&&l.length){const u=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:p,propertyName:m})=>{if(this.destroyed)return;let g=await w8(p);this.uiStrings&&Object.keys(this.uiStrings)&&(g=_me(q(g),this.uiStrings)),this[m]=g}));if(this.destroyed)return;for(const p of u)p.status==="rejected"&&pe.getLogger(this).error("widget-intl:locale-error",this.declaredClass,p.reason)}await this.loadLocale()}),H9e();const r="esri-widget-uid-"+bR(),n=this.render.bind(this);this._trackingTarget=new xP(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var m,g;if(!this._readyForTrueRender||this.destroyed)return null;const l=n()??s(),u=l.properties??(l.properties={});if(u.key??(u.key=r),hI(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?u.styles||(u.styles={}):(u.class="",u.styles={display:"none"}),(m=u.styles).display??(m.display="");let p=0;return(g=l.children)==null||g.forEach(w=>{var O;hI(w.vnodeSelector)||(w.properties??(w.properties={}),(O=w.properties).key??(O.key=`${this.id}--${p++}`))}),wme(this,l)};this.render=()=>{if(BN)return o();let l=_5e(this)??null;if(l)return l;this._trackingTarget.clear(),BN=!0;try{l=gd(this._trackingTarget,o)}catch(u){throw pe.getLogger(this).error(u),u}finally{BN=!1}return l&&x5e(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),K9e(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(BH):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(bi(this._trackingTarget),bi(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,lN(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return T8(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+t7e++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Sme=vme,bme)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(lN(this),this._projector.scheduleRender())}classes(...e){return zb.apply(this,e)}renderNow(){lN(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(Oe(()=>this.viewModel,(r,n)=>{n&&this.removeHandles("delegated-events"),r&&_P(r)&&this.addHandles(this._delegatedEventNames.map(s=>o2(r,s,o=>{this.emit(s,o)})),"delegated-events")},Us)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(BH),this.scheduleRender()};this.addHandles([l8(e),Oe(()=>this.uiStrings,e),Kn(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};Br[Sme]=!0,Br.vnodeSelector="div",h([f()],Br.prototype,"_readyForTrueRender",void 0),h([f({value:null})],Br.prototype,"container",null),h([Rt("container")],Br.prototype,"castContainer",null),h([f()],Br.prototype,"icon",null),h([f()],Br.prototype,"id",null),h([f()],Br.prototype,"label",null),h([f()],Br.prototype,"renderable",null),h([f()],Br.prototype,"uiStrings",void 0),h([f()],Br.prototype,"viewModel",void 0),h([f({value:!0})],Br.prototype,"visible",null),h([f()],Br.prototype,"key",void 0),h([f()],Br.prototype,"children",void 0),h([f()],Br.prototype,"afterCreate",void 0),h([f()],Br.prototype,"afterUpdate",void 0),h([f()],Br.prototype,"afterRemoved",void 0),Br=h([A(e7e)],Br);const Tr=Br,r7e=new Map;function n7e(t){return r7e.get(t)}function qJ(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function s7e(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function dS(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function o7e(t){return t.type==="bing-maps"}const ph=[];let Hv=class extends Ce{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Te,this.view=null,this._allLayerViewsChange=i=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(n=this.view)==null?void 0:n.allLayerViews;r&&(this.addHandles(r.map(s=>Oe(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Ss(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Kn(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;if(ph.length=0,!e||!i)return void this._clear();i.forEach(n=>{var a,l;if(n.suspended||!((a=n.layer)!=null&&a.attributionVisible))return;const s=n.layer;if(qJ(s,"user"))return void dS(ph,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const u=this._fetchedAttributionData.get(n);return void(u?dS(ph,n,this._getDynamicAttribution(u,e,s)):qJ(s)&&dS(ph,n,s.copyright))}return void this._fetchAttributionData(n)}const o="portalItem"in s?(l=s.portalItem)==null?void 0:l.accessInformation:void 0;dS(ph,n,o||s.copyright)});const r=i.find(n=>{var s;return((s=n.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const n=n7e(this.view);if(n){const s=n.getAttributionText();for(let o=0;o<s.length;++o)dS(ph,r,s[o])}}s7e(this.items,ph)&&(this.items.removeAll(),this.items.addMany(ph)),ph.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await EP(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,o7e(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const o=r[s],a=o.coverageAreas;if(!a)return;for(const l of a){const u=l.bbox,p=l.zoomMin-(i&&l.zoomMin?1:0),m=l.zoomMax-(i&&l.zoomMax?1:0),g=new oi({xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:Je.WGS84}),w={extent:Sf(g),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let O=p;O<=m;O++)n[O]??(n[O]=[]),n[O].push(w)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){var p;const{extent:n,scale:s}=i;let o=((p=r.tileInfo)==null?void 0:p.scaleToZoom(s))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=e[o],l=RP(n.center.clone().normalize(),Je.WebMercator),u=new Set;return a?a.filter(m=>{const g=m.id,w=!u.has(g)&&l&&m.extent&&m2(m.extent,l);return w&&u.add(g),w}).sort((m,g)=>g.score-m.score||m.objectId-g.objectId).map(m=>m.attribution).join(", "):""}};h([f({readOnly:!0,type:Te})],Hv.prototype,"items",void 0),h([f({readOnly:!0})],Hv.prototype,"state",null),h([f()],Hv.prototype,"view",void 0),Hv=h([A("esri.widgets.Attribution.AttributionViewModel")],Hv);const xme=Hv,lr={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",hidden:"esri-hidden",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function a7e(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:u7e(t[e])}}}function l7e(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function u7e(t){return function(e,...i){l7e(e)?phe(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Ys(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var c7e=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},$me=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?$me(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=c7e(n)),e.push(n))}},h7e=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return $me(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function P(t,e,...i){return typeof t!="function"||hI(t)?h7e(t,e??null,...i):t(e,...i)}function d7e(...t){return t}const pv="esri-attribution",fv={base:pv,poweredBy:`${pv}__powered-by`,sources:`${pv}__sources`,open:`${pv}--open`,sourcesOpen:`${pv}__sources--open`,link:`${pv}__link`};let Vs=class extends Tr{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new xme}initialize(){this.addHandles(Ss(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[fv.open]:this._isOpen};return P("div",{bind:this,class:this.classes(fv.base,lr.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return P("div",{class:fv.poweredBy},"Powered by"," ",P("a",{class:fv.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,s={[fv.sourcesOpen]:e,[lr.interactive]:i};return P("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(fv.sources,s),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};h([f()],Vs.prototype,"_isOpen",void 0),h([f()],Vs.prototype,"_isInteractive",null),h([f()],Vs.prototype,"_attributionTextOverflowed",void 0),h([f()],Vs.prototype,"_prevSourceNodeHeight",void 0),h([f({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Vs.prototype,"attributionText",null),h([f()],Vs.prototype,"icon",null),h([f()],Vs.prototype,"itemDelimiter",void 0),h([f()],Vs.prototype,"label",null),h([f(),Ys("esri/widgets/Attribution/t9n/Attribution")],Vs.prototype,"messages",void 0),h([f()],Vs.prototype,"view",null),h([f({type:xme})],Vs.prototype,"viewModel",void 0),h([a7e()],Vs.prototype,"_toggleState",null),Vs=h([A("esri.widgets.Attribution")],Vs);const p7e=Vs;function f7e(){const t=te("mapview-essential-goto-duration");return t==null?t:t}function m7e(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}const y7e=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return i2(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return h([f()],e.prototype,"goToOverride",void 0),h([f()],e.prototype,"view",void 0),e=h([A("esri.widgets.support.GoTo")],e),e};let Sy=class extends y7e(Ce){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(It)}destroy(){this.view=null}get canShowNorth(){return m7e(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var e,i;(e=this.view)!=null&&e.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:f7e()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?Oe(()=>e==null?void 0:e.rotation,this._updateForRotation,It):Oe(()=>e==null?void 0:e.camera,this._updateForCamera,It))}_watchForView(e){this.addHandles(Oe(()=>this.view,this._updateRotationWatcher,e))}};h([f({readOnly:!0})],Sy.prototype,"canShowNorth",null),h([f({readOnly:!0})],Sy.prototype,"orientation",void 0),h([f({readOnly:!0})],Sy.prototype,"state",null),h([f()],Sy.prototype,"view",void 0),Sy=h([A("esri.widgets.Compass.CompassViewModel")],Sy);const Tme=Sy,GJ="esri-compass",ZJ={base:GJ,iconContainer:`${GJ}__icon-container`};let Mh=class extends Tr{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new Tme,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return um({button:()=>J(()=>Promise.resolve().then(()=>K2),void 0),icon:()=>J(()=>Promise.resolve().then(()=>gP),void 0)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return P("div",{class:this.classes(ZJ.base,lr.widget)},P("calcite-button",{class:lr.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},P("div",{"aria-hidden":"true",class:ZJ.iconContainer,title:r.reset},P("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};h([f()],Mh.prototype,"goToOverride",null),h([f()],Mh.prototype,"icon",null),h([f()],Mh.prototype,"label",null),h([f(),Ys("esri/widgets/Compass/t9n/Compass")],Mh.prototype,"messages",void 0),h([f()],Mh.prototype,"view",null),h([f({type:Tme})],Mh.prototype,"viewModel",void 0),Mh=h([A("esri.widgets.Compass")],Mh);const g7e=Mh,HJ="esri-navigation-toggle",WJ={base:HJ,isLayoutHorizontal:`${HJ}--horizontal`};let Wv=class extends Ce{constructor(e){super(e),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(Kn(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.navigation)==null?void 0:i.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,n;const e=(n=(r=this.view)==null?void 0:r.navigation)==null?void 0:n.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};h([f({readOnly:!0})],Wv.prototype,"state",null),h([f()],Wv.prototype,"_navigationMode",void 0),h([f()],Wv.prototype,"view",void 0),Wv=h([A("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Wv);const Eme=Wv;let Ah=class extends Tr{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new Eme,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;dx(r),this.toggle()}}loadDependencies(){return um({button:()=>J(()=>Promise.resolve().then(()=>K2),void 0)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var n,s;const e=((n=this.viewModel)==null?void 0:n.state)==="disabled",i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",r=this.messages.toggle;return P("div",{class:this.classes(WJ.base,lr.widget,{[WJ.isLayoutHorizontal]:this.layout==="horizontal"})},P("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:i?"outline-fill":"solid",class:lr.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),P("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:i?"solid":"outline-fill",class:lr.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};h([f()],Ah.prototype,"icon",null),h([f()],Ah.prototype,"label",null),h([f({value:"vertical"})],Ah.prototype,"layout",null),h([f(),Ys("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ah.prototype,"messages",void 0),h([f()],Ah.prototype,"view",null),h([f({type:Eme})],Ah.prototype,"viewModel",void 0),Ah=h([A("esri.widgets.NavigationToggle")],Ah);const v7e=Ah;let _y=class extends Ce{get canZoomIn(){var r,n,s;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var n;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const r=(n=e.constraints)==null?void 0:n.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(e&&"then"in e||e==null?void 0:e.scale)??((n=this.view)==null?void 0:n.scale)??0}};h([f({readOnly:!0})],_y.prototype,"canZoomIn",null),h([f({readOnly:!0})],_y.prototype,"canZoomOut",null),h([f()],_y.prototype,"view",void 0),h([f()],_y.prototype,"_scale",null),_y=h([A("esri.widgets.Zoom.ZoomConditions2D")],_y);const b7e=_y;let Xv=class extends Ce{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};h([f({readOnly:!0})],Xv.prototype,"canZoomIn",null),h([f({readOnly:!0})],Xv.prototype,"canZoomOut",null),h([f()],Xv.prototype,"view",void 0),Xv=h([A("esri.widgets.Zoom.ZoomConditions3D")],Xv);const w7e=Xv;let Ip=class extends Ce{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new b7e({view:e}):e.type==="3d"&&(this._zoomConditions=new w7e({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():Hx(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():Hx(e.goTo({zoomFactor:.5})))}};h([f()],Ip.prototype,"_zoomConditions",void 0),h([f()],Ip.prototype,"canZoomIn",null),h([f()],Ip.prototype,"canZoomOut",null),h([f({readOnly:!0})],Ip.prototype,"state",null),h([f()],Ip.prototype,"view",null),Ip=h([A("esri.widgets.Zoom.ZoomViewModel")],Ip);const kme=Ip,XJ={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Ih=class extends Tr{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new kme,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return um({button:()=>J(()=>Promise.resolve().then(()=>K2),void 0)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[XJ.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return P("div",{class:this.classes(XJ.base,lr.widget,e)},P("calcite-button",{class:lr.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),P("calcite-button",{class:lr.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};h([f()],Ih.prototype,"icon",null),h([f()],Ih.prototype,"label",null),h([f({value:"vertical"})],Ih.prototype,"layout",null),h([f(),Ys("esri/widgets/Zoom/t9n/Zoom")],Ih.prototype,"messages",void 0),h([f()],Ih.prototype,"view",null),h([f({type:kme})],Ih.prototype,"viewModel",void 0),Ih=h([A("esri.widgets.Zoom")],Ih);const O7e=Ih;function S7e(t){return(t==null?void 0:t.view)!==void 0}let JC=class extends D9e{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),s=n==null?void 0:n.widget;S7e(s)&&(s.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Oe(()=>this.components,this._componentsWatcher,It),Oe(()=>this.view,this._updateViewAwareWidgets,It)])}_add(e,i,r,n,s){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,n,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new YC({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new p7e({view:i});case"compass":return new g7e({view:i});case"navigation-toggle":return new v7e({view:i});case"zoom":return new O7e({view:i})}}};h([f()],JC.prototype,"components",void 0),JC=h([A("esri.views.ui.DefaultUI")],JC);const Cme=JC;let KC=class extends Cme{constructor(e){super(e),this.components=["attribution","zoom"]}};h([f()],KC.prototype,"components",void 0),KC=h([A("esri.views.ui.2d.DefaultUI2D")],KC);const Mme=KC;let Ame=class Tj{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new G(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new Tj(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!s.test(r))throw new G((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(n!=null&&n.match)||!s.test(n))throw new G((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(n,10);return new Tj(o,a,i)}},dw=class extends Ame{constructor(e,i){super(e,i,"webmap")}};function qN(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const Ime=new dw(2,33);var Ej;let eM=Ej=class extends K{constructor(t){super(t),this.color=new xe([0,0,0,1])}clone(){return new Ej(q({color:this.color}))}};h([f({type:xe,json:{write:!0}})],eM.prototype,"color",void 0),eM=Ej=h([A("esri.webmap.background.ColorBackground")],eM);const wR=eM;let Pme,Rme,Lme,Nme,Dme,Vme,Fme;async function _7e(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:s,Stage:o}]=await Promise.all([J(()=>import("./webglDeps-DwTwP9Vx.js"),__vite__mapDeps([148,121,12,149,150,151])),J(()=>import("./mapViewDeps-B5fvDLuQ.js"),__vite__mapDeps([152,69,153,67,68,13,12,70,71,72,65,74,154,149,121,150,125,106,66,38,155,64,89,156,110,78,15,11,80,157,75,76,77,158,4,109,148,151,159,85,160,63,18,8,17,23,161,116,104,123,162,54,163,79,164,165,73,166,43,61,167,168,169,170,118,171,172]))]);Rme=t,Lme=e,Nme=i,Dme=r,Vme=n,Fme=s,Pme=o}let At=class extends hQe(MLe(iNe(U5e($je)))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new i$({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new hR({actionMap:new r9({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new Te,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new dme,this.type="2d",this.view2dType=null,this.ui=new Mme,this.test={takeScreenshot:async i=>v9e(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},V3e()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=bi(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new $8e(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return Uce(i.spatialReference,r)}get background(){return qN(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get highlightOptions(){return i9e(this)}set highlightOptions(e){r9e(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,n,s,o;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0)||e);if(te("esri-2d-log-updating")){const a=this.allLayerViews.reduce((l,u)=>({...l,[`${u.layer.id}(${u.layer.type})`]:!u.destroyed&&!("layerViews"in u)&&u.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${e}
`)}return i}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new da({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,i){return n9e(this,e,i)}async takeScreenshot(e){return g9e(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const i=bpe(e)?vpe(this,e):e;return this.stateManager.toMap(i)}toScreen(e,i){return this.stateManager.toScreen(e,i)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return qN(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return qN(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return iJ.hasLayerViewModule(e)}importLayerView(e){return iJ.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(pe.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var u;const i=this.toMap(e),r=await this.hitTest(e),n=this.allLayerViews.toArray().filter(p=>p.clips.every(m=>tme(this,m,e,i))).reverse(),s=new globalThis.Map(n.map(p=>[p.layer.uid,p])),o=[];let a=0,l=0;for(;a<r.results.length||l<n.length;){const p=r.results.at(a);if(p&&p.type!=="graphic"){++a;continue}const m=s.get((u=(p==null?void 0:p.layer)??(p==null?void 0:p.graphic.layer))==null?void 0:u.uid);if((!p||m)&&l<n.length&&n.at(l)!==m){const g=n.at(l);"fetchPopupFeaturesAtLocation"in g&&o.push({mapPoint:i,layerView:g}),++l}else p&&(o.push({graphic:p.graphic,layerView:m}),++a)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=k9e(this.type);if(te("safari")&&te("safari")<9&&(e=new G("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:te("safari")})),e!=null)throw pe.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return _7e()}_getDefaultViewpoint(){var x;const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,u=((x=l==null?void 0:l.targetGeometry)==null?void 0:x.extent)??i,p=u==null?void 0:u.center,m=(l==null?void 0:l.rotation)??0,g=(l==null?void 0:l.scale)||u&&mR(u,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),w=a.center??p,O=a.rotation??m,_=a.scale??g;return w&&_?new fn({targetGeometry:w,scale:_,rotation:O}):null}_startup(){var a;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(a=this.defaultsFromMap.extent)==null?void 0:a.center),this.graphics.owner=this;const i=new Pme(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new Vme,this._magnifierView.magnifier=this.magnifier,this._gridView=new Fme;const r=new Nme({view:this});this._set("labelManager",r);const n=new a8e({view:this});this._set("animationManager",n);const s=new Dme({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",l=>this.fatalError=l.error),Oe(()=>this.stationary,l=>i.stationary=l,Us),Oe(()=>this.background,l=>{i.backgroundColor=l==null?void 0:l.color,this._magnifierView.backgroundColor=l==null?void 0:l.color},Us),Oe(()=>this.magnifier,l=>this._magnifierView.magnifier=l,Us),Oe(()=>this.grid,l=>this._gridView.grid=l,Us),Oe(()=>this.renderingOptions,l=>i.renderingOptions=l,Us),Oe(()=>this.highlights.items.map(l=>({name:l.name,options:{fillColor:l.color,haloColor:l.haloColor,fillOpacity:l.fillOpacity,haloOpacity:l.haloOpacity,haloWidth:l.haloWidth,haloBlur:l.haloBlur}})),()=>{i.highlightGradient=e9e(i.highlightGradient,this.highlights.items)},Us),Oe(()=>this.state.id,()=>i.state=this.state,Us)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new p8e(kLe.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new Rme({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Lme(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var o;const{allLayerViews:i,padding:r,size:n,stage:s}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:r,size:n,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};At.type="2d",h([f({constructOnly:!0})],At.prototype,"deactivatedWebGLExtensions",void 0),h([f({constructOnly:!0})],At.prototype,"debugWebGLExtensions",void 0),h([f({readOnly:!0})],At.prototype,"featuresTilingScheme",void 0),h([f({readOnly:!0})],At.prototype,"graphicsTileStore",null),h([f()],At.prototype,"graphicsView",void 0),h([f()],At.prototype,"constraintsInfo",null),h([f()],At.prototype,"initialExtentRequired",null),h([f()],At.prototype,"labelManager",void 0),h([f({type:hR,nonNullable:!0})],At.prototype,"navigation",void 0),h([f({constructOnly:!0})],At.prototype,"renderCanvas",void 0),h([f()],At.prototype,"renderingOptions",void 0),h([f({constructOnly:!0})],At.prototype,"supersampleScreenshotsEnabled",void 0),h([f({readOnly:!0})],At.prototype,"supportsGround",void 0),h([f()],At.prototype,"defaultsFromMapSettings",null),h([f({readOnly:!0})],At.prototype,"typeSpecificPreconditionsReady",null),h([f({type:wR})],At.prototype,"background",null),h([f()],At.prototype,"center",null),h([f({type:Te})],At.prototype,"floors",void 0),h([f()],At.prototype,"grid",void 0),h([f({type:xf})],At.prototype,"highlightOptions",null),h([f()],At.prototype,"map",void 0),h([f()],At.prototype,"padding",null),h([f({readOnly:!0})],At.prototype,"rendering",null),h([f({readOnly:!0})],At.prototype,"resolution",null),h([f()],At.prototype,"scale",null),h([f({constructOnly:!0})],At.prototype,"spatialReferenceLocked",void 0),h([f({readOnly:!0})],At.prototype,"tileInfo",null),h([f({type:dme,readOnly:!0})],At.prototype,"timeline",void 0),h([f({readOnly:!0})],At.prototype,"type",void 0),h([f({readOnly:!0})],At.prototype,"updating",null),h([f({readOnly:!0})],At.prototype,"view2dType",void 0),h([f({readOnly:!0})],At.prototype,"visibleArea",null),h([f()],At.prototype,"zoom",null),h([f({readOnly:!0})],At.prototype,"navigating",null),h([f(),Rt(t=>t instanceof Cme?t:vO(Mme,t))],At.prototype,"ui",void 0),At=h([A("esri.views.View2D")],At);const x7e=At;let tM=class extends x7e{constructor(e){super(e),this.view2dType="map"}};h([f({readOnly:!0})],tM.prototype,"view2dType",void 0),tM=h([A("esri.views.MapView")],tM);const $7e=tM;let T7e=class jme{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(S4),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new jme,r=this._originStores[ht.DEFAULTS];r&&r.forEach((n,s)=>{i.set(s,q(n),ht.DEFAULTS)});for(let n=ht.SERVICE;n<S4;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{e&&e.has(a)||i.set(a,q(o),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=ht.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=ht.USER){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r==null?void 0:r.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||ht.DEFAULTS}forEach(e){this._values.forEach(e)}};const zme=t=>{let e=class extends t{constructor(...i){super(...i);const r=Io(this),n=r.store,s=new T7e;r.store=s,qae(r,n,s)}read(i,r){Zae(this,i,r)}getAtOrigin(i,r){const n=GN(this),s=cf(r);if(typeof i=="string")return n.get(i,s);const o={};return i.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(i){return nA(this.originIdOf(i))}originIdOf(i){return GN(this).originOf(i)}revert(i,r){const n=GN(this),s=cf(r),o=Io(this);let a;a=typeof i=="string"?i==="*"?n.keys(s):[i]:i,a.forEach(l=>{o.invalidate(l),n.revert(l,s),o.commit(l)})}};return e=h([A("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function GN(t){return Io(t).store}let YJ=class extends zme(Ce){};YJ=h([A("esri.core.ReadOnlyMultiOriginJSONSupport")],YJ);const E7e=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){return ZN(this).delete(i,cf(r))}write(i,r){return Xae(this,i=i||{},r),i}setAtOrigin(i,r,n){Io(this).setAtOrigin(i,r,cf(n))}removeOrigin(i){const r=ZN(this),n=cf(i),s=r.keys(n);for(const o of s)r.originOf(o)===n&&r.set(o,r.get(o,n),ht.USER)}updateOrigin(i,r){const n=ZN(this),s=cf(r),o=qs(this,i);for(let a=s+1;a<S4;++a)n.delete(i,a);n.set(i,o,s)}toJSON(i){return this.write({},i)}};return e=h([A("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function ZN(t){return Io(t).store}const OR=t=>{let e=class extends E7e(zme(t)){constructor(...i){super(...i)}};return e=h([A("esri.core.MultiOriginJSONSupport")],e),e};let kj=class extends OR(Ce){};kj=h([A("esri.core.MultiOriginJSONSupport")],kj);async function k7e(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Fb(t);const i=Je.WGS84;return await $8(e,i),rm(t,i)}function C7e(t,e){if(!Ume(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function Ume(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function r1t(t){return Ume(t,Qme.HOSTED_SERVICE)}function M7e(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function n1t(t,e,i){i?C7e(t,e):M7e(t,e)}async function s1t(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return k7e(i)}const Qme={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function A7e(t){var l;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(l=e.user)==null?void 0:l.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}let Pp=class extends K{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};h([f({type:String,json:{write:{isRequired:!0}}})],Pp.prototype,"facilityIdField",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],Pp.prototype,"layerId",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],Pp.prototype,"nameField",void 0),h([f({type:String,json:{write:!0}})],Pp.prototype,"siteIdField",void 0),h([f({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Pp.prototype,"sublayerId",void 0),Pp=h([A("esri.layers.support.FacilityLayerInfo")],Pp);const I7e=Pp;let ql=class extends K{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};h([f({type:String,json:{write:{isRequired:!0}}})],ql.prototype,"facilityIdField",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],ql.prototype,"layerId",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],ql.prototype,"levelIdField",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],ql.prototype,"levelNumberField",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],ql.prototype,"longNameField",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],ql.prototype,"shortNameField",void 0),h([f({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ql.prototype,"sublayerId",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],ql.prototype,"verticalOrderField",void 0),ql=h([A("esri.layers.support.LevelLayerInfo")],ql);const P7e=ql;let xy=class extends K{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};h([f({type:String,json:{write:{isRequired:!0}}})],xy.prototype,"layerId",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],xy.prototype,"nameField",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],xy.prototype,"siteIdField",void 0),h([f({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],xy.prototype,"sublayerId",void 0),xy=h([A("esri.layers.support.SiteLayerInfo")],xy);const R7e=xy;let Yv=class extends K{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};h([f({type:P7e,json:{write:{isRequired:!0}}})],Yv.prototype,"levelLayer",void 0),h([f({type:I7e,json:{write:{isRequired:!0}}})],Yv.prototype,"facilityLayer",void 0),h([f({type:R7e,json:{write:!0}})],Yv.prototype,"siteLayer",void 0),Yv=h([A("esri.support.MapFloorInfo")],Yv);const L7e=Yv;var fc;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(fc||(fc={}));var Cj;let Jv=Cj=class extends K{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new Cj(q({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};h([f({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Jv.prototype,"activeRange",void 0),h([f({type:[Number],json:{write:!0}})],Jv.prototype,"currentRangeExtent",void 0),h([f({type:[Number],json:{write:!0}})],Jv.prototype,"fullRangeExtent",void 0),Jv=Cj=h([A("esri.webdoc.RangeInfo")],Jv);const S9=Jv;var Mj;let Wu=Mj=class extends K{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new Mj(q({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};h([f({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Wu.prototype,"enabled",void 0),h([f({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Wu.prototype,"longNames",void 0),h([f({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Wu.prototype,"minimized",void 0),h([f({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Wu.prototype,"pinnedLevels",void 0),h([f({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Wu.prototype,"site",void 0),h([f({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Wu.prototype,"facility",void 0),h([f({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Wu.prototype,"level",void 0),Wu=Mj=h([A("esri.webdoc.widgets.FloorFilter")],Wu);const N7e=Wu;var Aj;const ek=new nt({slider:"slider",picker:"picker"});let Kv=Aj=class extends K{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Aj({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};h([f({type:ek.apiValues,nonNullable:!0,json:{type:ek.jsonValues,default:null,read:{reader:ek.read},write:{isRequired:!0,writer:ek.write}}})],Kv.prototype,"interactionMode",void 0),h([f({type:kt,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],Kv.prototype,"numStops",void 0),h([f({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],Kv.prototype,"stopInterval",void 0),Kv=Aj=h([A("esri.webdoc.widgets.Range")],Kv);const D7e=Kv,_9=dt()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let b_=class extends ft.ClonableMixin(K){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Yhe(this.value,this.unit,"milliseconds")}};h([Re(_9,{nonNullable:!0})],b_.prototype,"unit",void 0),h([f({type:Number,json:{write:!0},nonNullable:!0})],b_.prototype,"value",void 0),b_=h([A("esri.time.TimeInterval")],b_);const Yg=b_;var Ij;let on=Ij=class extends K{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?mn.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&Rr(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new mn({start:n,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,n=t.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(t,e,i){return t?Yg.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const n=t.toJSON(r);Rr("properties.timeStopInterval",{interval:n.value,units:n.unit},e)}readStops(t){return t!=null&&t.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t!=null&&t.length&&Rr(i,t.map(r=>r.getTime()),e)}clone(){return new Ij(q({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};h([f({type:mn,json:{type:[[kt,bO]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],on.prototype,"currentTimeExtent",void 0),h([ve("currentTimeExtent")],on.prototype,"readCurrentTimeExtent",null),h([we("currentTimeExtent")],on.prototype,"writeCurrentTimeExtent",null),h([f({type:mn,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],on.prototype,"fullTimeExtent",void 0),h([ve("fullTimeExtent")],on.prototype,"readFullTimeExtent",null),h([we("fullTimeExtent")],on.prototype,"writeFullTimeExtent",null),h([f({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],on.prototype,"loop",void 0),h([f({type:kt,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const t=!!this.stopInterval,e=!!((r=this.stops)!=null&&r.length),i=!(t||e);return{enabled:i,isRequired:i}}}}})],on.prototype,"numStops",void 0),h([f({type:[1,2],nonNullable:!0,json:{type:kt,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],on.prototype,"numThumbs",void 0),h([f({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],on.prototype,"stopDelay",void 0),h([f({type:Yg,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:_9.jsonValues.filter(t=>t!=="esriTimeUnitsUnknown")}},overridePolicy(){var i;const t=this.numStops!=null,e=!!((i=this.stops)!=null&&i.length);return{enabled:!e,isRequired:!(t||e)}}}}})],on.prototype,"stopInterval",void 0),h([ve("stopInterval")],on.prototype,"readStopInterval",null),h([we("stopInterval")],on.prototype,"writeStopInterval",null),h([f({type:[Date],json:{type:[kt],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],on.prototype,"stops",void 0),h([ve("stops")],on.prototype,"readStops",null),h([we("stops")],on.prototype,"writeStops",null),on=Ij=h([A("esri.webdoc.widgets.TimeSlider")],on);const V7e=on;var Pj;let eb=Pj=class extends K{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new Pj(q({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};h([f({type:D7e,json:{write:!0}})],eb.prototype,"range",void 0),h([f({type:V7e,json:{write:!0}})],eb.prototype,"timeSlider",void 0),h([f({type:N7e,json:{write:!0}})],eb.prototype,"floorFilter",void 0),eb=Pj=h([A("esri.webdoc.Widgets")],eb);const F7e=eb,j7e={width:600,height:400},tk=1.5;function z7e(t,e){e=e||j7e;let{width:i,height:r}=e;const n=i/r;return n<tk?r=i/tk:n>tk&&(i=r*tk),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function U7e(t,e){return{...Bme(t,e),readResourcePaths:[]}}function h1t(t,e,i){const r=xr(t.itemUrl);return{...Bme(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function Bme(t,e){return{origin:e,url:xr(t.itemUrl),portal:t.portal||Lr.getDefault(),portalItem:t}}let $y=class extends K{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=EA(this.outSpatialReference),r.inSR=EA(i.spatialReference),r.geometries=JSON.stringify({geometryType:g2(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};h([f()],$y.prototype,"geometries",void 0),h([f({type:Je,json:{read:{source:"outSR"}}})],$y.prototype,"outSpatialReference",void 0),h([f()],$y.prototype,"transformation",void 0),h([f()],$y.prototype,"transformForward",void 0),$y=h([A("esri.rest.support.ProjectParameters")],$y);const qme=$y,Q7e=_r(qme);async function B7e(t,e,i){e=Q7e(e);const r=af(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=g2(e.geometries[0]),a=Bpe(n,i);return bt(r.path+"/project",a).then(({data:{geometries:l}})=>Gpe(l,o,s))}function q7e(t,e){var i;return e.resourceInfo?Gme(e,e.resourceInfo,{origin:t.origin}):(i=e.portalItem)!=null&&i.id?G7e(t,e,e.portalItem):Promise.resolve()}function Gme(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||Lr.getDefault()),J(()=>import("./layersCreator-D9JmvcUB.js"),__vite__mapDeps([137,138,139,140,141,142])).then(({populateOperationalLayers:n})=>{const s=[],o=e.operationalLayers;o!=null&&o.length&&s.push(n(t.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l!=null&&l.length&&s.push(n(t.tables,l,a)),Promise.allSettled(s).then(()=>{})})}async function G7e(t,e,i){var o;if(await i.load().catch(a=>{throw new G(`${t.name}:load-portal-item`,"Failed to load portal item",{error:a})}),i.type!==t.itemType)throw new G(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const n=U7e(i,t.origin);await Z7e(t,e,r,n),e.resourceReferences={portalItem:i,paths:n.readResourcePaths};const s=await W7e(e.initialViewProperties,i,pe.getLogger(e));if(s){const a=((o=e.initialViewProperties)==null?void 0:o.clone())??t.createInitialViewProperties();a.viewpoint=s,e.initialViewProperties=a}}function Z7e(t,e,i,r){const n=H7e(t,i);return e.read(n,r),Gme(e,n,r)}function H7e(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function W7e(t,e,i){var s;if((s=t==null?void 0:t.viewpoint)==null?void 0:s.targetGeometry)return null;const n=await X7e(t,e,i);return n?new fn({targetGeometry:n}):null}async function X7e(t,e,i){const r=t==null?void 0:t.spatialReference,n=e==null?void 0:e.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Sf(n);const{getGeometryServiceURL:s}=await J(()=>import("./geometryServiceUtils-CJSnLRc_.js"),[]);try{const o=await s(e),a=new qme({geometries:[n],outSpatialReference:r});return(await B7e(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function JJ(t){return{enabled:!!(t!=null&&t.length)}}var Rj;let tb=Rj=class extends K{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Rj({exactMatch:this.exactMatch,type:this.type,name:this.name})}};h([f({type:Boolean,json:{write:!0}})],tb.prototype,"exactMatch",void 0),h([f({type:String,json:{write:!0}})],tb.prototype,"name",void 0),h([Re(t9)],tb.prototype,"type",void 0),tb=Rj=h([A("esri.webdoc.applicationProperties.SearchLayerField")],tb);const Y7e=tb;var Lj;let ib=Lj=class extends K{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new Lj(q({field:this.field,id:this.id,subLayer:this.subLayer}))}};h([f({type:Y7e,json:{write:{isRequired:!0}}})],ib.prototype,"field",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],ib.prototype,"id",void 0),h([f({type:kt,json:{write:!0}})],ib.prototype,"subLayer",void 0),ib=Lj=h([A("esri.webdoc.applicationProperties.SearchLayer")],ib);const J7e=ib;var Nj;let rb=Nj=class extends K{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Nj({exactMatch:this.exactMatch,type:this.type,name:this.name})}};h([f({type:Boolean,json:{write:!0}})],rb.prototype,"exactMatch",void 0),h([f({type:String,json:{write:!0}})],rb.prototype,"name",void 0),h([Re(t9)],rb.prototype,"type",void 0),rb=Nj=h([A("esri.webdoc.applicationProperties.SearchTableField")],rb);const K7e=rb;var Dj;let w_=Dj=class extends K{constructor(t){super(t),this.field=null,this.id=null}clone(){return new Dj(q({field:this.field,id:this.id}))}};h([f({type:K7e,json:{write:{isRequired:!0}}})],w_.prototype,"field",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],w_.prototype,"id",void 0),w_=Dj=h([A("esri.webdoc.applicationProperties.SearchTable")],w_);const eBe=w_;var Vj;const Zme=Te.ofType(J7e),Hme=Te.ofType(eBe);let Xu=Vj=class extends K{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Zme,this.tables=new Hme}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new Vj(q({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};h([f({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Xu.prototype,"addressSearchEnabled",void 0),h([ve("addressSearchEnabled")],Xu.prototype,"readAddressSearchEnabled",null),h([we("addressSearchEnabled")],Xu.prototype,"writeAddressSearchEnabled",null),h([f({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Xu.prototype,"enabled",void 0),h([f({type:String,json:{write:!0}})],Xu.prototype,"hintText",void 0),h([f({type:Zme,json:{write:{overridePolicy:JJ},origins:{"web-scene":{write:{isRequired:!0}}}}})],Xu.prototype,"layers",void 0),h([f({type:Hme,json:{read:!0,write:{overridePolicy:JJ}}})],Xu.prototype,"tables",void 0),Xu=Vj=h([A("esri.webdoc.applicationProperties.Search")],Xu);const tBe=Xu;var Fj;let iM=Fj=class extends K{constructor(t){super(t),this.search=null}clone(){return new Fj(q({search:this.search}))}};h([f({type:tBe,json:{write:!0}})],iM.prototype,"search",void 0),iM=Fj=h([A("esri.webdoc.applicationProperties.Viewing")],iM);const iBe=iM;var jj;let nb=jj=class extends K{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new jj(q({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};h([f({json:{write:!0}})],nb.prototype,"editing",void 0),h([f({json:{write:!0}})],nb.prototype,"offline",void 0),h([f({type:iBe,json:{write:!0}})],nb.prototype,"viewing",void 0),nb=jj=h([A("esri.webmap.ApplicationProperties")],nb);const rBe=nb;var zj;let nd=zj=class extends K{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return ole(this.url)}get isDataURI(){return $d(this.url)}clone(){return new zj({url:this.url})}};h([f({type:String,json:{write:{isRequired:!0}}})],nd.prototype,"url",void 0),h([f()],nd.prototype,"isSecureUrl",null),h([f()],nd.prototype,"isDataURI",null),nd=zj=h([A("esri.webdoc.support.SlideThumbnail")],nd);const nBe={type:mn,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?mn.fromArray(t):mn.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r!=null&&r.messages&&r.messages.push(new G("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[kt,bO]]}}}}};var Uj;let Yu=Uj=class extends Ed.IdentifiableMixin(K){constructor(t){super(t),this.name=null,this.thumbnail=new nd,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new nd({url:t}):_r(nd,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&pe.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return fn.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:n}=t;if(n==null||n.type==="extent")n!=null&&(e.extent=n.toJSON()),e[i]=t.toJSON();else{const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new G("property:unsupported",s)):pe.getLogger(this).error(s)}}clone(){return new Uj(q({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};h([f({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Yu.prototype,"name",void 0),h([f({type:nd,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Yu.prototype,"thumbnail",void 0),h([Rt("thumbnail")],Yu.prototype,"castThumbnail",null),h([f(nBe)],Yu.prototype,"timeExtent",void 0),h([f({type:fn,nonNullable:!0,json:{write:!0}})],Yu.prototype,"viewpoint",null),h([ve("viewpoint",["extent","viewpoint"])],Yu.prototype,"readViewpoint",null),h([we("viewpoint")],Yu.prototype,"writeViewpoint",null),Yu=Uj=h([A("esri.webmap.Bookmark")],Yu);const sBe=Yu;let Ph=class extends ft.ClonableMixin(Ce){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=yu,this.viewpoint=null}};h([f({type:wR})],Ph.prototype,"background",void 0),h([f({type:S9})],Ph.prototype,"rangeInfo",void 0),h([f({type:Je})],Ph.prototype,"spatialReference",void 0),h([f({type:mn})],Ph.prototype,"timeExtent",void 0),h([f({nonNullable:!0})],Ph.prototype,"timeZone",void 0),h([f({type:fn})],Ph.prototype,"viewpoint",void 0),Ph=h([A("esri.webmap.InitialViewProperties")],Ph);const dI=Ph,Wme=Te.ofType(sBe),oBe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),aBe="ArcGIS Pro",lBe=Qme.JSAPI;let Ci=class extends OR(fa.LoadableMixin(CO.EsriPromiseMixin(Khe))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new Wme,this.floorInfo=null,this.initialViewProperties=new dI,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=l2(async(i,r,n)=>{const{save:s,saveAs:o}=await J(()=>import("./webdocSaveUtils-7bbKU9py.js").then(a=>a.w),__vite__mapDeps([215,216,217,218,219]));switch(i){case fc.SAVE:return s(this.context,this,r);case fc.SAVE_AS:return o(this.context,this,n,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=bi(this.portalItem)}initialize(){if(this.when().catch(e=>{pe.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=lBe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=ple}readInitialViewProperties(e,i){var o,a;const r=new dI;i.background&&(r.background=wR.fromJSON(i.background));const n=(o=i.initialState)==null?void 0:o.timeExtent;n&&(r.timeExtent=mn.fromArray(n));const s=(a=i.initialState)==null?void 0:a.viewpoint;return s&&(s.rotation&&dw.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===aBe&&(s.rotation*=-1),r.viewpoint=fn.fromJSON(s)),i.mapRangeInfo&&(r.rangeInfo=S9.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=Je.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,n){var a;if(!e)return;(a=e.background)!=null&&a.color&&(i.background=e.background.write({},n));const{timeExtent:s,viewpoint:o}=e;if(o||s){const l={};o&&(l.viewpoint=o.write({},n)),s&&(l.timeExtent=s.toArray()),i.initialState=l}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},n)),i.timeZone=e.timeZone}writeLayers(e,i,r,n){i[r]=this._writeLayers(e,n,"operational-layers")}readSourceVersion(e,i){const[r,n]=i.version.split(".");return new dw(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,n){const s=this._writeLayers(e,n,"tables");s.length&&(i[r]=s)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(q7e(this.context,this)),Promise.resolve(this)}loadAll(){return ZP(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();Hae(this,e,n=>super.read(e,n),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new G("webmap:not-loaded","Web map must be loaded before it can be serialized");throw pe.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(fc.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(fc.SAVE_AS,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var r,n,s,o;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((o=(s=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find(a=>a.id===e.id)}async updateItemThumbnail(){var e;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:ule(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map(n=>PV(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i)).filter(pn).toArray()}_validateJSON(e){const i=dw.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){var o,a;const e=this.applicationProperties,i=(o=e==null?void 0:e.viewing)==null?void 0:o.search,r=l=>this.allLayers.some(u=>u.id===l);if(i!=null&&i.layers&&(i.layers=i.layers.filter(l=>r(l.id))),i!=null&&i.tables&&(i.tables=i.tables.filter(l=>this.tables.some(u=>u.id===l.id))),e){const l=(a=e.editing)==null?void 0:a.locationTracking;l!=null&&l.info&&!r(l.info.layerId)&&(e.editing=null)}const n="presentation"in this?this.presentation:null,s=n==null?void 0:n.slides;s&&s.forEach(l=>{l.visibleLayers&&(l.visibleLayers=l.visibleLayers.filter(u=>r(u.id)))})}async _updateFromInternal(e,i){if(i??(i={}),await l0(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){var r,n;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=e.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(n=e.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new fn({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const s of e.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=z7e(e,i.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if($d(e)){const i=Df(e),r=i==null?void 0:i.mediaType,n=r&&oBe.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};h([f()],Ci.prototype,"_updateFromPromise",void 0),h([f({type:rBe,json:{write:!0}})],Ci.prototype,"applicationProperties",void 0),h([f({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Ci.prototype,"authoringApp",null),h([we("authoringApp")],Ci.prototype,"writeAuthoringApp",null),h([f({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Ci.prototype,"authoringAppVersion",null),h([we("authoringAppVersion")],Ci.prototype,"writeAuthoringAppVersion",null),h([f({type:Wme,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Ci.prototype,"bookmarks",void 0),h([f({type:L7e,json:{name:"mapFloorInfo",write:!0}})],Ci.prototype,"floorInfo",void 0),h([f({type:dI,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:wR},"initialState.timeExtent":{type:mn},"initialState.viewpoint":{type:fn},mapRangeInfo:{type:S9},spatialReference:{type:Je},"timeZone:":{type:String}}}}})],Ci.prototype,"initialViewProperties",void 0),h([ve("initialViewProperties")],Ci.prototype,"readInitialViewProperties",null),h([we("initialViewProperties")],Ci.prototype,"writeInitialViewProperties",null),h([f({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Ci.prototype,"layers",void 0),h([we("layers")],Ci.prototype,"writeLayers",null),h([f({type:Hs})],Ci.prototype,"portalItem",void 0),h([f()],Ci.prototype,"resourceInfo",void 0),h([f({readOnly:!0,type:dw,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Ci.prototype,"sourceVersion",void 0),h([ve("sourceVersion")],Ci.prototype,"readSourceVersion",null),h([we("sourceVersion")],Ci.prototype,"writeSourceVersion",null),h([f({json:{read:!1,write:{ignoreOrigin:!0}}})],Ci.prototype,"tables",void 0),h([we("tables")],Ci.prototype,"writeTables",null),h([f()],Ci.prototype,"thumbnailUrl",null),h([f()],Ci.prototype,"updatingFromView",null),h([f({type:F7e,json:{write:!0}})],Ci.prototype,"widgets",void 0),Ci=h([A("esri.WebDocument2D")],Ci);const uBe=Ci,Gi=(t=>t)(["operational-layers","basemap","ground"]);var Qj;let Ty=Qj=class extends K{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Qj({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([f({type:String,json:{write:!0}})],Ty.prototype,"expression",void 0),h([f({type:String,json:{write:!0}})],Ty.prototype,"name",void 0),h([f({type:["boolean","date","number","string"],json:{write:!0}})],Ty.prototype,"returnType",void 0),h([f({type:String,json:{write:!0}})],Ty.prototype,"title",void 0),Ty=Qj=h([A("esri.form.ExpressionInfo")],Ty);const cBe=Ty;let Ey=class extends K{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};h([f({type:String,json:{write:!0}})],Ey.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],Ey.prototype,"label",void 0),h([f()],Ey.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],Ey.prototype,"visibilityExpression",void 0),Ey=h([A("esri.form.elements.Element")],Ey);const Gf=Ey;let rM=class extends ft.ClonableMixin(K){constructor(e){super(e),this.type=null}};h([f()],rM.prototype,"type",void 0),rM=h([A("esri.form.elements.inputs.attachments.Input")],rM);const Zf=rM,SR=["any","capture","upload"];let sb=class extends Zf{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};h([f({type:["audio"],readOnly:!0,json:{write:!0}})],sb.prototype,"type",void 0),h([f({type:SR,json:{write:!0}})],sb.prototype,"inputMethod",void 0),h([f({type:Number,json:{write:!0}})],sb.prototype,"maxDuration",void 0),sb=h([A("esri.form.elements.inputs.attachments.AudioInput")],sb);const KJ=sb;let O_=class extends Zf{constructor(e){super(e),this.type="document",this.maxFileSize=null}};h([f({type:["document"],readOnly:!0,json:{write:!0}})],O_.prototype,"type",void 0),h([f({type:Number,json:{write:!0}})],O_.prototype,"maxFileSize",void 0),O_=h([A("esri.form.elements.inputs.attachments.DocumentInput")],O_);const eK=O_;let ob=class extends Zf{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};h([f({type:["image"],readOnly:!0,json:{write:!0}})],ob.prototype,"type",void 0),h([f({type:SR,json:{write:!0}})],ob.prototype,"inputMethod",void 0),h([f({type:Number,json:{write:!0}})],ob.prototype,"maxImageSize",void 0),ob=h([A("esri.form.elements.inputs.attachments.ImageInput")],ob);const tK=ob;let S_=class extends Zf{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};h([f({type:["signature"],readOnly:!0,json:{write:!0}})],S_.prototype,"type",void 0),h([f({type:SR,json:{write:!0}})],S_.prototype,"inputMethod",void 0),S_=h([A("esri.form.elements.inputs.attachments.SignatureInput")],S_);const iK=S_;let ab=class extends Zf{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};h([f({type:["video"],readOnly:!0,json:{write:!0}})],ab.prototype,"type",void 0),h([f({type:SR,json:{write:!0}})],ab.prototype,"inputMethod",void 0),h([f({type:Number,json:{write:!0}})],ab.prototype,"maxDuration",void 0),ab=h([A("esri.form.elements.inputs.attachments.VideoInput")],ab);const rK=ab;function Xme(t){return{nestableTypes:{base:Zf,key:"type",typeMap:{audio:KJ,document:eK,image:tK,signature:iK,video:rK}},allTypes:{base:Zf,key:"type",typeMap:{attachment:t,audio:KJ,document:eK,image:tK,signature:iK,video:rK}}}}function hBe(t,e,i){return t?t.map(r=>fu(e.nestableTypes,r)):null}function dBe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function pBe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}let oc=class extends Zf{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return hBe(e,HN)}readInputs(e,i){return dBe(i.inputTypes,HN)}writeInputs(e,i){i.inputTypes=pBe(e,HN)}};h([f({type:["attachment"],readOnly:!0,json:{write:!0}})],oc.prototype,"type",void 0),h([f({type:["any","exact","exactOrNone"],json:{write:!0}})],oc.prototype,"attachmentAssociationType",void 0),h([f({json:{write:{isRequired:!0}}})],oc.prototype,"inputTypes",void 0),h([Rt("inputTypes")],oc.prototype,"castInputs",null),h([ve("inputTypes")],oc.prototype,"readInputs",null),h([we("inputTypes")],oc.prototype,"writeInputs",null),oc=h([A("esri.form.elements.inputs.attachments.AttachmentInput")],oc);const HN=Xme(oc),fBe=oc;var Bj;const mBe=Xme(fBe);let Jo=Bj=class extends Gf{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new Bj({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};h([f({type:Boolean,json:{write:!0}})],Jo.prototype,"allowUserRename",void 0),h([f({type:String,json:{write:{isRequired:!0}}})],Jo.prototype,"attachmentKeyword",void 0),h([f({type:Boolean,json:{write:!0}})],Jo.prototype,"displayFilename",void 0),h([f({type:String,json:{write:!0}})],Jo.prototype,"editableExpression",void 0),h([f({type:String,json:{write:!0}})],Jo.prototype,"filenameExpression",void 0),h([f({types:mBe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Jo.prototype,"input",void 0),h([f({type:Number,json:{write:!0}})],Jo.prototype,"maxAttachmentCount",void 0),h([f({type:Number,json:{write:!0}})],Jo.prototype,"minAttachmentCount",void 0),h([f({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Jo.prototype,"type",void 0),h([f({type:Boolean,json:{write:!0}})],Jo.prototype,"useOriginalFilename",void 0),Jo=Bj=h([A("esri.form.elements.AttachmentElement")],Jo);const nK=Jo;let nM=class extends K{constructor(e){super(e),this.type=null}};h([f()],nM.prototype,"type",void 0),nM=h([A("esri.form.elements.inputs.Input")],nM);const Cd=nM;let __=class extends Cd{constructor(e){super(e),this.maxLength=null,this.minLength=0}};h([f({type:Number,json:{write:!0}})],__.prototype,"maxLength",void 0),h([f({type:Number,json:{write:!0}})],__.prototype,"minLength",void 0),__=h([A("esri.form.elements.inputs.TextInput")],__);const x9=__;var qj;let sM=qj=class extends x9{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new qj({maxLength:this.maxLength,minLength:this.minLength})}};h([f({type:["barcode-scanner"],json:{read:!1,write:!0}})],sM.prototype,"type",void 0),sM=qj=h([A("esri.form.elements.inputs.BarcodeScannerInput")],sM);const yBe=sM;var Gj;let lb=Gj=class extends Cd{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Gj({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};h([f({type:String,json:{write:!0}})],lb.prototype,"noValueOptionLabel",void 0),h([f({type:Boolean,json:{write:!0}})],lb.prototype,"showNoValueOption",void 0),h([f({type:["combo-box"],json:{read:!1,write:!0}})],lb.prototype,"type",void 0),lb=Gj=h([A("esri.form.elements.inputs.ComboBoxInput")],lb);const gBe=lb;var Zj;function sK(t){return t??null}function oK(t){return t??null}let Ju=Zj=class extends Cd{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return sK(e.max)}writeMax(t,e){e.max=oK(t)}readMin(t,e){return sK(e.min)}writeMin(t,e){e.min=oK(t)}clone(){return new Zj({max:this.max,min:this.min})}};h([f({type:String,json:{type:String,write:!0}})],Ju.prototype,"max",void 0),h([ve("max")],Ju.prototype,"readMax",null),h([we("max")],Ju.prototype,"writeMax",null),h([f({type:String,json:{type:String,write:!0}})],Ju.prototype,"min",void 0),h([ve("min")],Ju.prototype,"readMin",null),h([we("min")],Ju.prototype,"writeMin",null),h([f({type:["date-picker"],json:{read:!1,write:!0}})],Ju.prototype,"type",void 0),Ju=Zj=h([A("esri.form.elements.inputs.DatePickerInput")],Ju);const vBe=Ju;var Hj;function WN(t){return t??null}function XN(t){return t??null}let co=Hj=class extends Cd{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return WN(e.max)}writeMax(t,e){e.max=XN(t)}readMin(t,e){return WN(e.min)}writeMin(t,e){e.min=XN(t)}readTimeResolution(t,e){return WN(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=XN(t)}clone(){return new Hj({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};h([f({type:Boolean,json:{write:!0}})],co.prototype,"includeTimeOffset",void 0),h([f({type:String,json:{type:String,write:!0}})],co.prototype,"max",void 0),h([ve("max")],co.prototype,"readMax",null),h([we("max")],co.prototype,"writeMax",null),h([f({type:String,json:{type:String,write:!0}})],co.prototype,"min",void 0),h([ve("min")],co.prototype,"readMin",null),h([we("min")],co.prototype,"writeMin",null),h([f({type:String,json:{type:String,write:!0}})],co.prototype,"timeResolution",void 0),h([ve("timeResolution")],co.prototype,"readTimeResolution",null),h([we("timeResolution")],co.prototype,"writeTimeResolution",null),h([f({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],co.prototype,"type",void 0),co=Hj=h([A("esri.form.elements.inputs.DateTimeOffsetPickerInput")],co);const bBe=co;var Wj;function aK(t){return t!=null?new Date(t):null}function lK(t){return t?t.getTime():null}let Gl=Wj=class extends Cd{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return aK(e.max)}writeMax(t,e){e.max=lK(t)}readMin(t,e){return aK(e.min)}writeMin(t,e){e.min=lK(t)}clone(){return new Wj({includeTime:this.includeTime,max:this.max,min:this.min})}};h([f({type:Boolean,json:{write:!0}})],Gl.prototype,"includeTime",void 0),h([f({type:Date,json:{type:Number,write:!0}})],Gl.prototype,"max",void 0),h([ve("max")],Gl.prototype,"readMax",null),h([we("max")],Gl.prototype,"writeMax",null),h([f({type:Date,json:{type:Number,write:!0}})],Gl.prototype,"min",void 0),h([ve("min")],Gl.prototype,"readMin",null),h([we("min")],Gl.prototype,"writeMin",null),h([f({type:["datetime-picker"],json:{read:!1,write:!0}})],Gl.prototype,"type",void 0),Gl=Wj=h([A("esri.form.elements.inputs.DateTimePickerInput")],Gl);const wBe=Gl;var Xj;let ub=Xj=class extends Cd{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new Xj({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};h([f({type:String,json:{write:!0}})],ub.prototype,"noValueOptionLabel",void 0),h([f({type:Boolean,json:{write:!0}})],ub.prototype,"showNoValueOption",void 0),h([f({type:["radio-buttons"],json:{read:!1,write:!0}})],ub.prototype,"type",void 0),ub=Xj=h([A("esri.form.elements.inputs.RadioButtonsInput")],ub);const OBe=ub;var Yj;let cb=Yj=class extends Cd{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Yj({offValue:this.offValue,onValue:this.onValue})}};h([f({type:[String,Number],json:{write:!0}})],cb.prototype,"offValue",void 0),h([f({type:[String,Number],json:{write:!0}})],cb.prototype,"onValue",void 0),h([f({type:["switch"],json:{read:!1,write:!0}})],cb.prototype,"type",void 0),cb=Yj=h([A("esri.form.elements.inputs.SwitchInput")],cb);const SBe=cb;var Jj;let oM=Jj=class extends x9{constructor(t){super(t),this.type="text-area"}clone(){return new Jj({maxLength:this.maxLength,minLength:this.minLength})}};h([f({type:["text-area"],json:{read:!1,write:!0}})],oM.prototype,"type",void 0),oM=Jj=h([A("esri.form.elements.inputs.TextAreaInput")],oM);const _Be=oM;var Kj;let aM=Kj=class extends x9{constructor(t){super(t),this.type="text-box"}clone(){return new Kj({maxLength:this.maxLength,minLength:this.minLength})}};h([f({type:["text-box"],json:{read:!1,write:!0}})],aM.prototype,"type",void 0),aM=Kj=h([A("esri.form.elements.inputs.TextBoxInput")],aM);const xBe=aM;var ez;function YN(t){return t??null}function JN(t){return t??null}let Ko=ez=class extends Cd{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return YN(e.max)}writeMax(t,e){e.max=JN(t)}readMin(t,e){return YN(e.min)}writeMin(t,e){e.min=JN(t)}readTimeResolution(t,e){return YN(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=JN(t)}clone(){return new ez({max:this.max,min:this.min,timeResolution:this.timeResolution})}};h([f({type:String,json:{type:String,write:!0}})],Ko.prototype,"max",void 0),h([ve("max")],Ko.prototype,"readMax",null),h([we("max")],Ko.prototype,"writeMax",null),h([f({type:String,json:{type:String,write:!0}})],Ko.prototype,"min",void 0),h([ve("min")],Ko.prototype,"readMin",null),h([we("min")],Ko.prototype,"writeMin",null),h([f({type:String,json:{type:String,write:!0}})],Ko.prototype,"timeResolution",void 0),h([ve("timeResolution")],Ko.prototype,"readTimeResolution",null),h([we("timeResolution")],Ko.prototype,"writeTimeResolution",null),h([f({type:["time-picker"],json:{read:!1,write:!0}})],Ko.prototype,"type",void 0),Ko=ez=h([A("esri.form.elements.inputs.TimePickerInput")],Ko);const $Be=Ko,TBe={base:Cd,key:"type",typeMap:{"barcode-scanner":yBe,"combo-box":gBe,"date-picker":vBe,"datetime-picker":wBe,"datetimeoffset-picker":bBe,"radio-buttons":OBe,switch:SBe,"text-area":_Be,"text-box":xBe,"time-picker":$Be}};var tz;let ja=tz=class extends Gf{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new tz({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};h([f({types:hpe,json:{read:{reader:uR},write:!0}})],ja.prototype,"domain",void 0),h([f({type:Boolean,json:{write:!0}})],ja.prototype,"editable",void 0),h([f({type:String,json:{write:!0}})],ja.prototype,"editableExpression",void 0),h([f({type:String,json:{write:!0}})],ja.prototype,"fieldName",void 0),h([f({type:String,json:{write:!0}})],ja.prototype,"hint",void 0),h([f({types:TBe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ja.prototype,"input",void 0),h([f({type:String,json:{write:!0}})],ja.prototype,"requiredExpression",void 0),h([f({type:String,json:{read:!1,write:!0}})],ja.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],ja.prototype,"valueExpression",void 0),ja=tz=h([A("esri.form.elements.FieldElement")],ja);const uK=ja;var iz;let Rh=iz=class extends Gf{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new iz({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:q(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};h([f({type:Number,json:{write:!0}})],Rh.prototype,"displayCount",void 0),h([f({type:["list"],json:{write:!0}})],Rh.prototype,"displayType",void 0),h([f({type:String,json:{write:!0}})],Rh.prototype,"editableExpression",void 0),h([f({type:[B8],json:{write:!0}})],Rh.prototype,"orderByFields",void 0),h([f({type:Number,json:{write:!0}})],Rh.prototype,"relationshipId",void 0),h([f({type:["relationship"],json:{read:!1,write:!0}})],Rh.prototype,"type",void 0),Rh=iz=h([A("esri.form.elements.RelationshipElement")],Rh);const cK=Rh;var rz;let hb=rz=class extends Gf{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new rz({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};h([f({type:String,json:{write:!0}})],hb.prototype,"text",void 0),h([f({type:String,json:{write:!0}})],hb.prototype,"textFormat",void 0),h([f({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],hb.prototype,"type",void 0),hb=rz=h([A("esri.form.elements.TextElement")],hb);const hK=hb;let db=class extends ft.ClonableMixin(Gf){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};h([f({type:[Tde],json:{write:{isRequired:!0}}})],db.prototype,"associationTypes",void 0),h([f({type:String,json:{write:!0}})],db.prototype,"editableExpression",void 0),h([f({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],db.prototype,"type",void 0),db=h([A("esri.form.elements.UtilityNetworkAssociationsElement")],db);const dK=db,EBe=t=>t.type==="field",kBe=t=>t.type==="group",CBe=t=>t.type==="text";function Yme(t){return{typesWithGroup:{base:Gf,key:"type",typeMap:{attachment:nK,field:uK,group:t,relationship:cK,text:hK,utilityNetworkAssociations:dK}},typesWithoutGroup:{base:Gf,key:"type",typeMap:{attachment:nK,field:uK,relationship:cK,text:hK,utilityNetworkAssociations:dK}}}}function Jme(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function Kme(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function eye(t,e,i=!0){return t?t.map(r=>fu(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var nz;let ac=nz=class extends Gf{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return eye(t,KN,!1)}readElements(t,e){return Jme(e.formElements,KN,!1)}writeElements(t,e){e.formElements=Kme(t,KN,!1)}clone(){return new nz({description:this.description,elements:q(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};h([f({json:{write:!0}})],ac.prototype,"elements",void 0),h([Rt("elements")],ac.prototype,"castElements",null),h([ve("elements",["formElements"])],ac.prototype,"readElements",null),h([we("elements")],ac.prototype,"writeElements",null),h([f({type:["collapsed","expanded"],json:{write:!0}})],ac.prototype,"initialState",void 0),h([f({type:String,json:{read:!1,write:!0}})],ac.prototype,"type",void 0),ac=nz=h([A("esri.form.elements.GroupElement")],ac);const KN=Yme(ac),MBe=ac;var sz;const eD=Yme(MBe);let Zl=sz=class extends K{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return eye(t,eD)}readElements(t,e){return Jme(e.formElements,eD)}writeElements(t,e){e.formElements=Kme(t,eD)}clone(){return new sz({description:this.description,expressionInfos:q(this.expressionInfos),elements:q(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:n,expressionInfos:s,title:o}=this;if(xx(i,t,r),xx(i,t,o),!n)return[];const a=ABe(n,s).map(l=>Ts(i,t,l));await Promise.all(a);for(const l of n)tye(i,{fieldsIndex:t,relationships:e},l);return Array.from(i).sort()}};function tye(t,e,i){var n;const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(xx(t,r,i.label),xx(t,r,i.description),i.type){case"field":Xs(t,r,i.fieldName);break;case"group":i.elements.forEach(s=>tye(t,e,s));break;case"relationship":if(e.relationships){const s=e.relationships.find(o=>o.id===i.relationshipId);s&&Xs(t,r,s.keyField)}Xg(t,r,(n=i.orderByFields)==null?void 0:n.map(s=>s.field));break;case"text":xx(t,r,i.text)}}function ABe(t,e){if(!e||e.length===0)return[];const i=iye(t),r=[];for(const n of e)i.has(n.name)&&r.push(n.expression);return r}function iye(t){const e=new Set;for(const i of t)if(GH(e,i.visibilityExpression),!CBe(i)){if(kBe(i))uA(e,iye(i.elements));else if(GH(e,i.editableExpression),EBe(i)){const{requiredExpression:r,valueExpression:n}=i;uA(e,[r,n])}}return e}function xx(t,e,i){Xg(t,e,z8(i))}h([f({type:String,json:{write:!0}})],Zl.prototype,"description",void 0),h([f({json:{write:!0}})],Zl.prototype,"elements",void 0),h([Rt("elements")],Zl.prototype,"castElements",null),h([ve("elements",["formElements"])],Zl.prototype,"readElements",null),h([we("elements")],Zl.prototype,"writeElements",null),h([f({type:[cBe],json:{write:!0}})],Zl.prototype,"expressionInfos",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],Zl.prototype,"preserveFieldValuesWhenHidden",void 0),h([f({type:String,json:{write:!0}})],Zl.prototype,"title",void 0),Zl=sz=h([A("esri.form.FormTemplate")],Zl);const IBe=Zl;function pK(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function PBe(t,e,i){if(!t&&!e||!i)return;const r=CA(i);fK(t,i,r),fK(e,i,r)}function fK(t,e,i){if(t)for(const r of t)RBe(r.geometry,e,i)}function RBe(t,e,i){if(!(t!=null&&t.spatialReference)||yn(t.spatialReference,e))return;const r=CA(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)pK(t,t.rings,r);else if("paths"in t)pK(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function mK(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=jce(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}var oz;const az=new nt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Tn=oz=class extends K{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,Cc)}writeGeometryType(t,e,i,r){if(t)return void az.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void az.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=bd(t);return r&&!i&&e.spatialReference&&(r.spatialReference=Je.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new oz(this.cloneProperties())}cloneProperties(){return q({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t==null?void 0:t[i];r.geometry=(n==null?void 0:n.toJSON())||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=u=>Math.round((u-r)/e),o=u=>Math.round((n-u)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let u=0,p=a.length;u<p;u++)l!=null&&l(a[u].geometry)||(a.splice(u,1),u--,p--);return this.transform=t,this}unquantize(){var g,w;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,a=O=>O*s+r,l=O=>n-O*o;let u=null,p=null;if(this.hasZ&&((g=i==null?void 0:i.scale)==null?void 0:g[2])!=null){const{translate:[,,O],scale:[,,_]}=i;u=x=>x*_+O}if(this.hasM&&((w=i==null?void 0:i.scale)==null?void 0:w[3])!=null){const{translate:[,,,O],scale:[,,,_]}=i;p=x=>x==null?x:x*_+O}const m=this._getHydrationFunction(t,a,l,u,p);for(const{geometry:O}of e)O!=null&&m&&m(O);return this.transform=null,this}readFeaturesWithClass(t,e,i){var s;const r=Je.fromJSON(e.spatialReference),n=[];for(let o=0;o<t.length;o++){const a=t[o],l=i.fromJSON(a),u=(s=a.geometry)==null?void 0:s.spatialReference;l.geometry==null||u||(l.geometry.spatialReference=r);const p=a.aggregateGeometries,m=l.aggregateGeometries;if(p&&m!=null)for(const g in m){const w=m[g],O=p[g],_=O==null?void 0:O.spatialReference;w==null||_||(w.spatialReference=r)}n.push(l)}return n}_quantizePoints(t,e,i){let r,n;const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const u=e(l[0]),p=i(l[1]);u===r&&p===n||(s.push([u-r,p-n]),r=u,n=p)}else r=e(l[0]),n=i(l[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=wg(r)?r.rings:r.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],u=this._quantizePoints(l,e,i);u&&s.push(u)}return s.length>0?(wg(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const o=wg(s)?s.rings:s.paths;let a,l;for(let u=0,p=o.length;u<p;u++){const m=o[u];for(let g=0,w=m.length;g<w;g++){const O=m[g];g>0?(a+=O[0],l+=O[1]):(a=O[0],l=O[1]),O[0]=e(a),O[1]=i(l)}}if(r&&n)for(let u=0,p=o.length;u<p;u++){const m=o[u];for(let g=0,w=m.length;g<w;g++){const O=m[g];O[2]=r(O[2]),O[3]=n(O[3])}}else if(r)for(let u=0,p=o.length;u<p;u++){const m=o[u];for(let g=0,w=m.length;g<w;g++){const O=m[g];O[2]=r(O[2])}}else if(n)for(let u=0,p=o.length;u<p;u++){const m=o[u];for(let g=0,w=m.length;g<w;g++){const O=m[g];O[2]=n(O[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const o=s.points;let a,l;for(let u=0,p=o.length;u<p;u++){const m=o[u];u>0?(a+=m[0],l+=m[1]):(a=m[0],l=m[1]),m[0]=e(a),m[1]=i(l)}if(r&&n)for(let u=0,p=o.length;u<p;u++){const m=o[u];m[2]=r(m[2]),m[3]=n(m[3])}else if(r)for(let u=0,p=o.length;u<p;u++){const m=o[u];m[2]=r(m[2])}else if(n)for(let u=0,p=o.length;u<p;u++){const m=o[u];m[2]=n(m[2])}}:null}};h([f({type:String,json:{write:!0}})],Tn.prototype,"displayFieldName",void 0),h([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Tn.prototype,"exceededTransferLimit",void 0),h([f({type:[Cc],json:{write:!0}})],Tn.prototype,"features",void 0),h([ve("features")],Tn.prototype,"readFeatures",null),h([f({type:[cR],json:{write:!0}})],Tn.prototype,"fields",void 0),h([f({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:az.read}}})],Tn.prototype,"geometryType",void 0),h([we("geometryType")],Tn.prototype,"writeGeometryType",null),h([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Tn.prototype,"hasM",void 0),h([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Tn.prototype,"hasZ",void 0),h([f({types:_O,json:{write:!0}})],Tn.prototype,"queryGeometry",void 0),h([ve("queryGeometry")],Tn.prototype,"readQueryGeometry",null),h([f({type:Je,json:{write:!0}})],Tn.prototype,"spatialReference",void 0),h([we("spatialReference")],Tn.prototype,"writeSpatialReference",null),h([f({json:{write:!0}})],Tn.prototype,"transform",void 0),Tn=oz=h([A("esri.rest.support.FeatureSet")],Tn),Tn.prototype.toJSON.isDefaultToJSON=!0;const g$=Tn;let LBe=0,Hh=class extends fa.LoadableMixin(CO.EsriPromiseMixin(Te)){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);mK(e,this.layer.spatialReference,r);const n=g$.fromJSON(r);if(!this._requiresClientGraphicMapping())return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new G("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return mK(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:oi.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e==null?void 0:e.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new G("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=p=>"objectId"in p&&p.objectId!=null?p.objectId:"attributes"in p&&p.attributes[i]!=null?p.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const p of e.deleteFeatures){const m=o(p);m!=null&&n.push(m)}const a=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const p of e.updateFeatures)if(s.push(this._serializeFeature(p)),a){const m=o(p);m!=null&&a.set(m,p)}}PBe(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=l,r&&r.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new G("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const s=this;return{features:r,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const u=o[l],p=i.get(l);p&&(p.attributes||(p.attributes={}),u===-1?delete p.attributes[a]:p.attributes[a]=u,s._addIdToClientGraphic(p))}}}}_addIdToClientGraphic(e){var n;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=(n=e.attributes)==null?void 0:n[i];r!=null&&this._idToClientGraphic.set(r,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(LBe++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?da.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await F3e("MemorySourceWorker",{strategy:te("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,u=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const p=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",O=>{pe.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),O.preventDefault()}));const m={features:p.features,fields:i==null?void 0:i.map(O=>O.toJSON()),geometryType:TW.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:u?null:r&&r.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:l},g=await this._connection.invoke("load",m,{signal:e});for(const O of g.warnings)pe.getLogger(this.layer).warn("#load()",`${O.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:O});g.featureErrors.length&&pe.getLogger(this.layer).warn("#load()",`Encountered ${g.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:g.featureErrors});const w=g.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(p.inferredGeometryType)&&(w.geometryType=TW.toJSON(p.inferredGeometryType)),this.sourceJSON=w,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),p.finish(g.assignedObjectIds)}};h([kQ({Type:Cc,ensureType:_r(Cc)})],Hh.prototype,"itemType",void 0),h([f()],Hh.prototype,"type",void 0),h([f({constructOnly:!0})],Hh.prototype,"layer",void 0),h([f({readOnly:!0})],Hh.prototype,"_workerGeometryType",null),h([f()],Hh.prototype,"sourceJSON",void 0),Hh=h([A("esri.layers.graphics.sources.MemorySource")],Hh);function NBe(t){return"portalItem"in t}const DBe=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):NBe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return h([f({type:String})],e.prototype,"apiKey",null),e=h([A("esri.layers.mixins.APIKeyMixin")],e),e},VBe=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Ff(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",NMe(i,pe.getLogger(this)))}};return h([f()],e.prototype,"title",null),h([f({type:String})],e.prototype,"url",null),e=h([A("esri.layers.mixins.ArcGISService")],e),e};function FBe(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}function pw(t,e,i,r){var n=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(n,pw.prototype),n.expected=e,n.found=i,n.location=r,n.name="SyntaxError",n}function tD(t,e,i){return i=i||" ",t.length>e?t:(e-=t.length,t+(i+=i.repeat(e)).slice(0,e))}function jBe(t,e){var i,r={},n=(e=e!==void 0?e:{}).grammarSource,s={start:GO},o=GO,a="none",l=")",u=",",p="(",m="%",g="px",w="cm",O="mm",_="in",x="pt",T="pc",E="deg",k="rad",M="grad",R="turn",D="#",L=".",F="e",j=/^[ \t\n\r]/,B=/^[a-z\-]/,W=/^[0-9a-fA-F]/,ie=/^[+\-]/,oe=/^[0-9]/,ae=Zi("none"),Ee=Dr("none",!1),ue=Dr(")",!1),he=Dr(",",!1),ye=Zi("whitespace"),Ae=ro([" ","	",`
`,"\r"],!1,!1),Q=Zi("function"),ge=Dr("(",!1),Ve=Zi("identifier"),Ne=ro([["a","z"],"-"],!1,!1),ke=Zi("percentage"),ct=Dr("%",!1),ot=Zi("length"),ai=Dr("px",!1),St=Dr("cm",!1),ri=Dr("mm",!1),Ft=Dr("in",!1),Er=Dr("pt",!1),en=Dr("pc",!1),kr=Zi("angle"),ya=Dr("deg",!1),ga=Dr("rad",!1),to=Dr("grad",!1),gl=Dr("turn",!1),va=Zi("number"),vl=Zi("color"),bl=Dr("#",!1),ba=ro([["0","9"],["a","f"],["A","F"]],!1,!1),Ou=ro(["+","-"],!1,!1),is=ro([["0","9"]],!1,!1),wn=Dr(".",!1),Uc=Dr("e",!1),Su=function(){return[]},nr=function(z,ce){return{type:"function",name:z,parameters:ce||[]}},ks=function(z,ce){return ce.length>0?f3(z,ce,3):[z]},qO=function(z){return{type:"quantity",value:z.value,unit:z.unit}},eT=function(z){return{type:"color",colorType:z.type,value:z.value}},s3=function(z){return z},o3=function(){return gm()},fm=function(z){return{value:z,unit:"%"}},Cs=function(z){return{value:z,unit:"px"}},a3=function(z){return{value:z,unit:"cm"}},_u=function(z){return{value:z,unit:"mm"}},Ms=function(z){return{value:z,unit:"in"}},l3=function(z){return{value:z,unit:"pt"}},u3=function(z){return{value:z,unit:"pc"}},c3=function(z){return{value:z,unit:"deg"}},v0=function(z){return{value:z,unit:"rad"}},b0=function(z){return{value:z,unit:"grad"}},Qc=function(z){return{value:z,unit:"turn"}},w0=function(z){return{value:z,unit:null}},mm=function(){return{type:"hex",value:gm()}},h3=function(z){return{type:"function",value:z}},tT=function(){return{type:"named",value:gm()}},iT=function(){return parseFloat(gm())},se=0|e.peg$currPos,li=se,Ad=[{line:1,column:1}],io=se,ym=e.peg$maxFailExpected||[],Ge=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in s))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');o=s[e.startRule]}function gm(){return t.substring(li,se)}function Dr(z,ce){return{type:"literal",text:z,ignoreCase:ce}}function ro(z,ce,Se){return{type:"class",parts:z,inverted:ce,ignoreCase:Se}}function On(){return{type:"end"}}function Zi(z){return{type:"other",description:z}}function Bc(z){var ce,Se=Ad[z];if(Se)return Se;if(z>=Ad.length)ce=Ad.length-1;else for(ce=z;!Ad[--ce];);for(Se={line:(Se=Ad[ce]).line,column:Se.column};ce<z;)t.charCodeAt(ce)===10?(Se.line++,Se.column=1):Se.column++,ce++;return Ad[z]=Se,Se}function O0(z,ce,Se){var He=Bc(z),ui=Bc(ce);return{source:n,start:{offset:z,line:He.line,column:He.column},end:{offset:ce,line:ui.line,column:ui.column}}}function mt(z){se<io||(se>io&&(io=se,ym=[]),ym.push(z))}function d3(z,ce,Se){return new pw(pw.buildMessage(z,ce),z,ce,Se)}function GO(){var z;return(z=vm())===r&&(z=ZO()),z}function vm(){var z,ce;return Ge++,z=se,Li(),t.substr(se,4)===a?(ce=a,se+=4):(ce=r,Ge===0&&mt(Ee)),ce!==r?(Li(),li=z,z=Su()):(se=z,z=r),Ge--,z===r&&Ge===0&&mt(ae),z}function ZO(){var z,ce;if(z=[],(ce=wl())!==r)for(;ce!==r;)z.push(ce),ce=wl();else z=r;return z}function wl(){var z,ce,Se,He;return z=se,Li(),(ce=Vr())!==r?(Li(),(Se=Id())===r&&(Se=null),Li(),t.charCodeAt(se)===41?(He=l,se++):(He=r,Ge===0&&mt(ue)),He!==r?(Li(),li=z,z=nr(ce,Se)):(se=z,z=r)):(se=z,z=r),z}function Id(){var z,ce,Se,He,ui,Hi,Wi,Dn;if(z=se,(ce=qc())!==r){for(Se=[],He=se,ui=Li(),t.charCodeAt(se)===44?(Hi=u,se++):(Hi=r,Ge===0&&mt(he)),Hi===r&&(Hi=null),Wi=Li(),(Dn=qc())!==r?He=ui=[ui,Hi,Wi,Dn]:(se=He,He=r);He!==r;)Se.push(He),He=se,ui=Li(),t.charCodeAt(se)===44?(Hi=u,se++):(Hi=r,Ge===0&&mt(he)),Hi===r&&(Hi=null),Wi=Li(),(Dn=qc())!==r?He=ui=[ui,Hi,Wi,Dn]:(se=He,He=r);li=z,z=ks(ce,Se)}else se=z,z=r;return z}function qc(){var z,ce;return z=se,(ce=rT())===r&&(ce=Gc())===r&&(ce=Pd())===r&&(ce=Ol()),ce!==r&&(li=z,ce=qO(ce)),(z=ce)===r&&(z=se,(ce=p3())!==r&&(li=z,ce=eT(ce)),z=ce),z}function Li(){var z,ce;for(Ge++,z=[],ce=t.charAt(se),j.test(ce)?se++:(ce=r,Ge===0&&mt(Ae));ce!==r;)z.push(ce),ce=t.charAt(se),j.test(ce)?se++:(ce=r,Ge===0&&mt(Ae));return Ge--,ce=r,Ge===0&&mt(ye),z}function Vr(){var z,ce,Se;return Ge++,z=se,(ce=HO())!==r?(t.charCodeAt(se)===40?(Se=p,se++):(Se=r,Ge===0&&mt(ge)),Se!==r?(li=z,z=s3(ce)):(se=z,z=r)):(se=z,z=r),Ge--,z===r&&(ce=r,Ge===0&&mt(Q)),z}function HO(){var z,ce,Se;if(Ge++,z=se,ce=[],Se=t.charAt(se),B.test(Se)?se++:(Se=r,Ge===0&&mt(Ne)),Se!==r)for(;Se!==r;)ce.push(Se),Se=t.charAt(se),B.test(Se)?se++:(Se=r,Ge===0&&mt(Ne));else ce=r;return ce!==r&&(li=z,ce=o3()),Ge--,(z=ce)===r&&(ce=r,Ge===0&&mt(Ve)),z}function rT(){var z,ce,Se;return Ge++,z=se,Li(),(ce=As())!==r?(t.charCodeAt(se)===37?(Se=m,se++):(Se=r,Ge===0&&mt(ct)),Se!==r?(li=z,z=fm(ce)):(se=z,z=r)):(se=z,z=r),Ge--,z===r&&Ge===0&&mt(ke),z}function Gc(){var z,ce,Se;return Ge++,z=se,Li(),(ce=As())!==r?(t.substr(se,2)===g?(Se=g,se+=2):(Se=r,Ge===0&&mt(ai)),Se!==r?(li=z,z=Cs(ce)):(se=z,z=r)):(se=z,z=r),z===r&&(z=se,Li(),(ce=As())!==r?(t.substr(se,2)===w?(Se=w,se+=2):(Se=r,Ge===0&&mt(St)),Se!==r?(li=z,z=a3(ce)):(se=z,z=r)):(se=z,z=r),z===r&&(z=se,Li(),(ce=As())!==r?(t.substr(se,2)===O?(Se=O,se+=2):(Se=r,Ge===0&&mt(ri)),Se!==r?(li=z,z=_u(ce)):(se=z,z=r)):(se=z,z=r),z===r&&(z=se,Li(),(ce=As())!==r?(t.substr(se,2)===_?(Se=_,se+=2):(Se=r,Ge===0&&mt(Ft)),Se!==r?(li=z,z=Ms(ce)):(se=z,z=r)):(se=z,z=r),z===r&&(z=se,Li(),(ce=As())!==r?(t.substr(se,2)===x?(Se=x,se+=2):(Se=r,Ge===0&&mt(Er)),Se!==r?(li=z,z=l3(ce)):(se=z,z=r)):(se=z,z=r),z===r&&(z=se,Li(),(ce=As())!==r?(t.substr(se,2)===T?(Se=T,se+=2):(Se=r,Ge===0&&mt(en)),Se!==r?(li=z,z=u3(ce)):(se=z,z=r)):(se=z,z=r)))))),Ge--,z===r&&Ge===0&&mt(ot),z}function Pd(){var z,ce,Se;return Ge++,z=se,(ce=As())!==r?(t.substr(se,3)===E?(Se=E,se+=3):(Se=r,Ge===0&&mt(ya)),Se!==r?(li=z,z=c3(ce)):(se=z,z=r)):(se=z,z=r),z===r&&(z=se,(ce=As())!==r?(t.substr(se,3)===k?(Se=k,se+=3):(Se=r,Ge===0&&mt(ga)),Se!==r?(li=z,z=v0(ce)):(se=z,z=r)):(se=z,z=r),z===r&&(z=se,(ce=As())!==r?(t.substr(se,4)===M?(Se=M,se+=4):(Se=r,Ge===0&&mt(to)),Se!==r?(li=z,z=b0(ce)):(se=z,z=r)):(se=z,z=r),z===r&&(z=se,(ce=As())!==r?(t.substr(se,4)===R?(Se=R,se+=4):(Se=r,Ge===0&&mt(gl)),Se!==r?(li=z,z=Qc(ce)):(se=z,z=r)):(se=z,z=r)))),Ge--,z===r&&(ce=r,Ge===0&&mt(kr)),z}function Ol(){var z,ce;return Ge++,z=se,Li(),(ce=As())!==r?(li=z,z=w0(ce)):(se=z,z=r),Ge--,z===r&&Ge===0&&mt(va),z}function p3(){var z,ce,Se,He;if(Ge++,z=se,t.charCodeAt(se)===35?(ce=D,se++):(ce=r,Ge===0&&mt(bl)),ce!==r){if(Se=[],He=t.charAt(se),W.test(He)?se++:(He=r,Ge===0&&mt(ba)),He!==r)for(;He!==r;)Se.push(He),He=t.charAt(se),W.test(He)?se++:(He=r,Ge===0&&mt(ba));else Se=r;Se!==r?(li=z,z=mm()):(se=z,z=r)}else se=z,z=r;return z===r&&(z=se,(ce=wl())!==r&&(li=z,ce=h3(ce)),(z=ce)===r&&(z=se,(ce=HO())!==r&&(li=z,ce=tT()),z=ce)),Ge--,z===r&&(ce=r,Ge===0&&mt(vl)),z}function As(){var z,ce,Se,He,ui,Hi,Wi,Dn;for(z=se,ce=t.charAt(se),ie.test(ce)?se++:(ce=r,Ge===0&&mt(Ou)),ce===r&&(ce=null),Se=se,He=[],ui=t.charAt(se),oe.test(ui)?se++:(ui=r,Ge===0&&mt(is));ui!==r;)He.push(ui),ui=t.charAt(se),oe.test(ui)?se++:(ui=r,Ge===0&&mt(is));if(t.charCodeAt(se)===46?(ui=L,se++):(ui=r,Ge===0&&mt(wn)),ui!==r){if(Hi=[],Wi=t.charAt(se),oe.test(Wi)?se++:(Wi=r,Ge===0&&mt(is)),Wi!==r)for(;Wi!==r;)Hi.push(Wi),Wi=t.charAt(se),oe.test(Wi)?se++:(Wi=r,Ge===0&&mt(is));else Hi=r;Hi!==r?Se=He=[He,ui,Hi]:(se=Se,Se=r)}else se=Se,Se=r;if(Se===r)if(Se=[],He=t.charAt(se),oe.test(He)?se++:(He=r,Ge===0&&mt(is)),He!==r)for(;He!==r;)Se.push(He),He=t.charAt(se),oe.test(He)?se++:(He=r,Ge===0&&mt(is));else Se=r;if(Se!==r){if(He=se,t.charCodeAt(se)===101?(ui=F,se++):(ui=r,Ge===0&&mt(Uc)),ui!==r){if(Hi=t.charAt(se),ie.test(Hi)?se++:(Hi=r,Ge===0&&mt(Ou)),Hi===r&&(Hi=null),Wi=[],Dn=t.charAt(se),oe.test(Dn)?se++:(Dn=r,Ge===0&&mt(is)),Dn!==r)for(;Dn!==r;)Wi.push(Dn),Dn=t.charAt(se),oe.test(Dn)?se++:(Dn=r,Ge===0&&mt(is));else Wi=r;Wi!==r?He=ui=[ui,Hi,Wi]:(se=He,He=r)}else se=He,He=r;He===r&&(He=null),li=z,z=iT()}else se=z,z=r;return z}function nT(z,ce){return z.map(function(Se){return Se[ce]})}function f3(z,ce,Se){return[z].concat(nT(ce,Se))}if(i=o(),e.peg$library)return{peg$result:i,peg$currPos:se,peg$FAILED:r,peg$maxFailExpected:ym,peg$maxFailPos:io};if(i!==r&&se===t.length)return i;throw i!==r&&se<t.length&&mt(On()),d3(ym,io<t.length?t.charAt(io):null,io<t.length?O0(io,io+1):O0(io,io))}function $9(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=yK(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new G("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:yK(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!Zhe(e[i].effects,e[i+1].effects))throw new G("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});Hhe(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function yK(t){let e;if(!t)return[];try{e=jBe(t)}catch(i){throw new G("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>zBe(i))}function zBe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return UBe(t);case"opacity":return QBe(t);case"hue-rotate":return BBe(t);case"blur":return qBe(t);case"drop-shadow":return GBe(t);case"bloom":return ZBe(t)}}catch(e){throw e.details.filter=t,e}throw new G("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function UBe(t){let e=1;return LO(t.parameters,1),t.parameters.length===1&&(e=ou(t.parameters[0])),new NV(t.name,e)}function QBe(t){let e=1;return LO(t.parameters,1),t.parameters.length===1&&(e=ou(t.parameters[0])),new qhe(e)}function BBe(t){let e=0;return LO(t.parameters,1),t.parameters.length===1&&(e=KBe(t.parameters[0])),new Qhe(e)}function qBe(t){let e=0;return LO(t.parameters,1),t.parameters.length===1&&(e=k9(t.parameters[0]),N2(e,t.parameters[0])),new Vhe(e)}function GBe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new G("effect:type-error","Accepts only one color",{});i=eqe(r)}else{const n=k9(r);if(Object.isFrozen(e))throw new G("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&N2(n,r)}if(e.length<2||e.length>3)throw new G("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new zhe(e[0],e[1],e[2]||0,i||rye("black"))}function ZBe(t){let e=1,i=0,r=0;return LO(t.parameters,3),t.parameters[0]&&(e=ou(t.parameters[0])),t.parameters[1]&&(i=k9(t.parameters[1]),N2(i,t.parameters[1])),t.parameters[2]&&(r=ou(t.parameters[2])),new Nhe(e,i,r)}function LO(t,e){if(t.length>e)throw new G("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function _R(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in E9)return"<length>";if(t.unit in T9)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function N2(t,e){if(t<0)throw new G("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function HBe(t){if(t.type!=="quantity"||t.unit!==null)throw new G("effect:type-error",`Expected <double>, Actual: ${_R(t)}`,{term:t})}function WBe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new G("effect:type-error",`Expected <double> or <percentage>, Actual: ${_R(t)}`,{term:t})}FBe(pw,Error),pw.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var i,r=null;for(i=0;i<t.length;i++)if(t[i].source===this.location.source){r=t[i].text.split(/\r\n|\n|\r/g);break}var n=this.location.start,s=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,o=this.location.source+":"+s.line+":"+s.column;if(r){var a=this.location.end,l=tD("",s.line.toString().length," "),u=r[n.line-1],p=(n.line===a.line?a.column:u.length+1)-n.column||1;e+=`
 --> `+o+`
`+l+` |
`+s.line+" | "+u+`
`+l+" | "+tD("",n.column-1," ")+tD("",p,"^")}else e+=`
 at `+o}return e},pw.buildMessage=function(t,e){var i={literal:function(u){return'"'+n(u.text)+'"'},class:function(u){var p=u.parts.map(function(m){return Array.isArray(m)?s(m[0])+"-"+s(m[1]):s(m)});return"["+(u.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function n(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+r(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+r(p)})}function s(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+r(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+r(p)})}function o(u){return i[u.type](u)}function a(u){var p,m,g=u.map(o);if(g.sort(),g.length>0){for(p=1,m=1;p<g.length;p++)g[p-1]!==g[p]&&(g[m]=g[p],m++);g.length=m}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function l(u){return u?'"'+n(u)+'"':"end of input"}return"Expected "+a(t)+" but "+l(e)+" found."};const T9={deg:1,grad:.9,rad:180/Math.PI,turn:360};function XBe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&T9[t.unit]!=null))throw new G("effect:type-error",`Expected <angle>, Actual: ${_R(t)}`,{term:t})}const E9={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function YBe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&E9[t.unit]!=null))throw new G("effect:type-error",`Expected <length>, Actual: ${_R(t)}`,{term:t})}function ou(t){WBe(t);const e=t.value;return N2(e,t),t.unit==="%"?.01*e:e}function JBe(t){return HBe(t),N2(t.value,t),t.value}function KBe(t){return XBe(t),t.value*T9[t.unit]||0}function k9(t){return YBe(t),t.value*E9[t.unit]||0}function eqe(t){switch(t.colorType){case"hex":return DNe(t.value);case"named":return rye(t.value);case"function":return rqe(t.value)}}function rye(t){if(!Ehe(t))throw new G("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return NNe(t)}const tqe=/^rgba?/i,iqe=/^hsla?/i;function rqe(t){if(LO(t.parameters,4),tqe.test(t.name))return[ou(t.parameters[0]),ou(t.parameters[1]),ou(t.parameters[2]),t.parameters[3]?ou(t.parameters[3]):1];if(iqe.test(t.name))return khe(JBe(t.parameters[0]),ou(t.parameters[1]),ou(t.parameters[2]),t.parameters[3]?ou(t.parameters[3]):1);throw new G("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function v$(t,e,i){var r;try{return sqe(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function b$(t,e,i,r){try{const n=nqe(t);Rr(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function nqe(t){const e=$9(t);return e?ZDe(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function sqe(t){if(!t||t.length===0)return null;if(oqe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:pI(i.value)});return e}return pI(t)}function oqe(t){const e=t[0];return!!e&&"scale"in e}function pI(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[fh(i,"amount")];break;case"blur":r=[fh(i,"radius","pt")];break;case"hue-rotate":r=[fh(i,"angle","deg")];break;case"drop-shadow":r=[fh(i,"xoffset","pt"),fh(i,"yoffset","pt"),fh(i,"blurRadius","pt"),aqe(i,"color")];break;case"bloom":r=[fh(i,"strength"),fh(i,"radius","pt"),fh(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;$9(n),e.push(n)}return e.join(" ")}function fh(t,e,i){if(t[e]==null)throw new G("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function aqe(t,e){if(t[e]==null)throw new G("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const lqe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Gi}},"portal-item":{read:!0,write:{layerContainerTypes:Gi}}}}},gK={read:{reader:v$},write:{allowNull:!0,writer:b$,layerContainerTypes:Gi}},uqe={json:{read:!1,write:!1,origins:{"web-map":gK,"portal-item":gK}}},cqe=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return h([f(lqe)],e.prototype,"blendMode",void 0),h([f(uqe)],e.prototype,"effect",void 0),e=h([A("esri.layers.mixins.BlendLayer")],e),e},hqe=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return h([f({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=h([A("esri.layers.mixins.CustomParametersMixin")],e),e},nye=96;function E1t(t,e){const i=t.extent,r=t.width,n=ma(i==null?void 0:i.spatialReference);return i&&r?i.width/r*n*YQ*nye:0}function k1t(t,e){return t/(ma(e)*YQ*nye)}function dqe(t,e,i){return pqe(t,e)&&fqe(t,i)}function pqe(t,e){return e===0||hu(t,e)||t<e}function fqe(t,e){return e===0||hu(t,e)||t>e}function mqe(t,e){return hu(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const vK={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let Rp=class extends ft.ClonableMixin(K){constructor(e){super(e),this.id=bR(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};h([f({type:String,json:{write:!0}})],Rp.prototype,"id",void 0),h([f({type:Number,json:vK})],Rp.prototype,"maxScale",void 0),h([f({type:Number,json:vK})],Rp.prototype,"minScale",void 0),h([f({type:String,json:{write:!0}})],Rp.prototype,"title",void 0),h([f({type:String,json:{write:!0}})],Rp.prototype,"where",void 0),Rp=h([A("esri.layers.support.DisplayFilter")],Rp);const sye=Rp;function yqe(t,e){return{...e,filterMode:t.mode}}function gqe(t,e){return oye(t,e).next().value??null}function M1t(t,e,i){const r=vqe(t);if(r&&(jae(e,r[0])||D4(i,r[1])))return"";const n=Array.from(oye(t,e,i)),s=bqe(n,e,i)?"1=1":n.map(o=>o.where||"1=1").reduce((o,a)=>l4e(o,a),"");return s&&s!=="1=1"?s:""}function vqe(t){if(aye(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],w$(i)),e[1]=Math.min(e[1],fI(r));return e}function*oye(t,e,i){if(aye(t)==="manual"){const r=t.filters.find(n=>n.id===t.activeFilterId);r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)wqe(r.minScale,r.maxScale,e,i)&&(yield r)}}function bqe(t,e,i){var s,o;if(t.length===0)return!0;const r=w$((s=t.at(0))==null?void 0:s.minScale),n=fI((o=t.at(-1))==null?void 0:o.maxScale);if(D4(r,e)||jae(n,i))return!0;for(let a=0;a<t.length-1;a++){const l=t[a],u=t[a+1];if(D4(w$(u.minScale),fI(l.maxScale)))return!0}return!1}function wqe(t,e,i,r){return t=w$(t),i=w$(i),e=fI(e),!(!hu(i,t)&&(r??i)>t)&&!NCe(e,i)&&(r===void 0||!hu(r,t))}function aye(t){return"mode"in t?t.mode:t.filterMode}function w$(t){return t||Number.POSITIVE_INFINITY}function fI(t){return t||0}let ky=class extends ft.ClonableMixin(K){constructor(e){super(e),this.activeFilterId=null,this.filters=new(Te.ofType(sye)),this.mode="manual"}writeFilters(e,i,r,n){const s=e.toArray();this.mode==="scale"&&s.sort((o,a)=>{const l=mqe(a.minScale,o.minScale),u=o.maxScale-a.maxScale;return l===0?u:l}),i[r]=s.map(o=>o.toJSON(n))}write(e,i){return super.write(e,yqe(this,i))}};h([f({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],ky.prototype,"activeFilterId",void 0),h([f({type:Te.ofType(sye),nonNullable:!0,json:{write:!0}})],ky.prototype,"filters",void 0),h([we("filters")],ky.prototype,"writeFilters",null),h([f({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],ky.prototype,"mode",void 0),ky=h([A("esri.layers.support.DisplayFilterInfo")],ky);const Oqe=ky,Sqe=t=>{let e=class extends t{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return h([f(_qe)],e.prototype,"displayFilterEnabled",void 0),h([f(xqe)],e.prototype,"displayFilterInfo",void 0),e=h([A("esri.layers.mixins.DisplayFilteredLayer")],e),e},_qe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:Gi,writer(t,e,i){Rr(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},xqe={type:Oqe,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Gi},origins:{"web-scene":{write:!1,read:!1}}}},lz=F9e(),lye=new Map,uye=new Map;async function I1t(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let n=lye.get(r);if(!n){const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await bt(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function bK(t,e,i=!1){var s,o,a;if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=uye.get(r))==null?void 0:s.entries();if(n){for(const[l,u]of n)if(u.name===e){const p=!((o=u.stack)!=null&&o.hasForwardEdits());if(!p&&i){const[{deleteForwardEdits:m},{default:g}]=await Promise.all([J(()=>import("./deleteForwardEdits-CjM7F43Q.js"),[]),J(()=>import("./DeleteForwardEditsParameters-Dzle8hkf.js"),[])]),w=await m(r,l,new g({sessionId:lz,moment:u.moment}));return w.success&&((a=u.stack)==null||a.clearForwardEdits()),w.success}return p}}return!0}function lM(t,e){var n;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(n=uye.get(i))==null?void 0:n.entries();if(r){for(const[s,o]of r)if(o.name===e)return o.lockType==="edit"}return!1}const C9=new ul.EventEmitter;function cye(t){return C9.on("apply-edits",new WeakRef(t))}function hye(t){return C9.on("update-moment",new WeakRef(t))}function wK(t,e,i=null,r=!1){const n=ha();return r=e==null||r,C9.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const dye=Symbol();function P1t(t){return t!=null&&typeof t=="object"&&dye in t}function pS(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function $x(t,e,i){const r=new URL(t).host,n=lye.get(r),s=o=>!o||o===n;return s(e)&&s(i)||e===i}const $qe=t=>{var e;let i=class extends t{constructor(...r){super(...r),this[e]=!0,this._applyEditsHandler=n=>{const{serviceUrl:s,layerId:o,gdbVersion:a,mayReceiveServiceEdits:l,result:u}=n,p=s===this.url,m=o!=null&&this.layerId!=null&&o===this.layerId,g=pS(this),w=pS(this)&&$x(s,a,this.gdbVersion);if(!p||g&&!w||!m&&!l)return;const O=u.then(_=>{var E;if(this.lastEditsEventDate=new Date,m&&(_.addedFeatures.length||_.updatedFeatures.length||_.deletedFeatures.length||_.addedAttachments.length||_.updatedAttachments.length||_.deletedAttachments.length))return this.emit("edits",q(_)),_;const x=(E=_.editedFeatures)==null?void 0:E.find(({layerId:k})=>k===this.layerId);if(x){const{adds:k,updates:M,deletes:R}=x.editedFeatures,D={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:k?k.map(({attributes:L})=>({objectId:this.objectIdField&&L[this.objectIdField],globalId:this.globalIdField&&L[this.globalIdField]})):[],deletedFeatures:R?R.map(({attributes:L})=>({objectId:this.objectIdField&&L[this.objectIdField],globalId:this.globalIdField&&L[this.globalIdField]})):[],updatedFeatures:M?M.map(({current:{attributes:L}})=>({objectId:this.objectIdField&&L[this.objectIdField],globalId:this.globalIdField&&L[this.globalIdField]})):[],editedFeatures:q(_.editedFeatures),exceededTransferLimit:!1,historicMoment:q(_.historicMoment)};return this.emit("edits",D),D}const T={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:q(_.editedFeatures),exceededTransferLimit:!1,historicMoment:q(_.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,T.historicMoment)&&this.emit("edits",T),T}).then(_=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,_.historicMoment)&&(this.historicMoment=_.historicMoment),_));this.emit("apply-edits",{result:O})},this._updateMomentHandler=n=>{const{serviceUrl:s,gdbVersion:o,moment:a}=n,l=s===this.url,u=pS(this),p=pS(this)&&$x(s,o,this.gdbVersion),m=pS(this)&&!$x(s,this.gdbVersion,null);l&&u&&p&&m&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(cye(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(hye(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(r,n,s){return"historicMoment"in this&&this.historicMoment!==s&&lM(r,n)}};return e=dye,h([f()],i.prototype,"lastEditsEventDate",void 0),i=h([A("esri.layers.mixins.EditBusLayer")],i),i};var uz;const iD=new nt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),rD=new nt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ku=uz=class extends K{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new Mc({geometry:q(i),objectIds:q(s),spatialRelationship:r,timeExtent:q(n),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new uz({geometry:q(e),objectIds:q(n),spatialRelationship:i,timeExtent:q(r),where:t,units:s,distance:o})}};h([f({type:String,json:{write:!0}})],Ku.prototype,"where",void 0),h([f({types:_O,json:{write:!0}})],Ku.prototype,"geometry",void 0),h([f({type:iD.apiValues,json:{name:"spatialRel",read:{reader:iD.read},write:{allowNull:!1,writer:iD.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Ku.prototype,"spatialRelationship",void 0),h([f({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Ku.prototype,"distance",void 0),h([f({type:[Number],json:{write:!0}})],Ku.prototype,"objectIds",void 0),h([f({type:rD.apiValues,json:{read:rD.read,write:{writer:rD.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Ku.prototype,"units",void 0),h([f({type:mn,json:{write:!0}})],Ku.prototype,"timeExtent",void 0),Ku=uz=h([A("esri.layers.support.FeatureFilter")],Ku);const Tqe=Ku;var cz;const OK={read:{reader:v$},write:{writer:b$,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},SK={read:{reader:v$},write:{writer:b$,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},_K={name:"showExcludedLabels",default:!0};let Cy=cz=class extends K{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(r=e.messages)==null||r.push(new G("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new G("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new cz({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};h([f({type:Tqe,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?Rr(i,n,e):Rr(i,null,e)}}}})],Cy.prototype,"filter",void 0),h([f({json:{read:v$,write:{writer:b$,allowNull:!0},origins:{"web-map":OK,"portal-item":OK}}})],Cy.prototype,"includedEffect",void 0),h([f({json:{read:v$,write:{writer:b$,allowNull:!0},origins:{"web-map":SK,"portal-item":SK}}})],Cy.prototype,"excludedEffect",void 0),h([f({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":_K,"portal-item":_K}}})],Cy.prototype,"excludedLabelsVisible",void 0),Cy=cz=h([A("esri.layers.support.FeatureEffect")],Cy);const Eqe=Cy,xK={write:{allowNull:!0}},kqe={type:Eqe,json:{origins:{"web-map":xK,"portal-item":xK}}},Cqe=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return h([f(kqe)],e.prototype,"featureEffect",void 0),e=h([A("esri.layers.mixins.FeatureEffectLayer")],e),e};var hz;let x_=hz=class extends K{constructor(t){super(t)}async collectRequiredFields(t,e){return Ts(t,e,this.expression)}clone(){return new hz({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};h([f({type:String,json:{write:{isRequired:!0}}})],x_.prototype,"expression",void 0),h([f({type:String,json:{write:!0}})],x_.prototype,"title",void 0),x_=hz=h([A("esri.symbols.support.FeatureExpressionInfo")],x_);const $K=x_,xR={unknown:1,inches:Dt(1,"meters","inches"),feet:Dt(1,"meters","feet"),"us-feet":Dt(1,"meters","us-feet"),yards:Dt(1,"meters","yards"),miles:Dt(1,"meters","miles"),"nautical-miles":Dt(1,"meters","nautical-miles"),millimeters:Dt(1,"meters","millimeters"),centimeters:Dt(1,"meters","centimeters"),decimeters:Dt(1,"meters","decimeters"),meters:Dt(1,"meters","meters"),kilometers:Dt(1,"meters","kilometers"),"decimal-degrees":1/EAe(1,"meters",dr.radius)};function R1t(t){return!!t&&xR[t]!=null}function L1t(t){return 1/(xR[t]||1)}function Mqe(){const t=Object.keys(xR);return koe(t,"decimal-degrees"),t.sort(),t}const Aqe=Mqe();var dz;const ik=dt()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),TK=new nt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Lh=dz=class extends K{constructor(t){super(t),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,r){e[i]=t.write({},r),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new dz({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&NEe(this.featureExpressionInfo,t.featureExpressionInfo)}};h([f({type:$K,json:{write:!0}})],Lh.prototype,"featureExpressionInfo",void 0),h([ve("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Lh.prototype,"readFeatureExpressionInfo",null),h([we("featureExpressionInfo",{featureExpressionInfo:{type:$K},"featureExpression.value":{type:[0]}})],Lh.prototype,"writeFeatureExpressionInfo",null),h([f({type:ik.apiValues,nonNullable:!0,json:{type:ik.jsonValues,read:ik.read,write:{writer:ik.write,isRequired:!0}}})],Lh.prototype,"mode",null),h([f({type:Number,json:{write:!0}})],Lh.prototype,"offset",void 0),h([f({type:Aqe,json:{type:String,read:TK.read,write:TK.write}})],Lh.prototype,"unit",null),Lh=dz=h([A("esri.symbols.support.ElevationInfo")],Lh);const Iqe=Lh;let pb=class extends K{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};h([f({type:String,json:{write:!0}})],pb.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],pb.prototype,"label",void 0),h([f()],pb.prototype,"type",void 0),pb=h([A("esri.tables.elements.AttributeTableElement")],pb);const Qw=pb;var pz;let $_=pz=class extends Qw{constructor(t){super(t),this.displayType="auto",this.type="attachment"}clone(){return new pz({description:this.description,displayType:this.displayType,label:this.label})}};h([f({type:["auto"],json:{write:!0}})],$_.prototype,"displayType",void 0),h([f({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],$_.prototype,"type",void 0),$_=pz=h([A("esri.tables.elements.AttributeTableAttachmentElement")],$_);const EK=$_;var fz;let T_=fz=class extends Qw{constructor(t){super(t),this.fieldName=null,this.type="field"}clone(){return new fz({description:this.description,fieldName:this.fieldName,label:this.label})}};h([f({type:String,json:{write:!0}})],T_.prototype,"fieldName",void 0),h([f({type:String,json:{read:!1,write:!0}})],T_.prototype,"type",void 0),T_=fz=h([A("esri.tables.elements.AttributeTableFieldElement")],T_);const kK=T_;var mz;let E_=mz=class extends Qw{constructor(t){super(t),this.relationshipId=null,this.type="relationship"}clone(){return new mz({description:this.description,label:this.label,relationshipId:this.relationshipId})}};h([f({type:Number,json:{write:!0}})],E_.prototype,"relationshipId",void 0),h([f({type:["relationship"],json:{read:!1,write:!0}})],E_.prototype,"type",void 0),E_=mz=h([A("esri.tables.elements.AttributeTableRelationshipElement")],E_);const CK=E_;function pye(t){return{typesWithGroup:{base:Qw,key:"type",typeMap:{attachment:EK,field:kK,group:t,relationship:CK}},typesWithoutGroup:{base:Qw,key:"type",typeMap:{attachment:EK,field:kK,relationship:CK}}}}function fye(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function mye(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function yye(t,e,i=!0){return t?t.map(r=>fu(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var yz;let Wh=yz=class extends Qw{constructor(t){super(t),this.elements=null,this.type="group"}castElements(t){return yye(t,nD,!1)}readElements(t,e){return fye(e.attributeTableElements,nD,!1)}writeElements(t,e){e.attributeTableElements=mye(t,nD,!1)}clone(){return new yz({description:this.description,elements:q(this.elements),label:this.label})}};h([f({json:{write:!0}})],Wh.prototype,"elements",void 0),h([Rt("elements")],Wh.prototype,"castElements",null),h([ve("elements",["attributeTableElements"])],Wh.prototype,"readElements",null),h([we("elements")],Wh.prototype,"writeElements",null),h([f({type:String,json:{read:!1,write:!0}})],Wh.prototype,"type",void 0),Wh=yz=h([A("esri.tables.elements.AttributeTableGroupElement")],Wh);const nD=pye(Wh),Pqe=Wh;var gz;const sD=pye(Pqe);let Lp=gz=class extends K{constructor(t){super(t),this.elements=null,this.orderByFields=null}castElements(t){return yye(t,sD)}readElements(t,e){return fye(e.attributeTableElements,sD)}writeElements(t,e){e.attributeTableElements=mye(t,sD)}clone(){return new gz({elements:q(this.elements),orderByFields:this.orderByFields})}};h([f({json:{write:!0}})],Lp.prototype,"elements",void 0),h([Rt("elements")],Lp.prototype,"castElements",null),h([ve("elements",["attributeTableElements"])],Lp.prototype,"readElements",null),h([we("elements")],Lp.prototype,"writeElements",null),h([f({type:[Object],json:{write:!0}})],Lp.prototype,"orderByFields",void 0),Lp=gz=h([A("esri.tables.AttributeTableTemplate")],Lp);const Rqe=Lp,Lqe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Gi}}},$R={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},TR={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Gi}}},Nqe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Ug}}},Dqe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Gi}}},Vqe={value:null,type:Iqe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Gi}}};function D1t(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const gye={write:{enabled:!0,layerContainerTypes:Gi},read:!0},vz={type:Number,json:{origins:{"web-document":gye,"portal-item":{write:{layerContainerTypes:Gi}}}}},Fqe={...vz,json:{...vz.json,origins:{"web-document":{...gye,write:{enabled:!0,layerContainerTypes:Gi,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var r;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(r=e.layerDefinition)!=null&&r.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?l$(e.layerDefinition.drawingInfo.transparency):void 0:l$(e.drawingInfo.transparency)}}}},V1t={type:oi,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=oi.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Je.fromJSON(e.spatialReference)),i}}}},read:!1}},jqe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},zqe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Gi}}},Uqe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Gi}}},vye={json:{write:{ignoreOrigin:!0,layerContainerTypes:Gi},origins:{"web-map":{read:!1,write:!1}}}},Qqe={type:Rqe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let Nh=class extends ft.ClonableMixin(K){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};h([f()],Nh.prototype,"creatorField",void 0),h([f()],Nh.prototype,"creationDateField",void 0),h([f()],Nh.prototype,"editorField",void 0),h([f()],Nh.prototype,"editDateField",void 0),h([f()],Nh.prototype,"realm",void 0),h([f(DA("dateFieldsTimeReference",!0))],Nh.prototype,"timeZone",void 0),Nh=h([A("esri.layers.support.EditFieldsInfo")],Nh);const Bqe=Nh;let lc=class extends ft.ClonableMixin(K){constructor(e){super(e)}};h([f({constructOnly:!0,json:{write:!0}})],lc.prototype,"name",void 0),h([f({constructOnly:!0,json:{write:!0}})],lc.prototype,"fields",void 0),h([f({constructOnly:!0,json:{write:!0}})],lc.prototype,"isAscending",void 0),h([f({constructOnly:!0,json:{write:!0}})],lc.prototype,"indexType",void 0),h([f({constructOnly:!0,json:{write:!0}})],lc.prototype,"isUnique",void 0),h([f({constructOnly:!0,json:{write:!0}})],lc.prototype,"description",void 0),lc=h([A("esri.layers.support.FeatureIndex")],lc);async function bye(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=wye(t));const r=qqe(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let s=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;e.start+=r}return s}function qqe(t){return wye(t)*Gqe(t)}function Gqe(t){return t.capabilities.query.maxRecordCount||2e3}function wye(t){return t.capabilities.query.supportsMaxRecordCountFactor?Mc.MAX_MAX_RECORD_COUNT_FACTOR:1}var bz;let k_=bz=class extends K{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new bz({minValue:this.minValue,maxValue:this.maxValue})}};h([f({type:Number,json:{write:!0}})],k_.prototype,"minValue",void 0),h([f({type:Number,json:{write:!0}})],k_.prototype,"maxValue",void 0),k_=bz=h([A("esri.renderers.support.AuthoringInfoClassBreakInfo")],k_);var wz;let ef=wz=class extends K{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new wz({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:q(this.classBreakInfos)})}};h([f({type:String,json:{write:!0}})],ef.prototype,"field",void 0),h([f({type:String,json:{write:!0}})],ef.prototype,"normalizationField",void 0),h([f({type:String,json:{write:!0}})],ef.prototype,"label",void 0),h([f({type:[k_],json:{write:!0}})],ef.prototype,"classBreakInfos",void 0),ef=wz=h([A("esri.renderers.support.AuthoringInfoFieldInfo")],ef);var Oz;let fb=Oz=class extends K{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new Oz({label:this.label,value:this.value,size:this.size})}};h([f({type:String,json:{write:!0}})],fb.prototype,"label",void 0),h([f({type:Number,json:{write:!0}})],fb.prototype,"size",void 0),h([f({type:Number,json:{write:!0}})],fb.prototype,"value",void 0),fb=Oz=h([A("esri.renderers.support.AuthoringInfoSizeStop")],fb);const Zqe=fb;var Sz;const rk=new nt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),nk=new nt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),MK={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},AK=["high-to-low","above-and-below","centered-on","extremes"],IK=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],PK=["seconds","minutes","hours","days","months","years"],Hqe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let En=Sz=class extends K{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new Sz({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:q(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};h([f({types:MK,json:{write:!0}})],En.prototype,"endTime",void 0),h([Rt("endTime")],En.prototype,"castEndTime",null),h([f({type:String,json:{write:!0}})],En.prototype,"field",void 0),h([f({type:Number,json:{write:!0}})],En.prototype,"maxSliderValue",void 0),h([f({type:Number,json:{write:!0}})],En.prototype,"minSliderValue",void 0),h([f({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],En.prototype,"normalizationField",null),h([f({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],En.prototype,"referenceSizeScale",null),h([f({type:Hqe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],En.prototype,"referenceSizeSymbolStyle",null),h([f({types:MK,json:{write:!0}})],En.prototype,"startTime",void 0),h([Rt("startTime")],En.prototype,"castStartTime",null),h([f({type:[Zqe],json:{origins:{"web-scene":{write:!1}},write:!0}})],En.prototype,"sizeStops",null),h([f({type:rk.apiValues,value:null,json:{type:rk.jsonValues,read:rk.read,write:rk.write}})],En.prototype,"style",null),h([f({type:IK,value:null,json:{type:IK,origins:{"web-scene":{type:AK,write:{writer:(t,e)=>{AK.includes(t)&&(e.theme=t)}}}},write:!0}})],En.prototype,"theme",null),h([f({type:nk.apiValues,json:{type:nk.jsonValues,read:nk.read,write:nk.write}})],En.prototype,"type",void 0),h([f({type:PK,json:{type:PK,write:!0}})],En.prototype,"units",void 0),En=Sz=h([A("esri.renderers.support.AuthoringInfoVisualVariable")],En);const Wqe=En;let uM=class extends K{constructor(e){super(e),this.type=null}};h([f({readOnly:!0,json:{read:!1,write:!0}})],uM.prototype,"type",void 0),uM=h([A("esri.rest.support.ColorRamp")],uM);const M9=uM;var _z;let My=_z=class extends M9{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new _z({fromColor:q(this.fromColor),toColor:q(this.toColor),algorithm:this.algorithm})}};h([Re({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],My.prototype,"algorithm",void 0),h([f({type:xe,json:{type:[kt],write:!0}})],My.prototype,"fromColor",void 0),h([f({type:xe,json:{type:[kt],write:!0}})],My.prototype,"toColor",void 0),h([f({type:["algorithmic"]})],My.prototype,"type",void 0),My=_z=h([A("esri.rest.support.AlgorithmicColorRamp")],My);const A9=My;var xz;let C_=xz=class extends M9{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new xz({colorRamps:q(this.colorRamps)})}};h([f({type:[A9],json:{write:!0}})],C_.prototype,"colorRamps",void 0),h([f({type:["multipart"]})],C_.prototype,"type",void 0),C_=xz=h([A("esri.rest.support.MultipartColorRamp")],C_);const Oye=C_,Xqe={key:"type",base:M9,typeMap:{algorithmic:A9,multipart:Oye}};function Yqe(t){return t!=null&&t.type?t.type==="algorithmic"?A9.fromJSON(t):t.type==="multipart"?Oye.fromJSON(t):null:null}var $z;const Zm=new nt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),sk=new nt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),RK=new nt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),LK=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],Jqe=["high-to-low","above-and-below","above","below"],Kqe=["flow-line","wave-front"],eGe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ar=$z=class extends K{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?Yqe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new $z({classificationMethod:this.classificationMethod,colorRamp:q(this.colorRamp),fadeRatio:q(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:q(this.field1),field2:q(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};h([f({type:Zm.apiValues,value:null,json:{type:Zm.jsonValues,read:Zm.read,write:Zm.write,origins:{"web-document":{default:"manual",type:Zm.jsonValues,read:Zm.read,write:Zm.write}}}})],ar.prototype,"classificationMethod",null),h([f({types:Xqe,json:{write:!0}})],ar.prototype,"colorRamp",void 0),h([ve("colorRamp")],ar.prototype,"readColorRamp",null),h([f({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ar.prototype,"fadeRatio",void 0),h([f({type:[String],value:null,json:{write:!0}})],ar.prototype,"fields",null),h([f({type:ef,value:null,json:{write:!0}})],ar.prototype,"field1",null),h([f({type:ef,value:null,json:{write:!0}})],ar.prototype,"field2",null),h([f({type:Kqe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ar.prototype,"flowTheme",null),h([f({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ar.prototype,"focus",null),h([f({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ar.prototype,"isAutoGenerated",void 0),h([f({type:Number,value:null,json:{type:kt,write:!0}})],ar.prototype,"numClasses",null),h([f({type:LK,json:{type:LK,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ar.prototype,"lengthUnit",void 0),h([f({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ar.prototype,"maxSliderValue",void 0),h([f({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ar.prototype,"minSliderValue",void 0),h([f({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ar.prototype,"statistics",null),h([f({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ar.prototype,"standardDeviationInterval",null),h([f({type:sk.apiValues,value:null,json:{type:sk.jsonValues,read:sk.read,write:sk.write,origins:{"web-scene":{type:RK.jsonValues,write:{writer:RK.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],ar.prototype,"type",null),h([f({type:[Wqe],json:{write:!0}})],ar.prototype,"visualVariables",void 0),h([f({type:eGe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ar.prototype,"univariateSymbolStyle",null),h([f({type:Jqe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ar.prototype,"univariateTheme",null),ar=$z=h([A("esri.renderers.support.AuthoringInfo")],ar);const I9=ar,oD=new nt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let M_=class extends K{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};h([f({type:I9,json:{write:!0}})],M_.prototype,"authoringInfo",void 0),h([f({type:oD.apiValues,readOnly:!0,json:{type:oD.jsonValues,read:!1,write:{writer:oD.write,ignoreOrigin:!0,isRequired:!0}}})],M_.prototype,"type",void 0),M_=h([A("esri.renderers.Renderer")],M_);const Md=M_;let A_=class extends ft.ClonableMixin(K){constructor(){super(...arguments),this.showLegend=null,this.title=null}};h([f({type:Boolean,json:{write:!0}})],A_.prototype,"showLegend",void 0),h([f({type:String,json:{write:!0}})],A_.prototype,"title",void 0),A_=h([A("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],A_);const Sye=A_,aD=new nt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Hl=class extends K{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(pe.getLogger(this).error(".field: field must be a string value"),null):h2(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};h([f()],Hl.prototype,"index",void 0),h([f({type:aD.apiValues,readOnly:!0,json:{read:aD.read,write:{writer:aD.write,isRequired:!0}}})],Hl.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],Hl.prototype,"field",void 0),h([Rt("field")],Hl.prototype,"castField",null),h([f({type:String,json:{write:!0}})],Hl.prototype,"valueExpression",void 0),h([f({type:String,json:{write:!0}})],Hl.prototype,"valueExpressionTitle",void 0),h([f({readOnly:!0})],Hl.prototype,"arcadeRequired",null),h([f({type:Sye,json:{write:!0}})],Hl.prototype,"legendOptions",void 0),Hl=h([A("esri.renderers.visualVariables.VisualVariable")],Hl);const NO=Hl;var Tz;let Ay=Tz=class extends K{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new Tz({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};h([f({type:xe,json:{type:[kt],write:{isRequired:!0}}})],Ay.prototype,"color",void 0),h([f({type:String,json:{write:!0}})],Ay.prototype,"label",void 0),h([f({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Ay.prototype,"value",void 0),h([we("value")],Ay.prototype,"writeValue",null),Ay=Tz=h([A("esri.renderers.visualVariables.support.ColorStop")],Ay);const tGe=Ay;var Ez;let Iy=Ez=class extends NO{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new Ez({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};h([f({readOnly:!0})],Iy.prototype,"cache",null),h([f({type:["color"],json:{type:["colorInfo"]}})],Iy.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],Iy.prototype,"normalizationField",void 0),h([f({type:[tGe],json:{write:!0}})],Iy.prototype,"stops",null),Iy=Ez=h([A("esri.renderers.visualVariables.ColorVariable")],Iy);const _ye=Iy;var kz;let Np=kz=class extends K{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return l$(e.transparency)}writeOpacity(t,e,i){e[i]=WP(t)}clone(){return new kz({label:this.label,opacity:this.opacity,value:this.value})}};h([f({type:String,json:{write:!0}})],Np.prototype,"label",void 0),h([f({type:Number,json:{type:kt,write:{target:"transparency",isRequired:!0}}})],Np.prototype,"opacity",void 0),h([ve("opacity",["transparency"])],Np.prototype,"readOpacity",null),h([we("opacity")],Np.prototype,"writeOpacity",null),h([f({type:Number,json:{write:{isRequired:!0}}})],Np.prototype,"value",void 0),Np=kz=h([A("esri.renderers.visualVariables.support.OpacityStop")],Np);const iGe=Np;var Cz;let Py=Cz=class extends NO{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new Cz({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};h([f({readOnly:!0})],Py.prototype,"cache",null),h([f({type:["opacity"],json:{type:["transparencyInfo"]}})],Py.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],Py.prototype,"normalizationField",void 0),h([f({type:[iGe],json:{write:!0}})],Py.prototype,"stops",null),Py=Cz=h([A("esri.renderers.visualVariables.OpacityVariable")],Py);const P9=Py;var Mz;let Ry=Mz=class extends NO{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new Mz({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};h([f({readOnly:!0})],Ry.prototype,"cache",null),h([f({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Ry.prototype,"axis",void 0),h([f({type:["rotation"],json:{type:["rotationInfo"]}})],Ry.prototype,"type",void 0),h([f({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Ry.prototype,"rotationType",void 0),Ry=Mz=h([A("esri.renderers.visualVariables.RotationVariable")],Ry);const xye=Ry;function rGe(t){return Vt(t)}var Az;let Dp=Az=class extends K{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new Az({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};h([f({type:String,json:{write:!0}})],Dp.prototype,"label",void 0),h([f({type:Number,cast:Vt,json:{write:{isRequired:!0}}})],Dp.prototype,"size",void 0),h([f({type:Number,json:{write:{isRequired:!0}}})],Dp.prototype,"value",void 0),h([f({type:Boolean,json:{write:!1}})],Dp.prototype,"useMinValue",void 0),h([f({type:Boolean,json:{write:!1}})],Dp.prototype,"useMaxValue",void 0),Dp=Az=h([A("esri.renderers.visualVariables.support.SizeStop")],Dp);const cM=Dp;let hM=class extends Sye{constructor(){super(...arguments),this.customValues=null}};h([f({type:[Number],json:{write:!0}})],hM.prototype,"customValues",void 0),hM=h([A("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],hM);const $ye=hM;var dd,hn;function qb(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function O$(t){return t!=null&&!isNaN(t)&&isFinite(t)}function Tye(t){return t.valueExpression?dd.Expression:t.field&&typeof t.field=="string"?dd.Field:dd.Unknown}function nGe(t,e){const i=e||Tye(t),r=t.valueUnit||"unknown";return i===dd.Unknown?hn.Constant:t.stops?hn.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?hn.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?hn.Proportional:hn.Additive:hn.Identity:hn.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(dd||(dd={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(hn||(hn={}));const Eye=()=>pe.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),ER=t=>Eye().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),kR=()=>Eye().error("Use of arcade expressions requires an arcade context"),NK=new Cc,dM=Math.PI,kye=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Cye(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(O=>O.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void ER("ColorVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:u,hasExpression:p}=r.cache;let m=r.cache.compiledFunc;if(!l&&!p){const O=r.stops;return O&&O[0]&&O[0].color}if(typeof a!="number")if(p){if((i==null?void 0:i.arcade)==null)return void kR();const O={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,x=_.getViewInfo(O),T=_.createExecContext(s,x,i.timeZone);if(!m){const E=_.createSyntaxTree(r.valueExpression);m=_.createFunction(E),r.cache.compiledFunc=m}a=_.executeFunction(m,T)}else o&&(a=o[l]);const g=r.normalizationField,w=o!=null&&g!=null?parseFloat(o[g]):void 0;if(a!=null&&(!g||n||!isNaN(w)&&w!==0)){isNaN(w)||n||(a/=w);const O=R9(a,u);if(O){const _=O[0],x=O[1],T=_===x?r.stops[_].color:xe.blendColors(r.stops[_].color,r.stops[x].color,O[2],i!=null?i.color:void 0);return new xe(T)}}}function Mye(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(O=>O.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void ER("OpacityVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:u,hasExpression:p}=r.cache;let m=r.cache.compiledFunc;if(!l&&!p){const O=r.stops;return O&&O[0]&&O[0].opacity}if(typeof a!="number")if(p){if((i==null?void 0:i.arcade)==null)return void kR();const O={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,x=_.getViewInfo(O),T=_.createExecContext(s,x,i.timeZone);if(!m){const E=_.createSyntaxTree(r.valueExpression);m=_.createFunction(E),r.cache.compiledFunc=m}a=_.executeFunction(m,T)}else o&&(a=o[l]);const g=r.normalizationField,w=o!=null&&g!=null?parseFloat(o[g]):void 0;if(a!=null&&(!g||n||!isNaN(w)&&w!==0)){isNaN(w)||n||(a/=w);const O=R9(a,u);if(O){const _=O[0],x=O[1];if(_===x)return r.stops[_].opacity;{const T=r.stops[_].opacity;return T+(r.stops[x].opacity-T)*O[2]}}}}function Aye(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(w=>w.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void ER("RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a==null?void 0:a.attributes,u=r.field,{hasExpression:p}=r.cache;let m=r.cache.compiledFunc,g=0;if(!u&&!p)return g;if(p){if((i==null?void 0:i.arcade)==null)return void kR();const w={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},O=i.arcade.arcadeUtils,_=O.getViewInfo(w),x=O.createExecContext(a,_,i.timeZone);if(!m){const T=O.createSyntaxTree(r.valueExpression);m=O.createFunction(T),r.cache.compiledFunc=m}g=O.executeFunction(m,x)}else l&&(g=l[u]||0);return g=typeof g!="number"||isNaN(g)?null:s+o*g,g}function sGe(t,e,i){const r=typeof e=="number",n=r?null:e,s=n==null?void 0:n.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const p=i!=null?i.scale:void 0,m=i!=null?i.view:void 0;o=p==null||m==="3d"?oGe(t):p}else if(!r)switch(t.inputValueType){case dd.Expression:{if((i==null?void 0:i.arcade)==null)return void kR();const p={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},m=i.arcade.arcadeUtils,g=m.getViewInfo(p),w=m.createExecContext(n,g,i.timeZone);if(!l){const O=m.createSyntaxTree(t.valueExpression);l=m.createFunction(O),t.cache.compiledFunc=l}o=m.executeFunction(l,w);break}case dd.Field:s&&(o=s[t.field]);break;case dd.Unknown:o=null}if(!O$(o))return null;if(r||!t.normalizationField)return o;const u=s?parseFloat(s[t.normalizationField]):null;return O$(u)&&u!==0?o/u:null}function oGe(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function CR(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(s=>s.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void ER("SizeVariable");const n=Pye(sGe(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function Ao(t,e,i){return t==null?null:qb(t)?CR(t,e,i):O$(t)?t:null}function Iye(t,e,i){return O$(i)&&t>i?i:O$(e)&&t<e?e:t}function aGe(t,e,i,r){return t+((Ao(e.minSize,i,r)||e.minDataValue)??0)}function lGe(t,e,i){const r=t.stops;let n=(r==null?void 0:r.length)&&r[0].size;return n==null&&(n=t.minSize),Ao(n,e,i)}function uGe(t,e,i,r){const n=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),s=Ao(e.minSize,i,r),o=Ao(e.maxSize,i,r),a=r!=null?r.shape:void 0;if(t<=e.minDataValue)return s;if(t>=e.maxDataValue)return o;if(s==null||o==null)return null;if(e.scaleBy==="area"&&a){const l=a==="circle",u=l?dM*(s/2)**2:s*s,p=u+n*((l?dM*(o/2)**2:o*o)-u);return l?2*Math.sqrt(p/dM):Math.sqrt(p)}return s+n*(o-s)}function cGe(t,e,i,r){const n=r!=null?r.shape:void 0,s=t/e.minDataValue,o=Ao(e.minSize,i,r),a=Ao(e.maxSize,i,r);let l=null;return l=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,Iye(l,o,a)}function hGe(t,e,i,r,n){var l,u,p;const[s,o,a]=R9(t,n);if(s===o)return Ao((l=e.stops)==null?void 0:l[s].size,i,r);{const m=Ao((u=e.stops)==null?void 0:u[s].size,i,r);return m+(Ao((p=e.stops)==null?void 0:p[o].size,i,r)-m)*a}}function dGe(t,e,i,r){const n=((r==null?void 0:r.resolution)??1)*xR[e.valueUnit],s=Ao(e.minSize,i,r),o=Ao(e.maxSize,i,r),{valueRepresentation:a}=e;let l=null;return l=a==="area"?2*Math.sqrt(t/dM)/n:a==="radius"||a==="distance"?2*t/n:t/n,Iye(l,s,o)}function Pye(t,e,i,r,n){switch(e.transformationType){case hn.Additive:return aGe(t,e,i,r);case hn.Constant:return lGe(e,i,r);case hn.ClampedLinear:return uGe(t,e,i,r);case hn.Proportional:return cGe(t,e,i,r);case hn.Stops:return hGe(t,e,i,r,n);case hn.RealWorldSize:return dGe(t,e,i,r);case hn.Identity:return t;case hn.Unknown:return null}}function Rye(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=Ao(t.minSize,NK,n),o=Ao(t.maxSize,NK,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function pGe(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const u=Cye(l,e,i);r.push({variable:l,value:u})}),s.forEach(l=>{const u=Mye(l,e,i);r.push({variable:l,value:u})}),a.forEach(l=>{const u=Aye(l,e,i);r.push({variable:l,value:u})}),o.forEach(l=>{const u=CR(l,e,i);r.push({variable:l,value:u})}),r.filter(l=>l.value!=null)}function R9(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,s)=>t<n?(r=s,!0):(i=s,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function fGe(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":CR(n,e,i);switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const m0=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:fGe,getColor:Cye,getOpacity:Mye,getRotationAngle:Aye,getSize:CR,getSizeForValue:Pye,getSizeFromNumberOrVariable:Ao,getSizeRangeAtScale:Rye,getVisualVariableValues:pGe,viewScaleRE:kye},Symbol.toStringTag,{value:"Module"}));var Iz;const ok=new nt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),Pz=new nt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function DK(t){if(t!=null)return typeof t=="string"||typeof t=="number"?rGe(t):t.type==="size"?qb(t)?t:(delete(t={...t}).type,new ii(t)):void 0}function VK(t,e,i){if(typeof t!="object")return t;const r=new ii;return r.read(t,i),r}let ii=Iz=class extends NO{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&kye.test(this.valueExpression)}}set index(t){qb(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),qb(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return Tye(this)}set maxDataValue(t){t&&this.stops&&(pe.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(pe.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return DK(t)}readMaxSize(t,e,i){return VK(t,e,i)}set minDataValue(t){t&&this.stops&&(pe.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(pe.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return DK(t)}readMinSize(t,e,i){return VK(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(pe.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return nGe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r!=null&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new G("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?Pz.read(t):null}clone(){var t,e;return new Iz({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:qb(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:qb(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType===hn.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===hn.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map(e=>e.value||0)}};h([f({readOnly:!0})],ii.prototype,"cache",null),h([f({type:ok.apiValues,json:{type:ok.jsonValues,origins:{"web-map":{read:!1}},read:ok.read,write:ok.write}})],ii.prototype,"axis",void 0),h([f()],ii.prototype,"index",null),h([f({type:String,readOnly:!0})],ii.prototype,"inputValueType",null),h([f({type:$ye,json:{write:!0}})],ii.prototype,"legendOptions",void 0),h([f({type:Number,value:null,json:{write:!0}})],ii.prototype,"maxDataValue",null),h([f({type:Number,value:null,json:{write:!0}})],ii.prototype,"maxSize",null),h([Rt("maxSize")],ii.prototype,"castMaxSize",null),h([ve("maxSize")],ii.prototype,"readMaxSize",null),h([f({type:Number,value:null,json:{write:!0}})],ii.prototype,"minDataValue",null),h([f({type:Number,value:null,json:{write:!0}})],ii.prototype,"minSize",null),h([Rt("minSize")],ii.prototype,"castMinSize",null),h([ve("minSize")],ii.prototype,"readMinSize",null),h([f({type:String,json:{write:!0}})],ii.prototype,"normalizationField",void 0),h([f({readOnly:!0})],ii.prototype,"arcadeRequired",null),h([f({type:String})],ii.prototype,"scaleBy",void 0),h([f({type:[cM],value:null,json:{write:!0}})],ii.prototype,"stops",null),h([f({type:["outline"],json:{write:!0}})],ii.prototype,"target",void 0),h([f({type:String,readOnly:!0})],ii.prototype,"transformationType",null),h([f({type:["size"],json:{type:["sizeInfo"]}})],ii.prototype,"type",void 0),h([f({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ii.prototype,"useSymbolValue",void 0),h([f({type:String,json:{write:!0}})],ii.prototype,"valueExpression",void 0),h([ve("valueExpression",["valueExpression","expression"])],ii.prototype,"readValueExpression",null),h([we("web-scene","valueExpression")],ii.prototype,"writeValueExpressionWebScene",null),h([f({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ii.prototype,"valueRepresentation",void 0),h([f({type:Pz.apiValues,json:{write:Pz.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],ii.prototype,"valueUnit",void 0),h([ve("valueUnit")],ii.prototype,"readValueUnit",null),ii=Iz=h([A("esri.renderers.visualVariables.SizeVariable")],ii);const DO=ii,mGe={color:_ye,size:DO,opacity:P9,rotation:xye},yGe=new nt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),gGe=/^\[([^\]]+)\]$/i;let pM=class extends Ce{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter(i=>!!i),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,o=n==null?void 0:n.match(gGe),a=o==null?void 0:o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:a})),e)return e.map(l=>{const u=yGe.read(l.type),p=mGe[u];p||(pe.getLogger(this).warn(`Unknown variable type: ${u}`),r!=null&&r.messages&&r.messages.push(new ll("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:l,context:r})));const m=new p;return m.read(l,r),m})}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};h([f()],pM.prototype,"visualVariables",null),pM=h([A("esri.renderers.visualVariables.VisualVariableFactory")],pM);const vGe=pM,bGe={base:NO,key:"type",typeMap:{opacity:P9,color:_ye,rotation:xye,size:DO}},VO=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new vGe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,s){r[n]=this._vvFactory.writeVariables(i,s)}get arcadeRequiredForVisualVariables(){var i;return((i=this.visualVariables)==null?void 0:i.some(({arcadeRequired:r})=>r))??!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){var n;return((n=this.visualVariables)==null?void 0:n.filter(s=>s.type===i&&(typeof r=="string"?s.target===r:r!==!1||!s.target)))??[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&Xs(i,r,s.field),s.normalizationField&&Xs(i,r,s.normalizationField),s.valueExpression&&(wGe(s.valueExpression,i,r)||await Ts(i,r,s.valueExpression)))}};return h([f({types:[bGe],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),h([ve("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),h([we("visualVariables")],e.prototype,"writeVisualVariables",null),e=h([A("esri.renderers.mixins.VisualVariablesMixin")],e),e};function wGe(t,e,i){const r=_4e(t);return r!=null&&(Xs(e,i,r),!0)}const L9=[252,146,31,255],OGe=[153,153,153,255],SGe={type:"esriSMS",style:"esriSMSCircle",size:6,color:L9,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},_Ge={type:"esriSLS",style:"esriSLSSolid",width:.75,color:L9},xGe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},$Ge={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},TGe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},EGe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},kGe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},mI=Jn.fromJSON(SGe),N9=es.fromJSON(_Ge),Lye=Nc.fromJSON(xGe),CGe=PO.fromJSON($Ge);function Z1t(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return mI;case"polyline":return N9;case"polygon":case"extent":return Lye}return null}const H1t=Jn.fromJSON(TGe),W1t=es.fromJSON(EGe),X1t=Nc.fromJSON(kGe),MGe=od.fromSimpleMarkerSymbol(mI),AGe=f0.fromSimpleLineSymbol(N9),IGe=lm.fromSimpleFillSymbol(Lye),PGe=new M2({symbolLayers:new Te([new p0({material:{color:L9},edges:new Mde({size:$s(1),color:new xe(OGe)})})])}),RGe=new f0({symbolLayers:new Te([new AO({material:{color:new xe([0,0,0])},size:$s(1)})])}),LGe=new lm({symbolLayers:new Te([new p0({outline:{color:new xe([0,0,0]),size:$s(1)}})])});function Y1t(t){if(t==null)return null;switch(t.type){case"mesh":return PGe;case"point":case"multipoint":return MGe;case"polyline":return AGe;case"polygon":case"extent":return IGe}return null}const FK="#useCIMFallbackSymbology()",ed={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Bw(t,e=ed){var l,u,p,m;if(!t)return{symbol:null};const{retainId:i=ed.retainId,ignoreDrivers:r=ed.ignoreDrivers,hasLabelingContext:n=ed.hasLabelingContext,retainCIM:s=ed.retainCIM,cimFallbackEnabled:o=ed.cimFallbackEnabled}=e;let a=null;if(Dc(t)||t instanceof Bf)a=t.clone();else if(t.type==="cim"){const g=(u=(l=t.data)==null?void 0:l.symbol)==null?void 0:u.type;switch(g){case"CIMPointSymbol":a=s?t.clone():od.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(a=RGe.clone(),(p=e==null?void 0:e.logWarning)==null||p.call(e,FK,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=LGe.clone(),(m=e==null?void 0:e.logWarning)==null||m.call(e,FK,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new G("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${g||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof es)a=f0.fromSimpleLineSymbol(t);else if(t instanceof Jn)a=od.fromSimpleMarkerSymbol(t);else if(t instanceof A2)a=od.fromPictureMarkerSymbol(t);else if(t instanceof Nc)a=e.geometryType&&e.geometryType==="mesh"?M2.fromSimpleFillSymbol(t):lm.fromSimpleFillSymbol(t);else{if(!(t instanceof PO))return{error:new G("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};a=n?sR.fromTextSymbol(t):od.fromTextSymbol(t)}return i&&a&&a.type!=="cim"&&(a.id=t.id),!r||a.type==="cim"||a instanceof Bf||a.symbolLayers.forEach(g=>g.ignoreDrivers=!0),{symbol:a}}function yI(t,e,i,r){const n=Nye(t,{},{context:r,isLabelSymbol:!1});n!=null&&(e[i]=n)}function jK(t,e,i,r){const n=Nye(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function zK(t){return Dc(t)||t instanceof Bf}function NGe(t){return(t==null?void 0:t.type)==="polygon-3d"||(t==null?void 0:t.type)==="line-3d"}function Nye(t,e,i){var a;if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!zK(t)){const l=Bw(t,{retainCIM:!0,hasLabelingContext:n});return l.symbol!=null?l.symbol.write(e,r):(o==null||o.push(new G("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:l.error})),null)}return IV(r==null?void 0:r.layer)&&NGe(t)?(o==null||o.push(new G("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(a=r==null?void 0:r.layer)==null?void 0:a.declaredClass}'.`,{symbol:t,context:r})),null):(s==="web-map"||s==="portal-item"&&!IV(r==null?void 0:r.layer))&&zK(t)?(o==null||o.push(new G("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function Dye(t,e){return vFe(t,null,e)}const MR={types:ope,json:{write:{writer:yI},origins:{"web-scene":{types:fY,write:{writer:yI},read:{reader:wO({types:fY})}}}}},D9=yQ({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},MR),V9={types:{base:ts,key:"type",typeMap:{"simple-fill":ff.typeMap["simple-fill"],"picture-fill":ff.typeMap["picture-fill"],"polygon-3d":ff.typeMap["polygon-3d"],cim:ff.typeMap.cim}},json:{write:{writer:yI},origins:{"web-scene":{type:lm,write:{writer:yI}}}}},fM={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var Rz;let Ly=Rz=class extends VO(Md){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new Rz({description:this.description,label:this.label,symbol:q(this.symbol),visualVariables:q(this.visualVariables),authoringInfo:q(this.authoringInfo)})}};h([f({type:String,json:{write:!0}})],Ly.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],Ly.prototype,"label",void 0),h([f(D9)],Ly.prototype,"symbol",void 0),h([Re({simple:"simple"})],Ly.prototype,"type",void 0),Ly=Rz=h([A("esri.renderers.SimpleRenderer")],Ly);const pd=Ly,DGe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function Lz(t){return t instanceof Ce}function UK(t){return t instanceof Te?Object.keys(t.items):Lz(t)?Io(t).keys():t?Object.keys(t):[]}function ak(t,e){return t instanceof Te?t.items[e]:t[e]}function VGe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Tx(t){return t?t.declaredClass:null}function Vye(t,e){var m;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=UK(t),n=UK(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||VGe(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter(g=>!r.includes(g)),o=r.filter(g=>!n.includes(g)),a=r.filter(g=>n.includes(g)&&ak(t,g)!==ak(e,g)).concat(s,o).sort(),l=Tx(t);if(l&&DGe.has(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let u;const p=Lz(t)&&Lz(e);for(const g of a){const w=ak(t,g),O=ak(e,g);let _;if((p||typeof w!="function"&&typeof O!="function")&&w!==O&&(w!=null||O!=null)){if(i&&i[g]&&typeof i[g]=="function")_=(m=i[g])==null?void 0:m.call(i,w,O);else if(w instanceof Date&&O instanceof Date){if(w.getTime()===O.getTime())continue;_={type:"complete",oldValue:w,newValue:O}}else _=typeof w=="object"&&typeof O=="object"&&Tx(w)===Tx(O)?Vye(w,O):{type:"complete",oldValue:w,newValue:O};_!=null&&(u!=null?u.diff[g]=_:u={type:"partial",diff:{[g]:_}})}}return u}function J1t(t,e){return FGe(t,e)}function FGe(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function K1t(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function jGe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Tx(t)!==Tx(e)?{type:"complete",oldValue:t,newValue:e}:Vye(t,e)}function lk(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!lk(i))return!1;for(const i of e.removed)if(!lk(i))return!1;for(const i of e.changed)if(!lk(i))return!1;return!0}case"partial":for(const e in t.diff)if(!lk(t.diff[e]))return!1;return!0}}var Nz;const zGe=dt()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let I_=Nz=class extends ft.ClonableMixin(K){static from(t){return vO(Nz,t)}constructor(t){super(t),this.title=null,this.order=null}};h([f({type:String,json:{write:!0}})],I_.prototype,"title",void 0),h([Re(zGe)],I_.prototype,"order",void 0),I_=Nz=h([A("esri.renderers.support.RendererLegendOptions")],I_);const F9=I_;let mb=class extends ft.ClonableMixin(K){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};h([f(fM)],mb.prototype,"value",void 0),h([f(fM)],mb.prototype,"value2",void 0),h([f(fM)],mb.prototype,"value3",void 0),mb=h([A("esri.renderers.support.UniqueValue")],mb);const fw=mb;let Vp=class extends ft.ClonableMixin(K){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new fw({value:r})):i==="object"?e[0]instanceof fw?e:e.map(r=>new fw(r)):null}};h([f({type:String,json:{write:!0}})],Vp.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],Vp.prototype,"label",void 0),h([f(MR)],Vp.prototype,"symbol",void 0),h([f({type:[fw],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new fw({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(pn).map(s=>s.toString());i.push(n)}e.values=i}}}})],Vp.prototype,"values",void 0),h([Rt("values")],Vp.prototype,"castValues",null),Vp=h([A("esri.renderers.support.UniqueValueClass")],Vp);const Fye=Vp;let P_=class extends ft.ClonableMixin(K){constructor(e){super(e),this.heading=null,this.classes=null}};h([f({type:String,json:{write:!0}})],P_.prototype,"heading",void 0),h([f({type:[Fye],json:{write:{isRequired:!0}}})],P_.prototype,"classes",void 0),P_=h([A("esri.renderers.support.UniqueValueGroup")],P_);const Dz=P_;var Vz;let Ny=Vz=class extends K{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new Vz({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};h([f({type:String,json:{write:!0}})],Ny.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],Ny.prototype,"label",void 0),h([f(D9)],Ny.prototype,"symbol",void 0),h([f(fM)],Ny.prototype,"value",void 0),Ny=Vz=h([A("esri.renderers.support.UniqueValueInfo")],Ny);const Ex=Ny,QK=new Map;async function UGe(t,e){try{return{data:(await j9(t,e)).data,baseUrl:zQ(t),styleUrl:t}}catch(i){return uc(i),null}}function QGe(t,e,i){var l;const r=e.portal!=null?e.portal:Lr.getDefault();let n;const s=`${r.url} - ${(l=r.user)==null?void 0:l.username} - ${t}`,o=QK.get(s);if(o)return o;const a=BGe(t,r,i).then(u=>(n=u,u.fetchData())).then(u=>({data:u,baseUrl:n.itemUrl??"",styleName:t}));return QK.set(s,a),a}function BGe(t,e,i){return e.load(i).then(()=>{const r=new sa({disableExtraQuery:!0,query:`owner:${BK} AND type:${qK} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var o;let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some(u=>u.toLowerCase()===s))&&a.type===qK&&a.owner===BK){n=a;break}}if(!n)throw new G("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function jye(t,e,i){return(t==null?void 0:t.styleUrl)!=null?UGe(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?QGe(t.styleName,e,i):Promise.reject(new G("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function zye(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function qGe(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=lD(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=lD(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=lD(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function lD(t,e){var i,r;if(!te("enable-feature:force-wosr"))return(r=(i=t.formatInfos)==null?void 0:i.find(n=>n.type===e))==null?void 0:r.href}function j9(t,e){const i={responseType:"json",query:{f:"json"},...e};return bt(_s(t),i)}const BK="esri_en",qK="Style",GGe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var R_;const Uye="esri.renderers.UniqueValueRenderer",hp=()=>pe.getLogger(Uye),GK="uvInfos-watcher",ZK="uvGroups-watcher",ZGe=",",HGe=_r(Ex);function WGe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=t,a=!(!e||!i);return[{classes:(s??[]).map(l=>{var T;const{symbol:u,label:p,value:m,description:g}=l,[w,O,_]=a?((T=m==null?void 0:m.toString())==null?void 0:T.split(n||""))||[]:[m],x=[];return(e||o)&&x.push(w),i&&x.push(O),r&&x.push(_),{symbol:u,label:p,values:[x],description:g}})}]}function mv(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let Vi=R_=class extends VO(Md){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=e.find(a=>a.value===i[s].value);o?jGe(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find(o=>o.value===e[s].value)||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:h2(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r!=null&&r.messages?r.messages.push(new G("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):hp().error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Lr.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Vf(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=f2(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?hp().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?hp().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void hp().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?HGe(t):new Ex({value:t,symbol:ape(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[mv(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void hp().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[mv(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await Ec()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void hp().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await Ec(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,s)=>n+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new R_({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:q(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:q(this.visualVariables),legendOptions:q(this.legendOptions),authoringInfo:q(this.authoringInfo),backgroundFillSymbol:q(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=q(this.uniqueValueInfos),i=q(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(q(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Ts(t,e,this.valueExpression)];Xs(t,e,this.field),Xs(t,e,this.field2),Xs(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return jye(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const n=new Bf({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new Ex({value:r.name,symbol:n});e.push(s),this._valueInfoMap[mv(r.name)]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",ZGe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[mv(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(GK);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(Oe(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,GK)}}_watchUniqueValueGroups(){this.removeHandles(ZK);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(Oe(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(Oe(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,ZK)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of s)for(const u of l.classes??[]){const{symbol:p,label:m,values:g,description:w}=u;for(const O of g??[]){const{value:_,value2:x,value3:T}=O,E=[_];i&&E.push(x),r&&E.push(T);const k=a?E.join(n||""):E[0]??void 0;t.push(new Ex({symbol:p,label:m,value:k,description:w}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=s.map(u=>{var T;const{symbol:p,label:m,value:g,description:w}=u,[O,_,x]=o?((T=g==null?void 0:g.toString())==null?void 0:T.split(n||""))||[]:[g];return new Fye({symbol:p,label:m,description:w,values:[new fw({value:O,value2:_,value3:x})]})}),l=[new Dz({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const p=l.createSyntaxTree(this.valueExpression);a=l.createFunction(p),this._cache.compiledFunc=a}const u=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._valueInfoMap[mv(u)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const n=this.field2,s=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[mv(r)]}static fromPortalStyle(t,e){const i=new R_(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||Lr.getDefault());const r=i.populateFromStyle();return r.catch(n=>{hp().error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new R_(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{hp().error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};h([f({readOnly:!0})],Vi.prototype,"_cache",null),h([Re({uniqueValue:"unique-value"})],Vi.prototype,"type",void 0),h([f(V9)],Vi.prototype,"backgroundFillSymbol",void 0),h([f({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Vi.prototype,"field",null),h([Rt("field")],Vi.prototype,"castField",null),h([we("field")],Vi.prototype,"writeField",null),h([f({type:String,value:null,json:{write:!0}})],Vi.prototype,"field2",null),h([f({type:String,value:null,json:{write:!0}})],Vi.prototype,"field3",null),h([f({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Vi.prototype,"orderByClassesEnabled",void 0),h([f({type:String,value:null,json:{write:!0}})],Vi.prototype,"valueExpression",null),h([f({type:String,json:{write:!0}})],Vi.prototype,"valueExpressionTitle",void 0),h([f({type:F9,json:{write:!0}})],Vi.prototype,"legendOptions",void 0),h([f({type:String,json:{write:!0}})],Vi.prototype,"defaultLabel",void 0),h([f(yQ({...MR},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Vi.prototype,"defaultSymbol",null),h([f({type:String,value:null,json:{write:!0}})],Vi.prototype,"fieldDelimiter",null),h([f({type:Lr,readOnly:!0})],Vi.prototype,"portal",void 0),h([ve("portal",["styleName"])],Vi.prototype,"readPortal",null),h([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Vi.prototype,"styleOrigin",void 0),h([ve("styleOrigin",["styleName","styleUrl"])],Vi.prototype,"readStyleOrigin",null),h([we("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Vi.prototype,"writeStyleOrigin",null),h([f({type:[Dz],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||WGe(e)).map(r=>Dz.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Vi.prototype,"uniqueValueGroups",null),h([f({type:[Ex],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Vi.prototype,"uniqueValueInfos",null),Vi=R_=h([A(Uye)],Vi);const z9=Vi;var Fz;let an=Fz=class extends K{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new Fz(q({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};h([f({type:[String],json:{write:!0}})],an.prototype,"attachmentTypes",void 0),h([f({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],an.prototype,"attachmentsWhere",void 0),h([f({type:Boolean,json:{write:!0}})],an.prototype,"cacheHint",void 0),h([f({type:[String],json:{write:!0}})],an.prototype,"keywords",void 0),h([f({type:[String],json:{write:!0}})],an.prototype,"globalIds",void 0),h([f({json:{write:!0}})],an.prototype,"name",void 0),h([f({type:Number,json:{read:{source:"resultRecordCount"}}})],an.prototype,"num",void 0),h([f({type:[Number],json:{write:!0}})],an.prototype,"objectIds",void 0),h([f({type:[String],json:{write:!0}})],an.prototype,"orderByFields",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],an.prototype,"returnMetadata",void 0),h([f({type:[Number],json:{write:!0}})],an.prototype,"size",void 0),h([f({type:Number,json:{read:{source:"resultOffset"}}})],an.prototype,"start",void 0),h([we("start"),we("num")],an.prototype,"writeStart",null),h([f({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],an.prototype,"where",void 0),an=Fz=h([A("esri.rest.support.AttachmentQuery")],an),an.from=_r(an);const XGe=an,Qye=dt()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),HK="percent-of-total",WK="field",rSt=t=>{let e=class extends t{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const r=!!this.normalizationField,n=this.normalizationTotal!=null;return r||n?(i=r&&WK||n&&HK||null,r&&n&&pe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==WK&&i!==HK||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return h([f({type:String,json:{name:"parameters.normalizationField",write:!0}})],e.prototype,"normalizationField",void 0),h([f({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],e.prototype,"normalizationMaxValue",void 0),h([f({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],e.prototype,"normalizationMinValue",void 0),h([f({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],e.prototype,"normalizationTotal",void 0),h([Re(Qye,{name:"parameters.normalizationType"})],e.prototype,"normalizationType",null),e=h([A("esri.rest.support.NormalizationBinParametersMixin")],e),e};var jz;let Xi=jz=class extends K{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new jz(q({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};h([f({type:Boolean,json:{write:!0}})],Xi.prototype,"cacheHint",void 0),h([f({type:su,json:{write:!0}})],Xi.prototype,"dynamicDataSource",void 0),h([f({type:String,json:{write:!0}})],Xi.prototype,"gdbVersion",void 0),h([f({type:Number,json:{write:!0}})],Xi.prototype,"geometryPrecision",void 0),h([f({type:Date})],Xi.prototype,"historicMoment",void 0),h([we("historicMoment")],Xi.prototype,"_writeHistoricMoment",null),h([f({type:Number,json:{write:!0}})],Xi.prototype,"maxAllowableOffset",void 0),h([f({json:{write:!0}})],Xi.prototype,"objectIds",void 0),h([f({type:[String],json:{write:!0}})],Xi.prototype,"orderByFields",void 0),h([f({type:[String],json:{write:!0}})],Xi.prototype,"outFields",void 0),h([f({type:Je,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Xi.prototype,"outSpatialReference",void 0),h([f({json:{write:!0}})],Xi.prototype,"relationshipId",void 0),h([f({type:Number,json:{read:{source:"resultOffset"}}})],Xi.prototype,"start",void 0),h([we("start"),we("num")],Xi.prototype,"writeStart",null),h([f({type:Number,json:{read:{source:"resultRecordCount"}}})],Xi.prototype,"num",void 0),h([f({json:{write:!0}})],Xi.prototype,"returnGeometry",void 0),h([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Xi.prototype,"returnM",void 0),h([f({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Xi.prototype,"returnZ",void 0),h([f({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Xi.prototype,"where",void 0),Xi=jz=h([A("esri.rest.support.RelationshipQuery")],Xi),Xi.from=_r(Xi);const U9=Xi,nSt=Object.freeze(Object.defineProperty({__proto__:null,default:U9},Symbol.toStringTag,{value:"Module"})),zz=new nt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function YGe(t,e,i,r){const n=await cm(t);if(await Q9(t,e,r),!n.addAttachment)throw new G(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function Q9(t,e,i){var s,o;const{attributes:r}=e,{objectIdField:n}=t;return(o=(s=t.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?e?r?n&&r[n]?Promise.resolve():Promise.reject(new G(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new G(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new G(i,"A feature is required to add/delete/update attachments")):Promise.reject(new G(i,"this layer doesn't support attachments"))}async function JGe(t,e,i,r,n){const s=await cm(t);if(await Q9(t,e,n),!s.updateAttachment)throw new G(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function KGe(t,e,i){const{applyEdits:r}=await J(()=>import("./editingSupport-CpnC6wJb.js"),[]),n=await t.load();let s=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await OZe(n,e.deleteFeatures,n.globalIdField)}),r(n,n.source,e,i)}async function eZe(t,e,i){const{uploadAssets:r}=await J(()=>import("./editingSupport-CpnC6wJb.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function tZe(t,e,i,r){const n=await cm(t);if(await Q9(t,e,r),!n.deleteAttachments)throw new G(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function iZe(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new G(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function rZe(t,e,i,r){var w,O,_,x;e=XGe.from(e),await t.load();const n=t.source,s=t.capabilities;if(!((w=s==null?void 0:s.data)!=null&&w.supportsAttachment))throw new G(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:u,size:p,start:m,where:g}=e;if(!((O=s==null?void 0:s.operations)!=null&&O.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(p==null?void 0:p.length)>0||u||m||g))throw new G(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a!=null&&a.length||l!=null&&l.length||g))throw new G(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new G(r,"Layer source does not support queryAttachments capability",e);return!((_=s==null?void 0:s.attachment)!=null&&_.supportsOrderByFields)&&((x=e.orderByFields)!=null&&x.length)&&((e=e.clone()).orderByFields=null),n.queryAttachments(e)}async function nZe(t,e,i,r){const n=await cm(t);if(!n.queryObjectIds)throw new G(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(Mc.from(e)??t.createQuery(),i)}async function sZe(t,e,i,r){const n=await cm(t);if(!n.queryFeatureCount)throw new G(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(Mc.from(e)??t.createQuery(),i)}async function oZe(t,e,i,r){const n=await cm(t);if(!n.queryExtent)throw new G(r,"Layer source does not support queryExtent capability");return n.queryExtent(Mc.from(e)??t.createQuery(),i)}async function aZe(t,e,i,r){const n=await cm(t);if(!n.queryRelatedFeatures)throw new G(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(U9.from(e),i)}async function lZe(t,e,i,r){const n=await cm(t);if(!n.queryRelatedFeaturesCount)throw new G(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(U9.from(e),i)}async function uZe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await V8(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function cZe(t){var o,a;const e=new Mc,i=(o=t.capabilities)==null?void 0:o.data,r=(a=t.capabilities)==null?void 0:a.query;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function Bye(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function qye(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function hZe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function dZe(t,e,i,r){var l,u;const n=i==null?void 0:i.feature,s=!!((l=t.subtypes)!=null&&l.length);if(s&&!(i!=null&&i.excludeImpliedDomains)){const p=fZe(t,e);if(p)return p}const o=s&&pZe(t,n);if(o){const p=(u=o==null?void 0:o.domains)==null?void 0:u[e];return(p==null?void 0:p.type)==="inherited"?r:p}const a=Hye(t.types,t.typeIdField,n);if(a){const p=a.domains&&a.domains[e];if(p&&(p==null?void 0:p.type)!=="inherited")return p}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const p=mZe(t,e);if(p)return p}return null}function pZe(t,e){const{subtypes:i,subtypeField:r}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!r)return null;const n=e.attributes[r];return n==null?null:i.find(s=>s.code===n)}function fZe(t,e){var o,a;const{fieldsIndex:i,subtypeField:r}=t,{name:n,type:s}=i.get(e)??{};if(!n)return null;if((r&&((o=i.get(r))==null?void 0:o.name))===n&&((a=t.subtypes)!=null&&a.length)){const l=t.subtypes.map(u=>new hg({code:Gye(u.code,s),name:u.name}));if(l!=null&&l.length)return new lR({codedValues:l})}return null}function mZe(t,e){var s,o;const{fieldsIndex:i}=t,{name:r,type:n}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?(s=i.get(t.typeIdField))==null?void 0:s.name:null)===r&&"types"in t&&((o=t.types)!=null&&o.length)){const a=t.types.map(l=>new hg({code:Gye(l.id,n),name:l.name}));return new lR({codedValues:a})}return null}function Gye(t,e){return e?vde({type:e})&&typeof t=="number"?`${t}`:nVe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function cm(t){return(await t.load()).source}async function sSt(t,e){if(!Ye)return;const i=Ye.findCredential(t);if(i)return i.userId;let r;try{const n=await I8(t,e);n&&(r=await Ye.checkSignInStatus(`${n}/sharing`))}catch{}return r?r.userId:null}async function Zye(t,e){if(!Ye||Ye.findCredential(t))return;let i;try{const r=await I8(t,e);r&&(i=await Ye.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await Ye.getCredential(t,{signal:r})}catch{}}async function yZe(t,e,i){var n;const r=(n=t.parsedUrl)==null?void 0:n.path;r&&t.authenticationTriggerEvent===e&&await Zye(r,i)}async function oSt(t){var i;const e=(i=t.parsedUrl)==null?void 0:i.path;e&&gZe(t)&&await Zye(e)}function gZe(t){return vZe(t)&&("serviceDefinitionExpression"in t&&gI(t.serviceDefinitionExpression)||"definitionExpression"in t&&gI(t.definitionExpression))}function vZe(t){var e;return!(!$he(t)||!((e=t.capabilities)!=null&&e.query.supportsCurrentUser))}function gI(t){return!!(t!=null&&t.toLowerCase().includes("current_user"))}function bZe(t){return!mM(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const uD=wO({types:ope});function B9(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new z9({defaultSymbol:uD(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(r=>({id:r.id,symbol:uD(r.symbol,r,e)}))}):new pd({symbol:uD(t.defaultSymbol,t,e)})}function wZe(t){var r,n,s;let e=(r=t.sourceJSON)==null?void 0:r.cacheMaxAge;if(!e)return!1;const i=(s=(n=t.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function OZe(t,e,i){if(e==null)return null;const r=[],{objectIdField:n}=t;if(e.forEach(u=>{let p=null;if("attributes"in u){const{attributes:m}=u;p={globalId:m[i],objectId:m[n]!=null&&m[n]!==-1?m[n]:null}}else p={globalId:u.globalId,objectId:u.objectId!=null&&u.objectId!==-1?u.objectId:null};p.globalId!=null&&(p.objectId!=null&&p.objectId!==-1||r.push(p.globalId))}),r.length===0)return null;const s=t.createQuery();s.where=r.map(u=>`${i}='${u}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,i],s.cacheHint=!1;const o=await ECe(bye(t,s));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const u of l){const p=u.attributes[i],m=u.attributes[n];p!=null&&m!=null&&m!==-1&&a.set(j9e(p),m)}return a}function Hye(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find(n=>{const{id:s}=n;return s!=null&&s.toString()===r.toString()})??null}function mM(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||SZe(t)}function SZe(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function _Ze(t,e,i){const r=e==null?void 0:e.queryAttributeBins;if(!r)throw new G(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new G(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!XK(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new G(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new G(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new G(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new G(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new G(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new G(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!XK(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new G(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new G(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new G(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new G(i,"Layer source does not support firstDayOfWeek binning");const n=r==null?void 0:r.supportedStatistics;if(t.outStatistics&&n){const s=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const a=s.get(o);if(a&&!n[a])throw new G(i,`Layer source does not support ${o} statistic type`)}}}function XK(t,e){return t!=null&&!!(e!=null&&e[Qye.toJSON(t)])}let yb=class extends ft.ClonableMixin(K){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};h([f({type:String,json:{read:{source:"shapeAreaFieldName"}}})],yb.prototype,"shapeAreaField",void 0),h([f({type:String,json:{read:{source:"shapeLengthFieldName"}}})],yb.prototype,"shapeLengthField",void 0),h([f({type:String,json:{read:t=>RAe.read(t)||LAe.read(t)}})],yb.prototype,"units",void 0),yb=h([A("esri.layers.support.GeometryFieldsInfo")],yb);const xZe=yb;var Uz;let gb=Uz=class extends K{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Te}clone(){return new Uz({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};h([f({type:String,json:{write:{isRequired:!0}}})],gb.prototype,"floorField",void 0),h([f({json:{read:!1,write:!1}})],gb.prototype,"viewAllMode",void 0),h([f({json:{read:!1,write:!1}})],gb.prototype,"viewAllLevelIds",void 0),gb=Uz=h([A("esri.layers.support.LayerFloorInfo")],gb);const $Ze=gb,YK=new nt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),JK=new nt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let ea=class extends ft.ClonableMixin(K){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};h([f({json:{read:YK.read,write:YK.write}})],ea.prototype,"cardinality",void 0),h([f({json:{name:"catalogID"}})],ea.prototype,"catalogId",void 0),h([f({json:{read:!0,write:!0}})],ea.prototype,"composite",void 0),h([f({json:{read:!0,write:!0}})],ea.prototype,"id",void 0),h([f({json:{read:!0,write:!0}})],ea.prototype,"keyField",void 0),h([f({json:{read:!0,write:!0}})],ea.prototype,"keyFieldInRelationshipTable",void 0),h([f({json:{read:!0,write:!0}})],ea.prototype,"name",void 0),h([f({json:{read:!0,write:!0}})],ea.prototype,"relatedTableId",void 0),h([f({json:{read:!0,write:!0}})],ea.prototype,"relationshipTableId",void 0),h([f({json:{read:JK.read,write:JK.write}})],ea.prototype,"role",void 0),ea=h([A("esri.layers.support.Relationship")],ea);const TZe=ea,EZe=[["binary","application/octet-stream","bin",""]];function uSt(t,e){return Jye(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function cSt(t,e){if(!t)return!1;const i=kZe(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function Wye(t,e){return G9(IZe(t,e))}function Xye(t,e){return G9(Jye(t,e))}function hSt(t,e){return Kye(AZe(t,e))}function kZe(t,e){return Xye(t.name,e)??Wye(t.type,e)}function AR(t,e,i){return Wye(t,i)??Xye(e,i)}function Yye({supportedFormats:t}){return AR("model/gltf-binary","glb",t)}function dSt(t){const e=Yye(t);return e!=null&&t.editFormats.includes(e)}function CZe({supportedFormats:t}){return AR("model/gltf+json","gltf",t)}function MZe(t){if(!t)return null;const e=Yye(t),i=CZe(t);let r=null;for(const n of t.queryFormats){if(n===e)return n;n===i&&(r=n)}return r}function pSt({supportedFormats:t}){return AR("application/esri3do-SR_world","wld",t)}function fSt({supportedFormats:t}){return AR("application/esri3do-SR_prj","prj",t)}function q9(t){return[...EZe,...t]}function AZe(t,e){return q9(e).find(i=>G9(i)===t)}function IZe(t,e){const i=t.toLowerCase();return q9(e).find(r=>Kye(r)===i)}function Jye(t,e){const i=t.toLowerCase();return q9(e).find(r=>PZe(r).some(n=>i.endsWith(n)))}function G9(t){return t==null?void 0:t[0]}function Kye(t){return t==null?void 0:t[1].toLowerCase()}function PZe(t){return(t==null?void 0:t[2].split(",").map(e=>e.toLowerCase()))??[]}function mSt(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function De(t,e,i){return!!ege(t,e,i)}function L_(t,e,i){return ege(t,e,i)}function ege(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const RZe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function LZe(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function D2(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function NZe(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map(r=>r.toLowerCase());return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_continuous")),percentileDiscrete:!!(e!=null&&e.includes("percentile_discrete")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function DZe(t){var i;const e=(i=t==null?void 0:t.supportedNormalizationTypes)==null?void 0:i.map(r=>r.toLowerCase());return{field:!!(e!=null&&e.includes("field")),log:!!(e!=null&&e.includes("log")),naturalLog:!!(e!=null&&e.includes("naturallog")),percentOfTotal:!!(e!=null&&e.includes("percentoftotal")),squareRoot:!!(e!=null&&e.includes("squareroot"))}}function tge(t,e){return{analytics:VZe(t),attachment:FZe(t),data:jZe(t),metadata:zZe(t),operations:UZe(t.capabilities,t,e),query:QZe(t,e),queryAttributeBins:GZe(t),queryRelated:BZe(t),queryTopFeatures:qZe(t),editing:ZZe(t)}}function VZe(t){return{supportsCacheHint:D2(t.advancedQueryCapabilities,"queryAnalytics")}}function FZe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:D2(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:De(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:De(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=RZe[r.name];n&&(i[n]=!!r.isEnabled)}),i}function jZe(t){return{isVersioned:De(t,"isDataVersioned",!1),isBranchVersioned:De(t,"isDataBranchVersioned",!1),supportsAttachment:De(t,"hasAttachments",!1),supportsM:De(t,"hasM",!1),supportsZ:De(t,"hasZ",!1)}}function zZe(t){return{supportsAdvancedFieldProperties:De(t,"supportsFieldDescriptionProperty",!1)}}function UZe(t,e,i){const r=t?t.toLowerCase().split(",").map(g=>g.trim()):[],n=i?Ff(i):null,s=r.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone;let a=o&&r.includes("create"),l=o&&r.includes("delete"),u=o&&r.includes("update");const p=r.includes("changetracking"),m=e.advancedQueryCapabilities;return o&&!(a||l||u)&&(a=l=u=!0),{supportsCalculate:De(e,"supportsCalculate",!1),supportsTruncate:De(e,"supportsTruncate",!1),supportsValidateSql:De(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:p,supportsQuery:s,supportsQueryAnalytics:De(m,"supportsQueryAnalytic",!1),supportsQueryAttachments:De(m,"supportsQueryAttachments",!1),supportsQueryBins:De(m,"supportsQueryBins",!1),supportsQueryTopFeatures:De(m,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:De(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:De(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:De(e,"supportsAsyncConvert3D",!1)}}function QZe(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),a=!o||s>=te("mapserver-pbf-version-support"),l=wA(e),u=new Set((t.supportedQueryFormats??"").split(",").map(p=>p.toLowerCase().trim()));return{maxRecordCount:L_(t,"maxRecordCount",void 0),maxRecordCountFactor:L_(t,"maxRecordCountFactor",void 0),standardMaxRecordCount:L_(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:LZe(i),supportsCacheHint:De(i,"supportsQueryWithCacheHint",!1)||D2(i,"query"),supportsCentroid:De(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsCurrentUser:De(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:De(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:De(i,"supportsDisjointSpatialRel",!1),supportsDistance:De(i,"supportsQueryWithDistance",!1),supportsDistinct:De(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:De(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&u.has("pbf"),supportsFullTextSearch:De(i,"supportsFullTextSearch",!1),supportsGeometryProperties:De(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:De(i,"supportsHavingClause",!1),supportsHistoricMoment:De(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:De(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:De(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:De(i,"supportsPagination",!1),supportsPercentileStatistics:De(i,"supportsPercentileStatistics",!1),supportsQuantization:De(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:De(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:De(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:De(r,"allowOthersToQuery",!0),supportsQueryGeometry:De(t,"supportsReturningQueryGeometry",!1),supportsResultType:De(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!MZe(t.infoFor3D),supportsSpatialAggregationStatistics:De(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:De(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:De(t,"useStandardizedQueries",!1),supportsStatistics:De(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:De(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:De(i,"supportsTrueCurve",!1),tileMaxRecordCount:L_(t,"tileMaxRecordCount",void 0)}}function BZe(t){const e=t.advancedQueryCapabilities,i=De(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:De(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:D2(e,"queryRelated")}}function qZe(t){return{supportsCacheHint:D2(t.advancedQueryCapabilities,"queryTopFilter")}}function GZe(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:De(e,"supportsDateBin",!1),supportsFixedInterval:De(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:De(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:De(e,"supportsFixedBoundariesBin",!1),supportsStackBy:De(e,"supportsStackBy",!1),supportsSplitBy:De(e,"supportsSplitBy",!1),supportsSnapToData:De(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:De(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:De(e,"supportsFirstDayOfWeek",!1),supportsNormalization:De(e,"supportsNormalization",!1),supportedStatistics:NZe(e),supportedNormalizationTypes:DZe(e)}}function ZZe(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:De(t,"allowGeometryUpdates",!0),supportsGlobalId:De(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:De(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:De(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:De(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:De(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:De(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:De(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:De(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:De(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:De(i,"supportsAsyncApplyEdits",!1),zDefault:L_(t,"zDefault",void 0)}}function ySt(t){var e;return{operations:{supportsAppend:De(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:De(t,"supportsExportClip",!1),supportsExportFrameset:De(t,"supportsExportFrameset",!1),supportsMensuration:De(t,"supportsMensuration",!1),supportsUpdate:De(t,"supportsUpdate",!1)}}}let Dh=class extends ft.ClonableMixin(K){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=uR(e[r]);return i}writeDomains(e,i){var n;if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};h([f({type:Number,json:{write:!0}})],Dh.prototype,"code",void 0),h([f({type:Object,json:{write:!0}})],Dh.prototype,"defaultValues",void 0),h([f({json:{write:!0}})],Dh.prototype,"domains",void 0),h([ve("domains")],Dh.prototype,"readDomains",null),h([we("domains")],Dh.prototype,"writeDomains",null),h([f({type:String,json:{write:!0}})],Dh.prototype,"name",void 0),Dh=h([A("esri.layers.support.Subtype")],Dh);const HZe=Dh,WZe=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Te.ofType(lc)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Je.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}getFieldDomain(){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:n,operations:s,editing:o}=i;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||s.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(gI(this.serviceDefinitionExpression)||gI(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(wZe(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,r){return tge(r,this.url)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=q(i),{operations:n,editing:s}=r;return mM(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),r)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,r){return Bye(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||mM(this))return!1;const{operations:r,editing:n}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:n}=i;return mM(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return qye(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const r=DMe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:pe.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,s){VMe(this,i,null,r,s)}readVersion(i,r){return hZe(r)}};return h([f({readOnly:!0})],e.prototype,"authenticationTriggerEvent",null),h([f({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),h([f({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),h([ve("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),h([f(DA("dateFieldsTimeReference"))],e.prototype,"dateFieldsTimeZone",void 0),h([f({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),h([f({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),h([f({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),h([f({readOnly:!0,type:Bqe})],e.prototype,"editFieldsInfo",void 0),h([f({readOnly:!0})],e.prototype,"editingInfo",void 0),h([ve("editingInfo")],e.prototype,"readEditingInfo",null),h([f({readOnly:!0})],e.prototype,"effectiveCapabilities",null),h([f()],e.prototype,"effectiveEditingEnabled",null),h([f((()=>{const i=q(Vqe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),h([f()],e.prototype,"fieldsIndex",void 0),h([f({type:$Ze,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Gi}}})],e.prototype,"floorInfo",void 0),h([f({type:oi,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),h([f()],e.prototype,"gdbVersion",void 0),h([f({readOnly:!0,type:xZe,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),h([f({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:zz.read}}}})],e.prototype,"geometryType",void 0),h([f({type:String})],e.prototype,"globalIdField",void 0),h([ve("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),h([f({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),h([f({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),h([f({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),h([f({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),h([f({readOnly:!0,type:_2})],e.prototype,"heightModelInfo",void 0),h([f({type:Date})],e.prototype,"historicMoment",void 0),h([f({type:Te.ofType(lc),readOnly:!0})],e.prototype,"indexes",void 0),h([f({readOnly:!0})],e.prototype,"isTable",void 0),h([ve("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),h([f({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),h([f(Uqe)],e.prototype,"maxScale",void 0),h([ve("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),h([f(zqe)],e.prototype,"minScale",void 0),h([ve("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),h([f({type:String})],e.prototype,"objectIdField",void 0),h([ve("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),h([f(DA("preferredTimeReference"))],e.prototype,"preferredTimeZone",void 0),h([f({type:[TZe],readOnly:!0})],e.prototype,"relationships",void 0),h([f({type:Boolean})],e.prototype,"returnM",void 0),h([f({type:Boolean})],e.prototype,"returnZ",void 0),h([f({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),h([f({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),h([ve("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),h([f({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),h([f()],e.prototype,"sourceJSON",void 0),h([f({type:Je,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),h([f({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),h([f({type:[HZe],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"subtypes",void 0),h([f({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),h([f(Nqe)],e.prototype,"url",null),h([we("url")],e.prototype,"writeUrl",null),h([f({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),h([ve("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=h([A("esri.layers.mixins.FeatureLayerBase")],e),e};let vb=class extends ft.ClonableMixin(K){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};h([f({type:String,json:{write:!0}})],vb.prototype,"expression",void 0),h([f({type:String,json:{write:!0}})],vb.prototype,"title",void 0),h([f({type:String,json:{write:!0}})],vb.prototype,"returnType",void 0),vb=h([A("esri.layers.support.ExpressionInfo")],vb);const Z9=vb;var Qz;let Vh=Qz=class extends K{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new Qz({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:q(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};h([f({type:Boolean,json:{write:!0}})],Vh.prototype,"isAutoGenerated",void 0),h([f({type:String,json:{write:!0}})],Vh.prototype,"name",void 0),h([f({type:String,json:{write:!0}})],Vh.prototype,"alias",void 0),h([f({type:String,json:{write:!0}})],Vh.prototype,"onStatisticField",void 0),h([f({type:Z9,json:{write:!0}})],Vh.prototype,"onStatisticExpression",void 0),h([f({type:String,json:{write:!0}})],Vh.prototype,"statisticType",void 0),Vh=Qz=h([A("esri.layers.support.AggregateField")],Vh);const Hf=Vh;let $f=class extends K{constructor(){super(...arguments),this.type=null}};h([f({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],$f.prototype,"type",void 0),$f=h([A("esri.layers.support.FeatureReduction")],$f);const H9="__begin__",W9="__end__",XZe=new RegExp(H9,"ig"),YZe=new RegExp(W9,"ig"),KK=new RegExp("^"+H9,"i"),eee=new RegExp(W9+"$","i"),vI='"',JZe=vI+" + ",KZe=" + "+vI;function eHe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function tHe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function X9(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=eHe(t.labelExpression),e.type="conventional"),e}function iHe(t){const e=X9(t);switch(e.type){case"conventional":return Bz(e.expression);case"arcade":return e.expression}return null}function rHe(t){const e=X9(t);switch(e.type){case"conventional":return sHe(e.expression);case"arcade":return ige(e.expression)}return null}function Bz(t){let e;return t?(e=yO(t,i=>H9+'$feature["'+i+'"]'+W9),e=KK.test(e)?e.replace(KK,""):vI+e,e=eee.test(e)?e.replace(eee,""):e+vI,e=e.replaceAll(XZe,JZe).replaceAll(YZe,KZe)):e='""',e}const nHe=/^\s*\{([^}]+)\}\s*$/i;function sHe(t){const e=t==null?void 0:t.match(nHe);return(e==null?void 0:e[1].trim())||null}const oHe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,aHe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,lHe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function ige(t){if(!t)return null;let e=oHe.exec(t)||aHe.exec(t);return e?e[1]||e[3]:(e=lHe.exec(t),e?e[2]:null)}var qz;let Fp=qz=class extends K{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?Bz(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=Bz(this.value)),t!=null&&(e[i]=t)}clone(){return new qz({expression:this.expression,title:this.title,value:this.value})}};h([f({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Fp.prototype,"expression",void 0),h([ve("expression",["expression","value"])],Fp.prototype,"readExpression",null),h([we("expression")],Fp.prototype,"writeExpression",null),h([f({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Fp.prototype,"title",void 0),h([f({json:{read:!1,write:!1}})],Fp.prototype,"value",void 0),Fp=qz=h([A("esri.layers.support.LabelExpressionInfo")],Fp);const rge=Fp;var Gz;const uk=new nt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function ck(t,e,i){return{enabled:!IV(i==null?void 0:i.layer)}}function nge(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function uHe(t){return(t==null?void 0:t.type)==="map-image"}function sge(t){var e,i;return!!uHe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function cHe(t){return nge(t)||sge(t==null?void 0:t.layer)}let br=Gz=class extends K{static evaluateWhere(t,e){const i=(r,n,s)=>{switch(n){case"=":return r==s;case"<>":return r!=s;case">":return r>s;case">=":return r>=s;case"<":return r<s;case"<=":return r<=s}return!1};try{if(t==null)return!0;const r=t.split(" ");if(r.length===3)return i(e[r[0]],r[1],r[2]);if(r.length===7){const n=i(e[r[0]],r[1],r[2]),s=r[3],o=i(e[r[4]],r[5],r[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=CGe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=tHe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=ige(this.labelExpressionInfo.expression);r&&(t="["+r+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,r){if(t==null&&this.labelExpression!=null&&nge(r))t=new rge({expression:this.getLabelExpressionArcade()});else if(!t)return;const n=t.toJSON(r);n.expression&&(e[i]=n)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return X9(this)}getLabelExpressionArcade(){return iHe(this)}getLabelExpressionSingleField(){return rHe(this)}hash(){return JSON.stringify(this)}clone(){return new Gz({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:q(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:q(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};h([f({type:String,json:{write:!0}})],br.prototype,"name",void 0),h([f({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:ck}}}}})],br.prototype,"allowOverrun",void 0),h([f({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:ck}}}}})],br.prototype,"deconflictionStrategy",void 0),h([f({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&sge(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],br.prototype,"labelExpression",void 0),h([ve("labelExpression")],br.prototype,"readLabelExpression",null),h([we("labelExpression")],br.prototype,"writeLabelExpression",null),h([f({type:rge,json:{write:{overridePolicy:(t,e,i)=>cHe(i)?{allowNull:!0}:{enabled:!1}}}})],br.prototype,"labelExpressionInfo",void 0),h([we("labelExpressionInfo")],br.prototype,"writeLabelExpressionInfo",null),h([f({type:uk.apiValues,json:{type:uk.jsonValues,read:uk.read,write:uk.write}})],br.prototype,"labelPlacement",void 0),h([f({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],br.prototype,"labelPosition",void 0),h([f({type:Number})],br.prototype,"maxScale",void 0),h([we("maxScale")],br.prototype,"writeMaxScale",null),h([f({type:Number})],br.prototype,"minScale",void 0),h([we("minScale")],br.prototype,"writeMinScale",null),h([f({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:ck}}}}})],br.prototype,"repeatLabel",void 0),h([f({type:Number,cast:Vt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:ck}}}}})],br.prototype,"repeatLabelDistance",void 0),h([f({types:bFe,json:{origins:{"web-scene":{types:wFe,write:jK,default:null}},write:jK,default:null}})],br.prototype,"symbol",void 0),h([f({type:Boolean,json:{write:!0}})],br.prototype,"useCodedValues",void 0),h([f({type:String,json:{write:!0}})],br.prototype,"where",void 0),br=Gz=h([A("esri.layers.support.LabelClass")],br);const V2=br;var Zz;let jp=Zz=class extends K{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new Zz({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};h([f({type:String,json:{write:!0}})],jp.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],jp.prototype,"label",void 0),h([f({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],jp.prototype,"minValue",void 0),h([f({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],jp.prototype,"maxValue",void 0),h([f(D9)],jp.prototype,"symbol",void 0),jp=Zz=h([A("esri.renderers.support.ClassBreakInfo")],jp);const bI=jp;var Hz;const oge="log",yM="percent-of-total",gM="field",hk=new nt({esriNormalizeByLog:oge,esriNormalizeByPercentOfTotal:yM,esriNormalizeByField:gM}),hHe=_r(bI);let qr=Hz=class extends VO(Md){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const s=new bI;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(t,e,i,r){const n=t.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(pe.getLogger(this).error(".field: field must be a string value"),null):h2(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&gM||i&&yM||null,e&&i&&pe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==gM&&t!==yM||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new bI({minValue:t,maxValue:e,symbol:ape(i)}):hHe(q(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&pe.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await Ec()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void pe.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const n=await Ec(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new Hz({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:q(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:q(this.visualVariables),legendOptions:q(this.legendOptions),authoringInfo:q(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Ts(t,e,this.valueExpression)];Xs(t,e,this.field),Xs(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=s.arcadeUtils;if(!l){const m=u.createSyntaxTree(a);l=u.createFunction(m),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const p=u.executeFunction(l,u.createExecContext(t,u.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._getBreakIndexfromInfos(p)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===oge)n=Math.log(n)*Math.LOG10E;else if(r!==yM||s==null||isNaN(s)){if(r===gM&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};h([f(V9)],qr.prototype,"backgroundFillSymbol",void 0),h([f({type:[bI],json:{write:{isRequired:!0}}})],qr.prototype,"classBreakInfos",void 0),h([ve("classBreakInfos")],qr.prototype,"readClassBreakInfos",null),h([we("classBreakInfos")],qr.prototype,"writeClassBreakInfos",null),h([f({type:String,json:{write:!0}})],qr.prototype,"defaultLabel",void 0),h([f(MR)],qr.prototype,"defaultSymbol",void 0),h([f({type:String,json:{write:!0}})],qr.prototype,"field",void 0),h([Rt("field")],qr.prototype,"castField",null),h([f({type:Boolean})],qr.prototype,"isMaxInclusive",void 0),h([f({type:F9,json:{write:!0}})],qr.prototype,"legendOptions",void 0),h([f({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],qr.prototype,"minValue",null),h([f({type:String,json:{write:!0}})],qr.prototype,"normalizationField",void 0),h([f({type:Number,json:{write:!0}})],qr.prototype,"normalizationTotal",void 0),h([f({type:hk.apiValues,value:null,json:{type:hk.jsonValues,read:hk.read,write:hk.write}})],qr.prototype,"normalizationType",null),h([Re({classBreaks:"class-breaks"})],qr.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],qr.prototype,"valueExpression",void 0),h([f({type:String,json:{write:!0}})],qr.prototype,"valueExpressionTitle",void 0),qr=Hz=h([A("esri.renderers.ClassBreaksRenderer")],qr);const age=qr,Wz=-3,dHe=Wz-1;var Xh;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(Xh||(Xh={}));let pHe=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new gg,this._users=new gg}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const r=this._db.get(e.id+i);return(r==null?void 0:r.size)??0}put(e,i,r,n,s){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,Xh.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,n,Xh.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,Xh.ALL);const a=1+Math.max(s,dHe)-Wz;this._db.set(i,new fHe(r,n,a)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i,r,n){i=e.id+i;const s=this._db.get(i);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(i,r,n,Xh.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);n=o}s.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forAll(u=>{const{id:p,name:m}=u;if(a.startsWith(p)){const g=i[m]||0;i[m]=g+o.size}})});const n={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(i);s.sort((o,a)=>i[a]-i[o]),s.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+Wz-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,Xh.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,Xh.ALL)),this._users.forAll(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,n){let s;return this._removeFuncs.some(o=>{if(e.startsWith(o[0])){const a=o[1](i,n,r);return typeof a=="number"&&(s=a),!0}return!1}),s}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e)),this._checkSizeLimits()}_checkSizeLimits(e){const i=e??this;if(i.maxSize<0||i.size<=i.maxSize)return;const r=e==null?void 0:e.id;let n=!0;for(;n;){n=!1;for(const[s,o]of this._db)if(o.lifetime===0&&(!r||s.startsWith(r))){if(this._purgeItem(s,o,e),i.size<=.9*i.maxSize)return;n||(n=this._db.has(s))}}for(const[s,o]of this._db)if((!r||s.startsWith(r))&&(this._purgeItem(s,o,e),i.size<=.9*i.maxSize))return}_purgeItem(e,i,r=this._users.find(n=>e.startsWith(n.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,Xh.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},fHe=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}},lge=class{constructor(e,i){this._storage=new pHe,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}};function mHe(t){return"timeZone"in t}function yHe(t){return"timeZone"in t}function gHe(t){return"dateFieldsTimeZone"in t}const vHe=new Map;let uge=class vM{static fromJSON(e){return new vM(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new vM(e.fields??[],iee(e))}static fromLayerJSON(e){return new vM(e.fields??[],iee(e))}constructor(e=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=tee(o);if(o&&a){const l=tg(o);this._fieldsMap.set(o,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(a,s),r.push(`${l}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),j8(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):gde(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),oY(s)||aY(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)oY(e)||aY(e)||e.nullable||H4e(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(tg(e))??this._normalizedFieldsMap.get(tee(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(pe.getLogger("esri.layers.support.FieldsIndex").errorOnce(new G("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),$c):cge.has(i.type)?Wg:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===Wg?au.instance:i===$c?Rn.utcInstance:c2(vHe,i,()=>Ro.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return bde(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(e=>K.isSerializable(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function tg(t){return t.trim().toLowerCase()}function tee(t){var e;return((e=P4e(t))==null?void 0:e.toLowerCase())??""}const cge=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function iee(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=t,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=gHe(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?vC(t.dateFieldsTimeReference):null,l=n?mHe(n)?n.timeZone??a:n.dateFieldsTimeReference?vC(n.dateFieldsTimeReference):a??$c:null,u=r?yHe(r)?r.timeZone??a:r.timeReference?vC(r.timeReference):a:null,p=new Map([[tg((n==null?void 0:n.creationDateField)??""),l],[tg((n==null?void 0:n.editDateField)??""),l],[tg(s),u],[tg(o),u]]);for(const{name:m,type:g}of t.fields)if(cge.has(g))e.set(m,Wg);else if(g!=="date"&&g!=="esriFieldTypeDate")e.set(m,null);else if(i)e.set(m,Wg);else{const w=p.get(tg(m??""))??a;e.set(m,w)}return e}var ree,nee,see,oee,aee,lee,uee,cee,hee,dee,Xz,Yz,pee,fee,mee,yee,gee,vee,bee,wee,Oee,See,_ee,xee,$ee,Tee,Eee,kee,Cee,Mee,Aee,Iee,Pee,Ree,Lee,Nee,Dee,Vee,Fee,jee,zee,Uee,Qee,Bee,qee,Gee,Zee,Hee,Wee,Xee,Yee,Jee,Kee,ete,tte,wI,ite,rte,nte,ste,ote,ate,lte;(function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"})(ree||(ree={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(nee||(nee={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}(see||(see={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}(oee||(oee={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(aee||(aee={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(lee||(lee={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(uee||(uee={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(cee||(cee={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}(hee||(hee={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(dee||(dee={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(Xz||(Xz={})),function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"}(Yz||(Yz={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(pee||(pee={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(fee||(fee={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(mee||(mee={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}(yee||(yee={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(gee||(gee={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(vee||(vee={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(bee||(bee={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(wee||(wee={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}(Oee||(Oee={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(See||(See={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(_ee||(_ee={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(xee||(xee={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}($ee||($ee={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(Tee||(Tee={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}(Eee||(Eee={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(kee||(kee={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(Cee||(Cee={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(Mee||(Mee={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(Aee||(Aee={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(Iee||(Iee={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(Pee||(Pee={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AlongLine=1]="AlongLine"}(Ree||(Ree={})),function(t){t[t.Auto=0]="Auto",t[t.Clockwise=1]="Clockwise",t[t.Counterclockwise=2]="Counterclockwise"}(Lee||(Lee={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(Nee||(Nee={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(Dee||(Dee={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}(Vee||(Vee={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(Fee||(Fee={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(jee||(jee={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(zee||(zee={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(Uee||(Uee={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}(Qee||(Qee={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(Bee||(Bee={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(qee||(qee={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(Gee||(Gee={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(Zee||(Zee={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(Hee||(Hee={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(Wee||(Wee={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(Xee||(Xee={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(Yee||(Yee={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(Jee||(Jee={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(Kee||(Kee={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(ete||(ete={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(tte||(tte={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(wI||(wI={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(ite||(ite={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(rte||(rte={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(nte||(nte={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(ste||(ste={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}(ote||(ote={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(ate||(ate={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(lte||(lte={}));const bHe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Jz={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:wI.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:wI.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:Xz.Loop,repeatdelay:0,easing:Yz.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function wHe(t){return typeof t=="function"}function _St(t,e,i,r){return wHe(t)?t(e,i,r):t}function xSt(t){return[t.r,t.g,t.b,t.a]}const OHe=` /-,
`;function ute(t){let e=t.length;for(;e--;)if(!OHe.includes(t.charAt(e)))return!1;return!0}function $St(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.slice(r,n);i.push([s,null,ute(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.slice(r,n)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length){const s=t.slice(r);i.push([s,null,ute(s)])}return i}function TSt(t,e,i,r){let n="",s=null;for(const o of e){const[a,l,u]=o;if(a)u?s=a:(s&&(n+=s,s=null),n+=a);else{let p=l;i!=null&&(p=mge(l,i));const m=t.attributes[p];m&&(s&&(n+=s,s=null),n+=m)}}return SHe(n,r)}function SHe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function ESt(t,e,i,r,n,s,o=!0){const a=e/n,l=i/s,u=Math.ceil(a/2),p=Math.ceil(l/2);for(let m=0;m<s;m++)for(let g=0;g<n;g++){const w=4*(g+(o?s-m-1:m)*n);let O=0,_=0,x=0,T=0,E=0,k=0,M=0;const R=(m+.5)*l;for(let D=Math.floor(m*l);D<(m+1)*l;D++){const L=Math.abs(R-(D+.5))/p,F=(g+.5)*a,j=L*L;for(let B=Math.floor(g*a);B<(g+1)*a;B++){let W=Math.abs(F-(B+.5))/u;const ie=Math.sqrt(j+W*W);ie>=-1&&ie<=1&&(O=2*ie*ie*ie-3*ie*ie+1,O>0&&(W=4*(B+D*e),M+=O*t[W+3],x+=O,t[W+3]<255&&(O=O*t[W+3]/250),T+=O*t[W],E+=O*t[W+1],k+=O*t[W+2],_+=O))}}r[w]=T/_,r[w+1]=E/_,r[w+2]=k/_,r[w+3]=M/x}}function hge(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function dge(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function pge(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function fge(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function kSt(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function IR(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const CSt=(t,e=0)=>t==null||isNaN(t)?e:t,MSt=(t,e)=>t??e,ASt=(t,e)=>t??e,ISt=t=>t.tintColor?hge(t.tintColor):[255,255,255,1],PSt=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function RSt(){return J(()=>import("./geometryEngineJSON-Bvf5zUh7.js").then(t=>t.g),__vite__mapDeps([6,7,1,8]))}function LSt(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function NSt(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function DSt(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function VSt(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function cte(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=cte(e);if(i!=null)return i}break;case"CIMTextSymbol":return cte(t.symbol);case"CIMSolidFill":return t.color}return null}function hte(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=hte(i);if(r!=null)return r}break}case"CIMTextSymbol":return hte(t.symbol);case"CIMSolidStroke":return t.color}}function dte(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=dte(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return dte(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function FSt(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function jSt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function zSt(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const USt=t=>t.includes("data:image/svg+xml");function QSt(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Y9(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function BSt(t,e,i,r,n,s,o=!0){const{infos:a}=s;let l=1,u=0,p=0,m=0,g=1;for(const{absoluteAnchorPoint:_,offsetX:x,offsetY:T,rotation:E,size:k,frameHeight:M,rotateClockWise:R,scaleSymbolsProportionally:D}of a)g=_?1:l,p=fte(x,T,u,g,p),m=pte(x,T,u,g,m),M&&(D||o)&&(l*=k/M),u=mte(E,R,u);const w=fte(r,n,u,g,p),O=pte(r,n,u,g,m);return{size:t*l,rotation:mte(e,i,u),offsetX:w,offsetY:O}}function _He(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>_He(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function xHe(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...bHe[e]];const i=Jz[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function $He(t){return t.split(" ").map(e=>Number(e))}function THe(t){return typeof t=="string"?$He(t):t}function qSt(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=THe(t.dashTemplate)),t}function Kz(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return Kz(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return Kz(i.symbol)}}return"Normal"}function GSt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??Jz.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&IR(i.markerPlacement)){const r=i.size??Jz.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function mge(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function ZSt(t){return t.map(e=>({...e,propertyName:Y9(e.propertyName)}))}function HSt(t){const e={};for(const i in t){const r=t[i];e[Y9(i)]=r}return e}function pte(t,e,i,r,n){const s=i*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*t+o*e)*r+n}return e*r+n}function fte(t,e,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*t-Math.sin(s)*e)*r+n:t*r+n}function mte(t,e,i){return e?i-t:i+t}function WSt(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let s=e[Y9(i)];if(s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=xHe(e.type,i.toLowerCase()),s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(s=a,s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:a,defaultValue:s},s!=null&&(r?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return s}function XSt(t,e){return Math.max(Math.min((t??e)/100,1),0)}const yte="esri.renderers.support.DictionaryLoader",EHe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let yge=class{constructor(e,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new lge(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){var m;let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(g){if(vn(g))return this._dictionaryPromise=null,null}const n=(m=this._dictionaryVersion)==null?void 0:m.greaterEqual(4,0),s={};if(this.fieldMap)for(const g of this._symbolFields){const w=mge(this.fieldMap[g],this._fieldIndex);if(w){const O=e.attributes[w];s[g]=n?O:O!=null?""+e.attributes[w]:""}else s[g]=""}let o=null;try{o=r==null?void 0:r(s,i)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const a=o.split(";"),l=[],u=[];for(let g=0;g<a.length;g++){const w=a[g];if(w){if(w.includes("po:")){const O=w.slice(3).split("|");if(O.length===3){const _=O[0],x=O[1];let T=O[2];const E="countrylabel";if(_===E&&x==="TextString"){if(this.fieldMap!=null){let k=this.fieldMap[E];k==null&&(k=E,this.fieldMap[k]=k),e.attributes[k]=T}continue}if(x==="DashTemplate")T=T.split(" ").map(k=>Number(k));else if(x==="Color"){const k=new xe(T).toRgba();T=[k[0],k[1],k[2],255*k[3]]}else T=Number(T);u.push({primitiveName:_,propertyName:x,value:T,defaultValue:null})}}else if(w.includes("|")){for(const O of w.split("|"))if(this._itemNames.has(O)){l.push(O);break}}else if(this._itemNames.has(w))l.push(w);else if(g===0){l.length=0;let O="Invalid_P";e.geometry!=null&&(wg(e.geometry)?O="Invalid_A":o8(e.geometry)&&(O="Invalid_L")),l.push(O);break}}}const p=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point";return this._cimPartsToCIMSymbol(e,l,u,p,i)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void pe.getLogger(yte).error("no valid URL!");const i=bt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:r}]=await Promise.all([i,Ec()]);if(!r)throw this._dictionaryPromise=null,new G("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:s,expression:o,itemsNames:a}=r,l=o;let u=!1;s&&(this._dictionaryVersion=Ame.parse(s),u=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=n.symbol;const p={};if(this.config){const w=this.config;for(const O in w)p[O]=w[O]}if(n.configuration)for(const w of n.configuration)p.hasOwnProperty(w.name)||(p[w.name]=w.value);const m=[];if(e!=null&&e.fields&&this.fieldMap)for(const w in this.fieldMap){const O=this.fieldMap[w],_=e.fields.filter(x=>x.name.toLowerCase()===(O==null?void 0:O.toLowerCase()));_.length>0&&m.push({..._[0],type:u?_[0].type:"esriFieldTypeString"})}m.length>0&&(this._fieldIndex=new uge(m));const g=M4e(l,e!=null?e.spatialReference:null,m,p).then(w=>{const O={scale:0};return(_,x)=>{if(w==null)return null;const T=w.repurposeFeature({geometry:null,attributes:_});return O.scale=x!=null?x.scale??void 0:void 0,w.evaluate({$feature:T,$view:O},w.services)}}).catch(w=>(pe.getLogger(yte).error("Creating dictionary expression failed:",w),null));return this._dictionaryPromise=g,g}async _cimPartsToCIMSymbol(e,i,r,n,s){const o=new Array(i.length);for(let u=0;u<i.length;u++)o[u]=this._getSymbolPart(i[u],s);let a=await Promise.all(o);const l=this.fieldMap;if(l&&a.length>0){const{OverrideHelper:u}=await J(()=>import("./OverrideHelper-CGqrUmI_.js").then(p=>p.O),__vite__mapDeps([158,4]));a=q(a);for(const p of a)u.applyDictionaryTextOverrides(p,e,l,this._fieldIndex,Kz(p))}return new om({data:kHe(a,r,n)})}async _getSymbolPart(e,i){const r=this._symbolCache.get(e);if(r)return r;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(o=>o.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),s=bt(n,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,s),s.finally(()=>this._ongoingRequests.delete(e));try{const o=await s;return this._symbolCache.put(e,o.data),o.data}catch(o){throw o}}};function kHe(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const n of t){const s=n;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);r.symbolLayers.unshift(...s.symbolLayers)}}return i&&(r.callout=EHe),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var e6;let Wl=e6=class extends VO(Md){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new yge(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new e6({config:q(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:q(this.fieldMap),url:q(this.url),visualVariables:q(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Ts(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};h([f({type:yge})],Wl.prototype,"_loader",null),h([f({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Wl.prototype,"config",void 0),h([f({type:Object,json:{write:!0}})],Wl.prototype,"fieldMap",void 0),h([f({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Wl.prototype,"scaleExpression",void 0),h([we("scaleExpression")],Wl.prototype,"writeData",null),h([f({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Wl.prototype,"scaleExpressionTitle",void 0),h([f({type:String,json:{write:!0}})],Wl.prototype,"url",void 0),h([we("visualVariables")],Wl.prototype,"writeVisualVariables",null),Wl=e6=h([A("esri.renderers.DictionaryRenderer")],Wl);const CHe=Wl;var t6;let Fh=t6=class extends K{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(pe.getLogger(this).error(".field: field must be a string value"),null):h2(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new t6({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([f({type:xe,json:{type:[Number],write:!0}})],Fh.prototype,"color",void 0),h([f({type:String,json:{write:!0}})],Fh.prototype,"field",void 0),h([Rt("field")],Fh.prototype,"castField",null),h([f({type:String,json:{write:!0}})],Fh.prototype,"label",void 0),h([f({type:String,json:{write:!0}})],Fh.prototype,"valueExpression",void 0),h([f({type:String,json:{write:!0}})],Fh.prototype,"valueExpressionTitle",void 0),Fh=t6=h([A("esri.renderers.support.AttributeColorInfo")],Fh);const gge=Fh;var i6;let bM=i6=class extends K{constructor(){super(...arguments),this.unit=null}clone(){return new i6({unit:this.unit})}};h([f({type:String,json:{write:!0}})],bM.prototype,"unit",void 0),bM=i6=h([A("esri.renderers.support.DotDensityLegendOptions")],bM);const MHe=bM;var r6;let ho=r6=class extends VO(Md){constructor(t){super(t),this.attributes=null,this.backgroundColor=new xe([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new es,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Nc({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new r6({attributes:q(this.attributes),backgroundColor:q(this.backgroundColor),dotBlendingEnabled:q(this.dotBlendingEnabled),dotShape:q(this.dotShape),dotSize:q(this.dotSize),dotValue:q(this.dotValue),legendOptions:q(this.legendOptions),outline:q(this.outline),referenceScale:q(this.referenceScale),seed:q(this.seed),visualVariables:q(this.visualVariables),authoringInfo:q(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Ts(t,e,i.valueExpression),i.field&&t.add(i.field)}};h([f({type:[gge],json:{write:!0}})],ho.prototype,"attributes",void 0),h([f({type:xe,json:{write:!0}})],ho.prototype,"backgroundColor",void 0),h([f({type:Boolean,json:{write:!0}})],ho.prototype,"dotBlendingEnabled",void 0),h([f({type:String,json:{write:!1}})],ho.prototype,"dotShape",void 0),h([f({type:Number,json:{write:!0}})],ho.prototype,"dotSize",void 0),h([f({type:MHe,json:{write:!0}})],ho.prototype,"legendOptions",void 0),h([f({type:es,json:{default:null,write:!0}})],ho.prototype,"outline",void 0),h([f({type:Number,json:{write:!0}})],ho.prototype,"dotValue",void 0),h([f({type:Number,json:{write:!0}})],ho.prototype,"referenceScale",void 0),h([f({type:Number,json:{write:!0}})],ho.prototype,"seed",void 0),h([Re({dotDensity:"dot-density"})],ho.prototype,"type",void 0),ho=r6=h([A("esri.renderers.DotDensityRenderer")],ho);const AHe=ho;var n6;let N_=n6=class extends K{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new n6({color:this.color&&this.color.clone(),ratio:this.ratio})}};h([f({type:xe,json:{type:[kt],default:null,write:{isRequired:!0}}})],N_.prototype,"color",void 0),h([f({type:Number,json:{write:{isRequired:!0}}})],N_.prototype,"ratio",void 0),N_=n6=h([A("esri.renderers.support.HeatmapColorStop")],N_);const kx=N_;let bb=class extends ft.ClonableMixin(K){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};h([f({type:String,json:{write:!0}})],bb.prototype,"minLabel",void 0),h([f({type:String,json:{write:!0}})],bb.prototype,"maxLabel",void 0),h([f({type:String,json:{write:!0}})],bb.prototype,"title",void 0),bb=h([A("esri.renderers.support.HeatmapLegendOptions")],bb);function IHe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function PHe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function RHe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function LHe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function vge(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function bge(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function wge(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function NHe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function DHe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function VHe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function FHe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function jHe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function zHe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function UHe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function Oge(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function Sge(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function _ge(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function xge(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function QHe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function BHe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function qHe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o),t}function GHe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function $ge(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function ZHe(t,e=1){const i=YP;let r,n,s,o,a,l;do r=2*i()-1,n=2*i()-1,a=r*r+n*n;while(a>=1);do s=2*i()-1,o=2*i()-1,l=s*s+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*n,t[2]=e*s*u,t[3]=e*o*u,t}function HHe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function WHe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],u=i[3],p=u*r+a*s-l*n,m=u*n+l*r-o*s,g=u*s+o*n-a*r,w=-o*r-a*n-l*s;return t[0]=p*u+w*-o+m*-l-g*-a,t[1]=m*u+w*-a+g*-o-p*-l,t[2]=g*u+w*-l+p*-a-m*-o,t[3]=e[3],t}function XHe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function YHe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function JHe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],a=e[1],l=e[2],u=e[3],p=Ws();return Math.abs(i-o)<=p*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=p*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=p*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-u)<=p*Math.max(1,Math.abs(s),Math.abs(u))}const KHe=vge,eWe=bge,tWe=wge,iWe=Oge,rWe=Sge,nWe=_ge,sWe=xge;Object.freeze(Object.defineProperty({__proto__:null,add:LHe,ceil:NHe,copy:IHe,copyVec3:PHe,dist:iWe,distance:Oge,div:tWe,divide:wge,dot:GHe,equals:JHe,exactEquals:YHe,floor:DHe,inverse:BHe,len:nWe,length:_ge,lerp:$ge,max:FHe,min:VHe,mul:eWe,multiply:bge,negate:QHe,normalize:qHe,random:ZHe,round:jHe,scale:zHe,scaleAndAdd:UHe,set:RHe,sqrDist:rWe,sqrLen:sWe,squaredDistance:Sge,squaredLength:xge,str:XHe,sub:KHe,subtract:vge,transformMat4:HHe,transformQuat:WHe},Symbol.toStringTag,{value:"Module"}));function PR(){return[0,0,0,0]}function oWe(t){return[t[0],t[1],t[2],t[3]]}function y0(t,e,i,r){return[t,e,i,r]}function aWe(t,e,i,r){return[t,e,i,r]}function lWe(t,e=PR()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function uWe(t,e){return new Float64Array(t,e,4)}function Tge(){return PR()}function Ege(){return y0(1,1,1,1)}function kge(){return y0(1,0,0,0)}function Cge(){return y0(0,1,0,0)}function Mge(){return y0(0,0,1,0)}function Age(){return y0(0,0,0,1)}const cWe=Tge(),hWe=Ege(),dWe=kge(),pWe=Cge(),fWe=Mge(),mWe=Age();Object.freeze(Object.defineProperty({__proto__:null,ONES:hWe,UNIT_W:mWe,UNIT_X:dWe,UNIT_Y:pWe,UNIT_Z:fWe,ZEROS:cWe,clone:oWe,create:PR,createView:uWe,freeze:aWe,fromArray:lWe,fromValues:y0,ones:Ege,unitW:Age,unitX:kge,unitY:Cge,unitZ:Mge,zeros:Tge},Symbol.toStringTag,{value:"Module"}));const J9=2.4;function yWe(t){return $s(t*J9)}function gWe(t){return wi(t)/J9}function vWe(t,e,i,r){let{color:n,ratio:s}=e,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=Po((r-s)/(a-s),0,1);$ge(t,n.toArray(),o.toArray(),l)}function KSt(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),t.length<1)return i;let r=t[0],n=t[0],s=1;const o=PR();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<t.length;)r=n,n=t[s++];vWe(o,r,n,l),i.set(o,4*a)}return i}function e_t(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function t_t(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var s6;function gte(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=t;return a}}return t}let kn=s6=class extends Md{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new kx({ratio:0,color:new xe("rgba(255, 140, 0, 0)")}),new kx({ratio:.75,color:new xe("rgba(255, 140, 0, 1)")}),new kx({ratio:.9,color:new xe("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return gte(t)}get blurRadius(){return gWe(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",yWe(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(J9**2*this.blurRadius**4)}read(t,e){t=gte(t),super.read(t,e)}getSymbol(){return new Jn}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&Xs(t,e,i),r&&typeof r=="string"&&await Ts(t,e,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new s6({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:q(this.colorStops),field:this.field,legendOptions:q(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([f({type:I9,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],kn.prototype,"authoringInfo",void 0),h([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],kn.prototype,"blurRadius",null),h([f({type:[kx],json:{write:{isRequired:!0}}})],kn.prototype,"colorStops",void 0),h([f({type:String,json:{write:!0}})],kn.prototype,"field",void 0),h([f({type:bb,json:{write:!0}})],kn.prototype,"legendOptions",void 0),h([f({type:Number,json:{write:!0}})],kn.prototype,"maxDensity",void 0),h([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],kn.prototype,"maxPixelIntensity",null),h([f({type:Number,json:{write:!0}})],kn.prototype,"minDensity",void 0),h([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],kn.prototype,"minPixelIntensity",null),h([f({type:Number,cast:Vt,json:{write:!0}})],kn.prototype,"radius",void 0),h([f({type:Number,range:{min:0},json:{default:0,write:!0}})],kn.prototype,"referenceScale",void 0),h([Re({heatmap:"heatmap"})],kn.prototype,"type",void 0),h([f({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],kn.prototype,"valueExpression",void 0),h([f({type:String})],kn.prototype,"valueExpressionTitle",void 0),h([f({readOnly:!0})],kn.prototype,"_pixelIntensityToDensity",null),kn=s6=h([A("esri.renderers.HeatmapRenderer")],kn);const Ige=kn;let ig=class extends ft.ClonableMixin(K){constructor(){super(...arguments),this.color=new xe([0,0,0,0]),this.label=null,this.threshold=0}};h([f({type:xe,json:{write:!0}})],ig.prototype,"color",void 0),h([f({type:String,json:{write:!0}})],ig.prototype,"label",void 0),h([f({type:Number,range:{min:0,max:1},json:{write:!0}})],ig.prototype,"threshold",void 0),ig=h([A("esri.renderers.support.OthersCategory")],ig);const bWe={base:NO,key:"type",typeMap:{size:DO,opacity:P9}};let po=class extends VO(ft.ClonableMixin(Md)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new xe([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new ig,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var e;return new Jn({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(pn)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((i,r)=>i+r.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Ts(e,i,r.valueExpression),r.field&&e.add(r.field)}};h([f({type:[gge],json:{write:!0}})],po.prototype,"attributes",void 0),h([f(V9)],po.prototype,"backgroundFillSymbol",void 0),h([f({type:xe,json:{write:!0}})],po.prototype,"defaultColor",void 0),h([f({type:String,json:{write:!0}})],po.prototype,"defaultLabel",void 0),h([f({type:Number,range:{min:0,max:1},json:{write:!0}})],po.prototype,"holePercentage",void 0),h([f({type:ig,json:{write:!0}})],po.prototype,"othersCategory",void 0),h([f({type:F9,json:{write:!0}})],po.prototype,"legendOptions",void 0),h([f({type:es,json:{default:null,write:!0}})],po.prototype,"outline",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],po.prototype,"size",void 0),h([Re({pieChart:"pie-chart"})],po.prototype,"type",void 0),h([f({types:[bWe]})],po.prototype,"visualVariables",void 0),po=h([A("esri.renderers.PieChartRenderer")],po);const wWe=po,F2={key:"type",base:Md,typeMap:{heatmap:Ige,simple:pd,"unique-value":z9,"class-breaks":age,"dot-density":AHe,dictionary:CHe,"pie-chart":wWe},errorContext:"renderer"},OWe={key:"type",base:Md,typeMap:{simple:pd,"unique-value":z9,"class-breaks":age,heatmap:Ige},errorContext:"renderer",validate:SWe};function SWe(t){switch(t.type){case"simple":return _We(t);case"unique-value":return xWe(t);case"class-breaks":return $We(t);case"heatmap":return t}}function _We(t){if(t.symbol)return t;pe.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function xWe(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||pe.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function $We(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||pe.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function TWe(t,e){return S$(t,null,e)}const EWe=wO({types:F2});function S$(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new ll("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):EWe(t,e,i):null}var o6;let ps=o6=class extends $f{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Vt("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Rr(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?S$(r,e,i)??void 0:B9(e,i)}clone(){return new o6({fields:q(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:q(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:q(this.popupTemplate),renderer:q(this.renderer),binType:q(this.binType),size:this.size})}};h([Re({binning:"binning"})],ps.prototype,"type",void 0),h([Re({geohash:"geohash",square:"square"}),f({type:["geohash","square"]})],ps.prototype,"binType",void 0),h([f({type:Number,json:{write:!0}})],ps.prototype,"fixedBinLevel",void 0),h([f({type:[V2],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ps.prototype,"labelingInfo",void 0),h([f(TR)],ps.prototype,"labelsVisible",void 0),h([f({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ps.prototype,"maxScale",void 0),h([f($R)],ps.prototype,"popupEnabled",void 0),h([f({type:MO,json:{name:"popupInfo",write:!0}})],ps.prototype,"popupTemplate",void 0),h([f({cast:t=>t==="auto"?t:Bs(Vt(t))})],ps.prototype,"size",void 0),h([f({type:[Hf],json:{write:!0}})],ps.prototype,"fields",void 0),h([we("fields")],ps.prototype,"writeFields",null),h([f({types:F2,json:{write:{target:"drawingInfo.renderer"}}})],ps.prototype,"renderer",void 0),h([ve("renderer",["drawingInfo.renderer"])],ps.prototype,"readRenderer",null),ps=o6=h([A("esri.layers.support.FeatureReductionBinning")],ps);const Pge=ps;var a6;function vte(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let Gr=a6=class extends K{constructor(t){super(t),this.type="cluster",this.clusterRadius=Vt("80px"),this.clusterMinSize=Vt("12px"),this.clusterMaxSize=Vt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated?null:r?vte(r)?null:S$(r,e,i)??void 0:B9(e,i)}readSymbol(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated)return null;if(r&&vte(r)){const o=S$(r,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,r){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new pd({symbol:t});e.drawingInfo={renderer:a.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Rr(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>Hf.fromJSON(r))}clone(){return new a6({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:q(this.labelingInfo),labelsVisible:this.labelsVisible,fields:q(this.fields),maxScale:this.maxScale,renderer:q(this.renderer),symbol:q(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:q(this.popupTemplate)})}};h([f({type:["cluster"],readOnly:!0,json:{write:!0}})],Gr.prototype,"type",void 0),h([f({cast:t=>t==="auto"?t:Bs(Vt(t)),json:{write:!0}})],Gr.prototype,"clusterRadius",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Gr.prototype,"clusterMinSize",void 0),h([f({type:Number,cast:Vt,json:{write:!0}})],Gr.prototype,"clusterMaxSize",void 0),h([f({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Gr.prototype,"maxScale",void 0),h([f($R)],Gr.prototype,"popupEnabled",void 0),h([f({type:MO,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Gr.prototype,"popupTemplate",void 0),h([f({types:F2,json:{write:{target:"drawingInfo.renderer"}}})],Gr.prototype,"renderer",void 0),h([ve("renderer",["drawingInfo.renderer"])],Gr.prototype,"readRenderer",null),h([f({types:gFe})],Gr.prototype,"symbol",void 0),h([ve("symbol",["drawingInfo.renderer"])],Gr.prototype,"readSymbol",null),h([we("symbol")],Gr.prototype,"writeSymbol",null),h([f({type:[V2],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Gr.prototype,"labelingInfo",void 0),h([f(TR)],Gr.prototype,"labelsVisible",void 0),h([f({type:[Hf],json:{write:!0}})],Gr.prototype,"fields",void 0),h([we("fields")],Gr.prototype,"writeFields",null),h([ve("fields")],Gr.prototype,"readFields",null),Gr=a6=h([A("esri.layers.support.FeatureReductionCluster")],Gr);const Rge=Gr;var l6;let wM=l6=class extends $f{constructor(t){super(t),this.type="selection"}clone(){return new l6}};h([f({type:["selection"]})],wM.prototype,"type",void 0),wM=l6=h([A("esri.layers.support.FeatureReductionSelection")],wM);const bte=wM,wte={key:"type",base:$f,typeMap:{cluster:Rge,binning:Pge}},kWe={types:{key:"type",base:$f,typeMap:{selection:bte,cluster:Rge,binning:Pge}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:wte},"portal-item":{types:wte},"web-scene":{types:{key:"type",base:$f,typeMap:{selection:bte}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Gi}}}}},yv={Base64:0,Hex:1,String:2,Raw:3},mw=8,Lge=(1<<mw)-1;function mf(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function CWe(t){const e=[];for(let i=0,r=t.length*mw;i<r;i+=mw)e[i>>5]|=(t.charCodeAt(i/mw)&Lge)<<i%32;return e}function MWe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=mw)e.push(String.fromCharCode(t[i>>5]>>>i%32&Lge));return e.join("")}function AWe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function IWe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*t.length?r.push(e):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function PWe(t,e){return t<<e|t>>>32-e}function RR(t,e,i,r,n,s){return mf(PWe(mf(mf(e,t),mf(r,s)),n),i)}function os(t,e,i,r,n,s,o){return RR(e&i|~e&r,t,e,n,s,o)}function as(t,e,i,r,n,s,o){return RR(e&r|i&~r,t,e,n,s,o)}function ls(t,e,i,r,n,s,o){return RR(e^i^r,t,e,n,s,o)}function us(t,e,i,r,n,s,o){return RR(i^(e|~r),t,e,n,s,o)}function RWe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,u=n,p=s;i=os(i,r,n,s,t[o],7,-680876936),s=os(s,i,r,n,t[o+1],12,-389564586),n=os(n,s,i,r,t[o+2],17,606105819),r=os(r,n,s,i,t[o+3],22,-1044525330),i=os(i,r,n,s,t[o+4],7,-176418897),s=os(s,i,r,n,t[o+5],12,1200080426),n=os(n,s,i,r,t[o+6],17,-1473231341),r=os(r,n,s,i,t[o+7],22,-45705983),i=os(i,r,n,s,t[o+8],7,1770035416),s=os(s,i,r,n,t[o+9],12,-1958414417),n=os(n,s,i,r,t[o+10],17,-42063),r=os(r,n,s,i,t[o+11],22,-1990404162),i=os(i,r,n,s,t[o+12],7,1804603682),s=os(s,i,r,n,t[o+13],12,-40341101),n=os(n,s,i,r,t[o+14],17,-1502002290),r=os(r,n,s,i,t[o+15],22,1236535329),i=as(i,r,n,s,t[o+1],5,-165796510),s=as(s,i,r,n,t[o+6],9,-1069501632),n=as(n,s,i,r,t[o+11],14,643717713),r=as(r,n,s,i,t[o],20,-373897302),i=as(i,r,n,s,t[o+5],5,-701558691),s=as(s,i,r,n,t[o+10],9,38016083),n=as(n,s,i,r,t[o+15],14,-660478335),r=as(r,n,s,i,t[o+4],20,-405537848),i=as(i,r,n,s,t[o+9],5,568446438),s=as(s,i,r,n,t[o+14],9,-1019803690),n=as(n,s,i,r,t[o+3],14,-187363961),r=as(r,n,s,i,t[o+8],20,1163531501),i=as(i,r,n,s,t[o+13],5,-1444681467),s=as(s,i,r,n,t[o+2],9,-51403784),n=as(n,s,i,r,t[o+7],14,1735328473),r=as(r,n,s,i,t[o+12],20,-1926607734),i=ls(i,r,n,s,t[o+5],4,-378558),s=ls(s,i,r,n,t[o+8],11,-2022574463),n=ls(n,s,i,r,t[o+11],16,1839030562),r=ls(r,n,s,i,t[o+14],23,-35309556),i=ls(i,r,n,s,t[o+1],4,-1530992060),s=ls(s,i,r,n,t[o+4],11,1272893353),n=ls(n,s,i,r,t[o+7],16,-155497632),r=ls(r,n,s,i,t[o+10],23,-1094730640),i=ls(i,r,n,s,t[o+13],4,681279174),s=ls(s,i,r,n,t[o],11,-358537222),n=ls(n,s,i,r,t[o+3],16,-722521979),r=ls(r,n,s,i,t[o+6],23,76029189),i=ls(i,r,n,s,t[o+9],4,-640364487),s=ls(s,i,r,n,t[o+12],11,-421815835),n=ls(n,s,i,r,t[o+15],16,530742520),r=ls(r,n,s,i,t[o+2],23,-995338651),i=us(i,r,n,s,t[o],6,-198630844),s=us(s,i,r,n,t[o+7],10,1126891415),n=us(n,s,i,r,t[o+14],15,-1416354905),r=us(r,n,s,i,t[o+5],21,-57434055),i=us(i,r,n,s,t[o+12],6,1700485571),s=us(s,i,r,n,t[o+3],10,-1894986606),n=us(n,s,i,r,t[o+10],15,-1051523),r=us(r,n,s,i,t[o+1],21,-2054922799),i=us(i,r,n,s,t[o+8],6,1873313359),s=us(s,i,r,n,t[o+15],10,-30611744),n=us(n,s,i,r,t[o+6],15,-1560198380),r=us(r,n,s,i,t[o+13],21,1309151649),i=us(i,r,n,s,t[o+4],6,-145523070),s=us(s,i,r,n,t[o+11],10,-1120210379),n=us(n,s,i,r,t[o+2],15,718787259),r=us(r,n,s,i,t[o+9],21,-343485551),i=mf(i,a),r=mf(r,l),n=mf(n,u),s=mf(s,p)}return[i,r,n,s]}function K9(t,e=yv.Hex){const i=e||yv.Base64,r=RWe(CWe(t),t.length*mw);switch(i){case yv.Raw:return r;case yv.Hex:return AWe(r);case yv.String:return MWe(r);case yv.Base64:return IWe(r)}}const LWe=()=>pe.getLogger("esri.views.2d.layers.support.clusterUtils");te.add("esri-cluster-arcade-enabled",!0);const NWe=te("esri-cluster-arcade-enabled"),DWe=new Set(["simple-line","simple-fill","picture-fill"]);function Ote(t,e){let i=e.clone();if(!VWe(i))return i;if(e.symbols.some(r=>DWe.has(r.type))&&(i=new pd({symbol:new Jn})),i.authoringInfo||(i.authoringInfo=new I9),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");r.forEach(n=>{n.type==="rotation"?n.field?n.field=Hm(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=fS(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=Hm(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Hm(t,n.field,"avg","number"):n.valueExpression&&(n.field=fS(t,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=Hm(t,r.field,"sum","number"):r.valueExpression&&(r.field=fS(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=Hm(t,i.field,"mode","string"):i.valueExpression&&(i.field=fS(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Hm(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Hm(t,i.field,"avg","number"):i.valueExpression&&(i.field=fS(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const VWe=t=>{const e=i=>LWe().error(new G("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!NWe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function FWe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+K9(s)}}}function fS(t,e,i,r){const n=K9(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(o=>o.name===s)||t.push(new Hf({name:s,isAutoGenerated:!0,onStatisticExpression:new Z9({expression:e,returnType:r}),statisticType:i})),s}function Hm(t,e,i,r,n){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const s=FWe(i,e,n);return t.some(o=>o.name===s)||(i==="avg_norm"?t.push(new Hf({name:s,isAutoGenerated:!0,onStatisticExpression:new Z9({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new Hf({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const jWe=t=>{let e=class extends t{constructor(...i){super(...i),this.addHandles(Oe(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},mu))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,n){const s=i.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some(o=>o.type==="size")||s.visualVariables.push(new DO({field:"cluster_count",stops:[new cM({value:1}),new cM({useMinValue:!0,size:r}),new cM({useMaxValue:!0,size:n})]}))),s}_normalizeFeatureReduction(i){var m;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),n=[new Hf({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(r.fields??[]).filter(g=>!g.isAutoGenerated),o=i.renderer&&!((m=i.renderer.authoringInfo)!=null&&m.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:l}=r;if(o){r.fields=[...n,...s];const g=this._withClusterVariable(r.renderer,a,l);return r.effectiveFeatureRenderer=g,r.effectiveClusterRenderer=g,r}if(i.symbol){if(r.fields=[...n,...s],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const g=Ote(n,this.renderer),w=this._withClusterVariable(g,a,l),O="visualVariables"in w&&w.visualVariables?w.visualVariables:[],_=new pd({symbol:i.symbol,visualVariables:O});return r.fields=[...n,...s],r.effectiveFeatureRenderer=w,r.effectiveClusterRenderer=_,r}if(!this.renderer)return i;const u=Ote(n,this.renderer);r.fields=[...n,...s],r.renderer=u;const p=this._withClusterVariable(u,a,l);return r.effectiveFeatureRenderer=p,r.effectiveClusterRenderer=p,r}};return h([f(kWe)],e.prototype,"featureReduction",null),e=h([A("esri.layers.mixins.FeatureReductionLayer")],e),e},Ste={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},_te={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},xte={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},zWe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":Ste,"web-map/basemap":_te,"web-map/tables":xte,"link-chart/operational-layers":{...Ste,LinkChartLayer:!0},"link-chart/basemap":_te,"link-chart/tables":xte,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},UWe=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,n){var s;return((s=n==null?void 0:n.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:i}writeListMode(i,r,n,s){(s&&s.layerContainerType==="ground"||i&&ZCe(this,n,{},s))&&(r[n]=i)}writeOperationalLayerType(i,r,n){i&&(r[n]=i)}writeTitle(i,r){r.title=i??"Layer"}readVisibilityTimeExtent(i){return i?mn.fromArray(i):null}writeVisibilityTimeExtent(i,r,n,s){i&&s.layerContainerType!=="tables"&&(i.isEmpty?s!=null&&s.messages&&s.messages.push(new G("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[n]=i.toArray())}read(i,r){r&&(r.layer=this),Hae(this,i,n=>super.read(i,n),r)}write(i,r){var o,a;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const l=`${r.origin}/${r.layerContainerType||"operational-layers"}`,u=zWe[l];let p=!!(u!=null&&u[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(p=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(p=!1),!p)return(o=r.messages)==null||o.push(new G("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter(l=>l instanceof G&&l.name==="web-document-write:property-required").length;return MP(n==null?void 0:n.url)?((a=r==null?void 0:r.messages)==null||a.push(new G("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return h([f({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),h([ve("id",["id"])],e.prototype,"readId",null),h([f(vye)],e.prototype,"listMode",void 0),h([we("listMode")],e.prototype,"writeListMode",null),h([f({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Gi,isRequired:!0}}}}})],e.prototype,"operationalLayerType",void 0),h([we("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),h([f(vz)],e.prototype,"opacity",void 0),h([f({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),h([f({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),h([we("title"),we(["web-scene"],"title")],e.prototype,"writeTitle",null),h([f({type:mn,json:{origins:{"web-scene":{write:{layerContainerTypes:Gi}}}}})],e.prototype,"visibilityTimeExtent",void 0),h([ve("visibilityTimeExtent")],e.prototype,"readVisibilityTimeExtent",null),h([we(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[kt,bO]]}})],e.prototype,"writeVisibilityTimeExtent",null),h([f({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Gi}}})],e.prototype,"visible",void 0),e=h([A("esri.layers.mixins.OperationalLayer")],e),e};var u6;const dk=new nt({asc:"ascending",desc:"descending"});let wb=u6=class extends K{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new u6({field:this.field,valueExpression:this.valueExpression,order:this.order})}};h([f({type:String,json:{write:!0}})],wb.prototype,"field",void 0),h([f({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],wb.prototype,"valueExpression",void 0),h([f({type:dk.apiValues,json:{type:dk.jsonValues,read:dk.read,write:dk.write}})],wb.prototype,"order",void 0),wb=u6=h([A("esri.layers.support.OrderByInfo")],wb);const Nge=wb;function QWe(t,e,i){if(!t)return null;const r=t.find(s=>!!s.field);if(!r)return null;const n=new Nge;return n.read(r,i),[n]}function BWe(t,e,i,r){const n=t.find(s=>!!s.field);n&&Rr(i,[n.toJSON()],e)}const qWe={type:[Nge],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:QWe},write:{writer:BWe}}},GWe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return h([f(qWe)],e.prototype,"orderBy",void 0),e=h([A("esri.layers.mixins.OrderedLayer")],e),e},ZWe=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=bi(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new Hs({id:r.itemId,portal:n==null?void 0:n.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:s}=await J(()=>import("./layersLoader-DRJCP4hE.js"),__vite__mapDeps([220,139,138,140]));return rr(r),await s({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},r)}catch(s){throw vn(s)||pe.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(uc(r),!0)))}async setUserPrivileges(i,r){if(!Ht.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){uc(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const s=!(Ye!=null&&Ye.findCredential(this.url)),o=i===n.id;if(o&&n.portal.user)return this._getUserPrivileges(n,s);let a,l;if(o)a=n.portal.url;else try{a=await I8(this.url,r)}catch(g){uc(g)}if(!a||!mMe(a,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const g=r!=null?r.signal:null;l=await(Ye==null?void 0:Ye.getCredential(`${a}/sharing`,{prompt:!1,signal:g}))}catch(g){uc(g)}const u=!0,p=!1,m=!1;if(!l)return{features:{edit:u,fullEdit:p},content:{updateItem:m}};try{if(o?await n.reload():(n=new Hs({id:i,portal:{url:a}}),await n.load(r)),n.portal.user)return this._getUserPrivileges(n,s)}catch(g){uc(g)}return{features:{edit:u,fullEdit:p},content:{updateItem:m}}}_getUserPrivileges(i,r){const n=A7e(i);return r&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){uc(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?Ye==null?void 0:Ye.findCredential(this.url):null;if(!r)return!0;const n=pk.credential===r?pk.user:await this._fetchEditingUser(i);return pk.credential=r,pk.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var p,m;const r=(m=(p=this.portalItem)==null?void 0:p.portal)==null?void 0:m.user;if(r)return r;const n=Ye==null?void 0:Ye.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=Lr.getDefault();if(o&&o.loaded&&_s(o.restUrl)===_s(s))return o.user;const a=`${s}/community/self`,l=i!=null?i.signal:null,u=await EP(bt(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?A8.fromJSON(u.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var o;const n=r==null?void 0:r.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Lr.getDefault());return n&&s&&!nle(s.restUrl,n.restUrl)?(r.messages&&r.messages.push(new G("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return h([f({type:Hs})],e.prototype,"portalItem",null),h([ve("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),h([we("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),h([f({clonable:!1})],e.prototype,"resourceReferences",void 0),h([f({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),h([f({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),h([f({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=h([A("esri.layers.mixins.PortalLayer")],e),e},pk={credential:null,user:null};let D_=class extends Ce{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};h([f()],D_.prototype,"updating",void 0),h([f()],D_.prototype,"status",void 0),D_=h([A("esri.layers.support.PublishingInfo")],D_);const HWe=D_,WWe=Symbol(),XWe=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const n=new HWe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(r){let o=0;const a=async u=>{let p;r.updating=!0;try{p=await this.fetchPublishingStatus()}catch{p="unavailable"}p!=="published"&&p!=="unavailable"||(r.status==="publishing"&&this.refresh(),l.remove()),r.status=p,r.updating=!1,l.removed||(o=setTimeout(a,u,u+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.addHandles(l)}};return e=WWe,h([f({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=h([A("esri.layers.mixins.PublishableLayer")],i),i},yf=new Te,Cx=new WeakMap;function YWe(t){KWe(t)&&yf.push(new WeakRef(t))}function JWe(t){const e=yf.find(i=>i.deref()===t);e&&yf.remove(e)}function KWe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function Dge(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:Dge(e,t%e):0}let cD=0,fk=0;function eXe(){const t=Date.now();let e=!1;for(const i of yf){const r=i.deref();r?r.refreshInterval&&t-(Cx.get(r)??0)+5>=6e4*r.refreshInterval&&(Cx.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=yf.length-1;i>=0;i--)yf.at(i).deref()||yf.removeAt(i)}SQ(()=>{const t=Date.now();let e=0;for(const i of yf){const r=i.deref();r&&(e=Dge(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?Cx.get(r)||Cx.set(r,t):Cx.delete(r))}if(e!==fk){if(fk=e,clearInterval(cD),fk===0)return void(cD=0);cD=setInterval(eXe,fk)}},mu);const $te=.1,tXe=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=l2(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||YWe(this)},()=>{})}destroy(){JWe(this)}castRefreshInterval(i){return i>=$te?i:i<=0?0:$te}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Hx(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{pe.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){}};return h([f({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Gi}}}}})],e.prototype,"refreshInterval",void 0),h([Rt("refreshInterval")],e.prototype,"castRefreshInterval",null),h([f({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),h([f({readOnly:!0})],e.prototype,"refreshParameters",null),e=h([A("esri.layers.mixins.RefreshableLayer")],e),e},iXe=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&rXe(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return h([f({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),h([f({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),h([f({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=h([A("esri.layers.mixins.ScaleRangeLayer")],e),e};function rXe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}function Tte(t,e){return Yg.fromJSON({value:t,unit:e})}let Bn=class extends ft.ClonableMixin(K){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?mn.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?Tte(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?Tte(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};h([f({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Bn.prototype,"cumulative",void 0),h([f({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Bn.prototype,"endField",void 0),h([f({type:mn,json:{write:{enabled:!0,allowNull:!0}}})],Bn.prototype,"fullTimeExtent",void 0),h([ve("fullTimeExtent",["timeExtent"])],Bn.prototype,"readFullTimeExtent",null),h([we("fullTimeExtent")],Bn.prototype,"writeFullTimeExtent",null),h([f({type:Boolean,json:{write:!0}})],Bn.prototype,"hasLiveData",void 0),h([f({type:Yg,json:{write:{enabled:!0,allowNull:!0}}})],Bn.prototype,"interval",void 0),h([ve("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Bn.prototype,"readInterval",null),h([we("interval")],Bn.prototype,"writeInterval",null),h([f({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Bn.prototype,"startField",void 0),h([f(DA("timeReference",!0))],Bn.prototype,"timeZone",void 0),h([f({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Bn.prototype,"trackIdField",void 0),h([f({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Bn.prototype,"useTime",void 0),h([f({type:[Date],json:{read:!1}})],Bn.prototype,"stops",void 0),Bn=h([A("esri.layers.support.TimeInfo")],Bn);const Vge=Bn,nXe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Gi}}},sXe=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=_9.fromJSON(n.timeOffsetUnits);return s&&o?new Yg({value:s,unit:o}):null}set timeInfo(i){ude(i,this.fieldsIndex),this._set("timeInfo",i)}};return h([f({type:mn,json:{write:!1}})],e.prototype,"timeExtent",void 0),h([f({type:Yg})],e.prototype,"timeOffset",void 0),h([ve("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),h([f({value:null,type:Vge,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),h([f(nXe)],e.prototype,"useViewTime",void 0),e=h([A("esri.layers.mixins.TemporalLayer")],e),e};let Dy=class extends ft.ClonableMixin(K){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};h([f({type:[V2],json:{write:!0}})],Dy.prototype,"labelingInfo",void 0),h([f(TR)],Dy.prototype,"labelsVisible",void 0),h([f({types:F2,json:{write:!0}})],Dy.prototype,"renderer",void 0),h([f({type:Boolean,json:{write:!0}})],Dy.prototype,"visible",void 0),Dy=h([A("esri.layers.support.TrackPartInfo")],Dy);const yw=Dy;let fo=class extends ft.ClonableMixin(K){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new yw({renderer:new pd({symbol:mI.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new yw({renderer:new pd({symbol:mI.clone()})}),this.trackLines=new yw({renderer:new pd({symbol:N9.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const n=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Rr(r,n,i)}};h([f({type:Boolean,json:{write:!0}})],fo.prototype,"enabled",void 0),h([f({type:[Hf],json:{write:!0}})],fo.prototype,"fields",void 0),h([we("fields")],fo.prototype,"writeFields",null),h([f({type:yw,json:{write:!0}})],fo.prototype,"latestObservations",void 0),h([f({type:Yg,json:{write:!0}})],fo.prototype,"maxDisplayDuration",void 0),h([f({type:Number,json:{write:!0}})],fo.prototype,"maxDisplayObservationsPerTrack",void 0),h([f($R)],fo.prototype,"popupEnabled",void 0),h([f({type:MO,json:{name:"popupInfo",write:!0}})],fo.prototype,"popupTemplate",void 0),h([f({type:yw,json:{write:!0}})],fo.prototype,"previousObservations",void 0),h([f({type:yw,json:{write:!0}})],fo.prototype,"trackLines",void 0),h([f({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],fo.prototype,"timeField",void 0),fo=h([A("esri.layers.support.TrackInfo")],fo);const oXe=fo,aXe=t=>{let e=class extends t{constructor(){super(...arguments),this.trackInfo=null}};return h([f({type:oXe})],e.prototype,"trackInfo",void 0),e=h([A("esri.layers.mixins.TrackableLayer")],e),e},Ete=new nt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let zp=class extends ft.ClonableMixin(K){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};h([f({json:{write:!0}})],zp.prototype,"name",void 0),h([f({json:{write:!0}})],zp.prototype,"description",void 0),h([f({json:{read:Ete.read,write:Ete.write}})],zp.prototype,"drawingTool",void 0),h([f({json:{write:!0}})],zp.prototype,"prototype",void 0),h([f({json:{write:!0}})],zp.prototype,"thumbnail",void 0),zp=h([A("esri.layers.support.FeatureTemplate")],zp);const e7=zp;let jh=class extends ft.ClonableMixin(K){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=uR(e[r]);return i}writeDomains(e,i){var n;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};h([f({json:{write:!0}})],jh.prototype,"id",void 0),h([f({json:{write:!0}})],jh.prototype,"name",void 0),h([f({json:{write:!0}})],jh.prototype,"domains",void 0),h([ve("domains")],jh.prototype,"readDomains",null),h([we("domains")],jh.prototype,"writeDomains",null),h([f({type:[e7],json:{write:!0}})],jh.prototype,"templates",void 0),jh=h([A("esri.layers.support.FeatureType")],jh);const Fge=jh;function lXe(){return{fields:{type:[cR],value:null,set:function(t){if(t&&te("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");pe.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return uge.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||pe.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return KP(this.fieldsIndex,t)}}}}const hD=()=>pe.getLogger("esri.layers.support.labelingInfo"),uXe=/\[([^[\]]+)\]/gi;function dD(t,e,i){return t?t.map(r=>{var s;const n=new V2;if(n.read(r,i),n.labelExpression){const o=e.fields||((s=e.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(uXe,(a,l)=>`[${cXe(l,o)}]`)}return n}):null}function cXe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const hXe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function c_t(t,e){const i=[];for(const r of t){const n=r.labelPlacement,s=hXe[e];if(!r.symbol)return hD().warn("No ILabelClass symbol specified."),[];if(!s)return hD().error(new G("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(s.includes(n))i.push(r);else{const o=s[0];n&&hD().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const dXe="relationships/",pXe="expression/";let Fs=class extends Ce{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||d2(()=>Ec()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??J(()=>import("./featureUtils-COb-58Xe.js"),[]).then(e=>this._featureUtils=e)}get calculatedExpressions(){var i;const e=new Te;if(!this.expressionsUsedInTitle.length)return e;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(n.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){var i,r,n;let e=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof e!="string"?[]:(e=e.toLowerCase(),((n=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:n.filter(s=>e.includes(`{expression/${s.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){var r,n;const e=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const s of((n=this.calculatedExpressions)==null?void 0:n.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const a of o){const l=a.split("."),u=this.fieldsIndex.get(l.at(-1)??"");u&&e.add(u.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const s of i){const o=this.fieldsIndex.get(s);o&&e.add(o.name)}return e}get titleFromDisplayField(){var i,r;let e="";return this.displayField&&(e=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),e||(e=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){var n;try{const{attributes:s}=i,o=(r==null?void 0:r.timeZone)??"system",[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,(n=this._arcadeTask)==null?void 0:n.promise]);if(r.fetchMissingFields&&(i=await this._checkAndReQueryGraphic(e,i)),this.workingTitle&&this.fieldInfoMap){const l=this._createFormattedAttributes(e,i,o).global;return a({attributes:s,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:l,layer:e,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(e,i){const r=i.getObjectId();if(r==null)return i;if(!fVe(this.requiredFields,i)){const n=e.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=[r];const s=await e.queryFeatures(n);if((s==null?void 0:s.features.length)===1)return s.features[0]}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=this.fieldsIndex.get(r.fieldName),s=(n==null?void 0:n.name)??r.fieldName;r.fieldName=s,i.set(s.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){var a,l;const n=((a=this.effectivePopupTemplate)==null?void 0:a.fieldInfos)??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((l=this._arcadeTask)!=null&&l.value)){const u=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const p of this.calculatedExpressions)try{s[`expression/${p.name}`]=p.func({vars:{$feature:u}})}catch{}}const o={...i.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:o,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return z8(e).filter(i=>!(i.indexOf(dXe)===0||i.indexOf(pXe)===0))}};h([f({readOnly:!0})],Fs.prototype,"_arcadeTask",null),h([f()],Fs.prototype,"_featureUtils",void 0),h([f({readOnly:!0})],Fs.prototype,"featureUtilsPromise",null),h([f({readOnly:!0})],Fs.prototype,"calculatedExpressions",null),h([f()],Fs.prototype,"displayField",void 0),h([f()],Fs.prototype,"effectivePopupTemplate",void 0),h([f()],Fs.prototype,"expressionsUsedInTitle",null),h([f()],Fs.prototype,"fieldsIndex",void 0),h([f()],Fs.prototype,"fieldInfoMap",null),h([f()],Fs.prototype,"fields",void 0),h([f()],Fs.prototype,"objectIdField",void 0),h([f()],Fs.prototype,"requiredFields",null),Fs=h([A("esri.layers.support.TitleCreator")],Fs);const fXe=Fs,Ob=[];function mXe(t,e){if(wA(t.url??""))return!0;const{wkid:i}=e;for(const r of Ob){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Ob.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),Ob.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Ob.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Ob.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Ob.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function yXe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await EP(r.populateFromStyle());if(rr(i),n.ok===!1){const s=n.error;e!=null&&e.messages&&e.messages.push(new ll("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function gXe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=OXe({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!o.length)return null;const a=xXe({titleBase:n,fields:i,displayField:t}),l=_Xe();return new MO({title:a,content:l,fieldInfos:o})}function d_t(t){var u;const{title:e,graphic:i}=t??{},{attributes:r,sourceLayer:n}=i??{},s=n&&"displayField"in n?n.displayField:null,o=s?r==null?void 0:r[s]:null,a=o!=null?JSON.stringify(o):null,l=(u=i==null?void 0:i.getObjectId())==null?void 0:u.toString();return e||a||l||""}const vXe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):G4e(t,e);function bXe({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter(n=>!e.includes(n.type))),t===r&&(t=t.slice()),i!==!0&&t.sort(wXe),t}function wXe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:kte(t)?-1:kte(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function OXe(t,e){const i=e==null?void 0:e.visibleFieldNames;return bXe({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||$Xe,sortDisabled:e==null?void 0:e.sortDisabled}).map(r=>new U8({fieldName:r.name,isEditable:q4e(r,t),label:r.alias,format:SXe(r),visible:vXe(r,{...t,visibleFieldNames:i})}))}function SXe(t){switch(t.type){case"small-integer":case"integer":case"single":return new kC({digitSeparator:!0,places:0});case"double":return new kC({digitSeparator:!0,places:2});case"string":return yVe(t.name)?new kC({digitSeparator:!0,places:0}):void 0;default:return}}function _Xe(){return[new jw,new Fw]}function xXe(t){const e=N4e(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function kte(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const $Xe=["geometry","blob","raster","guid","xml"],zn="FeatureLayer";function mk(t,e){return new G("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function Cte(t){return t&&t instanceof Te}const pD=lXe();function fD(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Ue=class extends WZe(jWe(Cqe(XWe($qe(Sqe(cqe(GWe(sXe(aXe(iXe(tXe(VBe(UWe(ZWe(OR(hqe(DBe(ft.ClonableMixin(D8))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Je.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=l2(async(i,r,n)=>{const{save:s,saveAs:o}=await J(()=>import("./featureLayerUtils-CBPv59Zt.js").then(a=>a.f),__vite__mapDeps([221,216,217,139]));switch(i){case fc.SAVE:return s(this,r);case fc.SAVE_AS:return o(this,n,r)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var n;const i=e!=null?e.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(uc).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(i);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new G("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>yZe(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return bi(e),new fXe({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,i){return i=i.layerDefinition||i,tge(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return bZe(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,n){n!=null&&n.writeLayerSchema&&Rr(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return Bye(i.layerDefinition||i)}readObjectIdField(e,i){return qye(i.layerDefinition||i)}get parsedUrl(){const e=xr(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=kw(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=kw(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){nY(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){var s;i=i.layerDefinition||i;const n=(s=i.drawingInfo)==null?void 0:s.renderer;if(n){const o=S$(n,i,r)??void 0;return o||pe.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),o}return B9(i,r)}set source(e){const i=this._get("source");i!==e&&(Cte(i)&&this._resetMemorySource(i),Cte(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Te?new Hh({layer:this,items:e}):e:null}readSource(e,i){const r=g$.fromJSON(i.featureSet);return new Hh({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,i){const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e=e==null?void 0:e.map(o=>e7.fromJSON(o)),this._fixTemplates(e,n),this._fixTemplates(e,s),e}readTitle(e,i){var s,o,a;const r=((s=i.layerDefinition)==null?void 0:s.name)??i.name,n=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(r){const l=(a=this.portalItem)==null?void 0:a.title;if(this.sublayerTitleMode==="item-title")return this.url?LMe(this.url,r):r;let u=r;if(!u&&this.url){const p=Ff(this.url);p!=null&&(u=p.title)}return u?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==u&&(u=l+" - "+u),qQ(u)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find(s=>s.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e==null?void 0:e.map(o=>(o=Fge.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,s),o))}readVisible(e,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const r=await YGe(this,e,i,zn);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,i,r){const n=await JGe(this,e,i,r,zn);return this.lastEditsEventDate=new Date,n}async applyEdits(e,i){return KGe(this,e,i)}async uploadAssets(e,i){return eZe(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return gXe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await nae(J(()=>import("./FeatureLayerSource-Di9Oza92.js"),__vite__mapDeps([222,41,48,223,224,44,87,43,88,225,226,28,24,227,55,53,54,12,13,11,132,15])),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=cZe(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=tde(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){const r=await tZe(this,e,i,zn);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return iZe(this,e,zn)}getFeatureTitle(e,i={timeZone:"system",fetchMissingFields:!1}){return this._titleCreator.getTitle(this,e,i)}getFeatureType(e){return Hye(this.types,this.typeIdField,e)}getFieldDomain(e,i){var r;return dZe(this,e,i,((r=this.getField(e))==null?void 0:r.domain)??null)}async queryAttachments(e,i){return rZe(this,e,i,zn)}async queryFeatures(e,i){const r=await this.load(),n=await r.source.queryFeatures(Mc.from(e)??r.createQuery(),i);if(n!=null&&n.features)for(const s of n.features)s.layer=s.sourceLayer=r;return n}async queryObjectIds(e,i){return(await nZe(this,e,i,zn)).filter(eY)}async queryFeatureCount(e,i){return sZe(this,e,i,zn)}async queryExtent(e,i){return oZe(this,e,i,zn)}async queryRelatedFeatures(e,i){return aZe(this,e,i,zn)}async queryRelatedFeaturesCount(e,i){return lZe(this,e,i,zn)}async queryTopFeatures(e,i){var a;const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!((a=n==null?void 0:n.query)!=null&&a.supportsTopFeaturesQuery))throw new G(zn,"Layer source does not support queryTopFeatures capability");const s=await J(()=>import("./TopFeaturesQuery-BuIVV-cg.js"),[]),o=await r.queryTopFeatures(s.default.from(e),i);if(o!=null&&o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryAttributeBins(e,i){var a;const{source:r,capabilities:n}=await this.load();if(!r.queryAttributeBins||!((a=n==null?void 0:n.operations)!=null&&a.supportsQueryBins))throw new G(zn,"Layer source does not support queryAttributeBins capability");_Ze(e,n,zn);const s=await J(()=>import("./AttributeBinsQuery-nI2H9Fke.js"),__vite__mapDeps([185,18,8,26])),o=await r.queryAttributeBins(s.default.from(e),i);if(o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new G(zn,"Layer source does not support queryTopObjectIds capability");const s=await J(()=>import("./TopFeaturesQuery-BuIVV-cg.js"),[]);return(await r.queryTopObjectIds(s.default.from(e),i)).filter(eY)}async queryTopFeaturesExtent(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new G(zn,"Layer source does not support queryTopExtents capability");const s=await J(()=>import("./TopFeaturesQuery-BuIVV-cg.js"),[]);return r.queryTopExtents(s.default.from(e),i)}async queryTopFeatureCount(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new G(zn,"Layer source does not support queryFeatureCount capability");const s=await J(()=>import("./TopFeaturesQuery-BuIVV-cg.js"),[]);return r.queryTopCount(s.default.from(e),i)}read(e,i){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const n=r.layers;n&&n.length===1&&(super.read(n[0],i),r.showLegend!=null&&super.read({showLegend:r.showLegend},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:s}=i;if(this.dynamicDataSource)return s==null||s.push(mk(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return s==null||s.push(mk(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return s==null||s.push(mk(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return s==null||s.push(mk(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new G(zn,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||mXe(this,e))}async save(e){return this._debouncedSaveOperations(fc.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(fc.SAVE_AS,i,e)}_readEditingEnabled(e,i,r){var s;let n=(s=e.layerDefinition)==null?void 0:s.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,r,n){var s,o;if(!e){const a=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Rr("layerDefinition.capabilities",a,i),r&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=a)}}_fetchFirstValidLayerId(e){return bt(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const r=i.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),nY(this.renderer,this.fieldsIndex),ude(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),yXe(this,{origin:"service"})}async hasDataChanged(){return uZe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(r=>{var s;const n=(s=r.prototype)==null?void 0:s.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new G("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new G("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};h([f({clonable:!1,readOnly:!0})],Ue.prototype,"_titleCreator",null),h([f(Qqe)],Ue.prototype,"attributeTableTemplate",void 0),h([ve("service","capabilities")],Ue.prototype,"readCapabilities",null),h([f({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ue.prototype,"charts",void 0),h([f({readOnly:!0})],Ue.prototype,"createQueryVersion",null),h([f({json:{read:{source:"layerDefinition.copyrightText"}}})],Ue.prototype,"copyright",void 0),h([f({json:{read:{source:"layerDefinition.displayField"}}})],Ue.prototype,"displayField",void 0),h([f({types:ff,readOnly:!0})],Ue.prototype,"defaultSymbol",void 0),h([f({type:su})],Ue.prototype,"dynamicDataSource",void 0),h([f({type:Boolean})],Ue.prototype,"editingEnabled",null),h([ve(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ue.prototype,"readEditingEnabled",null),h([ve("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ue.prototype,"readEditingEnabledFromWebMap",null),h([we(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ue.prototype,"writeEditingEnabled",null),h([we("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ue.prototype,"writeEditingEnabledToWebMap",null),h([f({readOnly:!0})],Ue.prototype,"effectiveEditingEnabled",null),h([f({clonable:!1,readOnly:!0})],Ue.prototype,"featureTitleFields",null),h([f({...pD.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:fD}}}}})],Ue.prototype,"fields",void 0),h([f(pD.fieldsIndex)],Ue.prototype,"fieldsIndex",void 0),h([f({type:IBe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ue.prototype,"formTemplate",void 0),h([f({json:{read:{source:"layerDefinition.extent"}}})],Ue.prototype,"fullExtent",void 0),h([f({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:fD,writer(t,e,i){const r=t?zz.toJSON(t):null;r&&Rr(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:zz.read}}})],Ue.prototype,"geometryType",void 0),h([f({json:{read:{source:"layerDefinition.hasM"}}})],Ue.prototype,"hasM",void 0),h([f({json:{read:{source:"layerDefinition.hasZ"}}})],Ue.prototype,"hasZ",void 0),h([f(jqe)],Ue.prototype,"id",void 0),h([f({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ue.prototype,"infoFor3D",void 0),h([f({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ue.prototype,"isTable",void 0),h([ve("service","isTable",["type","geometryType"]),ve("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ue.prototype,"readIsTable",null),h([we("web-map","isTable")],Ue.prototype,"writeIsTable",null),h([f(TR)],Ue.prototype,"labelsVisible",void 0),h([f({type:[V2],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:dD,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:dD,write:{enabled:!0,layerContainerTypes:Gi}}},name:"layerDefinition.drawingInfo.labelingInfo",read:dD,write:!0}})],Ue.prototype,"labelingInfo",void 0),h([f((()=>{const t=q(Fqe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Rr(r,WP(e),i)}}},t})())],Ue.prototype,"opacity",void 0),h([f(Dqe)],Ue.prototype,"legendEnabled",void 0),h([f({type:["show","hide"],json:(()=>{const t=q(vye.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Ue.prototype,"listMode",void 0),h([ve("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ue.prototype,"readGlobalIdField",null),h([f({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:fD}}}}})],Ue.prototype,"objectIdField",void 0),h([ve("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ue.prototype,"readObjectIdField",null),h([f({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Gi}}})],Ue.prototype,"operationalLayerType",void 0),h([f(pD.outFields)],Ue.prototype,"outFields",void 0),h([f({readOnly:!0})],Ue.prototype,"parsedUrl",null),h([f({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ue.prototype,"path",void 0),h([f($R)],Ue.prototype,"popupEnabled",void 0),h([f({type:MO,json:{name:"popupInfo",write:!0}})],Ue.prototype,"popupTemplate",void 0),h([f({readOnly:!0})],Ue.prototype,"defaultPopupTemplate",null),h([f({types:F2,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:OWe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Gi,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Ue.prototype,"renderer",null),h([ve("service","renderer",["drawingInfo.renderer","defaultSymbol"]),ve("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ue.prototype,"readRenderer",null),h([f()],Ue.prototype,"resourceInfo",void 0),h([f((()=>{const t=q(Lqe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Ue.prototype,"screenSizePerspectiveEnabled",void 0),h([f({clonable:!1})],Ue.prototype,"source",null),h([Rt("source")],Ue.prototype,"castSource",null),h([ve("portal-item","source",["featureSet"]),ve("web-map","source",["featureSet"])],Ue.prototype,"readSource",null),h([f({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ue.prototype,"spatialReference",void 0),h([f({type:Number})],Ue.prototype,"subtypeCode",void 0),h([f({type:[e7]})],Ue.prototype,"templates",void 0),h([ve("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ue.prototype,"readTemplates",null),h([f({type:Vge})],Ue.prototype,"timeInfo",void 0),h([f()],Ue.prototype,"title",void 0),h([ve("service","title",["name"]),ve("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ue.prototype,"readTitle",null),h([ve("web-map","title",["layerDefinition.name","title"])],Ue.prototype,"readTitleFromWebMap",null),h([f({type:String})],Ue.prototype,"sublayerTitleMode",void 0),h([f({json:{read:!1}})],Ue.prototype,"type",void 0),h([f({type:String})],Ue.prototype,"typeIdField",void 0),h([ve("service","typeIdField"),ve("typeIdField",["layerDefinition.typeIdField"])],Ue.prototype,"readTypeIdField",null),h([f({type:[Fge]})],Ue.prototype,"types",void 0),h([ve("service","types",["types"]),ve("types",["layerDefinition.types"])],Ue.prototype,"readTypes",null),h([f({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ue.prototype,"visible",void 0),h([ve("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ue.prototype,"readVisible",null),Ue=h([A("esri.layers.FeatureLayer")],Ue);const t7=Ue,TXe=Object.freeze(Object.defineProperty({__proto__:null,default:t7},Symbol.toStringTag,{value:"Module"}));let zh=class extends K{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};h([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],zh.prototype,"moment",void 0),h([f({type:Boolean,json:{write:!0}})],zh.prototype,"fullUpdate",void 0),h([f({type:Boolean,json:{write:!0}})],zh.prototype,"validateErrorsCreated",void 0),h([f({type:Boolean,json:{write:!0}})],zh.prototype,"exceededTransferLimit",void 0),h([f({type:[Object],json:{write:!0}})],zh.prototype,"serviceEdits",void 0),h([f({type:[Object],json:{write:!0}})],zh.prototype,"discoveredSubnetworks",void 0),zh=h([A("esri.rest.networks.support.ValidateNetworkTopologyResult")],zh);const EXe=zh,kXe=dt()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Up=class extends EXe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await bt(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(Wt()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};h([f()],Up.prototype,"editsResolver",void 0),h([f({type:String,json:{write:!0}})],Up.prototype,"statusUrl",void 0),h([Re(kXe)],Up.prototype,"status",void 0),h([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Up.prototype,"submissionTime",void 0),h([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Up.prototype,"lastUpdatedTime",void 0),Up=h([A("esri.networks.support.TopologyValidationJobInfo")],Up);const CXe=Up;async function Mte(t,e){if(t==="Utility Network Layer"){const{default:i}=await J(()=>Promise.resolve().then(()=>GXe),void 0);return new i({layerUrl:e})}return null}async function MXe(t){var o;let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof Hs||(e={...e,portalItem:new Hs(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new G("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await bt(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((o=n.data.type)!=null&&o.includes(s))return Mte(n.data.type,r);if(n.data.layers){const a=n.data.layers.find(l=>l.type.includes(s));if(a){const l=`${r}/${a.id}`;return Mte(a.type,l)}}return null}let Ar=class extends OR(fa){static fromPortalItem(e){return MXe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:s}=i,o=r===this.featureServiceUrl,a=$x(r,n,this.gdbVersion);o&&a&&s.then(l=>{lM(r,n)&&(this.historicMoment=l.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:s}=i,o=r===this.featureServiceUrl,a=$x(r,n,this.gdbVersion);o&&a&&(this.historicMoment=s)},this.when().then(()=>{this.addHandles([cye(this._applyEditsHandler),hye(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{vn(e)||pe.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return xr(this.layerUrl)}get featureServiceUrl(){return Ff(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Ff(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return n>=0?n:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return n>=0?n:null}getObjectIdsFromElements(e){const i=[],r=new Map;for(const s of e){const o=this.getLayerIdBySourceId(s.networkSourceId);if(o==null)continue;let a=r.get(o);a===void 0&&(a=[]),a.push(s.objectId),r.set(o,a)}const n=this.featureServiceUrl;return r.forEach((s,o)=>i.push({layerUrl:`${n}/${o}`,objectIds:s})),i}async queryNamedTraceConfigurations(e,i){var a;const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([J(()=>import("./queryNamedTraceConfigurations-DJ_dVZ3K.js"),[]),J(()=>import("./QueryNamedTraceConfigurationsParameters-CC8jv6q3.js"),[])]),s=this.networkServiceUrl,o=n.from(e);return(a=await r(s,o,{...i}))==null?void 0:a.namedTraceConfigurations}async validateTopology(e,i){var p,m,g;if(!e.validateArea)throw new G("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([J(()=>import("./validateNetworkTopology-KEIeCMzU.js"),[]),J(()=>import("./ValidateNetworkTopologyParameters-CCdmZX-h.js"),[])]),s=n.from(e);lM(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=lz,await bK(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,l=wK(a,null,this.gdbVersion,!0),u=await r(o,s,{...i});if(u!=null&&u.serviceEdits){const w=[];for(const O of u.serviceEdits){const{editedFeatures:_}=O,x=_!=null&&_.spatialReference?new Je(_.spatialReference):null;w.push({layerId:O.layerId,editedFeatures:{adds:((p=_==null?void 0:_.adds)==null?void 0:p.map(T=>yk(T,x)))||[],updates:((m=_==null?void 0:_.updates)==null?void 0:m.map(T=>({original:yk(T[0],x),current:yk(T[1],x)})))||[],deletes:((g=_==null?void 0:_.deletes)==null?void 0:g.map(T=>yk(T,x)))||[],spatialReference:x}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:w,exceededTransferLimit:!1,historicMoment:u.moment})}return u}async submitTopologyValidationJob(e,i){let r=null;if(!e.validateArea)throw new G("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const p=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await bt(p,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:s}]=await Promise.all([J(()=>import("./validateNetworkTopology-KEIeCMzU.js"),[]),J(()=>import("./ValidateNetworkTopologyParameters-CCdmZX-h.js"),[])]),o=s.from(e);lM(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=lz,await bK(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,l=this.featureServiceUrl?wK(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,u=await n(a,o,{...i});return new CXe({statusUrl:u,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const n of r)if(n.sourceId===e)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,i,r,n,s){for(const o of e)for(const a of[o.edgeSources??[],o.junctionSources??[]])for(const l of a)if(l[r]===s)return i.set(s,l[n]),l[n];return-1}async _fetchLayerMetaData(e,i){const r=await bt(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const n=await bt(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(s=>{var o;return(o=s.data.layerDataElements)==null?void 0:o[0]});n&&this.read(n,{origin:"service"})}};function yk(t,e){return new Cc({attributes:t.attributes,geometry:bd({...t.geometry,spatialReference:e})})}h([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Ar.prototype,"id",void 0),h([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Ar.prototype,"title",void 0),h([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Ar.prototype,"layerUrl",void 0),h([f({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Ar.prototype,"dataElement",void 0),h([f({type:oi,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Ar.prototype,"fullExtent",void 0),h([f({type:Je,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Ar.prototype,"spatialReference",void 0),h([f({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Ar.prototype,"type",void 0),h([f({readOnly:!0})],Ar.prototype,"datasetName",null),h([f({readOnly:!0})],Ar.prototype,"owner",null),h([f({readOnly:!0})],Ar.prototype,"schemaGeneration",null),h([f({readOnly:!0})],Ar.prototype,"parsedUrl",null),h([f({readOnly:!0})],Ar.prototype,"featureServiceUrl",null),h([f({readOnly:!0})],Ar.prototype,"networkServiceUrl",null),h([f({readOnly:!0})],Ar.prototype,"layerId",null),h([f()],Ar.prototype,"sourceJSON",void 0),h([f({readOnly:!0})],Ar.prototype,"networkSystemLayers",null),h([f()],Ar.prototype,"gdbVersion",void 0),h([f({type:Date})],Ar.prototype,"historicMoment",void 0),Ar=h([A("esri.networks.Network")],Ar);const AXe=Ar;var go;(function(t){t[t.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",t[t.RTContainment=2]="RTContainment",t[t.RTAttachment=3]="RTAttachment",t[t.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",t[t.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(go||(go={}));const gk=new nt({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),g_t=new nt({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),IXe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},v_t=new nt({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let Qp=class extends K.JSONSupportMixin(fa){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=bt}initialize(){}async load(e){const i=this.rulesLayer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){return this._getWhereClauseForCompatibleFeatures(e,i,r)}getFeaturesCanAssociateWith(e,i,r){return this._getFeatureSourceLayerId(e)==null?[]:i.filter(n=>this.canAssociateFeatures(e,n,r))}canAssociateFeatures(e,i,r){const[n,s]=this._getFeatureAssetCodes(e),o=this._getFeatureSourceLayerId(e),[a,l]=this._getFeatureAssetCodes(i),u=this._getFeatureSourceLayerId(i);return o!=null&&u!=null&&r.some(p=>{const{type:m,direction:g}=p;return this._getRulesForAssociationType(m).some(w=>{const O=this._getRuleFieldValuesForAssociation(w,m,g);return O==null?void 0:O.some(_=>o===(_==null?void 0:_.ruleLayerIdForSource)&&n===(_==null?void 0:_.ruleAssetGroupCodeForSource)&&s===(_==null?void 0:_.ruleAssetTypeCodeForSource)&&u===(_==null?void 0:_.ruleLayerIdForTarget)&&a===(_==null?void 0:_.ruleAssetGroupCodeForTarget)&&l===(_==null?void 0:_.ruleAssetTypeCodeForTarget))})})}getLayersCanAssociateWith(e,i,r){return this._getFeatureSourceLayerId(e)==null?[]:i.filter(n=>this.canAssociateFeatureToLayer(e,n,r))}canAssociateFeatureToLayer(e,i,r){const n=Xa(i)?i.parent:i;if(!n)return!1;const s=n.layerId,o=Xa(i)?i.subtypeCode:null,[a,l]=this._getFeatureAssetCodes(e),u=this._getFeatureSourceLayerId(e);return u!=null&&r.some(p=>{const{type:m,direction:g}=p;return this._getRulesForAssociationType(m).some(w=>{const O=this._getRuleFieldValuesForAssociation(w,m,g);return O==null?void 0:O.some(_=>u===(_==null?void 0:_.ruleLayerIdForSource)&&a===(_==null?void 0:_.ruleAssetGroupCodeForSource)&&l===(_==null?void 0:_.ruleAssetTypeCodeForSource)&&s===(_==null?void 0:_.ruleLayerIdForTarget)&&(o==null||o===(_==null?void 0:_.ruleAssetGroupCodeForTarget)))})})}getFeatureSQL(e,i){var u,p;const r=e.layerId.toString(),n=(u=e.fieldsIndex)==null?void 0:u.normalizeFieldName("assetGroup"),s=(p=e.fieldsIndex)==null?void 0:p.normalizeFieldName("assetType"),o=n?i.attributes[n]:null,a=s?i.attributes[s]:null,l=this.rulesHash[r];if(l){const m=l.assetGroupHash[o];if(m)return m.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var n,s,o,a,l,u,p,m,g,w,O;const e={};let i;(function(_){_[_.from=0]="from",_[_.to=1]="to",_[_.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const _ of this.rules){if(_.ruleType===go.RTAttachment){this.rulesCategorized.attachment.push(_);continue}if(_.ruleType===go.RTContainment){this.rulesCategorized.containment.push(_);continue}if(_.ruleType===go.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(_);continue}this.rulesCategorized.connectivity.push(_);let x=[[i.from,i.to],[i.to,i.from]];_.ruleType===go.RTEdgeJunctionEdgeConnectivity&&(x=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const T of x){const E=T.shift(),k=T.shift();let M=!1;switch(_.ruleType){case go.RTEdgeJunctionEdgeConnectivity:M=E===i.from||E===i.to;break;case go.RTJunctionEdgeConnectivity:M=E===i.to}const R=r[E],D=((n=_[R.networkSourceId])==null?void 0:n.layerId.toString())??"",L=(o=(s=_[R.assetGroupId])==null?void 0:s.assetGroupCode)==null?void 0:o.toString(),F=_[R.assetTypeId],j=(a=F==null?void 0:F.assetTypeCode)==null?void 0:a.toString(),B=r[k],W=((l=_[B.networkSourceId])==null?void 0:l.layerId.toString())??"",ie=(p=(u=_[B.assetGroupId])==null?void 0:u.assetGroupCode)==null?void 0:p.toString(),oe=_[B.assetTypeId],ae=(m=oe==null?void 0:oe.assetTypeCode)==null?void 0:m.toString(),Ee=e[D]??{assetGroupHash:{}};if(!(L&&j&&ie&&ae))continue;const ue=Ee.assetGroupHash[L]??{assetTypeHash:{}},he=ue.assetTypeHash[j]??{};if(he[W]=he[W]??{},M){he[D]=he[D]??{};const Ae=`(assetgroup = ${L} AND assettype = ${j})`;(oe==null?void 0:oe.connectivityPolicy)==="esriNECPEndVertex"?he[D].endVertex=(g=he[D])!=null&&g.endVertex?`${he[D].endVertex}`:`${Ae}`:he[D].anyVertex=he[D].anyVertex?`${he[D].anyVertex}`:`${Ae}`}const ye=`(assetgroup = ${ie} AND assettype = ${ae})`;(oe==null?void 0:oe.connectivityPolicy)==="esriNECPEndVertex"?he[W].endVertex=(w=he[W])!=null&&w.endVertex?`${he[W].endVertex} OR ${ye}`:`${ye}`:he[W].anyVertex=(O=he[W])!=null&&O.anyVertex?`${he[W].anyVertex} OR ${ye}`:`${ye}`,ue.assetTypeHash[j]=he,Ee.assetGroupHash[L]=ue,e[D]=Ee}}this._set("rulesHash",e)}_getRuleFieldValuesForAssociation(e,i,r="from"){var n,s,o,a,l,u,p,m,g,w,O,_,x,T,E,k,M,R,D,L,F,j,B,W,ie,oe,ae,Ee,ue,he,ye,Ae,Q,ge,Ve,Ne,ke,ct,ot,ai,St,ri,Ft,Er,en,kr,ya,ga,to,gl,va,vl,bl,ba,Ou,is,wn,Uc,Su,nr;switch(i){case"attachment":case"containment":return r==="from"?[{ruleLayerIdForSource:(n=e.fromNetworkSource)==null?void 0:n.layerId,ruleAssetGroupCodeForSource:(s=e.fromAssetGroup)==null?void 0:s.assetGroupCode,ruleAssetTypeCodeForSource:(o=e.fromAssetType)==null?void 0:o.assetTypeCode,ruleLayerIdForTarget:(a=e.toNetworkSource)==null?void 0:a.layerId,ruleAssetGroupCodeForTarget:(l=e.toAssetGroup)==null?void 0:l.assetGroupCode,ruleAssetTypeCodeForTarget:(u=e.toAssetType)==null?void 0:u.assetTypeCode}]:[{ruleLayerIdForSource:(p=e.toNetworkSource)==null?void 0:p.layerId,ruleAssetGroupCodeForSource:(m=e.toAssetGroup)==null?void 0:m.assetGroupCode,ruleAssetTypeCodeForSource:(g=e.toAssetType)==null?void 0:g.assetTypeCode,ruleLayerIdForTarget:(w=e.fromNetworkSource)==null?void 0:w.layerId,ruleAssetGroupCodeForTarget:(O=e.fromAssetGroup)==null?void 0:O.assetGroupCode,ruleAssetTypeCodeForTarget:(_=e.fromAssetType)==null?void 0:_.assetTypeCode}];case"connectivity":case"junction-junction-connectivity":return[{ruleLayerIdForSource:(x=e.fromNetworkSource)==null?void 0:x.layerId,ruleAssetGroupCodeForSource:(T=e.fromAssetGroup)==null?void 0:T.assetGroupCode,ruleAssetTypeCodeForSource:(E=e.fromAssetType)==null?void 0:E.assetTypeCode,ruleLayerIdForTarget:(k=e.toNetworkSource)==null?void 0:k.layerId,ruleAssetGroupCodeForTarget:(M=e.toAssetGroup)==null?void 0:M.assetGroupCode,ruleAssetTypeCodeForTarget:(R=e.toAssetType)==null?void 0:R.assetTypeCode},{ruleLayerIdForSource:(D=e.toNetworkSource)==null?void 0:D.layerId,ruleAssetGroupCodeForSource:(L=e.toAssetGroup)==null?void 0:L.assetGroupCode,ruleAssetTypeCodeForSource:(F=e.toAssetType)==null?void 0:F.assetTypeCode,ruleLayerIdForTarget:(j=e.fromNetworkSource)==null?void 0:j.layerId,ruleAssetGroupCodeForTarget:(B=e.fromAssetGroup)==null?void 0:B.assetGroupCode,ruleAssetTypeCodeForTarget:(W=e.fromAssetType)==null?void 0:W.assetTypeCode}];case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return e.ruleType===go.RTEdgeJunctionEdgeConnectivity?[{ruleLayerIdForSource:(ie=e.fromNetworkSource)==null?void 0:ie.layerId,ruleAssetGroupCodeForSource:(oe=e.fromAssetGroup)==null?void 0:oe.assetGroupCode,ruleAssetTypeCodeForSource:(ae=e.fromAssetType)==null?void 0:ae.assetTypeCode,ruleLayerIdForTarget:(Ee=e.viaNetworkSource)==null?void 0:Ee.layerId,ruleAssetGroupCodeForTarget:(ue=e.viaAssetGroup)==null?void 0:ue.assetGroupCode,ruleAssetTypeCodeForTarget:(he=e.viaAssetType)==null?void 0:he.assetTypeCode},{ruleLayerIdForSource:(ye=e.viaNetworkSource)==null?void 0:ye.layerId,ruleAssetGroupCodeForSource:(Ae=e.viaAssetGroup)==null?void 0:Ae.assetGroupCode,ruleAssetTypeCodeForSource:(Q=e.viaAssetType)==null?void 0:Q.assetTypeCode,ruleLayerIdForTarget:(ge=e.fromNetworkSource)==null?void 0:ge.layerId,ruleAssetGroupCodeForTarget:(Ve=e.fromAssetGroup)==null?void 0:Ve.assetGroupCode,ruleAssetTypeCodeForTarget:(Ne=e.fromAssetType)==null?void 0:Ne.assetTypeCode},{ruleLayerIdForSource:(ke=e.toNetworkSource)==null?void 0:ke.layerId,ruleAssetGroupCodeForSource:(ct=e.toAssetGroup)==null?void 0:ct.assetGroupCode,ruleAssetTypeCodeForSource:(ot=e.toAssetType)==null?void 0:ot.assetTypeCode,ruleLayerIdForTarget:(ai=e.viaNetworkSource)==null?void 0:ai.layerId,ruleAssetGroupCodeForTarget:(St=e.viaAssetGroup)==null?void 0:St.assetGroupCode,ruleAssetTypeCodeForTarget:(ri=e.viaAssetType)==null?void 0:ri.assetTypeCode},{ruleLayerIdForSource:(Ft=e.viaNetworkSource)==null?void 0:Ft.layerId,ruleAssetGroupCodeForSource:(Er=e.viaAssetGroup)==null?void 0:Er.assetGroupCode,ruleAssetTypeCodeForSource:(en=e.viaAssetType)==null?void 0:en.assetTypeCode,ruleLayerIdForTarget:(kr=e.toNetworkSource)==null?void 0:kr.layerId,ruleAssetGroupCodeForTarget:(ya=e.toAssetGroup)==null?void 0:ya.assetGroupCode,ruleAssetTypeCodeForTarget:(ga=e.toAssetType)==null?void 0:ga.assetTypeCode}]:[{ruleLayerIdForSource:(to=e.fromNetworkSource)==null?void 0:to.layerId,ruleAssetGroupCodeForSource:(gl=e.fromAssetGroup)==null?void 0:gl.assetGroupCode,ruleAssetTypeCodeForSource:(va=e.fromAssetType)==null?void 0:va.assetTypeCode,ruleLayerIdForTarget:(vl=e.toNetworkSource)==null?void 0:vl.layerId,ruleAssetGroupCodeForTarget:(bl=e.toAssetGroup)==null?void 0:bl.assetGroupCode,ruleAssetTypeCodeForTarget:(ba=e.toAssetType)==null?void 0:ba.assetTypeCode},{ruleLayerIdForSource:(Ou=e.toNetworkSource)==null?void 0:Ou.layerId,ruleAssetGroupCodeForSource:(is=e.toAssetGroup)==null?void 0:is.assetGroupCode,ruleAssetTypeCodeForSource:(wn=e.toAssetType)==null?void 0:wn.assetTypeCode,ruleLayerIdForTarget:(Uc=e.fromNetworkSource)==null?void 0:Uc.layerId,ruleAssetGroupCodeForTarget:(Su=e.fromAssetGroup)==null?void 0:Su.assetGroupCode,ruleAssetTypeCodeForTarget:(nr=e.fromAssetType)==null?void 0:nr.assetTypeCode}];default:return[]}}_getWhereClauseForCompatibleFeatures(e,i,r){const n=new Map,[s,o]=this._getAssetFieldNames(e.sourceLayer),[a,l]=this._getFeatureAssetCodes(e),u=this._getFeatureSourceLayerId(e),p=Xa(i)?i.parent:i,m=Xa(i)?i.subtypeCode:null;r.forEach(w=>{const{type:O,direction:_}=w;this._getRulesForAssociationType(O).forEach(x=>{this._getRuleFieldValuesForAssociation(x,O,_).forEach(T=>{if(T.ruleAssetGroupCodeForTarget!=null&&T.ruleAssetTypeCodeForTarget!=null&&u===(T==null?void 0:T.ruleLayerIdForSource)&&a===(T==null?void 0:T.ruleAssetGroupCodeForSource)&&l===(T==null?void 0:T.ruleAssetTypeCodeForSource)&&p.layerId===(T==null?void 0:T.ruleLayerIdForTarget)&&(m==null||m===(T==null?void 0:T.ruleAssetGroupCodeForTarget))){const E=n.get(T.ruleAssetGroupCodeForTarget)??new Set;E.add(T.ruleAssetTypeCodeForTarget),n.set(T.ruleAssetGroupCodeForTarget,E)}})})});let g=[];return this._mergeAssetCodes(n).forEach((w,O)=>g.push(`${s} IN (${O}) AND ${o} IN (${Array.from(w).sort().join(", ")})`)),g.length>1&&(g=g.map(w=>`(${w})`)),g.join(" OR ")}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter(r=>r.ruleType===go.RTJunctionJunctionConnectivity);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter(r=>r.ruleType===go.RTJunctionEdgeConnectivity||r.ruleType===go.RTEdgeJunctionEdgeConnectivity);default:return[]}}_getFeatureSourceLayerId(e){var n;const{sourceLayer:i}=e;let r;return xhe(i)?r=i.layerId:Xa(i)&&(r=(n=i.parent)==null?void 0:n.layerId),r??null}_getAssetFieldNames(e){return!e||!("fieldsIndex"in e)?[null,null]:[e.fieldsIndex.normalizeFieldName("assetGroup")??null,e.fieldsIndex.normalizeFieldName("assetType")??null]}_getFeatureAssetCodes(e){const[i,r]=this._getAssetFieldNames(e.sourceLayer);return[i?e.attributes[i]:null,r?e.attributes[r]:null]}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[n,s]of e){const o=new Set([n]);for(const[l,u]of e)n!==l&&!r.has(l)&&this._areSetsEqual(s,u)&&(o.add(l),r.add(l));const a=Array.from(o).sort().join(", ");i.set(a,s)}return i}};h([f({constructOnly:!0})],Qp.prototype,"rulesLayer",void 0),h([f({constructOnly:!0})],Qp.prototype,"rules",void 0),h([f({readOnly:!0})],Qp.prototype,"rulesHash",void 0),h([f()],Qp.prototype,"rulesCategorized",void 0),h([f({constructOnly:!0})],Qp.prototype,"request",void 0),Qp=h([A("esri.networks.RulesTable")],Qp);const PXe=Qp;let za=class extends K{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};h([f({type:[Object],json:{write:!0}})],za.prototype,"conditionBarriers",void 0),h([f({type:[Object],json:{write:!0}})],za.prototype,"outputConditions",void 0),h([f({type:[Object],json:{write:!0}})],za.prototype,"functions",void 0),h([f({type:[Object],json:{write:!0}})],za.prototype,"functionBarriers",void 0),h([f({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],za.prototype,"traversabilityScope",void 0),h([f({type:String,json:{write:!0}})],za.prototype,"shortestPathNetworkAttributeName",void 0),h([f({type:Boolean,json:{write:!0}})],za.prototype,"includeBarriers",void 0),h([f({type:Boolean,json:{write:!0}})],za.prototype,"validateConsistency",void 0),h([f({type:Boolean,json:{write:!0}})],za.prototype,"ignoreBarriersAtStartingPoints",void 0),za=h([A("esri.networks.support.TraceConfiguration")],za);const i7=za;let Yi=class extends i7{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};h([f({type:[Object],json:{write:!0}})],Yi.prototype,"filterBarriers",void 0),h([f({type:String,json:{write:!0}})],Yi.prototype,"arcadeExpressionBarrier",void 0),h([f({type:String,json:{write:!0}})],Yi.prototype,"domainNetworkName",void 0),h([f({type:String,json:{write:!0}})],Yi.prototype,"filterBitsetNetworkAttributeName",void 0),h([f({type:[Object],json:{write:!0}})],Yi.prototype,"filterFunctionBarriers",void 0),h([f({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Yi.prototype,"filterScope",void 0),h([f({type:Boolean,json:{write:!0}})],Yi.prototype,"includeContainers",void 0),h([f({type:Boolean,json:{write:!0}})],Yi.prototype,"includeContent",void 0),h([f({type:Boolean,json:{write:!0}})],Yi.prototype,"includeIsolated",void 0),h([f({type:Boolean,json:{write:!0}})],Yi.prototype,"includeStructures",void 0),h([f({type:Boolean,json:{write:!0}})],Yi.prototype,"allowIndeterminateFlow",void 0),h([f({type:Boolean,json:{write:!0}})],Yi.prototype,"includeUpToFirstSpatialContainer",void 0),h([f({type:Object,json:{write:!0}})],Yi.prototype,"nearestNeighbor",void 0),h([f({type:[Object],json:{write:!0}})],Yi.prototype,"outputFilterCategories",void 0),h([f({type:[Object],json:{write:!0}})],Yi.prototype,"outputFilters",void 0),h([f({type:[Object],json:{write:!0}})],Yi.prototype,"propagators",void 0),h([f({type:String,json:{write:!0}})],Yi.prototype,"subnetworkName",void 0),h([f({type:String,json:{write:!0}})],Yi.prototype,"targetTierName",void 0),h([f({type:String,json:{write:!0}})],Yi.prototype,"diagramTemplateName",void 0),h([f({type:String,json:{write:!0}})],Yi.prototype,"tierName",void 0),h([f({type:Boolean,json:{write:!0}})],Yi.prototype,"validateLocatability",void 0),Yi=h([A("esri.networks.support.UNTraceConfiguration")],Yi);const RXe=Yi;let mo=class extends kj{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?RXe.fromJSON(e):i7.fromJSON(e)}};h([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],mo.prototype,"globalId",void 0),h([f({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],mo.prototype,"title",void 0),h([f({type:i7,json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"traceConfiguration",void 0),h([ve("service","traceConfiguration")],mo.prototype,"readTraceConfiguration",null),h([f({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"creationDate",void 0),h([f({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"creator",void 0),h([f({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"description",void 0),h([f({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],mo.prototype,"minStartingPoints",void 0),h([f({json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"resultTypes",void 0),h([f({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"tags",void 0),h([f({type:gk.apiValues,json:{type:gk.jsonValues,origins:{service:{read:gk.read,write:gk.write}},read:!1}})],mo.prototype,"traceType",void 0),mo=h([A("esri.networks.support.NamedTraceConfiguration")],mo);const LXe=mo;function NXe(t){var w,O,_,x,T,E,k,M,R,D,L;const e=t==null?void 0:t.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",n="fromterminalid",s="tonetworksourceid",o="toglobalid",a="toterminalid",l="status",u="associationtype",p="iscontentvisible",m="percentalong",g="globalid";return{fromNetworkSourceId:((w=e==null?void 0:e.get(i))==null?void 0:w.name)??i,fromGlobalId:((O=e==null?void 0:e.get(r))==null?void 0:O.name)??r,fromTerminalId:((_=e==null?void 0:e.get(n))==null?void 0:_.name)??n,toNetworkSourceId:((x=e==null?void 0:e.get(s))==null?void 0:x.name)??s,toGlobalId:((T=e==null?void 0:e.get(o))==null?void 0:T.name)??o,toTerminalId:((E=e==null?void 0:e.get(a))==null?void 0:E.name)??a,status:((k=e==null?void 0:e.get(l))==null?void 0:k.name)??l,associationType:((M=e==null?void 0:e.get(u))==null?void 0:M.name)??u,isContentVisible:((R=e==null?void 0:e.get(p))==null?void 0:R.name)??p,percentAlong:((D=e==null?void 0:e.get(m))==null?void 0:D.name)??m,globalId:((L=e==null?void 0:e.get((t==null?void 0:t.globalIdField)??g))==null?void 0:L.name)??g}}function __t(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const n=e.fieldsIndex.get("assetgroup"),s=e.fieldsIndex.get("assettype");return[n==null?void 0:n.name,s==null?void 0:s.name].filter(o=>o!=null)}return[]}let Ua=class extends Ce{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var e;(e=this.associationsTable)==null||e.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const{associationsTableUrl:e}=this;if(!e)throw new G("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new t7({url:e})}return await this.associationsTable.load(),this.associationsTable}};h([f({constructOnly:!0})],Ua.prototype,"rulesTableId",void 0),h([f({constructOnly:!0})],Ua.prototype,"rulesTableUrl",void 0),h([f({constructOnly:!0})],Ua.prototype,"subnetworksTableId",void 0),h([f({constructOnly:!0})],Ua.prototype,"subnetworksTableUrl",void 0),h([f({constructOnly:!0})],Ua.prototype,"dirtyAreasLayerId",void 0),h([f({constructOnly:!0})],Ua.prototype,"dirtyAreasLayerUrl",void 0),h([f()],Ua.prototype,"associationsTable",void 0),h([f({constructOnly:!0})],Ua.prototype,"associationsTableId",void 0),h([f({constructOnly:!0})],Ua.prototype,"associationsTableUrl",void 0),Ua=h([A("esri.networks.support.NetworkSystemLayers")],Ua);const DXe=Ua;let Sb=class extends K{constructor(e){super(e),this.id=null,this.name=null}};h([f({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Sb.prototype,"id",void 0),h([f({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Sb.prototype,"name",void 0),h([f({type:Boolean,json:{write:!0}})],Sb.prototype,"isUpstreamTerminal",void 0),Sb=h([A("esri.networks.support.Terminal")],Sb);const VXe=Sb,vk=new nt({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Bp=class extends K{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};h([f({type:String,json:{write:!0}})],Bp.prototype,"defaultConfiguration",void 0),h([f({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Bp.prototype,"id",void 0),h([f({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Bp.prototype,"name",void 0),h([f({type:[VXe],json:{write:!0}})],Bp.prototype,"terminals",void 0),h([f({type:vk.apiValues,json:{type:vk.jsonValues,read:vk.read,write:vk.write}})],Bp.prototype,"traversabilityModel",void 0),Bp=h([A("esri.networks.support.TerminalConfiguration")],Bp);const Ate=Bp;let _b=class extends K{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};h([f({type:el,json:{write:!0},readOnly:!0})],_b.prototype,"line",void 0),h([f({type:y2,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],_b.prototype,"multipoint",void 0),h([f({type:da,json:{write:!0},readOnly:!0})],_b.prototype,"polygon",void 0),_b=h([A("esri.rest.networks.support.AggregatedGeometry")],_b);const FXe=_b;let xb=class extends K{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};h([f({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],xb.prototype,"functionType",void 0),h([f({type:String,json:{write:!0},readOnly:!0})],xb.prototype,"networkAttributeName",void 0),h([f({type:Number,json:{write:!0},readOnly:!0})],xb.prototype,"result",void 0),xb=h([A("esri.rest.networks.support.FunctionResult")],xb);const jXe=xb;let Xl=class extends K{constructor(e){super(e),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};h([f({type:Number,json:{write:!0}})],Xl.prototype,"assetGroupCode",void 0),h([f({type:Number,json:{write:!0}})],Xl.prototype,"assetTypeCode",void 0),h([f({type:String,json:{write:!0}})],Xl.prototype,"globalId",void 0),h([f({type:Number,json:{write:!0}})],Xl.prototype,"networkSourceId",void 0),h([f({type:Number,json:{write:!0}})],Xl.prototype,"objectId",void 0),h([f({type:Number,json:{write:!0}})],Xl.prototype,"positionFrom",void 0),h([f({type:Number,json:{write:!0}})],Xl.prototype,"positionTo",void 0),h([f({type:Number,json:{write:!0}})],Xl.prototype,"terminalId",void 0),Xl=h([A("esri.rest.networks.support.NetworkElement")],Xl);const zXe=Xl;let Uh=class extends K{constructor(e){super(e),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};h([f({type:FXe,json:{write:!0},readOnly:!0})],Uh.prototype,"aggregatedGeometry",void 0),h([f({type:[zXe],json:{write:!0},readOnly:!0})],Uh.prototype,"elements",void 0),h([f({type:[jXe],json:{write:!0},readOnly:!0})],Uh.prototype,"globalFunctionResults",void 0),h([f({type:Boolean,json:{write:!0},readOnly:!0})],Uh.prototype,"kFeaturesForKNNFound",void 0),h([f({type:Boolean,json:{write:!0},readOnly:!0})],Uh.prototype,"startingPointsIgnored",void 0),h([f({type:[String],json:{write:!0},readOnly:!0})],Uh.prototype,"warnings",void 0),Uh=h([A("esri.rest.networks.support.TraceResult")],Uh);const UXe=Uh,QXe=dt()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Vy=class extends UXe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await bt(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(Wt()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};h([f({type:String,json:{write:!0}})],Vy.prototype,"statusUrl",void 0),h([Re(QXe)],Vy.prototype,"status",void 0),h([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Vy.prototype,"submissionTime",void 0),h([f({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Vy.prototype,"lastUpdatedTime",void 0),Vy=h([A("esri.networks.support.TraceJobInfo")],Vy);const BXe=Vy;let Qh=class extends AXe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,i,r,n,s,o,a,l;return new DXe({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(a=this.sourceJSON)==null?void 0:a.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(l=this.sourceJSON)==null?void 0:l.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(i=>Ate.fromJSON(i)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(i=>i.domainNetworkName))||[]}get _utilityLayerList(){var i,r;const e=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map(n=>{var s,o;(s=n==null?void 0:n.edgeSources)==null||s.map(({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)}),(o=n==null?void 0:n.junctionSources)==null||o.map(({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)})}),e}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var u,p,m,g;let i=null,r=null;const n=e.layer;let s=null;if((n==null?void 0:n.type)==="feature"){if(s=n.layerId,s===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(s=((u=n==null?void 0:n.parent)==null?void 0:u.layerId)??null,s===null))return null;const o=e.attributes;if(o==null)return null;for(const w of Object.keys(o))w.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(w)),w.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(w));if(!this.dataElement)return null;let a=null;const l=this.dataElement.domainNetworks;for(const w of l){const O=(p=w.junctionSources)==null?void 0:p.find(_=>_.layerId===s);if(O){const _=(m=O.assetGroups)==null?void 0:m.find(x=>x.assetGroupCode===i);if(_){const x=(g=_.assetTypes)==null?void 0:g.find(T=>T.assetTypeCode===r);if(x!=null&&x.isTerminalConfigurationSupported){a=x.terminalConfigurationId;break}}}}if(a!=null){const w=this.dataElement.terminalConfigurations,O=w==null?void 0:w.find(_=>_.terminalConfigurationId===a);return O?Ate.fromJSON(O):null}return null}getTierNames(e){var r;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find(n=>n.domainNetworkName===e);return(i==null?void 0:i.tiers.map(n=>n.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(n=>{this._terminalById.set(n.id,n)})}),this._terminalById.get(e))}isUtilityLayer(e){var i,r;return"layerId"in e?this._utilityLayerList.has(e==null?void 0:e.layerId)&&(((i=e.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(((r=e.parent.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:n}]=await Promise.all([J(()=>import("./queryAssociations-9h2wQQQV.js"),__vite__mapDeps([228,229])),J(()=>import("./QueryAssociationsParameters-CJgIwXOK.js"),[])]),s=n.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,(await r(this.networkServiceUrl,s,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([J(()=>import("./synthesizeAssociationGeometries-DPDzVS0R.js"),__vite__mapDeps([230,229])),J(()=>import("./SynthesizeAssociationGeometriesParameters-B0Gnz94X.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([J(()=>import("./trace-BOQA7uY8.js"),[]),J(()=>import("./TraceParameters-Cj21zWXP.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([J(()=>import("./trace-BOQA7uY8.js"),[]),J(()=>import("./TraceParameters-Cj21zWXP.js"),[])]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await i(this.networkServiceUrl,n);return new BXe({statusUrl:s})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;await i.load();const r=(u,p)=>u?u.terminalId===1?!(p!=null&&p.terminalId)||(p==null?void 0:p.terminalId)===u.terminalId:u.terminalId===(p==null?void 0:p.terminalId):!(p!=null&&p.terminalId),n=u=>({fromRuleElement:{networkSource:u.fromNetworkSource,assetGroup:u.fromAssetGroup,assetType:u.fromAssetType,terminal:u.fromTerminal},viaRuleElement:u.viaNetworkSource?{networkSource:u.viaNetworkSource,assetGroup:u.viaAssetGroup,assetType:u.viaAssetType,terminal:u.viaTerminal}:void 0,toRuleElement:{networkSource:u.toNetworkSource,assetGroup:u.toAssetGroup,assetType:u.toAssetType,terminal:u.toTerminal}}),s=(u,p,m=!0)=>{var g,w,O;return((g=u.networkSource)==null?void 0:g.sourceId)===p.networkSourceId&&((w=u.assetGroup)==null?void 0:w.assetGroupCode)===p.assetGroupCode&&((O=u.assetType)==null?void 0:O.assetTypeCode)===p.assetTypeCode&&(!m||r(u.terminal,p))},o=(u,p)=>{const{fromRuleElement:m,toRuleElement:g}=n(u);return s(m,p.fromNetworkElement,!1)&&s(g,p.toNetworkElement,!1)},a=(u,p)=>{const{fromRuleElement:m,toRuleElement:g}=n(u);return s(m,p.fromNetworkElement)&&s(g,p.toNetworkElement)||s(m,p.toNetworkElement)&&s(g,p.fromNetworkElement)},l=(u,p)=>{const{fromRuleElement:m,toRuleElement:g,viaRuleElement:w}=n(u);return s(m,p.fromNetworkElement)&&s(w,p.toNetworkElement)||s(m,p.toNetworkElement)&&s(w,p.fromNetworkElement)||s(w,p.fromNetworkElement)&&s(g,p.toNetworkElement)||s(w,p.toNetworkElement)&&s(g,p.fromNetworkElement)};return e.associationType==="containment"?i.rulesCategorized.containment.some(u=>o(u,e)):e.associationType==="attachment"?i.rulesCategorized.attachment.some(u=>o(u,e)):i.rulesCategorized.connectivity.some(u=>u.ruleType===go.RTEdgeJunctionEdgeConnectivity?l(u,e):a(u,e))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:n,fromTerminalId:s,toNetworkSourceId:o,toGlobalId:a,toTerminalId:l,associationType:u,isContentVisible:p,percentAlong:m,globalId:g}=NXe(i);return{addFeatures:e.map(w=>{var O,_,x,T,E,k;return new Cc({attributes:{[r]:(O=w.fromNetworkElement)==null?void 0:O.networkSourceId,[n]:(_=w.fromNetworkElement)==null?void 0:_.globalId,[s]:(x=w.fromNetworkElement)==null?void 0:x.terminalId,[o]:(T=w.toNetworkElement)==null?void 0:T.networkSourceId,[a]:(E=w.toNetworkElement)==null?void 0:E.globalId,[l]:(k=w.toNetworkElement)==null?void 0:k.terminalId,[u]:IXe[w.associationType],[p]:w.isContentVisible==null?void 0:w.isContentVisible?1:0,[m]:w.percentAlong,[g]:w.globalId}})}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers;return{deleteFeatures:e.map(n=>({globalId:n.globalId})),id:r,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(e){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const i=this.sharedNamedTraceConfigurations.map(s=>s.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const o=r==null?void 0:r.find(a=>a.globalId===s.globalId);if(o){const a=o.write({},{origin:"service"});s.read(a,{origin:"service"})}}}async _createRulesTable(){var o;const e=this.networkSystemLayers.rulesTableUrl,i=new t7({url:e});await i.load();const r=(o=this.dataElement)==null?void 0:o.domainNetworks;if(!r)return null;const n=r.flatMap(a=>[...a.edgeSources||[],...a.junctionSources||[]]),s=(await qXe(i)).map(a=>this._hydrateRuleInfo(i,n,a));return new PXe({rulesLayer:i,rules:s})}_hydrateRuleInfo(e,i,r){const n=e.fieldsIndex,s=n.get("RULETYPE"),o=n.get("CREATIONDATE"),a=n.get("FROMNETWORKSOURCEID"),l=n.get("FROMASSETGROUP"),u=n.get("FROMASSETTYPE"),p=n.get("FROMTERMINALID"),m=n.get("TONETWORKSOURCEID"),g=n.get("TOASSETGROUP"),w=n.get("TOASSETTYPE"),O=n.get("TOTERMINALID"),_=n.get("VIANETWORKSOURCEID"),x=n.get("VIAASSETGROUP"),T=n.get("VIAASSETTYPE"),E=n.get("VIATERMINALID"),k=r.attributes[s.name],M=new Date(r.attributes[o.name]),R=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[u.name],terminalId:r.attributes[p.name]},{networkSourceId:r.attributes[m.name],assetGroupId:r.attributes[g.name],assetTypeId:r.attributes[w.name],terminalId:r.attributes[O.name]},{networkSourceId:r.attributes[_.name],assetGroupId:r.attributes[x.name],assetTypeId:r.attributes[T.name],terminalId:r.attributes[E.name]}];let D;(function(F){F[F.from=0]="from",F[F.to=1]="to",F[F.via=2]="via"})(D||(D={}));const L={ruleType:k,creationDate:M};for(const F of[D.from,D.to,D.via]){if(k!==go.RTEdgeJunctionEdgeConnectivity&&F===D.via)continue;const j=R[F],B=i.find(Ee=>Ee.sourceId===j.networkSourceId),W=B==null?void 0:B.assetGroups.find(Ee=>Ee.assetGroupCode===j.assetGroupId),ie=W==null?void 0:W.assetTypes.find(Ee=>Ee.assetTypeCode===j.assetTypeId),oe=this._getTerminal(ie,j);let ae="";switch(F){case D.from:ae="from";break;case D.to:ae="to";break;case D.via:ae="via"}L[`${ae}NetworkSource`]=B,L[`${ae}AssetGroup`]=W,L[`${ae}AssetType`]=ie,L[`${ae}Terminal`]=oe==null?void 0:oe.toJSON()}return L}_getTerminal(e,i){var s,o;const r=e==null?void 0:e.terminalConfigurationId,n=(s=this.terminalConfigurations)==null?void 0:s.find(a=>a.id===r);return((o=n==null?void 0:n.terminals)==null?void 0:o.find(a=>a.id===i.terminalId))??null}};async function qXe(t){const e=new Mc({where:"1=1",outFields:["*"]});return(await bye(t,e)).features}h([f({type:[LXe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Qh.prototype,"sharedNamedTraceConfigurations",void 0),h([f({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Qh.prototype,"type",void 0),h([f({readOnly:!0})],Qh.prototype,"serviceTerritoryFeatureLayerId",null),h([f({readOnly:!0})],Qh.prototype,"networkSystemLayers",null),h([f({readOnly:!0})],Qh.prototype,"terminalConfigurations",null),h([f({readOnly:!0})],Qh.prototype,"domainNetworkNames",null),Qh=h([A("esri.networks.UtilityNetwork")],Qh);const jge=Qh,GXe=Object.freeze(Object.defineProperty({__proto__:null,default:jge},Symbol.toStringTag,{value:"Module"}));let $b=class extends ft.ClonableMixin(K){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};h([f({type:String,json:{write:{isRequired:!0}}})],$b.prototype,"expression",void 0),h([f({type:["number","string"],json:{write:!0}})],$b.prototype,"returnType",void 0),h([f({type:String,json:{write:!0}})],$b.prototype,"title",void 0),$b=h([A("esri.webdoc.geotriggersInfo.ExpressionInfo")],$b);const zge=$b,bk=new nt({deviceLocation:"device-location"});let V_=class extends ft.ClonableMixin(K){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};h([f({type:zge,json:{write:!0}})],V_.prototype,"filterExpression",void 0),h([f({type:bk.apiValues,readOnly:!0,json:{type:bk.jsonValues,read:bk.read,write:bk.write}})],V_.prototype,"type",void 0),V_=h([A("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],V_);const ZXe=V_;let F_=class extends ft.ClonableMixin(K){constructor(e){super(e),this.geometry=null,this.where=null}};h([f({types:_O,json:{read:bd,write:!0}})],F_.prototype,"geometry",void 0),h([f({type:String,json:{write:!0}})],F_.prototype,"where",void 0),F_=h([A("esri.webdoc.geotriggersInfo.FeatureFilter")],F_);const HXe=F_;let Tb=class extends ft.ClonableMixin(K){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};h([f({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],Tb.prototype,"layerId",void 0),h([f({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],Tb.prototype,"layerUrl",void 0),h([Re({featureLayer:"feature-layer"},{readOnly:!0})],Tb.prototype,"type",void 0),Tb=h([A("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Tb);const WXe=Tb;let Fy=class extends ft.ClonableMixin(K){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};h([f({type:WXe,json:{write:{isRequired:!0}}})],Fy.prototype,"fenceSource",void 0),h([f({type:HXe,json:{write:!0}})],Fy.prototype,"filter",void 0),h([f({type:Number,json:{write:!0}})],Fy.prototype,"bufferDistance",void 0),h([Re({features:"features"},{readOnly:!0})],Fy.prototype,"type",void 0),Fy=h([A("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Fy);const XXe=Fy;let OM=class extends ft.ClonableMixin(K){constructor(e){super(e),this.type="fence"}};h([Re({fence:"fence"},{readOnly:!0})],OM.prototype,"type",void 0),OM=h([A("esri.webdoc.geotriggersInfo.Geotrigger")],OM);const Uge=OM;let j_=class extends ft.ClonableMixin(K){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};h([f({type:zge,json:{write:!0}})],j_.prototype,"expressionInfo",void 0),h([f({type:[String],json:{write:!0}})],j_.prototype,"requestedActions",void 0),j_=h([A("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],j_);const YXe=j_,JXe=new nt({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),KXe=new nt({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),wk=new nt({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Yl=class extends Uge{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};h([Re(JXe)],Yl.prototype,"enterExitRule",void 0),h([f({type:ZXe,json:{write:{isRequired:!0}}})],Yl.prototype,"feed",void 0),h([Re(KXe)],Yl.prototype,"feedAccuracyMode",void 0),h([f({type:wk.apiValues,json:{type:wk.jsonValues,read:wk.read,write:{writer:wk.write,isRequired:!0}}})],Yl.prototype,"fenceNotificationRule",void 0),h([f({type:XXe,json:{write:{isRequired:!0}}})],Yl.prototype,"fenceParameters",void 0),h([f({type:String,json:{write:!0}})],Yl.prototype,"name",void 0),h([f({type:YXe,json:{write:!0}})],Yl.prototype,"notificationOptions",void 0),h([Re({fence:"fence"},{readOnly:!0})],Yl.prototype,"type",void 0),Yl=h([A("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Yl);const eYe=Yl,tYe={base:Uge,key:"type",typeMap:{fence:eYe}};let SM=class extends ft.ClonableMixin(K){constructor(e){super(e),this.geotriggers=null}};h([f({types:[tYe],json:{write:{isRequired:!0}}})],SM.prototype,"geotriggers",void 0),SM=h([A("esri.webdoc.GeotriggersInfo")],SM);const iYe=SM;let Eb=class extends ft.ClonableMixin(K){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:n}=i;if(n)return new Hs({id:n,portal:r==null?void 0:r.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}};h([f({type:Hs,json:{write:{isRequired:!0}}})],Eb.prototype,"portalItem",void 0),h([ve("portalItem",["itemId"])],Eb.prototype,"readPortalItem",null),h([we("portalItem",{itemId:{type:String}})],Eb.prototype,"writePortalItem",null),Eb=h([A("esri.webdoc.ips.PositioningService")],Eb);const rYe=Eb;let _M=class extends ft.ClonableMixin(K){constructor(e){super(e),this.positioningService=null}};h([f({type:rYe,json:{write:{isRequired:!0}}})],_M.prototype,"positioningService",void 0),_M=h([A("esri.webdoc.IPSInfo")],_M);const nYe=_M,sYe={currentVersion:Ime,createInitialViewProperties:()=>new dI,parseVersion:dw.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},oYe=Te.ofType(jge);let qp=class extends uBe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return sYe}loadAll(){return ZP(this,e=>{var i,r;e(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new G("webmap:empty-resource","Expected a JSON resource but got nothing")}};qp.VERSION=Ime,h([f({type:iYe,json:{write:!0}})],qp.prototype,"geotriggersInfo",void 0),h([f({type:nYe,json:{write:!0,name:"mapIPSInfo"}})],qp.prototype,"ipsInfo",void 0),h([f({json:{write:!0}})],qp.prototype,"presentation",void 0),h([f({type:oYe,json:{read:!0,write:!0}})],qp.prototype,"utilityNetworks",void 0),qp=h([A("esri.WebMap")],qp);const aYe=qp;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.11 */function z_(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const e=lYe(t);if(!e){const i=qge(t.referenceElement);if(!i){Bge(t);return}return Pte(i,t,!0),i}return uYe(e,t.el.parent)||(t.el.parent=e,e.tagName.toLowerCase()==="arcgis-expand"?cYe(e,t):e.tagName.toLowerCase()==="arcgis-placement"?hYe(e,t):Pte(e,t,!1)),e}function lYe({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(Ite.has(e.tagName.toLowerCase()))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&Ite.has(e.ownedBy.tagName.toLowerCase()))return e.ownedBy}}const Ite=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function uYe(t,e){if(t!==e)return!1;const i=t.tagName.toLowerCase();return i==="arcgis-expand"||i==="arcgis-placement"}function LR(t,e,i="arcgisReady"){var n;const r=t;if(typeof((n=r.view)==null?void 0:n.ready)=="boolean")e(r.view);else{let s=function(o){o.target===t&&(LR(t,e,i),t.removeEventListener(i,s))};t.addEventListener(i,s)}}const cYe=(t,e)=>LR(t,i=>{var r;e.el.childElem&&t.content!=null&&t.content.append(e.el.childElem),t.expandIcon=e.icon||((r=e.widget)==null?void 0:r.icon)||t.expandIcon,e.position=t.position,e.el.view=i}),hYe=(t,e)=>LR(t,i=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=t.position,e.el.view=i}),Pte=(t,e,i)=>LR(t,r=>{i?Bge(e):e.el.childElem&&dYe(t,e),e.el.view=r},"arcgisViewReadyChange");function dYe(t,e){var a;const i=e.el.childElem??e.el,r=[...t.children],n={};for(const l of r){const u=l.getAttribute("position")??"manual";n[u]??(n[u]=[]),n[u].push({child:l,position:u,index:r.indexOf(l)})}const s=(a=n[e.position??"manual"])==null?void 0:a.findIndex(({child:l})=>l===e.el),o=t.view.ui;o.remove(i),o.add(i,{position:e.position,index:s})}function pYe(t){let e=!1,i=t.el.view;const r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t.el),"view")??{get:()=>i,set:n=>i=n};Object.defineProperty(t.el,"view",{get:r.get.bind(t.el),set:n=>{r.set.call(t.el,n),n&&!e&&(e=!0,t.arcgisReady.emit())},configurable:!0,enumerable:!0}),i&&(t.el.view=i)}function fYe(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function Rte(t,e){return Qge(e==null?void 0:e.center,t)}function Qge(t,e){if(typeof e=="string")return Qge(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||n!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}async function mYe(t,e){e!=null&&(typeof e=="string"?t.el.view=await yYe(e):t.widget&&(t.el.view=e.view))}async function yYe(t){const e=qge(t);return await new Promise(i=>{var r;typeof((r=e==null?void 0:e.view)==null?void 0:r.ready)=="boolean"?i(e.view):e&&e.addEventListener("arcgisViewReadyChange",()=>i(e.view),{once:!0})})}function Bge(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function qge(t){return typeof t!="string"?t??void 0:(t.includes("#")||t.includes(".")||t.includes("[")?void 0:document.querySelector(`#${t}`))??document.querySelector(t)??void 0}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.11 */const gYe=Ln`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,vYe=_oe(aYe),bYe=_oe($7e);var Mf;let wYe=(Mf=class extends gn{constructor(){super(...arguments),this._center=void 0,this._extent=void 0,this._itemId=void 0,this._scale=void 0,this._viewpoint=void 0,this._zoom=void 0,this._map=vYe(this,{editConstructorProperties:this._editMapProperties}),this.view=bYe(this,{editConstructorProperties:this._editViewProperties}),this.allLayerViews=this.view.allLayerViews,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.arcgisViewChange=xo(),this.arcgisViewClick=Zr(()=>this.view,"click"),this.arcgisViewDoubleClick=Zr(()=>this.view,"double-click"),this.arcgisViewDrag=Zr(()=>this.view,"drag"),this.arcgisViewHold=Zr(()=>this.view,"hold"),this.arcgisViewImmediateClick=Zr(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=Zr(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=Zr(()=>this.view,"key-down"),this.arcgisViewKeyUp=Zr(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=Zr(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=Zr(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=Zr(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=Zr(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=Zr(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=Zr(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=Zr(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=Zr(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=Zr(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=xo()}get center(){return this.view.center??this._center}set center(e){const i=Rte(e,this.ready?this.view:void 0);i&&(this.ready&&(this.view.center=i),this._center=i)}get extent(){return this.view.extent??this._extent}set extent(e){var i;this.view.ready||(this._extent=e),e&&!((i=this.extent)!=null&&i.equals(e))&&(this.view.extent=e)}get gamepad(){return this.ready?this.view.input.gamepad:void 0}get interacting(){return this.view.interacting}get itemId(){var e;return((e=this._map.portalItem)==null?void 0:e.id)??this._itemId}set itemId(e){this._itemId=e,this.ready&&yg.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error)}get navigating(){return this.view.navigating}get scale(){return this.view.scale??this._scale}set scale(e){this.ready&&(this.view.scale=e),this._scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint??this._viewpoint}set viewpoint(e){this.ready&&fYe(this.viewpoint,e)&&(this.view.viewpoint=e),this._viewpoint=e}get zoom(){return this.view.zoom??this._zoom}set zoom(e){this.ready&&(this.view.zoom=e),this._zoom=e}async addLayer(e,i){var r;(r=this.map)==null||r.add(e,i)}async addLayers(e,i){var r;(r=this.map)==null||r.addMany(e,i)}async addTable(e){var i;(i=this.map)==null||i.tables.add(e)}async addTables(e,i){var r;(r=this.map)==null||r.tables.addMany(e,i)}async closePopup(){var e;(e=this.view)==null||e.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){var r;return await((r=this.view)==null?void 0:r.goTo(e,i))}async hitTest(e,i){var r;return await((r=this.view)==null?void 0:r.hitTest(e,i))}async openPopup(e){var i;await((i=this.view)==null?void 0:i.openPopup(e))}async takeScreenshot(e){var i;return await((i=this.view)==null?void 0:i.takeScreenshot(e))}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){var e;(e=this.view)==null||e.tryFatalErrorRecovery()}async whenLayerView(e){var i;return await((i=this.view)==null?void 0:i.whenLayerView(e))}load(){var e;this.el.childElem=document.createElement("div"),this.el.append(this.el.childElem),(e=this.view).container??(e.container=this.el.childElem)}loaded(){this.manager.onLifecycle(()=>[Oe(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),Oe(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}_editMapProperties(e){this.map&&(this._map=this.map),this.itemId&&(e.portalItem={id:this.itemId});const{basemap:i,...r}=e;i||(e=r);const{ground:n,...s}=e;return n||(e=s),e}async _editViewProperties(e){await this.manager.use(this._map),this.view.ui||(e.ui={components:["attribution"]}),e.map??(e.map=this._map);const i=Rte(this.center,void 0);return i&&(e.center=i),this.viewpoint&&(e.viewpoint=this.viewpoint),this.scale!==void 0&&(e.scale=this.scale),this.extent&&(e.extent=this.extent),this.zoom!==void 0&&(e.zoom=this.zoom),e}},Mf.properties={_map:16,view:32,allLayerViews:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:7,viewpoint:0,zoom:9},Mf.shadowRootOptions=Lf,Mf.styles=gYe,Mf);fO("arcgis-map",wYe);var OI;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(OI||(OI={}));function OYe(t,e){return{type:vd(e),value:t,unit:e}}function q_t(t){return{value:t}}function SYe(t,e){return{type:vd(e),value:t,unit:e}}function _Ye(t,e){return{type:vd(e),value:t,unit:e}}function NR(t,e,i="arithmetic"){return{type:vd(e),value:t,unit:e,rotationType:i}}function G_t(t,e){const i=xYe(t,e);return t.type==="angle"?NR(i,e,t.rotationType):OYe(i,e)}function xYe(t,e){return Dt(t.value,t.unit,e)}function Z_t(t,e){return t==null?e:e==null||t.value>Dt(e.value,e.unit,t.unit)?t:e}function H_t(t,e){return t==null?null:{...t,value:t.value*e}}function $Ye(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const W_t=SYe(0,"meters"),X_t=_Ye(0,"square-meters");NR(0,"radians");const Y_t=NR(0,"degrees"),J_t=NR(0,"degrees","geographic");function r7(t,e,i){return t.units[e][i]}function FO(t,e,i,r=2,n="abbr"){return`${pa(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:e>0?"never":"exceptZero"})} ${r7(t,i,n)}`}function DR(t,e,i,r=2,n="abbr"){return`${pa(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${r7(t,i,n)}`}function K_t(t,e,i,r=2,n="abbr"){const s=Lle(e,i);return FO(t,Dt(e,i,s),s,r,n)}function ext(t,e,i,r=2,n="abbr"){const s=Lle(e,i);return DR(t,Dt(e,i,s),s,r,n)}function txt(t,e,i,r=2,n="abbr"){const s=Nle(e,i);return FO(t,Dt(e,i,s),s,r,n)}function ixt(t,e,i,r=2,n="abbr"){const s=Nle(e,i);return DR(t,Dt(e,i,s),s,r,n)}function rxt(t,e,i,r=2,n="abbr"){const s=Dle(e,i);return FO(t,Dt(e,i,s),s,r,n)}function nxt(t,e,i,r=2,n="abbr"){const s=Dle(e,i);return DR(t,Dt(e,i,s),s,r,n)}function sxt(t,e,i,r=2,n="abbr"){const s=Vle(e,i);return FO(t,Dt(e,i,s),s,r,n)}function oxt(t,e,i,r=2,n="abbr"){const s=Vle(e,i);return DR(t,Dt(e,i,s),s,r,n)}function axt(t,e,i,r=2,n="abbr"){const s=$Ae(e,i);return FO(t,Dt(e,i,s),s,r,n)}function lxt(t,e,i,r=2,n="abbr"){const s=TAe(e,i);return FO(t,Dt(e,i,s),s,r,n)}const TYe=(t,e)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:e,minimumFractionDigits:e,signDisplay:t>0?"never":"exceptZero"});function uxt(t,e,i,r,n,s=Qae,o=!0){let a=s.normalize($Ye(Dt(t,e,"degrees"),i,r),0,o);const l=TYe(a,n??2);return a=EYe(a,l),pa(a,l)}const Lte=new Map;function EYe(t,e){const i=JSON.stringify(e);let r=Lte.get(i);return r||(r=new Intl.NumberFormat("en-US",e),Lte.set(i,r)),/^[-+]?360\.?0*?$/.test(r.format(t))?0:t}const Nte=["B","kB","MB","GB","TB"];function cxt(t,e){let i=(e=Math.round(e))===0?0:Math.floor(Math.log(e)/Math.log(OI.KILOBYTES));i=Po(i,0,Nte.length-1);const r=pa(e/OI.KILOBYTES**i,{maximumFractionDigits:2});return yO(t.units.bytes[Nte[i]],{fileSize:r})}const _$=dt()({AIX:"aix",EPS:"eps",GIF:"gif",JPG:"jpg",PDF:"pdf",PNG32:"png32",PNG8:"png8",SVG:"svg",SVGZ:"svgz",TIFF:"tiff"},{ignoreUnknown:!1});let Jl=class extends Ce{constructor(e){super(e),this.state="pending",this.url=""}initialize(){this.addHandles(Oe(()=>[this.extension,this.name],()=>this._setFormattedFileName(),It))}_setFormattedFileName(){this.name&&this.extension&&(this.formattedName=this.count?`${this.name}(${this.count}).${this.extension}`:`${this.name}.${this.extension}`)}};h([f()],Jl.prototype,"count",void 0),h([f()],Jl.prototype,"error",void 0),h([f()],Jl.prototype,"extension",void 0),h([f()],Jl.prototype,"formattedName",void 0),h([f()],Jl.prototype,"name",void 0),h([f()],Jl.prototype,"portalItem",void 0),h([f()],Jl.prototype,"state",void 0),h([f()],Jl.prototype,"url",void 0),Jl=h([A("esri.widgets.Print.FileLink")],Jl);const Gge=Jl;function kYe(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?Zge(t.view.floors,e.floorInfo.floorField):null}function Dte(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?Zge(t,e.floorInfo.floorField):null}function Zge(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}var c6;let ec=c6=class extends Ce{constructor(t){super(t),this.outSpatialReference=null,this.processExtent=null,this.processSpatialReference=null,this.returnColumnName=!1,this.returnFeatureCollection=!1,this.returnM=!1,this.returnZ=!1}static from(t){return vO(c6,t)}};h([f({type:Je})],ec.prototype,"outSpatialReference",void 0),h([f({type:oi})],ec.prototype,"processExtent",void 0),h([f({type:Je})],ec.prototype,"processSpatialReference",void 0),h([f({nonNullable:!0})],ec.prototype,"returnColumnName",void 0),h([f({nonNullable:!0})],ec.prototype,"returnFeatureCollection",void 0),h([f({nonNullable:!0})],ec.prototype,"returnM",void 0),h([f({nonNullable:!0})],ec.prototype,"returnZ",void 0),ec=c6=h([A("esri.rest.geoprocessor.GPOptions")],ec);const n7=ec;let Kl=class extends K{constructor(){super(...arguments),this.extent=null,this.height=null,this.href=null,this.opacity=1,this.rotation=0,this.scale=null,this.visible=!0,this.width=null}};h([f({type:oi})],Kl.prototype,"extent",void 0),h([f()],Kl.prototype,"height",void 0),h([f()],Kl.prototype,"href",void 0),h([f()],Kl.prototype,"opacity",void 0),h([f()],Kl.prototype,"rotation",void 0),h([f()],Kl.prototype,"scale",void 0),h([f()],Kl.prototype,"visible",void 0),h([f()],Kl.prototype,"width",void 0),Kl=h([A("esri.layers.support.MapImage")],Kl);const CYe=Kl,Hge={esriCentimeters:"centimeters",esriDecimalDegrees:"decimal-degrees",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriPoints:"points",esriUnknownUnits:"unknown",esriYards:"yards"},pxt=dt()(Hge),MYe=dt()({...Hge,esriIntFeet:"international-feet",esriIntInches:"international-inches",esriIntMiles:"international-miles",esriIntNauticalMiles:"international-nautical-miles",esriIntYards:"international-yards"}),AYe=dt()({esriAcres:"international-acres",esriAcresUS:"us-acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-international-feet",esriSquareFeetUS:"square-us-feet",esriSquareInches:"square-international-inches",esriSquareInchesUS:"square-us-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-international-miles",esriSquareMilesUS:"square-us-miles",esriSquareMillimeters:"square-millimeters",esriSquareYards:"square-international-yards",esriSquareYardsUS:"square-us-yards",esriUnknownAreaUnits:"unknown"}),fxt=dt()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards"}),mxt=dt()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards",esriNAUDays:"days",esriNAUHours:"hours",esriNAUMinutes:"minutes",esriNAUSeconds:"seconds",esriNAUKilometersPerHour:"kilometers-per-hour",esriNAUMilesPerHour:"miles-per-hour",esriNAUUnknown:"unknown"}),yxt=dt()({esriDOTComplete:"complete",esriDOTCompleteNoEvents:"complete-no-events",esriDOTFeatureSets:"featuresets",esriDOTInstructionsOnly:"instructions-only",esriDOTStandard:"standard",esriDOTSummaryOnly:"summary-only"}),gxt=dt()({esriNAOutputLineNone:"none",esriNAOutputLineStraight:"straight",esriNAOutputLineTrueShape:"true-shape",esriNAOutputLineTrueShapeWithMeasure:"true-shape-with-measure"});dt()({esriNAOutputPolygonNone:"none",esriNAOutputPolygonSimplified:"simplified",esriNAOutputPolygonDetailed:"detailed"});const vxt=dt()({esriNFSBAllowBacktrack:"allow-backtrack",esriNFSBAtDeadEndsOnly:"at-dead-ends-only",esriNFSBNoBacktrack:"no-backtrack",esriNFSBAtDeadEndsAndIntersections:"at-dead-ends-and-intersections"});dt()({esriNATravelDirectionFromFacility:"from-facility",esriNATravelDirectionToFacility:"to-facility"});dt()({esriNATimeOfDayNotUsed:"not-used",esriNATimeOfDayUseAsStartTime:"start",esriNATimeOfDayUseAsEndTime:"end"});const bxt=dt()({AUTOMOBILE:"automobile",TRUCK:"truck",WALK:"walk",OTHER:"other"}),wxt=dt()({0:"either-side-of-vehicle",1:"right-side-of-vehicle",2:"left-side-of-vehicle",3:"no-u-turn"},{useNumericKeys:!0}),Oxt=dt()({0:"stop",1:"waypoint",2:"break"},{useNumericKeys:!0}),Sxt=dt()({0:"ok",1:"not-located",2:"network-element-not-located",3:"element-not-traversable",4:"invalid-field-values",5:"not-reached",6:"time-window-violation",7:"not-located-on-closest"},{useNumericKeys:!0}),_xt=dt()({1:"right",2:"left"},{useNumericKeys:!0}),xxt=dt()({0:"restriction",1:"scaled-cost",2:"added-cost"},{useNumericKeys:!0}),$xt=dt()({0:"permit",1:"restrict"},{useNumericKeys:!0}),Txt=dt()({1:"header",50:"arrive",51:"depart",52:"straight",100:"on-ferry",101:"off-ferry",102:"central-fork",103:"roundabout",104:"u-turn",150:"door",151:"stairs",152:"elevator",153:"escalator",154:"pedestrian-ramp",200:"left-fork",201:"left-ramp",202:"clockwise-roundabout",203:"left-handed-u-turn",204:"bear-left",205:"left-turn",206:"sharp-left",207:"left-turn-and-immediate-left-turn",208:"left-turn-and-immediate-right-turn",300:"right-fork",301:"right-ramp",302:"counter-clockwise-roundabout",303:"right-handed-u-turn",304:"bear-right",305:"right-turn",306:"sharp-right",307:"right-turn-and-immediate-left-turn",308:"right-turn-and-immediate-right-turn",400:"up-elevator",401:"up-escalator",402:"up-stairs",500:"down-elevator",501:"down-escalator",502:"down-stairs",1e3:"general-event",1001:"landmark",1002:"time-zone-change",1003:"traffic-event",1004:"scaled-cost-barrier-event",1005:"boundary-crossing",1006:"restriction-violation",1007:"lane"},{useNumericKeys:!0}),Ext=dt()({0:"unknown",1:"segment",2:"maneuver-segment",3:"restriction-violation",4:"scaled-cost-barrier",5:"heavy-traffic",6:"slow-traffic",7:"moderate-traffic"},{useNumericKeys:!0}),kxt=dt()({"NA Campus":"campus","NA Desktop":"desktop","NA Navigation":"navigation"}),Cxt=dt()({Kilometers:"kilometers",Miles:"miles",Meters:"meters"},{ignoreUnknown:!1}),Mxt=dt()({Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),Axt=dt()({Kilometers:"kilometers",Miles:"miles",Meters:"meters",Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),Ixt=dt()({"Any Hazmat Prohibited":"any-hazmat-prohibited","Avoid Carpool Roads":"avoid-carpool-roads","Avoid Express Lanes":"avoid-express-lanes","Avoid Ferries":"avoid-ferries","Avoid Gates":"avoid-gates","Avoid Limited Access Roads":"avoid-limited-access-roads","Avoid Private Roads":"avoid-private-roads","Avoid Roads Unsuitable for Pedestrians":"avoid-roads-unsuitable-for-pedestrians","Avoid Stairways":"avoid-stairways","Avoid Toll Roads":"avoid-toll-roads","Avoid Toll Roads for Trucks":"avoid-toll-roads-for-trucks","Avoid Truck Restricted Roads":"avoid-truck-restricted-roads","Avoid Unpaved Roads":"avoid-unpaved-roads","Axle Count Restriction":"axle-count-restriction","Driving a Bus":"driving-a-bus","Driving a Taxi":"driving-a-taxi","Driving a Truck":"driving-a-truck","Driving an Automobile":"driving-an-automobile","Driving an Emergency Vehicle":"driving-an-emergency-vehicle","Height Restriction":"height-restriction","Kingpin to Rear Axle Length Restriction":"kingpin-to-rear-axle-length-restriction","Length Restriction":"length-restriction","Preferred for Pedestrians":"preferred-for-pedestrians","Riding a Motorcycle":"riding-a-motorcycle","Roads Under Construction Prohibited":"roads-under-construction-prohibited","Semi or Tractor with One or More Trailers Prohibited":"semi-or-tractor-with-one-or-more-trailers-prohibited","Single Axle Vehicles Prohibited":"single-axle-vehicles-prohibited","Tandem Axle Vehicles Prohibited":"tandem-axle-vehicles-prohibited","Through Traffic Prohibited":"through-traffic-prohibited","Truck with Trailers Restriction":"truck-with-trailers-restriction","Use Preferred Hazmat Routes":"use-preferred-hazmat-routes","Use Preferred Truck Routes":"use-preferred-truck-routes",Walking:"walking","Weight Restriction":"weight-restriction"},{ignoreUnknown:!1}),Pxt=dt()({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Rxt=dt()({esriGeometryPoint:"point",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"envelope",esriGeometryMultipoint:"multipoint"}),Lxt=dt()({esriNAUTCost:"cost",esriNAUTDescriptor:"descriptor",esriNAUTRestriction:"restriction",esriNAUTHierarchy:"hierarchy"}),Nxt=dt()({esriDSTAltName:"alt-name",esriDSTArrive:"arrive",esriDSTBranch:"branch",esriDSTCrossStreet:"cross-street",esriDSTCumulativeLength:"cumulative-length",esriDSTDepart:"depart",esriDSTEstimatedArrivalTime:"estimated-arrival-time",esriDSTExit:"exit",esriDSTGeneral:"general",esriDSTLength:"length",esriDSTServiceTime:"service-time",esriDSTStreetName:"street-name",esriDSTSummary:"summary",esriDSTTime:"time",esriDSTTimeWindow:"time-window",esriDSTToward:"toward",esriDSTViolationTime:"violation-time",esriDSTWaitTime:"wait-time"});let U_=class extends K{constructor(e){super(e),this.area=0,this.units=null}};h([f({json:{write:!0}})],U_.prototype,"area",void 0),h([Re(AYe)],U_.prototype,"units",void 0),U_=h([A("esri.rest.support.ArealUnit")],U_);const IYe=U_;let Q_=class extends K{constructor(e){super(e),this.itemId=null,this.url=null}};h([f({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],Q_.prototype,"itemId",void 0),h([f({type:String,json:{write:!0}})],Q_.prototype,"url",void 0),Q_=h([A("esri.rest.support.DataFile")],Q_);const mD=Q_;let B_=class extends K{constructor(e){super(e),this.distance=0,this.units=null}};h([f({json:{write:!0}})],B_.prototype,"distance",void 0),h([Re(MYe)],B_.prototype,"units",void 0),B_=h([A("esri.rest.support.LinearUnit")],B_);const PYe=B_,fs="multi-value-",s7=new nt({GPArealUnit:"areal-unit",GPBoolean:"boolean",GPComposite:"composite",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",Field:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string",GPValueTable:"value-table","GPMultiValue:GPArealUnit":`${fs}areal-unit`,"GPMultiValue:GPBoolean":`${fs}boolean`,"GPMultiValue:GPComposite":`${fs}composite`,"GPMultiValue:GPDataFile":`${fs}data-file`,"GPMultiValue:GPDate":`${fs}date`,"GPMultiValue:GPDouble":`${fs}double`,"GPMultiValue:GPFeatureRecordSetLayer":`${fs}feature-record-set-layer`,"GPMultiValue:Field":`${fs}field`,"GPMultiValue:GPLinearUnit":`${fs}linear-unit`,"GPMultiValue:GPLong":`${fs}long`,"GPMultiValue:GPRasterData":`${fs}raster-data`,"GPMultiValue:GPRasterDataLayer":`${fs}raster-data-layer`,"GPMultiValue:GPRecordSet":`${fs}record-set`,"GPMultiValue:GPString":`${fs}string`});let kb=class extends K{constructor(e){super(e),this.dataType=null,this.paramName=null,this.value=null}};h([Re(s7,{ignoreUnknown:!1})],kb.prototype,"dataType",void 0),h([f()],kb.prototype,"paramName",void 0),h([f()],kb.prototype,"value",void 0),kb=h([A("esri.rest.support.ParameterValue")],kb);const RYe=kb;let Cb=class extends K{constructor(e){super(e),this.format=null,this.itemId=null,this.url=null}};h([f()],Cb.prototype,"format",void 0),h([f({json:{read:{source:"itemID"},write:{target:"itemID"}}})],Cb.prototype,"itemId",void 0),h([f()],Cb.prototype,"url",void 0),Cb=h([A("esri.rest.support.RasterData")],Cb);const LYe=Cb;async function Wge(t,e,i,r,n){const s={},o={},a=[];return NYe(r,a,s),Hpe(a).then(l=>{const{outSpatialReference:u,processExtent:p,processSpatialReference:m,returnColumnName:g,returnFeatureCollection:w,returnM:O,returnZ:_}=i,{path:x}=af(t);for(const D in s){const[L,F]=s[D];o[D]=l.slice(L,F)}const T=u?u.wkid||u:null,E=m?m.wkid||m:null,k=e==="execute"?{returnColumnName:g||void 0,returnFeatureCollection:w||void 0,returnM:O||void 0,returnZ:_||void 0}:null,M=SI({...p?{context:{extent:p,outSR:T,processSR:E}}:{"env:outSR":T,"env:processSR":E},...r,...k,f:"json"},null,o),R={...n,query:M};return bt(`${x}/${e}`,R)})}function NYe(t,e,i){for(const r in t){const n=t[r];if(n&&typeof n=="object"&&n instanceof g$){const{features:s}=n;i[r]=[e.length,e.length+s.length],s.forEach(o=>{e.push(o.geometry)})}}}async function h6(t,e){switch(t){case"areal-unit":return IYe.fromJSON(e);case"boolean":case"double":case"long":case"string":case"value-table":return e;case"date":return new Date(e);case"data-file":return mD.fromJSON(e);case"linear-unit":return PYe.fromJSON(e);case"feature-record-set-layer":if("url"in e)return mD.fromJSON(e);if("layerDefinition"in e){const i=new(await J(async()=>{const{default:s}=await Promise.resolve().then(()=>TXe);return{default:s}},void 0)).default,{layerDefinition:r,featureSet:n}=e;return i.read({layerDefinition:r,featureSet:n},{origin:"portal-item"}),i.spatialReference=Je.fromJSON(n.spatialReference??r.spatialReference??r.extent.spatialReference),i}return g$.fromJSON(e);case"record-set":return"url"in e?mD.fromJSON(e):g$.fromJSON(e);case"raster-data":case"raster-data-layer":return"mapImage"in e?CYe.fromJSON(e.mapImage):LYe.fromJSON(e);case"field":return cR.fromJSON(e)}}function DYe(t){return t.startsWith(fs)}function VYe(t){return t.replace(fs,"")}async function FYe(t,e){const i=VYe(t),r=i==="composite"?e.map(n=>h6(s7.fromJSON(n.dataType),n.value)):e.map(n=>h6(i,n));return Promise.all(r)}async function d6(t){const e=s7.fromJSON(t.dataType),{paramName:i}=t,r=DYe(e)?await FYe(e,t.value):await h6(e,t.value);return new RYe({dataType:e,paramName:i,value:r})}function SI(t,e,i){for(const r in t){const n=t[r];Array.isArray(n)?t[r]=JSON.stringify(n.map(s=>SI({item:s},!0).item)):n instanceof Date&&(t[r]=n.getTime())}return qpe(t,e,i)}const Vte=new nt({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let q_=class extends K{constructor(e){super(e),this.description=null,this.type=null}};h([f({type:String,json:{write:!0}})],q_.prototype,"description",void 0),h([f({type:String,json:{read:Vte.read,write:Vte.write}})],q_.prototype,"type",void 0),q_=h([A("esri.rest.support.GPMessage")],q_);const Xge=q_;async function Yge(t,e,i,r){return i=n7.from(i||{}),Wge(t,"execute",i,e??{},r).then(async({data:n})=>{var s,o;return{results:await Promise.all(((s=n.results)==null?void 0:s.map(d6))??[]),messages:((o=n.messages)==null?void 0:o.map(a=>Xge.fromJSON(a)))??[]}})}var xM;const jYe=dt()({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"},{ignoreUnknown:!1}),yD=1e3;let Bh=xM=class extends K{constructor(t){super(t),this.jobId=null,this.jobStatus=null,this.messages=null,this.progress=null,this.requestOptions=null,this.sourceUrl=null,this._cancelJobTimer=void 0,this._jobCompletionTimer=void 0}async cancelJob(t){const{jobId:e,sourceUrl:i}=this,{path:r}=af(i),n={...this.requestOptions,...t,query:{f:"json"}},s=`${r}/jobs/${e}/cancel`,{data:o}=await bt(s,n),{messages:a,jobStatus:l,progress:u}=xM.fromJSON(o);return this.set({messages:a,jobStatus:l,progress:u}),l==="job-cancelled"?this:new Promise((p,m)=>{Co(n.signal,()=>{this.clearCancelJobTimer(),m(Wt())}),this.clearCancelJobTimer();const g=()=>{this._cancelJobTimer||m(Wt()),this.checkJobStatus(t).then(({jobStatus:w})=>{switch(w){case"job-cancelling":default:this._cancelJobTimer=setTimeout(g,yD);break;case"job-deleted":case"job-deleting":case"job-executing":case"job-failed":case"job-new":case"job-submitted":case"job-succeeded":case"job-timed-out":case"job-waiting":m(this);break;case"job-cancelled":p(this)}})};this._cancelJobTimer=setTimeout(g,yD)})}destroy(){clearInterval(this._cancelJobTimer),clearInterval(this._jobCompletionTimer)}async checkJobStatus(t){const{path:e}=af(this.sourceUrl),i={...this.requestOptions,...t,query:{f:"json"}},r=`${e}/jobs/${this.jobId}`,{data:n}=await bt(r,i),{messages:s,jobStatus:o,progress:a}=xM.fromJSON(n);return this.set({messages:s,jobStatus:o,progress:a}),this}async fetchResultData(t,e,i){e=n7.from(e||{});const{returnColumnName:r,returnFeatureCollection:n,returnM:s,returnZ:o,outSpatialReference:a}=e,{path:l}=af(this.sourceUrl),u=SI({returnColumnName:r||null,returnFeatureCollection:n||null,returnM:s||null,returnZ:o||null,outSR:a,returnType:"data",f:"json"},null),p={...this.requestOptions,...i,query:u},m=`${l}/jobs/${this.jobId}/results/${t}`,{data:g}=await bt(m,p);return d6(g)}async fetchResultImage(t,e,i){const{path:r}=af(this.sourceUrl),n={...e.toJSON(),f:"json"},s=SI(n),o={...this.requestOptions,...i,query:s},a=`${r}/jobs/${this.jobId}/results/${t}`,{data:l}=await bt(a,o);return d6(l)}async fetchResultMapImageLayer(){const{path:t}=af(this.sourceUrl),e=t.indexOf("/GPServer/"),i=`${t.slice(0,Math.max(0,e))}/MapServer/jobs/${this.jobId}`;return new(await J(async()=>{const{default:r}=await import("./MapImageLayer-2rm6uE78.js").then(n=>n.M);return{default:r}},__vite__mapDeps([231,227,55,53,54,12,13,11,132,15]))).default({url:i})}async waitForJobCompletion(t={}){const{interval:e=yD,signal:i,statusCallback:r}=t;return new Promise((n,s)=>{Co(i,()=>{this.clearJobCompletionTimer(),s(Wt())}),this.clearJobCompletionTimer();const o=()=>{this._jobCompletionTimer||s(Wt()),this.checkJobStatus().then(({jobStatus:a})=>{switch(a){case"job-succeeded":n(this);break;case"job-executing":case"job-new":case"job-submitted":case"job-waiting":r&&r(this),this._jobCompletionTimer=setTimeout(o,e);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-failed":case"job-timed-out":s(this);break;default:this._jobCompletionTimer=setTimeout(o,e)}}).catch(a=>{s(a)})};this._jobCompletionTimer=setTimeout(o,e)})}clearCancelJobTimer(){clearTimeout(this._cancelJobTimer),this._cancelJobTimer=void 0}clearJobCompletionTimer(){clearTimeout(this._jobCompletionTimer),this._jobCompletionTimer=void 0}};h([f()],Bh.prototype,"jobId",void 0),h([Re(jYe,{ignoreUnknown:!1})],Bh.prototype,"jobStatus",void 0),h([f({type:[Xge]})],Bh.prototype,"messages",void 0),h([f()],Bh.prototype,"progress",void 0),h([f()],Bh.prototype,"requestOptions",void 0),h([f({json:{write:!0}})],Bh.prototype,"sourceUrl",void 0),Bh=xM=h([A("esri.rest.support.JobInfo")],Bh);const zYe=Bh;async function Jge(t,e,i,r){return i=n7.from(i||{}),Wge(t,"submitJob",i,e??{},r).then(({data:n})=>{const s=zYe.fromJSON(n);return s.sourceUrl=t,s})}const _I=new nt({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"}),Mb=_I.fromJSON.bind(_I),UYe=_I.toJSON.bind(_I);function Qxt(t){return t&&typeof t.highlight=="function"}function QYe(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function BYe(t,e){if(e&&t){const{minScale:i,maxScale:r}=t;if(qYe(i,r))return QYe(e,i,r)}return!0}function qYe(t,e){return t!=null&&t>0||e!=null&&e>0}function Bxt(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}function GYe(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}}function ZYe(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}}function Fte(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}}function HYe(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}}function WYe(t,e=15){const i=t.canvas.width,r=t.canvas.height,n=t.getImageData(0,0,i,r).data;let s,o,a,l,u,p;e:for(o=r;o--;)for(s=i;s--;)if(n[4*(i*o+s)+3]>e){p=o;break e}if(!p)return null;e:for(s=i;s--;)for(o=p+1;o--;)if(n[4*(i*o+s)+3]>e){u=s;break e}e:for(s=0;s<=u;++s)for(o=p+1;o--;)if(n[4*(i*o+s)+3]>e){a=s;break e}e:for(o=0;o<=p;++o)for(s=a;s<=u;++s)if(n[4*(i*o+s)+3]>e){l=o;break e}return{x:a,y:l,width:u-a,height:p-l}}function Kge(t){var i;if(!t.attributionVisible)return;let e;return typeof t.originOf=="function"&&t.originOf("copyright")==="user"&&(e=t.copyright),e||!t.hasAttributionData?(e??(e=(i=t.portalItem)==null?void 0:i.accessInformation),e??(e=t.copyright),e??void 0):void 0}function XYe(t,e){var n,s;const i=((n=e.color)==null?void 0:n.clone())??new xe([0,255,255]),r=((s=e.haloColor)==null?void 0:s.clone())??i.clone();switch(t){case"envelope":case"polygon":return i.a*=e.fillOpacity??.25,new Nc({color:i,outline:new es({color:r}),style:"solid"});case"polyline":return new es({color:r});default:return r.a=1,new Jn({color:r,outline:null})}}function YYe(t,e){const i=t.allLayerViews.items;if(e===t.scale)return i.filter(n=>!n.suspended);const r=new Array;for(const n of i){const s=n.parent;s&&s!==n.view&&(KYe(s)||eJe(s))&&!r.includes(s)||n.visible&&n.visibleAtCurrentTimeExtent&&BYe(n.layer.effectiveScaleRange,e)&&r.push(n)}return r}function JYe(t){return(t==null?void 0:t.type)==="bing-maps"}function e0e(t){return t&&"blendMode"in t&&"effect"in t}function KYe(t){return t.layer.type==="catalog"}function eJe(t){return t.layer.type==="group"}function tJe(t){const e=t.layer;if(e0e(e)){const i=e.blendMode;if((!i||i==="normal")&&(e.effect||"featureEffect"in t&&t.featureEffect))return!0}return!1}let ln=class extends Ce{constructor(e){super(e),this.attributionVisible=!0,this.exportOptions={width:800,height:1100,dpi:96},this.forceFeatureAttributes=!1,this.format="png32",this.includeCharts=!1,this.includeTables=!1,this.label=null,this.layout="map-only",this.layoutItem=null,this.layoutOptions=null,this.outScale=0,this.report=null,this.reportItem=null,this.reportOptions=null,this.scalePreserved=!0,this.showLabels=!0}};h([f()],ln.prototype,"attributionVisible",void 0),h([f()],ln.prototype,"exportOptions",void 0),h([f()],ln.prototype,"forceFeatureAttributes",void 0),h([f()],ln.prototype,"format",void 0),h([f()],ln.prototype,"includeCharts",void 0),h([f()],ln.prototype,"includeTables",void 0),h([f()],ln.prototype,"label",void 0),h([f()],ln.prototype,"layout",void 0),h([f({type:Hs})],ln.prototype,"layoutItem",void 0),h([f()],ln.prototype,"layoutOptions",void 0),h([f()],ln.prototype,"outScale",void 0),h([f()],ln.prototype,"report",void 0),h([f({type:Hs})],ln.prototype,"reportItem",void 0),h([f()],ln.prototype,"reportOptions",void 0),h([f()],ln.prototype,"scalePreserved",void 0),h([f()],ln.prototype,"showLabels",void 0),ln=h([A("esri.rest.support.PrintTemplate")],ln);const t0e=ln,xI=new nt({"Attribute List Letter ANSI A Landscape":"attribute-list-letter-ansi-a-landscape","Attribute List Letter ANSI A Portrait":"attribute-list-letter-ansi-a-portrait","Attribute List With Group Letter ANSI A Landscape":"attribute-list-with-group-letter-ansi-a-landscape","Attribute List With Group Letter ANSI A Portrait":"attribute-list-with-group-letter-ansi-a-portrait","Page per Feature Letter ANSI A Landscape":"page-per-feature-letter-ansi-a-landscape","Page per Feature Letter ANSI A Portrait":"page-per-feature-letter-ansi-a-portrait"});xI.fromJSON.bind(xI);const iJe=xI.toJSON.bind(xI),jte={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},zte=new nt({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),rJe=new nt({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),p6=new Map;async function nJe(t,e,i){var a;const r=await o7(t,i),n=await oJe(e,r);if(await i0e(t,i)==="sync"){const{results:l}=await Yge(t,n,void 0,i);return(a=l==null?void 0:l[0])==null?void 0:a.value}const s=await Jge(t,n,void 0,i);await s.waitForJobCompletion({interval:e.updateDelay});const{value:o}=await s.fetchResultData("Output_File",null,i);return o}async function o7(t,e){const i=lJe(t),r=p6.get(i)??{gpServerUrl:i,legendLayerNameMap:{},legendLayers:[]};return r.gpMetadata??(r.gpMetadata=(await bt(i,Bpe({f:"json"},e))).data),r.cimVersion=r.gpMetadata.cimVersion,p6.set(i,r),r}async function i0e(t,e){return AJe(await o7(t,e))}async function sJe(t,e){return(await o7(t,e)).gpMetadata.tasks}async function oJe(t,e){var m,g,w,O,_;e=e||{is11xService:!1,legendLayerNameMap:{},legendLayers:[]};const i=t.template||new t0e;i.showLabels==null&&(i.showLabels=!0);const r=i.exportOptions;let n;const s=UYe(i.layout);if(r&&(n={dpi:r.dpi},(s==null?void 0:s.toLowerCase())==="map_only"||s==="")){const{width:x,height:T}=r;n.outputSize=x!=null&&T!=null?[x,T]:void 0}const o=i.layoutOptions;let a;if(o){let x,T;o.scalebarUnit==="Miles"||o.scalebarUnit==="Kilometers"?(x="Kilometers",T="Miles"):o.scalebarUnit!=="Meters"&&o.scalebarUnit!=="Feet"||(x="Meters",T="Feet"),a={titleText:o.titleText,authorText:o.authorText,copyrightText:o.copyrightText,customTextElements:o.customTextElements,elementOverrides:o.elementOverrides,scaleBarOptions:x||T?{metricUnit:zte.toJSON(x)??void 0,metricLabel:x?jte[x]:void 0,nonMetricUnit:zte.toJSON(T)??void 0,nonMetricLabel:T?jte[T]:void 0}:void 0}}let l=null;o!=null&&o.legendLayers&&(l=o.legendLayers.map(x=>{const T=x.layerId;e.legendLayerNameMap[T]=x.title;const E={id:T};return x.subLayerIds&&(E.subLayerIds=x.subLayerIds),E}));const u=await aJe(t,i,e);if(u.operationalLayers){const x=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),T=/[\u0600-\u06FF]/,E=k=>{var L;const M=k.text,R=k.font,D=(L=R==null?void 0:R.family)==null?void 0:L.toLowerCase();M&&R&&(D==="arial"||D==="arial unicode ms")&&(R.family=x.test(M)?"Arial Unicode MS":"Arial",R.style!=="normal"&&T.test(M)&&(R.family="Arial Unicode MS"))};for(const k of u.operationalLayers)if((m=k.featureCollection)!=null&&m.layers)for(const M of k.featureCollection.layers){if((O=(w=(g=M.layerDefinition)==null?void 0:g.drawingInfo)==null?void 0:w.renderer)!=null&&O.symbol){const R=M.layerDefinition.drawingInfo.renderer;R.symbol.type==="esriTS"&&E(R.symbol)}if((_=M.featureSet)!=null&&_.features)for(const R of M.featureSet.features)R.symbol&&R.symbol.type==="esriTS"&&E(R.symbol)}}t.outSpatialReference&&(u.mapOptions.spatialReference=t.outSpatialReference.toJSON()),Object.assign(u,{exportOptions:n,layoutOptions:a||{}}),Object.assign(u.layoutOptions,{legendOptions:{operationalLayers:l??e.legendLayers.slice()}}),e.legendLayers.length=0,p6.set(e.gpServerUrl,e);const p={Web_Map_as_JSON:JSON.stringify(u),Format:_$.toJSON(i.format),Layout_Template:s,Layout_Item_ID:void 0,Report_Template:iJe(i.report),Report_Item_ID:void 0};if(i.layoutItem){delete p.Layout_Template;const x=i.layoutItem;await x.load(),x.access!=="public"&&Ye&&await Ye.getCredential(e.gpServerUrl),p.Layout_Item_ID=JSON.stringify({id:x.id})}if(i.reportItem){delete p.Report_Template;const x=i.reportItem;await x.load(),x.access!=="public"&&Ye&&await Ye.getCredential(e.gpServerUrl),p.Report_Item_ID=JSON.stringify({id:x.id})}return t.extraParameters&&Object.assign(p,t.extraParameters),p}async function aJe(t,e,i){const r=t.view;let n=r.spatialReference;const s={operationalLayers:await uJe(r,e,i)};e.includeTables&&(s.tables=await xJe(r));let o=t.extent||i.ssExtent||r.extent;if(n!=null&&n.isWrappable&&(o=o.clone()._normalize(!0),n=o.spatialReference),s.mapOptions={extent:o&&o.toJSON(),spatialReference:n&&n.toJSON(),showAttribution:e.attributionVisible},i.ssExtent=null,r.background&&(s.background=r.background.toJSON()),r.rotation&&(s.mapOptions.rotation=-r.rotation),e.scalePreserved&&(s.mapOptions.scale=e.outScale||r.scale),r.timeExtent!=null){const a=r.timeExtent.start!=null?r.timeExtent.start.getTime():null,l=r.timeExtent.end!=null?r.timeExtent.end.getTime():null;s.mapOptions.time=[a,l]}return e.reportOptions&&(s.reportOptions=e.reportOptions),s}function lJe(t){let e=t;const i=e.lastIndexOf("/GPServer/");return i>0&&(e=e.slice(0,i+9)),e}async function uJe(t,e,i){var a;const r=[],n={layerView:null,printTemplate:e,view:t};let s=0;e.scalePreserved&&(s=e.outScale||t.scale);const o=YYe(t,s);for(const l of o){const u=l.layer;if(!u.loaded||"layers"in u)continue;let p;n.layerView=l,p=tJe(l)?await Jg(u,n,i):JYe(u)?cJe(u):(u==null?void 0:u.type)==="csv"?await dJe(u,n,i):(u==null?void 0:u.type)==="catalog-footprint"?await hJe(u,n,i):(u==null?void 0:u.type)==="feature"?await pJe(u,n,i):(u==null?void 0:u.type)==="geojson"?await fJe(u,n,i):(u==null?void 0:u.type)==="graphics"?await mJe(u,n,i):(u==null?void 0:u.type)==="imagery"?yJe(u,i):(u==null?void 0:u.type)==="imagery-tile"?await gJe(u,n,i):(u==null?void 0:u.type)==="kml"?await vJe(u,n,i):(u==null?void 0:u.type)==="map-image"?bJe(u,n,i):(u==null?void 0:u.type)==="map-notes"?await wJe(n,i):(u==null?void 0:u.type)==="open-street-map"?OJe():(u==null?void 0:u.type)==="stream"?await SJe(u,n,i):(u==null?void 0:u.type)==="subtype-group"?await _Je(u,i):(u==null?void 0:u.type)==="tile"?$Je(u,i):(u==null?void 0:u.type)==="vector-tile"?await TJe(u,n,i):(u==null?void 0:u.type)==="web-tile"?EJe(u):(u==null?void 0:u.type)==="wfs"?await kJe(u,n,i):(u==null?void 0:u.type)==="wms"?CJe(u,i):(u==null?void 0:u.type)==="wmts"?MJe(u):await Jg(u,n,i),p&&(Array.isArray(p)?r.push(...p):(p.id=u.id,p.title=i.legendLayerNameMap[u.id]||u.title,p.opacity=l.fullOpacity,p.minScale=u.minScale||0,p.maxScale=u.maxScale||0,e0e(u)&&u.blendMode&&u.blendMode!=="normal"&&(p.blendMode=u.blendMode),r.push(p)))}if(s)for(const l of r)l.minScale=0,l.maxScale=0;if((a=t.graphics)!=null&&a.length){const l=await Ac(null,t.graphics,e,i);l&&r.push(l)}return r}function cJe(t){return{culture:t.culture,key:t.key,type:"BingMaps"+(t.style==="aerial"?"Aerial":t.style==="hybrid"?"Hybrid":"Road")}}async function hJe(t,{layerView:e,printTemplate:i},r){if(parseFloat(r.cimVersion)<3.1)return Ac(t,await j2(e),i,r);const n=t.parent,s={id:(o=fl(n,"web-map")).id,url:o.url,layerType:o.layerType,customParameters:o.customParameters,dynamicGroupLayer:{visibility:!1},footprintLayer:o.footprintLayer,layerDefinition:o.layerDefinition};var o;return hm(s,n),s}async function dJe(t,e,i){t.legendEnabled&&i.legendLayers.push({id:t.id});const r=e.layerView,n=e.printTemplate;if(!(r.filter||t.portalItem&&t.portalItem.access!=="public")){const s=fl(t,"web-map");return s.type="CSV",delete s.popupInfo,delete s.layerType,s.showLabels=n.showLabels&&t.labelsVisible,s}return Ac(t,await j2(r),n,i)}async function Ac(t,e,i,r){var x,T,E,k,M,R,D;let n;const s=ZYe(),o=HYe(),a=Fte(),l=GYe(),u=Fte();if(u.layerDefinition.name="textLayer",delete u.layerDefinition.drawingInfo,t){if(t.declaredClass==="esri.layers.FeatureLayer"||t.declaredClass==="esri.layers.StreamLayer"?s.layerDefinition.name=o.layerDefinition.name=a.layerDefinition.name=l.layerDefinition.name=r.legendLayerNameMap[t.id]||((x=t.arcgisProps)==null?void 0:x.title)||t.title:t.declaredClass==="esri.layers.GraphicsLayer"&&(e=t.graphics.items),t.renderer){const L=t.renderer.toJSON(),F=s.layerDefinition.drawingInfo;F&&(F.renderer=L);const j=o.layerDefinition.drawingInfo;j&&(j.renderer=L);const B=a.layerDefinition.drawingInfo;B&&(B.renderer=L);const W=l.layerDefinition.drawingInfo;W&&(W.renderer=L)}if(i.showLabels&&t.labelsVisible&&typeof t.write=="function"){const L=fl(t,"web-map"),F=(E=(T=L.layerDefinition)==null?void 0:T.drawingInfo)==null?void 0:E.labelingInfo;if(F){n=!0;const j=s.layerDefinition.drawingInfo;j&&(j.labelingInfo=F);const B=o.layerDefinition.drawingInfo;B&&(B.labelingInfo=F);const W=a.layerDefinition.drawingInfo;W&&(W.labelingInfo=F);const ie=l.layerDefinition.drawingInfo;ie&&(ie.labelingInfo=F)}}}let p;t!=null&&t.renderer||n||(delete s.layerDefinition.drawingInfo,delete o.layerDefinition.drawingInfo,delete a.layerDefinition.drawingInfo,delete l.layerDefinition.drawingInfo);const m=t==null?void 0:t.fieldsIndex,g=t==null?void 0:t.renderer;if(m){const L=new Set;n&&await Z4e(L,t),g&&typeof g.collectRequiredFields=="function"&&await g.collectRequiredFields(L,m),p=Array.from(L);const F=m.fields.map(j=>j.toJSON());s.layerDefinition.fields=F,o.layerDefinition.fields=F,a.layerDefinition.fields=F,l.layerDefinition.fields=F}const w=e==null?void 0:e.length;let O;for(let L=0;L<w;L++){const F=e[L]||e.at(L);if(F.visible!==!1&&F.geometry){if(O=F.toJSON(),O.hasOwnProperty("popupTemplate")&&delete O.popupTemplate,(k=O.geometry)!=null&&k.z&&delete O.geometry.z,O.symbol&&(O.symbol.angle||delete O.symbol.angle,TM(O.symbol)?O.symbol=await $M(O.symbol,r):O.symbol.text&&delete O.attributes),(!i||!i.forceFeatureAttributes)&&(p==null?void 0:p.length)){const j={};for(const B of p)(M=O.attributes)!=null&&M.hasOwnProperty(B)&&(j[B]=O.attributes[B]);O.attributes=j}F.geometry.type==="polygon"?s.featureSet.features.push(O):F.geometry.type==="polyline"?o.featureSet.features.push(O):F.geometry.type==="point"?(R=O.symbol)!=null&&R.text?u.featureSet.features.push(O):a.featureSet.features.push(O):F.geometry.type==="multipoint"?l.featureSet.features.push(O):F.geometry.type==="extent"&&(O.geometry=da.fromExtent(F.geometry).toJSON(),s.featureSet.features.push(O))}}const _=[s,o,l,a,u].filter(L=>L.featureSet.features.length>0);for(const L of _){const F=L.featureSet.features.every(j=>j.symbol);if(F&&(!i||!i.forceFeatureAttributes))for(const j of L.featureSet.features)delete j.attributes;F&&delete L.layerDefinition.drawingInfo,(D=L.layerDefinition.drawingInfo)!=null&&D.renderer&&await r0e(L.layerDefinition.drawingInfo.renderer,r)}return _.length?{featureCollection:{layers:_},showLabels:n}:null}async function pJe(t,e,i){var m,g,w,O,_,x,T,E,k,M,R,D;let r;const n=t.renderer,s=parseFloat(i.cimVersion);if(((m=t.featureReduction)==null?void 0:m.type)==="binning"||((g=t.featureReduction)==null?void 0:g.type)==="cluster"&&s<2.9||(n==null?void 0:n.type)==="pie-chart"||(n==null?void 0:n.type)==="dot-density"&&s<2.6)return Jg(t,e,i);t.legendEnabled&&i.legendLayers.push({id:t.id});const o=e.layerView,{printTemplate:a,view:l}=e,u=((w=t.source)==null?void 0:w.type)!=="feature-layer"&&((O=t.source)==null?void 0:O.type)!=="ogc-feature";if(o.filter||u||!n||"field"in n&&n.field!=null&&!t.getField(n.field)){const L=await j2(o);r=await Ac(t,L,a,i)}else{if(r={id:(p=fl(t)).id,title:p.title,url:p.url,layerType:p.layerType,customParameters:p.customParameters,layerDefinition:p.layerDefinition,charts:a.includeCharts?p.charts:void 0},a.attributionVisible&&(r.credits=Kge(t)),r.showLabels=a.showLabels&&t.labelsVisible,hm(r,t),(x=(_=r.layerDefinition)==null?void 0:_.featureReduction)==null||delete x.disablePopup,(E=(T=r.layerDefinition)==null?void 0:T.featureReduction)==null||delete E.popupInfo,o.displayFilterEnabled||((k=r.layerDefinition)==null||delete k.displayFilterInfo),((R=(M=r.layerDefinition)==null?void 0:M.drawingInfo)==null?void 0:R.renderer)&&(delete r.layerDefinition.minScale,delete r.layerDefinition.maxScale,await r0e(r.layerDefinition.drawingInfo.renderer,i),"visualVariables"in n&&((D=n.visualVariables)==null?void 0:D[0]))){const F=n.visualVariables[0];if(F.type==="size"&&F.maxSize&&typeof F.maxSize!="number"&&F.minSize&&typeof F.minSize!="number"){const j=Rye(F,l.scale);r.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=j.minSize,r.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=j.maxSize}}const L=kYe(o);if(L&&(r.layerDefinition??(r.layerDefinition={}),r.layerDefinition.definitionExpression=r.layerDefinition.definitionExpression?`(${r.layerDefinition.definitionExpression}) AND (${L})`:L),t.gdbVersion&&(r.layerDefinition??(r.layerDefinition={}),r.layerDefinition.gdbVersion=t.gdbVersion),o.hasHighlight&&"highlightIds"in o){const F=o;r.selectionObjectIds=F.highlightIds,r.selectionSymbol=XYe(t.geometryType,F.highlightOptions??l.highlightOptions)}}var p;return r}async function fJe(t,e,i){var r,n;return((r=t.featureReduction)==null?void 0:r.type)==="binning"||((n=t.featureReduction)==null?void 0:n.type)==="cluster"?Jg(t,e,i):(t.legendEnabled&&i.legendLayers.push({id:t.id}),Ac(t,await j2(e.layerView),e.printTemplate,i))}async function mJe(t,{printTemplate:e},i){return Ac(t,null,e,i)}function yJe(t,e){var n;t.legendEnabled&&e.legendLayers.push({id:t.id});const i={layerType:(r=fl(t)).layerType,customParameters:r.customParameters};var r;return i.bandIds=t.bandIds,i.compressionQuality=t.compressionQuality,i.format=t.format,i.interpolation=t.interpolation,(t.mosaicRule||t.definitionExpression)&&(i.mosaicRule=t.exportImageServiceParameters.mosaicRule.toJSON()),t.rasterFunction&&(i.renderingRule=t.rasterFunction.toJSON()),t.renderer&&(i.layerDefinition??(i.layerDefinition={}),(n=i.layerDefinition).drawingInfo??(n.drawingInfo={}),i.layerDefinition.drawingInfo.renderer=t.renderer.toJSON()),hm(i,t),i}async function gJe(t,e,i){var s;if(((s=t.renderer)==null?void 0:s.type)==="flow")return Jg(t,e,i);t.legendEnabled&&i.legendLayers.push({id:t.id});const r={bandIds:(n=fl(t)).bandIds,customParameters:n.customParameters,interpolation:n.interpolation,layerDefinition:n.layerDefinition};var n;return r.layerType="ArcGISImageServiceLayer",hm(r,t),r}async function vJe(t,e,i){const r=e.printTemplate;if(!t.portalItem||t.portalItem.access==="public"){const u=fl(t,"web-map");return u.type="kml",delete u.layerType,u.url=_s(t.url),u}const n=[],s=e.layerView,o="data:image/png;base64,";s.allVisibleMapImages.forEach((u,p)=>{const m={id:`${t.id}_image${p}`,type:"image",title:t.id,minScale:t.minScale||0,maxScale:t.maxScale||0,opacity:s.fullOpacity,extent:u.extent};u.href.startsWith(o)?m.imageData=u.href.slice(o.length):m.url=u.href,n.push(m)});const a=[...s.allVisiblePoints.items,...s.allVisiblePolylines.items,...s.allVisiblePolygons.items],l={id:t.id,...await Ac(null,a,r,i)};return n.push(l),n}function bJe(t,{printTemplate:e,view:i},r){var p,m;let n;const s={id:t.id,subLayerIds:[]};let o=[];const a=i.scale,l=g=>{const w=a===0,O=g.minScale===0||a<=g.minScale,_=g.maxScale===0||a>=g.maxScale;if(g.visible&&(w||O&&_))if(g.sublayers)g.sublayers.forEach(l);else{const x=g.toExportImageJSON(),T={id:g.id,name:g.title,layerDefinition:{definitionExpression:x.definitionExpression,drawingInfo:x.drawingInfo,orderBy:x.orderBy,source:x.source}};o.unshift(T),s.subLayerIds.push(g.id)}};var u;return t.sublayers&&t.sublayers.forEach(l),o.length&&(o=o.map(({id:g,name:w,layerDefinition:O})=>({id:g,name:w,layerDefinition:O})),n={layerType:(u=fl(t)).layerType,customParameters:u.customParameters},n.layers=o,n.visibleLayers=(m=(p=t.capabilities)==null?void 0:p.exportMap)!=null&&m.supportsDynamicLayers?void 0:s.subLayerIds,e.attributionVisible&&(n.credits=Kge(t)),t.gdbVersion&&(n.gdbVersion=t.gdbVersion),hm(n,t),t.legendEnabled&&r.legendLayers.push(s)),n}async function wJe({layerView:t,printTemplate:e},i){const r=[],n=t.layer;if(n.featureCollections!=null)for(const s of n.featureCollections){const o=await Ac(s,s.source,e,i);o&&r.push(...o.featureCollection.layers)}else if(n.sublayers!=null)for(const s of n.sublayers){const o=await Ac(null,s.graphics,e,i);o&&r.push(...o.featureCollection.layers)}return{featureCollection:{layers:r}}}function OJe(){return{type:"OpenStreetMap"}}async function Jg(t,{printTemplate:e,view:i},r){var m;const n={type:"image"},s={format:"png",ignoreBackground:!0,ignorePadding:!0,layers:[t]};i.rotation!==0&&(s.rotation=0);const o=r.ssExtent||i.state.extent.clone();let a=96,l=!0,u=!0;if(e.exportOptions){const g=e.exportOptions;g.dpi!=null&&g.dpi>0&&(a=g.dpi),g.width!=null&&g.width>0&&(l=g.width%2==i.width%2),g.height!=null&&g.height>0&&(u=g.height%2==i.height%2)}if(e.layout==="map-only"&&e.scalePreserved&&(!e.outScale||e.outScale===i.scale)&&a===96&&(!l||!u)&&i.state.extent.equals(i.extent)&&(s.area={x:0,y:0,width:i.width,height:i.height},l||(s.area.width-=1),u||(s.area.height-=1),!r.ssExtent)){const g=i.toMap(Xr(s.area.width,s.area.height));o.ymin=g.y,o.xmax=g.x,r.ssExtent=o}n.extent=o.clone()._normalize(!0).toJSON();const p=await i.takeScreenshot(s);return n.imageData=(m=Df(p.dataUrl))==null?void 0:m.data,n}async function SJe(t,{layerView:e,printTemplate:i},r){return t.legendEnabled&&r.legendLayers.push({id:t.id}),Ac(t,await j2(e),i,r)}async function _Je(t,e){if(t.legendEnabled)for(const n of t.sublayers)n.legendEnabled&&e.legendLayers.push({id:n.id});const i={customParameters:(r=fl(t)).customParameters,effect:r.effect,layerDefinition:r.layerDefinition,layerType:r.layerType,layers:r.layers,url:r.url};var r;if(Array.isArray(i.layers))for(const n of i.layers)delete n.popupInfo;return hm(i,t),i}async function xJe(t){var n,s;const e=[],i=[];for(const o of t.map.allTables)o.type!=="feature"||o.loaded||i.push(o.load());i.length&&await Promise.allSettled(i);for(const o of t.map.allTables)if(o.type==="feature"&&o.loaded&&o.isTable&&((n=o.source)==null?void 0:n.type)==="feature-layer"){const a={id:(r=fl(o)).id,title:r.title,customParameters:r.customParameters,layerDefinition:{definitionExpression:(s=r.layerDefinition)==null?void 0:s.definitionExpression},url:r.url};hm(a,o),e.push(a)}var r;return e.length?e:void 0}function $Je(t,e){t.legendEnabled&&e.legendLayers.push({id:t.id});const i={layerType:(r=fl(t)).layerType,customParameters:r.customParameters};var r;return hm(i,t),i}async function TJe(t,e,i){const r=e.layerView;if(t.serviceUrl&&t.styleUrl&&!r.spriteSourceChanged&&!r.styleChanged){const n=eI(t.styleUrl,t.apiKey),s=eI(t.serviceUrl,t.apiKey);if(!n&&!s||i.cimVersion!=="2.1.0"){const o={type:"VectorTileLayer"};return o.styleUrl=_s(t.styleUrl),o.token=n,s!==n&&(o.additionalTokens=[{url:t.serviceUrl,token:s}]),o}}return Jg(t,e,i)}function EJe(t){var r;const e=(r=t.urlTemplate)==null?void 0:r.replace(/\${/g,"{"),i={type:"WebTiledLayer",urlTemplate:e,credits:t.copyright};return t.subDomains&&t.subDomains.length>0&&(i.subDomains=t.subDomains),i}async function kJe(t,e,i){return parseFloat(i.cimVersion)<3.5?Jg(t,e,i):(t.legendEnabled&&i.legendLayers.push({id:t.id}),{layerType:(r=fl(t,"web-map")).layerType,layerDefinition:r.layerDefinition,url:r.url,wfsInfo:r.wfsInfo});var r}function CJe(t,e){let i;const r=[],n=s=>{s.visible&&(s.sublayers?s.sublayers.forEach(n):s.name&&r.unshift(s.name))};return t.sublayers&&t.sublayers.forEach(n),r.length&&(t.legendEnabled&&e.legendLayers.push({id:t.id,subLayerIds:r}),i={type:"wms",customLayerParameters:t.customLayerParameters,customParameters:t.customParameters,transparentBackground:t.imageTransparency,visibleLayers:r,url:_s(t.url),version:t.version}),i}function MJe(t){const e=t.activeLayer;return{type:"wmts",customLayerParameters:t.customLayerParameters,customParameters:t.customParameters,format:e.imageFormat,layer:e.id,style:e.styleId,tileMatrixSet:e.tileMatrixSetId,url:_s(t.url)}}function hm(t,e){e.url&&(t.url=_s(t.url||e.url),t.token=eI(t.url,e.apiKey))}async function $M(t,e){var o;e.canvas||(e.canvas=document.createElement("canvas"));const i=1024;e.canvas.width=i,e.canvas.height=i;const r=e.canvas.getContext("2d");let n,s;if(t.path){const a=new Path2D(t.path);a.closePath(),r.fillStyle=Array.isArray(t.color)?`rgba(${t.color[0]},${t.color[1]},${t.color[2]},${t.color[3]/255})`:"rgb(0,0,0)",r.fill(a);const l=WYe(r);if(!l)return null;r.clearRect(0,0,i,i);const u=wi(t.size)/Math.max(l.width,l.height);r.scale(u,u);const p=i/u,m=p/2-l.width/2-l.x,g=p/2-l.height/2-l.y;if(r.translate(m,g),Array.isArray(t.color)&&r.fill(a),((o=t.outline)==null?void 0:o.width)&&Array.isArray(t.outline.color)){const O=t.outline;r.lineWidth=wi(O.width)/u,r.lineJoin="round",r.strokeStyle=`rgba(${O.color[0]},${O.color[1]},${O.color[2]},${O.color[3]/255})`,r.stroke(a),l.width+=r.lineWidth,l.height+=r.lineWidth}l.width*=u,l.height*=u;const w=r.getImageData(i/2-l.width/2,i/2-l.height/2,Math.ceil(l.width),Math.ceil(l.height));n=w.width,s=w.height,r.canvas.width=n,r.canvas.height=s,r.putImageData(w,0,0)}else{const a=t.contentType==="image/svg+xml"?"data:image/svg+xml;base64,"+t.imageData:t.url,l=(await bt(a,{responseType:"image"})).data;n=wi(t.width),s=wi(t.height),r.canvas.width=n,r.canvas.height=s,r.drawImage(l,0,0,r.canvas.width,r.canvas.height)}return{type:"esriPMS",imageData:r.canvas.toDataURL("image/png").slice(22),angle:t.angle,contentType:"image/png",height:$s(s),width:$s(n),xoffset:t.xoffset,yoffset:t.yoffset}}async function r0e(t,e){const i=t.type;if(i==="simple"&&TM(t.symbol))t.symbol=await $M(t.symbol,e);else if(i==="uniqueValue"||i==="classBreaks"){TM(t.defaultSymbol)&&(t.defaultSymbol=await $M(t.defaultSymbol,e));const r=t[i==="uniqueValue"?"uniqueValueInfos":"classBreakInfos"];if(r)for(const n of r)TM(n.symbol)&&(n.symbol=await $M(n.symbol,e))}}async function j2(t){return t.queryFeatures(t.createQuery()).then(e=>e.features)}function fl(t,e){return t.write({},{ignorePersistenceEnabled:!0,origin:e})??{}}function AJe(t){var e;return(e=t.gpMetadata)!=null&&e.executionType?rJe.fromJSON(t.gpMetadata.executionType):"sync"}function TM(t){var e;return t&&(t.path||t.contentType==="image/svg+xml"||((e=t.url)==null?void 0:e.endsWith(".svg")))}let qh=class extends Ce{constructor(e){super(e),this.extent=null,this.extraParameters=null,this.outSpatialReference=null,this.template=null,this.updateDelay=1e3,this.view=null}};h([f()],qh.prototype,"extent",void 0),h([f()],qh.prototype,"extraParameters",void 0),h([f({type:Je})],qh.prototype,"outSpatialReference",void 0),h([f()],qh.prototype,"template",void 0),h([f()],qh.prototype,"updateDelay",void 0),h([f()],qh.prototype,"view",void 0),qh=h([A("esri.rest.support.PrintParameters")],qh);const IJe=qh;let wr=class extends Ce{constructor(e){super(e),this.strokeDash=[],this.strokeWidth=2,this.strokeColor=[0,0,0,1],this.strokeBackgroundColor=[0,0,0,0],this.fillColor=[0,0,0,0],this.backgroundFillColor=[0,0,0,.5],this.visible=!0,this.isDecoration=!1,this.boxWidth=0,this.boxHeight=0,this.backgroundWidth=0,this.backgroundHeight=0,this.padding={left:0,top:0,right:0,bottom:0}}get _strokeStyle(){return`rgba(${this.strokeColor.join()})`}get _strokeBackgroundStyle(){return`rgba(${this.strokeBackgroundColor.join()})`}get _fillStyle(){return`rgba(${this.fillColor.join()})`}get _backgroundFillStyle(){return`rgba(${this.backgroundFillColor.join()})`}render(){const{backgroundWidth:e,backgroundHeight:i,boxWidth:r,boxHeight:n,padding:s}=this,o=s.left,a=s.top,l=this.x??o+e/2-r/2,u=this.y??a+i/2-n/2,p=l+r,m=u+n;return P("div",{classes:{"esri-box-overlay-item":!0},styles:{left:"0px",top:"0px",width:"100%",height:"100%",visibility:this.visible?"visible":"hidden"}},P("svg",{styles:{width:"100%",height:"100%"}},P("path",{d:`M ${o} ${a} L ${e+o} ${a} L ${e+o} ${i+a} L ${o} ${i+a} Z M ${l} ${u} L ${l} ${m} L ${p} ${m} L ${p} ${u} Z`,fill:this._backgroundFillStyle,stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),P("rect",{fill:this._fillStyle,height:n,stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.join(" ")||void 0,"stroke-width":this.strokeWidth,width:r,x:l,y:u})))}renderCanvas(){}};h([f()],wr.prototype,"strokeDash",void 0),h([f()],wr.prototype,"strokeWidth",void 0),h([f()],wr.prototype,"strokeColor",void 0),h([f()],wr.prototype,"strokeBackgroundColor",void 0),h([f()],wr.prototype,"fillColor",void 0),h([f()],wr.prototype,"backgroundFillColor",void 0),h([f()],wr.prototype,"visible",void 0),h([f()],wr.prototype,"isDecoration",void 0),h([f()],wr.prototype,"boxWidth",void 0),h([f()],wr.prototype,"boxHeight",void 0),h([f()],wr.prototype,"backgroundWidth",void 0),h([f()],wr.prototype,"backgroundHeight",void 0),h([f()],wr.prototype,"x",void 0),h([f()],wr.prototype,"y",void 0),h([f()],wr.prototype,"padding",void 0),h([f({readOnly:!0})],wr.prototype,"_strokeStyle",null),h([f({readOnly:!0})],wr.prototype,"_strokeBackgroundStyle",null),h([f({readOnly:!0})],wr.prototype,"_fillStyle",null),h([f({readOnly:!0})],wr.prototype,"_backgroundFillStyle",null),wr=h([A("esri.views.overlay.BoxOverlayItem")],wr);const PJe=wr;async function n0e(t,e,i){if(!t)throw new G("print:invalid-layout-info-task-url","Can't fetch layout template info",{url:t});if(await i0e(t)==="async"){const r=await Jge(t,e,void 0,i||void 0);return await r.waitForJobCompletion(),(await r.fetchResultData("Output_JSON")).value}return(await Yge(t,e,null,i)).results[0].value}let js=class extends K{constructor(e){super(e),this.description=null,this.format=null,this.state="not-loaded",this.label=null,this.layoutInfoTaskUrl=null,this.layout=null,this.layoutItem=null,this.layoutOptions=null,this.layoutTemplateInfo=null,this.type=null}get id(){var e;return((e=this.layoutItem)==null?void 0:e.id)??`${this.layout}-${K9(JSON.stringify(this.toJSON()))}`}get mapSurroundInfoOptions(){var r,n,s;const e=(n=(r=this.layoutTemplateInfo)==null?void 0:r.layoutOptions)==null?void 0:n.mapSurroundInfos;if(!e)return null;const i={northArrow:[],scaleBar:[],legend:[]};for(const o of e)switch(o.type){case"CIMMarkerNorthArrow":i.northArrow.push(o);break;case"CIMScaleLine":i.scaleBar.push(o);break;case"CIMGroupElement":(s=o.elements)!=null&&s.some(a=>a.type==="CIMScaleLine")&&i.scaleBar.push(o);break;case"CIMLegend":i.legend.push(o)}return i}_updateLayoutOptions(e){var s,o,a,l,u,p,m,g;const i=((s=this.layoutOptions)==null?void 0:s.legend)??((o=e.layoutOptions)==null?void 0:o.hasLegend),r=((a=this.layoutOptions)==null?void 0:a.northArrow)??((l=this.mapSurroundInfoOptions)!=null&&l.northArrow.length?(u=this.mapSurroundInfoOptions)==null?void 0:u.northArrow.some(({visible:w})=>w):void 0),n=((p=this.layoutOptions)==null?void 0:p.scaleBar)??((m=this.mapSurroundInfoOptions)!=null&&m.scaleBar.length?(g=this.mapSurroundInfoOptions)==null?void 0:g.scaleBar.some(({visible:w})=>w):void 0);this._set("layoutOptions",{legend:i,northArrow:r,scaleBar:n})}async fetchLayoutItemTemplateInfo(e){const{layoutItem:i}=this;if(i!=null&&i.id&&!this.layoutTemplateInfo&&this.state!=="loaded")try{this._set("state","loading");const r=this.layoutInfoTaskUrl;if(!r)throw new G("print:invalid-layout-info-task-url","Can't fetch layout template info",{url:r});i.access!=="public"&&Ye&&await Ye.getCredential(r);const n={Layout_Item_ID:JSON.stringify({id:i.id})},s=(await n0e(r,n,e))[0];this.setLayoutTemplateInfo(s)}catch(r){this._set("state",vn(r)?"not-loaded":"error")}}setLayoutTemplateInfo(e){this._set("layoutTemplateInfo",e),this._updateLayoutOptions(e),this._set("state","loaded")}};h([f({json:{write:!0}})],js.prototype,"description",void 0),h([Re(_$)],js.prototype,"format",void 0),h([f({readOnly:!0})],js.prototype,"id",null),h([f({readOnly:!0})],js.prototype,"state",void 0),h([f({json:{write:!0}})],js.prototype,"label",void 0),h([f()],js.prototype,"layoutInfoTaskUrl",void 0),h([f({json:{read:Mb,write:!0}})],js.prototype,"layout",void 0),h([f({type:Hs,json:{write:!0}})],js.prototype,"layoutItem",void 0),h([f({readOnly:!0,json:{write:!0}})],js.prototype,"layoutOptions",void 0),h([f({readOnly:!0})],js.prototype,"layoutTemplateInfo",void 0),h([f({readOnly:!0})],js.prototype,"mapSurroundInfoOptions",null),h([f()],js.prototype,"type",void 0),js=h([A("esri.widgets.Print.CustomTemplate")],js);const Ab=js;let Ji=class extends Ce{constructor(e){super(e),this._abortController=null,this.attributionEnabled=!0,this.author=null,this.copyright=null,this.customTextElements=null,this.dpi=96,this.fileName=null,this.forceFeatureAttributes=!1,this.format="pdf",this.height=null,this.includeTables=!0,this.id=null,this.state="ready",this.layout="letter-ansi-a-landscape",this.layoutItem=null,this.legendEnabled=void 0,this.northArrowEnabled=void 0,this.scale=null,this.scaleBarEnabled=void 0,this.scaleEnabled=!1,this.title=null,this.width=null}async applyTemplate(e,i,r){var n,s,o;if(((e==null?void 0:e.id)!==this.id||(e==null?void 0:e.state)==="error")&&(this._abortController&&(this._abortController.abort(),this._abortController=null),e)){if(this._set("state","pending"),this._resetMapSurroundInfoOptions(),this._set("id",e.id),this.set({layout:e.layout,layoutItem:e.layoutItem}),!e.layoutOptions&&e.layoutItem){const a=new AbortController;if(this._abortController=a,await e.fetchLayoutItemTemplateInfo({signal:this._abortController.signal}),e.state!=="loaded")return e.state==="error"&&this._set("state","error"),this._abortController!==a?void 0:void(this._abortController=null);this._abortController=null}this.set({customTextElements:i?q(i):this.customTextElements,format:this.format??e.format,legendEnabled:(r==null?void 0:r.legend)??((n=e.layoutOptions)==null?void 0:n.legend)??this.legendEnabled,northArrowEnabled:(r==null?void 0:r.northArrow)??((s=e.layoutOptions)==null?void 0:s.northArrow)??this.northArrowEnabled,scaleBarEnabled:(r==null?void 0:r.scaleBar)??((o=e.layoutOptions)==null?void 0:o.scaleBar)??this.scaleBarEnabled}),this._set("state","ready")}}reset(){this._set("id",null),this._set("state","ready"),this.set({layout:null,layoutItem:null,customTextElements:null}),this._resetMapSurroundInfoOptions()}_resetMapSurroundInfoOptions(){this.set({legendEnabled:void 0,northArrowEnabled:void 0,scaleBarEnabled:void 0})}};h([f()],Ji.prototype,"attributionEnabled",void 0),h([f()],Ji.prototype,"author",void 0),h([f()],Ji.prototype,"copyright",void 0),h([f()],Ji.prototype,"customTextElements",void 0),h([f()],Ji.prototype,"dpi",void 0),h([f()],Ji.prototype,"fileName",void 0),h([f()],Ji.prototype,"forceFeatureAttributes",void 0),h([f()],Ji.prototype,"format",void 0),h([f()],Ji.prototype,"height",void 0),h([f()],Ji.prototype,"includeTables",void 0),h([f({readOnly:!0})],Ji.prototype,"id",void 0),h([f({readOnly:!0})],Ji.prototype,"state",void 0),h([f()],Ji.prototype,"layout",void 0),h([f({type:Hs})],Ji.prototype,"layoutItem",void 0),h([f()],Ji.prototype,"legendEnabled",void 0),h([f()],Ji.prototype,"northArrowEnabled",void 0),h([f()],Ji.prototype,"scale",void 0),h([f()],Ji.prototype,"scaleBarEnabled",void 0),h([f()],Ji.prototype,"scaleEnabled",void 0),h([f()],Ji.prototype,"title",void 0),h([f()],Ji.prototype,"width",void 0),Ji=h([A("esri.widgets.Print.TemplateOptions")],Ji);const s0e=Ji,RJe=[30,144,255,255],Ute=[237,211,23,255],LJe=[216,48,32,255],NJe=new Set(["GISProfessionalStdUT","GISProfessionalAdvUT"]),DJe=/(\/GPServer\/).+/i,VJe=new nt({inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"}),gw=Te.ofType(Ab);function FJe(t){var i;t.layoutOptions??(t.layoutOptions={}),(i=t.layoutOptions).customTextElements??(i.customTextElements=[]);const e="date";if(!t.layoutOptions.customTextElements.find(r=>e in r)){const{customTextElements:r}=t.layoutOptions;let n=rl(Date.now(),Av("short-date"));YIe()==="ar"&&(n=""+n),r.push({date:n})}}function gD(t,e,i){e&&e.visible!==i&&t.layoutOptions&&(t.layoutOptions.elementOverrides?t.layoutOptions.elementOverrides[e.name]={visible:i}:t.layoutOptions.elementOverrides={[e.name]:{visible:i}})}let gi=class extends fa{constructor(e){super(e),this._serviceTemplateCustomTextElements=null,this._templateIdToCustomTemplate=new xg,this._isFreeHand=!1,this._freeHandWidth=0,this._freehandHeight=0,this._asyncPrintTaskUrl=null,this._layoutInfoTaskUrl=null,this._customLayoutOptions=null,this.allowedFormats="all",this.allowedLayouts="all",this.browseTemplates=new gw,this.defaultTemplates=new gw,this.error=null,this.extraParameters=null,this.includeDefaultTemplates=!0,this.outSpatialReference=null,this.portal=Lr.getDefault(),this.portalTemplateIds=[],this.printServiceTemplates=new gw,this.defaultTemplate=null,this.showPrintAreaEnabled=!1,this.printServiceUrl=null,this.printTimeout=12e4,this.templatesInfo=null,this.updateDelay=1e3,this.view=null,this.templateCustomTextElements=null,this.templateOptions=new s0e}initialize(){this.addHandles([Oe(()=>[this.showPrintAreaEnabled,this.view],()=>{var e,i;this.showPrintAreaEnabled?this._enablePrintPreview():(this.removeHandles("overlay-handler"),(i=(e=this.view)==null?void 0:e.overlay)==null||i.removeItem(this._getOverlayItem()))}),Oe(()=>[this.templateOptions.layout,this.templateOptions.layoutItem],()=>{this.loaded&&this._processTemplateOptions()})])}destroy(){var e;this.removeHandles("overlay-handler"),this.view&&(this._overlayItem&&((e=this.view.overlay)==null||e.removeItem(this._overlayItem),this._overlayItem.destroy(),this._overlayItem=null),this.view=null)}get effectivePrintServiceUrl(){return this.printServiceUrl??null}get effectiveTemplateCustomTextElements(){if(!this._serviceTemplateCustomTextElements)return{};const e=q(this._serviceTemplateCustomTextElements);return this.templateCustomTextElements&&Object.keys(this.templateCustomTextElements).forEach(i=>{var n;const r=e[i];if(r){const s=(n=this.templateCustomTextElements)==null?void 0:n[i];r.forEach(o=>{const[a]=Object.entries(o)[0];s==null||s.forEach(l=>{const[u,p]=Object.entries(l)[0];a===u&&(o[a]=p)})})}}),Object.freeze(e)}get state(){var e;return this.loadStatus==="loading"?"initializing":this.loadStatus==="failed"||this.error?"error":this.loadStatus==="loaded"&&((e=this.view)!=null&&e.ready)?"ready":"disabled"}async load(e){return this.addResolvingPromise(this._loadResources(e).catch(i=>this.error=i)),this}async print(e){var u;const{view:i,extraParameters:r,updateDelay:n,outSpatialReference:s}=this;if(!i)throw new G("print:view-required","view is not set");FJe(e);const o=this._getOverlayItem(),a=e.scalePreserved||!this.showPrintAreaEnabled?void 0:Kpe(new oi,i.viewpoint,e.layout==="map-only"?[e.exportOptions.width,e.exportOptions.height]:[o.boxWidth,o.boxHeight]),l=new IJe({view:i,template:e,extent:a,extraParameters:r,updateDelay:n,outSpatialReference:s});try{const p=!!((u=e.layoutItem)!=null&&u.id)&&(this.portalTemplateIds.includes(e.layoutItem.id)||this.browseTemplates.some(m=>{var g,w;return((g=m.layoutItem)==null?void 0:g.id)===((w=e.layoutItem)==null?void 0:w.id)}));return await nJe(p&&this._asyncPrintTaskUrl?this._asyncPrintTaskUrl:this.effectivePrintServiceUrl,l,{timeout:this.printTimeout})}catch(p){throw new G("print:export-error","An error occurred while exporting the web map.",{error:p})}}toPrintTemplate({attributionEnabled:e,author:i,copyright:r,customTextElements:n,dpi:s,forceFeatureAttributes:o,format:a,height:l,id:u,includeTables:p,layout:m,layoutItem:g,legendEnabled:w,northArrowEnabled:O,scale:_,scaleBarEnabled:x,scaleEnabled:T,title:E,width:k}){var R;if(!m&&!g)throw new G("print:layout-required","layout is not set");const M=new t0e({attributionVisible:e,forceFeatureAttributes:o,format:a,includeTables:p,layout:m,layoutItem:g,layoutOptions:{authorText:i||"",copyrightText:r||"",customTextElements:n,titleText:E||""},outScale:_??0,scalePreserved:T});if(k&&(M.exportOptions.width=k),l&&(M.exportOptions.height=l),s&&(M.exportOptions.dpi=s),M.layoutOptions){w||(M.layoutOptions.legendLayers=[]);const D=(R=this.getLayoutTemplateById(u))==null?void 0:R.mapSurroundInfoOptions;if(D){const L=D.northArrow;for(const B of L)gD(M,B,O);const F=D.scaleBar;for(const B of F)gD(M,B,x);const j=D.legend;for(const B of j)gD(M,B,w)}}return M}getLayoutTemplateById(e){return e?this._templateIdToCustomTemplate.get(e):null}async addPortalTemplate(e){if(!this.portal||!(e!=null&&e.id))return;try{e.loaded||await e.load()}catch{return void this.applyTemplate(this.defaultTemplate)}const i=new Ab({type:"browse-template",layoutInfoTaskUrl:this._layoutInfoTaskUrl,label:e.title,layoutItem:e});this._templateIdToCustomTemplate.set(i.id,i),this.browseTemplates.add(i)}removePortalTemplate(e){e.layoutItem&&this.templateOptions.id===e.layoutItem.id&&(this.defaultTemplate?this.applyTemplate(this.defaultTemplate):this.templateOptions.reset()),this.browseTemplates.remove(e),this._templateIdToCustomTemplate.delete(e.id)}async applyTemplate(e){if(!e)return void this.templateOptions.reset();!e.layout||!this.templatesInfo||this.templatesInfo.layout.choiceList.includes(e.layout)||(this.defaultTemplate?e=this.defaultTemplate:this.templateOptions.reset());const i=e.layout?this.effectiveTemplateCustomTextElements[e.layout]:void 0;await this.templateOptions.applyTemplate(e,i,this._customLayoutOptions)}async _loadResources(e){if(this.destroyed)return;await this._loadUrls(e);const[i,r]=await Promise.all([this._getLayoutToLayoutTemplateInfos(e),this._getPrintServiceTemplatesInfo(e)]);await this._loadAllTemplates(i,r,e),this._processPrintServiceTemplatesInfo(r),await this._processTemplateOptions(),this._updateOverLayItem()}async _processTemplateOptions(){const{layout:e,layoutItem:i}=this.templateOptions;if(e!=="map-only"&&!this.templateOptions.id){if(this._customLayoutOptions={legend:this.templateOptions.legendEnabled,northArrow:this.templateOptions.northArrowEnabled,scaleBar:this.templateOptions.scaleBarEnabled},i==null?void 0:i.id){try{i.loaded||await i.load()}catch{return void this.applyTemplate(this.defaultTemplate)}let r=this._templateIdToCustomTemplate.get(i.id);r||(r=new Ab({label:i.title,layoutItem:i,layoutInfoTaskUrl:this._layoutInfoTaskUrl}),this._templateIdToCustomTemplate.set(r.id,r)),await this.applyTemplate(r)}else if(e){const r=this.defaultTemplates.find(n=>n.layout===this.templateOptions.layout)??this.printServiceTemplates.find(n=>n.layout===this.templateOptions.layout);await this.applyTemplate(r??this.defaultTemplate)}}}async _loadPortal(e){try{await this.portal.load(e)}catch(i){throw new G("print:could-not-load-portal","Cannot load print resource information from portal",{error:i,url:this.effectivePrintServiceUrl})}}async _loadUrls(e){var r,n;if(this.printServiceUrl)this._set("effectivePrintServiceUrl",this.printServiceUrl),await this._updateLayoutInfoTaskUrl(this.effectivePrintServiceUrl);else{await this._loadPortal(e);const{printTask:s,asyncPrintTask:o,layoutInfoTask:a}=((r=this.portal)==null?void 0:r.helperServices)??{};this._set("effectivePrintServiceUrl",s==null?void 0:s.url),this._asyncPrintTaskUrl=o==null?void 0:o.url,await this._updateLayoutInfoTaskUrl((a==null?void 0:a.url)||this.effectivePrintServiceUrl)}const i=(n=this.effectivePrintServiceUrl)==null?void 0:n.toLowerCase().split("/");if(!(i!=null&&i.includes("gpserver")))throw new G("print:invalid-print-service-url","Can't fetch print templates information from provided URL",{url:this.effectivePrintServiceUrl})}async _updateLayoutInfoTaskUrl(e,i){if(!e)return;const r=(await sJe(e,i)).find(n=>n.includes("Get Layout Templates Info"));r&&(this._layoutInfoTaskUrl=e.replace(DJe,`$1${encodeURI(r)}`))}_getPortalDefaultTemplates(e,i){var r,n,s,o,a;return((a=(o=(s=(n=(r=this.portal)==null?void 0:r.helperServices)==null?void 0:n.printTask)==null?void 0:s.templates)==null?void 0:o.filter(l=>l.layout.toLowerCase()!=="map_only"&&(!i||i.includes(Mb(l.layout)))))==null?void 0:a.map(l=>{const u=Ab.fromJSON(l);if(u.type="default-template",u.layoutInfoTaskUrl=this._layoutInfoTaskUrl,u.layout){const p=e.get(u.layout);p&&u.setLayoutTemplateInfo(p)}return u}))??[]}async _getPortalCustomTemplates(e){if(this.printServiceUrl||!this.portal)return[];const{layoutGroupQuery:i,user:r}=this.portal,n=IQ.test(this.portal.url),s=r==null?void 0:r.userLicenseTypeId,o=s&&NJe.has(s);if(!i||n&&!o)return[];const a=new sa({query:i,disableExtraQuery:!0}),l=await this.portal.queryGroups(a,e);if(!l.total)return[];const u=l.results[0],p=new sa({num:100,query:"type:Layout",sortField:u.sortField,sortOrder:u.sortOrder??void 0}),m=(await u.queryItems(p,e)).results;return m.length?m.map(g=>(this.portalTemplateIds.push(g.id),new Ab({type:"default-template",label:g.title,layoutItem:g,layoutInfoTaskUrl:this._layoutInfoTaskUrl}))):[]}async _loadAllTemplates(e,i,r){var o;let n=!1;const s=(o=i==null?void 0:i.layout)==null?void 0:o.choiceList;if(this.includeDefaultTemplates&&this.portal&&!this.printServiceUrl){const a=this._getPortalDefaultTemplates(e,s);n=!!a.length,this.defaultTemplates.addMany(a);const l=await this._getPortalCustomTemplates(r);this.defaultTemplates.addMany(l);for(const u of this.defaultTemplates)this._templateIdToCustomTemplate.set(u.id,u)}n||e.forEach((a,l)=>{if(!s||s.includes(l)){const u=new Ab({type:"print-service-template",layout:l,layoutInfoTaskUrl:this._layoutInfoTaskUrl});u.setLayoutTemplateInfo(a),this.printServiceTemplates.add(u),this._templateIdToCustomTemplate.set(u.id,u)}})}_processPrintServiceTemplatesInfo(e){var r;this._set("templatesInfo",e);const i=(r=e==null?void 0:e.layout)==null?void 0:r.defaultValue;if(i&&i!=="map-only"){const n=this.defaultTemplates.find(s=>s.layout===i)??this.printServiceTemplates.find(s=>s.layout===i)??this.defaultTemplates.at(0)??this.printServiceTemplates.at(0);this._set("defaultTemplate",n)}}async _getLayoutToLayoutTemplateInfos(e){const i=await n0e(this._layoutInfoTaskUrl,void 0,e),r=new Map,n={};for(const s of i){const o=Mb(s.layoutTemplate);r.set(o,s),n[o]=s.layoutOptions.customTextElements}return this._serviceTemplateCustomTextElements=Object.freeze(n),r}async _getPrintServiceTemplatesInfo(e){let i;try{({data:i}=await bt(this.effectivePrintServiceUrl,{...e,query:{f:"json"},timeout:this.printTimeout}))}catch(o){throw vn(o)?o:new G("print:unavailable-service-info","Can't fetch templates info from service",{error:o})}const{parameters:r}=i,n=r.find(({name:o})=>o==="Format"),s=r.find(({name:o})=>o==="Layout_Template");return{format:this._getFormat(n),layout:this._getLayout(s)}}_getFormat(e){const i=this.allowedFormats==="all"?e.choiceList:e.choiceList.filter(o=>typeof this.allowedFormats!="string"&&this.allowedFormats.some(a=>new RegExp(`\\b${a}\\b`,"i").test(o))),r=(i.length?i:e.choiceList).map(o=>_$.fromJSON(o)).filter(pn),n=_$.fromJSON(e.defaultValue),s=r.some(o=>new RegExp(`\\b${n}\\b`,"i").test(o))?n:r[0];return{choiceList:r,defaultValue:s}}_getLayout(e){const i=e.choiceList.filter(a=>a.toLowerCase()!=="map_only"),r=this.allowedLayouts==="all"?i:i.filter(a=>this.allowedLayouts.includes(Mb(a))),n=(r.length?r:i).map(Mb).filter(pn),s=Mb(e.defaultValue),o=n.includes(s)?s:n.find(a=>/(?=.*letter)(?=.*landscape)/i.test(a))??n.find(a=>/(?=.*a4)(?=.*landscape)/i.test(a))??n[0];return{choiceList:n,defaultValue:o}}_getOverlayItem(){return this._overlayItem||(this._overlayItem=new PJe({strokeDash:[5],strokeWidth:2,strokeColor:[30,144,255,255]})),this._overlayItem}_enablePrintPreview(){var r,n,s;if(!((r=this.view)!=null&&r.overlay))return;const e=this.templateOptions,i=this._getOverlayItem();this.addHandles([Oe(()=>{var o,a,l,u;return[e.width,e.height,e.scaleEnabled,e.scale,e.layout,e.layoutItem,e.id,e.state,(o=this.view)==null?void 0:o.scale,(a=this.view)==null?void 0:a.size,(l=this.view)==null?void 0:l.state.paddedViewState.size,(u=this.view)==null?void 0:u.state.padding,this.loaded]},()=>this._updateOverLayItem(),It),(n=this.view)==null?void 0:n.on("drag",["Shift"],o=>this._handleDrag(o),bc.WIDGET),(s=this.view)==null?void 0:s.on("key-down",["Escape"],()=>this._resetDrag(),bc.WIDGET)],"overlay-handler"),this.view.overlay.addItem(i)}_updateOverLayItem(){var O;if(!this.view)return;const e=this.templateOptions,i=this._getOverlayItem(),r=((O=e.layoutItem)==null?void 0:O.id)??e.layout,n=this.view,s=n.spatialReference,[o,a]=n.state.paddedViewState.size,l=n.state.padding;let u=0,p=0;if(r==="map-only")e.width!=null&&e.height!=null&&(u=e.width,p=e.height);else if(r){const _=e.id?this._templateIdToCustomTemplate.get(e.id):null,{webMapFrameSize:x,pageUnits:T}=(_==null?void 0:_.layoutTemplateInfo)??{};let E=!1;if(x&&T)if(this._isFreeHand){const k=x[0]/x[1];u=this._freeHandWidth,p=this._freehandHeight,u>p?p=u/k:u=p*k}else{const k=VJe.fromJSON(T.toLowerCase()),M=s.unit;vd(k)===vd(M)?(u=Dt(x[0],k,M),p=Dt(x[1],k,M)):(E=!0,u=x[0],p=x[1])}if(!this._isFreeHand)if(e.scaleEnabled&&e.scale){const k=E?Math.min(o/u,a/p):ma(s)*YQ*e.dpi;u*=k,p*=k}else if(u===0||p===0)u=o,p=a;else{const k=(o-.1*o)/u,M=(a-.1*a)/p,R=Math.min(k,M);u*=R,p*=R}}const{scaleEnabled:m,scale:g}=e,w=m&&g?g/this.view.scale:1;if(i.boxWidth=u*w||o,i.boxHeight=p*w||a,l&&(i.padding=l),i.backgroundWidth=o??0,i.backgroundHeight=a??0,this.loadStatus==="loading")i.strokeColor=Ute;else if(this.loadStatus==="loaded")switch(this.templateOptions.state){case"pending":i.strokeColor=Ute;break;case"ready":i.strokeColor=RJe;break;case"error":i.strokeColor=LJe}}_resetDrag(){this._isFreeHand=!1,this._updateOverLayItem()}_handleDrag(e){switch(e.action){case"start":this._start();break;case"update":this._update(e);break;case"end":this._end()}e.stopPropagation()}_start(){this._isFreeHand=!0}_update(e){const i=this._getOverlayItem(),{x:r,y:n}=e,{x:s,y:o}=e.origin;r>s?(i.x=s,i.boxWidth=r-s):(i.x=r,i.boxWidth=s-r),n>o?(i.y=o,i.boxHeight=n-o):(i.y=n,i.boxHeight=o-n)}_end(){const e=this._getOverlayItem();if(!this.view||e.x==null||e.y==null)return;const i=this.view,r=i.toMap(Xr(e.x+.5*e.boxWidth,e.y+.5*e.boxHeight));e.x=null,e.y=null,i.goTo({center:r}),this._freeHandWidth=e.boxWidth,this._freehandHeight=e.boxHeight,this.templateOptions.layout==="map-only"&&(this.templateOptions.width=this._freeHandWidth,this.templateOptions.height=this._freehandHeight),this.templateOptions.scale=this.view.scale,this._updateOverLayItem()}};h([f()],gi.prototype,"_serviceTemplateCustomTextElements",void 0),h([f()],gi.prototype,"_templateIdToCustomTemplate",void 0),h([f()],gi.prototype,"allowedFormats",void 0),h([f()],gi.prototype,"allowedLayouts",void 0),h([f({type:gw})],gi.prototype,"browseTemplates",void 0),h([f({type:gw})],gi.prototype,"defaultTemplates",void 0),h([f()],gi.prototype,"error",void 0),h([f()],gi.prototype,"extraParameters",void 0),h([f()],gi.prototype,"includeDefaultTemplates",void 0),h([f({readOnly:!0})],gi.prototype,"effectivePrintServiceUrl",null),h([f()],gi.prototype,"effectiveTemplateCustomTextElements",null),h([f({type:Je})],gi.prototype,"outSpatialReference",void 0),h([f({type:Lr})],gi.prototype,"portal",void 0),h([f()],gi.prototype,"portalTemplateIds",void 0),h([f({type:gw})],gi.prototype,"printServiceTemplates",void 0),h([f({readOnly:!0})],gi.prototype,"defaultTemplate",void 0),h([f()],gi.prototype,"showPrintAreaEnabled",void 0),h([f()],gi.prototype,"printServiceUrl",void 0),h([f()],gi.prototype,"printTimeout",void 0),h([f({readOnly:!0})],gi.prototype,"state",null),h([f({readOnly:!0})],gi.prototype,"templatesInfo",void 0),h([f()],gi.prototype,"updateDelay",void 0),h([f()],gi.prototype,"view",void 0),h([f()],gi.prototype,"templateCustomTextElements",void 0),h([f({type:s0e})],gi.prototype,"templateOptions",void 0),gi=h([A("esri.widgets.Print.PrintViewModel")],gi);const o0e=gi;function Mx({level:t,class:e,...i},r){const n=a0e(t);return P(`h${n}`,{...i,"aria-level":String(n),class:zb(lr.heading,e),role:"heading"},r)}function a0e(t){return Po(Math.ceil(t),1,6)}function jJe(t,e=1){return a0e(t+e)}const zJe={left:"esri-icon-left",plus:"esri-icon-plus",right:"esri-icon-right",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass"},l0e=Te.ofType(Gge),u0e="map-only";var Nt;(function(t){t.layout="layoutTab",t.mapOnly="mapOnlyTab",t.export="exportTab"})(Nt||(Nt={}));const _t="esri-print",je={base:_t,headerTitle:`${_t}__header-title`,layoutTabList:`${_t}__layout-tab-list`,layoutTab:`${_t}__layout-tab`,layoutSection:`${_t}__layout-section`,mapOnlySection:`${_t}__map-only-section`,panelItemsCentered:`${_t}__panel-items--centered`,loader:`${_t}__loader`,swapButton:`${_t}__swap-button`,printButton:`${_t}__export-button`,printButtonSection:`${_t}__export-button-section`,printButtonSectionDivider:`${_t}__export-button-section--divider`,templateSelectContainer:`${_t}__template-select-container`,templateSelectIcon:`${_t}__template-select-icon`,templateSelectError:`${_t}__template-select-error`,templateSelectArrow:`${_t}__template-select-arrow`,formSectionContainer:`${_t}__form-section-container`,advancedOptionsSection:`${_t}__advanced-options-section`,advancedOptionsContainer:`${_t}__advanced-options-container`,browseTemplateButtonContainer:`${_t}__browse-template-button-container`,browseTemplateButtonContainerFilter:`${_t}__browse-template-button-container-filter`,exportedFilesContainer:`${_t}__export-panel-container`,exportedFilesTitle:`${_t}__export-title`,exportedFile:`${_t}__exported-file`,exportedFileLinkTitle:`${_t}__exported-file-link-title`,exportedFileLinkDescription:`${_t}__exported-file-link-description`,exportedFilesEmpty:`${_t}__exported-files-empty`,printWidgetContainer:`${_t}__container`,content:`${_t}__content`,panelContainer:`${_t}__panel-container`,scaleInfoContainer:`${_t}__scale-info-container`,scaleInputContainer:`${_t}__scale-input-container`,scaleInput:`${_t}__scale-input`,sizeContainer:`${_t}__size-container`,panelError:`${_t}__panel--error`,exportedFileLoader:`${_t}__exported-file--loader`,exportSection:`${_t}__export-section`,exportSectionCentered:`${_t}__export-section--centered`,templateButtonContainer:`${_t}__template-button-container`,templateDoneButton:`${_t}__template-done-button`,templateSelectFlowItemContainer:`${_t}__template-select-flow-item-container`,templateSelectFlowItemContent:`${_t}__template-select-flow-item-content`,templateSelectFlowItemListHeading:`${_t}__template-select-flow-item-list-heading`,srLabel:`${_t}__sr-label`,invalidWkidText:`${_t}__invalid-wkid-text`};function UJe(t,e,i,r){const n=i/e,s=r/e;return{width:Math.round(t*n),height:Math.round(t*s)}}function QJe(t){return!isNaN(t)&&t>0}function Ok(t){return(t==null?void 0:t.toLowerCase())===u0e}function BJe(t){var r;const{state:e,extension:i}=t;switch(e){case"pending":return"spinner";case"error":return"exclamation-mark-circle";default:return(r=i==null?void 0:i.toLowerCase())!=null&&r.includes("pdf")?"file-pdf":"file"}}const qJe=new nt({inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"}),Qte=new Map([["a3-landscape","a3-landscape"],["a3-portrait","a3-portrait"],["a4-landscape","a4-landscape"],["a4-portrait","a4-portrait"],["letter-ansi-a-landscape","ansi-a-landscape"],["letter-ansi-a-portrait","ansi-a-portrait"],["tabloid-ansi-b-landscape","ansi-b-landscape"],["tabloid-ansi-b-portrait","ansi-b-portrait"]]);let Kt=class extends Tr{constructor(e,i){super(e,i),this._activeTabFocusRequested=!1,this._awaitingServerResponse=!1,this._exportedFileNameMap={},this._selectedTab=Nt.layout,this._pendingExportScroll=!1,this._rootNode=null,this._selectedTemplate=null,this._formats=[],this._showTemplates=!1,this._isValidSpatialReference=!0,this.allowedFormatsForSaving=null,this.browseTemplateButtonOnClick=null,this.exportedLinks=new l0e,this.headerVisible=!0,this.headingLevel=3,this.includeOrganizationTemplates=!0,this.messagesCommon=null,this.messagesUnits=null,this.saveExportEnabled=!1,this.saveExportHidden=!0,this.saveAsButtonCallback=null,this.viewModel=new o0e,this._onInput=r=>{this._selectedTab===Nt.layout?this.templateOptions.title=r.currentTarget.value:this._selectedTab===Nt.mapOnly&&(this.templateOptions.fileName=r.currentTarget.value)},this._handleLinkClick=r=>{const n=r.currentTarget["data-item"];if(!n||n.state!=="ready"||!n.url)return;const s=eI(this.viewModel.effectivePrintServiceUrl),o=n.url,a=document.createElement("a");if(a.target="_blank",a.href=o,a.rel="noreferrer",a.download=n.formattedName??"",!s)return a.click(),void r.stopPropagation();r.preventDefault();const l=new URL(o);l.searchParams.set("token",s),a.href=l.href,a.click(),a.href=o},this._focusOnTabChange=this._focusOnTabChange.bind(this)}initialize(){this.addHandles([Oe(()=>{var n;return[this.templateOptions.format,(n=this.viewModel.templatesInfo)==null?void 0:n.format]},()=>{var o;const{templatesInfo:n}=this.viewModel;if(!n)return;if(this._formats.length!==n.format.choiceList.length){const a=_$.apiValues;this._formats=n.format.choiceList.map(l=>{const u=a.find(p=>new RegExp(`\\b${p}\\b`,"i").test(l))??l;return{value:u,label:l===u?l.toUpperCase():l}}).sort((l,u)=>l.label.localeCompare(u.label))}const s=this._formats.some(({value:a})=>new RegExp(`\\b${a}\\b`,"i").test(this.templateOptions.format));if(!(!n.format.defaultValue||s)){const a=(o=this._formats.find(({value:l})=>new RegExp(`\\b${l}\\b`,"i").test(n.format.defaultValue)))==null?void 0:o.value;a&&(this.templateOptions.format=a)}}),Oe(()=>[this.templateOptions.id,this.viewModel.loaded],async()=>{const{layout:n}=this.templateOptions;this._selectedTab=Ok(n)?Nt.mapOnly:Nt.layout,this._selectedTab===Nt.layout&&this.viewModel.loaded&&(this._selectedTemplate=this.viewModel.getLayoutTemplateById(this.templateOptions.id))}),Oe(()=>this.templateOptions.dpi,n=>{n<=0&&(this.templateOptions.dpi=1)}),Oe(()=>{var n;return(n=this.viewModel.view)==null?void 0:n.scale},n=>{!n||this.templateOptions.scaleEnabled&&this.templateOptions.scale||(this.templateOptions.scale=n)})]);for(const{name:n,extension:s}of this.exportedLinks)n&&s&&this._updateExportedFileNameMap(`${n}${s}`);const{height:e,width:i}=this.templateOptions;this.templateOptions.width=i||800,this.templateOptions.height=e||1100;const r=setTimeout(()=>{this._awaitingServerResponse=!0,this.scheduleRender()},500);this.viewModel.load().then(()=>{clearTimeout(r),this._awaitingServerResponse=!1})}loadDependencies(){return um({action:()=>J(()=>Promise.resolve().then(()=>lQ),void 0),block:()=>J(()=>import("./index-CVZH03AW.js"),__vite__mapDeps([232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247])),button:()=>J(()=>Promise.resolve().then(()=>K2),void 0),checkbox:()=>J(()=>import("./index-DaKNdJ3v.js"),[]),combobox:()=>J(()=>import("./index-DO-DEGns.js"),__vite__mapDeps([248,249,250,236,235,237,251])),"combobox-item":()=>J(()=>import("./index-fJVedPAu.js"),__vite__mapDeps([252,251])),flow:()=>J(()=>import("./index-Dj_kdE3U.js"),[]),"flow-item":()=>J(()=>import("./index-DFlwSnKt.js"),__vite__mapDeps([253,243,235,236,237,244,245,246,247,233,254])),icon:()=>J(()=>Promise.resolve().then(()=>gP),void 0),input:()=>J(()=>Promise.resolve().then(()=>sft),void 0),"input-number":()=>J(()=>import("./index-CBk2QAmo.js"),[]),label:()=>J(()=>import("./index-BgzM0QQy.js"),[]),list:()=>J(()=>import("./index-DnDa7YSf.js"),__vite__mapDeps([255,233,250,236,256])),"list-item":()=>J(()=>import("./index-BQkGlfCK.js"),__vite__mapDeps([257,234,235,236,237,238,239,240,241,242,256,258])),loader:()=>J(()=>Promise.resolve().then(()=>H2e),void 0),switch:()=>J(()=>import("./index-DQ7Gl0m9.js"),[]),chip:()=>J(()=>import("./index-Cp_tZagG.js"),[]),popover:()=>J(()=>import("./index-4WWG3ort.js"),__vite__mapDeps([243,235,236,237,244,245])),link:()=>J(()=>import("./index-B9m2VXWY.js"),[])})}destroy(){this.viewModel.destroy()}get allowedFormats(){return this.viewModel.allowedFormats}set allowedFormats(e){this.viewModel.allowedFormats=e}get allowedLayouts(){return this.viewModel.allowedLayouts}set allowedLayouts(e){this.viewModel.allowedLayouts=e}get error(){return this.viewModel.error}get extraParameters(){return this.viewModel.extraParameters}set extraParameters(e){this.viewModel.extraParameters=e}get icon(){return"print"}set icon(e){this._overrideIfSome("icon",e)}get includeDefaultTemplates(){return this.viewModel.includeDefaultTemplates}set includeDefaultTemplates(e){this.viewModel.includeDefaultTemplates=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get outSpatialReference(){return this.viewModel.outSpatialReference}set outSpatialReference(e){this.viewModel.outSpatialReference=e}get portal(){return this.viewModel.portal}set portal(e){this.viewModel.portal=e}get showPrintAreaEnabled(){return this.viewModel.showPrintAreaEnabled}set showPrintAreaEnabled(e){this.viewModel.showPrintAreaEnabled=e}get printServiceUrl(){return this.viewModel.printServiceUrl}set printServiceUrl(e){this.viewModel.printServiceUrl=e}get templateCustomTextElements(){return this.viewModel.templateCustomTextElements}set templateCustomTextElements(e){this.viewModel.templateCustomTextElements=e}get templateOptions(){return this.viewModel.templateOptions}set templateOptions(e){this.viewModel.templateOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var ct,ot,ai,St,ri,Ft,Er,en,kr,ya,ga,to,gl,va,vl,bl,ba,Ou,is,wn,Uc,Su;const{messages:e,templateOptions:i,viewModel:r,view:n}=this,{attributionEnabled:s,author:o,copyright:a,dpi:l,format:u,height:p,layout:m,layoutItem:g,legendEnabled:w,northArrowEnabled:O,scaleBarEnabled:_,scaleEnabled:x,scale:T,width:E}=i,k=r.state!=="ready"||this._awaitingServerResponse||!(m||g),M=this._renderTitleOrFileNameSection(),R=P("div",{class:je.formSectionContainer},P("calcite-label",null,e.fileFormatTitle,P("calcite-combobox",{clearDisabled:!0,label:e.formatDefaultOption,maxItems:6,placeholder:e.formatDefaultOption,selectionMode:"single-persist",onCalciteComboboxChange:({currentTarget:nr})=>{var ks;this.templateOptions.format=((ks=nr.selectedItems[0])==null?void 0:ks.value)??"pdf"}},this._formats.map(({value:nr,label:ks},qO)=>P("calcite-combobox-item",{key:`file-format-${qO}`,selected:nr===this.templateOptions.format,textLabel:ks,value:nr}))))),D=P("calcite-label",{layout:"inline"},P("calcite-switch",{checked:this.showPrintAreaEnabled,onCalciteSwitchChange:nr=>{this.showPrintAreaEnabled=!!nr.currentTarget.checked}}),e.printPreview),L=P("div",null,P("div",{class:je.formSectionContainer},P("calcite-label",null,e.template,P("calcite-block",{class:je.templateSelectContainer,collapsible:!1,description:this._getPageSizeLabel(this._selectedTemplate),heading:this._getTemplateLabel(this._selectedTemplate,!0),key:"template-select-block",loading:((ct=this._selectedTemplate)==null?void 0:ct.state)==="loading",onclick:()=>this._showTemplates=!0,onkeydown:nr=>{nr.key!=="Enter"&&nr.key!==" "||(this._showTemplates=!0)},tabIndex:0},P("calcite-icon",{class:je.templateSelectIcon,icon:((ot=this._selectedTemplate)!=null&&ot.layout?Qte.get(this._selectedTemplate.layout):null)||"custom-print",key:"template-select-icon",scale:"l",slot:"content-start"}),((ai=this._selectedTemplate)==null?void 0:ai.state)==="error"?P("calcite-icon",{class:je.templateSelectError,icon:"exclamation-mark-circle",key:"template-select-error",scale:"s",slot:"actions-end"}):null,P("calcite-icon",{class:je.templateSelectArrow,icon:S2()?"chevron-left":"chevron-right",key:"template-select-arrow",scale:"s",slot:"actions-end"})))),D),F=P("div",{class:je.formSectionContainer},P("calcite-label",null,e.dpi,P("calcite-input-number",{bind:this,"data-input-name":"dpi",min:1,value:`${l}`,onCalciteInputNumberInput:this._handleDPIChange}))),j=P("div",{class:je.formSectionContainer},P("calcite-label",null,P("div",{class:je.srLabel},e.outSpatialReference,P("calcite-link",{href:"https://developers.arcgis.com/rest/services-reference/enterprise/using-spatial-references/",target:"_blank"},"(WKID)")),P("calcite-input-number",{bind:this,"data-input-name":"outSpatialReference",integer:!0,numberButtonType:"none",value:((ri=(St=r.outSpatialReference)==null?void 0:St.wkid)==null?void 0:ri.toString())??"",onCalciteInputNumberInput:({currentTarget:nr})=>{const ks=$P(nr.value);r.outSpatialReference=Number.isNaN(ks)||ks==null?null:new Je({wkid:ks}),this._isValidSpatialReference=!r.outSpatialReference||$o(r.outSpatialReference)}}),this._isValidSpatialReference?null:P("div",{class:je.invalidWkidText,key:`out-sr-${(Ft=r.outSpatialReference)==null?void 0:Ft.wkid}`},e.invalidWkid))),B=P("div",{class:this.classes(je.scaleInfoContainer,je.formSectionContainer)},P("calcite-label",{layout:"inline"},P("calcite-checkbox",{bind:this,checked:x,"data-option-name":"scaleEnabled",onCalciteCheckboxChange:this._toggleInputValue}),e.scale),P("div",{class:je.scaleInputContainer},P("calcite-input-number",{"aria-label":e.scaleLabel,"aria-valuenow":`${T}`,bind:this,class:je.scaleInput,"data-input-name":"scale",disabled:!x,value:`${T}`,onCalciteInputNumberInput:this._updateNumberInputValue}),P("calcite-button",{appearance:"outline","aria-label":e.reset,bind:this,disabled:!x,iconStart:"refresh",kind:"neutral",onclick:this._resetToCurrentScale}))),W=P("div",{"aria-labelledby":`${this.id}__advancedOptionsForLayout`,class:je.advancedOptionsContainer,key:"advanced-section-for-layout"},B,((kr=(en=(Er=this._selectedTemplate)==null?void 0:Er.layoutTemplateInfo)==null?void 0:en.layoutOptions)==null?void 0:kr.hasAuthorText)??1?P("div",{class:je.formSectionContainer,key:"author-info"},P("calcite-label",null,e.author,P("calcite-input",{bind:this,"data-input-name":"author",value:o??"",onCalciteInputInput:this._updateInputValue}))):null,((to=(ga=(ya=this._selectedTemplate)==null?void 0:ya.layoutTemplateInfo)==null?void 0:ga.layoutOptions)==null?void 0:to.hasCopyrightText)??1?P("div",{class:je.formSectionContainer,key:"copyright-text"},P("calcite-label",null,e.copyright,P("calcite-input",{bind:this,"data-input-name":"copyright",value:a??"",onCalciteInputInput:this._updateInputValue}))):null,F,j,this._renderCustomTextElementSection(),((vl=(va=(gl=this._selectedTemplate)==null?void 0:gl.layoutTemplateInfo)==null?void 0:va.layoutOptions)==null?void 0:vl.hasLegend)??1?P("div",{class:je.formSectionContainer,key:"legend-info"},P("calcite-label",{layout:"inline"},P("calcite-checkbox",{bind:this,checked:!!w,"data-option-name":"legendEnabled",onCalciteCheckboxChange:this._toggleInputValue}),e.legend)):null,(ba=(bl=this._selectedTemplate)==null?void 0:bl.mapSurroundInfoOptions)!=null&&ba.northArrow.length?P("div",{class:je.formSectionContainer,key:"north-arrow"},P("calcite-label",{layout:"inline"},P("calcite-checkbox",{bind:this,checked:!!O,"data-option-name":"northArrowEnabled",onCalciteCheckboxChange:this._toggleInputValue}),e.northArrow)):null,(is=(Ou=this._selectedTemplate)==null?void 0:Ou.mapSurroundInfoOptions)!=null&&is.scaleBar.length?P("div",{class:je.formSectionContainer,key:"scale-bar"},P("calcite-label",{layout:"inline"},P("calcite-checkbox",{bind:this,checked:!!_,"data-option-name":"scaleBarEnabled",onCalciteCheckboxChange:this._toggleInputValue}),e.scaleBar)):null),ie=P("div",{"aria-labelledby":`${this.id}__advancedOptionsForMapOnly`,class:je.advancedOptionsContainer},B,F,j,P("div",{class:je.formSectionContainer},P("calcite-label",{layout:"inline"},P("calcite-checkbox",{bind:this,checked:s,"data-option-name":"attributionEnabled",onCalciteCheckboxChange:this._toggleInputValue}),e.attribution)),this._renderCustomTextElementSection()),oe=this.exportedLinks.toArray(),ae=this._renderExportedLinkItems(oe),Ee={[je.exportSectionCentered]:!oe.length},ue=this._selectedTab===Nt.layout?P("section",{"aria-labelledby":`${this.id}__layoutTab`,class:je.layoutSection,id:`${this.id}__layoutContent`,key:"esri-print__layoutContent",role:"tabpanel"},P("div",{class:je.panelContainer},((Su=(Uc=(wn=this._selectedTemplate)==null?void 0:wn.layoutTemplateInfo)==null?void 0:Uc.layoutOptions)==null?void 0:Su.hasTitleText)??1?M:null,L,this._selectedTab===Nt.layout?R:null,P("calcite-block",{"aria-label":e.advancedOptions,class:this.classes(je.panelContainer,je.advancedOptionsSection),collapsible:!0,disabled:!(m||g!=null&&g.id),heading:e.advancedOptions,id:"advancedOptionsForLayout",key:"advanced-options-for-layout"},W))):this._selectedTab===Nt.mapOnly?P("section",{"aria-labelledby":`${this.id}__mapOnlyTab`,class:je.mapOnlySection,id:`${this.id}__mapOnlyContent`,key:"esri-print__mapOnlyContent",role:"tabpanel"},P("div",{class:je.panelContainer},M,R,P("div",null,P("div",{class:this.classes(je.sizeContainer,je.formSectionContainer)},P("calcite-label",null,e.width,P("calcite-input-number",{bind:this,"data-input-name":"width",value:`${E}`,onCalciteInputNumberInput:this._updateNumberInputValue})),P("calcite-label",null,e.height,P("calcite-input-number",{bind:this,"data-input-name":"height",value:`${p}`,onCalciteInputNumberInput:this._updateNumberInputValue})),P("button",{"aria-label":e.swap,bind:this,class:this.classes(lr.widgetButton,je.swapButton,zJe.swap),onclick:this._switchInput,type:"button"})),D),P("calcite-block",{"aria-label":e.advancedOptions,class:this.classes(je.panelContainer,je.advancedOptionsSection),collapsible:!0,heading:e.advancedOptions,id:"advancedOptionsForMapOnly",key:"advanced-options-for-map-only"},ie))):P("section",{"aria-labelledby":`${this.id}__exportTab`,class:this.classes(je.exportSection,Ee),id:`${this.id}__exportContent`,key:"esri-print__exportContent",role:"tabpanel"},P("div",{class:je.panelContainer},P("div",{afterUpdate:this._scrollExportIntoView,bind:this,class:je.exportedFilesContainer},oe.length===0?P("div",{class:je.exportedFilesEmpty},P("calcite-icon",{icon:"file",scale:"l"}),P("div",null,P(Mx,{class:je.exportedFilesTitle,level:this.headingLevel},e.noExportedFiles),P("div",null,e.exportHint))):ae))),he=(n==null?void 0:n.type)!=="2d",ye=P("div",{class:je.panelError},n?he?e.sceneViewError:e.serviceError:e.noViewError),Ae=oe.some(({state:nr})=>nr==="pending"),Q=P("div",{class:je.content,key:"panel"},P("div",null,P("ul",{bind:this,class:je.layoutTabList,onclick:this._toggleLayoutPanel,onkeydown:this._handleLayoutPanelKeyDown,role:"tablist"},P("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":`${this._selectedTab===Nt.layout}`,class:je.layoutTab,"data-tab-id":Nt.layout,id:`${this.id}__layoutTab`,role:"tab",tabIndex:0},e.layoutTab),P("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":`${this._selectedTab===Nt.mapOnly}`,class:je.layoutTab,"data-tab-id":Nt.mapOnly,id:`${this.id}__mapOnlyTab`,role:"tab",tabIndex:0},e.mapOnlyTab),P("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":`${this._selectedTab===Nt.export}`,class:je.layoutTab,"data-tab-id":Nt.export,id:`${this.id}__exportedFilesTab`,role:"tab",tabIndex:0},Ae?P("calcite-loader",{inline:!0,label:"loading",scale:"s"}):null,e.exportsTab)),ue),this._selectedTab!==Nt.export?P("div",{class:this.classes(je.printButtonSection,!this.saveExportHidden&&this.portal?je.printButtonSectionDivider:null),key:"export-button-section"},!this.saveExportHidden&&this.portal?P("calcite-label",{layout:"inline"},P("calcite-checkbox",{bind:this,checked:this.saveExportEnabled,onCalciteCheckboxChange:nr=>{this.saveExportEnabled=!!nr.currentTarget.checked}}),e.saveExportToMyContent):null,P("calcite-button",{"aria-label":e.exportDescription,bind:this,class:this.classes(je.printButton),disabled:k||!(m||g!=null&&g.id)&&!u,onclick:this._handlePrintMap,scale:"l",width:"full"},e.export)):null),ge=P("calcite-flow",{key:"root-flow"},P("calcite-flow-item",{bind:this,key:"root-flow-item",selected:!this._showTemplates},P("div",{class:je.printWidgetContainer},this.headerVisible?P("header",{class:je.headerTitle},e.export):null,this.error||he||!n?ye:Q)),this._renderChooseTemplateFlowItem()),Ve=r.state==="initializing",Ne=Ve?this._renderLoader():ge,ke={[je.panelItemsCentered]:Ve};return P("div",{bind:this,class:this.classes(je.base,lr.widget,lr.panel,ke)},Ne)}_getPageSizeLabel(e){if(!e)return;const i=e.layoutTemplateInfo;if(!i)return;const r=qJe.fromJSON(i.pageUnits.toLowerCase());return`${pa(i.pageSize[0])}  ${pa(i.pageSize[1])} ${r7(this.messagesUnits,r,"abbr")}`}_getTemplateLabel(e,i=!1){if(!e)return i?this.messages.selectTemplate:this.messages.untitled;const{label:r,layout:n,layoutItem:s,type:o}=e;if(o==="print-service-template"&&this.messages[n])return this.messages[n];const a=r??n??(s==null?void 0:s.id);return(a==null?void 0:a.replaceAll("_"," "))??this.messages.untitled}_getPortalTemplates(){const{portalTemplateIds:e}=this.viewModel;return this.includeDefaultTemplates&&this.includeOrganizationTemplates?this.viewModel.defaultTemplates.toArray().filter(({layout:i,layoutItem:r})=>!Ok(i)&&!!(r!=null&&r.id)&&e.includes(r.id)):[]}_getDefaultTemplates(){const{portalTemplateIds:e}=this.viewModel;return this.includeDefaultTemplates?this.viewModel.defaultTemplates.toArray().filter(({layout:i,layoutItem:r})=>!(Ok(i)||r!=null&&r.id&&e.includes(r.id))):[]}_getPrintServiceTemplates(){return this.includeDefaultTemplates&&this._getDefaultTemplates().length?[]:this.viewModel.printServiceTemplates.toArray().filter(({layout:e})=>!Ok(e))}_renderLayoutTemplates(e,i=!1,r=!1){return i&&e.sort((n,s)=>(n.label??"")>(s.label??"")?1:-1),e.map(n=>P("calcite-list-item",{description:this._getPageSizeLabel(n),key:`template-${n.id}-${n.id===this.templateOptions.id}`,label:this._getTemplateLabel(n),selected:n.id===this.templateOptions.id,title:n.description??"",value:n},P("calcite-icon",{icon:(n.layout?Qte.get(n.layout):null)||"custom-print",slot:"content-start"}),n.state==="loading"?P("calcite-loader",{inline:!0,key:`template-loader-${n.id}`,label:"loading",scale:"s",slot:"content-end"}):null,(n==null?void 0:n.state)==="error"?P("calcite-icon",{class:je.templateSelectError,icon:"exclamation-mark-circle",key:`template-error-${n.id}`,scale:"s",slot:"content-end"}):null,r?P("calcite-action",{icon:"trash",onclick:()=>this.viewModel.removePortalTemplate(n),slot:"actions-end",text:"delete"}):null))}_renderChooseTemplateFlowItem(){var u;if(!this._showTemplates)return null;const{messages:e}=this,i=IQ.test((u=this.portal)==null?void 0:u.url),r=this.viewModel.browseTemplates.toArray(),n=this._getPortalTemplates(),s=this._getDefaultTemplates(),o=this._getPrintServiceTemplates(),a=r.length+n.length+s.length+o.length>15,l=this.browseTemplateButtonOnClick?P("calcite-button",{appearance:"outline",class:a?je.browseTemplateButtonContainerFilter:je.browseTemplateButtonContainer,iconStart:"folder",key:"browse-template-button",onclick:this.browseTemplateButtonOnClick,slot:a?"filter-actions-end":"default"},a?null:e.browseTemplates):null;return P("calcite-flow-item",{bind:this,closable:!1,heading:e.chooseTemplate,key:"template-flow-item",selected:this._showTemplates,onCalciteFlowItemBack:p=>{p.preventDefault(),this._showTemplates=!1}},P("div",{class:je.templateSelectFlowItemContainer},P("div",{class:je.templateSelectFlowItemContent},a?null:l,P("calcite-list",{filterEnabled:a,filterProps:["label"],key:"template-list",label:e.templateList,selectionMode:"single-persist",onCalciteListChange:({currentTarget:p})=>{var m;return this.viewModel.applyTemplate((m=p.selectedItems[0])==null?void 0:m.value)}},a?l:null,r.length?P("div",{key:"my-templates"},P("div",{class:je.templateSelectFlowItemListHeading},e.myTemplates,i?P("calcite-chip",{appearance:"outline",kind:"neutral",label:e.beta,scale:"s"},e.beta):null),this._renderLayoutTemplates(r,!0,!0)):null,n.length?P("div",{key:"org-templates"},P("div",{class:je.templateSelectFlowItemListHeading},e.organizationTemplates,i?P("calcite-chip",{appearance:"outline",kind:"neutral",label:e.beta,scale:"s"},e.beta):null),this._renderLayoutTemplates(n)):null,r.length||n.length?s.length?P("div",{key:"default-templates"},P("div",{class:je.templateSelectFlowItemListHeading},e.defaultTemplates),this._renderLayoutTemplates(s,!0)):null:this._renderLayoutTemplates(s,!0),r.length||n.length?o.length?P("div",{key:"service-templates"},P("div",{class:je.templateSelectFlowItemListHeading},e.defaultTemplates),this._renderLayoutTemplates(o)):null:this._renderLayoutTemplates(o))),P("div",{class:je.templateButtonContainer},P("calcite-button",{class:je.templateDoneButton,onclick:()=>this._showTemplates=!1},this.messagesCommon.done))))}_renderCustomTextElementSection(){const{customTextElements:e}=this.templateOptions;return e?P("div",{class:je.formSectionContainer,key:"custom-text-elements"},e.map((i,r)=>{const[n,s]=Object.entries(i)[0];return n==="date"?null:P("calcite-label",{key:`custom-text-elements-${n}-${r}`},n,P("calcite-input",{bind:this,"data-input-custom":!0,"data-input-name":n,value:s??"",onCalciteInputInput:this._updateInputValue}))})):null}_renderTitleOrFileNameSection(){const{title:e,fileName:i,titlePlaceHolder:r,fileNamePlaceHolder:n}=this.messages,s=this._selectedTab===Nt.layout?e:i,o=this._selectedTab===Nt.layout?r:n,a=this._selectedTab===Nt.layout?this.templateOptions.title:this.templateOptions.fileName;return P("div",{class:je.formSectionContainer,key:s},P("calcite-label",null,s,P("calcite-input",{placeholder:o,value:a??"",onCalciteInputInput:this._onInput})))}_focusOnTabChange(e){if(!this._activeTabFocusRequested)return;const i=e.getAttribute("data-tab-id");(i==="layoutTab"&&this._selectedTab===Nt.layout||i==="mapOnlyTab"&&this._selectedTab===Nt.mapOnly||i==="exportTab"&&this._selectedTab===Nt.export)&&(e.focus(),this._activeTabFocusRequested=!1)}_renderLoader(){const e={[je.loader]:this._awaitingServerResponse};return P("div",{class:this.classes(e),key:"loader"})}_updateExportedFileNameMap(e){this._exportedFileNameMap[e]!==void 0?this._exportedFileNameMap[e]++:this._exportedFileNameMap[e]=0}_createFileLink(e,i){const r=i||this.messages.untitled,n=e.format.toLowerCase(),s=n.includes("png")?"png":n,o=r+s;return this._updateExportedFileNameMap(o),new Gge({name:r,extension:s,count:this._exportedFileNameMap[o]})}_resetToCurrentScale(){var e;this.templateOptions.scale=(e=this.viewModel.view)==null?void 0:e.scale}_updateCustomTextElementValue(e,i,r){e.find(n=>{const[s]=Object.entries(n)[0];return s===i})[i]=r}_updateInputValue(e){const i=e.currentTarget,r=i.getAttribute("data-input-name"),n=!!i["data-input-custom"],{templateOptions:s}=this;n?this._updateCustomTextElementValue(s.customTextElements,r,i.value):s[r]=i.value}_updateNumberInputValue(e){const i=e.currentTarget,r=i.getAttribute("data-input-name"),{templateOptions:n}=this,s=Number(i.value);if(QJe(s))n[r]=s;else{const o=n[r];i.value=`${o}`}}_handleDPIChange(e){const{templateOptions:i}=this,r=i.dpi;this._updateNumberInputValue(e);const n=i.dpi,{height:s,width:o}=UJe(n,r,i.width,i.height);i.height=s,i.width=o}_handlePrintMap(){var o;this._pendingExportScroll=!0;const{templateOptions:e,saveExportEnabled:i}=this,r=this.viewModel.toPrintTemplate(e),n=this._selectedTab===Nt.layout?(o=r.layoutOptions)==null?void 0:o.titleText:e.fileName,s=this._createFileLink(r,n);this.exportedLinks.add(s),this.emit("submit",{link:s,saveExportEnabled:i}),this._selectedTab=Nt.export,this.viewModel.print(r).then(a=>{s.set({url:a&&a.url,state:"ready"})}).catch(a=>{s.set({error:a,state:"error"})}).then(()=>{this.emit("complete",{link:s,saveExportEnabled:i}),this.scheduleRender()})}_switchInput(){[this.templateOptions.width,this.templateOptions.height]=[this.templateOptions.height,this.templateOptions.width]}_scrollExportIntoView(){if(!this._pendingExportScroll)return;this._pendingExportScroll=!1;const e=this._rootNode;if(!e)return;const{clientHeight:i,scrollHeight:r}=e,n=r-i;n>0&&(e.scrollTop=n)}_toggleInputValue(e){const i=e.target,r=i.getAttribute("data-option-name");this.templateOptions[r]=i.checked,r==="scaleEnabled"&&this._resetToCurrentScale()}_renderExportedLinkItemPopover(e){const i=this.messages,r=e.formattedName??"",{state:n}=e,s=this.saveAsButtonCallback&&n!=="error"&&this._isFormatAllowedForSaving(e.extension);return n!=="pending"&&s?P("calcite-popover",{autoClose:!0,key:`${r}-popover`,label:"Popover",offsetDistance:1,overlayPositioning:"fixed",pointerDisabled:!0,referenceElement:`${r}-popover-button`,scale:"s"},P("calcite-list",{label:""},e.portalItem?P("calcite-list-item",{label:i.openItem,onCalciteListItemSelect:()=>{const o=e.portalItem;if(!o||!o.itemPageUrl)return;const a=document.createElement("a");a.target="_blank",a.href=o.itemPageUrl,a.rel="noreferrer",a.click()}},P("calcite-icon",{icon:"launch2",key:`${r}-launch-icon`,scale:"s",slot:"content-start"})):P("calcite-list-item",{label:i.saveAs,onCalciteListItemSelect:async()=>{this.saveAsButtonCallback&&(l0(()=>e.portalItem).then(o=>{o.itemPageUrl&&this.scheduleRender()}),await this.saveAsButtonCallback(e))}},P("calcite-icon",{icon:"save",key:`${r}-save-icon`,scale:"s",slot:"content-start"})),P("calcite-list-item",{label:this.messagesCommon.delete,onCalciteListItemSelect:()=>this.exportedLinks.remove(e)},P("calcite-icon",{icon:"trash",key:`${r}-delete-icon`,scale:"s",slot:"content-start"})))):null}_renderExportedLinkItemContent(e,i){const r=this.messages,{url:n,state:s}=e,o=e.formattedName??"";let a=n||null;a&&(a=pMe(a));const l=zg(a,location.href);return P("div",{class:je.exportedFile,"data-item":e,onclick:this._handleLinkClick,slot:"content"},P("div",null,P("div",{class:je.exportedFileLinkTitle},o),P("div",{class:je.exportedFileLinkDescription},s==="pending"?r.generatingExport:i||(l?r.ready:r.linkReady))),s==="ready"?P("calcite-icon",{"aria-label":`${o}. ${r.linkReady}`,icon:l?"download-to":"launch",key:`${o}-end-icon`,scale:"s",slot:"content-end"}):null)}_renderExportedLinkItemIcon(e){const i=e.formattedName??"";return e.state==="pending"?P("calcite-loader",{class:je.exportedFileLoader,inline:!0,key:`${i}-loader`,label:this.messages.generatingExport,scale:"m",slot:"content-start"}):P("calcite-icon",{icon:BJe(e),key:`${i}-start-icon`,scale:"s",slot:"content-start"})}_renderExportedLinkItemAction(e,i){const{state:r}=e,n=e.formattedName??"",s=this.saveAsButtonCallback&&r!=="error"&&this._isFormatAllowedForSaving(e.extension);return r!=="pending"?P("calcite-action",{"aria-label":`${i}`,icon:s?"ellipsis":"x",id:s?`${n}-popover-button`:void 0,key:s?`${n}-saveAs-action`:`${n}-action`,onclick:s?void 0:()=>{this.exportedLinks.remove(e)},slot:"actions-end",text:`${i}`}):null}_renderExportedLinkItem(e){const i=this.messages,{error:r,state:n}=e,s=e.formattedName??"";let o;switch(n){case"pending":o=i.pending;break;case"ready":o=i.ready;break;case"error":o=i.errorMessage}const a=n==="error"?(r==null?void 0:r.name)==="print-task:cim-symbol-unsupported"?i.exportWebMapCIMError:i.exportWebMapError:"";return P(d7e,null,P("calcite-list-item",{"aria-label":o,key:s,title:a},this._renderExportedLinkItemContent(e,a),this._renderExportedLinkItemIcon(e),this._renderExportedLinkItemAction(e,a)),this._renderExportedLinkItemPopover(e))}_renderExportedLinkItems(e){return P("calcite-list",{filterEnabled:(e==null?void 0:e.length)>10,label:this.messages.exportedLinksList},e.map(this._renderExportedLinkItem.bind(this)))}_isFormatAllowedForSaving(e){return!this.allowedFormatsForSaving||this.allowedFormatsForSaving==="all"||!(!e||!this.allowedFormatsForSaving.includes(e))}_toggleLayoutPanel(e){const i=e.target;this._toggleTab(i.getAttribute("data-tab-id"))}_toggleTab(e,i=!0){if(this._selectedTab=e,this._selectedTab===Nt.mapOnly)this.templateOptions.reset(),this.templateOptions.layout=u0e;else if(this._selectedTab===Nt.layout){const r=this._selectedTemplate??this.viewModel.defaultTemplate;r?this.viewModel.applyTemplate(r):this.templateOptions.reset()}i&&(this._activeTabFocusRequested=!0)}_handleLayoutPanelKeyDown(e){const{key:i}=e,r=e.target.getAttribute("data-tab-id");if(phe(i))return this._toggleTab(r),e.preventDefault(),void e.stopPropagation();if(i==="ArrowLeft"||i==="ArrowRight"){switch(r){case Nt.layout:this._toggleTab(i==="ArrowLeft"?Nt.export:Nt.mapOnly);break;case Nt.mapOnly:this._toggleTab(i==="ArrowLeft"?Nt.layout:Nt.export);break;case Nt.export:this._toggleTab(i==="ArrowLeft"?Nt.mapOnly:Nt.layout)}e.preventDefault(),e.stopPropagation()}}};h([f()],Kt.prototype,"_showTemplates",void 0),h([f()],Kt.prototype,"_isValidSpatialReference",void 0),h([f()],Kt.prototype,"allowedFormats",null),h([f()],Kt.prototype,"allowedFormatsForSaving",void 0),h([f()],Kt.prototype,"allowedLayouts",null),h([f()],Kt.prototype,"browseTemplateButtonOnClick",void 0),h([f()],Kt.prototype,"error",null),h([f({type:l0e})],Kt.prototype,"exportedLinks",void 0),h([f()],Kt.prototype,"extraParameters",null),h([f()],Kt.prototype,"headerVisible",void 0),h([f()],Kt.prototype,"headingLevel",void 0),h([f()],Kt.prototype,"icon",null),h([f()],Kt.prototype,"includeDefaultTemplates",null),h([f()],Kt.prototype,"includeOrganizationTemplates",void 0),h([f()],Kt.prototype,"label",null),h([f(),Ys("esri/widgets/Print/t9n/Print")],Kt.prototype,"messages",void 0),h([f(),Ys("esri/t9n/common")],Kt.prototype,"messagesCommon",void 0),h([f(),Ys("esri/core/t9n/Units")],Kt.prototype,"messagesUnits",void 0),h([f({type:Je})],Kt.prototype,"outSpatialReference",null),h([f()],Kt.prototype,"portal",null),h([f()],Kt.prototype,"saveExportEnabled",void 0),h([f()],Kt.prototype,"saveExportHidden",void 0),h([f()],Kt.prototype,"showPrintAreaEnabled",null),h([f()],Kt.prototype,"printServiceUrl",null),h([f()],Kt.prototype,"saveAsButtonCallback",void 0),h([f()],Kt.prototype,"templateCustomTextElements",null),h([f()],Kt.prototype,"templateOptions",null),h([f()],Kt.prototype,"view",null),h([f({type:o0e})],Kt.prototype,"viewModel",void 0),Kt=h([A("esri.widgets.Print")],Kt);const GJe=Kt;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.11 */const VR=(t,e)=>(i,r)=>HJe(i,t,r);let ZJe=class extends xoe{constructor(e,i,r){super(e,i,r),this._watchedViewModelProperties=new Map,this._watchedVisibleElementsProperties={},this._isBindingViewModel={value:!0},Object.defineProperty(this.exports,"viewModel",{value:yg.makeGetterProxy(e,this._watchedViewModelProperties,this._isBindingViewModel)}),Object.defineProperty(this.exports,"visibleElements",{value:this._makeVisibleElementsBinder()})}hostConnected(){super.hostConnected(),this._isBindingViewModel.value=!1,this.component.manager.loadedCalled&&z_(this.component)}async hostLoad(){if(this._watchedProperties.delete("viewModel"),await super.hostLoad(),this.component.manager.destroyed)return;this._watchMetaProperties(),this.onLifecycle(()=>this.reactiveUtils.watch(()=>this._instance.viewModel,r=>{this.component.viewModel=r},{initial:!0}));const e=this._instance.viewModel;typeof e=="object"&&(yg.watchComponentUpdates(this,e,this._watchedViewModelProperties),yg.watchAccessorUpdates(this,e,this._watchedViewModelProperties));const i=Object.entries(this._watchedVisibleElementsProperties);i.length>0&&this.onLifecycle(()=>i.map(([r,n])=>{let s=this._instance.visibleElements??{},o;for(const u of n.slice(0,-1))if(typeof s[u]=="object"&&s[u]!==null)s=s[u];else{o=!!s[u];break}o===void 0&&(o=!!(s[n.slice(-1)[0]]??!0)),r.startsWith("hide");const a=r.startsWith("hide")||r.startsWith("show")?r.startsWith("hide"):o,l=this.component;return typeof l[r]=="boolean"?this._updateWidgetVisibleElement(n,l[r],a):l[r]=!1,mg(this.component,r,u=>this._updateWidgetVisibleElement(n,u,a))}))}_updateWidgetVisibleElement(e,i,r){let n=this._instance.visibleElements??{};for(const o of e.slice(0,-1))(typeof n[o]!="object"||n[o]===null)&&(n[o]={}),n=n[o];const s=!!(r?!i:i);n[e.at(-1)]=s}hostLoaded(){const{el:e}=this.component;e.childElem??(e.childElem=document.createElement("div")),this._instance.container=e.childElem;let i=!1;const r=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>{var n;return this._instance.view??((n=this._instance.viewModel)==null?void 0:n.view)},set:n=>{!("view"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.view=n:this._instance.view=n,!("map"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.map=n.map:this._instance.map=n.map,this._watchViewDestroy(),n&&!i&&(i=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),r&&(this._instance.view=r),this.component.el.isConnected&&(z_(this.component),this._watchViewDestroy())}hostDisconnected(){var e,i;typeof this.component.el.childElem=="object"&&((i=(e=this.component.el.view)==null?void 0:e.ui)==null||i.remove(this.component.el.childElem))}hostDestroy(){var e;super.hostDestroy(),(e=this._watchViewDestroyHandle)==null||e.remove()}_watchMetaProperties(){mg(this.component,"position",e=>{this.component.el.childElem!=null&&typeof e=="string"&&z_(this.component)}),mg(this.component,"referenceElement",()=>z_(this.component))}_makeVisibleElementsBinder(){return new Proxy({},{has:(e,i)=>typeof i=="string"||Reflect.has(e,i),get:(e,i)=>{if(typeof i=="symbol"||i in Promise.prototype)return Reflect.get(e,i);const r=[i],n=this._makeRecursiveProxy(r);return HU(this.component,s=>{const o=s;this.component[o]=!1,this._watchedVisibleElementsProperties[o]=r},n)}})}_makeRecursiveProxy(e){const i=new Proxy({},{get:(r,n)=>{const s=Reflect.get(r,n);return typeof n=="symbol"||n in Promise.prototype?s:(e.push(n),i)}});return i}_watchViewDestroy(){var e;(e=this._watchViewDestroyHandle)==null||e.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when(()=>{var i;return((i=this.component.el.view)==null?void 0:i.destroyed)===!0},()=>void this.component.destroy().catch(console.error),{sync:!0})}};const HJe=XU(ZJe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.11 */const WJe=Ln`@layer{arcgis-print{display:block}}`,XJe=VR(GJe);var Af;let YJe=(Af=class extends gn{constructor(){super(...arguments),this.widget=XJe(this),this.viewModel=this.widget.viewModel,this.allowedFormats=this.widget.allowedFormats,this.allowedLayouts=this.widget.allowedLayouts,this.autoDestroyDisabled=!1,this.exportedLinks=this.widget.exportedLinks,this.extraParameters=this.widget.extraParameters,this.headingLevel=this.widget.headingLevel,this.icon=this.widget.icon,this.includeDefaultTemplatesDisabled=this.widget.includeDefaultTemplates,this.label=this.widget.label,this.portal=this.widget.portal,this.position="bottom-left",this.printServiceUrl=this.widget.printServiceUrl,this.showPrintAreaEnabled=this.widget.showPrintAreaEnabled,this.state=this.viewModel.state,this.templateCustomTextElements=this.widget.templateCustomTextElements,this.templateOptions=this.widget.templateOptions,this.arcgisComplete=Zr(()=>this.widget,"complete"),this.arcgisPropertyChange=JU()("state"),this.arcgisReady=xo(),this.arcgisSubmit=Zr(()=>this.widget,"submit")}async destroy(){await this.manager.destroy()}},Af.properties={allowedFormats:[1,{converter:e=>typeof e=="string"&&e!=="all"?e.split(","):e}],allowedLayouts:[1,{converter:e=>typeof e=="string"&&e!=="all"?e.split(","):e}],autoDestroyDisabled:5,exportedLinks:0,extraParameters:1,headingLevel:9,icon:1,includeDefaultTemplatesDisabled:5,label:1,portal:0,position:1,printServiceUrl:1,referenceElement:1,showPrintAreaEnabled:7,state:3,templateCustomTextElements:0,templateOptions:0},Af.shadowRootOptions=Lf,Af.styles=WJe,Af);fO("arcgis-print",YJe);function x$(){return x$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},x$.apply(null,arguments)}function JJe(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}let f6=[],c0e=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,i=0;e<t.length;e++)(e%2?c0e:f6).push(i=i+t[e])})();function KJe(t){if(t<768)return!1;for(let e=0,i=f6.length;;){let r=e+i>>1;if(t<f6[r])i=r;else if(t>=c0e[r])e=r+1;else return!0;if(e==i)return!1}}function Bte(t){return t>=127462&&t<=127487}const qte=8205;function eKe(t,e,i=!0,r=!0){return(i?h0e:tKe)(t,e,r)}function h0e(t,e,i){if(e==t.length)return e;e&&d0e(t.charCodeAt(e))&&p0e(t.charCodeAt(e-1))&&e--;let r=vD(t,e);for(e+=Gte(r);e<t.length;){let n=vD(t,e);if(r==qte||n==qte||i&&KJe(n))e+=Gte(n),r=n;else if(Bte(n)){let s=0,o=e-2;for(;o>=0&&Bte(vD(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function tKe(t,e,i){for(;e>0;){let r=h0e(t,e-2,i);if(r<e)return r;e--}return 0}function vD(t,e){let i=t.charCodeAt(e);if(!p0e(i)||e+1==t.length)return i;let r=t.charCodeAt(e+1);return d0e(r)?(i-55296<<10)+(r-56320)+65536:i}function d0e(t){return t>=56320&&t<57344}function p0e(t){return t>=55296&&t<56320}function Gte(t){return t<65536?1:2}class Qt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,i,r){[e,i]=qw(this,e,i);let n=[];return this.decompose(0,e,n,2),r.length&&r.decompose(0,r.length,n,3),this.decompose(i,this.length,n,1),hc.from(n,this.length-(i-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,i=this.length){[e,i]=qw(this,e,i);let r=[];return this.decompose(e,i,r,0),hc.from(r,i-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let i=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),n=new Ax(this),s=new Ax(e);for(let o=i,a=i;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(a+=n.value.length,n.done||a>=r)return!0}}iter(e=1){return new Ax(this,e)}iterRange(e,i=this.length){return new f0e(this,e,i)}iterLines(e,i){let r;if(e==null)r=this.iter();else{i==null&&(i=this.lines+1);let n=this.line(e).from;r=this.iterRange(n,Math.max(n,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new m0e(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Qt.empty:e.length<=32?new Pr(e):hc.from(Pr.split(e,[]))}}class Pr extends Qt{constructor(e,i=iKe(e)){super(),this.text=e,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(e,i,r,n){for(let s=0;;s++){let o=this.text[s],a=n+o.length;if((i?r:a)>=e)return new rKe(n,a,r,o);n=a+1,r++}}decompose(e,i,r,n){let s=e<=0&&i>=this.length?this:new Pr(Zte(this.text,e,i),Math.min(i,this.length)-Math.max(0,e));if(n&1){let o=r.pop(),a=EM(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Pr(a,o.length+s.length));else{let l=a.length>>1;r.push(new Pr(a.slice(0,l)),new Pr(a.slice(l)))}}else r.push(s)}replace(e,i,r){if(!(r instanceof Pr))return super.replace(e,i,r);[e,i]=qw(this,e,i);let n=EM(this.text,EM(r.text,Zte(this.text,0,e)),i),s=this.length+r.length-(i-e);return n.length<=32?new Pr(n,s):hc.from(Pr.split(n,[]),s)}sliceString(e,i=this.length,r=`
`){[e,i]=qw(this,e,i);let n="";for(let s=0,o=0;s<=i&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(n+=r),e<l&&i>s&&(n+=a.slice(Math.max(0,e-s),i-s)),s=l+1}return n}flatten(e){for(let i of this.text)e.push(i)}scanIdentical(){return 0}static split(e,i){let r=[],n=-1;for(let s of e)r.push(s),n+=s.length+1,r.length==32&&(i.push(new Pr(r,n)),r=[],n=-1);return n>-1&&i.push(new Pr(r,n)),i}}class hc extends Qt{constructor(e,i){super(),this.children=e,this.length=i,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,i,r,n){for(let s=0;;s++){let o=this.children[s],a=n+o.length,l=r+o.lines-1;if((i?l:a)>=e)return o.lineInner(e,i,r,n);n=a+1,r=l+1}}decompose(e,i,r,n){for(let s=0,o=0;o<=i&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&i>=o){let u=n&((o<=e?1:0)|(l>=i?2:0));o>=e&&l<=i&&!u?r.push(a):a.decompose(e-o,i-o,r,u)}o=l+1}}replace(e,i,r){if([e,i]=qw(this,e,i),r.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.length;if(e>=s&&i<=a){let l=o.replace(e-s,i-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let p=this.children.slice();return p[n]=l,new hc(p,this.length-(i-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,i,r)}sliceString(e,i=this.length,r=`
`){[e,i]=qw(this,e,i);let n="";for(let s=0,o=0;s<this.children.length&&o<=i;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(n+=r),e<l&&i>o&&(n+=a.sliceString(e-o,i-o,r)),o=l+1}return n}flatten(e){for(let i of this.children)i.flatten(e)}scanIdentical(e,i){if(!(e instanceof hc))return 0;let r=0,[n,s,o,a]=i>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=i,s+=i){if(n==o||s==a)return r;let l=this.children[n],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,i);r+=l.length+1}}static from(e,i=e.reduce((r,n)=>r+n.length+1,-1)){let r=0;for(let w of e)r+=w.lines;if(r<32){let w=[];for(let O of e)O.flatten(w);return new Pr(w,i)}let n=Math.max(32,r>>5),s=n<<1,o=n>>1,a=[],l=0,u=-1,p=[];function m(w){let O;if(w.lines>s&&w instanceof hc)for(let _ of w.children)m(_);else w.lines>o&&(l>o||!l)?(g(),a.push(w)):w instanceof Pr&&l&&(O=p[p.length-1])instanceof Pr&&w.lines+O.lines<=32?(l+=w.lines,u+=w.length+1,p[p.length-1]=new Pr(O.text.concat(w.text),O.length+1+w.length)):(l+w.lines>n&&g(),l+=w.lines,u+=w.length+1,p.push(w))}function g(){l!=0&&(a.push(p.length==1?p[0]:hc.from(p,u)),u=-1,l=p.length=0)}for(let w of e)m(w);return g(),a.length==1?a[0]:new hc(a,i)}}Qt.empty=new Pr([""],0);function iKe(t){let e=-1;for(let i of t)e+=i.length+1;return e}function EM(t,e,i=0,r=1e9){for(let n=0,s=0,o=!0;s<t.length&&n<=r;s++){let a=t[s],l=n+a.length;l>=i&&(l>r&&(a=a.slice(0,r-n)),n<i&&(a=a.slice(i-n)),o?(e[e.length-1]+=a,o=!1):e.push(a)),n=l+1}return e}function Zte(t,e,i){return EM(t,[""],e,i)}class Ax{constructor(e,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[i>0?1:(e instanceof Pr?e.text.length:e.children.length)<<1]}nextInner(e,i){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,n=this.nodes[r],s=this.offsets[r],o=s>>1,a=n instanceof Pr?n.text.length:n.children.length;if(o==(i>0?a:0)){if(r==0)return this.done=!0,this.value="",this;i>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(i>0?0:1)){if(this.offsets[r]+=i,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Pr){let l=n.text[o+(i<0?-1:0)];if(this.offsets[r]+=i,l.length>Math.max(0,e))return this.value=e==0?l:i>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=n.children[o+(i<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=i):(i<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(i>0?1:(l instanceof Pr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class f0e{constructor(e,i,r){this.value="",this.done=!1,this.cursor=new Ax(e,i>r?-1:1),this.pos=i>r?e.length:0,this.from=Math.min(i,r),this.to=Math.max(i,r)}nextInner(e,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let r=i<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*i,this.value=n.length<=r?n:i<0?n.slice(n.length-r):n.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class m0e{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:i,lineBreak:r,value:n}=this.inner.next(e);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Qt.prototype[Symbol.iterator]=function(){return this.iter()},Ax.prototype[Symbol.iterator]=f0e.prototype[Symbol.iterator]=m0e.prototype[Symbol.iterator]=function(){return this});class rKe{constructor(e,i,r,n){this.from=e,this.to=i,this.number=r,this.text=n}get length(){return this.to-this.from}}function qw(t,e,i){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,i))]}function Yn(t,e,i=!0,r=!0){return eKe(t,e,i,r)}function nKe(t){return t>=56320&&t<57344}function sKe(t){return t>=55296&&t<56320}function Oo(t,e){let i=t.charCodeAt(e);if(!sKe(i)||e+1==t.length)return i;let r=t.charCodeAt(e+1);return nKe(r)?(i-55296<<10)+(r-56320)+65536:i}function a7(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function dc(t){return t<65536?1:2}const m6=/\r\n?|\n/;var Xn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Xn||(Xn={}));class wc{constructor(e){this.sections=e}get length(){let e=0;for(let i=0;i<this.sections.length;i+=2)e+=this.sections[i];return e}get newLength(){let e=0;for(let i=0;i<this.sections.length;i+=2){let r=this.sections[i+1];e+=r<0?this.sections[i]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let i=0,r=0,n=0;i<this.sections.length;){let s=this.sections[i++],o=this.sections[i++];o<0?(e(r,n,s),n+=s):n+=o,r+=s}}iterChangedRanges(e,i=!1){y6(this,e,i)}get invertedDesc(){let e=[];for(let i=0;i<this.sections.length;){let r=this.sections[i++],n=this.sections[i++];n<0?e.push(r,n):e.push(n,r)}return new wc(e)}composeDesc(e){return this.empty?e:e.empty?this:y0e(this,e)}mapDesc(e,i=!1){return e.empty?this:g6(this,e,i)}mapPos(e,i=-1,r=Xn.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=n+a;if(l<0){if(u>e)return s+(e-n);s+=a}else{if(r!=Xn.Simple&&u>=e&&(r==Xn.TrackDel&&n<e&&u>e||r==Xn.TrackBefore&&n<e||r==Xn.TrackAfter&&u>e))return null;if(u>e||u==e&&i<0&&!a)return e==n||i<0?s:s+l;s+=l}n=u}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,i=e){for(let r=0,n=0;r<this.sections.length&&n<=i;){let s=this.sections[r++],o=this.sections[r++],a=n+s;if(o>=0&&n<=i&&a>=e)return n<e&&a>i?"cover":!0;n=a}return!1}toString(){let e="";for(let i=0;i<this.sections.length;){let r=this.sections[i++],n=this.sections[i++];e+=(e?" ":"")+r+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new wc(e)}static create(e){return new wc(e)}}class dn extends wc{constructor(e,i){super(e),this.inserted=i}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return y6(this,(i,r,n,s,o)=>e=e.replace(n,n+(r-i),o),!1),e}mapDesc(e,i=!1){return g6(this,e,i,!0)}invert(e){let i=this.sections.slice(),r=[];for(let n=0,s=0;n<i.length;n+=2){let o=i[n],a=i[n+1];if(a>=0){i[n]=a,i[n+1]=o;let l=n>>1;for(;r.length<l;)r.push(Qt.empty);r.push(o?e.slice(s,s+o):Qt.empty)}s+=o}return new dn(i,r)}compose(e){return this.empty?e:e.empty?this:y0e(this,e,!0)}map(e,i=!1){return e.empty?this:g6(this,e,i,!0)}iterChanges(e,i=!1){y6(this,e,i)}get desc(){return wc.create(this.sections)}filter(e){let i=[],r=[],n=[],s=new $$(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let p=Math.min(s.len,l-a);gs(n,p,-1);let m=s.ins==-1?-1:s.off==0?s.ins:0;gs(i,p,m),m>0&&gf(r,i,s.text),s.forward(p),a+=p}let u=e[o++];for(;a<u;){if(s.done)break e;let p=Math.min(s.len,u-a);gs(i,p,-1),gs(n,p,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(p),a+=p}}return{changes:new dn(i,r),filtered:wc.create(n)}}toJSON(){let e=[];for(let i=0;i<this.sections.length;i+=2){let r=this.sections[i],n=this.sections[i+1];n<0?e.push(r):n==0?e.push([r]):e.push([r].concat(this.inserted[i>>1].toJSON()))}return e}static of(e,i,r){let n=[],s=[],o=0,a=null;function l(p=!1){if(!p&&!n.length)return;o<i&&gs(n,i-o,-1);let m=new dn(n,s);a=a?a.compose(m.map(a)):m,n=[],s=[],o=0}function u(p){if(Array.isArray(p))for(let m of p)u(m);else if(p instanceof dn){if(p.length!=i)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${i})`);l(),a=a?a.compose(p.map(a)):p}else{let{from:m,to:g=m,insert:w}=p;if(m>g||m<0||g>i)throw new RangeError(`Invalid change range ${m} to ${g} (in doc of length ${i})`);let O=w?typeof w=="string"?Qt.of(w.split(r||m6)):w:Qt.empty,_=O.length;if(m==g&&_==0)return;m<o&&l(),m>o&&gs(n,m-o,-1),gs(n,g-m,_),gf(s,n,O),o=g}}return u(e),l(!a),a}static empty(e){return new dn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],r=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")i.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)i.push(s[0],0);else{for(;r.length<n;)r.push(Qt.empty);r[n]=Qt.of(s.slice(1)),i.push(s[0],r[n].length)}}}return new dn(i,r)}static createSet(e,i){return new dn(e,i)}}function gs(t,e,i,r=!1){if(e==0&&i<=0)return;let n=t.length-2;n>=0&&i<=0&&i==t[n+1]?t[n]+=e:n>=0&&e==0&&t[n]==0?t[n+1]+=i:r?(t[n]+=e,t[n+1]+=i):t.push(e,i)}function gf(t,e,i){if(i.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(i);else{for(;t.length<r;)t.push(Qt.empty);t.push(i)}}function y6(t,e,i){let r=t.inserted;for(let n=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)n+=a,s+=a;else{let u=n,p=s,m=Qt.empty;for(;u+=a,p+=l,l&&r&&(m=m.append(r[o-2>>1])),!(i||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(n,u,s,p,m),n=u,s=p}}}function g6(t,e,i,r=!1){let n=[],s=r?[]:null,o=new $$(t),a=new $$(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);gs(n,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!i))){let u=a.len;for(gs(n,a.ins,-1);u;){let p=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=p&&(gs(n,0,o.ins),s&&gf(s,n,o.text),l=o.i),o.forward(p),u-=p}a.next()}else if(o.ins>=0){let u=0,p=o.len;for(;p;)if(a.ins==-1){let m=Math.min(p,a.len);u+=m,p-=m,a.forward(m)}else if(a.ins==0&&a.len<p)p-=a.len,a.next();else break;gs(n,u,l<o.i?o.ins:0),s&&l<o.i&&gf(s,n,o.text),l=o.i,o.forward(o.len-p)}else{if(o.done&&a.done)return s?dn.createSet(n,s):wc.create(n);throw new Error("Mismatched change set lengths")}}}function y0e(t,e,i=!1){let r=[],n=i?[]:null,s=new $$(t),o=new $$(e);for(let a=!1;;){if(s.done&&o.done)return n?dn.createSet(r,n):wc.create(r);if(s.ins==0)gs(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)gs(r,0,o.ins,a),n&&gf(n,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let p=o.ins==-1?-1:o.off?0:o.ins;gs(r,l,p,a),n&&p&&gf(n,r,o.text)}else o.ins==-1?(gs(r,s.off?0:s.len,l,a),n&&gf(n,r,s.textBit(l))):(gs(r,s.off?0:s.len,o.off?0:o.ins,a),n&&!o.off&&gf(n,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}class $${constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length?Qt.empty:e[i]}textBit(e){let{inserted:i}=this.set,r=this.i-2>>1;return r>=i.length&&!e?Qt.empty:i[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class pg{constructor(e,i,r){this.from=e,this.to=i,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,i=-1){let r,n;return this.empty?r=n=e.mapPos(this.from,i):(r=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),r==this.from&&n==this.to?this:new pg(r,n,this.flags)}extend(e,i=e){if(e<=this.anchor&&i>=this.anchor)return me.range(e,i);let r=Math.abs(e-this.anchor)>Math.abs(i-this.anchor)?e:i;return me.range(this.anchor,r)}eq(e,i=!1){return this.anchor==e.anchor&&this.head==e.head&&(!i||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return me.range(e.anchor,e.head)}static create(e,i,r){return new pg(e,i,r)}}class me{constructor(e,i){this.ranges=e,this.mainIndex=i}map(e,i=-1){return e.empty?this:me.create(this.ranges.map(r=>r.map(e,i)),this.mainIndex)}eq(e,i=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new me([this.main],0)}addRange(e,i=!0){return me.create([e].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(e,i=this.mainIndex){let r=this.ranges.slice();return r[i]=e,me.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new me(e.ranges.map(i=>pg.fromJSON(i)),e.main)}static single(e,i=e){return new me([me.range(e,i)],0)}static create(e,i=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=r:s.from<r)return me.normalized(e.slice(),i);r=s.to}return new me(e,i)}static cursor(e,i=0,r,n){return pg.create(e,e,(i==0?0:i<0?8:16)|(r==null?7:Math.min(6,r))|(n??16777215)<<6)}static range(e,i,r,n){let s=(r??16777215)<<6|(n==null?7:Math.min(6,n));return i<e?pg.create(i,e,48|s):pg.create(e,i,(i>e?8:0)|s)}static normalized(e,i=0){let r=e[i];e.sort((n,s)=>n.from-s.from),i=e.indexOf(r);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);n<=i&&i--,e.splice(--n,2,s.anchor>s.head?me.range(l,a):me.range(a,l))}}return new me(e,i)}}function g0e(t,e){for(let i of t.ranges)if(i.to>e)throw new RangeError("Selection points outside of document")}let l7=0;class ze{constructor(e,i,r,n,s){this.combine=e,this.compareInput=i,this.compare=r,this.isStatic=n,this.id=l7++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new ze(e.combine||(i=>i),e.compareInput||((i,r)=>i===r),e.compare||(e.combine?(i,r)=>i===r:u7),!!e.static,e.enables)}of(e){return new kM([],this,0,e)}compute(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new kM(e,this,1,i)}computeN(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new kM(e,this,2,i)}from(e,i){return i||(i=r=>r),this.compute([e],r=>i(r.field(e)))}}function u7(t,e){return t==e||t.length==e.length&&t.every((i,r)=>i===e[r])}class kM{constructor(e,i,r,n){this.dependencies=e,this.facet=i,this.type=r,this.value=n,this.id=l7++}dynamicSlot(e){var i;let r=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,p=[];for(let m of this.dependencies)m=="doc"?l=!0:m=="selection"?u=!0:(((i=e[m.id])!==null&&i!==void 0?i:1)&1)==0&&p.push(e[m.id]);return{create(m){return m.values[o]=r(m),1},update(m,g){if(l&&g.docChanged||u&&(g.docChanged||g.selection)||v6(m,p)){let w=r(m);if(a?!Hte(w,m.values[o],n):!n(w,m.values[o]))return m.values[o]=w,1}return 0},reconfigure:(m,g)=>{let w,O=g.config.address[s];if(O!=null){let _=TI(g,O);if(this.dependencies.every(x=>x instanceof ze?g.facet(x)===m.facet(x):x instanceof Nn?g.field(x,!1)==m.field(x,!1):!0)||(a?Hte(w=r(m),_,n):n(w=r(m),_)))return m.values[o]=_,0}else w=r(m);return m.values[o]=w,1}}}}function Hte(t,e,i){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1;return!0}function v6(t,e){let i=!1;for(let r of e)Ix(t,r)&1&&(i=!0);return i}function oKe(t,e,i){let r=i.map(l=>t[l.id]),n=i.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let p=0;p<r.length;p++){let m=TI(l,r[p]);if(n[p]==2)for(let g of m)u.push(g);else u.push(m)}return e.combine(u)}return{create(l){for(let u of r)Ix(l,u);return l.values[o]=a(l),1},update(l,u){if(!v6(l,s))return 0;let p=a(l);return e.compare(p,l.values[o])?0:(l.values[o]=p,1)},reconfigure(l,u){let p=v6(l,r),m=u.config.facets[e.id],g=u.facet(e);if(m&&!p&&u7(i,m))return l.values[o]=g,0;let w=a(l);return e.compare(w,g)?(l.values[o]=g,0):(l.values[o]=w,1)}}}const Sk=ze.define({static:!0});class Nn{constructor(e,i,r,n,s){this.id=e,this.createF=i,this.updateF=r,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let i=new Nn(l7++,e.create,e.update,e.compare||((r,n)=>r===n),e);return e.provide&&(i.provides=e.provide(i)),i}create(e){let i=e.facet(Sk).find(r=>r.field==this);return((i==null?void 0:i.create)||this.createF)(e)}slot(e){let i=e[this.id]>>1;return{create:r=>(r.values[i]=this.create(r),1),update:(r,n)=>{let s=r.values[i],o=this.updateF(s,n);return this.compareF(s,o)?0:(r.values[i]=o,1)},reconfigure:(r,n)=>{let s=r.facet(Sk),o=n.facet(Sk),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[i]=a.create(r),1):n.config.address[this.id]!=null?(r.values[i]=n.field(this),0):(r.values[i]=this.create(r),1)}}}init(e){return[this,Sk.of({field:this,create:e})]}get extension(){return this}}const rg={lowest:4,low:3,default:2,high:1,highest:0};function mS(t){return e=>new v0e(e,t)}const dm={highest:mS(rg.highest),high:mS(rg.high),default:mS(rg.default),low:mS(rg.low),lowest:mS(rg.lowest)};class v0e{constructor(e,i){this.inner=e,this.prec=i}}class FR{of(e){return new b6(this,e)}reconfigure(e){return FR.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class b6{constructor(e,i){this.compartment=e,this.inner=i}}class $I{constructor(e,i,r,n,s,o){for(this.base=e,this.compartments=i,this.dynamicSlots=r,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let i=this.address[e.id];return i==null?e.default:this.staticValues[i>>1]}static resolve(e,i,r){let n=[],s=Object.create(null),o=new Map;for(let g of aKe(e,i,o))g instanceof Nn?n.push(g):(s[g.facet.id]||(s[g.facet.id]=[])).push(g);let a=Object.create(null),l=[],u=[];for(let g of n)a[g.id]=u.length<<1,u.push(w=>g.slot(w));let p=r==null?void 0:r.config.facets;for(let g in s){let w=s[g],O=w[0].facet,_=p&&p[g]||[];if(w.every(x=>x.type==0))if(a[O.id]=l.length<<1|1,u7(_,w))l.push(r.facet(O));else{let x=O.combine(w.map(T=>T.value));l.push(r&&O.compare(x,r.facet(O))?r.facet(O):x)}else{for(let x of w)x.type==0?(a[x.id]=l.length<<1|1,l.push(x.value)):(a[x.id]=u.length<<1,u.push(T=>x.dynamicSlot(T)));a[O.id]=u.length<<1,u.push(x=>oKe(x,O,w))}}let m=u.map(g=>g(a));return new $I(e,o,m,a,l,s)}}function aKe(t,e,i){let r=[[],[],[],[],[]],n=new Map;function s(o,a){let l=n.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof b6&&i.delete(o.compartment)}if(n.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof b6){if(i.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;i.set(o.compartment,u),s(u,a)}else if(o instanceof v0e)s(o.inner,o.prec);else if(o instanceof Nn)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof kM)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,rg.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,rg.default),r.reduce((o,a)=>o.concat(a))}function Ix(t,e){if(e&1)return 2;let i=e>>1,r=t.status[i];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[i]=4;let n=t.computeSlot(t,t.config.dynamicSlots[i]);return t.status[i]=2|n}function TI(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const b0e=ze.define(),w6=ze.define({combine:t=>t.some(e=>e),static:!0}),w0e=ze.define({combine:t=>t.length?t[0]:void 0,static:!0}),O0e=ze.define(),S0e=ze.define(),_0e=ze.define(),x0e=ze.define({combine:t=>t.length?t[0]:!1});class Vc{constructor(e,i){this.type=e,this.value=i}static define(){return new lKe}}class lKe{of(e){return new Vc(this,e)}}class uKe{constructor(e){this.map=e}of(e){return new xt(this,e)}}class xt{constructor(e,i){this.type=e,this.value=i}map(e){let i=this.type.map(this.value,e);return i===void 0?void 0:i==this.value?this:new xt(this.type,i)}is(e){return this.type==e}static define(e={}){return new uKe(e.map||(i=>i))}static mapEffects(e,i){if(!e.length)return e;let r=[];for(let n of e){let s=n.map(i);s&&r.push(s)}return r}}xt.reconfigure=xt.define();xt.appendConfig=xt.define();class Yr{constructor(e,i,r,n,s,o){this.startState=e,this.changes=i,this.selection=r,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&g0e(r,i.newLength),s.some(a=>a.type==Yr.time)||(this.annotations=s.concat(Yr.time.of(Date.now())))}static create(e,i,r,n,s,o){return new Yr(e,i,r,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let i of this.annotations)if(i.type==e)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let i=this.annotation(Yr.userEvent);return!!(i&&(i==e||i.length>e.length&&i.slice(0,e.length)==e&&i[e.length]=="."))}}Yr.time=Vc.define();Yr.userEvent=Vc.define();Yr.addToHistory=Vc.define();Yr.remote=Vc.define();function cKe(t,e){let i=[];for(let r=0,n=0;;){let s,o;if(r<t.length&&(n==e.length||e[n]>=t[r]))s=t[r++],o=t[r++];else if(n<e.length)s=e[n++],o=e[n++];else return i;!i.length||i[i.length-1]<s?i.push(s,o):i[i.length-1]<o&&(i[i.length-1]=o)}}function $0e(t,e,i){var r;let n,s,o;return i?(n=e.changes,s=dn.empty(e.changes.length),o=t.changes.compose(e.changes)):(n=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(n),effects:xt.mapEffects(t.effects,n).concat(xt.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function O6(t,e,i){let r=e.selection,n=vw(e.annotations);return e.userEvent&&(n=n.concat(Yr.userEvent.of(e.userEvent))),{changes:e.changes instanceof dn?e.changes:dn.of(e.changes||[],i,t.facet(w0e)),selection:r&&(r instanceof me?r:me.single(r.anchor,r.head)),effects:vw(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function T0e(t,e,i){let r=O6(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(i=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(i=!1);let o=!!e[s].sequential;r=$0e(r,O6(t,e[s],o?r.changes.newLength:t.doc.length),o)}let n=Yr.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return dKe(i?hKe(n):n)}function hKe(t){let e=t.startState,i=!0;for(let n of e.facet(O0e)){let s=n(t);if(s===!1){i=!1;break}Array.isArray(s)&&(i=i===!0?s:cKe(i,s))}if(i!==!0){let n,s;if(i===!1)s=t.changes.invertedDesc,n=dn.empty(e.doc.length);else{let o=t.changes.filter(i);n=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Yr.create(e,n,t.selection&&t.selection.map(s),xt.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(S0e);for(let n=r.length-1;n>=0;n--){let s=r[n](t);s instanceof Yr?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Yr?t=s[0]:t=T0e(e,vw(s),!1)}return t}function dKe(t){let e=t.startState,i=e.facet(_0e),r=t;for(let n=i.length-1;n>=0;n--){let s=i[n](t);s&&Object.keys(s).length&&(r=$0e(r,O6(e,s,t.changes.newLength),!0))}return r==t?t:Yr.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const pKe=[];function vw(t){return t==null?pKe:Array.isArray(t)?t:[t]}var ir=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ir||(ir={}));const fKe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let S6;try{S6=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function mKe(t){if(S6)return S6.test(t);for(let e=0;e<t.length;e++){let i=t[e];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||fKe.test(i)))return!0}return!1}function yKe(t){return e=>{if(!/\S/.test(e))return ir.Space;if(mKe(e))return ir.Word;for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return ir.Word;return ir.Other}}class zt{constructor(e,i,r,n,s,o){this.config=e,this.doc=i,this.selection=r,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ix(this,a<<1);this.computeSlot=null}field(e,i=!0){let r=this.config.address[e.id];if(r==null){if(i)throw new RangeError("Field is not present in this state");return}return Ix(this,r),TI(this,r)}update(...e){return T0e(this,e,!0)}applyTransaction(e){let i=this.config,{base:r,compartments:n}=i;for(let a of e.effects)a.is(FR.reconfigure)?(i&&(n=new Map,i.compartments.forEach((l,u)=>n.set(u,l)),i=null),n.set(a.value.compartment,a.value.extension)):a.is(xt.reconfigure)?(i=null,r=a.value):a.is(xt.appendConfig)&&(i=null,r=vw(r).concat(a.value));let s;i?s=e.startState.values.slice():(i=$I.resolve(r,n,this),s=new zt(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(w6)?e.newSelection:e.newSelection.asSingle();new zt(i,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:e},range:me.cursor(i.from+e.length)}))}changeByRange(e){let i=this.selection,r=e(i.ranges[0]),n=this.changes(r.changes),s=[r.range],o=vw(r.effects);for(let a=1;a<i.ranges.length;a++){let l=e(i.ranges[a]),u=this.changes(l.changes),p=u.map(n);for(let g=0;g<a;g++)s[g]=s[g].map(p);let m=n.mapDesc(u,!0);s.push(l.range.map(m)),n=n.compose(p),o=xt.mapEffects(o,p).concat(xt.mapEffects(vw(l.effects),m))}return{changes:n,selection:me.create(s,i.mainIndex),effects:o}}changes(e=[]){return e instanceof dn?e:dn.of(e,this.doc.length,this.facet(zt.lineSeparator))}toText(e){return Qt.of(e.split(this.facet(zt.lineSeparator)||m6))}sliceDoc(e=0,i=this.doc.length){return this.doc.sliceString(e,i,this.lineBreak)}facet(e){let i=this.config.address[e.id];return i==null?e.default:(Ix(this,i),TI(this,i))}toJSON(e){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let n=e[r];n instanceof Nn&&this.config.address[n.id]!=null&&(i[r]=n.spec.toJSON(this.field(e[r]),this))}return i}static fromJSON(e,i={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];n.push(o.init(l=>o.spec.fromJSON(a,l)))}}return zt.create({doc:e.doc,selection:me.fromJSON(e.selection),extensions:i.extensions?n.concat([i.extensions]):n})}static create(e={}){let i=$I.resolve(e.extensions||[],new Map),r=e.doc instanceof Qt?e.doc:Qt.of((e.doc||"").split(i.staticFacet(zt.lineSeparator)||m6)),n=e.selection?e.selection instanceof me?e.selection:me.single(e.selection.anchor,e.selection.head):me.single(0);return g0e(n,r.length),i.staticFacet(w6)||(n=n.asSingle()),new zt(i,r,n,i.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(zt.tabSize)}get lineBreak(){return this.facet(zt.lineSeparator)||`
`}get readOnly(){return this.facet(x0e)}phrase(e,...i){for(let r of this.facet(zt.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,(r,n)=>{if(n=="$")return"$";let s=+(n||1);return!s||s>i.length?r:i[s-1]})),e}languageDataAt(e,i,r=-1){let n=[];for(let s of this.facet(b0e))for(let o of s(this,i,r))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return yKe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:i,from:r,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Yn(i,o,!1);if(s(i.slice(l,o))!=ir.Word)break;o=l}for(;a<n;){let l=Yn(i,a);if(s(i.slice(a,l))!=ir.Word)break;a=l}return o==a?null:me.range(o+r,a+r)}}zt.allowMultipleSelections=w6;zt.tabSize=ze.define({combine:t=>t.length?t[0]:4});zt.lineSeparator=w0e;zt.readOnly=x0e;zt.phrases=ze.define({compare(t,e){let i=Object.keys(t),r=Object.keys(e);return i.length==r.length&&i.every(n=>t[n]==e[n])}});zt.languageData=b0e;zt.changeFilter=O0e;zt.transactionFilter=S0e;zt.transactionExtender=_0e;FR.reconfigure=xt.define();function Fc(t,e,i={}){let r={};for(let n of t)for(let s of Object.keys(n)){let o=n[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(i,s))r[s]=i[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let n in e)r[n]===void 0&&(r[n]=e[n]);return r}class Kg{eq(e){return this==e}range(e,i=e){return _6.create(e,i,this)}}Kg.prototype.startSide=Kg.prototype.endSide=0;Kg.prototype.point=!1;Kg.prototype.mapMode=Xn.TrackDel;let _6=class E0e{constructor(e,i,r){this.from=e,this.to=i,this.value=r}static create(e,i,r){return new E0e(e,i,r)}};function x6(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class c7{constructor(e,i,r,n){this.from=e,this.to=i,this.value=r,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,i,r,n=0){let s=r?this.to:this.from;for(let o=n,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-i;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,i,r,n){for(let s=this.findIndex(i,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,i){let r=[],n=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],p=this.from[l]+e,m=this.to[l]+e,g,w;if(p==m){let O=i.mapPos(p,u.startSide,u.mapMode);if(O==null||(g=w=O,u.startSide!=u.endSide&&(w=i.mapPos(p,u.endSide),w<g)))continue}else if(g=i.mapPos(p,u.startSide),w=i.mapPos(m,u.endSide),g>w||g==w&&u.startSide>0&&u.endSide<=0)continue;(w-g||u.endSide-u.startSide)<0||(o<0&&(o=g),u.point&&(a=Math.max(a,w-g)),r.push(u),n.push(g-o),s.push(w-o))}return{mapped:r.length?new c7(n,s,r,a):null,pos:o}}}class Zt{constructor(e,i,r,n){this.chunkPos=e,this.chunk=i,this.nextLayer=r,this.maxPoint=n}static create(e,i,r,n){return new Zt(e,i,r,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let i of this.chunk)e+=i.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:i=[],sort:r=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(i.length==0&&!o)return this;if(r&&(i=i.slice().sort(x6)),this.isEmpty)return i.length?Zt.of(i):this;let a=new k0e(this,null,-1).goto(0),l=0,u=[],p=new Od;for(;a.value||l<i.length;)if(l<i.length&&(a.from-i[l].from||a.startSide-i[l].value.startSide)>=0){let m=i[l++];p.addInner(m.from,m.to,m.value)||u.push(m)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==i.length||this.chunkEnd(a.chunkIndex)<i[l].from)&&(!o||n>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&p.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||n>a.to||s<a.from||o(a.from,a.to,a.value))&&(p.addInner(a.from,a.to,a.value)||u.push(_6.create(a.from,a.to,a.value))),a.next());return p.finishInner(this.nextLayer.isEmpty&&!u.length?Zt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let i=[],r=[],n=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)n=Math.max(n,l.maxPoint),i.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:p,pos:m}=l.map(a,e);p&&(n=Math.max(n,p.maxPoint),i.push(p),r.push(m))}}let s=this.nextLayer.map(e);return i.length==0?s:new Zt(r,i,s||Zt.empty,n)}between(e,i,r){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(i>=s&&e<=s+o.length&&o.between(s,e-s,i-s,r)===!1)return}this.nextLayer.between(e,i,r)}}iter(e=0){return T$.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,i=0){return T$.from(e).goto(i)}static compare(e,i,r,n,s=-1){let o=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=s),a=i.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=s),l=Wte(o,a,r),u=new yS(o,l,s),p=new yS(a,l,s);r.iterGaps((m,g,w)=>Xte(u,m,p,g,w,n)),r.empty&&r.length==0&&Xte(u,0,p,0,0,n)}static eq(e,i,r=0,n){n==null&&(n=999999999);let s=e.filter(p=>!p.isEmpty&&i.indexOf(p)<0),o=i.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Wte(s,o),l=new yS(s,a,0).goto(r),u=new yS(o,a,0).goto(r);for(;;){if(l.to!=u.to||!$6(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>n)return!0;l.next(),u.next()}}static spans(e,i,r,n,s=-1){let o=new yS(e,null,s).goto(i),a=i,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let p=o.activeForPoint(o.to),m=o.pointFrom<i?p.length+1:o.point.startSide<0?p.length:Math.min(p.length,l);n.point(a,u,o.point,p,m,o.pointRank),l=Math.min(o.openEnd(u),p.length)}else u>a&&(n.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,i=!1){let r=new Od;for(let n of e instanceof _6?[e]:i?gKe(e):e)r.add(n.from,n.to,n.value);return r.finish()}static join(e){if(!e.length)return Zt.empty;let i=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let n=e[r];n!=Zt.empty;n=n.nextLayer)i=new Zt(n.chunkPos,n.chunk,i,Math.max(n.maxPoint,i.maxPoint));return i}}Zt.empty=new Zt([],[],null,-1);function gKe(t){if(t.length>1)for(let e=t[0],i=1;i<t.length;i++){let r=t[i];if(x6(e,r)>0)return t.slice().sort(x6);e=r}return t}Zt.empty.nextLayer=Zt.empty;class Od{finishChunk(e){this.chunks.push(new c7(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,i,r){this.addInner(e,i,r)||(this.nextLayer||(this.nextLayer=new Od)).add(e,i,r)}addInner(e,i,r){let n=e-this.lastTo||r.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(i-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=i,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,i-e)),!0)}addChunk(e,i){if((e-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(e);let r=i.value.length-1;return this.last=i.value[r],this.lastFrom=i.from[r]+e,this.lastTo=i.to[r]+e,!0}finish(){return this.finishInner(Zt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let i=Zt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,i}}function Wte(t,e,i){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(i?i.mapPos(a):a)==s.chunkPos[o]&&!(i!=null&&i.touchesRange(a,a+s.chunk[o].length))&&n.add(s.chunk[o])}return n}class k0e{constructor(e,i,r,n=0){this.layer=e,this.skip=i,this.minPoint=r,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,i,!1),this}gotoInner(e,i,r){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],i,!0);(!r||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,i){(this.to-e||this.endSide-i)<0&&this.gotoInner(e,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],r=e+i.from[this.rangeIndex];if(this.from=r,this.to=e+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class T${constructor(e){this.heap=e}static from(e,i=null,r=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&n.push(new k0e(o,i,r,s));return n.length==1?n[0]:new T$(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,i=-1e9){for(let r of this.heap)r.goto(e,i);for(let r=this.heap.length>>1;r>=0;r--)bD(this.heap,r);return this.next(),this}forward(e,i){for(let r of this.heap)r.forward(e,i);for(let r=this.heap.length>>1;r>=0;r--)bD(this.heap,r);(this.to-e||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),bD(this.heap,0)}}}function bD(t,e){for(let i=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let n=t[r];if(r+1<t.length&&n.compare(t[r+1])>=0&&(n=t[r+1],r++),i.compare(n)<0)break;t[r]=i,t[e]=n,e=r}}class yS{constructor(e,i,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=T$.from(e,i,r)}goto(e,i=-1e9){return this.cursor.goto(e,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=i,this.openStart=-1,this.next(),this}forward(e,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(e,i)}removeActive(e){_k(this.active,e),_k(this.activeTo,e),_k(this.activeRank,e),this.minActive=Yte(this.active,this.activeTo)}addActive(e){let i=0,{value:r,to:n,rank:s}=this.cursor;for(;i<this.activeRank.length&&(s-this.activeRank[i]||n-this.activeTo[i])>0;)i++;xk(this.active,i,r),xk(this.activeTo,i,n),xk(this.activeRank,i,s),e&&xk(e,i,this.cursor.from),this.minActive=Yte(this.active,this.activeTo)}next(){let e=this.to,i=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),r&&_k(r,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let n=r.length-1;n>=0&&r[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let i=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&i.push(this.active[r]);return i.reverse()}openEnd(e){let i=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)i++;return i}}function Xte(t,e,i,r,n,s){t.goto(e),i.goto(r);let o=r+n,a=r,l=r-e;for(;;){let u=t.to+l-i.to,p=u||t.endSide-i.endSide,m=p<0?t.to+l:i.to,g=Math.min(m,o);if(t.point||i.point?t.point&&i.point&&(t.point==i.point||t.point.eq(i.point))&&$6(t.activeForPoint(t.to),i.activeForPoint(i.to))||s.comparePoint(a,g,t.point,i.point):g>a&&!$6(t.active,i.active)&&s.compareRange(a,g,t.active,i.active),m>o)break;(u||t.openEnd!=i.openEnd)&&s.boundChange&&s.boundChange(m),a=m,p<=0&&t.next(),p>=0&&i.next()}}function $6(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!=e[i]&&!t[i].eq(e[i]))return!1;return!0}function _k(t,e){for(let i=e,r=t.length-1;i<r;i++)t[i]=t[i+1];t.pop()}function xk(t,e,i){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=i}function Yte(t,e){let i=-1,r=1e9;for(let n=0;n<e.length;n++)(e[n]-r||t[n].endSide-t[i].endSide)<0&&(i=n,r=e[n]);return i}function jO(t,e,i=t.length){let r=0;for(let n=0;n<i&&n<t.length;)t.charCodeAt(n)==9?(r+=e-r%e,n++):(r++,n=Yn(t,n));return r}function T6(t,e,i,r){for(let n=0,s=0;;){if(s>=e)return n;if(n==t.length)break;s+=t.charCodeAt(n)==9?i-s%i:1,n=Yn(t,n)}return r===!0?-1:t.length}const E6="",Jte=typeof Symbol>"u"?"__"+E6:Symbol.for(E6),k6=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Kte=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Wf{constructor(e,i){this.rules=[];let{finish:r}=i||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let p=[],m=/^@(\w+)\b/.exec(o[0]),g=m&&m[1]=="keyframes";if(m&&a==null)return l.push(o[0]+";");for(let w in a){let O=a[w];if(/&/.test(w))s(w.split(/,\s*/).map(_=>o.map(x=>_.replace(/&/,x))).reduce((_,x)=>_.concat(x)),O,l);else if(O&&typeof O=="object"){if(!m)throw new RangeError("The value of a property ("+w+") should be a primitive value.");s(n(w),O,p,g)}else O!=null&&p.push(w.replace(/_.*/,"").replace(/[A-Z]/g,_=>"-"+_.toLowerCase())+": "+O+";")}(p.length||g)&&l.push((r&&!m&&!u?o.map(r):o).join(", ")+" {"+p.join(" ")+"}")}for(let o in e)s(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Kte[Jte]||1;return Kte[Jte]=e+1,E6+e.toString(36)}static mount(e,i,r){let n=e[k6],s=r&&r.nonce;n?s&&n.setNonce(s):n=new vKe(e,s),n.mount(Array.isArray(i)?i:[i],e)}}let eie=new Map;class vKe{constructor(e,i){let r=e.ownerDocument||e,n=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let s=eie.get(r);if(s)return e[k6]=s;this.sheet=new n.CSSStyleSheet,eie.set(r,this)}else this.styleTag=r.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);this.modules=[],e[k6]=this}mount(e,i){let r=this.sheet,n=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let u=0;u<a.rules.length;u++)r.insertRule(a.rules[u],n++)}else{for(;s<l;)n+=this.modules[s++].rules.length;n+=a.rules.length,s++}}if(r)i.adoptedStyleSheets.indexOf(this.sheet)<0&&(i.adoptedStyleSheets=[this.sheet,...i.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=i.head||i;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Xf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E$={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bKe=typeof navigator<"u"&&/Mac/.test(navigator.platform),wKe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Hn=0;Hn<10;Hn++)Xf[48+Hn]=Xf[96+Hn]=String(Hn);for(var Hn=1;Hn<=24;Hn++)Xf[Hn+111]="F"+Hn;for(var Hn=65;Hn<=90;Hn++)Xf[Hn]=String.fromCharCode(Hn+32),E$[Hn]=String.fromCharCode(Hn);for(var wD in Xf)E$.hasOwnProperty(wD)||(E$[wD]=Xf[wD]);function OKe(t){var e=bKe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||wKe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",i=!e&&t.key||(t.shiftKey?E$:Xf)[t.keyCode]||t.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function k$(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function C6(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function CM(t,e){if(!e.anchorNode)return!1;try{return C6(t,e.anchorNode)}catch{return!1}}function Gw(t){return t.nodeType==3?t0(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Px(t,e,i,r){return i?tie(t,e,i,r,-1)||tie(t,e,i,r,1):!1}function e0(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function EI(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function tie(t,e,i,r,n){for(;;){if(t==i&&e==r)return!0;if(e==(n<0?0:Ic(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=e0(t)+(n<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(n<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=n<0?Ic(t):0}else return!1}}function Ic(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function z2(t,e){let i=e?t.left:t.right;return{left:i,right:i,top:t.top,bottom:t.bottom}}function SKe(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function C0e(t,e){let i=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.width-t.offsetWidth)<1)&&(i=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:i,scaleY:r}}function _Ke(t,e,i,r,n,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let p=t,m=!1;p&&!m;)if(p.nodeType==1){let g,w=p==l.body,O=1,_=1;if(w)g=SKe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(m=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let E=p.getBoundingClientRect();({scaleX:O,scaleY:_}=C0e(p,E)),g={left:E.left,right:E.left+p.clientWidth*O,top:E.top,bottom:E.top+p.clientHeight*_}}let x=0,T=0;if(n=="nearest")e.top<g.top?(T=e.top-(g.top+o),i>0&&e.bottom>g.bottom+T&&(T=e.bottom-g.bottom+o)):e.bottom>g.bottom&&(T=e.bottom-g.bottom+o,i<0&&e.top-T<g.top&&(T=e.top-(g.top+o)));else{let E=e.bottom-e.top,k=g.bottom-g.top;T=(n=="center"&&E<=k?e.top+E/2-k/2:n=="start"||n=="center"&&i<0?e.top-o:e.bottom-k+o)-g.top}if(r=="nearest"?e.left<g.left?(x=e.left-(g.left+s),i>0&&e.right>g.right+x&&(x=e.right-g.right+s)):e.right>g.right&&(x=e.right-g.right+s,i<0&&e.left<g.left+x&&(x=e.left-(g.left+s))):x=(r=="center"?e.left+(e.right-e.left)/2-(g.right-g.left)/2:r=="start"==a?e.left-s:e.right-(g.right-g.left)+s)-g.left,x||T)if(w)u.scrollBy(x,T);else{let E=0,k=0;if(T){let M=p.scrollTop;p.scrollTop+=T/_,k=(p.scrollTop-M)*_}if(x){let M=p.scrollLeft;p.scrollLeft+=x/O,E=(p.scrollLeft-M)*O}e={left:e.left-E,top:e.top-k,right:e.right-E,bottom:e.bottom-k},E&&Math.abs(E-x)<1&&(r="nearest"),k&&Math.abs(k-T)<1&&(n="nearest")}if(w)break;(e.top<g.top||e.bottom>g.bottom||e.left<g.left||e.right>g.right)&&(e={left:Math.max(e.left,g.left),right:Math.min(e.right,g.right),top:Math.max(e.top,g.top),bottom:Math.min(e.bottom,g.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function xKe(t){let e=t.ownerDocument,i,r;for(let n=t.parentNode;n&&!(n==e.body||i&&r);)if(n.nodeType==1)!r&&n.scrollHeight>n.clientHeight&&(r=n),!i&&n.scrollWidth>n.clientWidth&&(i=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:i,y:r}}class $Ke{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:i,focusNode:r}=e;this.set(i,Math.min(e.anchorOffset,i?Ic(i):0),r,Math.min(e.focusOffset,r?Ic(r):0))}set(e,i,r,n){this.anchorNode=e,this.anchorOffset=i,this.focusNode=r,this.focusOffset=n}}let gv=null;function M0e(t){if(t.setActive)return t.setActive();if(gv)return t.focus(gv);let e=[];for(let i=t;i&&(e.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(t.focus(gv==null?{get preventScroll(){return gv={preventScroll:!0},!0}}:void 0),!gv){gv=!1;for(let i=0;i<e.length;){let r=e[i++],n=e[i++],s=e[i++];r.scrollTop!=n&&(r.scrollTop=n),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let iie;function t0(t,e,i=e){let r=iie||(iie=document.createRange());return r.setEnd(t,i),r.setStart(t,e),r}function bw(t,e,i,r){let n={key:e,code:e,keyCode:i,which:i,cancelable:!0};r&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=r);let s=new KeyboardEvent("keydown",n);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function TKe(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function A0e(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function EKe(t,e){let i=e.focusNode,r=e.focusOffset;if(!i||e.anchorNode!=i||e.anchorOffset!=r)return!1;for(r=Math.min(r,Ic(i));;)if(r){if(i.nodeType!=1)return!1;let n=i.childNodes[r-1];n.contentEditable=="false"?r--:(i=n,r=Ic(i))}else{if(i==t)return!0;r=e0(i),i=i.parentNode}}function I0e(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function P0e(t,e){for(let i=t,r=e;;){if(i.nodeType==3&&r>0)return{node:i,offset:r};if(i.nodeType==1&&r>0){if(i.contentEditable=="false")return null;i=i.childNodes[r-1],r=Ic(i)}else if(i.parentNode&&!EI(i))r=e0(i),i=i.parentNode;else return null}}function R0e(t,e){for(let i=t,r=e;;){if(i.nodeType==3&&r<i.nodeValue.length)return{node:i,offset:r};if(i.nodeType==1&&r<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[r],r=0}else if(i.parentNode&&!EI(i))r=e0(i)+1,i=i.parentNode;else return null}}class ws{constructor(e,i,r=!0){this.node=e,this.offset=i,this.precise=r}static before(e,i){return new ws(e.parentNode,e0(e),i)}static after(e,i){return new ws(e.parentNode,e0(e)+1,i)}}const h7=[];class $i{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let i=this.posAtStart;for(let r of this.children){if(r==e)return i;i+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,i){if(this.flags&2){let r=this.dom,n=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=n?n.nextSibling:r.firstChild)){let a=$i.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,i),o.flags&=-8}if(s=n?n.nextSibling:r.firstChild,i&&!i.written&&i.node==r&&s!=o.dom&&(i.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=rie(s);else r.insertBefore(o.dom,s);n=o.dom}for(s=n?n.nextSibling:r.firstChild,s&&i&&i.node==r&&(i.written=!0);s;)s=rie(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,i),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,i){let r;if(e==this.dom)r=this.dom.childNodes[i];else{let n=Ic(e)==0?0:i==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!$i.get(r);)r=r.nextSibling;if(!r)return this.length;for(let n=0,s=0;;n++){let o=this.children[n];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,i,r=0){let n=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,p=r;l<this.children.length;l++){let m=this.children[l],g=u+m.length;if(u<e&&g>i)return m.domBoundsAround(e,i,u);if(g>=e&&n==-1&&(n=l,s=u),u>i&&m.dom.parentNode==this.dom){o=l,a=p;break}p=g,u=g+m.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let i=this.parent;i;i=i.parent){if(e&&(i.flags|=2),i.flags&1)return;i.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let i=e.parent;if(!i)return e;e=i}}replaceChildren(e,i,r=h7){this.markDirty();for(let n=e;n<i;n++){let s=this.children[n];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,i-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(i));for(let n=0;n<r.length;n++)r[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new L0e(this.children,e,this.children.length)}childPos(e,i=1){return this.childCursor().findPos(e,i)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,i,r,n,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}$i.prototype.breakAfter=0;function rie(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class L0e{constructor(e,i,r){this.children=e,this.pos=i,this.i=r,this.off=0}findPos(e,i=1){for(;;){if(e>this.pos||e==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function N0e(t,e,i,r,n,s,o,a,l){let{children:u}=t,p=u.length?u[e]:null,m=s.length?s[s.length-1]:null,g=m?m.breakAfter:o;if(!(e==r&&p&&!o&&!g&&s.length<2&&p.merge(i,n,s.length?m:null,i==0,a,l))){if(r<u.length){let w=u[r];w&&(n<w.length||w.breakAfter&&(m!=null&&m.breakAfter))?(e==r&&(w=w.split(n),n=0),!g&&m&&w.merge(0,n,m,!0,0,l)?s[s.length-1]=w:((n||w.children.length&&!w.children[0].length)&&w.merge(0,n,null,!1,0,l),s.push(w))):w!=null&&w.breakAfter&&(m?m.breakAfter=1:o=1),r++}for(p&&(p.breakAfter=o,i>0&&(!o&&s.length&&p.merge(i,p.length,s[0],!1,a,0)?p.breakAfter=s.shift().breakAfter:(i<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(i,p.length,null,!1,a,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function D0e(t,e,i,r,n,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(i,1),{i:u,off:p}=o.findPos(e,-1),m=e-i;for(let g of r)m+=g.length;t.length+=m,N0e(t,u,p,a,l,r,0,n,s)}let So=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},M6=typeof document<"u"?document:{documentElement:{style:{}}};const A6=/Edge\/(\d+)/.exec(So.userAgent),V0e=/MSIE \d/.test(So.userAgent),I6=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(So.userAgent),jR=!!(V0e||I6||A6),nie=!jR&&/gecko\/(\d+)/i.test(So.userAgent),OD=!jR&&/Chrome\/(\d+)/.exec(So.userAgent),sie="webkitFontSmoothing"in M6.documentElement.style,F0e=!jR&&/Apple Computer/.test(So.vendor),oie=F0e&&(/Mobile\/\w+/.test(So.userAgent)||So.maxTouchPoints>2);var Fe={mac:oie||/Mac/.test(So.platform),windows:/Win/.test(So.platform),linux:/Linux|X11/.test(So.platform),ie:jR,ie_version:V0e?M6.documentMode||6:I6?+I6[1]:A6?+A6[1]:0,gecko:nie,gecko_version:nie?+(/Firefox\/(\d+)/.exec(So.userAgent)||[0,0])[1]:0,chrome:!!OD,chrome_version:OD?+OD[1]:0,ios:oie,android:/Android\b/.test(So.userAgent),webkit:sie,safari:F0e,webkit_version:sie?+(/\bAppleWebKit\/(\d+)/.exec(So.userAgent)||[0,0])[1]:0,tabSize:M6.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const kKe=256;class vu extends $i{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,i,r){return this.flags&8||r&&(!(r instanceof vu)||this.length-(i-e)+r.length>kKe||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(i),this.markDirty(),!0)}split(e){let i=new vu(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(e,i){return e==this.dom?i:i?this.text.length:0}domAtPos(e){return new ws(this.dom,e)}domBoundsAround(e,i,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,i){return CKe(this.dom,e,i)}}class Sd extends $i{constructor(e,i=[],r=0){super(),this.mark=e,this.children=i,this.length=r;for(let n of i)n.setParent(this)}setAttrs(e){if(A0e(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)e.setAttribute(i,this.mark.attrs[i]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,i)}merge(e,i,r,n,s,o){return r&&(!(r instanceof Sd&&r.mark.eq(this.mark))||e&&s<=0||i<this.length&&o<=0)?!1:(D0e(this,e,i,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let i=[],r=0,n=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&i.push(r<e?a.split(e-r):a),n<0&&r>=e&&(n=s),r=l,s++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Sd(this.mark,i,o)}domAtPos(e){return j0e(this,e)}coordsAt(e,i){return U0e(this,e,i)}}function CKe(t,e,i){let r=t.nodeValue.length;e>r&&(e=r);let n=e,s=e,o=0;e==0&&i<0||e==r&&i>=0?Fe.chrome||Fe.gecko||(e?(n--,o=1):s<r&&(s++,o=-1)):i<0?n--:s<r&&s++;let a=t0(t,n,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:i>=0)?0:a.length-1];return Fe.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?z2(l,o<0):l||null}class vf extends $i{static create(e,i,r){return new vf(e,i,r)}constructor(e,i,r){super(),this.widget=e,this.length=i,this.side=r,this.prevWidget=null}split(e){let i=vf.create(this.widget,this.length-e,this.side);return this.length-=e,i}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,i,r,n,s,o){return r&&(!(r instanceof vf)||!this.widget.compare(r.widget)||e>0&&s<=0||i<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-i),!0)}become(e){return e instanceof vf&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Qt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:i}=e,r=i&&i.state.doc,n=this.posAtStart;return r?r.slice(n,n+this.length):Qt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ws.before(this.dom):ws.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,i){let r=this.widget.coordsAt(this.dom,e,i);if(r)return r;let n=this.dom.getClientRects(),s=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?n.length-1:0;s=n[a],!(e>0?a==0:a==n.length-1||s.top<s.bottom);a+=o?-1:1);return z2(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Zw extends $i{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Zw&&e.side==this.side}split(){return new Zw(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ws.before(this.dom):ws.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Qt.empty}get isHidden(){return!0}}vu.prototype.children=vf.prototype.children=Zw.prototype.children=h7;function j0e(t,e){let i=t.dom,{children:r}=t,n=0;for(let s=0;n<r.length;n++){let o=r[n],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==i)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=n;s>0;s--){let o=r[s-1];if(o.dom.parentNode==i)return o.domAtPos(o.length)}for(let s=n;s<r.length;s++){let o=r[s];if(o.dom.parentNode==i)return o.domAtPos(0)}return new ws(i,0)}function z0e(t,e,i){let r,{children:n}=t;i>0&&e instanceof Sd&&n.length&&(r=n[n.length-1])instanceof Sd&&r.mark.eq(e.mark)?z0e(r,e.children[0],i-1):(n.push(e),e.setParent(t)),t.length+=e.length}function U0e(t,e,i){let r=null,n=-1,s=null,o=-1;function a(u,p){for(let m=0,g=0;m<u.children.length&&g<=p;m++){let w=u.children[m],O=g+w.length;O>=p&&(w.children.length?a(w,p-g):(!s||s.isHidden&&i>0)&&(O>p||g==O&&w.getSide()>0)?(s=w,o=p-g):(g<p||g==O&&w.getSide()<0&&!w.isHidden)&&(r=w,n=p-g)),g=O}}a(t,e);let l=(i<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?n:o),i):MKe(t)}function MKe(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let i=Gw(e);return i[i.length-1]||null}function P6(t,e){for(let i in t)i=="class"&&e.class?e.class+=" "+t.class:i=="style"&&e.style?e.style+=";"+t.style:e[i]=t[i];return e}const aie=Object.create(null);function kI(t,e,i){if(t==e)return!0;t||(t=aie),e||(e=aie);let r=Object.keys(t),n=Object.keys(e);if(r.length-(i&&r.indexOf(i)>-1?1:0)!=n.length-(i&&n.indexOf(i)>-1?1:0))return!1;for(let s of r)if(s!=i&&(n.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function R6(t,e,i){let r=!1;if(e)for(let n in e)i&&n in i||(r=!0,n=="style"?t.style.cssText="":t.removeAttribute(n));if(i)for(let n in i)e&&e[n]==i[n]||(r=!0,n=="style"?t.style.cssText=i[n]:t.setAttribute(n,i[n]));return r}function AKe(t){let e=Object.create(null);for(let i=0;i<t.attributes.length;i++){let r=t.attributes[i];e[r.name]=r.value}return e}class jc{eq(e){return!1}updateDOM(e,i){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,i,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Js=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Js||(Js={}));class st extends Kg{constructor(e,i,r,n){super(),this.startSide=e,this.endSide=i,this.widget=r,this.spec=n}get heightRelevant(){return!1}static mark(e){return new U2(e)}static widget(e){let i=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return i+=r&&!e.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new Yf(e,i,i,r,e.widget||null,!1)}static replace(e){let i=!!e.block,r,n;if(e.isBlockGap)r=-5e8,n=4e8;else{let{start:s,end:o}=Q0e(e,i);r=(s?i?-3e8:-1:5e8)-1,n=(o?i?2e8:1:-6e8)+1}return new Yf(e,r,n,i,e.widget||null,!0)}static line(e){return new Q2(e)}static set(e,i=!1){return Zt.of(e,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}st.none=Zt.empty;class U2 extends st{constructor(e){let{start:i,end:r}=Q0e(e);super(i?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var i,r;return this==e||e instanceof U2&&this.tagName==e.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&kI(this.attrs,e.attrs,"class")}range(e,i=e){if(e>=i)throw new RangeError("Mark decorations may not be empty");return super.range(e,i)}}U2.prototype.point=!1;class Q2 extends st{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Q2&&this.spec.class==e.spec.class&&kI(this.spec.attributes,e.spec.attributes)}range(e,i=e){if(i!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,i)}}Q2.prototype.mapMode=Xn.TrackBefore;Q2.prototype.point=!0;class Yf extends st{constructor(e,i,r,n,s,o){super(i,r,s,e),this.block=n,this.isReplace=o,this.mapMode=n?i<=0?Xn.TrackBefore:Xn.TrackAfter:Xn.TrackDel}get type(){return this.startSide!=this.endSide?Js.WidgetRange:this.startSide<=0?Js.WidgetBefore:Js.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Yf&&IKe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,i=e){if(this.isReplace&&(e>i||e==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,i)}}Yf.prototype.point=!0;function Q0e(t,e=!1){let{inclusiveStart:i,inclusiveEnd:r}=t;return i==null&&(i=t.inclusive),r==null&&(r=t.inclusive),{start:i??e,end:r??e}}function IKe(t,e){return t==e||!!(t&&e&&t.compare(e))}function MM(t,e,i,r=0){let n=i.length-1;n>=0&&i[n]+r>=t?i[n]=Math.max(i[n],e):i.push(t,e)}class Hr extends $i{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,i,r,n,s,o){if(r){if(!(r instanceof Hr))return!1;this.dom||r.transferDOM(this)}return n&&this.setDeco(r?r.attrs:null),D0e(this,e,i,r?r.children.slice():[],s,o),!0}split(e){let i=new Hr;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:r,off:n}=this.childPos(e);n&&(i.append(this.children[r].split(n),0),this.children[r].merge(n,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)i.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,i}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){kI(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,i){z0e(this,e,i)}addLineDeco(e){let i=e.spec.attributes,r=e.spec.class;i&&(this.attrs=P6(i,this.attrs||{})),r&&(this.attrs=P6({class:r},this.attrs||{}))}domAtPos(e){return j0e(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,i){var r;this.dom?this.flags&4&&(A0e(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(R6(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,i);let n=this.dom.lastChild;for(;n&&$i.get(n)instanceof Sd;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((r=$i.get(n))===null||r===void 0?void 0:r.isEditable)==!1&&(!Fe.ios||!this.children.some(s=>s instanceof vu))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,i;for(let r of this.children){if(!(r instanceof vu)||/[^ -~]/.test(r.text))return null;let n=Gw(r.dom);if(n.length!=1)return null;e+=n[0].width,i=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:i}:null}coordsAt(e,i){let r=U0e(this,e,i);if(!this.children.length&&r&&this.parent){let{heightOracle:n}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-n.lineHeight)<2&&n.textHeight<s){let o=(s-n.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof Hr&&this.children.length==0&&e.children.length==0&&kI(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,i){for(let r=0,n=0;r<e.children.length;r++){let s=e.children[r],o=n+s.length;if(o>=i){if(s instanceof Hr)return s;if(o>i)break}n=o+s.breakAfter}return null}}class fd extends $i{constructor(e,i,r){super(),this.widget=e,this.length=i,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,i,r,n,s,o){return r&&(!(r instanceof fd)||!this.widget.compare(r.widget)||e>0&&s<=0||i<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-i),!0)}domAtPos(e){return e==0?ws.before(this.dom):ws.after(this.dom,e==this.length)}split(e){let i=this.length-e;this.length=e;let r=new fd(this.widget,i,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return h7}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Qt.empty}domBoundsAround(){return null}become(e){return e instanceof fd&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,i){let r=this.widget.coordsAt(this.dom,e,i);return r||(this.widget instanceof L6?null:z2(this.dom.getBoundingClientRect(),this.length?e==0:i<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:i,endSide:r}=this.deco;return i==r?!1:e<0?i<0:r>0}}class L6 extends jc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Rx{constructor(e,i,r,n){this.doc=e,this.pos=i,this.end=r,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof fd&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Hr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append($k(new Zw(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof fd)&&this.getLine()}buildText(e,i,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(i.slice(i.length-r)),this.getLine().append($k(new vu(this.text.slice(this.textOff,this.textOff+n)),i),r),this.atCursorPos=!0,this.textOff+=n,e-=n,r=0}}span(e,i,r,n){this.buildText(i-e,r,n),this.pos=i,this.openStart<0&&(this.openStart=n)}point(e,i,r,n,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Yf){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=i-e;if(r instanceof Yf)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new fd(r.widget||Hw.block,a,r));else{let l=vf.create(r.widget||Hw.inline,a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=n.length&&(e<i||r.startSide>0),p=!l.isEditable&&(e<i||s>n.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),u&&(m.append($k(new Zw(1),n),s),s=n.length+Math.max(0,s-n.length)),m.append($k(l,n),s),this.atCursorPos=p,this.pendingBuffer=p?e<i||s>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=s)}static build(e,i,r,n,s){let o=new Rx(e,i,r,s);return o.openEnd=Zt.spans(n,i,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function $k(t,e){for(let i of e)t=new Sd(i,[t],t.length);return t}class Hw extends jc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Hw.inline=new Hw("span");Hw.block=new Hw("div");var Bi=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Bi||(Bi={}));const i0=Bi.LTR,d7=Bi.RTL;function B0e(t){let e=[];for(let i=0;i<t.length;i++)e.push(1<<+t[i]);return e}const PKe=B0e("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),RKe=B0e("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),N6=Object.create(null),Au=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),i=t.charCodeAt(1);N6[e]=i,N6[i]=-e}function q0e(t){return t<=247?PKe[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?RKe[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const LKe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class bf{get dir(){return this.level%2?d7:i0}constructor(e,i,r){this.from=e,this.to=i,this.level=r}side(e,i){return this.dir==i==e?this.to:this.from}forward(e,i){return e==(this.dir==i)}static find(e,i,r,n){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=i&&a.to>=i){if(a.level==r)return o;(s<0||(n!=0?n<0?a.from<i:a.to>i:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function G0e(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],n=e[i];if(r.from!=n.from||r.to!=n.to||r.direction!=n.direction||!G0e(r.inner,n.inner))return!1}return!0}const xi=[];function NKe(t,e,i,r,n){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:i,l=s?256:n;for(let u=o,p=l,m=l;u<a;u++){let g=q0e(t.charCodeAt(u));g==512?g=p:g==8&&m==4&&(g=16),xi[u]=g==4?2:g,g&7&&(m=g),p=g}for(let u=o,p=l,m=l;u<a;u++){let g=xi[u];if(g==128)u<a-1&&p==xi[u+1]&&p&24?g=xi[u]=p:xi[u]=256;else if(g==64){let w=u+1;for(;w<a&&xi[w]==64;)w++;let O=u&&p==8||w<i&&xi[w]==8?m==1?1:8:256;for(let _=u;_<w;_++)xi[_]=O;u=w-1}else g==8&&m==1&&(xi[u]=1);p=g,g&7&&(m=g)}}}function DKe(t,e,i,r,n){let s=n==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let u=o?r[o-1].to:e,p=o<r.length?r[o].from:i;for(let m=u,g,w,O;m<p;m++)if(w=N6[g=t.charCodeAt(m)])if(w<0){for(let _=a-3;_>=0;_-=3)if(Au[_+1]==-w){let x=Au[_+2],T=x&2?n:x&4?x&1?s:n:0;T&&(xi[m]=xi[Au[_]]=T),a=_;break}}else{if(Au.length==189)break;Au[a++]=m,Au[a++]=g,Au[a++]=l}else if((O=xi[m])==2||O==1){let _=O==n;l=_?0:1;for(let x=a-3;x>=0;x-=3){let T=Au[x+2];if(T&2)break;if(_)Au[x+2]|=2;else{if(T&4)break;Au[x+2]|=4}}}}}function VKe(t,e,i,r){for(let n=0,s=r;n<=i.length;n++){let o=n?i[n-1].to:t,a=n<i.length?i[n].from:e;for(let l=o;l<a;){let u=xi[l];if(u==256){let p=l+1;for(;;)if(p==a){if(n==i.length)break;p=i[n++].to,a=n<i.length?i[n].from:e}else if(xi[p]==256)p++;else break;let m=s==1,g=(p<e?xi[p]:r)==1,w=m==g?m?1:2:r;for(let O=p,_=n,x=_?i[_-1].to:t;O>l;)O==x&&(O=i[--_].from,x=_?i[_-1].to:t),xi[--O]=w;l=p}else s=u,l++}}}function D6(t,e,i,r,n,s,o){let a=r%2?2:1;if(r%2==n%2)for(let l=e,u=0;l<i;){let p=!0,m=!1;if(u==s.length||l<s[u].from){let _=xi[l];_!=a&&(p=!1,m=_==16)}let g=!p&&a==1?[]:null,w=p?r:r+1,O=l;e:for(;;)if(u<s.length&&O==s[u].from){if(m)break e;let _=s[u];if(!p)for(let x=_.to,T=u+1;;){if(x==i)break e;if(T<s.length&&s[T].from==x)x=s[T++].to;else{if(xi[x]==a)break e;break}}if(u++,g)g.push(_);else{_.from>l&&o.push(new bf(l,_.from,w));let x=_.direction==i0!=!(w%2);V6(t,x?r+1:r,n,_.inner,_.from,_.to,o),l=_.to}O=_.to}else{if(O==i||(p?xi[O]!=a:xi[O]==a))break;O++}g?D6(t,l,O,r+1,n,g,o):l<O&&o.push(new bf(l,O,w)),l=O}else for(let l=i,u=s.length;l>e;){let p=!0,m=!1;if(!u||l>s[u-1].to){let _=xi[l-1];_!=a&&(p=!1,m=_==16)}let g=!p&&a==1?[]:null,w=p?r:r+1,O=l;e:for(;;)if(u&&O==s[u-1].to){if(m)break e;let _=s[--u];if(!p)for(let x=_.from,T=u;;){if(x==e)break e;if(T&&s[T-1].to==x)x=s[--T].from;else{if(xi[x-1]==a)break e;break}}if(g)g.push(_);else{_.to<l&&o.push(new bf(_.to,l,w));let x=_.direction==i0!=!(w%2);V6(t,x?r+1:r,n,_.inner,_.from,_.to,o),l=_.from}O=_.from}else{if(O==e||(p?xi[O-1]!=a:xi[O-1]==a))break;O--}g?D6(t,O,l,r+1,n,g,o):O<l&&o.push(new bf(O,l,w)),l=O}}function V6(t,e,i,r,n,s,o){let a=e%2?2:1;NKe(t,n,s,r,a),DKe(t,n,s,r,a),VKe(n,s,r,a),D6(t,n,s,e,i,r,o)}function FKe(t,e,i){if(!t)return[new bf(0,0,e==d7?1:0)];if(e==i0&&!i.length&&!LKe.test(t))return Z0e(t.length);if(i.length)for(;t.length>xi.length;)xi[xi.length]=256;let r=[],n=e==i0?0:1;return V6(t,n,n,i,0,t.length,r),r}function Z0e(t){return[new bf(0,t,0)]}let H0e="";function jKe(t,e,i,r,n){var s;let o=r.head-t.from,a=bf.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],u=l.side(n,i);if(o==u){let g=a+=n?1:-1;if(g<0||g>=e.length)return null;l=e[a=g],o=l.side(!n,i),u=l.side(n,i)}let p=Yn(t.text,o,l.forward(n,i));(p<l.from||p>l.to)&&(p=u),H0e=t.text.slice(Math.min(o,p),Math.max(o,p));let m=a==(n?e.length-1:0)?null:e[a+(n?1:-1)];return m&&p==u&&m.level+(n?0:1)<l.level?me.cursor(m.side(!n,i)+t.from,m.forward(n,i)?1:-1,m.level):me.cursor(p+t.from,l.forward(n,i)?-1:1,l.level)}function zKe(t,e,i){for(let r=e;r<i;r++){let n=q0e(t.charCodeAt(r));if(n==1)return i0;if(n==2||n==4)return d7}return i0}const W0e=ze.define(),X0e=ze.define(),Y0e=ze.define(),J0e=ze.define(),F6=ze.define(),K0e=ze.define(),eve=ze.define(),p7=ze.define(),f7=ze.define(),tve=ze.define({combine:t=>t.some(e=>e)}),ive=ze.define({combine:t=>t.some(e=>e)}),rve=ze.define();class ww{constructor(e,i="nearest",r="nearest",n=5,s=5,o=!1){this.range=e,this.y=i,this.x=r,this.yMargin=n,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new ww(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ww(me.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Tk=xt.define({map:(t,e)=>t.map(e)}),nve=xt.define();function Eo(t,e,i){let r=t.facet(J0e);r.length?r[0](e):window.onerror?window.onerror(String(e),i,void 0,void 0,e):i?console.error(i+":",e):console.error(e)}const sd=ze.define({combine:t=>t.length?t[0]:!0});let UKe=0;const G_=ze.define();class Nr{constructor(e,i,r,n,s){this.id=e,this.create=i,this.domEventHandlers=r,this.domEventObservers=n,this.extension=s(this)}static define(e,i){const{eventHandlers:r,eventObservers:n,provide:s,decorations:o}=i||{};return new Nr(UKe++,e,r,n,a=>{let l=[G_.of(a)];return o&&l.push(C$.of(u=>{let p=u.plugin(a);return p?o(p):st.none})),s&&l.push(s(a)),l})}static fromClass(e,i){return Nr.define(r=>new e(r),i)}}class SD{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(r){if(Eo(i.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(i){Eo(e.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(r){Eo(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const sve=ze.define(),m7=ze.define(),C$=ze.define(),ove=ze.define(),y7=ze.define(),ave=ze.define();function lie(t,e){let i=t.state.facet(ave);if(!i.length)return i;let r=i.map(s=>s instanceof Function?s(t):s),n=[];return Zt.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,p=o-e.from,m=n;for(let g=a.length-1;g>=0;g--,l--){let w=a[g].spec.bidiIsolate,O;if(w==null&&(w=zKe(e.text,u,p)),l>0&&m.length&&(O=m[m.length-1]).to==u&&O.direction==w)O.to=p,m=O.inner;else{let _={from:u,to:p,direction:w,inner:[]};m.push(_),m=_.inner}}}}),n}const lve=ze.define();function g7(t){let e=0,i=0,r=0,n=0;for(let s of t.state.facet(lve)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(i=Math.max(i,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:i,top:r,bottom:n}}const Z_=ze.define();class al{constructor(e,i,r,n){this.fromA=e,this.toA=i,this.fromB=r,this.toB=n}join(e){return new al(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let i=e.length,r=this;for(;i>0;i--){let n=e[i-1];if(!(n.fromA>r.toA)){if(n.toA<r.fromA)break;r=r.join(n),e.splice(i-1,1)}}return e.splice(i,0,r),e}static extendWithRanges(e,i){if(i.length==0)return e;let r=[];for(let n=0,s=0,o=0,a=0;;n++){let l=n==e.length?null:e[n],u=o-a,p=l?l.fromB:1e9;for(;s<i.length&&i[s]<p;){let m=i[s],g=i[s+1],w=Math.max(a,m),O=Math.min(p,g);if(w<=O&&new al(w+u,O+u,w,O).addToSet(r),g>p)break;s+=2}if(!l)return r;new al(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class CI{constructor(e,i,r){this.view=e,this.state=i,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=dn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let n=[];this.changes.iterChangedRanges((s,o,a,l)=>n.push(new al(s,o,a,l))),this.changedRanges=n}static create(e,i,r){return new CI(e,i,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class uie extends $i{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=st.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Hr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new al(0,0,0,e.state.doc.length)],0,null)}update(e){var i;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:p})=>p<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((i=this.domChanged)===null||i===void 0)&&i.newSel?n=this.domChanged.newSel.head:!WKe(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let s=n>-1?BKe(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:p}=this.hasComposition;r=new al(u,p,e.changes.mapPos(u,-1),e.changes.mapPos(p,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Fe.ie||Fe.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=ZKe(o,a,e.changes);return r=al.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,i,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,i,r);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Fe.chrome||Fe.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof fd&&o.widget instanceof L6&&s.push(o.dom);n.updateGaps(s)}updateChildren(e,i,r){let n=r?r.range.addToSet(e.slice()):e,s=this.childCursor(i);for(let o=n.length-1;;o--){let a=o>=0?n[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:p,toB:m}=a,g,w,O,_;if(r&&r.range.fromB<m&&r.range.toB>p){let M=Rx.build(this.view.state.doc,p,r.range.fromB,this.decorations,this.dynamicDecorationMap),R=Rx.build(this.view.state.doc,r.range.toB,m,this.decorations,this.dynamicDecorationMap);w=M.breakAtStart,O=M.openStart,_=R.openEnd;let D=this.compositionView(r);R.breakAtStart?D.breakAfter=1:R.content.length&&D.merge(D.length,D.length,R.content[0],!1,R.openStart,0)&&(D.breakAfter=R.content[0].breakAfter,R.content.shift()),M.content.length&&D.merge(0,0,M.content[M.content.length-1],!0,0,M.openEnd)&&M.content.pop(),g=M.content.concat(D).concat(R.content)}else({content:g,breakAtStart:w,openStart:O,openEnd:_}=Rx.build(this.view.state.doc,p,m,this.decorations,this.dynamicDecorationMap));let{i:x,off:T}=s.findPos(u,1),{i:E,off:k}=s.findPos(l,-1);N0e(this,E,k,x,T,g,w,O,_)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let i of e.transactions)for(let r of i.effects)r.is(nve)&&(this.editContextFormatting=r.value)}compositionView(e){let i=new vu(e.text.nodeValue);i.flags|=8;for(let{deco:n}of e.marks)i=new Sd(n,[i],i.length);let r=new Hr;return r.append(i,0),r}fixCompositionDOM(e){let i=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=$i.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),n=this.children[r.i];i(e.line,n);for(let s=e.marks.length-1;s>=-1;s--)r=n.childPos(r.off,1),n=n.children[r.i],i(s>=0?e.marks[s].node:e.text,n)}updateSelection(e=!1,i=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,n=r==this.dom,s=!n&&!(this.view.state.facet(sd)||this.dom.tabIndex>-1)&&CM(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(n||i||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Fe.gecko&&a.empty&&!this.hasComposition&&QKe(l)){let m=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(m,l.node.childNodes[l.offset]||null)),l=u=new ws(m,0),o=!0}let p=this.view.observer.selectionRange;(o||!p.focusNode||(!Px(l.node,l.offset,p.anchorNode,p.anchorOffset)||!Px(u.node,u.offset,p.focusNode,p.focusOffset))&&!this.suppressWidgetCursorChange(p,a))&&(this.view.observer.ignore(()=>{Fe.android&&Fe.chrome&&this.dom.contains(p.focusNode)&&HKe(p.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=k$(this.view.root);if(m)if(a.empty){if(Fe.gecko){let g=qKe(l.node,l.offset);if(g&&g!=3){let w=(g==1?P0e:R0e)(l.node,l.offset);w&&(l=new ws(w.node,w.offset))}}m.collapse(l.node,l.offset),a.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=a.bidiLevel)}else if(m.extend){m.collapse(l.node,l.offset);try{m.extend(u.node,u.offset)}catch{}}else{let g=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),g.setEnd(u.node,u.offset),g.setStart(l.node,l.offset),m.removeAllRanges(),m.addRange(g)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new ws(p.anchorNode,p.anchorOffset),this.impreciseHead=u.precise?null:new ws(p.focusNode,p.focusOffset)}suppressWidgetCursorChange(e,i){return this.hasComposition&&i.empty&&Px(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==i.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,i=e.state.selection.main,r=k$(e.root),{anchorNode:n,anchorOffset:s}=e.observer.selectionRange;if(!r||!i.empty||!i.assoc||!r.modify)return;let o=Hr.find(this,i.head);if(!o)return;let a=o.posAtStart;if(i.head==a||i.head==a+o.length)return;let l=this.coordsAt(i.head,-1),u=this.coordsAt(i.head,1);if(!l||!u||l.bottom>u.top)return;let p=this.domAtPos(i.head+i.assoc);r.collapse(p.node,p.offset),r.modify("move",i.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=i.from&&r.collapse(n,s)}moveToLine(e){let i=this.dom,r;if(e.node!=i)return e;for(let n=e.offset;!r&&n<i.childNodes.length;n++){let s=$i.get(i.childNodes[n]);s instanceof Hr&&(r=s.domAtPos(0))}for(let n=e.offset-1;!r&&n>=0;n--){let s=$i.get(i.childNodes[n]);s instanceof Hr&&(r=s.domAtPos(s.length))}return r?new ws(r.node,r.offset,!0):e}nearest(e){for(let i=e;i;){let r=$i.get(i);if(r&&r.rootView==this)return r;i=i.parentNode}return null}posFromDOM(e,i){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,i)+r.posAtStart}domAtPos(e){let{i,off:r}=this.childCursor().findPos(e,-1);for(;i<this.children.length-1;){let n=this.children[i];if(r<n.length||n instanceof Hr)break;i++,r=0}return this.children[i].domAtPos(r)}coordsAt(e,i){let r=null,n=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof Hr&&!(r instanceof Hr&&i>=0)))r=a,n=u;else if(r&&u==e&&l==e&&a instanceof fd&&Math.abs(i)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=u}return r?r.coordsAt(e-n,i):null}coordsForChar(e){let{i,off:r}=this.childPos(e,1),n=this.children[i];if(!(n instanceof Hr))return null;for(;n.children.length;){let{i:a,off:l}=n.childPos(r,1);for(;;a++){if(a==n.children.length)return null;if((n=n.children[a]).length)break}r=l}if(!(n instanceof vu))return null;let s=Yn(n.text,r);if(s==r)return null;let o=t0(n.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let i=[],{from:r,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Bi.LTR;for(let u=0,p=0;p<this.children.length;p++){let m=this.children[p],g=u+m.length;if(g>n)break;if(u>=r){let w=m.dom.getBoundingClientRect();if(i.push(w.height),o){let O=m.dom.lastChild,_=O?Gw(O):[];if(_.length){let x=_[_.length-1],T=l?x.right-w.left:w.right-x.left;T>a&&(a=T,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=g)}}}u=g+m.breakAfter}return i}textDirectionAt(e){let{i}=this.childPos(e,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?Bi.RTL:Bi.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Hr){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),i,r,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Gw(e.firstChild)[0];i=e.getBoundingClientRect().height,r=s?s.width/27:7,n=s?s.height:i,e.remove()}),{lineHeight:i,charWidth:r,textHeight:n}}childCursor(e=this.length){let i=this.children.length;return i&&(e-=this.children[--i].length),new L0e(this.children,e,i)}computeBlockGapDeco(){let e=[],i=this.view.viewState;for(let r=0,n=0;;n++){let s=n==i.viewports.length?null:i.viewports[n],o=s?s.from-1:this.length;if(o>r){let a=(i.lineBlockAt(o).bottom-i.lineBlockAt(r).top)/this.view.scaleY;e.push(st.replace({widget:new L6(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return st.set(e)}updateDeco(){let e=1,i=this.view.state.facet(C$).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,n=this.view.state.facet(ove).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(n.length&&(this.dynamicDecorationMap[e++]=r,i.push(Zt.join(n))),this.decorations=[this.editContextFormatting,...i,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(rve))try{if(u(this.view,e.range,e))return!0}catch(p){Eo(this.view.state,p,"scroll handler")}let{range:i}=e,r=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),n;if(!r)return;!i.empty&&(n=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(r={left:Math.min(r.left,n.left),top:Math.min(r.top,n.top),right:Math.max(r.right,n.right),bottom:Math.max(r.bottom,n.bottom)});let s=g7(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;_Ke(this.view.scrollDOM,o,i.head<i.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Bi.LTR)}}function QKe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function uve(t,e){let i=t.observer.selectionRange;if(!i.focusNode)return null;let r=P0e(i.focusNode,i.focusOffset),n=R0e(i.focusNode,i.focusOffset),s=r||n;if(n&&r&&n.node!=r.node){let a=$i.get(n.node);if(!a||a instanceof vu&&a.text!=n.node.nodeValue)s=n;else if(t.docView.lastCompositionAfterCursor){let l=$i.get(r.node);!l||l instanceof vu&&l.text!=r.node.nodeValue||(s=n)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function BKe(t,e,i){let r=uve(t,i);if(!r)return null;let{node:n,from:s,to:o}=r,a=n.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,u=new al(l.mapPos(s),l.mapPos(o),s,o),p=[];for(let m=n.parentNode;;m=m.parentNode){let g=$i.get(m);if(g instanceof Sd)p.push({node:m,deco:g.mark});else{if(g instanceof Hr||m.nodeName=="DIV"&&m.parentNode==t.contentDOM)return{range:u,text:n,marks:p,line:m};if(m!=t.contentDOM)p.push({node:m,deco:new U2({inclusive:!0,attributes:AKe(m),tagName:m.tagName.toLowerCase()})});else return null}}}function qKe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let GKe=class{constructor(){this.changes=[]}compareRange(e,i){MM(e,i,this.changes)}comparePoint(e,i){MM(e,i,this.changes)}boundChange(e){MM(e,e,this.changes)}};function ZKe(t,e,i){let r=new GKe;return Zt.compare(t,e,i,r),r.changes}function HKe(t,e){for(let i=t;i&&i!=e;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function WKe(t,e){let i=!1;return e&&t.iterChangedRanges((r,n)=>{r<e.to&&n>e.from&&(i=!0)}),i}function XKe(t,e,i=1){let r=t.charCategorizer(e),n=t.doc.lineAt(e),s=e-n.from;if(n.length==0)return me.cursor(e);s==0?i=1:s==n.length&&(i=-1);let o=s,a=s;i<0?o=Yn(n.text,s,!1):a=Yn(n.text,s);let l=r(n.text.slice(o,a));for(;o>0;){let u=Yn(n.text,o,!1);if(r(n.text.slice(u,o))!=l)break;o=u}for(;a<n.length;){let u=Yn(n.text,a);if(r(n.text.slice(a,u))!=l)break;a=u}return me.range(o+n.from,a+n.from)}function YKe(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function JKe(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function _D(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function cie(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function hie(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function j6(t,e,i){let r,n,s,o,a=!1,l,u,p,m;for(let O=t.firstChild;O;O=O.nextSibling){let _=Gw(O);for(let x=0;x<_.length;x++){let T=_[x];n&&_D(n,T)&&(T=cie(hie(T,n.bottom),n.top));let E=YKe(e,T),k=JKe(i,T);if(E==0&&k==0)return O.nodeType==3?die(O,e,i):j6(O,e,i);if(!r||o>k||o==k&&s>E){r=O,n=T,s=E,o=k;let M=k?i<T.top?-1:1:E?e<T.left?-1:1:0;a=!M||(M>0?x<_.length-1:x>0)}E==0?i>T.bottom&&(!p||p.bottom<T.bottom)?(l=O,p=T):i<T.top&&(!m||m.top>T.top)&&(u=O,m=T):p&&_D(p,T)?p=hie(p,T.bottom):m&&_D(m,T)&&(m=cie(m,T.top))}}if(p&&p.bottom>=i?(r=l,n=p):m&&m.top<=i&&(r=u,n=m),!r)return{node:t,offset:0};let g=Math.max(n.left,Math.min(n.right,e));if(r.nodeType==3)return die(r,g,i);if(a&&r.contentEditable!="false")return j6(r,g,i);let w=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(n.left+n.right)/2?1:0);return{node:t,offset:w}}function die(t,e,i){let r=t.nodeValue.length,n=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=t0(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let p=l[u];if(p.top==p.bottom)continue;o||(o=e-p.left);let m=(p.top>i?p.top-i:i-p.bottom)-1;if(p.left-1<=e&&p.right+1>=e&&m<s){let g=e>=(p.left+p.right)/2,w=g;if((Fe.chrome||Fe.gecko)&&t0(t,a).getBoundingClientRect().left==p.right&&(w=!g),m<=0)return{node:t,offset:a+(w?1:0)};n=a+(w?1:0),s=m}}}return{node:t,offset:n>-1?n:o>0?t.nodeValue.length:0}}function cve(t,e,i,r=-1){var n,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:p,y:m}=e,g=m-a;if(g<0)return 0;if(g>u)return t.state.doc.length;for(let M=t.viewState.heightOracle.textHeight/2,R=!1;l=t.elementAtHeight(g),l.type!=Js.Text;)for(;g=r>0?l.bottom+M:l.top-M,!(g>=0&&g<=u);){if(R)return i?null:0;R=!0,r=-r}m=a+g;let w=l.from;if(w<t.viewport.from)return t.viewport.from==0?0:i?null:pie(t,o,l,p,m);if(w>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:i?null:pie(t,o,l,p,m);let O=t.dom.ownerDocument,_=t.root.elementFromPoint?t.root:O,x=_.elementFromPoint(p,m);x&&!t.contentDOM.contains(x)&&(x=null),x||(p=Math.max(o.left+1,Math.min(o.right-1,p)),x=_.elementFromPoint(p,m),x&&!t.contentDOM.contains(x)&&(x=null));let T,E=-1;if(x&&((n=t.docView.nearest(x))===null||n===void 0?void 0:n.isEditable)!=!1){if(O.caretPositionFromPoint){let M=O.caretPositionFromPoint(p,m);M&&({offsetNode:T,offset:E}=M)}else if(O.caretRangeFromPoint){let M=O.caretRangeFromPoint(p,m);M&&({startContainer:T,startOffset:E}=M,(!t.contentDOM.contains(T)||Fe.safari&&KKe(T,E,p)||Fe.chrome&&eet(T,E,p))&&(T=void 0))}T&&(E=Math.min(Ic(T),E))}if(!T||!t.docView.dom.contains(T)){let M=Hr.find(t.docView,w);if(!M)return g>l.top+l.height/2?l.to:l.from;({node:T,offset:E}=j6(M.dom,p,m))}let k=t.docView.nearest(T);if(!k)return null;if(k.isWidget&&((s=k.dom)===null||s===void 0?void 0:s.nodeType)==1){let M=k.dom.getBoundingClientRect();return e.y<M.top||e.y<=M.bottom&&e.x<=(M.left+M.right)/2?k.posAtStart:k.posAtEnd}else return k.localPosFromDOM(T,E)+k.posAtStart}function pie(t,e,i,r,n){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&i.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((n-i.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(i.from,i.to);return i.from+T6(o,s,t.state.tabSize)}function KKe(t,e,i){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let n=t.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return t0(t,r-1,r).getBoundingClientRect().left>i}function eet(t,e,i){if(e!=0)return!1;for(let n=t;;){let s=n.parentNode;if(!s||s.nodeType!=1||s.firstChild!=n)return!1;if(s.classList.contains("cm-line"))break;n=s}let r=t.nodeType==1?t.getBoundingClientRect():t0(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return i-r.left>5}function z6(t,e){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){for(let r of i.type)if(r.to>e||r.to==e&&(r.to==i.to||r.type==Js.Text))return r}return i}function tet(t,e,i,r){let n=z6(t,e.head),s=!r||n.type!=Js.Text||!(t.lineWrapping||n.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(n.from),l=t.posAtCoords({x:i==(a==Bi.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return me.cursor(l,i?-1:1)}return me.cursor(i?n.to:n.from,i?-1:1)}function fie(t,e,i,r){let n=t.state.doc.lineAt(e.head),s=t.bidiSpans(n),o=t.textDirectionAt(n.from);for(let a=e,l=null;;){let u=jKe(n,s,o,a,i),p=H0e;if(!u){if(n.number==(i?t.state.doc.lines:1))return a;p=`
`,n=t.state.doc.line(n.number+(i?1:-1)),s=t.bidiSpans(n),u=t.visualLineSide(n,!i)}if(l){if(!l(p))return a}else{if(!r)return u;l=r(p)}a=u}}function iet(t,e,i){let r=t.state.charCategorizer(e),n=r(i);return s=>{let o=r(s);return n==ir.Space&&(n=o),n==o}}function ret(t,e,i,r){let n=e.head,s=i?1:-1;if(n==(i?t.state.doc.length:0))return me.cursor(n,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(n,e.assoc||-1),p=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let w=t.viewState.lineBlockAt(n);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(n-w.from))),a=(s<0?w.top:w.bottom)+p}let m=l.left+o,g=r??t.viewState.heightOracle.textHeight>>1;for(let w=0;;w+=10){let O=a+(g+w)*s,_=cve(t,{x:m,y:O},!1,s);if(O<l.top||O>l.bottom||(s<0?_<n:_>n)){let x=t.docView.coordsForChar(_),T=!x||O<x.top?-1:1;return me.cursor(_,T,void 0,o)}}}function AM(t,e,i){for(;;){let r=0;for(let n of t)n.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||i||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function xD(t,e,i){let r=AM(t.state.facet(y7).map(n=>n(t)),i.from,e.head>i.from?-1:1);return r==i.from?i:me.cursor(r,r<i.from?1:-1)}const H_="";class net{constructor(e,i){this.points=e,this.text="",this.lineSeparator=i.facet(zt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=H_}readRange(e,i){if(!e)return this;let r=e.parentNode;for(let n=e;;){this.findPointBefore(r,n);let s=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==i)break;let a=$i.get(n),l=$i.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:EI(n))||EI(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>s)&&this.lineBreak(),n=o}return this.findPointBefore(r,i),this}readTextNode(e){let i=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,i.length));for(let r=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=i.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=n.exec(i))&&(s=a.index,o=a[0].length),this.append(i.slice(r,s<0?i.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let i=$i.get(e),r=i&&i.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let n=r.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,i){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==i&&(r.pos=this.text.length)}findPointInside(e,i){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(set(e,r.node,r.offset)?i:0))}}function set(t,e,i){for(;;){if(!e||i<Ic(e))return!1;if(e==t)return!0;i=e0(e)+1,e=e.parentNode}}class mie{constructor(e,i){this.node=e,this.offset=i,this.pos=-1}}class oet{constructor(e,i,r,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=i>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=e.docView.domBoundsAround(i,r,0))){let a=s||o?[]:cet(e),l=new net(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=het(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!C6(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!C6(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),p=e.viewport;if((Fe.ios||Fe.chrome)&&e.state.selection.main.empty&&l!=u&&(p.from>0||p.to<e.state.doc.length)){let m=Math.min(l,u),g=Math.max(l,u),w=p.from-m,O=p.to-g;(w==0||w==1||m==0)&&(O==0||O==-1||g==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=me.single(u,l)}}}function hve(t,e){let i,{newSel:r}=e,n=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=n.from,u=null;(s===8||Fe.android&&e.text.length<a-o)&&(l=n.to,u="end");let p=uet(t.state.doc.sliceString(o,a,H_),e.text,l-o,u);p&&(Fe.chrome&&s==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==H_+H_&&p.toB--,i={from:o+p.from,to:o+p.toA,insert:Qt.of(e.text.slice(p.from,p.toB).split(H_))})}else r&&(!t.hasFocus&&t.state.facet(sd)||r.main.eq(n))&&(r=null);if(!i&&!r)return!1;if(!i&&e.typeOver&&!n.empty&&r&&r.main.empty?i={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,n.to)}:(Fe.mac||Fe.android)&&i&&i.from==i.to&&i.from==n.head-1&&/^\. ?$/.test(i.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&i.insert.length==2&&(r=me.single(r.main.anchor-1,r.main.head-1)),i={from:i.from,to:i.to,insert:Qt.of([i.insert.toString().replace("."," ")])}):i&&i.from>=n.from&&i.to<=n.to&&(i.from!=n.from||i.to!=n.to)&&n.to-n.from-(i.to-i.from)<=4?i={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,i.from).append(i.insert).append(t.state.doc.slice(i.to,n.to))}:Fe.chrome&&i&&i.from==i.to&&i.from==n.head&&i.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=me.single(r.main.anchor-1,r.main.head-1)),i={from:n.from,to:n.to,insert:Qt.of([" "])}),i)return v7(t,i,r,s);if(r&&!r.main.eq(n)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function v7(t,e,i,r=-1){if(Fe.ios&&t.inputState.flushIOSKey(e))return!0;let n=t.state.selection.main;if(Fe.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&t.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&bw(t.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&bw(t.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&bw(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=aet(t,e,i));return t.state.facet(K0e).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function aet(t,e,i){let r,n=t.state,s=n.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!i||i.main.empty&&i.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?n.sliceDoc(s.from,e.from):"",l=s.to>e.to?n.sliceDoc(e.to,s.to):"";r=n.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=n.changes(e),l=i&&i.main.to<=a.newLength?i.main:void 0;if(n.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=t.state.sliceDoc(e.from,e.to),p,m=i&&uve(t,i.main.head);if(m){let O=e.insert.length-(e.to-e.from);p={from:m.from,to:m.to-O}}else p=t.state.doc.lineAt(s.head);let g=s.to-e.to,w=s.to-s.from;r=n.changeByRange(O=>{if(O.from==s.from&&O.to==s.to)return{changes:a,range:l||O.map(a)};let _=O.to-g,x=_-u.length;if(O.to-O.from!=w||t.state.sliceDoc(x,_)!=u||O.to>=p.from&&O.from<=p.to)return{range:O};let T=n.changes({from:x,to:_,insert:e.insert}),E=O.to-s.to;return{changes:T,range:l?me.range(Math.max(0,l.anchor+E),Math.max(0,l.head+E)):O.map(T)}})}else r={changes:a,selection:l&&n.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),n.update(r,{userEvent:o,scrollIntoView:!0})}function uet(t,e,i,r){let n=Math.min(t.length,e.length),s=0;for(;s<n&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));i-=o+l-s}if(o<s&&t.length<e.length){let l=i<=s&&i>=o?s-i:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=i<=s&&i>=a?s-i:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function cet(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:i,anchorOffset:r,focusNode:n,focusOffset:s}=t.observer.selectionRange;return i&&(e.push(new mie(i,r)),(n!=i||s!=r)&&e.push(new mie(n,s))),e}function het(t,e){if(t.length==0)return null;let i=t[0].pos,r=t.length==2?t[1].pos:i;return i>-1&&r>-1?me.single(i+e,r+e):null}class det{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Fe.safari&&e.contentDOM.addEventListener("input",()=>null),Fe.gecko&&Cet(e.contentDOM.ownerDocument)}handleEvent(e){!wet(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,i){let r=this.handlers[e];if(r){for(let n of r.observers)n(this.view,i);for(let n of r.handlers){if(i.defaultPrevented)break;if(n(this.view,i)){i.preventDefault();break}}}}ensureHandlers(e){let i=pet(e),r=this.handlers,n=this.view.contentDOM;for(let s in i)if(s!="scroll"){let o=!i[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(n.removeEventListener(s,this.handleEvent),a=null),a||n.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!i[s]&&n.removeEventListener(s,this.handleEvent);this.handlers=i}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&pve.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Fe.android&&Fe.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let i;return Fe.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((i=dve.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||fet.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=i||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let i=this.pendingIOSKey;return!i||i.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,bw(this.view.contentDOM,i.key,i.keyCode,i instanceof KeyboardEvent?i:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Fe.safari&&!Fe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function yie(t,e){return(i,r)=>{try{return e.call(t,r,i)}catch(n){Eo(i.state,n)}}}function pet(t){let e=Object.create(null);function i(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let n=r.spec;if(n&&n.domEventHandlers)for(let s in n.domEventHandlers){let o=n.domEventHandlers[s];o&&i(s).handlers.push(yie(r.value,o))}if(n&&n.domEventObservers)for(let s in n.domEventObservers){let o=n.domEventObservers[s];o&&i(s).observers.push(yie(r.value,o))}}for(let r in bu)i(r).handlers.push(bu[r]);for(let r in cl)i(r).observers.push(cl[r]);return e}const dve=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],fet="dthko",pve=[16,17,18,20,91,92,224,225],Ek=6;function kk(t){return Math.max(0,t)*.7+8}function met(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class yet{constructor(e,i,r,n){this.view=e,this.startEvent=i,this.style=r,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParents=xKe(e.contentDOM),this.atoms=e.state.facet(y7).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=e.state.facet(zt.allowMultipleSelections)&&get(e,i),this.dragging=bet(e,i)&&yve(i)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&met(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,n=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=g7(this.view);e.clientX-l.left<=n+Ek?i=-kk(n-e.clientX):e.clientX+l.right>=o-Ek&&(i=kk(e.clientX-o)),e.clientY-l.top<=s+Ek?r=-kk(s-e.clientY):e.clientY+l.bottom>=a-Ek&&(r=kk(e.clientY-a)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,i){this.scrollSpeed={x:e,y:i},e||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:i}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),i&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=i,i=0),(e||i)&&this.view.win.scrollBy(e,i),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let i=null;for(let r=0;r<e.ranges.length;r++){let n=e.ranges[r],s=null;if(n.empty){let o=AM(this.atoms,n.from,0);o!=n.from&&(s=me.cursor(o,-1))}else{let o=AM(this.atoms,n.from,-1),a=AM(this.atoms,n.to,1);(o!=n.from||a!=n.to)&&(s=me.range(n.from==n.anchor?o:a,n.from==n.head?o:a))}s&&(i||(i=e.ranges.slice()),i[r]=s)}return i?me.create(i,e.mainIndex):e}select(e){let{view:i}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(i.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(i=>i.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function get(t,e){let i=t.state.facet(W0e);return i.length?i[0](e):Fe.mac?e.metaKey:e.ctrlKey}function vet(t,e){let i=t.state.facet(X0e);return i.length?i[0](e):Fe.mac?!e.altKey:!e.ctrlKey}function bet(t,e){let{main:i}=t.state.selection;if(i.empty)return!1;let r=k$(t.root);if(!r||r.rangeCount==0)return!0;let n=r.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function wet(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target,r;i!=t.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(r=$i.get(i))&&r.ignoreEvent(e))return!1;return!0}const bu=Object.create(null),cl=Object.create(null),fve=Fe.ie&&Fe.ie_version<15||Fe.ios&&Fe.webkit_version<604;function Oet(t){let e=t.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{t.focus(),i.remove(),mve(t,i.value)},50)}function zR(t,e,i){for(let r of t.facet(e))i=r(i,t);return i}function mve(t,e){e=zR(t.state,p7,e);let{state:i}=t,r,n=1,s=i.toText(e),o=s.lines==i.selection.ranges.length;if(U6!=null&&i.selection.ranges.every(l=>l.empty)&&U6==s.toString()){let l=-1;r=i.changeByRange(u=>{let p=i.doc.lineAt(u.from);if(p.from==l)return{range:u};l=p.from;let m=i.toText((o?s.line(n++).text:e)+i.lineBreak);return{changes:{from:p.from,insert:m},range:me.cursor(u.from+m.length)}})}else o?r=i.changeByRange(l=>{let u=s.line(n++);return{changes:{from:l.from,to:l.to,insert:u.text},range:me.cursor(l.from+u.length)}}):r=i.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}cl.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};bu.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);cl.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};cl.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};bu.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let r of t.state.facet(Y0e))if(i=r(t,e),i)break;if(!i&&e.button==0&&(i=$et(t,e)),i){let r=!t.hasFocus;t.inputState.startMouseSelection(new yet(t,e,i,r)),r&&t.observer.ignore(()=>{M0e(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let n=t.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}return!1};function gie(t,e,i,r){if(r==1)return me.cursor(e,i);if(r==2)return XKe(t.state,e,i);{let n=Hr.find(t.docView,e),s=t.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,a=n?n.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,me.range(o,a)}}let vie=(t,e,i)=>e>=i.top&&e<=i.bottom&&t>=i.left&&t<=i.right;function _et(t,e,i,r){let n=Hr.find(t.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let o=n.coordsAt(s,-1);if(o&&vie(i,r,o))return-1;let a=n.coordsAt(s,1);return a&&vie(i,r,a)?1:o&&o.bottom>=r?-1:1}function bie(t,e){let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:i,bias:_et(t,i,e.clientX,e.clientY)}}const xet=Fe.ie&&Fe.ie_version<=11;let wie=null,Oie=0,Sie=0;function yve(t){if(!xet)return t.detail;let e=wie,i=Sie;return wie=t,Sie=Date.now(),Oie=!e||i>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Oie+1)%3:1}function $et(t,e){let i=bie(t,e),r=yve(e),n=t.state.selection;return{update(s){s.docChanged&&(i.pos=s.changes.mapPos(i.pos),n=n.map(s.changes))},get(s,o,a){let l=bie(t,s),u,p=gie(t,l.pos,l.bias,r);if(i.pos!=l.pos&&!o){let m=gie(t,i.pos,i.bias,r),g=Math.min(m.from,p.from),w=Math.max(m.to,p.to);p=g<p.from?me.range(g,w):me.range(w,g)}return o?n.replaceRange(n.main.extend(p.from,p.to)):a&&r==1&&n.ranges.length>1&&(u=Tet(n,l.pos))?u:a?n.addRange(p):me.create([p])}}}function Tet(t,e){for(let i=0;i<t.ranges.length;i++){let{from:r,to:n}=t.ranges[i];if(r<=e&&n>=e)return me.create(t.ranges.slice(0,i).concat(t.ranges.slice(i+1)),t.mainIndex==i?0:t.mainIndex-(t.mainIndex>i?1:0))}return null}bu.dragstart=(t,e)=>{let{selection:{main:i}}=t.state;if(e.target.draggable){let n=t.docView.nearest(e.target);if(n&&n.isWidget){let s=n.posAtStart,o=s+n.length;(s>=i.to||o<=i.from)&&(i=me.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=i,e.dataTransfer&&(e.dataTransfer.setData("Text",zR(t.state,f7,t.state.sliceDoc(i.from,i.to))),e.dataTransfer.effectAllowed="copyMove"),!1};bu.dragend=t=>(t.inputState.draggedContent=null,!1);function _ie(t,e,i,r){if(i=zR(t.state,p7,i),!i)return;let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&vet(t,e)?{from:s.from,to:s.to}:null,a={from:n,insert:i},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(n,-1),head:l.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}bu.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let i=e.dataTransfer.files;if(i&&i.length){let r=Array(i.length),n=0,s=()=>{++n==i.length&&_ie(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<i.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(i[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return _ie(t,e,r,!0),!0}return!1};bu.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let i=fve?null:e.clipboardData;return i?(mve(t,i.getData("text/plain")||i.getData("text/uri-list")),!0):(Oet(t),!1)};function Eet(t,e){let i=t.dom.parentNode;if(!i)return;let r=i.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function ket(t){let e=[],i=[],r=!1;for(let n of t.selection.ranges)n.empty||(e.push(t.sliceDoc(n.from,n.to)),i.push(n));if(!e.length){let n=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>n&&(e.push(o.text),i.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),n=o.number}r=!0}return{text:zR(t,f7,e.join(t.lineBreak)),ranges:i,linewise:r}}let U6=null;bu.copy=bu.cut=(t,e)=>{let{text:i,ranges:r,linewise:n}=ket(t.state);if(!i&&!n)return!1;U6=n?i:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=fve?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",i),!0):(Eet(t,i),!1)};const gve=Vc.define();function vve(t,e){let i=[];for(let r of t.facet(eve)){let n=r(t,e);n&&i.push(n)}return i?t.update({effects:i,annotations:gve.of(!0)}):null}function bve(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let i=vve(t.state,e);i?t.dispatch(i):t.update([])}},10)}cl.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),bve(t)};cl.blur=t=>{t.observer.clearSelectionRange(),bve(t)};cl.compositionstart=cl.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};cl.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Fe.chrome&&Fe.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};cl.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};bu.beforeinput=(t,e)=>{var i,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(i=e.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),u=t.posAtDOM(a.endContainer,a.endOffset);return v7(t,{from:l,to:u,insert:t.state.toText(s)},null),!0}}let n;if(Fe.chrome&&Fe.android&&(n=dve.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Fe.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Fe.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>cl.compositionend(t,e),20),!1};const xie=new Set;function Cet(t){xie.has(t)||(xie.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const $ie=["pre-wrap","normal","pre-line","break-spaces"];let Ww=!1;function Tie(){Ww=!1}class Met{constructor(e){this.lineWrapping=e,this.doc=Qt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,i){let r=this.doc.lineAt(i).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((i-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $ie.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let i=!1;for(let r=0;r<e.length;r++){let n=e[r];n<0?r++:this.heightSamples[Math.floor(n*10)]||(i=!0,this.heightSamples[Math.floor(n*10)]=!0)}return i}refresh(e,i,r,n,s,o){let a=$ie.indexOf(e)>-1,l=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=i,this.charWidth=r,this.textHeight=n,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let p=o[u];p<0?u++:this.heightSamples[Math.floor(p*10)]=!0}}return l}}class Aet{constructor(e,i){this.from=e,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class pc{constructor(e,i,r,n,s){this.from=e,this.length=i,this.top=r,this.height=n,this._content=s}get type(){return typeof this._content=="number"?Js.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Yf?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new pc(this.from,this.length+e.length,this.top,this.height+e.height,i)}}var Ui=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Ui||(Ui={}));const IM=.001;class Ks{constructor(e,i,r=2){this.length=e,this.height=i,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>IM&&(Ww=!0),this.height=e)}replace(e,i,r){return Ks.of(r)}decomposeLeft(e,i){i.push(this)}decomposeRight(e,i){i.push(this)}applyChanges(e,i,r,n){let s=this,o=r.doc;for(let a=n.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:p,toB:m}=n[a],g=s.lineAt(l,Ui.ByPosNoHeight,r.setDoc(i),0,0),w=g.to>=u?g:s.lineAt(u,Ui.ByPosNoHeight,r,0,0);for(m+=w.to-u,u=w.to;a>0&&g.from<=n[a-1].toA;)l=n[a-1].fromA,p=n[a-1].fromB,a--,l<g.from&&(g=s.lineAt(l,Ui.ByPosNoHeight,r,0,0));p+=g.from-l,l=g.from;let O=b7.build(r.setDoc(o),e,p,m);s=MI(s,s.replace(l,u,O))}return s.updateHeight(r,0)}static empty(){return new ra(0,0)}static of(e){if(e.length==1)return e[0];let i=0,r=e.length,n=0,s=0;for(;;)if(i==r)if(n>s*2){let a=e[i-1];a.break?e.splice(--i,1,a.left,null,a.right):e.splice(--i,1,a.left,a.right),r+=1+a.break,n-=a.size}else if(s>n*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(n<s){let a=e[i++];a&&(n+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[i-1]==null?(o=1,i--):e[i]==null&&(o=1,r++),new Iet(Ks.of(e.slice(0,i)),o,Ks.of(e.slice(r)))}}function MI(t,e){return t==e?t:(t.constructor!=e.constructor&&(Ww=!0),e)}Ks.prototype.size=1;class wve extends Ks{constructor(e,i,r){super(e,i),this.deco=r}blockAt(e,i,r,n){return new pc(n,this.length,r,this.height,this.deco||0)}lineAt(e,i,r,n,s){return this.blockAt(0,r,n,s)}forEachLine(e,i,r,n,s,o){e<=s+this.length&&i>=s&&o(this.blockAt(0,r,n,s))}updateHeight(e,i=0,r=!1,n){return n&&n.from<=i&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ra extends wve{constructor(e,i){super(e,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,i,r,n){return new pc(n,this.length,r,this.height,this.breaks)}replace(e,i,r){let n=r[0];return r.length==1&&(n instanceof ra||n instanceof Zn&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Zn?n=new ra(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Ks.of(r)}updateHeight(e,i=0,r=!1,n){return n&&n.from<=i&&n.more?this.setHeight(n.heights[n.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Zn extends Ks{constructor(e){super(e,0)}heightMetrics(e,i){let r=e.doc.lineAt(i).number,n=e.doc.lineAt(i+this.length).number,s=n-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:n,perLine:o,perChar:a}}blockAt(e,i,r,n){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(i,n);if(i.lineWrapping){let u=n+(e<i.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),p=i.doc.lineAt(u),m=a+p.length*l,g=Math.max(r,e-m/2);return new pc(p.from,p.length,g,m,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:p,length:m}=i.doc.line(s+u);return new pc(p,m,r+a*u,a,0)}}lineAt(e,i,r,n,s){if(i==Ui.ByHeight)return this.blockAt(e,r,n,s);if(i==Ui.ByPosNoHeight){let{from:w,to:O}=r.doc.lineAt(e);return new pc(w,O-w,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),p=a+u.length*l,m=u.number-o,g=n+a*m+l*(u.from-s-m);return new pc(u.from,u.length,Math.max(n,Math.min(g,n+this.height-p)),p,0)}forEachLine(e,i,r,n,s,o){e=Math.max(e,s),i=Math.min(i,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let p=e,m=n;p<=i;){let g=r.doc.lineAt(p);if(p==e){let O=g.number-a;m+=l*O+u*(e-s-O)}let w=l+u*g.length;o(new pc(g.from,g.length,m,w,0)),m+=w,p=g.to+1}}replace(e,i,r){let n=this.length-i;if(n>0){let s=r[r.length-1];s instanceof Zn?r[r.length-1]=new Zn(s.length+n):r.push(null,new Zn(n-1))}if(e>0){let s=r[0];s instanceof Zn?r[0]=new Zn(e+s.length):r.unshift(new Zn(e-1),null)}return Ks.of(r)}decomposeLeft(e,i){i.push(new Zn(e-1),null)}decomposeRight(e,i){i.push(null,new Zn(this.length-e-1))}updateHeight(e,i=0,r=!1,n){let s=i+this.length;if(n&&n.from<=i+this.length&&n.more){let o=[],a=Math.max(i,n.from),l=-1;for(n.from>i&&o.push(new Zn(n.from-i-1).updateHeight(e,i));a<=s&&n.more;){let p=e.doc.lineAt(a).length;o.length&&o.push(null);let m=n.heights[n.index++];l==-1?l=m:Math.abs(m-l)>=IM&&(l=-2);let g=new ra(p,m);g.outdated=!1,o.push(g),a+=p+1}a<=s&&o.push(null,new Zn(s-a).updateHeight(e,a));let u=Ks.of(o);return(l<0||Math.abs(u.height-this.height)>=IM||Math.abs(l-this.heightMetrics(e,i).perLine)>=IM)&&(Ww=!0),MI(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Iet extends Ks{constructor(e,i,r){super(e.length+i+r.length,e.height+r.height,i|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,i,r,n){let s=r+this.left.height;return e<s?this.left.blockAt(e,i,r,n):this.right.blockAt(e,i,s,n+this.left.length+this.break)}lineAt(e,i,r,n,s){let o=n+this.left.height,a=s+this.left.length+this.break,l=i==Ui.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,i,r,n,s):this.right.lineAt(e,i,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let p=i==Ui.ByPosNoHeight?Ui.ByPosNoHeight:Ui.ByPos;return l?u.join(this.right.lineAt(a,p,r,o,a)):this.left.lineAt(a,p,r,n,s).join(u)}forEachLine(e,i,r,n,s,o){let a=n+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,i,r,n,s,o),i>=l&&this.right.forEachLine(e,i,r,a,l,o);else{let u=this.lineAt(l,Ui.ByPos,r,n,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,n,s,o),u.to>=e&&u.from<=i&&o(u),i>u.to&&this.right.forEachLine(u.to+1,i,r,a,l,o)}}replace(e,i,r){let n=this.left.length+this.break;if(i<n)return this.balanced(this.left.replace(e,i,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,i-n,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&Eie(s,o-1),i<this.length){let a=s.length;this.decomposeRight(i,s),Eie(s,a)}return Ks.of(s)}decomposeLeft(e,i){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,i);i.push(this.left),this.break&&(r++,e>=r&&i.push(null)),e>r&&this.right.decomposeLeft(e-r,i)}decomposeRight(e,i){let r=this.left.length,n=r+this.break;if(e>=n)return this.right.decomposeRight(e-n,i);e<r&&this.left.decomposeRight(e,i),this.break&&e<n&&i.push(null),i.push(this.right)}balanced(e,i){return e.size>2*i.size||i.size>2*e.size?Ks.of(this.break?[e,null,i]:[e,i]):(this.left=MI(this.left,e),this.right=MI(this.right,i),this.setHeight(e.height+i.height),this.outdated=e.outdated||i.outdated,this.size=e.size+i.size,this.length=e.length+this.break+i.length,this)}updateHeight(e,i=0,r=!1,n){let{left:s,right:o}=this,a=i+s.length+this.break,l=null;return n&&n.from<=i+s.length&&n.more?l=s=s.updateHeight(e,i,r,n):s.updateHeight(e,i,r),n&&n.from<=a+o.length&&n.more?l=o=o.updateHeight(e,a,r,n):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Eie(t,e){let i,r;t[e]==null&&(i=t[e-1])instanceof Zn&&(r=t[e+1])instanceof Zn&&t.splice(e-1,3,new Zn(i.length+1+r.length))}const Pet=5;class b7{constructor(e,i){this.pos=e,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,i){if(this.lineStart>-1){let r=Math.min(i,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof ra?n.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new ra(r-this.pos,-1)),this.writtenTo=r,i>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(e,i,r){if(e<i||r.heightRelevant){let n=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=i-e;r.block?this.addBlock(new wve(o,n,r)):(o||s||n>=Pet)&&this.addLineDeco(n,s,o)}else i>e&&this.span(e,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=i,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ra(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,i){let r=new Zn(i-e);return this.oracle.doc.lineAt(e).to==i&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ra)return e;let i=new ra(0,-1);return this.nodes.push(i),i}addBlock(e){this.enterLine();let i=e.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i&&i.endSide>0&&(this.covering=e)}addLineDeco(e,i,r){let n=this.ensureLine();n.length+=r,n.collapsed+=r,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=i,this.writtenTo=this.pos=this.pos+r}finish(e){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof ra)&&!this.isCovered?this.nodes.push(new ra(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let n of this.nodes)n instanceof ra&&n.updateHeight(this.oracle,r),r+=n?n.length:1;return this.nodes}static build(e,i,r,n){let s=new b7(r,e);return Zt.spans(i,r,n,s,0),s.finish(r)}}function Ret(t,e,i){let r=new Let;return Zt.compare(t,e,i,r,0),r.changes}class Let{constructor(){this.changes=[]}compareRange(){}comparePoint(e,i,r,n){(e<i||r&&r.heightRelevant||n&&n.heightRelevant)&&MM(e,i,this.changes,5)}}function Net(t,e){let i=t.getBoundingClientRect(),r=t.ownerDocument,n=r.defaultView||window,s=Math.max(0,i.left),o=Math.min(n.innerWidth,i.right),a=Math.max(0,i.top),l=Math.min(n.innerHeight,i.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let p=u,m=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&m.overflow!="visible"){let g=p.getBoundingClientRect();s=Math.max(s,g.left),o=Math.min(o,g.right),a=Math.max(a,g.top),l=Math.min(u==t.parentNode?n.innerHeight:l,g.bottom)}u=m.position=="absolute"||m.position=="fixed"?p.offsetParent:p.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-i.left,right:Math.max(s,o)-i.left,top:a-(i.top+e),bottom:Math.max(a,l)-(i.top+e)}}function Det(t){let e=t.getBoundingClientRect(),i=t.ownerDocument.defaultView||window;return e.left<i.innerWidth&&e.right>0&&e.top<i.innerHeight&&e.bottom>0}function Vet(t,e){let i=t.getBoundingClientRect();return{left:0,right:i.right-i.left,top:e,bottom:i.bottom-(i.top+e)}}class $D{constructor(e,i,r,n){this.from=e,this.to=i,this.size=r,this.displaySize=n}static same(e,i){if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],s=i[r];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e,i){return st.replace({widget:new Fet(this.displaySize*(i?e.scaleY:e.scaleX),i)}).range(this.from,this.to)}}class Fet extends jc{constructor(e,i){super(),this.size=e,this.vertical=i}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class kie{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Cie,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Bi.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=e.facet(m7).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Met(i),this.stateDeco=e.facet(C$).filter(r=>typeof r!="function"),this.heightMap=Ks.empty().applyChanges(this.stateDeco,Qt.empty,this.heightOracle.setDoc(e.doc),[new al(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=st.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:i}=this.state.selection;for(let r=0;r<=1;r++){let n=r?i.head:i.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new Ck(s,o))}}return this.viewports=e.sort((r,n)=>r.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Cie:new w7(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(W_(e,this.scaler))})}update(e,i=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(C$).filter(p=>typeof p!="function");let n=e.changedRanges,s=al.extendWithRanges(n,Ret(r,this.stateDeco,e?e.changes:dn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Tie(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Ww)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(i&&(i.range.head<l.from||i.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,i));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(ive)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let i=e.contentDOM,r=window.getComputedStyle(i),n=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Bi.RTL:Bi.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=i.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,p=0;if(a.width&&a.height){let{scaleX:M,scaleY:R}=C0e(i,a);(M>.005&&Math.abs(this.scaleX-M)>.005||R>.005&&Math.abs(this.scaleY-R)>.005)&&(this.scaleX=M,this.scaleY=R,u|=16,o=l=!0)}let m=(parseInt(r.paddingTop)||0)*this.scaleY,g=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=g)&&(this.paddingTop=m,this.paddingBottom=g,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let w=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=w&&(this.scrollAnchorHeight=-1,this.scrollTop=w),this.scrolledToBottom=I0e(e.scrollDOM);let O=(this.printing?Vet:Net)(i,this.paddingTop),_=O.top-this.pixelViewport.top,x=O.bottom-this.pixelViewport.bottom;this.pixelViewport=O;let T=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(T!=this.inView&&(this.inView=T,T&&(l=!0)),!this.inView&&!this.scrollTarget&&!Det(e.dom))return 0;let E=a.width;if((this.contentDOMWidth!=E||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),l){let M=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(M)&&(o=!0),o||n.lineWrapping&&Math.abs(E-this.contentDOMWidth)>n.charWidth){let{lineHeight:R,charWidth:D,textHeight:L}=e.docView.measureTextSize();o=R>0&&n.refresh(s,R,D,L,E/D,M),o&&(e.docView.minWidth=0,u|=16)}_>0&&x>0?p=Math.max(_,x):_<0&&x<0&&(p=Math.min(_,x)),Tie();for(let R of this.viewports){let D=R.from==this.viewport.from?M:e.docView.measureVisibleLineHeights(R);this.heightMap=(o?Ks.empty().applyChanges(this.stateDeco,Qt.empty,this.heightOracle,[new al(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new Aet(R.from,D))}Ww&&(u|=2)}let k=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return k&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),u|=this.updateForViewport()),(u&2||k)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,i){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Ck(n.lineAt(o-r*1e3,Ui.ByHeight,s,0,0).from,n.lineAt(a+(1-r)*1e3,Ui.ByHeight,s,0,0).to);if(i){let{head:u}=i.range;if(u<l.from||u>l.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=n.lineAt(u,Ui.ByPos,s,0,0),g;i.y=="center"?g=(m.top+m.bottom)/2-p/2:i.y=="start"||i.y=="nearest"&&u<l.from?g=m.top:g=m.bottom-p,l=new Ck(n.lineAt(g-1e3/2,Ui.ByHeight,s,0,0).from,n.lineAt(g+p+1e3/2,Ui.ByHeight,s,0,0).to)}}return l}mapViewport(e,i){let r=i.mapPos(e.from,-1),n=i.mapPos(e.to,1);return new Ck(this.heightMap.lineAt(r,Ui.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,Ui.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:i},r=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,Ui.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(i,Ui.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||n<=o-Math.max(10,Math.min(-r,250)))&&(i==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&n>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,i){if(!e.length||i.empty)return e;let r=[];for(let n of e)i.touchesRange(n.from,n.to)||r.push(new $D(i.mapPos(n.from),i.mapPos(n.to),n.size,n.displaySize));return r}ensureLineGaps(e,i){let r=this.heightOracle.lineWrapping,n=r?1e4:2e3,s=n>>1,o=n<<1;if(this.defaultTextDirection!=Bi.LTR&&!r)return[];let a=[],l=(p,m,g,w)=>{if(m-p<s)return;let O=this.state.selection.main,_=[O.from];O.empty||_.push(O.to);for(let T of _)if(T>p&&T<m){l(p,T-10,g,w),l(T+10,m,g,w);return}let x=zet(e,T=>T.from>=g.from&&T.to<=g.to&&Math.abs(T.from-p)<s&&Math.abs(T.to-m)<s&&!_.some(E=>T.from<E&&T.to>E));if(!x){if(m<g.to&&i&&r&&i.visibleRanges.some(k=>k.from<=m&&k.to>=m)){let k=i.moveToLineBoundary(me.cursor(m),!1,!0).head;k>p&&(m=k)}let T=this.gapSize(g,p,m,w),E=r||T<2e6?T:2e6;x=new $D(p,m,T,E)}a.push(x)},u=p=>{if(p.length<o||p.type!=Js.Text)return;let m=jet(p.from,p.to,this.stateDeco);if(m.total<o)return;let g=this.scrollTarget?this.scrollTarget.range.head:null,w,O;if(r){let _=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,T;if(g!=null){let E=Ak(m,g),k=((this.visibleBottom-this.visibleTop)/2+_)/p.height;x=E-k,T=E+k}else x=(this.visibleTop-p.top-_)/p.height,T=(this.visibleBottom-p.top+_)/p.height;w=Mk(m,x),O=Mk(m,T)}else{let _=m.total*this.heightOracle.charWidth,x=n*this.heightOracle.charWidth,T=0;if(_>2e6)for(let D of e)D.from>=p.from&&D.from<p.to&&D.size!=D.displaySize&&D.from*this.heightOracle.charWidth+T<this.pixelViewport.left&&(T=D.size-D.displaySize);let E=this.pixelViewport.left+T,k=this.pixelViewport.right+T,M,R;if(g!=null){let D=Ak(m,g),L=((k-E)/2+x)/_;M=D-L,R=D+L}else M=(E-x)/_,R=(k+x)/_;w=Mk(m,M),O=Mk(m,R)}w>p.from&&l(p.from,w,p,m),O<p.to&&l(O,p.to,p,m)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(u):u(p);return a}gapSize(e,i,r,n){let s=Ak(n,r)-Ak(n,i);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){$D.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=st.set(e.map(i=>i.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let i=this.stateDeco;this.lineGaps.length&&(i=i.concat(this.lineGapDeco));let r=[];Zt.spans(i,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let n=0;if(r.length!=this.visibleRanges.length)n=12;else for(let s=0;s<r.length&&!(n&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(n|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(n|=8))}return this.visibleRanges=r,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(i=>i.from<=e&&i.to>=e)||W_(this.heightMap.lineAt(e,Ui.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(i=>i.top<=e&&i.bottom>=e)||W_(this.heightMap.lineAt(this.scaler.fromDOM(e),Ui.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let i=this.lineBlockAtHeight(e+8);return i.from>=this.viewport.from||this.viewportLines[0].top-e>200?i:this.viewportLines[0]}elementAtHeight(e){return W_(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ck{constructor(e,i){this.from=e,this.to=i}}function jet(t,e,i){let r=[],n=t,s=0;return Zt.spans(i,t,e,{span(){},point(o,a){o>n&&(r.push({from:n,to:o}),s+=o-n),n=a}},20),n<e&&(r.push({from:n,to:e}),s+=e-n),{total:s,ranges:r}}function Mk({total:t,ranges:e},i){if(i<=0)return e[0].from;if(i>=1)return e[e.length-1].to;let r=Math.floor(t*i);for(let n=0;;n++){let{from:s,to:o}=e[n],a=o-s;if(r<=a)return s+r;r-=a}}function Ak(t,e){let i=0;for(let{from:r,to:n}of t.ranges){if(e<=n){i+=e-r;break}i+=n-r}return i/t.total}function zet(t,e){for(let i of t)if(e(i))return i}const Cie={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class w7{constructor(e,i,r){let n=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=i.lineAt(a,Ui.ByPos,e,0,0).top,p=i.lineAt(l,Ui.ByPos,e,0,0).bottom;return n+=p-u,{from:a,to:l,top:u,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(i.height-n);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let i=0,r=0,n=0;;i++){let s=i<this.viewports.length?this.viewports[i]:null;if(!s||e<s.top)return n+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,n=s.domBottom}}fromDOM(e){for(let i=0,r=0,n=0;;i++){let s=i<this.viewports.length?this.viewports[i]:null;if(!s||e<s.domTop)return r+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,n=s.domBottom}}eq(e){return e instanceof w7?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((i,r)=>i.from==e.viewports[r].from&&i.to==e.viewports[r].to):!1}}function W_(t,e){if(e.scale==1)return t;let i=e.toDOM(t.top),r=e.toDOM(t.bottom);return new pc(t.from,t.length,i,r-i,Array.isArray(t._content)?t._content.map(n=>W_(n,e)):t._content)}const Ik=ze.define({combine:t=>t.join(" ")}),Q6=ze.define({combine:t=>t.indexOf(!0)>-1}),B6=Wf.newName(),Ove=Wf.newName(),Sve=Wf.newName(),_ve={"&light":"."+Ove,"&dark":"."+Sve};function q6(t,e,i){return new Wf(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,n=>{if(n=="&")return t;if(!i||!i[n])throw new RangeError(`Unsupported selector: ${n}`);return i[n]}):t+" "+r}})}const Uet=q6("."+B6,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},_ve),Qet={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},TD=Fe.ie&&Fe.ie_version<=11;class Bet{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new $Ke,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let r of i)this.queue.push(r);(Fe.ie&&Fe.ie_version<=11||Fe.ios&&e.composing)&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Fe.chrome&&Fe.chrome_version<126)&&(this.editContext=new Get(e),e.state.facet(sd)&&(e.contentDOM.editContext=this.editContext.editContext)),TD&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((i,r)=>i!=e[r]))){this.gapIntersection.disconnect();for(let i of e)this.gapIntersection.observe(i);this.gaps=e}}onSelectionChange(e){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,n=this.selectionRange;if(r.state.facet(sd)?r.root.activeElement!=this.dom:!CM(this.dom,n))return;let s=n.anchorNode&&r.docView.nearest(n.anchorNode);if(s&&s.ignoreEvent(e)){i||(this.selectionChanged=!1);return}(Fe.ie&&Fe.ie_version<=11||Fe.android&&Fe.chrome)&&!r.state.selection.main.empty&&n.focusNode&&Px(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,i=k$(e.root);if(!i)return!1;let r=Fe.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&qet(this.view,i)||i;if(!r||this.selectionRange.eq(r))return!1;let n=CM(this.dom,r);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&EKe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,i){this.selectionRange.set(e.node,e.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,i=null;for(let r=this.dom;r;)if(r.nodeType==1)!i&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:i||(i=this.scrollTargets.slice(0,e)),i&&i.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,e)),i){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=i)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Qet),TD&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),TD&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,i){var r;if(!this.delayedAndroidKey){let n=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&bw(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let i=-1,r=-1,n=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(n=!0),i==-1?{from:i,to:r}=o:(i=Math.min(o.from,i),r=Math.max(o.to,r)))}return{from:i,to:r,typeOver:n}}readChange(){let{from:e,to:i,typeOver:r}=this.processRecords(),n=this.selectionChanged&&CM(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new oet(this.view,e,i,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let i=this.readChange();if(!i)return this.view.requestMeasure(),!1;let r=this.view.state,n=hve(this.view,i);return this.view.state==r&&(i.domChanged||i.newSel&&!i.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let i=this.view.docView.nearest(e.target);if(!i||i.ignoreMutation(e))return null;if(i.markDirty(e.type=="attributes"),e.type=="attributes"&&(i.flags|=4),e.type=="childList"){let r=Mie(i,e.previousSibling||e.target.previousSibling,-1),n=Mie(i,e.nextSibling||e.target.nextSibling,1);return{from:r?i.posAfter(r):i.posAtStart,to:n?i.posBefore(n):i.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(sd)!=e.state.facet(sd)&&(e.view.contentDOM.editContext=e.state.facet(sd)?this.editContext.editContext:null))}destroy(){var e,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Mie(t,e,i){for(;e;){let r=$i.get(e);if(r&&r.parent==t)return r;let n=e.parentNode;e=n!=t.dom?n:i>0?e.nextSibling:e.previousSibling}return null}function Aie(t,e){let i=e.startContainer,r=e.startOffset,n=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Px(o.node,o.offset,n,s)&&([i,r,n,s]=[n,s,i,r]),{anchorNode:i,anchorOffset:r,focusNode:n,focusOffset:s}}function qet(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return Aie(t,n)}let i=null;function r(n){n.preventDefault(),n.stopImmediatePropagation(),i=n.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),i?Aie(t,i):null}class Get{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let i=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let n=e.state.selection.main,{anchor:s,head:o}=n,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let u={from:a,to:l,insert:Qt.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let p=me.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));p.main.eq(n)||e.dispatch({selection:p,userEvent:"select"});return}if((Fe.mac||Fe.android)&&u.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:a,to:l,insert:Qt.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let p=this.to-this.from+(u.to-u.from+u.insert.length);v7(e,u,me.single(this.toEditorPos(r.selectionStart,p),this.toEditorPos(r.selectionEnd,p)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let n=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,n.push(s)}i.updateCharacterBounds(r.rangeStart,n)},this.handlers.textformatupdate=r=>{let n=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(l<u){let p=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;n.push(st.mark({attributes:{style:p}}).range(l,u))}}}e.dispatch({effects:nve.of(st.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)i.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let n=k$(r.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let i=0,r=!1,n=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(r)return;let p=u.length-(o-s);if(n&&o>=n.to)if(n.from==s&&n.to==o&&n.insert.eq(u)){n=this.pendingContextChange=null,i+=p,this.to+=p;return}else n=null,this.revertPending(e.state);if(s+=i,o+=i,o<=this.from)this.from+=p,this.to+=p;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=p}i+=p}),n&&!r&&this.revertPending(e.state),!r}update(e){let i=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||i)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:i}=e.selection.main;this.from=Math.max(0,i-1e4),this.to=Math.min(e.doc.length,i+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let i=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(i.from),this.toContextPos(i.from+i.insert.length),e.doc.sliceString(i.from,i.to))}setSelection(e){let{main:i}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,i.anchor))),n=this.toContextPos(i.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(r,n)}rangeIsValid(e){let{head:i}=e.selection.main;return!(this.from>0&&i-this.from<500||this.to<e.doc.length&&this.to-i<500||this.to-this.from>1e4*3)}toEditorPos(e,i=this.to-this.from){e=Math.min(e,i);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let i=this.composing;return i&&i.drifted?i.contextBase+(e-i.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var i;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(n=>n.forEach(s=>r(s,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||TKe(e.parent)||document,this.viewState=new kie(e.state||zt.create(e)),e.scrollTo&&e.scrollTo.is(Tk)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(G_).map(n=>new SD(n));for(let n of this.plugins)n.update(this);this.observer=new Bet(this),this.inputState=new det(this),this.inputState.ensureHandlers(this.plugins),this.docView=new uie(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((i=document.fonts)===null||i===void 0)&&i.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let i=e.length==1&&e[0]instanceof Yr?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(i,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,r=!1,n,s=this.state;for(let g of e){if(g.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=g.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(g=>g.annotation(gve))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=vve(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,p=null;if(u?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(p=null)):this.observer.clear(),s.facet(zt.phrases)!=this.state.facet(zt.phrases))return this.setState(s);n=CI.create(this,s,e),n.flags|=a;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let g of e){if(m&&(m=m.map(g.changes)),g.scrollIntoView){let{main:w}=g.state.selection;m=new ww(w.empty?w:me.cursor(w.head,w.head>w.anchor?-1:1))}for(let w of g.effects)w.is(Tk)&&(m=w.value.clip(this.state))}this.viewState.update(n,m),this.bidiCache=AI.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),i=this.docView.update(n),this.state.facet(Z_)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(g=>g.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(Ik)!=n.state.facet(Ik)&&(this.viewState.mustMeasureContent=!0),(i||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!n.empty)for(let g of this.state.facet(F6))try{g(n)}catch(w){Eo(this.state,w,"update listener")}(l||p)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),p&&!hve(this,p)&&u.force&&bw(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let i=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new kie(e),this.plugins=e.facet(G_).map(r=>new SD(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new uie(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(e){let i=e.startState.facet(G_),r=e.state.facet(G_);if(i!=r){let n=[];for(let s of r){let o=i.indexOf(s);if(o<0)n.push(new SD(s));else{let a=this.plugins[o];a.mustUpdate=e,n.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);i!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let i=e.value;if(i&&i.docViewUpdate)try{i.docViewUpdate(this)}catch(r){Eo(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let i=null,r=this.scrollDOM,n=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(I0e(r))s=-1,o=this.viewState.heightMap.height;else{let w=this.viewState.scrollAnchorAt(n);s=w.from,o=w.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let p=u.map(w=>{try{return w.read(this)}catch(O){return Eo(this.state,O),Iie}}),m=CI.create(this,this.state,[]),g=!1;m.flags|=l,i?i.flags|=l:i=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),g=this.docView.update(m),g&&this.docViewUpdate());for(let w=0;w<u.length;w++)if(p[w]!=Iie)try{let O=u[w];O.write&&O.write(p[w],this)}catch(O){Eo(this.state,O)}if(g&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let O=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(O>1||O<-1){n=n+O,r.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let a of this.state.facet(F6))a(i)}get themeClasses(){return B6+" "+(this.state.facet(Q6)?Sve:Ove)+" "+this.state.facet(Ik)}updateAttrs(){let e=Pie(this,sve,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(sd)?"true":"false",class:"cm-content",style:`${Fe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),Pie(this,m7,i);let r=this.observer.ignore(()=>{let n=R6(this.contentDOM,this.contentAttrs,i),s=R6(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=i,r}showAnnouncements(e){let i=!0;for(let r of e)for(let n of r.effects)if(n.is(Pe.announce)){i&&(this.announceDOM.textContent=""),i=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Z_);let e=this.state.facet(Pe.cspNonce);Wf.mount(this.root,this.styleModules.concat(Uet).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===e.key){this.measureRequests[i]=e;return}}this.measureRequests.push(e)}}plugin(e){let i=this.pluginMap.get(e);return(i===void 0||i&&i.spec!=e)&&this.pluginMap.set(e,i=this.plugins.find(r=>r.spec==e)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,i,r){return xD(this,e,fie(this,e,i,r))}moveByGroup(e,i){return xD(this,e,fie(this,e,i,r=>iet(this,e.head,r)))}visualLineSide(e,i){let r=this.bidiSpans(e),n=this.textDirectionAt(e.from),s=r[i?r.length-1:0];return me.cursor(s.side(i,n)+e.from,s.forward(!i,n)?1:-1)}moveToLineBoundary(e,i,r=!0){return tet(this,e,i,r)}moveVertically(e,i,r){return xD(this,e,ret(this,e,i,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,i=0){return this.docView.posFromDOM(e,i)}posAtCoords(e,i=!0){return this.readMeasured(),cve(this,e,i)}coordsAtPos(e,i=1){this.readMeasured();let r=this.docView.coordsAt(e,i);if(!r||r.left==r.right)return r;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[bf.find(s,e-n.from,-1,i)];return z2(r,o.dir==Bi.LTR==i>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(tve)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Zet)return Z0e(e.length);let i=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==i&&(s.fresh||G0e(s.isolates,r=lie(this,e))))return s.order;r||(r=lie(this,e));let n=FKe(e.text,i,r);return this.bidiCache.push(new AI(e.from,e.to,i,r,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Fe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{M0e(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,i={}){return Tk.of(new ww(typeof e=="number"?me.cursor(e):e,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:i}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Tk.of(new ww(me.cursor(r.from),"start","start",r.top-e,i,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Nr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Nr.define(()=>({}),{eventObservers:e})}static theme(e,i){let r=Wf.newName(),n=[Ik.of(r),Z_.of(q6(`.${r}`,e))];return i&&i.dark&&n.push(Q6.of(!0)),n}static baseTheme(e){return dm.lowest(Z_.of(q6("."+B6,e,_ve)))}static findFromDOM(e){var i;let r=e.querySelector(".cm-content"),n=r&&$i.get(r)||$i.get(e);return((i=n==null?void 0:n.rootView)===null||i===void 0?void 0:i.view)||null}}Pe.styleModule=Z_;Pe.inputHandler=K0e;Pe.clipboardInputFilter=p7;Pe.clipboardOutputFilter=f7;Pe.scrollHandler=rve;Pe.focusChangeEffect=eve;Pe.perLineTextDirection=tve;Pe.exceptionSink=J0e;Pe.updateListener=F6;Pe.editable=sd;Pe.mouseSelectionStyle=Y0e;Pe.dragMovesSelection=X0e;Pe.clickAddsSelectionRange=W0e;Pe.decorations=C$;Pe.outerDecorations=ove;Pe.atomicRanges=y7;Pe.bidiIsolatedRanges=ave;Pe.scrollMargins=lve;Pe.darkTheme=Q6;Pe.cspNonce=ze.define({combine:t=>t.length?t[0]:""});Pe.contentAttributes=m7;Pe.editorAttributes=sve;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=xt.define();const Zet=4096,Iie={};class AI{constructor(e,i,r,n,s,o){this.from=e,this.to=i,this.dir=r,this.isolates=n,this.fresh=s,this.order=o}static update(e,i){if(i.empty&&!e.some(s=>s.fresh))return e;let r=[],n=e.length?e[e.length-1].dir:Bi.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!i.touchesRange(o.from,o.to)&&r.push(new AI(i.mapPos(o.from,1),i.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function Pie(t,e,i){for(let r=t.state.facet(e),n=r.length-1;n>=0;n--){let s=r[n],o=typeof s=="function"?s(t):s;o&&P6(o,i)}return i}const Het=Fe.mac?"mac":Fe.windows?"win":Fe.linux?"linux":"key";function Wet(t,e){const i=t.split(/-(?!$)/);let r=i[i.length-1];r=="Space"&&(r=" ");let n,s,o,a;for(let l=0;l<i.length-1;++l){const u=i[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return n&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Pk(t,e,i){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),i!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Xet=dm.default(Pe.domEventHandlers({keydown(t,e){return $ve(xve(e.state),t,e,"editor")}})),B2=ze.define({enables:Xet}),Rie=new WeakMap;function xve(t){let e=t.facet(B2),i=Rie.get(e);return i||Rie.set(e,i=Ket(e.reduce((r,n)=>r.concat(n),[]))),i}function Yet(t,e,i){return $ve(xve(t.state),e,t,i)}let lf=null;const Jet=4e3;function Ket(t,e=Het){let i=Object.create(null),r=Object.create(null),n=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,p)=>{var m,g;let w=i[o]||(i[o]=Object.create(null)),O=a.split(/ (?!$)/).map(T=>Wet(T,e));for(let T=1;T<O.length;T++){let E=O.slice(0,T).join(" ");n(E,!0),w[E]||(w[E]={preventDefault:!0,stopPropagation:!1,run:[k=>{let M=lf={view:k,prefix:E,scope:o};return setTimeout(()=>{lf==M&&(lf=null)},Jet),!0}]})}let _=O.join(" ");n(_,!1);let x=w[_]||(w[_]={preventDefault:!1,stopPropagation:!1,run:((g=(m=w._any)===null||m===void 0?void 0:m.run)===null||g===void 0?void 0:g.slice())||[]});l&&x.run.push(l),u&&(x.preventDefault=!0),p&&(x.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let p=i[u]||(i[u]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=o;for(let g in p)p[g].run.push(w=>m(w,G6))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return i}let G6=null;function $ve(t,e,i,r){G6=e;let n=OKe(e),s=Oo(n,0),o=dc(s)==n.length&&n!=" ",a="",l=!1,u=!1,p=!1;lf&&lf.view==i&&lf.scope==r&&(a=lf.prefix+" ",pve.indexOf(e.keyCode)<0&&(u=!0,lf=null));let m=new Set,g=x=>{if(x){for(let T of x.run)if(!m.has(T)&&(m.add(T),T(i)))return x.stopPropagation&&(p=!0),!0;x.preventDefault&&(x.stopPropagation&&(p=!0),u=!0)}return!1},w=t[r],O,_;return w&&(g(w[a+Pk(n,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Fe.windows&&e.ctrlKey&&e.altKey)&&(O=Xf[e.keyCode])&&O!=n?(g(w[a+Pk(O,e,!0)])||e.shiftKey&&(_=E$[e.keyCode])!=n&&_!=O&&g(w[a+Pk(_,e,!1)]))&&(l=!0):o&&e.shiftKey&&g(w[a+Pk(n,e,!0)])&&(l=!0),!l&&g(w._any)&&(l=!0)),u&&(l=!0),l&&p&&e.stopPropagation(),G6=null,l}class q2{constructor(e,i,r,n,s){this.className=e,this.left=i,this.top=r,this.width=n,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,i){return i.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,i,r){if(r.empty){let n=e.coordsAtPos(r.head,r.assoc||1);if(!n)return[];let s=Tve(e);return[new q2(i,n.left-s.left,n.top-s.top,null,n.bottom-n.top)]}else return ett(e,i,r)}}function Tve(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Bi.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function Lie(t,e,i,r){let n=t.coordsAtPos(e,i*2);if(!n)return r;let s=t.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function ett(t,e,i){if(i.to<=t.viewport.from||i.from>=t.viewport.to)return[];let r=Math.max(i.from,t.viewport.from),n=Math.min(i.to,t.viewport.to),s=t.textDirection==Bi.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=Tve(t),u=o.querySelector(".cm-line"),p=u&&window.getComputedStyle(u),m=a.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),g=a.right-(p?parseInt(p.paddingRight):0),w=z6(t,r),O=z6(t,n),_=w.type==Js.Text?w:null,x=O.type==Js.Text?O:null;if(_&&(t.lineWrapping||w.widgetLineBreaks)&&(_=Lie(t,r,1,_)),x&&(t.lineWrapping||O.widgetLineBreaks)&&(x=Lie(t,n,-1,x)),_&&x&&_.from==x.from&&_.to==x.to)return E(k(i.from,i.to,_));{let R=_?k(i.from,null,_):M(w,!1),D=x?k(null,i.to,x):M(O,!0),L=[];return(_||w).to<(x||O).from-(_&&x?1:0)||w.widgetLineBreaks>1&&R.bottom+t.defaultLineHeight/2<D.top?L.push(T(m,R.bottom,g,D.top)):R.bottom<D.top&&t.elementAtHeight((R.bottom+D.top)/2).type==Js.Text&&(R.bottom=D.top=(R.bottom+D.top)/2),E(R).concat(L).concat(E(D))}function T(R,D,L,F){return new q2(e,R-l.left,D-l.top,L-R,F-D)}function E({top:R,bottom:D,horizontal:L}){let F=[];for(let j=0;j<L.length;j+=2)F.push(T(L[j],R,L[j+1],D));return F}function k(R,D,L){let F=1e9,j=-1e9,B=[];function W(ae,Ee,ue,he,ye){let Ae=t.coordsAtPos(ae,ae==L.to?-2:2),Q=t.coordsAtPos(ue,ue==L.from?2:-2);!Ae||!Q||(F=Math.min(Ae.top,Q.top,F),j=Math.max(Ae.bottom,Q.bottom,j),ye==Bi.LTR?B.push(s&&Ee?m:Ae.left,s&&he?g:Q.right):B.push(!s&&he?m:Q.left,!s&&Ee?g:Ae.right))}let ie=R??L.from,oe=D??L.to;for(let ae of t.visibleRanges)if(ae.to>ie&&ae.from<oe)for(let Ee=Math.max(ae.from,ie),ue=Math.min(ae.to,oe);;){let he=t.state.doc.lineAt(Ee);for(let ye of t.bidiSpans(he)){let Ae=ye.from+he.from,Q=ye.to+he.from;if(Ae>=ue)break;Q>Ee&&W(Math.max(Ae,Ee),R==null&&Ae<=ie,Math.min(Q,ue),D==null&&Q>=oe,ye.dir)}if(Ee=he.to+1,Ee>=ue)break}return B.length==0&&W(ie,R==null,oe,D==null,t.textDirection),{top:F,bottom:j,horizontal:B}}function M(R,D){let L=a.top+(D?R.top:R.bottom);return{top:L,bottom:L,horizontal:[]}}}function ttt(t,e){return t.constructor==e.constructor&&t.eq(e)}class itt{constructor(e,i){this.view=e,this.layer=i,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,e)}update(e){e.startState.facet(PM)!=e.state.facet(PM)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let i=0,r=e.facet(PM);for(;i<r.length&&r[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:i}=this.view;(e!=this.scaleX||i!=this.scaleY)&&(this.scaleX=e,this.scaleY=i,this.dom.style.transform=`scale(${1/e}, ${1/i})`)}draw(e){if(e.length!=this.drawn.length||e.some((i,r)=>!ttt(i,this.drawn[r]))){let i=this.dom.firstChild,r=0;for(let n of e)n.update&&i&&n.constructor&&this.drawn[r].constructor&&n.update(i,this.drawn[r])?(i=i.nextSibling,r++):this.dom.insertBefore(n.draw(),i);for(;i;){let n=i.nextSibling;i.remove(),i=n}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const PM=ze.define();function Eve(t){return[Nr.define(e=>new itt(e,t)),PM.of(t)]}const kve=!(Fe.ios&&Fe.webkit&&Fe.webkit_version<534),M$=ze.define({combine(t){return Fc(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,i)=>Math.min(e,i),drawRangeCursor:(e,i)=>e||i})}});function rtt(t={}){return[M$.of(t),ntt,stt,ott,ive.of(!0)]}function Cve(t){return t.startState.facet(M$)!=t.state.facet(M$)}const ntt=Eve({above:!0,markers(t){let{state:e}=t,i=e.facet(M$),r=[];for(let n of e.selection.ranges){let s=n==e.selection.main;if(n.empty?!s||kve:i.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=n.empty?n:me.cursor(n.head,n.head>n.anchor?-1:1);for(let l of q2.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=Cve(t);return i&&Nie(t.state,e),t.docChanged||t.selectionSet||i},mount(t,e){Nie(e.state,t)},class:"cm-cursorLayer"});function Nie(t,e){e.style.animationDuration=t.facet(M$).cursorBlinkRate+"ms"}const stt=Eve({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:q2.forRange(t,"cm-selectionBackground",e)).reduce((e,i)=>e.concat(i))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Cve(t)},class:"cm-selectionLayer"}),Z6={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};kve&&(Z6[".cm-line"].caretColor=Z6[".cm-content"].caretColor="transparent !important");const ott=dm.highest(Pe.theme(Z6)),Mve=xt.define({map(t,e){return t==null?null:e.mapPos(t)}}),X_=Nn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((i,r)=>r.is(Mve)?r.value:i,t)}}),att=Nr.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let i=t.state.field(X_);i==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(X_)!=i||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(X_),i=e!=null&&t.coordsAtPos(e);if(!i)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:i.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:i.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:i.bottom-i.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:i}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/i+"px",this.cursor.style.height=t.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(X_)!=t&&this.view.dispatch({effects:Mve.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function ltt(){return[X_,att]}function Die(t,e,i,r,n){e.lastIndex=0;for(let s=t.iterRange(i,r),o=i,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)n(o+a.index,a)}function utt(t,e){let i=t.visibleRanges;if(i.length==1&&i[0].from==t.viewport.from&&i[0].to==t.viewport.to)return i;let r=[];for(let{from:n,to:s}of i)n=Math.max(t.state.doc.lineAt(n).from,n-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=n?r[r.length-1].to=s:r.push({from:n,to:s});return r}class ctt{constructor(e){const{regexp:i,decoration:r,decorate:n,boundary:s,maxLength:o=1e3}=e;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,n)this.addMatch=(a,l,u,p)=>n(p,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,p)=>{let m=r(a,l,u);m&&p(u,u+a[0].length,m)};else if(r)this.addMatch=(a,l,u,p)=>p(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let i=new Od,r=i.add.bind(i);for(let{from:n,to:s}of utt(e,this.maxLength))Die(e.state.doc,this.regexp,n,s,(o,a)=>this.addMatch(a,e,o,r));return i.finish()}updateDeco(e,i){let r=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),n=Math.max(l,n))}),e.viewportMoved||n-r>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,i.map(e.changes),r,n):i}updateRange(e,i,r,n){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,n);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,p=Math.max(s.from,l.from),m=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){p=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){m=a;break}}let g=[],w,O=(_,x,T)=>g.push(T.range(_,x));if(l==u)for(this.regexp.lastIndex=p-l.from;(w=this.regexp.exec(l.text))&&w.index<m-l.from;)this.addMatch(w,e,w.index+l.from,O);else Die(e.state.doc,this.regexp,p,m,(_,x)=>this.addMatch(x,e,_,O));i=i.update({filterFrom:p,filterTo:m,filter:(_,x)=>_<p||x>m,add:g})}}return i}}const H6=/x/.unicode!=null?"gu":"g",htt=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,H6),dtt={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ED=null;function ptt(){var t;if(ED==null&&typeof document<"u"&&document.body){let e=document.body.style;ED=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return ED||!1}const RM=ze.define({combine(t){let e=Fc(t,{render:null,specialChars:htt,addSpecialChars:null});return(e.replaceTabs=!ptt())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,H6)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,H6)),e}});function ftt(t={}){return[RM.of(t),mtt()]}let Vie=null;function mtt(){return Vie||(Vie=Nr.fromClass(class{constructor(t){this.view=t,this.decorations=st.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(RM)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new ctt({regexp:t.specialChars,decoration:(e,i,r)=>{let{doc:n}=i.state,s=Oo(e[0],0);if(s==9){let o=n.lineAt(r),a=i.state.tabSize,l=jO(o.text,a,r-o.from);return st.replace({widget:new btt((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=st.replace({widget:new vtt(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(RM);t.startState.facet(RM)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const ytt="";function gtt(t){return t>=32?ytt:t==10?"":String.fromCharCode(9216+t)}class vtt extends jc{constructor(e,i){super(),this.options=e,this.code=i}eq(e){return e.code==this.code}toDOM(e){let i=gtt(this.code),r=e.state.phrase("Control character")+" "+(dtt[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,r,i);if(n)return n;let s=document.createElement("span");return s.textContent=i,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class btt extends jc{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function wtt(){return Stt}const Ott=st.line({class:"cm-activeLine"}),Stt=Nr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,i=[];for(let r of t.state.selection.ranges){let n=t.lineBlockAt(r.head);n.from>e&&(i.push(Ott.range(n.from)),e=n.from)}return st.set(i)}},{decorations:t=>t.decorations});class _tt extends jc{constructor(e){super(),this.content=e}toDOM(e){let i=document.createElement("span");return i.className="cm-placeholder",i.style.pointerEvents="none",i.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?i.setAttribute("aria-label","placeholder "+this.content):i.setAttribute("aria-hidden","true"),i}coordsAt(e){let i=e.firstChild?Gw(e.firstChild):[];if(!i.length)return null;let r=window.getComputedStyle(e.parentNode),n=z2(i[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return n.bottom-n.top>s*1.5?{left:n.left,right:n.right,top:n.top,bottom:n.top+s}:n}ignoreEvent(){return!1}}function xtt(t){return Nr.fromClass(class{constructor(e){this.view=e,this.placeholder=t?st.set([st.widget({widget:new _tt(t),side:1}).range(0)]):st.none}get decorations(){return this.view.state.doc.length?st.none:this.placeholder}},{decorations:e=>e.decorations})}const W6=2e3;function $tt(t,e,i){let r=Math.min(e.line,i.line),n=Math.max(e.line,i.line),s=[];if(e.off>W6||i.off>W6||e.col<0||i.col<0){let o=Math.min(e.off,i.off),a=Math.max(e.off,i.off);for(let l=r;l<=n;l++){let u=t.doc.line(l);u.length<=a&&s.push(me.range(u.from+o,u.to+a))}}else{let o=Math.min(e.col,i.col),a=Math.max(e.col,i.col);for(let l=r;l<=n;l++){let u=t.doc.line(l),p=T6(u.text,o,t.tabSize,!0);if(p<0)s.push(me.cursor(u.to));else{let m=T6(u.text,a,t.tabSize);s.push(me.range(u.from+p,u.from+m))}}}return s}function Ttt(t,e){let i=t.coordsAtPos(t.viewport.from);return i?Math.round(Math.abs((i.left-e)/t.defaultCharacterWidth)):-1}function Fie(t,e){let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(i),n=i-r.from,s=n>W6?-1:n==r.length?Ttt(t,e.clientX):jO(r.text,t.state.tabSize,i-r.from);return{line:r.number,col:s,off:n}}function Ett(t,e){let i=Fie(t,e),r=t.state.selection;return i?{update(n){if(n.docChanged){let s=n.changes.mapPos(n.startState.doc.line(i.line).from),o=n.state.doc.lineAt(s);i={line:o.number,col:i.col,off:Math.min(i.off,o.length)},r=r.map(n.changes)}},get(n,s,o){let a=Fie(t,n);if(!a)return r;let l=$tt(t.state,i,a);return l.length?o?me.create(l.concat(r.ranges)):me.create(l):r}}:null}function ktt(t){let e=i=>i.altKey&&i.button==0;return Pe.mouseSelectionStyle.of((i,r)=>e(r)?Ett(i,r):null)}const Ctt={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},Mtt={style:"cursor: crosshair"};function Att(t={}){let[e,i]=Ctt[t.key||"Alt"],r=Nr.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||i(n))},keyup(n){(n.keyCode==e||!i(n))&&this.set(!1)},mousemove(n){this.set(i(n))}}});return[r,Pe.contentAttributes.of(n=>{var s;return!((s=n.plugin(r))===null||s===void 0)&&s.isDown?Mtt:null})]}const gS="-10000px";class Ave{constructor(e,i,r,n){this.facet=i,this.createTooltipView=r,this.removeTooltipView=n,this.input=e.state.facet(i),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,i){var r;let n=e.state.facet(this.facet),s=n.filter(l=>l);if(n===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=i?[]:null;for(let l=0;l<s.length;l++){let u=s[l],p=-1;if(u){for(let m=0;m<this.tooltips.length;m++){let g=this.tooltips[m];g&&g.create==u.create&&(p=m)}if(p<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let m=o[l]=this.tooltipViews[p];a&&(a[l]=i[p]),m.update&&m.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return i&&(a.forEach((l,u)=>i[u]=l),i.length=a.length),this.input=n,this.tooltips=s,this.tooltipViews=o,!0}}function Itt(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const kD=ze.define({combine:t=>{var e,i,r;return{position:Fe.ios?"absolute":((e=t.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((i=t.find(n=>n.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((r=t.find(n=>n.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Itt}}}),jie=new WeakMap,O7=Nr.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(kD);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Ave(t,S7,(i,r)=>this.createTooltip(i,r),i=>{this.resizeObserver&&this.resizeObserver.unobserve(i.dom),i.dom.remove()}),this.above=this.manager.tooltips.map(i=>!!i.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let i=e||t.geometryChanged,r=t.state.facet(kD);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;i=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(t,e){let i=t.create(this.view),r=e?e.dom:null;if(i.dom.classList.add("cm-tooltip"),t.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",i.dom.appendChild(n)}return i.dom.style.position=this.position,i.dom.style.top=gS,i.dom.style.left="0px",this.container.insertBefore(i.dom,r),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var t,e,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Fe.gecko)i=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==gS&&s.style.left=="0px"){let o=s.getBoundingClientRect();i=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(i||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),n=g7(this.view);return{visible:{left:r.left+n.left,top:r.top+n.top,right:r.right-n.right,bottom:r.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(kD).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:i}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:i,space:r,scaleX:n,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:p}=u,m=t.pos[a],g=t.size[a];if(!m||l.clip!==!1&&(m.bottom<=Math.max(i.top,r.top)||m.top>=Math.min(i.bottom,r.bottom)||m.right<Math.max(i.left,r.left)-.1||m.left>Math.min(i.right,r.right)+.1)){p.style.top=gS;continue}let w=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,O=w?7:0,_=g.right-g.left,x=(e=jie.get(u))!==null&&e!==void 0?e:g.bottom-g.top,T=u.offset||Rtt,E=this.view.textDirection==Bi.LTR,k=g.width>r.right-r.left?E?r.left:r.right-g.width:E?Math.max(r.left,Math.min(m.left-(w?14:0)+T.x,r.right-_)):Math.min(Math.max(r.left,m.left-_+(w?14:0)-T.x),r.right-_),M=this.above[a];!l.strictSide&&(M?m.top-x-O-T.y<r.top:m.bottom+x+O+T.y>r.bottom)&&M==r.bottom-m.bottom>m.top-r.top&&(M=this.above[a]=!M);let R=(M?m.top-r.top:r.bottom-m.bottom)-O;if(R<x&&u.resize!==!1){if(R<this.view.defaultLineHeight){p.style.top=gS;continue}jie.set(u,x),p.style.height=(x=R)/s+"px"}else p.style.height&&(p.style.height="");let D=M?m.top-x-O-T.y:m.bottom+O+T.y,L=k+_;if(u.overlap!==!0)for(let F of o)F.left<L&&F.right>k&&F.top<D+x&&F.bottom>D&&(D=M?F.top-x-2-O:F.bottom+O+2);if(this.position=="absolute"?(p.style.top=(D-t.parent.top)/s+"px",zie(p,(k-t.parent.left)/n)):(p.style.top=D/s+"px",zie(p,k/n)),w){let F=m.left+(E?T.x:-T.x)-(k+14-7);w.style.left=F/n+"px"}u.overlap!==!0&&o.push({left:k,top:D,right:L,bottom:D+x}),p.classList.toggle("cm-tooltip-above",M),p.classList.toggle("cm-tooltip-below",!M),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=gS}},{eventObservers:{scroll(){this.maybeMeasure()}}});function zie(t,e){let i=parseInt(t.style.left,10);(isNaN(i)||Math.abs(e-i)>1)&&(t.style.left=e+"px")}const Ptt=Pe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Rtt={x:0,y:0},S7=ze.define({enables:[O7,Ptt]}),II=ze.define({combine:t=>t.reduce((e,i)=>e.concat(i),[])});class UR{static create(e){return new UR(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ave(e,II,(i,r)=>this.createHostedView(i,r),i=>i.dom.remove())}createHostedView(e,i){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,i?i.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let i of this.manager.tooltipViews)i.mount&&i.mount(e);this.mounted=!0}positioned(e){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let i of this.manager.tooltipViews)(e=i.destroy)===null||e===void 0||e.call(i)}passProp(e){let i;for(let r of this.manager.tooltipViews){let n=r[e];if(n!==void 0){if(i===void 0)i=n;else if(i!==n)return}}return i}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Ltt=S7.compute([II],t=>{let e=t.facet(II);return e.length===0?null:{pos:Math.min(...e.map(i=>i.pos)),end:Math.max(...e.map(i=>{var r;return(r=i.end)!==null&&r!==void 0?r:i.pos})),create:UR.create,above:e[0].above,arrow:e.some(i=>i.arrow)}});class Ntt{constructor(e,i,r,n,s){this.view=e,this.source=i,this.field=r,this.setHover=n,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:i}=this,r=e.docView.nearest(i.target);if(!r)return;let n,s=1;if(r instanceof vf)n=r.posAtStart;else{if(n=e.posAtCoords(i),n==null)return;let a=e.coordsAtPos(n);if(!a||i.y<a.top||i.y>a.bottom||i.x<a.left-e.defaultCharacterWidth||i.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(n)).find(p=>p.from<=n&&p.to>=n),u=l&&l.dir==Bi.RTL?-1:1;s=i.x<a.left?-u:u}let o=this.source(e,n,s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Eo(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(O7),i=e?e.manager.tooltips.findIndex(r=>r.create==UR.create):-1;return i>-1?e.manager.tooltipViews[i]:null}mousemove(e){var i,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:s}=this;if(n.length&&s&&!Dtt(s.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,a=(r=(i=n[0])===null||i===void 0?void 0:i.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Vtt(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:i}=this;if(i.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let i=r=>{e.removeEventListener("mouseleave",i),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",i)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Rk=4;function Dtt(t,e){let{left:i,right:r,top:n,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();n=Math.min(a.top,n),s=Math.max(a.bottom,s)}return e.clientX>=i-Rk&&e.clientX<=r+Rk&&e.clientY>=n-Rk&&e.clientY<=s+Rk}function Vtt(t,e,i,r,n,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>n||Math.min(o.bottom,a)<n)return!1;let l=t.posAtCoords({x:r,y:n},!1);return l>=e&&l<=i}function Ftt(t,e={}){let i=xt.define(),r=Nn.define({create(){return[]},update(n,s){if(n.length&&(e.hideOnChange&&(s.docChanged||s.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of n){let l=s.changes.mapPos(a.pos,-1,Xn.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}n=o}for(let o of s.effects)o.is(i)&&(n=o.value),o.is(jtt)&&(n=[]);return n},provide:n=>II.from(n)});return{active:r,extension:[r,Nr.define(n=>new Ntt(n,t,r,i,e.hoverTime||300)),Ltt]}}function Ive(t,e){let i=t.plugin(O7);if(!i)return null;let r=i.manager.tooltips.indexOf(e);return r<0?null:i.manager.tooltipViews[r]}const jtt=xt.define(),Uie=ze.define({combine(t){let e,i;for(let r of t)e=e||r.topContainer,i=i||r.bottomContainer;return{topContainer:e,bottomContainer:i}}});function A$(t,e){let i=t.plugin(Pve),r=i?i.specs.indexOf(e):-1;return r>-1?i.panels[r]:null}const Pve=Nr.fromClass(class{constructor(t){this.input=t.state.facet(I$),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(t));let e=t.state.facet(Uie);this.top=new Lk(t,!0,e.topContainer),this.bottom=new Lk(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(t){let e=t.state.facet(Uie);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Lk(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Lk(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=t.state.facet(I$);if(i!=this.input){let r=i.filter(l=>l),n=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),p;u<0?(p=l(t.view),a.push(p)):(p=this.panels[u],p.update&&p.update(t)),n.push(p),(p.top?s:o).push(p)}this.specs=r,this.panels=n,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Pe.scrollMargins.of(e=>{let i=e.plugin(t);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class Lk{constructor(e,i,r){this.view=e,this.top=i,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let i of this.panels)i.destroy&&e.indexOf(i)<0&&i.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let e=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;e!=i.dom;)e=Qie(e);e=e.nextSibling}else this.dom.insertBefore(i.dom,e);for(;e;)e=Qie(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Qie(t){let e=t.nextSibling;return t.remove(),e}const I$=ze.define({enables:Pve});class _d extends Kg{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}_d.prototype.elementClass="";_d.prototype.toDOM=void 0;_d.prototype.mapMode=Xn.TrackBefore;_d.prototype.startSide=_d.prototype.endSide=-1;_d.prototype.point=!0;const LM=ze.define(),ztt=ze.define(),Utt={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Zt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Lx=ze.define();function Qtt(t){return[Rve(),Lx.of(Object.assign(Object.assign({},Utt),t))]}const Bie=ze.define({combine:t=>t.some(e=>e)});function Rve(t){return[Btt]}const Btt=Nr.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Lx).map(e=>new Gie(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Bie),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,i=t.view.viewport,r=Math.min(e.to,i.to)-Math.max(e.from,i.from);this.syncGutters(r<(i.to-i.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Bie)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let i=Zt.iter(this.view.state.facet(LM),this.view.viewport.from),r=[],n=this.gutters.map(s=>new qtt(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Js.Text&&o){X6(i,r,a.from);for(let l of n)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of n)l.widget(this.view,a)}else if(s.type==Js.Text){X6(i,r,s.from);for(let o of n)o.line(this.view,s,r)}else if(s.widget)for(let o of n)o.widget(this.view,s);for(let s of n)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Lx),i=t.state.facet(Lx),r=t.docChanged||t.heightChanged||t.viewportChanged||!Zt.eq(t.startState.facet(LM),t.state.facet(LM),t.view.viewport.from,t.view.viewport.to);if(e==i)for(let n of this.gutters)n.update(t)&&(r=!0);else{r=!0;let n=[];for(let s of i){let o=e.indexOf(s);o<0?n.push(new Gie(this.view,s)):(this.gutters[o].update(t),n.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),n.indexOf(s)<0&&s.destroy();for(let s of n)this.dom.appendChild(s.dom);this.gutters=n}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Pe.scrollMargins.of(e=>{let i=e.plugin(t);return!i||i.gutters.length==0||!i.fixed?null:e.textDirection==Bi.LTR?{left:i.dom.offsetWidth*e.scaleX}:{right:i.dom.offsetWidth*e.scaleX}})});function qie(t){return Array.isArray(t)?t:[t]}function X6(t,e,i){for(;t.value&&t.from<=i;)t.from==i&&e.push(t.value),t.next()}class qtt{constructor(e,i,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Zt.iter(e.markers,i.from)}addElement(e,i,r){let{gutter:n}=this,s=(i.top-this.height)/e.scaleY,o=i.height/e.scaleY;if(this.i==n.elements.length){let a=new Lve(e,o,s,r);n.elements.push(a),n.dom.appendChild(a.dom)}else n.elements[this.i].update(e,o,s,r);this.height=i.bottom,this.i++}line(e,i,r){let n=[];X6(this.cursor,n,i.from),r.length&&(n=n.concat(r));let s=this.gutter.config.lineMarker(e,i,n);s&&n.unshift(s);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,i,n)}widget(e,i){let r=this.gutter.config.widgetMarker(e,i.widget,i),n=r?[r]:null;for(let s of e.state.facet(ztt)){let o=s(e,i.widget,i);o&&(n||(n=[])).push(o)}n&&this.addElement(e,i,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let i=e.elements.pop();e.dom.removeChild(i.dom),i.destroy()}}}class Gie{constructor(e,i){this.view=e,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in i.domEventHandlers)this.dom.addEventListener(r,n=>{let s=n.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=n.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);i.domEventHandlers[r](e,a,n)&&n.preventDefault()});this.markers=qie(i.markers(e)),i.initialSpacer&&(this.spacer=new Lve(e,0,0,[i.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let i=this.markers;if(this.markers=qie(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let r=e.view.viewport;return!Zt.eq(this.markers,i,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Lve{constructor(e,i,r,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,i,r,n)}update(e,i,r,n){this.height!=i&&(this.height=i,this.dom.style.height=i+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Gtt(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,i){let r="cm-gutterElement",n=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<i.length?i[s++]:null,u=!1;if(l){let p=l.elementClass;p&&(r+=" "+p);for(let m=o;m<this.markers.length;m++)if(this.markers[m].compare(l)){a=m,u=!0;break}}else a=this.markers.length;for(;o<a;){let p=this.markers[o++];if(p.toDOM){p.destroy(n);let m=n.nextSibling;n.remove(),n=m}}if(!l)break;l.toDOM&&(u?n=n.nextSibling:this.dom.insertBefore(l.toDOM(e),n)),u&&o++}this.dom.className=r,this.markers=i}destroy(){this.setMarkers(null,[])}}function Gtt(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].compare(e[i]))return!1;return!0}const Ztt=ze.define(),Htt=ze.define(),Gb=ze.define({combine(t){return Fc(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,i){let r=Object.assign({},e);for(let n in i){let s=r[n],o=i[n];r[n]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}});class CD extends _d{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function MD(t,e){return t.state.facet(Gb).formatNumber(e,t.state)}const Wtt=Lx.compute([Gb],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Ztt)},lineMarker(e,i,r){return r.some(n=>n.toDOM)?null:new CD(MD(e,e.state.doc.lineAt(i.from).number))},widgetMarker:(e,i,r)=>{for(let n of e.state.facet(Htt)){let s=n(e,i,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Gb)!=e.state.facet(Gb),initialSpacer(e){return new CD(MD(e,Zie(e.state.doc.lines)))},updateSpacer(e,i){let r=MD(i.view,Zie(i.view.state.doc.lines));return r==e.number?e:new CD(r)},domEventHandlers:t.facet(Gb).domEventHandlers}));function Xtt(t={}){return[Gb.of(t),Rve(),Wtt]}function Zie(t){let e=9;for(;e<t;)e=e*10+9;return e}const Ytt=new class extends _d{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Jtt=LM.compute(["selection"],t=>{let e=[],i=-1;for(let r of t.selection.ranges){let n=t.doc.lineAt(r.head).from;n>i&&(i=n,e.push(Ytt.range(n)))}return Zt.of(e)});function Ktt(){return Jtt}const Nve=1024;let eit=0;class nl{constructor(e,i){this.from=e,this.to=i}}class Ct{constructor(e={}){this.id=eit++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=eo.match(e)),i=>{let r=e(i);return r===void 0?null:[this,r]}}}Ct.closedBy=new Ct({deserialize:t=>t.split(" ")});Ct.openedBy=new Ct({deserialize:t=>t.split(" ")});Ct.group=new Ct({deserialize:t=>t.split(" ")});Ct.isolate=new Ct({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ct.contextHash=new Ct({perNode:!0});Ct.lookAhead=new Ct({perNode:!0});Ct.mounted=new Ct({perNode:!0});class P${constructor(e,i,r){this.tree=e,this.overlay=i,this.parser=r}static get(e){return e&&e.props&&e.props[Ct.mounted.id]}}const tit=Object.create(null);class eo{constructor(e,i,r,n=0){this.name=e,this.props=i,this.id=r,this.flags=n}static define(e){let i=e.props&&e.props.length?Object.create(null):tit,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new eo(e.name||"",i,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let i=this.prop(Ct.group);return i?i.indexOf(e)>-1:!1}return this.id==e}static match(e){let i=Object.create(null);for(let r in e)for(let n of r.split(" "))i[n]=e[r];return r=>{for(let n=r.prop(Ct.group),s=-1;s<(n?n.length:0);s++){let o=i[s<0?r.name:n[s]];if(o)return o}}}}eo.none=new eo("",Object.create(null),0,8);class _7{constructor(e){this.types=e;for(let i=0;i<e.length;i++)if(e[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let i=[];for(let r of this.types){let n=null;for(let s of e){let o=s(r);o&&(n||(n=Object.assign({},r.props)),n[o[0].id]=o[1])}i.push(n?new eo(r.name,n,r.id,r.flags):r)}return new _7(i)}}const Nk=new WeakMap,Hie=new WeakMap;var Ri;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Ri||(Ri={}));class ur{constructor(e,i,r,n,s){if(this.type=e,this.children=i,this.positions=r,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=P$.get(this);if(e&&!e.overlay)return e.tree.toString();let i="";for(let r of this.children){let n=r.toString();n&&(i&&(i+=","),i+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(e=0){return new PI(this.topNode,e)}cursorAt(e,i=0,r=0){let n=Nk.get(this)||this.topNode,s=new PI(n);return s.moveTo(e,i),Nk.set(this,s._tree),s}get topNode(){return new xs(this,0,0,null)}resolve(e,i=0){let r=R$(Nk.get(this)||this.topNode,e,i,!1);return Nk.set(this,r),r}resolveInner(e,i=0){let r=R$(Hie.get(this)||this.topNode,e,i,!0);return Hie.set(this,r),r}resolveStack(e,i=0){return nit(this,e,i)}iterate(e){let{enter:i,leave:r,from:n=0,to:s=this.length}=e,o=e.mode||0,a=(o&Ri.IncludeAnonymous)>0;for(let l=this.cursor(o|Ri.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=n&&(!a&&l.type.isAnonymous||i(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let i in this.props)e.push([+i,this.props[i]]);return e}balance(e={}){return this.children.length<=8?this:T7(eo.none,this.children,this.positions,0,this.children.length,0,this.length,(i,r,n)=>new ur(this.type,i,r,n,this.propValues),e.makeTree||((i,r,n)=>new ur(eo.none,i,r,n)))}static build(e){return sit(e)}}ur.empty=new ur(eo.none,[],[],0);class x7{constructor(e,i){this.buffer=e,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new x7(this.buffer,this.index)}}class Jf{constructor(e,i,r){this.buffer=e,this.length=i,this.set=r}get type(){return eo.none}toString(){let e=[];for(let i=0;i<this.buffer.length;)e.push(this.childString(i)),i=this.buffer[i+3];return e.join(",")}childString(e){let i=this.buffer[e],r=this.buffer[e+3],n=this.set.types[i],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,i,r,n,s){let{buffer:o}=this,a=-1;for(let l=e;l!=i&&!(Dve(s,n,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,i,r){let n=this.buffer,s=new Uint16Array(i-e),o=0;for(let a=e,l=0;a<i;){s[l++]=n[a++],s[l++]=n[a++]-r;let u=s[l++]=n[a++]-r;s[l++]=n[a++]-e,o=Math.max(o,u)}return new Jf(s,o,this.set)}}function Dve(t,e,i,r){switch(t){case-2:return i<e;case-1:return r>=e&&i<e;case 0:return i<e&&r>e;case 1:return i<=e&&r>e;case 2:return r>e;case 4:return!0}}function R$(t,e,i,r){for(var n;t.from==t.to||(i<1?t.from>=e:t.from>e)||(i>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof xs&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Ri.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof xs&&o.index<0&&((n=a.enter(e,i,s))===null||n===void 0?void 0:n.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,i,s);if(!o)return t;t=o}}class Vve{cursor(e=0){return new PI(this,e)}getChild(e,i=null,r=null){let n=Wie(this,e,i,r);return n.length?n[0]:null}getChildren(e,i=null,r=null){return Wie(this,e,i,r)}resolve(e,i=0){return R$(this,e,i,!1)}resolveInner(e,i=0){return R$(this,e,i,!0)}matchContext(e){return Y6(this.parent,e)}enterUnfinishedNodesBefore(e){let i=this.childBefore(e),r=this;for(;i;){let n=i.lastChild;if(!n||n.to!=i.to)break;n.type.isError&&n.from==n.to?(r=i,i=n.prevSibling):i=n}return r}get node(){return this}get next(){return this.parent}}class xs extends Vve{constructor(e,i,r,n){super(),this._tree=e,this.from=i,this.index=r,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,i,r,n,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=i>0?a.length:-1;e!=u;e+=i){let p=a[e],m=l[e]+o.from;if(Dve(n,r,m,m+p.length)){if(p instanceof Jf){if(s&Ri.ExcludeBuffers)continue;let g=p.findChild(0,p.buffer.length,i,r-m,n);if(g>-1)return new mc(new iit(o,p,e,m),null,g)}else if(s&Ri.IncludeAnonymous||!p.type.isAnonymous||$7(p)){let g;if(!(s&Ri.IgnoreMounts)&&(g=P$.get(p))&&!g.overlay)return new xs(g.tree,m,e,o);let w=new xs(p,m,e,o);return s&Ri.IncludeAnonymous||!w.type.isAnonymous?w:w.nextChild(i<0?p.children.length-1:0,i,r,n)}}}if(s&Ri.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+i:e=i<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,i,r=0){let n;if(!(r&Ri.IgnoreOverlays)&&(n=P$.get(this._tree))&&n.overlay){let s=e-this.from;for(let{from:o,to:a}of n.overlay)if((i>0?o<=s:o<s)&&(i<0?a>=s:a>s))return new xs(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,i,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Wie(t,e,i,r){let n=t.cursor(),s=[];if(!n.firstChild())return s;if(i!=null){for(let o=!1;!o;)if(o=n.type.is(i),!n.nextSibling())return s}for(;;){if(r!=null&&n.type.is(r))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return r==null?s:[]}}function Y6(t,e,i=e.length-1){for(let r=t;i>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[i]&&e[i]!=r.name)return!1;i--}}return!0}class iit{constructor(e,i,r,n){this.parent=e,this.buffer=i,this.index=r,this.start=n}}class mc extends Vve{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,i,r){super(),this.context=e,this._parent=i,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,i,r){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,i-this.context.start,r);return s<0?null:new mc(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,i,r=0){if(r&Ri.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],i>0?1:-1,e-this.context.start,i);return s<0?null:new mc(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,i=e.buffer[this.index+3];return i<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new mc(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new mc(this.context,this._parent,e.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],i=[],{buffer:r}=this.context,n=this.index+4,s=r.buffer[this.index+3];if(s>n){let o=r.buffer[this.index+1];e.push(r.slice(n,s,o)),i.push(0)}return new ur(this.type,e,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Fve(t){if(!t.length)return null;let e=0,i=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>i.from||o.to<i.to)&&(i=o,e=s)}let r=i instanceof xs&&i.index<0?null:i.parent,n=t.slice();return r?n[e]=r:n.splice(e,1),new rit(n,i)}class rit{constructor(e,i){this.heads=e,this.node=i}get next(){return Fve(this.heads)}}function nit(t,e,i){let r=t.resolveInner(e,i),n=null;for(let s=r instanceof xs?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(n||(n=[r])).push(o.resolve(e,i)),s=o}else{let o=P$.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new xs(o.tree,o.overlay[0].from+s.from,-1,s);(n||(n=[r])).push(R$(a,e,i,!1))}}return n?Fve(n):r}class PI{get name(){return this.type.name}constructor(e,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof xs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,i){this.index=e;let{start:r,buffer:n}=this.buffer;return this.type=i||n.set.types[n.buffer[e]],this.from=r+n.buffer[e+1],this.to=r+n.buffer[e+2],!0}yield(e){return e?e instanceof xs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,i,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,i,r,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,i-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,i,r=this.mode){return this.buffer?r&Ri.ExcludeBuffers?!1:this.enterChild(1,e,i):this.yield(this._tree.enter(e,i,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ri.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ri.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:i}=this.buffer,r=this.stack.length-1;if(e<0){let n=r<0?0:this.stack[r]+4;if(this.index!=n)return this.yieldBuf(i.findChild(n,this.index,-1,0,4))}else{let n=i.buffer[this.index+3];if(n<(r<0?i.buffer.length:i.buffer[this.stack[r]+3]))return this.yieldBuf(n)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let i,r,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:i,parent:r}=n)}else({index:i,_parent:r}=this._tree);for(;r;{index:i,_parent:r}=r)if(i>-1)for(let s=i+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Ri.IncludeAnonymous||a instanceof Jf||!a.type.isAnonymous||$7(a))return!1}return!0}move(e,i){if(i&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,i=0){for(;(this.from==this.to||(i<1?this.from>=e:this.from>e)||(i>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,i););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,i=null,r=0;if(e&&e.context==this.buffer)e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;i=o,r=s+1;break e}n=this.stack[--s]}for(let n=r;n<this.stack.length;n++)i=new mc(this.buffer,i,this.stack[n]);return this.bufferNode=new mc(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,i){for(let r=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&i&&i(this),n=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,n=!0}}}matchContext(e){if(!this.buffer)return Y6(this.node.parent,e);let{buffer:i}=this.buffer,{types:r}=i.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return Y6(this._tree,e,n);let o=r[i.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function $7(t){return t.children.some(e=>e instanceof Jf||!e.type.isAnonymous||$7(e))}function sit(t){var e;let{buffer:i,nodeSet:r,maxBufferLength:n=Nve,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(i)?new x7(i,i.length):i,l=r.types,u=0,p=0;function m(R,D,L,F,j,B){let{id:W,start:ie,end:oe,size:ae}=a,Ee=p,ue=u;for(;ae<0;)if(a.next(),ae==-1){let ge=s[W];L.push(ge),F.push(ie-R);return}else if(ae==-3){u=W;return}else if(ae==-4){p=W;return}else throw new RangeError(`Unrecognized record size: ${ae}`);let he=l[W],ye,Ae,Q=ie-R;if(oe-ie<=n&&(Ae=x(a.pos-D,j))){let ge=new Uint16Array(Ae.size-Ae.skip),Ve=a.pos-Ae.size,Ne=ge.length;for(;a.pos>Ve;)Ne=T(Ae.start,ge,Ne);ye=new Jf(ge,oe-Ae.start,r),Q=Ae.start-R}else{let ge=a.pos-ae;a.next();let Ve=[],Ne=[],ke=W>=o?W:-1,ct=0,ot=oe;for(;a.pos>ge;)ke>=0&&a.id==ke&&a.size>=0?(a.end<=ot-n&&(O(Ve,Ne,ie,ct,a.end,ot,ke,Ee,ue),ct=Ve.length,ot=a.end),a.next()):B>2500?g(ie,ge,Ve,Ne):m(ie,ge,Ve,Ne,ke,B+1);if(ke>=0&&ct>0&&ct<Ve.length&&O(Ve,Ne,ie,ct,ie,ot,ke,Ee,ue),Ve.reverse(),Ne.reverse(),ke>-1&&ct>0){let ai=w(he,ue);ye=T7(he,Ve,Ne,0,Ve.length,0,oe-ie,ai,ai)}else ye=_(he,Ve,Ne,oe-ie,Ee-oe,ue)}L.push(ye),F.push(Q)}function g(R,D,L,F){let j=[],B=0,W=-1;for(;a.pos>D;){let{id:ie,start:oe,end:ae,size:Ee}=a;if(Ee>4)a.next();else{if(W>-1&&oe<W)break;W<0&&(W=ae-n),j.push(ie,oe,ae),B++,a.next()}}if(B){let ie=new Uint16Array(B*4),oe=j[j.length-2];for(let ae=j.length-3,Ee=0;ae>=0;ae-=3)ie[Ee++]=j[ae],ie[Ee++]=j[ae+1]-oe,ie[Ee++]=j[ae+2]-oe,ie[Ee++]=Ee;L.push(new Jf(ie,j[2]-oe,r)),F.push(oe-R)}}function w(R,D){return(L,F,j)=>{let B=0,W=L.length-1,ie,oe;if(W>=0&&(ie=L[W])instanceof ur){if(!W&&ie.type==R&&ie.length==j)return ie;(oe=ie.prop(Ct.lookAhead))&&(B=F[W]+ie.length+oe)}return _(R,L,F,j,B,D)}}function O(R,D,L,F,j,B,W,ie,oe){let ae=[],Ee=[];for(;R.length>F;)ae.push(R.pop()),Ee.push(D.pop()+L-j);R.push(_(r.types[W],ae,Ee,B-j,ie-B,oe)),D.push(j-L)}function _(R,D,L,F,j,B,W){if(B){let ie=[Ct.contextHash,B];W=W?[ie].concat(W):[ie]}if(j>25){let ie=[Ct.lookAhead,j];W=W?[ie].concat(W):[ie]}return new ur(R,D,L,F,W)}function x(R,D){let L=a.fork(),F=0,j=0,B=0,W=L.end-n,ie={size:0,start:0,skip:0};e:for(let oe=L.pos-R;L.pos>oe;){let ae=L.size;if(L.id==D&&ae>=0){ie.size=F,ie.start=j,ie.skip=B,B+=4,F+=4,L.next();continue}let Ee=L.pos-ae;if(ae<0||Ee<oe||L.start<W)break;let ue=L.id>=o?4:0,he=L.start;for(L.next();L.pos>Ee;){if(L.size<0)if(L.size==-3)ue+=4;else break e;else L.id>=o&&(ue+=4);L.next()}j=he,F+=ae,B+=ue}return(D<0||F==R)&&(ie.size=F,ie.start=j,ie.skip=B),ie.size>4?ie:void 0}function T(R,D,L){let{id:F,start:j,end:B,size:W}=a;if(a.next(),W>=0&&F<o){let ie=L;if(W>4){let oe=a.pos-(W-4);for(;a.pos>oe;)L=T(R,D,L)}D[--L]=ie,D[--L]=B-R,D[--L]=j-R,D[--L]=F}else W==-3?u=F:W==-4&&(p=F);return L}let E=[],k=[];for(;a.pos>0;)m(t.start||0,t.bufferStart||0,E,k,-1,0);let M=(e=t.length)!==null&&e!==void 0?e:E.length?k[0]+E[0].length:0;return new ur(l[t.topID],E.reverse(),k.reverse(),M)}const Xie=new WeakMap;function NM(t,e){if(!t.isAnonymous||e instanceof Jf||e.type!=t)return 1;let i=Xie.get(e);if(i==null){i=1;for(let r of e.children){if(r.type!=t||!(r instanceof ur)){i=1;break}i+=NM(t,r)}Xie.set(e,i)}return i}function T7(t,e,i,r,n,s,o,a,l){let u=0;for(let O=r;O<n;O++)u+=NM(t,e[O]);let p=Math.ceil(u*1.5/8),m=[],g=[];function w(O,_,x,T,E){for(let k=x;k<T;){let M=k,R=_[k],D=NM(t,O[k]);for(k++;k<T;k++){let L=NM(t,O[k]);if(D+L>=p)break;D+=L}if(k==M+1){if(D>p){let L=O[M];w(L.children,L.positions,0,L.children.length,_[M]+E);continue}m.push(O[M])}else{let L=_[k-1]+O[k-1].length-R;m.push(T7(t,O,_,M,k,R,L,null,l))}g.push(R+E-s)}}return w(e,i,r,n,0),(a||l)(m,g,o)}class jve{constructor(){this.map=new WeakMap}setBuffer(e,i,r){let n=this.map.get(e);n||this.map.set(e,n=new Map),n.set(i,r)}getBuffer(e,i){let r=this.map.get(e);return r&&r.get(i)}set(e,i){e instanceof mc?this.setBuffer(e.context.buffer,e.index,i):e instanceof xs&&this.map.set(e.tree,i)}get(e){return e instanceof mc?this.getBuffer(e.context.buffer,e.index):e instanceof xs?this.map.get(e.tree):void 0}cursorSet(e,i){e.buffer?this.setBuffer(e.buffer.buffer,e.index,i):this.map.set(e.tree,i)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class md{constructor(e,i,r,n,s=!1,o=!1){this.from=e,this.to=i,this.tree=r,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,i=[],r=!1){let n=[new md(0,e.length,e,0,!1,r)];for(let s of i)s.to>e.length&&n.push(s);return n}static applyChanges(e,i,r=128){if(!i.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let p=a<i.length?i[a]:null,m=p?p.fromA:1e9;if(m-l>=r)for(;o&&o.from<m;){let g=o;if(l>=g.from||m<=g.to||u){let w=Math.max(g.from,l)-u,O=Math.min(g.to,m)-u;g=w>=O?null:new md(w,O,g.tree,g.offset+u,a>0,!!p)}if(g&&n.push(g),o.to>m)break;o=s<e.length?e[s++]:null}if(!p)break;l=p.toA,u=p.toA-p.toB}return n}}class zve{startParse(e,i,r){return typeof e=="string"&&(e=new oit(e)),r=r?r.length?r.map(n=>new nl(n.from,n.to)):[new nl(0,0)]:[new nl(0,e.length)],this.createParse(e,i||[],r)}parse(e,i,r){let n=this.startParse(e,i,r);for(;;){let s=n.advance();if(s)return s}}}class oit{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,i){return this.string.slice(e,i)}}function ait(t){return(e,i,r,n)=>new uit(e,t,i,r,n)}class Yie{constructor(e,i,r,n,s){this.parser=e,this.parse=i,this.overlay=r,this.target=n,this.from=s}}function Jie(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class lit{constructor(e,i,r,n,s,o,a){this.parser=e,this.predicate=i,this.mounts=r,this.index=n,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const J6=new Ct({perNode:!0});class uit{constructor(e,i,r,n,s){this.nest=i,this.input=r,this.fragments=n,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let n of this.inner)n.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new ur(r.type,r.children,r.positions,r.length,r.propValues.concat([[J6,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],i=e.parse.advance();if(i){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[Ct.mounted.id]=new P$(i,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].from<e&&(e=Math.min(e,this.inner[i].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].parse.stopAt(e)}startInner(){let e=new dit(this.fragments),i=null,r=null,n=new PI(new xs(this.baseTree,this.ranges[0].from,0,null),Ri.IncludeAnonymous|Ri.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&n.from>=this.stoppedAt)a=!1;else if(e.hasNode(n)){if(i){let u=i.mounts.find(p=>p.frag.from<=n.from&&p.frag.to>=n.to&&p.mount.overlay);if(u)for(let p of u.mount.overlay){let m=p.from+u.pos,g=p.to+u.pos;m>=n.from&&g<=n.to&&!i.ranges.some(w=>w.from<g&&w.to>m)&&i.ranges.push({from:m,to:g})}}a=!1}else if(r&&(o=cit(r.ranges,n.from,n.to)))a=o!=2;else if(!n.type.isAnonymous&&(s=this.nest(n,this.input))&&(n.from<n.to||!s.overlay)){n.tree||hit(n);let u=e.findMounts(n.from,s.parser);if(typeof s.overlay=="function")i=new lit(s.parser,s.overlay,u,this.inner.length,n.from,n.tree,i);else{let p=tre(this.ranges,s.overlay||(n.from<n.to?[new nl(n.from,n.to)]:[]));p.length&&Jie(p),(p.length||!s.overlay)&&this.inner.push(new Yie(s.parser,p.length?s.parser.startParse(this.input,ire(u,p),p):s.parser.startParse(""),s.overlay?s.overlay.map(m=>new nl(m.from-n.from,m.to-n.from)):null,n.tree,p.length?p[0].from:n.from)),s.overlay?p.length&&(r={ranges:p,depth:0,prev:r}):a=!1}}else if(i&&(l=i.predicate(n))&&(l===!0&&(l=new nl(n.from,n.to)),l.from<l.to)){let u=i.ranges.length-1;u>=0&&i.ranges[u].to==l.from?i.ranges[u]={from:i.ranges[u].from,to:l.to}:i.ranges.push(l)}if(a&&n.firstChild())i&&i.depth++,r&&r.depth++;else for(;!n.nextSibling();){if(!n.parent())break e;if(i&&!--i.depth){let u=tre(this.ranges,i.ranges);u.length&&(Jie(u),this.inner.splice(i.index,0,new Yie(i.parser,i.parser.startParse(this.input,ire(i.mounts,u),u),i.ranges.map(p=>new nl(p.from-i.start,p.to-i.start)),i.target,u[0].from))),i=i.prev}r&&!--r.depth&&(r=r.prev)}}}}function cit(t,e,i){for(let r of t){if(r.from>=i)break;if(r.to>e)return r.from<=e&&r.to>=i?2:1}return 0}function Kie(t,e,i,r,n,s){if(e<i){let o=t.buffer[e+1];r.push(t.slice(e,i,o)),n.push(o-s)}}function hit(t){let{node:e}=t,i=[],r=e.context.buffer;do i.push(t.index),t.parent();while(!t.tree);let n=t.tree,s=n.children.indexOf(r),o=n.children[s],a=o.buffer,l=[s];function u(p,m,g,w,O,_){let x=i[_],T=[],E=[];Kie(o,p,x,T,E,w);let k=a[x+1],M=a[x+2];l.push(T.length);let R=_?u(x+4,a[x+3],o.set.types[a[x]],k,M-k,_-1):e.toTree();return T.push(R),E.push(k-w),Kie(o,a[x+3],m,T,E,w),new ur(g,T,E,O)}n.children[s]=u(0,a.length,eo.none,0,o.length,i.length-1);for(let p of l){let m=t.tree.children[p],g=t.tree.positions[p];t.yield(new xs(m,g+t.from,p,t._tree))}}class ere{constructor(e,i){this.offset=i,this.done=!1,this.cursor=e.cursor(Ri.IncludeAnonymous|Ri.IgnoreMounts)}moveTo(e){let{cursor:i}=this,r=e-this.offset;for(;!this.done&&i.from<r;)i.to>=e&&i.enter(r,1,Ri.IgnoreOverlays|Ri.ExcludeBuffers)||i.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let i=this.cursor.tree;;){if(i==e.tree)return!0;if(i.children.length&&i.positions[0]==0&&i.children[0]instanceof ur)i=i.children[0];else break}return!1}}let dit=class{constructor(e){var i;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(i=r.tree.prop(J6))!==null&&i!==void 0?i:r.to,this.inner=new ere(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let i=this.curFrag=this.fragments[this.fragI];this.curTo=(e=i.tree.prop(J6))!==null&&e!==void 0?e:i.to,this.inner=new ere(i.tree,-i.offset)}}findMounts(e,i){var r;let n=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(Ct.mounted);if(o&&o.parser==i)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&n.push({frag:l,pos:s.from-l.offset,mount:o})}}}return n}};function tre(t,e){let i=null,r=e;for(let n=1,s=0;n<t.length;n++){let o=t[n-1].to,a=t[n].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(i||(r=i=e.slice()),l.from<o?(i[s]=new nl(l.from,o),l.to>a&&i.splice(s+1,0,new nl(a,l.to))):l.to>a?i[s--]=new nl(a,l.to):i.splice(s--,1))}}return r}function pit(t,e,i,r){let n=0,s=0,o=!1,a=!1,l=-1e9,u=[];for(;;){let p=n==t.length?1e9:o?t[n].to:t[n].from,m=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let g=Math.max(l,i),w=Math.min(p,m,r);g<w&&u.push(new nl(g,w))}if(l=Math.min(p,m),l==1e9)break;p==l&&(o?(o=!1,n++):o=!0),m==l&&(a?(a=!1,s++):a=!0)}return u}function ire(t,e){let i=[];for(let{pos:r,mount:n,frag:s}of t){let o=r+(n.overlay?n.overlay[0].from:0),a=o+n.tree.length,l=Math.max(s.from,o),u=Math.min(s.to,a);if(n.overlay){let p=n.overlay.map(g=>new nl(g.from+r,g.to+r)),m=pit(e,p,l,u);for(let g=0,w=l;;g++){let O=g==m.length,_=O?u:m[g].from;if(_>w&&i.push(new md(w,_,n.tree,-o,s.from>=w||s.openStart,s.to<=_||s.openEnd)),O)break;w=m[g].to}}else i.push(new md(l,u,n.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return i}let fit=0;class Ya{constructor(e,i,r,n){this.name=e,this.set=i,this.base=r,this.modified=n,this.id=fit++}toString(){let{name:e}=this;for(let i of this.modified)i.name&&(e=`${i.name}(${e})`);return e}static define(e,i){let r=typeof e=="string"?e:"?";if(e instanceof Ya&&(i=e),i!=null&&i.base)throw new Error("Can not derive from a modified tag");let n=new Ya(r,[],null,[]);if(n.set.push(n),i)for(let s of i.set)n.set.push(s);return n}static defineModifier(e){let i=new RI(e);return r=>r.modified.indexOf(i)>-1?r:RI.get(r.base||r,r.modified.concat(i).sort((n,s)=>n.id-s.id))}}let mit=0;class RI{constructor(e){this.name=e,this.instances=[],this.id=mit++}static get(e,i){if(!i.length)return e;let r=i[0].instances.find(a=>a.base==e&&yit(i,a.modified));if(r)return r;let n=[],s=new Ya(e.name,n,e,i);for(let a of i)a.instances.push(s);let o=git(i);for(let a of e.set)if(!a.modified.length)for(let l of o)n.push(RI.get(a,l));return s}}function yit(t,e){return t.length==e.length&&t.every((i,r)=>i==e[r])}function git(t){let e=[[]];for(let i=0;i<t.length;i++)for(let r=0,n=e.length;r<n;r++)e.push(e[r].concat(t[i]));return e.sort((i,r)=>r.length-i.length)}function QR(t){let e=Object.create(null);for(let i in t){let r=t[i];Array.isArray(r)||(r=[r]);for(let n of i.split(" "))if(n){let s=[],o=2,a=n;for(let m=0;;){if(a=="..."&&m>0&&m+3==n.length){o=1;break}let g=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!g)throw new RangeError("Invalid path: "+n);if(s.push(g[0]=="*"?"":g[0][0]=='"'?JSON.parse(g[0]):g[0]),m+=g[0].length,m==n.length)break;let w=n[m++];if(m==n.length&&w=="!"){o=0;break}if(w!="/")throw new RangeError("Invalid path: "+n);a=n.slice(m)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+n);let p=new LI(r,o,l>0?s.slice(0,l):null);e[u]=p.sort(e[u])}}return Uve.add(e)}const Uve=new Ct;class LI{constructor(e,i,r,n){this.tags=e,this.mode=i,this.context=r,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}LI.empty=new LI([],2,null);function Qve(t,e){let i=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))i[s.tag.id]=s.class;else for(let o of s.tag)i[o.id]=s.class;let{scope:r,all:n=null}=e||{};return{style:s=>{let o=n;for(let a of s)for(let l of a.set){let u=i[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function vit(t,e){let i=null;for(let r of t){let n=r.style(e);n&&(i=i?i+" "+n:n)}return i}function bit(t,e,i,r=0,n=t.length){let s=new wit(r,Array.isArray(e)?e:[e],i);s.highlightRange(t.cursor(),r,n,"",s.highlighters),s.flush(n)}class wit{constructor(e,i,r){this.at=e,this.highlighters=i,this.span=r,this.class=""}startSpan(e,i){i!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=i)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,i,r,n,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=i)return;o.isTop&&(s=this.highlighters.filter(w=>!w.scope||w.scope(o)));let u=n,p=Oit(e)||LI.empty,m=vit(s,p.tags);if(m&&(u&&(u+=" "),u+=m,p.mode==1&&(n+=(n?" ":"")+m)),this.startSpan(Math.max(i,a),u),p.opaque)return;let g=e.tree&&e.tree.prop(Ct.mounted);if(g&&g.overlay){let w=e.node.enter(g.overlay[0].from+a,1),O=this.highlighters.filter(x=>!x.scope||x.scope(g.tree.type)),_=e.firstChild();for(let x=0,T=a;;x++){let E=x<g.overlay.length?g.overlay[x]:null,k=E?E.from+a:l,M=Math.max(i,T),R=Math.min(r,k);if(M<R&&_)for(;e.from<R&&(this.highlightRange(e,M,R,n,s),this.startSpan(Math.min(R,e.to),u),!(e.to>=k||!e.nextSibling())););if(!E||k>r)break;T=E.to+a,T>i&&(this.highlightRange(w.cursor(),Math.max(i,E.from+a),Math.min(r,T),"",O),this.startSpan(Math.min(r,T),u))}_&&e.parent()}else if(e.firstChild()){g&&(n="");do if(!(e.to<=i)){if(e.from>=r)break;this.highlightRange(e,i,r,n,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function Oit(t){let e=t.type.prop(Uve);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Ie=Ya.define,Dk=Ie(),tf=Ie(),rre=Ie(tf),nre=Ie(tf),rf=Ie(),Vk=Ie(rf),AD=Ie(rf),tc=Ie(),Wm=Ie(tc),Iu=Ie(),Pu=Ie(),K6=Ie(),vS=Ie(K6),Fk=Ie(),N={comment:Dk,lineComment:Ie(Dk),blockComment:Ie(Dk),docComment:Ie(Dk),name:tf,variableName:Ie(tf),typeName:rre,tagName:Ie(rre),propertyName:nre,attributeName:Ie(nre),className:Ie(tf),labelName:Ie(tf),namespace:Ie(tf),macroName:Ie(tf),literal:rf,string:Vk,docString:Ie(Vk),character:Ie(Vk),attributeValue:Ie(Vk),number:AD,integer:Ie(AD),float:Ie(AD),bool:Ie(rf),regexp:Ie(rf),escape:Ie(rf),color:Ie(rf),url:Ie(rf),keyword:Iu,self:Ie(Iu),null:Ie(Iu),atom:Ie(Iu),unit:Ie(Iu),modifier:Ie(Iu),operatorKeyword:Ie(Iu),controlKeyword:Ie(Iu),definitionKeyword:Ie(Iu),moduleKeyword:Ie(Iu),operator:Pu,derefOperator:Ie(Pu),arithmeticOperator:Ie(Pu),logicOperator:Ie(Pu),bitwiseOperator:Ie(Pu),compareOperator:Ie(Pu),updateOperator:Ie(Pu),definitionOperator:Ie(Pu),typeOperator:Ie(Pu),controlOperator:Ie(Pu),punctuation:K6,separator:Ie(K6),bracket:vS,angleBracket:Ie(vS),squareBracket:Ie(vS),paren:Ie(vS),brace:Ie(vS),content:tc,heading:Wm,heading1:Ie(Wm),heading2:Ie(Wm),heading3:Ie(Wm),heading4:Ie(Wm),heading5:Ie(Wm),heading6:Ie(Wm),contentSeparator:Ie(tc),list:Ie(tc),quote:Ie(tc),emphasis:Ie(tc),strong:Ie(tc),link:Ie(tc),monospace:Ie(tc),strikethrough:Ie(tc),inserted:Ie(),deleted:Ie(),changed:Ie(),invalid:Ie(),meta:Fk,documentMeta:Ie(Fk),annotation:Ie(Fk),processingInstruction:Ie(Fk),definition:Ya.defineModifier("definition"),constant:Ya.defineModifier("constant"),function:Ya.defineModifier("function"),standard:Ya.defineModifier("standard"),local:Ya.defineModifier("local"),special:Ya.defineModifier("special")};for(let t in N){let e=N[t];e instanceof Ya&&(e.name=t)}Qve([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var ID;const Zb=new Ct;function Bve(t){return ze.define({combine:t?e=>e.concat(t):void 0})}const E7=new Ct;class cu{constructor(e,i,r=[],n=""){this.data=e,this.name=n,zt.prototype.hasOwnProperty("tree")||Object.defineProperty(zt.prototype,"tree",{get(){return $r(this)}}),this.parser=i,this.extension=[Kf.of(this),zt.languageData.of((s,o,a)=>{let l=sre(s,o,a),u=l.type.prop(Zb);if(!u)return[];let p=s.facet(u),m=l.type.prop(E7);if(m){let g=l.resolve(o-l.from,a);for(let w of m)if(w.test(g,s)){let O=s.facet(w.facet);return w.type=="replace"?O:O.concat(p)}}return p})].concat(r)}isActiveAt(e,i,r=-1){return sre(e,i,r).type.prop(Zb)==this.data}findRegions(e){let i=e.facet(Kf);if((i==null?void 0:i.data)==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let r=[],n=(s,o)=>{if(s.prop(Zb)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Ct.mounted);if(a){if(a.tree.prop(Zb)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(n(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof ur&&n(u,s.positions[l]+o)}};return n($r(e),0),r}get allowsNesting(){return!0}}cu.setState=xt.define();function sre(t,e,i){let r=t.facet(Kf),n=$r(t).topNode;if(!r||r.allowsNesting)for(let s=n;s;s=s.enter(e,i,Ri.ExcludeBuffers))s.type.isTop&&(n=s);return n}class Xw extends cu{constructor(e,i,r){super(e,i,[],r),this.parser=i}static define(e){let i=Bve(e.languageData);return new Xw(i,e.parser.configure({props:[Zb.add(r=>r.isTop?i:void 0)]}),e.name)}configure(e,i){return new Xw(this.data,this.parser.configure(e),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function $r(t){let e=t.field(cu.state,!1);return e?e.tree:ur.empty}class Sit{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,i){let r=this.cursorPos-this.string.length;return e<r||i>=this.cursorPos?this.doc.sliceString(e,i):this.string.slice(e-r,i-r)}}let bS=null;class NI{constructor(e,i,r=[],n,s,o,a,l){this.parser=e,this.state=i,this.fragments=r,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,i,r){return new NI(e,i,[],ur.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Sit(this.state.doc),this.fragments)}work(e,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=ur.empty&&this.isDone(i??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(md.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(i??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,i;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=e,this.tree=i,this.fragments=this.withoutTempSkipped(md.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let i=bS;bS=this;try{return e()}finally{bS=i}}withoutTempSkipped(e){for(let i;i=this.tempSkipped.pop();)e=ore(e,i.from,i.to);return e}changes(e,i){let{fragments:r,tree:n,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,p,m,g)=>l.push({fromA:u,toA:p,fromB:m,toB:g})),r=md.applyChanges(r,l),n=ur.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let p=e.mapPos(u.from,1),m=e.mapPos(u.to,-1);p<m&&a.push({from:p,to:m})}}}return new NI(this.parser,i,r,n,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let i=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:n,to:s}=this.skipped[r];n<e.to&&s>e.from&&(this.fragments=ore(this.fragments,n,s),this.skipped.splice(r--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,i){this.skipped.push({from:e,to:i})}static getSkippingParser(e){return new class extends zve{createParse(i,r,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let l=bS;if(l){for(let u of n)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new ur(eo.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let i=this.fragments;return this.treeLen>=e&&i.length&&i[0].from==0&&i[0].to>=e}static get(){return bS}}function ore(t,e,i){return md.applyChanges(t,[{fromA:e,toA:i,fromB:e,toB:i}])}class Yw{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,r)||i.takeTree(),new Yw(i)}static init(e){let i=Math.min(3e3,e.doc.length),r=NI.create(e.facet(Kf).parser,e,{from:0,to:i});return r.work(20,i)||r.takeTree(),new Yw(r)}}cu.state=Nn.define({create:Yw.init,update(t,e){for(let i of e.effects)if(i.is(cu.setState))return i.value;return e.startState.facet(Kf)!=e.state.facet(Kf)?Yw.init(e.state):t.apply(e)}});let qve=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(qve=t=>{let e=-1,i=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const PD=typeof navigator<"u"&&(!((ID=navigator.scheduling)===null||ID===void 0)&&ID.isInputPending)?()=>navigator.scheduling.isInputPending():null,_it=Nr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let i=this.view.state.field(cu.state).context;(i.updateViewport(e.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:e}=this.view,i=e.field(cu.state);(i.tree!=i.context.tree||!i.context.isDone(e.doc.length))&&(this.working=qve(this.work))}work(e){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:n}}=this.view,s=r.field(cu.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!PD?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<n&&r.doc.length>n+1e3,l=s.context.work(()=>PD&&PD()||Date.now()>o,n+(a?0:1e5));this.chunkBudget-=Date.now()-i,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:cu.setState.of(new Yw(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(i=>Eo(this.view.state,i)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Kf=ze.define({combine(t){return t.length?t[0]:null},enables:t=>[cu.state,_it,Pe.contentAttributes.compute([t],e=>{let i=e.facet(t);return i&&i.name?{"data-language":i.name}:{}})]});class k7{constructor(e,i=[]){this.language=e,this.support=i,this.extension=[e,i]}}const xit=ze.define(),G2=ze.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(i=>i!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function DI(t){let e=t.facet(G2);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function L$(t,e){let i="",r=t.tabSize,n=t.facet(G2)[0];if(n=="	"){for(;e>=r;)i+="	",e-=r;n=" "}for(let s=0;s<e;s++)i+=n;return i}function C7(t,e){t instanceof zt&&(t=new BR(t));for(let r of t.state.facet(xit)){let n=r(t,e);if(n!==void 0)return n}let i=$r(t.state);return i.length>=e?$it(t,i,e):null}class BR{constructor(e,i={}){this.state=e,this.options=i,this.unit=DI(e)}lineAt(e,i=1){let r=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:s}=this.options;return n!=null&&n>=r.from&&n<=r.to?s&&n==e?{text:"",from:e}:(i<0?n<e:n<=e)?{text:r.text.slice(n-r.from),from:n}:{text:r.text.slice(0,n-r.from),from:r.from}:r}textAfterPos(e,i=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:n}=this.lineAt(e,i);return r.slice(e-n,Math.min(r.length,e+100-n))}column(e,i=1){let{text:r,from:n}=this.lineAt(e,i),s=this.countColumn(r,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,i=e.length){return jO(e,this.state.tabSize,i)}lineIndent(e,i=1){let{text:r,from:n}=this.lineAt(e,i),s=this.options.overrideIndentation;if(s){let o=s(n);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const qR=new Ct;function $it(t,e,i){let r=e.resolveStack(i),n=e.resolveInner(i,-1).resolve(i,0).enterUnfinishedNodesBefore(i);if(n!=r.node){let s=[];for(let o=n;o&&!(o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return Gve(r,t,i)}function Gve(t,e,i){for(let r=t;r;r=r.next){let n=Eit(r.node);if(n)return n(M7.create(e,i,r))}return 0}function Tit(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Eit(t){let e=t.type.prop(qR);if(e)return e;let i=t.firstChild,r;if(i&&(r=i.type.prop(Ct.closedBy))){let n=t.lastChild,s=n&&r.indexOf(n.name)>-1;return o=>Zve(o,!0,1,void 0,s&&!Tit(o)?n.from:void 0)}return t.parent==null?kit:null}function kit(){return 0}class M7 extends BR{constructor(e,i,r){super(e.state,e.options),this.base=e,this.pos=i,this.context=r}get node(){return this.context.node}static create(e,i,r){return new M7(e,i,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let i=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(i.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Cit(r,e))break;i=this.state.doc.lineAt(r.from)}return this.lineIndent(i.from)}continue(){return Gve(this.context.next,this.base,this.pos)}}function Cit(t,e){for(let i=e;i;i=i.parent)if(t==i)return!0;return!1}function Mit(t){let e=t.node,i=e.childAfter(e.from),r=e.lastChild;if(!i)return null;let n=t.options.simulateBreak,s=t.state.doc.lineAt(i.from),o=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let a=i.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(i.to-s.from))[0].length;return{from:i.from,to:i.to+u}}a=l.to}}function Ait({closing:t,align:e=!0,units:i=1}){return r=>Zve(r,e,i,t)}function Zve(t,e,i,r,n){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||n==t.pos+o,l=e?Mit(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*i)}const Iit=t=>t.baseIndent;function DM({except:t,units:e=1}={}){return i=>{let r=t&&t.test(i.textAfter);return i.baseIndent+(r?0:e*i.unit)}}const Pit=200;function Rit(){return zt.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let i=t.newDoc,{head:r}=t.newSelection.main,n=i.lineAt(r);if(r>n.from+Pit)return t;let s=i.sliceString(n.from,r);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let p=o.doc.lineAt(u);if(p.from==a)continue;a=p.from;let m=C7(o,p.from);if(m==null)continue;let g=/^\s*/.exec(p.text)[0],w=L$(o,m);g!=w&&l.push({from:p.from,to:p.from+g.length,insert:w})}return l.length?[t,{changes:l,sequential:!0}]:t})}const Lit=ze.define(),GR=new Ct;function Hve(t){let e=t.firstChild,i=t.lastChild;return e&&e.to<i.from?{from:e.to,to:i.type.isError?t.to:i.from}:null}function Nit(t,e,i){let r=$r(t);if(r.length<i)return null;let n=r.resolveStack(i,1),s=null;for(let o=n;o;o=o.next){let a=o.node;if(a.to<=i||a.from>i)continue;if(s&&a.from<e)break;let l=a.type.prop(GR);if(l&&(a.to<r.length-50||r.length==t.doc.length||!Dit(a))){let u=l(a,t);u&&u.from<=i&&u.from>=e&&u.to>i&&(s=u)}}return s}function Dit(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function VI(t,e,i){for(let r of t.facet(Lit)){let n=r(t,e,i);if(n)return n}return Nit(t,e,i)}function Wve(t,e){let i=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return i>=r?void 0:{from:i,to:r}}const ZR=xt.define({map:Wve}),Z2=xt.define({map:Wve});function Xve(t){let e=[];for(let{head:i}of t.state.selection.ranges)e.some(r=>r.from<=i&&r.to>=i)||e.push(t.lineBlockAt(i));return e}const r0=Nn.define({create(){return st.none},update(t,e){t=t.map(e.changes);for(let i of e.effects)if(i.is(ZR)&&!Vit(t,i.value.from,i.value.to)){let{preparePlaceholder:r}=e.state.facet(Kve),n=r?st.replace({widget:new qit(r(e.state,i.value))}):are;t=t.update({add:[n.range(i.value.from,i.value.to)]})}else i.is(Z2)&&(t=t.update({filter:(r,n)=>i.value.from!=r||i.value.to!=n,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:r}=e.selection.main;t.between(r,r,(n,s)=>{n<r&&s>r&&(i=!0)}),i&&(t=t.update({filterFrom:r,filterTo:r,filter:(n,s)=>s<=r||n>=r}))}return t},provide:t=>Pe.decorations.from(t),toJSON(t,e){let i=[];return t.between(0,e.doc.length,(r,n)=>{i.push(r,n)}),i},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<t.length;){let r=t[i++],n=t[i++];if(typeof r!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(are.range(r,n))}return st.set(e,!0)}});function FI(t,e,i){var r;let n=null;return(r=t.field(r0,!1))===null||r===void 0||r.between(e,i,(s,o)=>{(!n||n.from>s)&&(n={from:s,to:o})}),n}function Vit(t,e,i){let r=!1;return t.between(e,e,(n,s)=>{n==e&&s==i&&(r=!0)}),r}function Yve(t,e){return t.field(r0,!1)?e:e.concat(xt.appendConfig.of(ebe()))}const Fit=t=>{for(let e of Xve(t)){let i=VI(t.state,e.from,e.to);if(i)return t.dispatch({effects:Yve(t.state,[ZR.of(i),Jve(t,i)])}),!0}return!1},jit=t=>{if(!t.state.field(r0,!1))return!1;let e=[];for(let i of Xve(t)){let r=FI(t.state,i.from,i.to);r&&e.push(Z2.of(r),Jve(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Jve(t,e,i=!0){let r=t.state.doc.lineAt(e.from).number,n=t.state.doc.lineAt(e.to).number;return Pe.announce.of(`${t.state.phrase(i?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${n}.`)}const zit=t=>{let{state:e}=t,i=[];for(let r=0;r<e.doc.length;){let n=t.lineBlockAt(r),s=VI(e,n.from,n.to);s&&i.push(ZR.of(s)),r=(s?t.lineBlockAt(s.to):n).to+1}return i.length&&t.dispatch({effects:Yve(t.state,i)}),!!i.length},Uit=t=>{let e=t.state.field(r0,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,t.state.doc.length,(r,n)=>{i.push(Z2.of({from:r,to:n}))}),t.dispatch({effects:i}),!0},Qit=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Fit},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:jit},{key:"Ctrl-Alt-[",run:zit},{key:"Ctrl-Alt-]",run:Uit}],Bit={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Kve=ze.define({combine(t){return Fc(t,Bit)}});function ebe(t){return[r0,Hit]}function tbe(t,e){let{state:i}=t,r=i.facet(Kve),n=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=FI(t.state,a.from,a.to);l&&t.dispatch({effects:Z2.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,n,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",i.phrase("folded code")),s.title=i.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=n,s}const are=st.replace({widget:new class extends jc{toDOM(t){return tbe(t,null)}}});class qit extends jc{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return tbe(e,this.value)}}const Git={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class RD extends _d{constructor(e,i){super(),this.config=e,this.open=i}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=e.state.phrase(this.open?"Fold line":"Unfold line"),i}}function Zit(t={}){let e=Object.assign(Object.assign({},Git),t),i=new RD(e,!0),r=new RD(e,!1),n=Nr.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Kf)!=o.state.facet(Kf)||o.startState.field(r0,!1)!=o.state.field(r0,!1)||$r(o.startState)!=$r(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Od;for(let l of o.viewportLineBlocks){let u=FI(o.state,l.from,l.to)?r:VI(o.state,l.from,l.to)?i:null;u&&a.add(l.from,l.from,u)}return a.finish()}}),{domEventHandlers:s}=e;return[n,Qtt({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(n))===null||a===void 0?void 0:a.markers)||Zt.empty},initialSpacer(){return new RD(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let u=FI(o.state,a.from,a.to);if(u)return o.dispatch({effects:Z2.of(u)}),!0;let p=VI(o.state,a.from,a.to);return p?(o.dispatch({effects:ZR.of(p)}),!0):!1}})}),ebe()]}const Hit=Pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class zO{constructor(e,i){this.specs=e;let r;function n(a){let l=Wf.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof i.all=="string"?i.all:i.all?n(i.all):void 0,o=i.scope;this.scope=o instanceof cu?a=>a.prop(Zb)==o.data:o?a=>a==o:void 0,this.style=Qve(e.map(a=>({tag:a.tag,class:a.class||n(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new Wf(r):null,this.themeType=i.themeType}static define(e,i){return new zO(e,i||{})}}const eU=ze.define(),ibe=ze.define({combine(t){return t.length?[t[0]]:null}});function LD(t){let e=t.facet(eU);return e.length?e:t.facet(ibe)}function A7(t,e){let i=[Xit],r;return t instanceof zO&&(t.module&&i.push(Pe.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?i.push(ibe.of(t)):r?i.push(eU.computeN([Pe.darkTheme],n=>n.facet(Pe.darkTheme)==(r=="dark")?[t]:[])):i.push(eU.of(t)),i}class Wit{constructor(e){this.markCache=Object.create(null),this.tree=$r(e.state),this.decorations=this.buildDeco(e,LD(e.state)),this.decoratedTo=e.viewport.to}update(e){let i=$r(e.state),r=LD(e.state),n=r!=LD(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);i.length<s.to&&!n&&i.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(i!=this.tree||e.viewportChanged||n)&&(this.tree=i,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,i){if(!i||!this.tree.length)return st.none;let r=new Od;for(let{from:n,to:s}of e.visibleRanges)bit(this.tree,i,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=st.mark({class:l})))},n,s);return r.finish()}}const Xit=dm.high(Nr.fromClass(Wit,{decorations:t=>t.decorations})),Yit=zO.define([{tag:N.meta,color:"#404740"},{tag:N.link,textDecoration:"underline"},{tag:N.heading,textDecoration:"underline",fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strong,fontWeight:"bold"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.keyword,color:"#708"},{tag:[N.atom,N.bool,N.url,N.contentSeparator,N.labelName],color:"#219"},{tag:[N.literal,N.inserted],color:"#164"},{tag:[N.string,N.deleted],color:"#a11"},{tag:[N.regexp,N.escape,N.special(N.string)],color:"#e40"},{tag:N.definition(N.variableName),color:"#00f"},{tag:N.local(N.variableName),color:"#30a"},{tag:[N.typeName,N.namespace],color:"#085"},{tag:N.className,color:"#167"},{tag:[N.special(N.variableName),N.macroName],color:"#256"},{tag:N.definition(N.propertyName),color:"#00c"},{tag:N.comment,color:"#940"},{tag:N.invalid,color:"#f00"}]),Jit=Pe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),rbe=1e4,nbe="()[]{}",sbe=ze.define({combine(t){return Fc(t,{afterCursor:!0,brackets:nbe,maxScanDistance:rbe,renderMatch:trt})}}),Kit=st.mark({class:"cm-matchingBracket"}),ert=st.mark({class:"cm-nonmatchingBracket"});function trt(t){let e=[],i=t.matched?Kit:ert;return e.push(i.range(t.start.from,t.start.to)),t.end&&e.push(i.range(t.end.from,t.end.to)),e}const irt=Nn.define({create(){return st.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let i=[],r=e.state.facet(sbe);for(let n of e.state.selection.ranges){if(!n.empty)continue;let s=yc(e.state,n.head,-1,r)||n.head>0&&yc(e.state,n.head-1,1,r)||r.afterCursor&&(yc(e.state,n.head,1,r)||n.head<e.state.doc.length&&yc(e.state,n.head+1,-1,r));s&&(i=i.concat(r.renderMatch(s,e.state)))}return st.set(i,!0)},provide:t=>Pe.decorations.from(t)}),rrt=[irt,Jit];function nrt(t={}){return[sbe.of(t),rrt]}const obe=new Ct;function tU(t,e,i){let r=t.prop(e<0?Ct.openedBy:Ct.closedBy);if(r)return r;if(t.name.length==1){let n=i.indexOf(t.name);if(n>-1&&n%2==(e<0?1:0))return[i[n+e]]}return null}function iU(t){let e=t.type.prop(obe);return e?e(t.node):t}function yc(t,e,i,r={}){let n=r.maxScanDistance||rbe,s=r.brackets||nbe,o=$r(t),a=o.resolveInner(e,i);for(let l=a;l;l=l.parent){let u=tU(l.type,i,s);if(u&&l.from<l.to){let p=iU(l);if(p&&(i>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return srt(t,e,i,l,p,u,s)}}return ort(t,e,i,o,a.type,n,s)}function srt(t,e,i,r,n,s,o){let a=r.parent,l={from:n.from,to:n.to},u=0,p=a==null?void 0:a.cursor();if(p&&(i<0?p.childBefore(r.from):p.childAfter(r.to)))do if(i<0?p.to<=r.from:p.from>=r.to){if(u==0&&s.indexOf(p.type.name)>-1&&p.from<p.to){let m=iU(p);return{start:l,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(tU(p.type,i,o))u++;else if(tU(p.type,-i,o)){if(u==0){let m=iU(p);return{start:l,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}u--}}while(i<0?p.prevSibling():p.nextSibling());return{start:l,matched:!1}}function ort(t,e,i,r,n,s,o){let a=i<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=i>0)return null;let u={from:i<0?e-1:e,to:i>0?e+1:e},p=t.doc.iterRange(e,i>0?t.doc.length:0),m=0;for(let g=0;!p.next().done&&g<=s;){let w=p.value;i<0&&(g+=w.length);let O=e+g*i;for(let _=i>0?0:w.length-1,x=i>0?w.length:-1;_!=x;_+=i){let T=o.indexOf(w[_]);if(!(T<0||r.resolveInner(O+_,1).type!=n))if(T%2==0==i>0)m++;else{if(m==1)return{start:u,end:{from:O+_,to:O+_+1},matched:T>>1==l>>1};m--}}i>0&&(g+=w.length)}return p.done?{start:u,matched:!1}:null}const art=Object.create(null),lre=[eo.none],ure=[],cre=Object.create(null),lrt=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])lrt[t]=urt(art,e);function ND(t,e){ure.indexOf(t)>-1||(ure.push(t),console.warn(e))}function urt(t,e){let i=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let p=t[u]||N[u];p?typeof p=="function"?l.length?l=l.map(p):ND(u,`Modifier ${u} used at start of tag`):l.length?ND(u,`Tag ${u} used as modifier`):l=Array.isArray(p)?p:[p]:ND(u,`Unknown highlighting tag ${u}`)}for(let u of l)i.push(u)}if(!i.length)return 0;let r=e.replace(/ /g,"_"),n=r+" "+i.map(a=>a.id),s=cre[n];if(s)return s.id;let o=cre[n]=eo.define({id:lre.length,name:r,props:[QR({[r]:i})]});return lre.push(o),o.id}Bi.RTL,Bi.LTR;const crt=t=>{let{state:e}=t,i=e.doc.lineAt(e.selection.main.from),r=P7(t.state,i.from);return r.line?hrt(t):r.block?prt(t):!1};function I7(t,e){return({state:i,dispatch:r})=>{if(i.readOnly)return!1;let n=t(e,i);return n?(r(i.update(n)),!0):!1}}const hrt=I7(yrt,0),drt=I7(abe,0),prt=I7((t,e)=>abe(t,e,mrt(e)),0);function P7(t,e){let i=t.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const wS=50;function frt(t,{open:e,close:i},r,n){let s=t.sliceDoc(r-wS,r),o=t.sliceDoc(n,n+wS),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+i.length)==i)return{open:{pos:r-a,margin:a&&1},close:{pos:n+l,margin:l&&1}};let p,m;n-r<=2*wS?p=m=t.sliceDoc(r,n):(p=t.sliceDoc(r,r+wS),m=t.sliceDoc(n-wS,n));let g=/^\s*/.exec(p)[0].length,w=/\s*$/.exec(m)[0].length,O=m.length-w-i.length;return p.slice(g,g+e.length)==e&&m.slice(O,O+i.length)==i?{open:{pos:r+g+e.length,margin:/\s/.test(p.charAt(g+e.length))?1:0},close:{pos:n-w-i.length,margin:/\s/.test(m.charAt(O-1))?1:0}}:null}function mrt(t){let e=[];for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),n=i.to<=r.to?r:t.doc.lineAt(i.to);n.from>r.from&&n.from==i.to&&(n=i.to==r.to+1?r:t.doc.lineAt(i.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=n.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:n.to})}return e}function abe(t,e,i=e.selection.ranges){let r=i.map(s=>P7(e,s.from).block);if(!r.every(s=>s))return null;let n=i.map((s,o)=>frt(e,r[o],s.from,s.to));if(t!=2&&!n.every(s=>s))return{changes:e.changes(i.map((s,o)=>n[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&n.some(s=>s)){let s=[];for(let o=0,a;o<n.length;o++)if(a=n[o]){let l=r[o],{open:u,close:p}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:p.pos-p.margin,to:p.pos+l.close.length})}return{changes:s}}return null}function yrt(t,e,i=e.selection.ranges){let r=[],n=-1;for(let{from:s,to:o}of i){let a=r.length,l=1e9,u=P7(e,s).line;if(u){for(let p=s;p<=o;){let m=e.doc.lineAt(p);if(m.from>n&&(s==o||o>m.from)){n=m.from;let g=/^\s*/.exec(m.text)[0].length,w=g==m.length,O=m.text.slice(g,g+u.length)==u?g:-1;g<m.text.length&&g<l&&(l=g),r.push({line:m,comment:O,token:u,indent:g,empty:w,single:!1})}p=m.to+1}if(l<1e9)for(let p=a;p<r.length;p++)r[p].indent<r[p].line.text.length&&(r[p].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:p,single:m}of r)(m||!p)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,p=u+l.length;o.text[p-o.from]==" "&&p++,s.push({from:u,to:p})}return{changes:s}}return null}const rU=Vc.define(),grt=Vc.define(),vrt=ze.define(),lbe=ze.define({combine(t){return Fc(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,i)=>(r,n)=>e(r,n)||i(r,n)})}}),ube=Nn.define({create(){return gc.empty},update(t,e){let i=e.state.facet(lbe),r=e.annotation(rU);if(r){let l=ko.fromTransaction(e,r.selection),u=r.side,p=u==0?t.undone:t.done;return l?p=jI(p,p.length,i.minDepth,l):p=dbe(p,e.startState.selection),new gc(u==0?r.rest:p,u==0?p:r.rest)}let n=e.annotation(grt);if((n=="full"||n=="before")&&(t=t.isolate()),e.annotation(Yr.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=ko.fromTransaction(e),o=e.annotation(Yr.time),a=e.annotation(Yr.userEvent);return s?t=t.addChanges(s,o,a,i,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,i.newGroupDelay)),(n=="full"||n=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new gc(t.done.map(ko.fromJSON),t.undone.map(ko.fromJSON))}});function brt(t={}){return[ube,lbe.of(t),Pe.domEventHandlers({beforeinput(e,i){let r=e.inputType=="historyUndo"?cbe:e.inputType=="historyRedo"?nU:null;return r?(e.preventDefault(),r(i)):!1}})]}function HR(t,e){return function({state:i,dispatch:r}){if(!e&&i.readOnly)return!1;let n=i.field(ube,!1);if(!n)return!1;let s=n.pop(t,i,e);return s?(r(s),!0):!1}}const cbe=HR(0,!1),nU=HR(1,!1),wrt=HR(0,!0),Ort=HR(1,!0);class ko{constructor(e,i,r,n,s){this.changes=e,this.effects=i,this.mapped=r,this.startSelection=n,this.selectionsAfter=s}setSelAfter(e){return new ko(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,i,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new ko(e.changes&&dn.fromJSON(e.changes),[],e.mapped&&wc.fromJSON(e.mapped),e.startSelection&&me.fromJSON(e.startSelection),e.selectionsAfter.map(me.fromJSON))}static fromTransaction(e,i){let r=sl;for(let n of e.startState.facet(vrt)){let s=n(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new ko(e.changes.invert(e.startState.doc),r,void 0,i||e.startState.selection,sl)}static selection(e){return new ko(void 0,sl,void 0,void 0,e)}}function jI(t,e,i,r){let n=e+1>i+20?e-i-1:0,s=t.slice(n,e);return s.push(r),s}function Srt(t,e){let i=[],r=!1;return t.iterChangedRanges((n,s)=>i.push(n,s)),e.iterChangedRanges((n,s,o,a)=>{for(let l=0;l<i.length;){let u=i[l++],p=i[l++];a>=u&&o<=p&&(r=!0)}}),r}function _rt(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((i,r)=>i.empty!=e.ranges[r].empty).length===0}function hbe(t,e){return t.length?e.length?t.concat(e):t:e}const sl=[],xrt=200;function dbe(t,e){if(t.length){let i=t[t.length-1],r=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-xrt));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),jI(t,t.length-1,1e9,i.setSelAfter(r)))}else return[ko.selection([e])]}function $rt(t){let e=t[t.length-1],i=t.slice();return i[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function DD(t,e){if(!t.length)return t;let i=t.length,r=sl;for(;i;){let n=Trt(t[i-1],e,r);if(n.changes&&!n.changes.empty||n.effects.length){let s=t.slice(0,i);return s[i-1]=n,s}else e=n.mapped,i--,r=n.selectionsAfter}return r.length?[ko.selection(r)]:sl}function Trt(t,e,i){let r=hbe(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):sl,i);if(!t.changes)return ko.selection(r);let n=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new ko(n,xt.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const Ert=/^(input\.type|delete)($|\.)/;class gc{constructor(e,i,r=0,n=void 0){this.done=e,this.undone=i,this.prevTime=r,this.prevUserEvent=n}isolate(){return this.prevTime?new gc(this.done,this.undone):this}addChanges(e,i,r,n,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||Ert.test(r))&&(!a.selectionsAfter.length&&i-this.prevTime<n.newGroupDelay&&n.joinToEvent(s,Srt(a.changes,e.changes))||r=="input.type.compose")?o=jI(o,o.length-1,n.minDepth,new ko(e.changes.compose(a.changes),hbe(xt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,sl)):o=jI(o,o.length,n.minDepth,e),new gc(o,sl,i,r)}addSelection(e,i,r,n){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:sl;return s.length>0&&i-this.prevTime<n&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&_rt(s[s.length-1],e)?this:new gc(dbe(this.done,e),this.undone,i,r)}addMapping(e){return new gc(DD(this.done,e),DD(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,i,r){let n=e==0?this.done:this.undone;if(n.length==0)return null;let s=n[n.length-1],o=s.selectionsAfter[0]||i.selection;if(r&&s.selectionsAfter.length)return i.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:rU.of({side:e,rest:$rt(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=n.length==1?sl:n.slice(0,n.length-1);return s.mapped&&(a=DD(a,s.mapped)),i.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:rU.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}gc.empty=new gc(sl,sl);const krt=[{key:"Mod-z",run:cbe,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:nU,preventDefault:!0},{linux:"Ctrl-Shift-z",run:nU,preventDefault:!0},{key:"Mod-u",run:wrt,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ort,preventDefault:!0}];function UO(t,e){return me.create(t.ranges.map(e),t.mainIndex)}function zc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function wu({state:t,dispatch:e},i){let r=UO(t.selection,i);return r.eq(t.selection,!0)?!1:(e(zc(t,r)),!0)}function WR(t,e){return me.cursor(e?t.to:t.from)}function pbe(t,e){return wu(t,i=>i.empty?t.moveByChar(i,e):WR(i,e))}function Es(t){return t.textDirectionAt(t.state.selection.main.head)==Bi.LTR}const fbe=t=>pbe(t,!Es(t)),mbe=t=>pbe(t,Es(t));function ybe(t,e){return wu(t,i=>i.empty?t.moveByGroup(i,e):WR(i,e))}const Crt=t=>ybe(t,!Es(t)),Mrt=t=>ybe(t,Es(t));function Art(t,e,i){if(e.type.prop(i))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function XR(t,e,i){let r=$r(t).resolveInner(e.head),n=i?Ct.closedBy:Ct.openedBy;for(let l=e.head;;){let u=i?r.childAfter(l):r.childBefore(l);if(!u)break;Art(t,u,n)?r=u:l=i?u.to:u.from}let s=r.type.prop(n),o,a;return s&&(o=i?yc(t,r.from,1):yc(t,r.to,-1))&&o.matched?a=i?o.end.to:o.end.from:a=i?r.to:r.from,me.cursor(a,i?-1:1)}const Irt=t=>wu(t,e=>XR(t.state,e,!Es(t))),Prt=t=>wu(t,e=>XR(t.state,e,Es(t)));function gbe(t,e){return wu(t,i=>{if(!i.empty)return WR(i,e);let r=t.moveVertically(i,e);return r.head!=i.head?r:t.moveToLineBoundary(i,e)})}const vbe=t=>gbe(t,!1),bbe=t=>gbe(t,!0);function wbe(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,i=0,r=0,n;if(e){for(let s of t.state.facet(Pe.scrollMargins)){let o=s(t);o!=null&&o.top&&(i=Math.max(o==null?void 0:o.top,i)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}n=t.scrollDOM.clientHeight-i-r}else n=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,n-5)}}function Obe(t,e){let i=wbe(t),{state:r}=t,n=UO(r.selection,o=>o.empty?t.moveVertically(o,e,i.height):WR(o,e));if(n.eq(r.selection))return!1;let s;if(i.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+i.marginTop,u=a.bottom-i.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Pe.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(zc(r,n),{effects:s}),!0}const hre=t=>Obe(t,!1),sU=t=>Obe(t,!0);function pm(t,e,i){let r=t.lineBlockAt(e.head),n=t.moveToLineBoundary(e,i);if(n.head==e.head&&n.head!=(i?r.to:r.from)&&(n=t.moveToLineBoundary(e,i,!1)),!i&&n.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(n=me.cursor(r.from+s))}return n}const Rrt=t=>wu(t,e=>pm(t,e,!0)),Lrt=t=>wu(t,e=>pm(t,e,!1)),Nrt=t=>wu(t,e=>pm(t,e,!Es(t))),Drt=t=>wu(t,e=>pm(t,e,Es(t))),Vrt=t=>wu(t,e=>me.cursor(t.lineBlockAt(e.head).from,1)),Frt=t=>wu(t,e=>me.cursor(t.lineBlockAt(e.head).to,-1));function jrt(t,e,i){let r=!1,n=UO(t.selection,s=>{let o=yc(t,s.head,-1)||yc(t,s.head,1)||s.head>0&&yc(t,s.head-1,1)||s.head<t.doc.length&&yc(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return me.cursor(a)});return r?(e(zc(t,n)),!0):!1}const zrt=({state:t,dispatch:e})=>jrt(t,e);function ml(t,e){let i=UO(t.state.selection,r=>{let n=e(r);return me.range(r.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return i.eq(t.state.selection)?!1:(t.dispatch(zc(t.state,i)),!0)}function Sbe(t,e){return ml(t,i=>t.moveByChar(i,e))}const _be=t=>Sbe(t,!Es(t)),xbe=t=>Sbe(t,Es(t));function $be(t,e){return ml(t,i=>t.moveByGroup(i,e))}const Urt=t=>$be(t,!Es(t)),Qrt=t=>$be(t,Es(t)),Brt=t=>ml(t,e=>XR(t.state,e,!Es(t))),qrt=t=>ml(t,e=>XR(t.state,e,Es(t)));function Tbe(t,e){return ml(t,i=>t.moveVertically(i,e))}const Ebe=t=>Tbe(t,!1),kbe=t=>Tbe(t,!0);function Cbe(t,e){return ml(t,i=>t.moveVertically(i,e,wbe(t).height))}const dre=t=>Cbe(t,!1),pre=t=>Cbe(t,!0),Grt=t=>ml(t,e=>pm(t,e,!0)),Zrt=t=>ml(t,e=>pm(t,e,!1)),Hrt=t=>ml(t,e=>pm(t,e,!Es(t))),Wrt=t=>ml(t,e=>pm(t,e,Es(t))),Xrt=t=>ml(t,e=>me.cursor(t.lineBlockAt(e.head).from)),Yrt=t=>ml(t,e=>me.cursor(t.lineBlockAt(e.head).to)),fre=({state:t,dispatch:e})=>(e(zc(t,{anchor:0})),!0),mre=({state:t,dispatch:e})=>(e(zc(t,{anchor:t.doc.length})),!0),yre=({state:t,dispatch:e})=>(e(zc(t,{anchor:t.selection.main.anchor,head:0})),!0),gre=({state:t,dispatch:e})=>(e(zc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Jrt=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Krt=({state:t,dispatch:e})=>{let i=YR(t).map(({from:r,to:n})=>me.range(r,Math.min(n+1,t.doc.length)));return e(t.update({selection:me.create(i),userEvent:"select"})),!0},ent=({state:t,dispatch:e})=>{let i=UO(t.selection,r=>{let n=$r(t),s=n.resolveStack(r.from,1);if(r.empty){let o=n.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return me.range(a.to,a.from)}return r});return i.eq(t.selection)?!1:(e(zc(t,i)),!0)},tnt=({state:t,dispatch:e})=>{let i=t.selection,r=null;return i.ranges.length>1?r=me.create([i.main]):i.main.empty||(r=me.create([me.cursor(i.main.head)])),r?(e(zc(t,r)),!0):!1};function H2(t,e){if(t.state.readOnly)return!1;let i="delete.selection",{state:r}=t,n=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(i="delete.backward",l=jk(t,l,!1)):l>o&&(i="delete.forward",l=jk(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=jk(t,o,!1),a=jk(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:me.cursor(o,o<s.head?-1:1)}});return n.changes.empty?!1:(t.dispatch(r.update(n,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?Pe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function jk(t,e,i){if(t instanceof Pe)for(let r of t.state.facet(Pe.atomicRanges).map(n=>n(t)))r.between(e,e,(n,s)=>{n<e&&s>e&&(e=i?s:n)});return e}const Mbe=(t,e,i)=>H2(t,r=>{let n=r.from,{state:s}=t,o=s.doc.lineAt(n),a,l;if(i&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,n-o.from))){if(a[a.length-1]=="	")return n-1;let u=jO(a,s.tabSize),p=u%DI(s)||DI(s);for(let m=0;m<p&&a[a.length-1-m]==" ";m++)n--;l=n}else l=Yn(o.text,n-o.from,e,e)+o.from,l==n&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,n-o.from))&&(l=Yn(o.text,l-o.from,!1,!1)+o.from);return l}),oU=t=>Mbe(t,!1,!0),Abe=t=>Mbe(t,!0,!1),Ibe=(t,e)=>H2(t,i=>{let r=i.head,{state:n}=t,s=n.doc.lineAt(r),o=n.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==i.head&&s.number!=(e?n.doc.lines:1)&&(r+=e?1:-1);break}let l=Yn(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),p=o(u);if(a!=null&&p!=a)break;(u!=" "||r!=i.head)&&(a=p),r=l}return r}),Pbe=t=>Ibe(t,!1),int=t=>Ibe(t,!0),rnt=t=>H2(t,e=>{let i=t.lineBlockAt(e.head).to;return e.head<i?i:Math.min(t.state.doc.length,e.head+1)}),nnt=t=>H2(t,e=>{let i=t.moveToLineBoundary(e,!1).head;return e.head>i?i:Math.max(0,e.head-1)}),snt=t=>H2(t,e=>{let i=t.moveToLineBoundary(e,!0).head;return e.head<i?i:Math.min(t.state.doc.length,e.head+1)}),ont=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Qt.of(["",""])},range:me.cursor(r.from)}));return e(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},ant=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let n=r.from,s=t.doc.lineAt(n),o=n==s.from?n-1:Yn(s.text,n-s.from,!1)+s.from,a=n==s.to?n+1:Yn(s.text,n-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(n,a).append(t.doc.slice(o,n))},range:me.cursor(a)}});return i.changes.empty?!1:(e(t.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function YR(t){let e=[],i=-1;for(let r of t.selection.ranges){let n=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),i>=n.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:n.from,to:s.to,ranges:[r]});i=s.number+1}return e}function Rbe(t,e,i){if(t.readOnly)return!1;let r=[],n=[];for(let s of YR(t)){if(i?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(i?s.to+1:s.from-1),a=o.length+1;if(i){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)n.push(me.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)n.push(me.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:me.create(n,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const lnt=({state:t,dispatch:e})=>Rbe(t,e,!1),unt=({state:t,dispatch:e})=>Rbe(t,e,!0);function Lbe(t,e,i){if(t.readOnly)return!1;let r=[];for(let n of YR(t))i?r.push({from:n.from,insert:t.doc.slice(n.from,n.to)+t.lineBreak}):r.push({from:n.to,insert:t.lineBreak+t.doc.slice(n.from,n.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const cnt=({state:t,dispatch:e})=>Lbe(t,e,!1),hnt=({state:t,dispatch:e})=>Lbe(t,e,!0),dnt=t=>{if(t.state.readOnly)return!1;let{state:e}=t,i=e.changes(YR(e).map(({from:n,to:s})=>(n>0?n--:s<e.doc.length&&s++,{from:n,to:s}))),r=UO(e.selection,n=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(n.head),a=t.coordsAtPos(n.head,n.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(n,!0,s)}).map(i);return t.dispatch({changes:i,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function pnt(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let i=$r(t).resolveInner(e),r=i.childBefore(e),n=i.childAfter(e),s;return r&&n&&r.to<=e&&n.from>=e&&(s=r.type.prop(Ct.closedBy))&&s.indexOf(n.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(n.from).from&&!/\S/.test(t.sliceDoc(r.to,n.from))?{from:r.to,to:n.from}:null}const vre=Nbe(!1),fnt=Nbe(!0);function Nbe(t){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let r=e.changeByRange(n=>{let{from:s,to:o}=n,a=e.doc.lineAt(s),l=!t&&s==o&&pnt(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new BR(e,{simulateBreak:s,simulateDoubleBreak:!!l}),p=C7(u,s);for(p==null&&(p=jO(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let m=["",L$(e,p)];return l&&m.push(L$(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Qt.of(m)},range:me.cursor(s+1+m[1].length)}});return i(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function R7(t,e){let i=-1;return t.changeByRange(r=>{let n=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>i&&(r.empty||r.to>a.from)&&(e(a,n,r),i=a.number),o=a.to+1}let s=t.changes(n);return{changes:n,range:me.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const mnt=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Object.create(null),r=new BR(t,{overrideIndentation:s=>{let o=i[s];return o??-1}}),n=R7(t,(s,o,a)=>{let l=C7(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let u=/^\s*/.exec(s.text)[0],p=L$(t,l);(u!=p||a.from<s.from+u.length)&&(i[s.from]=l,o.push({from:s.from,to:s.from+u.length,insert:p}))});return n.changes.empty||e(t.update(n,{userEvent:"indent"})),!0},Dbe=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(R7(t,(i,r)=>{r.push({from:i.from,insert:t.facet(G2)})}),{userEvent:"input.indent"})),!0),Vbe=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(R7(t,(i,r)=>{let n=/^\s*/.exec(i.text)[0];if(!n)return;let s=jO(n,t.tabSize),o=0,a=L$(t,Math.max(0,s-DI(t)));for(;o<n.length&&o<a.length&&n.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:i.from+o,to:i.from+n.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),ynt=t=>(t.setTabFocusMode(),!0),gnt=[{key:"Ctrl-b",run:fbe,shift:_be,preventDefault:!0},{key:"Ctrl-f",run:mbe,shift:xbe},{key:"Ctrl-p",run:vbe,shift:Ebe},{key:"Ctrl-n",run:bbe,shift:kbe},{key:"Ctrl-a",run:Vrt,shift:Xrt},{key:"Ctrl-e",run:Frt,shift:Yrt},{key:"Ctrl-d",run:Abe},{key:"Ctrl-h",run:oU},{key:"Ctrl-k",run:rnt},{key:"Ctrl-Alt-h",run:Pbe},{key:"Ctrl-o",run:ont},{key:"Ctrl-t",run:ant},{key:"Ctrl-v",run:sU}],vnt=[{key:"ArrowLeft",run:fbe,shift:_be,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Crt,shift:Urt,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Nrt,shift:Hrt,preventDefault:!0},{key:"ArrowRight",run:mbe,shift:xbe,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Mrt,shift:Qrt,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Drt,shift:Wrt,preventDefault:!0},{key:"ArrowUp",run:vbe,shift:Ebe,preventDefault:!0},{mac:"Cmd-ArrowUp",run:fre,shift:yre},{mac:"Ctrl-ArrowUp",run:hre,shift:dre},{key:"ArrowDown",run:bbe,shift:kbe,preventDefault:!0},{mac:"Cmd-ArrowDown",run:mre,shift:gre},{mac:"Ctrl-ArrowDown",run:sU,shift:pre},{key:"PageUp",run:hre,shift:dre},{key:"PageDown",run:sU,shift:pre},{key:"Home",run:Lrt,shift:Zrt,preventDefault:!0},{key:"Mod-Home",run:fre,shift:yre},{key:"End",run:Rrt,shift:Grt,preventDefault:!0},{key:"Mod-End",run:mre,shift:gre},{key:"Enter",run:vre,shift:vre},{key:"Mod-a",run:Jrt},{key:"Backspace",run:oU,shift:oU},{key:"Delete",run:Abe},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Pbe},{key:"Mod-Delete",mac:"Alt-Delete",run:int},{mac:"Mod-Backspace",run:nnt},{mac:"Mod-Delete",run:snt}].concat(gnt.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),bnt=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Irt,shift:Brt},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Prt,shift:qrt},{key:"Alt-ArrowUp",run:lnt},{key:"Shift-Alt-ArrowUp",run:cnt},{key:"Alt-ArrowDown",run:unt},{key:"Shift-Alt-ArrowDown",run:hnt},{key:"Escape",run:tnt},{key:"Mod-Enter",run:fnt},{key:"Alt-l",mac:"Ctrl-l",run:Krt},{key:"Mod-i",run:ent,preventDefault:!0},{key:"Mod-[",run:Vbe},{key:"Mod-]",run:Dbe},{key:"Mod-Alt-\\",run:mnt},{key:"Shift-Mod-k",run:dnt},{key:"Shift-Mod-\\",run:zrt},{key:"Mod-/",run:crt},{key:"Alt-A",run:drt},{key:"Ctrl-m",mac:"Shift-Alt-m",run:ynt}].concat(vnt),wnt={key:"Tab",run:Dbe,shift:Vbe};function _i(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var n=i[r];typeof n=="string"?t.setAttribute(r,n):n!=null&&(t[r]=n)}e++}for(;e<arguments.length;e++)Fbe(t,arguments[e]);return t}function Fbe(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var i=0;i<e.length;i++)Fbe(t,e[i]);else throw new RangeError("Unsupported child node: "+e)}const bre=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Jw{constructor(e,i,r=0,n=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,n),this.bufferStart=r,this.normalize=s?a=>s(bre(a)):bre,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Oo(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let i=a7(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=dc(e);let n=this.normalize(i);if(n.length)for(let s=0,o=r;;s++){let a=n.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==n.length-1){if(l)return this.value=l,this;break}o==r&&s<i.length&&i.charCodeAt(s)==a&&o++}}}match(e,i,r){let n=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:i,to:r}:this.matches.push(1,i)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(Jw.prototype[Symbol.iterator]=function(){return this});const jbe={from:-1,to:-1,match:/.*/.exec("")},L7="gm"+(/x/.unicode==null?"":"u");class zbe{constructor(e,i,r,n=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=jbe,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new Ube(e,i,r,n,s);this.re=new RegExp(i,L7+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=zI(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let r=this.curLineStart+i.index,n=r+i[0].length;if(this.matchPos=zI(this.text,n+(r==n?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<n||r>this.value.to)&&(!this.test||this.test(r,n,i)))return this.value={from:r,to:n,match:i},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const VD=new WeakMap;class Ow{constructor(e,i){this.from=e,this.text=i}get to(){return this.from+this.text.length}static get(e,i,r){let n=VD.get(e);if(!n||n.from>=r||n.to<=i){let a=new Ow(i,e.sliceString(i,r));return VD.set(e,a),a}if(n.from==i&&n.to==r)return n;let{text:s,from:o}=n;return o>i&&(s=e.sliceString(i,o)+s,o=i),n.to<r&&(s+=e.sliceString(n.to,r)),VD.set(e,new Ow(o,s)),new Ow(i,s.slice(i-o,r-o))}}class Ube{constructor(e,i,r,n,s){this.text=e,this.to=s,this.done=!1,this.value=jbe,this.matchPos=zI(e,n),this.re=new RegExp(i,L7+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Ow.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==e&&(this.re.lastIndex=e+1,i=this.re.exec(this.flat.text)),i){let r=this.flat.from+i.index,n=r+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,n,i)))return this.value={from:r,to:n,match:i},this.matchPos=zI(this.text,n+(r==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ow.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(zbe.prototype[Symbol.iterator]=Ube.prototype[Symbol.iterator]=function(){return this});function Ont(t){try{return new RegExp(t,L7),!0}catch{return!1}}function zI(t,e){if(e>=t.length)return e;let i=t.lineAt(e),r;for(;e<i.to&&(r=i.text.charCodeAt(e-i.from))>=56320&&r<57344;)e++;return e}function aU(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),i=_i("input",{class:"cm-textfield",name:"line",value:e}),r=_i("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Nx.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),n())},onsubmit:s=>{s.preventDefault(),n()}},_i("label",t.state.phrase("Go to line"),": ",i)," ",_i("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),_i("button",{name:"close",onclick:()=>{t.dispatch({effects:Nx.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function n(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,u,p,m]=s,g=p?+p.slice(1):0,w=u?+u:a.number;if(u&&m){let x=w/100;l&&(x=x*(l=="-"?-1:1)+a.number/o.doc.lines),w=Math.round(o.doc.lines*x)}else u&&l&&(w=w*(l=="-"?-1:1)+a.number);let O=o.doc.line(Math.max(1,Math.min(o.doc.lines,w))),_=me.cursor(O.from+Math.max(0,Math.min(g,O.length)));t.dispatch({effects:[Nx.of(!1),Pe.scrollIntoView(_.from,{y:"center"})],selection:_}),t.focus()}return{dom:r}}const Nx=xt.define(),wre=Nn.define({create(){return!0},update(t,e){for(let i of e.effects)i.is(Nx)&&(t=i.value);return t},provide:t=>I$.from(t,e=>e?aU:null)}),Snt=t=>{let e=A$(t,aU);if(!e){let i=[Nx.of(!0)];t.state.field(wre,!1)==null&&i.push(xt.appendConfig.of([wre,_nt])),t.dispatch({effects:i}),e=A$(t,aU)}return e&&e.dom.querySelector("input").select(),!0},_nt=Pe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),xnt={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},$nt=ze.define({combine(t){return Fc(t,xnt,{highlightWordAroundCursor:(e,i)=>e||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function Tnt(t){return[Ant,Mnt]}const Ent=st.mark({class:"cm-selectionMatch"}),knt=st.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Ore(t,e,i,r){return(i==0||t(e.sliceDoc(i-1,i))!=ir.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=ir.Word)}function Cnt(t,e,i,r){return t(e.sliceDoc(i,i+1))==ir.Word&&t(e.sliceDoc(r-1,r))==ir.Word}const Mnt=Nr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet($nt),{state:i}=t,r=i.selection;if(r.ranges.length>1)return st.none;let n=r.main,s,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return st.none;let l=i.wordAt(n.head);if(!l)return st.none;o=i.charCategorizer(n.head),s=i.sliceDoc(l.from,l.to)}else{let l=n.to-n.from;if(l<e.minSelectionLength||l>200)return st.none;if(e.wholeWords){if(s=i.sliceDoc(n.from,n.to),o=i.charCategorizer(n.head),!(Ore(o,i,n.from,n.to)&&Cnt(o,i,n.from,n.to)))return st.none}else if(s=i.sliceDoc(n.from,n.to),!s)return st.none}let a=[];for(let l of t.visibleRanges){let u=new Jw(i.doc,s,l.from,l.to);for(;!u.next().done;){let{from:p,to:m}=u.value;if((!o||Ore(o,i,p,m))&&(n.empty&&p<=n.from&&m>=n.to?a.push(knt.range(p,m)):(p>=n.to||m<=n.from)&&a.push(Ent.range(p,m)),a.length>e.maxMatches))return st.none}}return st.set(a)}},{decorations:t=>t.decorations}),Ant=Pe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Int=({state:t,dispatch:e})=>{let{selection:i}=t,r=me.create(i.ranges.map(n=>t.wordAt(n.head)||me.cursor(n.head)),i.mainIndex);return r.eq(i)?!1:(e(t.update({selection:r})),!0)};function Pnt(t,e){let{main:i,ranges:r}=t.selection,n=t.wordAt(i.head),s=n&&n.from==i.from&&n.to==i.to;for(let o=!1,a=new Jw(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Jw(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Rnt=({state:t,dispatch:e})=>{let{ranges:i}=t.selection;if(i.some(s=>s.from===s.to))return Int({state:t,dispatch:e});let r=t.sliceDoc(i[0].from,i[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let n=Pnt(t,r);return n?(e(t.update({selection:t.selection.addRange(me.range(n.from,n.to),!1),effects:Pe.scrollIntoView(n.to)})),!0):!1},QO=ze.define({combine(t){return Fc(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Gnt(e),scrollToMatch:e=>Pe.scrollIntoView(e)})}});class Qbe{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Ont(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(i,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Vnt(this):new Nnt(this)}getCursor(e,i=0,r){let n=e.doc?e:zt.create({doc:e});return r==null&&(r=n.doc.length),this.regexp?Pb(this,n,i,r):Ib(this,n,i,r)}}class Bbe{constructor(e){this.spec=e}}function Ib(t,e,i,r){return new Jw(e.doc,t.unquoted,i,r,t.caseSensitive?void 0:n=>n.toLowerCase(),t.wholeWord?Lnt(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Lnt(t,e){return(i,r,n,s)=>((s>i||s+n.length<r)&&(s=Math.max(0,i-2),n=t.sliceString(s,Math.min(t.length,r+2))),(e(UI(n,i-s))!=ir.Word||e(QI(n,i-s))!=ir.Word)&&(e(QI(n,r-s))!=ir.Word||e(UI(n,r-s))!=ir.Word))}class Nnt extends Bbe{constructor(e){super(e)}nextMatch(e,i,r){let n=Ib(this.spec,e,r,e.doc.length).nextOverlapping();if(n.done){let s=Math.min(e.doc.length,i+this.spec.unquoted.length);n=Ib(this.spec,e,0,s).nextOverlapping()}return n.done||n.value.from==i&&n.value.to==r?null:n.value}prevMatchInRange(e,i,r){for(let n=r;;){let s=Math.max(i,n-1e4-this.spec.unquoted.length),o=Ib(this.spec,e,s,n),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==i)return null;n-=1e4}}prevMatch(e,i,r){let n=this.prevMatchInRange(e,0,i);return n||(n=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=i||n.to!=r)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,i){let r=Ib(this.spec,e,0,e.doc.length),n=[];for(;!r.next().done;){if(n.length>=i)return null;n.push(r.value)}return n}highlight(e,i,r,n){let s=Ib(this.spec,e,Math.max(0,i-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}function Pb(t,e,i,r){return new zbe(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Dnt(e.charCategorizer(e.selection.main.head)):void 0},i,r)}function UI(t,e){return t.slice(Yn(t,e,!1),e)}function QI(t,e){return t.slice(e,Yn(t,e))}function Dnt(t){return(e,i,r)=>!r[0].length||(t(UI(r.input,r.index))!=ir.Word||t(QI(r.input,r.index))!=ir.Word)&&(t(QI(r.input,r.index+r[0].length))!=ir.Word||t(UI(r.input,r.index+r[0].length))!=ir.Word)}class Vnt extends Bbe{nextMatch(e,i,r){let n=Pb(this.spec,e,r,e.doc.length).next();return n.done&&(n=Pb(this.spec,e,0,i).next()),n.done?null:n.value}prevMatchInRange(e,i,r){for(let n=1;;n++){let s=Math.max(i,r-n*1e4),o=Pb(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==i||a.from>s+10))return a;if(s==i)return null}}prevMatch(e,i,r){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(i,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let n=r.length;n>0;n--){let s=+r.slice(0,n);if(s>0&&s<e.match.length)return e.match[s]+r.slice(n)}return i})}matchAll(e,i){let r=Pb(this.spec,e,0,e.doc.length),n=[];for(;!r.next().done;){if(n.length>=i)return null;n.push(r.value)}return n}highlight(e,i,r,n){let s=Pb(this.spec,e,Math.max(0,i-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}const N$=xt.define(),N7=xt.define(),Tf=Nn.define({create(t){return new FD(lU(t).create(),null)},update(t,e){for(let i of e.effects)i.is(N$)?t=new FD(i.value.create(),t.panel):i.is(N7)&&(t=new FD(t.query,i.value?D7:null));return t},provide:t=>I$.from(t,e=>e.panel)});class FD{constructor(e,i){this.query=e,this.panel=i}}const Fnt=st.mark({class:"cm-searchMatch"}),jnt=st.mark({class:"cm-searchMatch cm-searchMatch-selected"}),znt=Nr.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Tf))}update(t){let e=t.state.field(Tf);(e!=t.startState.field(Tf)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return st.none;let{view:i}=this,r=new Od;for(let n=0,s=i.visibleRanges,o=s.length;n<o;n++){let{from:a,to:l}=s[n];for(;n<o-1&&l>s[n+1].from-2*250;)l=s[++n].to;t.highlight(i.state,a,l,(u,p)=>{let m=i.state.selection.ranges.some(g=>g.from==u&&g.to==p);r.add(u,p,m?jnt:Fnt)})}return r.finish()}},{decorations:t=>t.decorations});function W2(t){return e=>{let i=e.state.field(Tf,!1);return i&&i.query.spec.valid?t(e,i):Zbe(e)}}const BI=W2((t,{query:e})=>{let{to:i}=t.state.selection.main,r=e.nextMatch(t.state,i,i);if(!r)return!1;let n=me.single(r.from,r.to),s=t.state.facet(QO);return t.dispatch({selection:n,effects:[V7(t,r),s.scrollToMatch(n.main,t)],userEvent:"select.search"}),Gbe(t),!0}),qI=W2((t,{query:e})=>{let{state:i}=t,{from:r}=i.selection.main,n=e.prevMatch(i,r,r);if(!n)return!1;let s=me.single(n.from,n.to),o=t.state.facet(QO);return t.dispatch({selection:s,effects:[V7(t,n),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),Gbe(t),!0}),Unt=W2((t,{query:e})=>{let i=e.matchAll(t.state,1e3);return!i||!i.length?!1:(t.dispatch({selection:me.create(i.map(r=>me.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Qnt=({state:t,dispatch:e})=>{let i=t.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:r,to:n}=i.main,s=[],o=0;for(let a=new Jw(t.doc,t.sliceDoc(r,n));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(me.range(a.value.from,a.value.to))}return e(t.update({selection:me.create(s,o),userEvent:"select.search.matches"})),!0},Sre=W2((t,{query:e})=>{let{state:i}=t,{from:r,to:n}=i.selection.main;if(i.readOnly)return!1;let s=e.nextMatch(i,r,r);if(!s)return!1;let o=s,a=[],l,u,p=[];if(o.from==r&&o.to==n&&(u=i.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(i,o.from,o.to),p.push(Pe.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(r).number)+"."))),o){let m=a.length==0||a[0].from>=s.to?0:s.to-s.from-u.length;l=me.single(o.from-m,o.to-m),p.push(V7(t,o)),p.push(i.facet(QO).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:p,userEvent:"input.replace"}),!0}),Bnt=W2((t,{query:e})=>{if(t.state.readOnly)return!1;let i=e.matchAll(t.state,1e9).map(n=>{let{from:s,to:o}=n;return{from:s,to:o,insert:e.getReplacement(n)}});if(!i.length)return!1;let r=t.state.phrase("replaced $ matches",i.length)+".";return t.dispatch({changes:i,effects:Pe.announce.of(r),userEvent:"input.replace.all"}),!0});function D7(t){return t.state.facet(QO).createPanel(t)}function lU(t,e){var i,r,n,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(QO);return new Qbe({search:((i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function qbe(t){let e=A$(t,D7);return e&&e.dom.querySelector("[main-field]")}function Gbe(t){let e=qbe(t);e&&e==t.root.activeElement&&e.select()}const Zbe=t=>{let e=t.state.field(Tf,!1);if(e&&e.panel){let i=qbe(t);if(i&&i!=t.root.activeElement){let r=lU(t.state,e.query.spec);r.valid&&t.dispatch({effects:N$.of(r)}),i.focus(),i.select()}}else t.dispatch({effects:[N7.of(!0),e?N$.of(lU(t.state,e.query.spec)):xt.appendConfig.of(Hnt)]});return!0},Hbe=t=>{let e=t.state.field(Tf,!1);if(!e||!e.panel)return!1;let i=A$(t,D7);return i&&i.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:N7.of(!1)}),!0},qnt=[{key:"Mod-f",run:Zbe,scope:"editor search-panel"},{key:"F3",run:BI,shift:qI,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:BI,shift:qI,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Hbe,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Qnt},{key:"Mod-Alt-g",run:Snt},{key:"Mod-d",run:Rnt,preventDefault:!0}];class Gnt{constructor(e){this.view=e;let i=this.query=e.state.field(Tf).query.spec;this.commit=this.commit.bind(this),this.searchField=_i("input",{value:i.search,placeholder:zo(e,"Find"),"aria-label":zo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=_i("input",{value:i.replace,placeholder:zo(e,"Replace"),"aria-label":zo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=_i("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=_i("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=_i("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function r(n,s,o){return _i("button",{class:"cm-button",name:n,onclick:s,type:"button"},o)}this.dom=_i("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,r("next",()=>BI(e),[zo(e,"next")]),r("prev",()=>qI(e),[zo(e,"previous")]),r("select",()=>Unt(e),[zo(e,"all")]),_i("label",null,[this.caseField,zo(e,"match case")]),_i("label",null,[this.reField,zo(e,"regexp")]),_i("label",null,[this.wordField,zo(e,"by word")]),...e.state.readOnly?[]:[_i("br"),this.replaceField,r("replace",()=>Sre(e),[zo(e,"replace")]),r("replaceAll",()=>Bnt(e),[zo(e,"replace all")])],_i("button",{name:"close",onclick:()=>Hbe(e),"aria-label":zo(e,"close"),type:"button"},[""])])}commit(){let e=new Qbe({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:N$.of(e)}))}keydown(e){Yet(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?qI:BI)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Sre(this.view))}update(e){for(let i of e.transactions)for(let r of i.effects)r.is(N$)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(QO).top}}function zo(t,e){return t.state.phrase(e)}const zk=30,Uk=/[\s\.,:;?!]/;function V7(t,{from:e,to:i}){let r=t.state.doc.lineAt(e),n=t.state.doc.lineAt(i).to,s=Math.max(r.from,e-zk),o=Math.min(n,i+zk),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<zk;l++)if(!Uk.test(a[l+1])&&Uk.test(a[l])){a=a.slice(l);break}}if(o!=n){for(let l=a.length-1;l>a.length-zk;l--)if(!Uk.test(a[l-1])&&Uk.test(a[l])){a=a.slice(0,l);break}}return Pe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const Znt=Pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Hnt=[Tf,dm.low(znt),Znt];class Wbe{constructor(e,i,r,n){this.state=e,this.pos=i,this.explicit=r,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let i=$r(this.state).resolveInner(this.pos,-1);for(;i&&e.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(e){let i=this.state.doc.lineAt(this.pos),r=Math.max(i.from,this.pos-250),n=i.text.slice(r-i.from,this.pos-i.from),s=n.search(Ybe(e,!1));return s<0?null:{from:r+s,to:this.pos,text:n.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,i,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(i),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function _re(t){let e=Object.keys(t).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Wnt(t){let e=Object.create(null),i=Object.create(null);for(let{label:n}of t){e[n[0]]=!0;for(let s=1;s<n.length;s++)i[n[s]]=!0}let r=_re(e)+_re(i)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Xbe(t){let e=t.map(n=>typeof n=="string"?{label:n}:n),[i,r]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:Wnt(e);return n=>{let s=n.matchBefore(r);return s||n.explicit?{from:s?s.from:n.pos,options:e,validFor:i}:null}}function Xnt(t,e){return i=>{for(let r=$r(i.state).resolveInner(i.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(i)}}class xre{constructor(e,i,r,n){this.completion=e,this.source=i,this.match=r,this.score=n}}function Tg(t){return t.selection.main.from}function Ybe(t,e){var i;let{source:r}=t,n=e&&r[0]!="^",s=r[r.length-1]!="$";return!n&&!s?t:new RegExp(`${n?"^":""}(?:${r})${s?"$":""}`,(i=t.flags)!==null&&i!==void 0?i:t.ignoreCase?"i":"")}const F7=Vc.define();function Ynt(t,e,i,r){let{main:n}=t.selection,s=i-n.from,o=r-n.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=n&&i!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(i,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:r==n.from?a.to:a.from+o,insert:l},range:me.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const $re=new WeakMap;function Jnt(t){if(!Array.isArray(t))return t;let e=$re.get(t);return e||$re.set(t,e=Xbe(t)),e}const GI=xt.define(),D$=xt.define();class Knt{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<e.length;){let r=Oo(e,i),n=dc(r);this.chars.push(r);let s=e.slice(i,i+n),o=s.toUpperCase();this.folded.push(Oo(o==s?s.toLowerCase():o,0)),i+=n}this.astral=e.length!=this.chars.length}ret(e,i){return this.score=e,this.matched=i,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:i,folded:r,any:n,precise:s,byWord:o}=this;if(i.length==1){let E=Oo(e,0),k=dc(E),M=k==e.length?0:-100;if(E!=i[0])if(E==r[0])M+=-200;else return null;return this.ret(M,[0,k])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=i.length,u=0;if(a<0){for(let E=0,k=Math.min(e.length,200);E<k&&u<l;){let M=Oo(e,E);(M==i[u]||M==r[u])&&(n[u++]=E),E+=dc(M)}if(u<l)return null}let p=0,m=0,g=!1,w=0,O=-1,_=-1,x=/[a-z]/.test(e),T=!0;for(let E=0,k=Math.min(e.length,200),M=0;E<k&&m<l;){let R=Oo(e,E);a<0&&(p<l&&R==i[p]&&(s[p++]=E),w<l&&(R==i[w]||R==r[w]?(w==0&&(O=E),_=E+1,w++):w=0));let D,L=R<255?R>=48&&R<=57||R>=97&&R<=122?2:R>=65&&R<=90?1:0:(D=a7(R))!=D.toLowerCase()?1:D!=D.toUpperCase()?2:0;(!E||L==1&&x||M==0&&L!=0)&&(i[m]==R||r[m]==R&&(g=!0)?o[m++]=E:o.length&&(T=!1)),M=L,E+=dc(R)}return m==l&&o[0]==0&&T?this.result(-100+(g?-200:0),o,e):w==l&&O==0?this.ret(-200-e.length+(_==e.length?0:-100),[0,_]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):w==l?this.ret(-900-e.length,[O,_]):m==l?this.result(-100+(g?-200:0)+-700+(T?0:-1100),o,e):i.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,i,r){let n=[],s=0;for(let o of i){let a=o+(this.astral?dc(Oo(r,o)):1);s&&n[s-1]==o?n[s-1]=a:(n[s++]=o,n[s++]=a)}return this.ret(e-r.length,n)}}class est{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let i=e.slice(0,this.pattern.length),r=i==this.pattern?0:i.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,i.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Pn=ze.define({combine(t){return Fc(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:tst,filterStrict:!1,compareCompletions:(e,i)=>e.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,i)=>e&&i,closeOnBlur:(e,i)=>e&&i,icons:(e,i)=>e&&i,tooltipClass:(e,i)=>r=>Tre(e(r),i(r)),optionClass:(e,i)=>r=>Tre(e(r),i(r)),addToOptions:(e,i)=>e.concat(i),filterStrict:(e,i)=>e||i})}});function Tre(t,e){return t?e?t+" "+e:t:e}function tst(t,e,i,r,n,s){let o=t.textDirection==Bi.RTL,a=o,l=!1,u="top",p,m,g=e.left-n.left,w=n.right-e.right,O=r.right-r.left,_=r.bottom-r.top;if(a&&g<Math.min(O,w)?a=!1:!a&&w<Math.min(O,g)&&(a=!0),O<=(a?g:w))p=Math.max(n.top,Math.min(i.top,n.bottom-_))-e.top,m=Math.min(400,a?g:w);else{l=!0,m=Math.min(400,(o?e.right:n.right-e.left)-30);let E=n.bottom-e.bottom;E>=_||E>e.top?p=i.bottom-e.top:(u="bottom",p=e.bottom-i.top)}let x=(e.bottom-e.top)/s.offsetHeight,T=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${p/x}px; max-width: ${m/T}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function ist(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(i){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),i.type&&r.classList.add(...i.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(i,r,n,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=i.displayLabel||i.label,l=0;for(let u=0;u<s.length;){let p=s[u++],m=s[u++];p>l&&o.appendChild(document.createTextNode(a.slice(l,p)));let g=o.appendChild(document.createElement("span"));g.appendChild(document.createTextNode(a.slice(p,m))),g.className="cm-completionMatchedText",l=m}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(i){if(!i.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=i.detail,r},position:80}),e.sort((i,r)=>i.position-r.position).map(i=>i.render)}function jD(t,e,i){if(t<=i)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let n=Math.floor(e/i);return{from:n*i,to:(n+1)*i}}let r=Math.floor((t-e)/i);return{from:t-(r+1)*i,to:t-r*i}}class rst{constructor(e,i,r){this.view=e,this.stateField=i,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let n=e.state.field(i),{options:s,selected:o}=n.open,a=e.state.facet(Pn);this.optionContent=ist(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=jD(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(i).open;for(let p=l.target,m;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(m=/-(\d+)$/.exec(p.id))&&+m[1]<u.length){this.applyCompletion(e,u[+m[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Pn).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:D$.of(null)})}),this.showOptions(s,n.id)}mount(){this.updateSel()}showOptions(e,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var i;let r=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=n){let{options:s,selected:o,disabled:a}=r.open;(!n.open||n.open.options!=s)&&(this.range=jD(s.length,o,e.state.facet(Pn).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((i=n.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let i=this.tooltipClass(e);if(i!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of i.split(" "))r&&this.dom.classList.add(r);this.currentClass=i}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),i=e.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=jD(i.options.length,i.selected,this.view.state.facet(Pn).maxRenderedOptions),this.showOptions(i.options,e.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:r}=i.options[i.selected],{info:n}=r;if(!n)return;let s=typeof n=="string"?document.createTextNode(n):n(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Eo(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,i){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:s}=e;r.appendChild(n),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let i=null;for(let r=this.list.firstChild,n=this.range.from;r;r=r.nextSibling,n++)r.nodeName!="LI"||!r.id?n--:n==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),i=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return i&&sst(this.list,i),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let i=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(s.bottom,i.bottom)-10||n.bottom<Math.max(s.top,i.top)+10?null:this.view.state.facet(Pn).positionInfo(this.view,i,n,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,i,r){const n=document.createElement("ul");n.id=i,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let g=typeof u=="string"?u:u.name;if(g!=s&&(o>r.from||r.from==0))if(s=g,typeof u!="string"&&u.header)n.appendChild(u.header(u));else{let w=n.appendChild(document.createElement("completion-section"));w.textContent=g}}const p=n.appendChild(document.createElement("li"));p.id=i+"-"+o,p.setAttribute("role","option");let m=this.optionClass(a);m&&(p.className=m);for(let g of this.optionContent){let w=g(a,this.view.state,this.view,l);w&&p.appendChild(w)}}return r.from&&n.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function nst(t,e){return i=>new rst(i,t,e)}function sst(t,e){let i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),n=i.height/t.offsetHeight;r.top<i.top?t.scrollTop-=(i.top-r.top)/n:r.bottom>i.bottom&&(t.scrollTop+=(r.bottom-i.bottom)/n)}function Ere(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function ost(t,e){let i=[],r=null,n=u=>{i.push(u);let{section:p}=u.completion;if(p){r||(r=[]);let m=typeof p=="string"?p:p.name;r.some(g=>g.name==m)||r.push(typeof p=="string"?{name:m}:p)}},s=e.facet(Pn);for(let u of t)if(u.hasResult()){let p=u.result.getMatch;if(u.result.filter===!1)for(let m of u.result.options)n(new xre(m,u.source,p?p(m):[],1e9-i.length));else{let m=e.sliceDoc(u.from,u.to),g,w=s.filterStrict?new est(m):new Knt(m);for(let O of u.result.options)if(g=w.match(O.label)){let _=O.displayLabel?p?p(O,g.matched):[]:g.matched;n(new xre(O,u.source,_,g.score+(O.boost||0)))}}}if(r){let u=Object.create(null),p=0,m=(g,w)=>{var O,_;return((O=g.rank)!==null&&O!==void 0?O:1e9)-((_=w.rank)!==null&&_!==void 0?_:1e9)||(g.name<w.name?-1:1)};for(let g of r.sort(m))p-=1e5,u[g.name]=p;for(let g of i){let{section:w}=g.completion;w&&(g.score+=u[typeof w=="string"?w:w.name])}}let o=[],a=null,l=s.compareCompletions;for(let u of i.sort((p,m)=>m.score-p.score||l(p.completion,m.completion))){let p=u.completion;!a||a.label!=p.label||a.detail!=p.detail||a.type!=null&&p.type!=null&&a.type!=p.type||a.apply!=p.apply||a.boost!=p.boost?o.push(u):Ere(u.completion)>Ere(a)&&(o[o.length-1]=u),a=u.completion}return o}class Hb{constructor(e,i,r,n,s,o){this.options=e,this.attrs=i,this.tooltip=r,this.timestamp=n,this.selected=s,this.disabled=o}setSelected(e,i){return e==this.selected||e>=this.options.length?this:new Hb(this.options,kre(i,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,i,r,n,s,o){if(n&&!o&&e.some(u=>u.isPending))return n.setDisabled();let a=ost(e,i);if(!a.length)return n&&e.some(u=>u.isPending)?n.setDisabled():null;let l=i.facet(Pn).selectOnOpen?0:-1;if(n&&n.selected!=l&&n.selected!=-1){let u=n.options[n.selected].completion;for(let p=0;p<a.length;p++)if(a[p].completion==u){l=p;break}}return new Hb(a,kre(r,l),{pos:e.reduce((u,p)=>p.hasResult()?Math.min(u,p.from):u,1e8),create:dst,above:s.aboveCursor},n?n.timestamp:Date.now(),l,!1)}map(e){return new Hb(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Hb(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ZI{constructor(e,i,r){this.active=e,this.id=i,this.open=r}static start(){return new ZI(cst,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:i}=e,r=i.facet(Pn),s=(r.override||i.languageDataAt("autocomplete",Tg(i)).map(Jnt)).map(l=>(this.active.find(p=>p.source==l)||new ol(l,this.active.some(p=>p.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(j7));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!ast(s,this.active)||a?o=Hb.build(s,i,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ol(l.source,0):l));for(let l of e.effects)l.is(Kbe)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new ZI(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?lst:ust}}function ast(t,e){if(t==e)return!0;for(let i=0,r=0;;){for(;i<t.length&&!t[i].hasResult();)i++;for(;r<e.length&&!e[r].hasResult();)r++;let n=i==t.length,s=r==e.length;if(n||s)return n==s;if(t[i++].result!=e[r++].result)return!1}}const lst={"aria-autocomplete":"list"},ust={};function kre(t,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(i["aria-activedescendant"]=t+"-"+e),i}const cst=[];function Jbe(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(F7);if(r&&e.activateOnCompletion(r))return 12}let i=t.isUserEvent("input.type");return i&&e.activateOnTyping?5:i?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class ol{constructor(e,i,r=!1){this.source=e,this.state=i,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,i){let r=Jbe(e,i),n=this;(r&8||r&16&&this.touches(e))&&(n=new ol(n.source,0)),r&4&&n.state==0&&(n=new ol(this.source,1)),n=n.updateFor(e,r);for(let s of e.effects)if(s.is(GI))n=new ol(n.source,1,s.value);else if(s.is(D$))n=new ol(n.source,0);else if(s.is(j7))for(let o of s.value)o.source==n.source&&(n=o);return n}updateFor(e,i){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Tg(e.state))}}class Sw extends ol{constructor(e,i,r,n,s,o){super(e,3,i),this.limit=r,this.result=n,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,i){var r;if(!(i&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Tg(e.state);if(a>o||!n||i&2&&(Tg(e.startState)==this.from||a<this.limit))return new ol(this.source,i&4?1:0);let l=e.changes.mapPos(this.limit);return hst(n.validFor,e.state,s,o)?new Sw(this.source,this.explicit,l,n,s,o):n.update&&(n=n.update(n,s,o,new Wbe(e.state,a,!1)))?new Sw(this.source,this.explicit,l,n,n.from,(r=n.to)!==null&&r!==void 0?r:Tg(e.state)):new ol(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Sw(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ol(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function hst(t,e,i,r){if(!t)return!1;let n=e.sliceDoc(i,r);return typeof t=="function"?t(n,i,r,e):Ybe(t,!0).test(n)}const j7=xt.define({map(t,e){return t.map(i=>i.map(e))}}),Kbe=xt.define(),_o=Nn.define({create(){return ZI.start()},update(t,e){return t.update(e)},provide:t=>[S7.from(t,e=>e.tooltip),Pe.contentAttributes.from(t,e=>e.attrs)]});function z7(t,e){const i=e.completion.apply||e.completion.label;let r=t.state.field(_o).active.find(n=>n.source==e.source);return r instanceof Sw?(typeof i=="string"?t.dispatch(Object.assign(Object.assign({},Ynt(t.state,i,r.from,r.to)),{annotations:F7.of(e.completion)})):i(t,e.completion,r.from,r.to),!0):!1}const dst=nst(_o,z7);function Qk(t,e="option"){return i=>{let r=i.state.field(_o,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<i.state.facet(Pn).interactionDelay)return!1;let n=1,s;e=="page"&&(s=Ive(i,r.open.tooltip))&&(n=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+n*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),i.dispatch({effects:Kbe.of(a)}),!0}}const pst=t=>{let e=t.state.field(_o,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Pn).interactionDelay?!1:z7(t,e.open.options[e.open.selected])},Cre=t=>t.state.field(_o,!1)?(t.dispatch({effects:GI.of(!0)}),!0):!1,fst=t=>{let e=t.state.field(_o,!1);return!e||!e.active.some(i=>i.state!=0)?!1:(t.dispatch({effects:D$.of(null)}),!0)};class mst{constructor(e,i){this.active=e,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const yst=50,gst=1e3,vst=Nr.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(_o).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(_o),i=t.state.facet(Pn);if(!t.selectionSet&&!t.docChanged&&t.startState.field(_o)==e)return;let r=t.transactions.some(s=>{let o=Jbe(s,i);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>yst&&Date.now()-o.time>gst){for(let a of o.context.abortListeners)try{a()}catch(l){Eo(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(GI)))&&(this.pendingStart=!0);let n=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(_o);for(let i of e.active)i.isPending&&!this.running.some(r=>r.active.source==i.source)&&this.startQuery(i);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Pn).updateSyncTime))}startQuery(t){let{state:e}=this.view,i=Tg(e),r=new Wbe(e,i,t.explicit,this.view),n=new mst(t,r);this.running.push(n),Promise.resolve(t.source(r)).then(s=>{n.context.aborted||(n.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:D$.of(null)}),Eo(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Pn).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet(Pn),r=this.view.state.field(_o);for(let n=0;n<this.running.length;n++){let s=this.running[n];if(s.done===void 0)continue;if(this.running.splice(n--,1),s.done){let a=Tg(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),u=new Sw(s.active.source,s.active.explicit,l,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let p of s.updates)u=u.update(p,i);if(u.hasResult()){e.push(u);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new ol(s.active.source,0);for(let l of s.updates)a=a.update(l,i);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:j7.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(_o,!1);if(e&&e.tooltip&&this.view.state.facet(Pn).closeOnBlur){let i=e.open&&Ive(this.view,e.open.tooltip);(!i||!i.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:D$.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:GI.of(!1)}),20),this.composing=0}}}),bst=typeof navigator=="object"&&/Win/.test(navigator.platform),wst=dm.highest(Pe.domEventHandlers({keydown(t,e){let i=e.state.field(_o,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||t.key.length>1||t.ctrlKey&&!(bst&&t.altKey)||t.metaKey)return!1;let r=i.open.options[i.open.selected],n=i.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||n.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&z7(e,r),!1}})),ewe=Pe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Ost{constructor(e,i,r,n){this.field=e,this.line=i,this.from=r,this.to=n}}class U7{constructor(e,i,r){this.field=e,this.from=i,this.to=r}map(e){let i=e.mapPos(this.from,-1,Xn.TrackDel),r=e.mapPos(this.to,1,Xn.TrackDel);return i==null||r==null?null:new U7(this.field,i,r)}}class Q7{constructor(e,i){this.lines=e,this.fieldPositions=i}instantiate(e,i){let r=[],n=[i],s=e.doc.lineAt(i),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let u=o,p=/^\t*/.exec(l)[0].length;for(let m=0;m<p;m++)u+=e.facet(G2);n.push(i+u.length-p),l=u+l.slice(p)}r.push(l),i+=l.length+1}let a=this.fieldPositions.map(l=>new U7(l.field,n[l.line]+l.from,n[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let i=[],r=[],n=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",u=-1,p=l.replace(/\\[{}]/g,m=>m[1]);for(let m=0;m<i.length;m++)(a!=null?i[m].seq==a:p&&i[m].name==p)&&(u=m);if(u<0){let m=0;for(;m<i.length&&(a==null||i[m].seq!=null&&i[m].seq<a);)m++;i.splice(m,0,{seq:a,name:p}),u=m;for(let g of n)g.field>=u&&g.field++}n.push(new Ost(u,r.length,s.index,s.index+p.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,u)=>{for(let p of n)p.line==r.length&&p.from>u&&(p.from--,p.to--);return l}),r.push(o)}return new Q7(r,n)}}let Sst=st.widget({widget:new class extends jc{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),_st=st.mark({class:"cm-snippetField"});class BO{constructor(e,i){this.ranges=e,this.active=i,this.deco=st.set(e.map(r=>(r.from==r.to?Sst:_st).range(r.from,r.to)))}map(e){let i=[];for(let r of this.ranges){let n=r.map(e);if(!n)return null;i.push(n)}return new BO(i,this.active)}selectionInsideField(e){return e.ranges.every(i=>this.ranges.some(r=>r.field==this.active&&r.from<=i.from&&r.to>=i.to))}}const X2=xt.define({map(t,e){return t&&t.map(e)}}),xst=xt.define(),V$=Nn.define({create(){return null},update(t,e){for(let i of e.effects){if(i.is(X2))return i.value;if(i.is(xst)&&t)return new BO(t.ranges,i.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Pe.decorations.from(t,e=>e?e.deco:st.none)});function B7(t,e){return me.create(t.filter(i=>i.field==e).map(i=>me.range(i.from,i.to)))}function $st(t){let e=Q7.parse(t);return(i,r,n,s)=>{let{text:o,ranges:a}=e.instantiate(i.state,n),{main:l}=i.state.selection,u={changes:{from:n,to:s==l.from?l.to:s,insert:Qt.of(o)},scrollIntoView:!0,annotations:r?[F7.of(r),Yr.userEvent.of("input.complete")]:void 0};if(a.length&&(u.selection=B7(a,0)),a.some(p=>p.field>0)){let p=new BO(a,0),m=u.effects=[X2.of(p)];i.state.field(V$,!1)===void 0&&m.push(xt.appendConfig.of([V$,Mst,Ast,ewe]))}i.dispatch(i.state.update(u))}}function twe(t){return({state:e,dispatch:i})=>{let r=e.field(V$,!1);if(!r||t<0&&r.active==0)return!1;let n=r.active+t,s=t>0&&!r.ranges.some(o=>o.field==n+t);return i(e.update({selection:B7(r.ranges,n),effects:X2.of(s?null:new BO(r.ranges,n)),scrollIntoView:!0})),!0}}const Tst=({state:t,dispatch:e})=>t.field(V$,!1)?(e(t.update({effects:X2.of(null)})),!0):!1,Est=twe(1),kst=twe(-1),Cst=[{key:"Tab",run:Est,shift:kst},{key:"Escape",run:Tst}],Mre=ze.define({combine(t){return t.length?t[0]:Cst}}),Mst=dm.highest(B2.compute([Mre],t=>t.facet(Mre)));function yo(t,e){return Object.assign(Object.assign({},e),{apply:$st(t)})}const Ast=Pe.domEventHandlers({mousedown(t,e){let i=e.state.field(V$,!1),r;if(!i||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let n=i.ranges.find(s=>s.from<=r&&s.to>=r);return!n||n.field==i.active?!1:(e.dispatch({selection:B7(i.ranges,n.field),effects:X2.of(i.ranges.some(s=>s.field>n.field)?new BO(i.ranges,n.field):null),scrollIntoView:!0}),!0)}}),F$={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},fg=xt.define({map(t,e){let i=e.mapPos(t,-1,Xn.TrackAfter);return i??void 0}}),q7=new class extends Kg{};q7.startSide=1;q7.endSide=-1;const iwe=Nn.define({create(){return Zt.empty},update(t,e){if(t=t.map(e.changes),e.selection){let i=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=i.from&&r<=i.to})}for(let i of e.effects)i.is(fg)&&(t=t.update({add:[q7.range(i.value,i.value+1)]}));return t}});function Ist(){return[Rst,iwe]}const zD="()[]{}<>";function rwe(t){for(let e=0;e<zD.length;e+=2)if(zD.charCodeAt(e)==t)return zD.charAt(e+1);return a7(t<128?t:t+1)}function nwe(t,e){return t.languageDataAt("closeBrackets",e)[0]||F$}const Pst=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Rst=Pe.inputHandler.of((t,e,i,r)=>{if((Pst?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let n=t.state.selection.main;if(r.length>2||r.length==2&&dc(Oo(r,0))==1||e!=n.from||i!=n.to)return!1;let s=Dst(t.state,r);return s?(t.dispatch(s),!0):!1}),Lst=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=nwe(t,t.selection.main.head).brackets||F$.brackets,n=null,s=t.changeByRange(o=>{if(o.empty){let a=Vst(t.doc,o.head);for(let l of r)if(l==a&&JR(t.doc,o.head)==rwe(Oo(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:me.cursor(o.head-l.length)}}return{range:n=o}});return n||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},Nst=[{key:"Backspace",run:Lst}];function Dst(t,e){let i=nwe(t,t.selection.main.head),r=i.brackets||F$.brackets;for(let n of r){let s=rwe(Oo(n,0));if(e==n)return s==n?zst(t,n,r.indexOf(n+n+n)>-1,i):Fst(t,n,s,i.before||F$.before);if(e==s&&swe(t,t.selection.main.from))return jst(t,n,s)}return null}function swe(t,e){let i=!1;return t.field(iwe).between(0,t.doc.length,r=>{r==e&&(i=!0)}),i}function JR(t,e){let i=t.sliceString(e,e+2);return i.slice(0,dc(Oo(i,0)))}function Vst(t,e){let i=t.sliceString(e-2,e);return dc(Oo(i,0))==i.length?i:i.slice(1)}function Fst(t,e,i,r){let n=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:i,from:o.to}],effects:fg.of(o.to+e.length),range:me.range(o.anchor+e.length,o.head+e.length)};let a=JR(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+i,from:o.head},effects:fg.of(o.head+e.length),range:me.cursor(o.head+e.length)}:{range:n=o}});return n?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function jst(t,e,i){let r=null,n=t.changeByRange(s=>s.empty&&JR(t.doc,s.head)==i?{changes:{from:s.head,to:s.head+i.length,insert:i},range:me.cursor(s.head+i.length)}:r={range:s});return r?null:t.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function zst(t,e,i,r){let n=r.stringPrefixes||F$.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:fg.of(a.to+e.length),range:me.range(a.anchor+e.length,a.head+e.length)};let l=a.head,u=JR(t.doc,l),p;if(u==e){if(Are(t,l))return{changes:{insert:e+e,from:l},effects:fg.of(l+e.length),range:me.cursor(l+e.length)};if(swe(t,l)){let g=i&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+g.length,insert:g},range:me.cursor(l+g.length)}}}else{if(i&&t.sliceDoc(l-2*e.length,l)==e+e&&(p=Ire(t,l-2*e.length,n))>-1&&Are(t,p))return{changes:{insert:e+e+e+e,from:l},effects:fg.of(l+e.length),range:me.cursor(l+e.length)};if(t.charCategorizer(l)(u)!=ir.Word&&Ire(t,l,n)>-1&&!Ust(t,l,e,n))return{changes:{insert:e+e,from:l},effects:fg.of(l+e.length),range:me.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Are(t,e){let i=$r(t).resolveInner(e+1);return i.parent&&i.from==e}function Ust(t,e,i,r){let n=$r(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(n.from,Math.min(n.to,n.from+i.length+s)),l=a.indexOf(i);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let p=n.firstChild;for(;p&&p.from==n.from&&p.to-p.from>i.length+l;){if(t.sliceDoc(p.to-i.length,p.to)==i)return!1;p=p.firstChild}return!0}let u=n.to==e&&n.parent;if(!u)break;n=u}return!1}function Ire(t,e,i){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=ir.Word)return e;for(let n of i){let s=e-n.length;if(t.sliceDoc(s,e)==n&&r(t.sliceDoc(s-1,s))!=ir.Word)return s}return-1}function Qst(t={}){return[wst,_o,Pn.of(t),vst,Bst,ewe]}const owe=[{key:"Ctrl-Space",run:Cre},{mac:"Alt-`",run:Cre},{key:"Escape",run:fst},{key:"ArrowDown",run:Qk(!0)},{key:"ArrowUp",run:Qk(!1)},{key:"PageDown",run:Qk(!0,"page")},{key:"PageUp",run:Qk(!1,"page")},{key:"Enter",run:pst}],Bst=dm.highest(B2.computeN([Pn],t=>t.facet(Pn).defaultKeymap?[owe]:[]));class Pre{constructor(e,i,r){this.from=e,this.to=i,this.diagnostic=r}}class ng{constructor(e,i,r){this.diagnostics=e,this.panel=i,this.selected=r}static init(e,i,r){let n=e,s=r.facet(j$).markerFilter;s&&(n=s(n,r));let o=e.slice().sort((m,g)=>m.from-g.from||m.to-g.to),a=new Od,l=[],u=0;for(let m=0;;){let g=m==o.length?null:o[m];if(!g&&!l.length)break;let w,O;for(l.length?(w=u,O=l.reduce((x,T)=>Math.min(x,T.to),g&&g.from>w?g.from:1e8)):(w=g.from,O=g.to,l.push(g),m++);m<o.length;){let x=o[m];if(x.from==w&&(x.to>x.from||x.to==w))l.push(x),m++,O=Math.min(x.to,O);else{O=Math.min(x.from,O);break}}let _=rot(l);if(l.some(x=>x.from==x.to||x.from==x.to-1&&r.doc.lineAt(x.from).to==x.from))a.add(w,w,st.widget({widget:new Kst(_),diagnostics:l.slice()}));else{let x=l.reduce((T,E)=>E.markClass?T+" "+E.markClass:T,"");a.add(w,O,st.mark({class:"cm-lintRange cm-lintRange-"+_+x,diagnostics:l.slice(),inclusiveEnd:l.some(T=>T.to>O)}))}u=O;for(let x=0;x<l.length;x++)l[x].to<=u&&l.splice(x--,1)}let p=a.finish();return new ng(p,i,Kw(p))}}function Kw(t,e=null,i=0){let r=null;return t.between(i,1e9,(n,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new Pre(n,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new Pre(r.from,s,r.diagnostic)}}),r}function qst(t,e){let i=e.pos,r=e.end||i,n=t.state.facet(j$).hideOn(t,i,r);if(n!=null)return n;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(awe))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function Gst(t,e){return t.field(oa,!1)?e:e.concat(xt.appendConfig.of(not))}const awe=xt.define(),G7=xt.define(),lwe=xt.define(),oa=Nn.define({create(){return new ng(st.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let i=t.diagnostics.map(e.changes),r=null,n=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=Kw(i,t.selected.diagnostic,s)||Kw(i,null,s)}!i.size&&n&&e.state.facet(j$).autoPanel&&(n=null),t=new ng(i,n,r)}for(let i of e.effects)if(i.is(awe)){let r=e.state.facet(j$).autoPanel?i.value.length?z$.open:null:t.panel;t=ng.init(i.value,r,e.state)}else i.is(G7)?t=new ng(t.diagnostics,i.value?z$.open:null,t.selected):i.is(lwe)&&(t=new ng(t.diagnostics,t.panel,i.value));return t},provide:t=>[I$.from(t,e=>e.panel),Pe.decorations.from(t,e=>e.diagnostics)]}),Zst=st.mark({class:"cm-lintRange cm-lintRange-active"});function Hst(t,e,i){let{diagnostics:r}=t.state.field(oa),n,s=-1,o=-1;r.between(e-(i<0?1:0),e+(i>0?1:0),(l,u,{spec:p})=>{if(e>=l&&e<=u&&(l==u||(e>l||i>0)&&(e<u||i<0)))return n=p.diagnostics,s=l,o=u,!1});let a=t.state.facet(j$).tooltipFilter;return n&&a&&(n=a(n,t.state)),n?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Wst(t,n)}}}:null}function Wst(t,e){return _i("ul",{class:"cm-tooltip-lint"},e.map(i=>cwe(t,i,!1)))}const Xst=t=>{let e=t.state.field(oa,!1);(!e||!e.panel)&&t.dispatch({effects:Gst(t.state,[G7.of(!0)])});let i=A$(t,z$.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},Rre=t=>{let e=t.state.field(oa,!1);return!e||!e.panel?!1:(t.dispatch({effects:G7.of(!1)}),!0)},Yst=t=>{let e=t.state.field(oa,!1);if(!e)return!1;let i=t.state.selection.main,r=e.diagnostics.iter(i.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==i.from&&r.to==i.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Jst=[{key:"Mod-Shift-m",run:Xst,preventDefault:!0},{key:"F8",run:Yst}],j$=ze.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Fc(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,i)=>e?i?r=>e(r)||i(r):e:i}))}});function uwe(t){let e=[];if(t)e:for(let{name:i}of t){for(let r=0;r<i.length;r++){let n=i[r];if(/[a-zA-Z]/.test(n)&&!e.some(s=>s.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function cwe(t,e,i){var r;let n=i?uwe(e.actions):[];return _i("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},_i("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=g=>{if(g.preventDefault(),a)return;a=!0;let w=Kw(t.state.field(oa).diagnostics,e);w&&s.apply(t,w.from,w.to)},{name:u}=s,p=n[o]?u.indexOf(n[o]):-1,m=p<0?u:[u.slice(0,p),_i("u",u.slice(p,p+1)),u.slice(p+1)];return _i("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${p<0?"":` (access key "${n[o]})"`}.`},m)}),e.source&&_i("div",{class:"cm-diagnosticSource"},e.source))}class Kst extends jc{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return _i("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Lre{constructor(e,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=cwe(e,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class z${constructor(e){this.view=e,this.items=[];let i=n=>{if(n.keyCode==27)Rre(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=uwe(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==n.keyCode){let l=Kw(this.view.state.field(oa).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;n.preventDefault()},r=n=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(n.target)&&this.moveSelection(s)};this.list=_i("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:r}),this.dom=_i("div",{class:"cm-panel-lint"},this.list,_i("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Rre(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(oa).selected;if(!e)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==e.diagnostic)return i;return-1}update(){let{diagnostics:e,selected:i}=this.view.state.field(oa),r=0,n=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:u})=>{for(let p of u.diagnostics){if(o.has(p))continue;o.add(p);let m=-1,g;for(let w=r;w<this.items.length;w++)if(this.items[w].diagnostic==p){m=w;break}m<0?(g=new Lre(this.view,p),this.items.splice(r,0,g),n=!0):(g=this.items[m],m>r&&(this.items.splice(r,m-r),n=!0)),i&&g.diagnostic==i.diagnostic?g.dom.hasAttribute("aria-selected")||(g.dom.setAttribute("aria-selected","true"),s=g):g.dom.hasAttribute("aria-selected")&&g.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Lre(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let u=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/u:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function i(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)i();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)i()}moveSelection(e){if(this.selectedIndex<0)return;let i=this.view.state.field(oa),r=Kw(i.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:lwe.of(r)})}static open(e){return new z$(e)}}function eot(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Bk(t){return eot(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const tot=Pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Bk("#d11")},".cm-lintRange-warning":{backgroundImage:Bk("orange")},".cm-lintRange-info":{backgroundImage:Bk("#999")},".cm-lintRange-hint":{backgroundImage:Bk("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function iot(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function rot(t){let e="hint",i=1;for(let r of t){let n=iot(r.severity);n>i&&(i=n,e=r.severity)}return e}const not=[oa,Pe.decorations.compute([oa],t=>{let{selected:e,panel:i}=t.field(oa);return!e||!i||e.from==e.to?st.none:st.set([Zst.range(e.from,e.to)])}),Ftt(Hst,{hideOn:qst}),tot];var em=function(e){e===void 0&&(e={});var{crosshairCursor:i=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(Nst)),e.defaultKeymap!==!1&&(r=r.concat(bnt)),e.searchKeymap!==!1&&(r=r.concat(qnt)),e.historyKeymap!==!1&&(r=r.concat(krt)),e.foldKeymap!==!1&&(r=r.concat(Qit)),e.completionKeymap!==!1&&(r=r.concat(owe)),e.lintKeymap!==!1&&(r=r.concat(Jst));var n=[];return e.lineNumbers!==!1&&n.push(Xtt()),e.highlightActiveLineGutter!==!1&&n.push(Ktt()),e.highlightSpecialChars!==!1&&n.push(ftt()),e.history!==!1&&n.push(brt()),e.foldGutter!==!1&&n.push(Zit()),e.drawSelection!==!1&&n.push(rtt()),e.dropCursor!==!1&&n.push(ltt()),e.allowMultipleSelections!==!1&&n.push(zt.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&n.push(Rit()),e.syntaxHighlighting!==!1&&n.push(A7(Yit,{fallback:!0})),e.bracketMatching!==!1&&n.push(nrt()),e.closeBrackets!==!1&&n.push(Ist()),e.autocompletion!==!1&&n.push(Qst()),e.rectangularSelection!==!1&&n.push(ktt()),i!==!1&&n.push(Att()),e.highlightActiveLine!==!1&&n.push(wtt()),e.highlightSelectionMatches!==!1&&n.push(Tnt()),e.tabSize&&typeof e.tabSize=="number"&&n.push(G2.of(" ".repeat(e.tabSize))),n.concat([B2.of(r.flat())]).filter(Boolean)};const sot="#e5c07b",Nre="#e06c75",oot="#56b6c2",aot="#ffffff",VM="#abb2bf",uU="#7d8799",lot="#61afef",uot="#98c379",Dre="#d19a66",cot="#c678dd",hot="#21252b",Vre="#2c313a",Fre="#282c34",UD="#353a42",dot="#3E4451",jre="#528bff",pot=Pe.theme({"&":{color:VM,backgroundColor:Fre},".cm-content":{caretColor:jre},".cm-cursor, .cm-dropCursor":{borderLeftColor:jre},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:dot},".cm-panels":{backgroundColor:hot,color:VM},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Fre,color:uU,border:"none"},".cm-activeLineGutter":{backgroundColor:Vre},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:UD},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:UD,borderBottomColor:UD},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Vre,color:VM}}},{dark:!0}),fot=zO.define([{tag:N.keyword,color:cot},{tag:[N.name,N.deleted,N.character,N.propertyName,N.macroName],color:Nre},{tag:[N.function(N.variableName),N.labelName],color:lot},{tag:[N.color,N.constant(N.name),N.standard(N.name)],color:Dre},{tag:[N.definition(N.name),N.separator],color:VM},{tag:[N.typeName,N.className,N.number,N.changed,N.annotation,N.modifier,N.self,N.namespace],color:sot},{tag:[N.operator,N.operatorKeyword,N.url,N.escape,N.regexp,N.link,N.special(N.string)],color:oot},{tag:[N.meta,N.comment],color:uU},{tag:N.strong,fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.link,color:uU,textDecoration:"underline"},{tag:N.heading,fontWeight:"bold",color:Nre},{tag:[N.atom,N.bool,N.special(N.variableName)],color:Dre},{tag:[N.processingInstruction,N.string,N.inserted],color:uot},{tag:N.invalid,color:aot}]),mot=[pot,A7(fot)];var yot=Pe.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),got=function(e){e===void 0&&(e={});var{indentWithTab:i=!0,editable:r=!0,readOnly:n=!1,theme:s="light",placeholder:o="",basicSetup:a=!0}=e,l=[];switch(i&&l.unshift(B2.of([wnt])),a&&(typeof a=="boolean"?l.unshift(em()):l.unshift(em(a))),o&&l.unshift(xtt(o)),s){case"light":l.push(yot);break;case"dark":l.push(mot);break;case"none":break;default:l.push(s);break}return r===!1&&l.push(Pe.editable.of(!1)),n&&l.push(zt.readOnly.of(!0)),[...l]},vot=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)}),zre=Vc.define(),bot=[];function wot(t){var{value:e,selection:i,onChange:r,onStatistics:n,onCreateEditor:s,onUpdate:o,extensions:a=bot,autoFocus:l,theme:u="light",height:p=null,minHeight:m=null,maxHeight:g=null,width:w=null,minWidth:O=null,maxWidth:_=null,placeholder:x="",editable:T=!0,readOnly:E=!1,indentWithTab:k=!0,basicSetup:M=!0,root:R,initialState:D}=t,[L,F]=le.useState(),[j,B]=le.useState(),[W,ie]=le.useState(),oe=Pe.theme({"&":{height:p,minHeight:m,maxHeight:g,width:w,minWidth:O,maxWidth:_},"& .cm-scroller":{height:"100% !important"}}),ae=Pe.updateListener.of(he=>{if(he.docChanged&&typeof r=="function"&&!he.transactions.some(Q=>Q.annotation(zre))){var ye=he.state.doc,Ae=ye.toString();r(Ae,he)}n&&n(vot(he))}),Ee=got({theme:u,editable:T,readOnly:E,placeholder:x,indentWithTab:k,basicSetup:M}),ue=[ae,oe,...Ee];return o&&typeof o=="function"&&ue.push(Pe.updateListener.of(o)),ue=ue.concat(a),le.useLayoutEffect(()=>{if(L&&!W){var he={doc:e,selection:i,extensions:ue},ye=D?zt.fromJSON(D.json,he,D.fields):zt.create(he);if(ie(ye),!j){var Ae=new Pe({state:ye,parent:L,root:R});B(Ae),s&&s(Ae,ye)}}return()=>{j&&(ie(void 0),B(void 0))}},[L,W]),le.useEffect(()=>{t.container&&F(t.container)},[t.container]),le.useEffect(()=>()=>{j&&(j.destroy(),B(void 0))},[j]),le.useEffect(()=>{l&&j&&j.focus()},[l,j]),le.useEffect(()=>{j&&j.dispatch({effects:xt.reconfigure.of(ue)})},[u,a,p,m,g,w,O,_,x,T,E,k,M,r,o]),le.useEffect(()=>{if(e!==void 0){var he=j?j.state.doc.toString():"";j&&e!==he&&j.dispatch({changes:{from:0,to:he.length,insert:e||""},annotations:[zre.of(!0)]})}},[e,j]),{state:W,setState:ie,view:j,setView:B,container:L,setContainer:F}}var Oot=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],n0=le.forwardRef((t,e)=>{var{className:i,value:r="",selection:n,extensions:s=[],onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:u,autoFocus:p,theme:m="light",height:g,minHeight:w,maxHeight:O,width:_,minWidth:x,maxWidth:T,basicSetup:E,placeholder:k,indentWithTab:M,editable:R,readOnly:D,root:L,initialState:F}=t,j=JJe(t,Oot),B=le.useRef(null),{state:W,view:ie,container:oe,setContainer:ae}=wot({root:L,value:r,autoFocus:p,theme:m,height:g,minHeight:w,maxHeight:O,width:_,minWidth:x,maxWidth:T,basicSetup:E,placeholder:k,indentWithTab:M,editable:R,readOnly:D,selection:n,onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:u,extensions:s,initialState:F});le.useImperativeHandle(e,()=>({editor:B.current,state:W,view:ie}),[B,oe,W,ie]);var Ee=le.useCallback(he=>{B.current=he,ae(he)},[ae]);if(typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var ue=typeof m=="string"?"cm-theme-"+m:"cm-theme";return Be.jsx("div",x$({ref:Ee,className:""+ue+(i?" "+i:"")},j))});n0.displayName="CodeMirror";var Ure={};class HI{constructor(e,i,r,n,s,o,a,l,u,p=0,m){this.p=e,this.stack=i,this.state=r,this.reducePos=n,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=u,this.lookAhead=p,this.parent=m}toString(){return`[${this.stack.filter((e,i)=>i%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,i,r=0){let n=e.parser.context;return new HI(e,[],i,r,r,0,[],0,n?new Qre(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,i){this.stack.push(this.state,i,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var i;let r=e>>19,n=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(n);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,n,!0),this.reducePos),n<s.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(n,this.reducePos);return}let l=this.stack.length-(r-1)*3-(e&262144?6:0),u=l?this.stack[l-2]:this.p.ranges[0].from,p=this.reducePos-u;p>=2e3&&!(!((i=this.p.parser.nodeSet.types[n])===null||i===void 0)&&i.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=p));let m=l?this.stack[l-1]:0,g=this.bufferBase+this.buffer.length-m;if(n<s.minRepeatTerm||e&131072){let w=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,u,w,g+4,!0)}if(e&262144)this.state=this.stack[l];else{let w=this.stack[l-3];this.state=s.getGoto(w,n,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(n,u)}storeNode(e,i,r,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(i==r)return;if(o.buffer[a-2]>=i){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,i,r,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>r;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4)}this.buffer[o]=e,this.buffer[o+1]=i,this.buffer[o+2]=r,this.buffer[o+3]=n}}shift(e,i,r,n){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(n>this.pos||i<=o.maxNode)&&(this.pos=n,o.stateFlag(s,1)||(this.reducePos=n)),this.pushState(s,r),this.shiftContext(i,r),i<=o.maxNode&&this.buffer.push(i,r,n,4)}else this.pos=n,this.shiftContext(i,r),i<=this.p.parser.maxNode&&this.buffer.push(i,r,n,4)}apply(e,i,r,n){e&65536?this.reduce(e):this.shift(e,i,r,n)}useNode(e,i){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(i,n),this.buffer.push(r,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,i=e.buffer.length;for(;i>0&&e.buffer[i-2]>e.reducePos;)i-=4;let r=e.buffer.slice(i),n=e.bufferBase+i;for(;e&&n==e.bufferBase;)e=e.parent;return new HI(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,i){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,i,4),this.storeNode(0,this.pos,i,r?8:4),this.pos=this.reducePos=i,this.score-=190}canShift(e){for(let i=new Sot(this);;){let r=this.p.parser.stateSlot(i.state,4)||this.p.parser.hasAction(i.state,e);if(r==0)return!1;if((r&65536)==0)return!0;i.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let i=this.p.parser.nextStates(this.state);if(i.length>8||this.stack.length>=120){let n=[];for(let s=0,o;s<i.length;s+=2)(o=i[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(i[s],o);if(this.stack.length<120)for(let s=0;n.length<8&&s<i.length;s+=2){let o=i[s+1];n.some((a,l)=>l&1&&a==o)||n.push(i[s],o)}i=n}let r=[];for(let n=0;n<i.length&&r.length<4;n+=2){let s=i[n+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(i[n],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,i=e.stateSlot(this.state,5);if((i&65536)==0)return!1;if(!e.validAction(this.state,i)){let r=i>>19,n=i&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],n,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;i=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(i),!0}findForcedReduction(){let{parser:e}=this.p,i=[],r=(n,s)=>{if(!i.includes(n))return i.push(n),e.allActions(n,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let l=o&65535,u=this.stack.length-a*3;if(u>=0&&e.getGoto(this.stack[u],l,!1)>=0)return a<<19|65536|l}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let i=0;i<this.stack.length;i+=3)if(this.stack[i]!=e.stack[i])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,i){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(i)))}reduceContext(e,i){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(i)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let i=new Qre(this.curContext.tracker,e);i.hash!=this.curContext.hash&&this.emitContext(),this.curContext=i}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Qre{constructor(e,i){this.tracker=e,this.context=i,this.hash=e.strict?e.hash(i):0}}class Sot{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let i=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],i,!0);this.state=n}}class WI{constructor(e,i,r){this.stack=e,this.pos=i,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,i=e.bufferBase+e.buffer.length){return new WI(e,i,i-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new WI(this.stack,this.pos,this.index)}}function Y_(t,e=Uint16Array){if(typeof t!="string")return t;let i=null;for(let r=0,n=0;r<t.length;){let s=0;for(;;){let o=t.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}i?i[n++]=s:i=new e(s)}return i}class FM{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Bre=new FM;class _ot{constructor(e,i){this.input=e,this.ranges=i,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Bre,this.rangeIndex=0,this.pos=this.chunkPos=i[0].from,this.range=i[0],this.end=i[i.length-1].to,this.readNext()}resolveOffset(e,i){let r=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!n)return null;let o=this.ranges[--n];s-=r.from-o.to,r=o}for(;i<0?s>r.to:s>=r.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let i of this.ranges)if(i.to>e)return Math.max(e,i.from);return this.end}peek(e){let i=this.chunkOff+e,r,n;if(i>=0&&i<this.chunk.length)r=this.pos+e,n=this.chunk.charCodeAt(i);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),n=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),n}acceptToken(e,i=0){let r=i?this.resolveOffset(i,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,i){this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:i}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=i,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),i=this.pos+e.length;this.chunk=i>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,i){if(i?(this.token=i,i.start=e,i.lookAhead=e+1,i.value=i.extended=-1):this.token=Bre,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,i){if(e>=this.chunkPos&&i<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,i-this.chunkPos);if(e>=this.chunk2Pos&&i<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,i-this.chunk2Pos);if(e>=this.range.from&&i<=this.range.to)return this.input.read(e,i);let r="";for(let n of this.ranges){if(n.from>=i)break;n.to>e&&(r+=this.input.read(Math.max(n.from,e),Math.min(n.to,i)))}return r}}class _w{constructor(e,i){this.data=e,this.id=i}token(e,i){let{parser:r}=i.p;hwe(this.data,e,i,this.id,r.data,r.tokenPrecTable)}}_w.prototype.contextual=_w.prototype.fallback=_w.prototype.extend=!1;class XI{constructor(e,i,r){this.precTable=i,this.elseToken=r,this.data=typeof e=="string"?Y_(e):e}token(e,i){let r=e.pos,n=0;for(;;){let s=e.next<0,o=e.resolveOffset(1,1);if(hwe(this.data,e,i,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(s||n++,o==null)break;e.reset(o,e.token)}n&&(e.reset(r,e.token),e.acceptToken(this.elseToken,n))}}XI.prototype.contextual=_w.prototype.fallback=_w.prototype.extend=!1;class yl{constructor(e,i={}){this.token=e,this.contextual=!!i.contextual,this.fallback=!!i.fallback,this.extend=!!i.extend}}function hwe(t,e,i,r,n,s){let o=0,a=1<<r,{dialect:l}=i.p.parser;e:for(;(a&t[o])!=0;){let u=t[o+1];for(let w=o+3;w<u;w+=2)if((t[w+1]&a)>0){let O=t[w];if(l.allows(O)&&(e.token.value==-1||e.token.value==O||xot(O,e.token.value,n,s))){e.acceptToken(O);break}}let p=e.next,m=0,g=t[o+2];if(e.next<0&&g>m&&t[u+g*3-3]==65535){o=t[u+g*3-1];continue e}for(;m<g;){let w=m+g>>1,O=u+w+(w<<1),_=t[O],x=t[O+1]||65536;if(p<_)g=w;else if(p>=x)m=w+1;else{o=t[O+2],e.advance();continue e}}break}}function qre(t,e,i){for(let r=e,n;(n=t[r])!=65535;r++)if(n==i)return r-e;return-1}function xot(t,e,i,r){let n=qre(i,r,e);return n<0||qre(i,r,t)<n}const Uo=typeof process<"u"&&Ure&&/\bparse\b/.test(Ure.LOG);let QD=null;function Gre(t,e,i){let r=t.cursor(Ri.IncludeAnonymous);for(r.moveTo(e);;)if(!(i<0?r.childBefore(e):r.childAfter(e)))for(;;){if((i<0?r.to<e:r.from>e)&&!r.type.isError)return i<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(i<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return i<0?0:t.length}}class $ot{constructor(e,i){this.fragments=e,this.nodeSet=i,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Gre(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Gre(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let i=this.trees.length-1;if(i<0)return this.nextFragment(),null;let r=this.trees[i],n=this.index[i];if(n==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[n],o=this.start[i]+r.positions[n];if(o>e)return this.nextStart=o,null;if(s instanceof ur){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(Ct.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[i]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[i]++,this.nextStart=o+s.length}}}class Tot{constructor(e,i){this.stream=i,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new FM)}getActions(e){let i=0,r=null,{parser:n}=e.p,{tokenizers:s}=n,o=n.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<s.length;u++){if((1<<u&o)==0)continue;let p=s[u],m=this.tokens[u];if(!(r&&!p.fallback)&&((p.contextual||m.start!=e.pos||m.mask!=o||m.context!=a)&&(this.updateCachedToken(m,p,e),m.mask=o,m.context=a),m.lookAhead>m.end+25&&(l=Math.max(m.lookAhead,l)),m.value!=0)){let g=i;if(m.extended>-1&&(i=this.addActions(e,m.extended,m.end,i)),i=this.addActions(e,m.value,m.end,i),!p.extend&&(r=m,i>g))break}}for(;this.actions.length>i;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new FM,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,i=this.addActions(e,r.value,r.end,i)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let i=new FM,{pos:r,p:n}=e;return i.start=r,i.end=Math.min(r+1,n.stream.end),i.value=r==n.stream.end?n.parser.eofTerm:0,i}updateCachedToken(e,i,r){let n=this.stream.clipPos(r.pos);if(i.token(this.stream.reset(n,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,i,r,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=i,this.actions[n++]=r,n}addActions(e,i,r,n){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let u=o.stateSlot(s,l?2:1);;u+=3){if(a[u]==65535)if(a[u+1]==1)u=td(a,u+2);else{n==0&&a[u+1]==2&&(n=this.putAction(td(a,u+2),i,r,n));break}a[u]==i&&(n=this.putAction(td(a,u+1),i,r,n))}return n}}class Eot{constructor(e,i,r,n){this.parser=e,this.input=i,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new _ot(i,n),this.tokens=new Tot(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[HI.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new $ot(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,i=this.minStackPos,r=this.stacks=[],n,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>i)r.push(a);else{if(this.advanceStack(a,r,e))continue;{n||(n=[],s=[]),n.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=n&&Cot(n);if(o)return Uo&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Uo&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,r);if(o)return Uo&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>i)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let u=r[l];if(a.sameState(u)||a.buffer.length>500&&u.buffer.length>500)if((a.score-u.score||a.buffer.length-u.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,i,r){let n=e.pos,{parser:s}=this,o=Uo?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,p=u?e.curContext.hash:0;for(let m=this.fragments.nodeAt(n);m;){let g=this.parser.nodeSet.types[m.type.id]==m.type?s.getGoto(e.state,m.type.id):-1;if(g>-1&&m.length&&(!u||(m.prop(Ct.contextHash)||0)==p))return e.useNode(m,g),Uo&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(m.type.id)})`),!0;if(!(m instanceof ur)||m.children.length==0||m.positions[0]>0)break;let w=m.children[0];if(w instanceof ur&&m.positions[0]==0)m=w;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),Uo&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let p=l[u++],m=l[u++],g=l[u++],w=u==l.length||!r,O=w?e:e.split(),_=this.tokens.mainToken;if(O.apply(p,m,_?_.start:O.pos,g),Uo&&console.log(o+this.stackID(O)+` (via ${(p&65536)==0?"shift":`reduce of ${s.getName(p&65535)}`} for ${s.getName(m)} @ ${n}${O==e?"":", split"})`),w)return!0;O.pos>n?i.push(O):r.push(O)}return!1}advanceFully(e,i){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return Zre(e,i),!0}}runRecovery(e,i,r){let n=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=i[o<<1],u=i[(o<<1)+1],p=Uo?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),Uo&&console.log(p+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let m=a.split(),g=p;for(let w=0;m.forceReduce()&&w<10&&(Uo&&console.log(g+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,r));w++)Uo&&(g=this.stackID(m)+" -> ");for(let w of a.recoverByInsert(l))Uo&&console.log(p+this.stackID(w)+" (via recover-insert)"),this.advanceFully(w,r);this.stream.end>a.pos?(u==a.pos&&(u++,l=0),a.recoverByDelete(l,u),Uo&&console.log(p+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),Zre(a,r)):(!n||n.score<a.score)&&(n=a)}return n}stackToTree(e){return e.close(),ur.build({buffer:WI.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let i=(QD||(QD=new WeakMap)).get(e);return i||QD.set(e,i=String.fromCodePoint(this.nextStackID++)),i+e}}function Zre(t,e){for(let i=0;i<e.length;i++){let r=e[i];if(r.pos==t.pos&&r.sameState(t)){e[i].score<t.score&&(e[i]=t);return}}e.push(t)}class kot{constructor(e,i,r){this.source=e,this.flags=i,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const BD=t=>t;class dwe{constructor(e){this.start=e.start,this.shift=e.shift||BD,this.reduce=e.reduce||BD,this.reuse=e.reuse||BD,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class eO extends zve{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let i=e.nodeNames.split(" ");this.minRepeatTerm=i.length;for(let a=0;a<e.repeatNodeCount;a++)i.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),n=[];for(let a=0;a<i.length;a++)n.push([]);function s(a,l,u){n[a].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Ct[l]);for(let u=1;u<a.length;){let p=a[u++];if(p>=0)s(p,l,a[u++]);else{let m=a[u+-p];for(let g=-p;g>0;g--)s(a[u++],l,m);u++}}}this.nodeSet=new _7(i.map((a,l)=>eo.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:n[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Nve;let o=Y_(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(Hre),this.states=Y_(e.states,Uint32Array),this.data=Y_(e.stateData),this.goto=Y_(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new _w(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,i,r){let n=new Eot(this,e,i,r);for(let s of this.wrappers)n=s(n,e,i,r);return n}getGoto(e,i,r=!1){let n=this.goto;if(i>=n[0])return-1;for(let s=n[i+1];;){let o=n[s++],a=o&1,l=n[s++];if(a&&r)return l;for(let u=s+(o>>1);s<u;s++)if(n[s]==e)return l;if(a)return-1}}hasAction(e,i){let r=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=td(r,s+2)];else{if(r[s+1]==2)return td(r,s+2);break}if(o==i||o==0)return td(r,s+1)}return 0}stateSlot(e,i){return this.states[e*6+i]}stateFlag(e,i){return(this.stateSlot(e,0)&i)>0}validAction(e,i){return!!this.allActions(e,r=>r==i?!0:null)}allActions(e,i){let r=this.stateSlot(e,4),n=r?i(r):void 0;for(let s=this.stateSlot(e,1);n==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=td(this.data,s+2);else break;n=i(td(this.data,s+1))}return n}nextStates(e){let i=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=td(this.data,r+2);else break;if((this.data[r+2]&1)==0){let n=this.data[r+1];i.some((s,o)=>o&1&&s==n)||i.push(this.data[r],n)}}return i}configure(e){let i=Object.assign(Object.create(eO.prototype),this);if(e.props&&(i.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);i.top=r}return e.tokenizers&&(i.tokenizers=this.tokenizers.map(r=>{let n=e.tokenizers.find(s=>s.from==r);return n?n.to:r})),e.specializers&&(i.specializers=this.specializers.slice(),i.specializerSpecs=this.specializerSpecs.map((r,n)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return i.specializers[n]=Hre(o),o})),e.contextTracker&&(i.context=e.contextTracker),e.dialect&&(i.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(i.strict=e.strict),e.wrap&&(i.wrappers=i.wrappers.concat(e.wrap)),e.bufferLength!=null&&(i.bufferLength=e.bufferLength),i}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let i=this.dynamicPrecedences;return i==null?0:i[e]||0}parseDialect(e){let i=Object.keys(this.dialects),r=i.map(()=>!1);if(e)for(let s of e.split(" ")){let o=i.indexOf(s);o>=0&&(r[o]=!0)}let n=null;for(let s=0;s<i.length;s++)if(!r[s])for(let o=this.dialects[i[s]],a;(a=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[a]=1;return new kot(e,r,n)}static deserialize(e){return new eO(e)}}function td(t,e){return t[e]|t[e+1]<<16}function Cot(t){let e=null;for(let i of t){let r=i.p.stoppedAt;(i.pos==i.p.stream.end||r!=null&&i.pos>r)&&i.p.parser.stateFlag(i.state,2)&&(!e||e.score<i.score)&&(e=i)}return e}function Hre(t){if(t.external){let e=t.extend?1:0;return(i,r)=>t.external(i,r)<<1|e}return t.get}const Mot=54,Aot=1,Iot=55,Pot=2,Rot=56,Lot=3,Wre=4,Not=5,YI=6,pwe=7,fwe=8,mwe=9,ywe=10,Dot=11,Vot=12,Fot=13,qD=57,jot=14,Xre=58,gwe=20,zot=22,vwe=23,Uot=24,cU=26,bwe=27,Qot=28,Bot=31,qot=34,Got=36,Zot=37,Hot=0,Wot=1,Xot={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},Yot={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},Yre={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function Jot(t){return t==45||t==46||t==58||t>=65&&t<=90||t==95||t>=97&&t<=122||t>=161}function wwe(t){return t==9||t==10||t==13||t==32}let Jre=null,Kre=null,ene=0;function hU(t,e){let i=t.pos+e;if(ene==i&&Kre==t)return Jre;let r=t.peek(e);for(;wwe(r);)r=t.peek(++e);let n="";for(;Jot(r);)n+=String.fromCharCode(r),r=t.peek(++e);return Kre=t,ene=i,Jre=n?n.toLowerCase():r==Kot||r==eat?void 0:null}const Owe=60,JI=62,Z7=47,Kot=63,eat=33,tat=45;function tne(t,e){this.name=t,this.parent=e}const iat=[YI,ywe,pwe,fwe,mwe],rat=new dwe({start:null,shift(t,e,i,r){return iat.indexOf(e)>-1?new tne(hU(r,1)||"",t):t},reduce(t,e){return e==gwe&&t?t.parent:t},reuse(t,e,i,r){let n=e.type.id;return n==YI||n==Got?new tne(hU(r,1)||"",t):t},strict:!1}),nat=new yl((t,e)=>{if(t.next!=Owe){t.next<0&&e.context&&t.acceptToken(qD);return}t.advance();let i=t.next==Z7;i&&t.advance();let r=hU(t,0);if(r===void 0)return;if(!r)return t.acceptToken(i?jot:YI);let n=e.context?e.context.name:null;if(i){if(r==n)return t.acceptToken(Dot);if(n&&Yot[n])return t.acceptToken(qD,-2);if(e.dialectEnabled(Hot))return t.acceptToken(Vot);for(let s=e.context;s;s=s.parent)if(s.name==r)return;t.acceptToken(Fot)}else{if(r=="script")return t.acceptToken(pwe);if(r=="style")return t.acceptToken(fwe);if(r=="textarea")return t.acceptToken(mwe);if(Xot.hasOwnProperty(r))return t.acceptToken(ywe);n&&Yre[n]&&Yre[n][r]?t.acceptToken(qD,-1):t.acceptToken(YI)}},{contextual:!0}),sat=new yl(t=>{for(let e=0,i=0;;i++){if(t.next<0){i&&t.acceptToken(Xre);break}if(t.next==tat)e++;else if(t.next==JI&&e>=2){i>=3&&t.acceptToken(Xre,-2);break}else e=0;t.advance()}});function oat(t){for(;t;t=t.parent)if(t.name=="svg"||t.name=="math")return!0;return!1}const aat=new yl((t,e)=>{if(t.next==Z7&&t.peek(1)==JI){let i=e.dialectEnabled(Wot)||oat(e.context);t.acceptToken(i?Not:Wre,2)}else t.next==JI&&t.acceptToken(Wre,1)});function H7(t,e,i){let r=2+t.length;return new yl(n=>{for(let s=0,o=0,a=0;;a++){if(n.next<0){a&&n.acceptToken(e);break}if(s==0&&n.next==Owe||s==1&&n.next==Z7||s>=2&&s<r&&n.next==t.charCodeAt(s-2))s++,o++;else if((s==2||s==r)&&wwe(n.next))o++;else if(s==r&&n.next==JI){a>o?n.acceptToken(e,-o):n.acceptToken(i,-(o-2));break}else if((n.next==10||n.next==13)&&a){n.acceptToken(e,1);break}else s=o=0;n.advance()}})}const lat=H7("script",Mot,Aot),uat=H7("style",Iot,Pot),cat=H7("textarea",Rot,Lot),hat=QR({"Text RawText":N.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":N.angleBracket,TagName:N.tagName,"MismatchedCloseTag/TagName":[N.tagName,N.invalid],AttributeName:N.attributeName,"AttributeValue UnquotedAttributeValue":N.attributeValue,Is:N.definitionOperator,"EntityReference CharacterReference":N.character,Comment:N.blockComment,ProcessingInst:N.processingInstruction,DoctypeDecl:N.documentMeta}),dat=eO.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%ZQ&rO,59fO%fQ&rO,59iO%qQ&rO,59lO%|Q&rO,59nOOOa'#D^'#D^O&XOaO'#CxO&dOaO,59[OOOb'#D_'#D_O&lObO'#C{O&wObO,59[OOOd'#D`'#D`O'POdO'#DOO'[OdO,59[OOO`'#Da'#DaO'dO!rO,59[O'kQ#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'pO$fO,59oOOO`,59o,59oO'xQ#|O,59qO'}Q#|O,59rOOO`-E7W-E7WO(SQ&rO'#CsOOQW'#DZ'#DZO(bQ&rO1G.wOOOa1G.w1G.wOOO`1G/Y1G/YO(mQ&rO1G/QOOOb1G/Q1G/QO(xQ&rO1G/TOOOd1G/T1G/TO)TQ&rO1G/WOOO`1G/W1G/WO)`Q&rO1G/YOOOa-E7[-E7[O)kQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)pQ#tO'#C|OOOd-E7^-E7^O)uQ#tO'#DPOOO`-E7_-E7_O)zQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O*PQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOO`7+$t7+$tOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rO*[Q#|O,59eO*aQ#|O,59hO*fQ#|O,59kOOO`1G/X1G/XO*kO7[O'#CvO*|OMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O+_O7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+pOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:",]~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OT}OhyO~OS!POT}OhyO~OS!ROT}OhyO~OS!TOT}OhyO~OS}OT}OhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXTgXhgX~OS!fOT!gOhyO~OS!hOT!gOhyO~OS!iOT!gOhyO~OS!jOT!gOhyO~OS!gOT!gOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:rat,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"],["isolate",-11,21,29,30,32,33,35,36,37,38,41,42,"ltr",-3,26,27,39,""]],propSources:[hat],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[lat,uat,cat,aat,nat,sat,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:509},tokenPrec:511});function Swe(t,e){let i=Object.create(null);for(let r of t.getChildren(vwe)){let n=r.getChild(Uot),s=r.getChild(cU)||r.getChild(bwe);n&&(i[e.read(n.from,n.to)]=s?s.type.id==cU?e.read(s.from+1,s.to-1):e.read(s.from,s.to):"")}return i}function ine(t,e){let i=t.getChild(zot);return i?e.read(i.from,i.to):" "}function GD(t,e,i){let r;for(let n of i)if(!n.attrs||n.attrs(r||(r=Swe(t.node.parent.firstChild,e))))return{parser:n.parser};return null}function _we(t=[],e=[]){let i=[],r=[],n=[],s=[];for(let a of t)(a.tag=="script"?i:a.tag=="style"?r:a.tag=="textarea"?n:s).push(a);let o=e.length?Object.create(null):null;for(let a of e)(o[a.name]||(o[a.name]=[])).push(a);return ait((a,l)=>{let u=a.type.id;if(u==Qot)return GD(a,l,i);if(u==Bot)return GD(a,l,r);if(u==qot)return GD(a,l,n);if(u==gwe&&s.length){let p=a.node,m=p.firstChild,g=m&&ine(m,l),w;if(g){for(let O of s)if(O.tag==g&&(!O.attrs||O.attrs(w||(w=Swe(m,l))))){let _=p.lastChild,x=_.type.id==Zot?_.from:p.to;if(x>m.to)return{parser:O.parser,overlay:[{from:m.to,to:x}]}}}}if(o&&u==vwe){let p=a.node,m;if(m=p.firstChild){let g=o[l.read(m.from,m.to)];if(g)for(let w of g){if(w.tagName&&w.tagName!=ine(p.parent,l))continue;let O=p.lastChild;if(O.type.id==cU){let _=O.from+1,x=O.lastChild,T=O.to-(x&&x.isError?0:1);if(T>_)return{parser:w.parser,overlay:[{from:_,to:T}]}}else if(O.type.id==bwe)return{parser:w.parser,overlay:[{from:O.from,to:O.to}]}}}}return null})}const pat=100,rne=1,fat=101,mat=102,nne=2,xwe=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],yat=58,gat=40,$we=95,vat=91,jM=45,bat=46,wat=35,Oat=37,Sat=38,_at=92,xat=10;function U$(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function Twe(t){return t>=48&&t<=57}const $at=new yl((t,e)=>{for(let i=!1,r=0,n=0;;n++){let{next:s}=t;if(U$(s)||s==jM||s==$we||i&&Twe(s))!i&&(s!=jM||n>0)&&(i=!0),r===n&&s==jM&&r++,t.advance();else if(s==_at&&t.peek(1)!=xat)t.advance(),t.next>-1&&t.advance(),i=!0;else{i&&t.acceptToken(s==gat?fat:r==2&&e.canShift(nne)?nne:mat);break}}}),Tat=new yl(t=>{if(xwe.includes(t.peek(-1))){let{next:e}=t;(U$(e)||e==$we||e==wat||e==bat||e==vat||e==yat&&U$(t.peek(1))||e==jM||e==Sat)&&t.acceptToken(pat)}}),Eat=new yl(t=>{if(!xwe.includes(t.peek(-1))){let{next:e}=t;if(e==Oat&&(t.advance(),t.acceptToken(rne)),U$(e)){do t.advance();while(U$(t.next)||Twe(t.next));t.acceptToken(rne)}}}),kat=QR({"AtKeyword import charset namespace keyframes media supports":N.definitionKeyword,"from to selector":N.keyword,NamespaceName:N.namespace,KeyframeName:N.labelName,KeyframeRangeName:N.operatorKeyword,TagName:N.tagName,ClassName:N.className,PseudoClassName:N.constant(N.className),IdName:N.labelName,"FeatureName PropertyName":N.propertyName,AttributeName:N.attributeName,NumberLiteral:N.number,KeywordQuery:N.keyword,UnaryQueryOp:N.operatorKeyword,"CallTag ValueName":N.atom,VariableName:N.variableName,Callee:N.operatorKeyword,Unit:N.unit,"UniversalSelector NestingSelector":N.definitionOperator,MatchOp:N.compareOperator,"ChildOp SiblingOp, LogicOp":N.logicOperator,BinOp:N.arithmeticOperator,Important:N.modifier,Comment:N.blockComment,ColorLiteral:N.color,"ParenthesizedContent StringLiteral":N.string,":":N.punctuation,"PseudoOp #":N.derefOperator,"; ,":N.separator,"( )":N.paren,"[ ]":N.squareBracket,"{ }":N.brace}),Cat={__proto__:null,lang:34,"nth-child":34,"nth-last-child":34,"nth-of-type":34,"nth-last-of-type":34,dir:34,"host-context":34,url:62,"url-prefix":62,domain:62,regexp:62,selector:140},Mat={__proto__:null,"@import":120,"@media":144,"@charset":148,"@namespace":152,"@keyframes":158,"@supports":170},Aat={__proto__:null,not:134,only:134},Iat=eO.deserialize({version:14,states:":jQYQ[OOO#_Q[OOP#fOWOOOOQP'#Cd'#CdOOQP'#Cc'#CcO#kQ[O'#CfO$_QXO'#CaO$fQ[O'#CiO$qQ[O'#DUO$vQ[O'#DXOOQP'#En'#EnO${QdO'#DhO%jQ[O'#DuO${QdO'#DwO%{Q[O'#DyO&WQ[O'#D|O&`Q[O'#ESO&nQ[O'#EUOOQS'#Em'#EmOOQS'#EX'#EXQYQ[OOO&uQXO'#CdO'jQWO'#DdO'oQWO'#EsO'zQ[O'#EsQOQWOOP(UO#tO'#C_POOO)C@])C@]OOQP'#Ch'#ChOOQP,59Q,59QO#kQ[O,59QO(aQ[O'#E]O({QWO,58{O)TQ[O,59TO$qQ[O,59pO$vQ[O,59sO(aQ[O,59vO(aQ[O,59xO(aQ[O,59yO)`Q[O'#DcOOQS,58{,58{OOQP'#Cl'#ClOOQO'#DS'#DSOOQP,59T,59TO)gQWO,59TO)lQWO,59TOOQP'#DW'#DWOOQP,59p,59pOOQO'#DY'#DYO)qQ`O,59sOOQS'#Cq'#CqO${QdO'#CrO)yQvO'#CtO+ZQtO,5:SOOQO'#Cy'#CyO)lQWO'#CxO+oQWO'#CzO+tQ[O'#DPOOQS'#Ep'#EpOOQO'#Dk'#DkO+|Q[O'#DrO,[QWO'#EtO&`Q[O'#DpO,jQWO'#DsOOQO'#Eu'#EuO)OQWO,5:aO,oQpO,5:cOOQS'#D{'#D{O,wQWO,5:eO,|Q[O,5:eOOQO'#EO'#EOO-UQWO,5:hO-ZQWO,5:nO-cQWO,5:pOOQS-E8V-E8VO-kQdO,5:OO-{Q[O'#E_O.YQWO,5;_O.YQWO,5;_POOO'#EW'#EWP.eO#tO,58yPOOO,58y,58yOOQP1G.l1G.lO/[QXO,5:wOOQO-E8Z-E8ZOOQS1G.g1G.gOOQP1G.o1G.oO)gQWO1G.oO)lQWO1G.oOOQP1G/[1G/[O/iQ`O1G/_O0SQXO1G/bO0jQXO1G/dO1QQXO1G/eO1hQWO,59}O1mQ[O'#DTO1tQdO'#CpOOQP1G/_1G/_O${QdO1G/_O1{QpO,59^OOQS,59`,59`O${QdO,59bO2TQWO1G/nOOQS,59d,59dO2YQ!bO,59fOOQS'#DQ'#DQOOQS'#EZ'#EZO2eQ[O,59kOOQS,59k,59kO2mQWO'#DkO2xQWO,5:WO2}QWO,5:^O&`Q[O,5:YO&`Q[O'#E`O3VQWO,5;`O3bQWO,5:[O(aQ[O,5:_OOQS1G/{1G/{OOQS1G/}1G/}OOQS1G0P1G0PO3sQWO1G0PO3xQdO'#EPOOQS1G0S1G0SOOQS1G0Y1G0YOOQS1G0[1G0[O4TQtO1G/jOOQO1G/j1G/jOOQO,5:y,5:yO4kQ[O,5:yOOQO-E8]-E8]O4xQWO1G0yPOOO-E8U-E8UPOOO1G.e1G.eOOQP7+$Z7+$ZOOQP7+$y7+$yO${QdO7+$yOOQS1G/i1G/iO5TQXO'#ErO5[QWO,59oO5aQtO'#EYO6XQdO'#EoO6cQWO,59[O6hQpO7+$yOOQS1G.x1G.xOOQS1G.|1G.|OOQS7+%Y7+%YOOQS1G/Q1G/QO6pQWO1G/QOOQS-E8X-E8XOOQS1G/V1G/VO${QdO1G/rOOQO1G/x1G/xOOQO1G/t1G/tO6uQWO,5:zOOQO-E8^-E8^O7TQXO1G/yOOQS7+%k7+%kO7[QYO'#CtOOQO'#ER'#ERO7gQ`O'#EQOOQO'#EQ'#EQO7rQWO'#EaO7zQdO,5:kOOQS,5:k,5:kO8VQtO'#E^O${QdO'#E^O9WQdO7+%UOOQO7+%U7+%UOOQO1G0e1G0eO9kQpO<<HeO9sQWO,5;^OOQP1G/Z1G/ZOOQS-E8W-E8WO${QdO'#E[O9{QWO,5;ZOOQT1G.v1G.vOOQP<<He<<HeOOQS7+$l7+$lO:TQdO7+%^OOQO7+%e7+%eOOQO,5:l,5:lO3{QdO'#EbO7rQWO,5:{OOQS,5:{,5:{OOQS-E8_-E8_OOQS1G0V1G0VO:[QtO,5:xOOQS-E8[-E8[OOQO<<Hp<<HpOOQPAN>PAN>PO;]QdO,5:vOOQO-E8Y-E8YOOQO<<Hx<<HxOOQO,5:|,5:|OOQO-E8`-E8`OOQS1G0g1G0g",stateData:";o~O#[OS#]QQ~OUYOXYOZTO^VO_VOrXOyWO!]aO!^ZO!j[O!l]O!n^O!q_O!w`O#YRO~OQfOUYOXYOZTO^VO_VOrXOyWO!]aO!^ZO!j[O!l]O!n^O!q_O!w`O#YeO~O#V#gP~P!ZO#]jO~O#YlO~OZnO^qO_qOrsOuoOyrO!PtO!SvO#WuO~O!UwO~P#pOa}O#XzO#YyO~O#Y!OO~O#Y!QO~OQ![Oc!TOg![Oi![Oo!YOr!ZO#X!WO#Y!SO#e!UO~Oc!^O!e!`O!h!aO#Y!]O!U#hP~Oi!fOo!YO#Y!eO~Oi!hO#Y!hO~Oc!^O!e!`O!h!aO#Y!]O~O!Z#hP~P%jOZWX^WX^!XX_WXrWXuWXyWX!PWX!SWX!UWX#WWX~O^!mO~O!Z!nO#V#gX!T#gX~O#V#gX!T#gX~P!ZO#^!qO#_!qO#`!sO~OUYOXYOZTO^VO_VOrXOyWO#YRO~OuoO!UwO~Oa!zO#XzO#YyO~O!T#gP~P!ZOc#RO~Oc#SO~Oq#TO}#UO~OP#WOchXkhX!ZhX!ehX!hhX#YhXbhXQhXghXihXohXrhXuhX!YhX#VhX#XhX#ehXqhX!ThX~Oc!^Ok#XO!e!`O!h!aO#Y!]O!Z#hP~Oc#[O~Oq#`O#Y#]O~Oc!^O!e!`O!h!aO#Y#aO~Ou#eO!c#dO!U#hX!Z#hX~Oc#hO~Ok#XO!Z#jO~O!Z#kO~Oi#lOo!YO~O!U#mO~O!UwO!c#dO~O!UwO!Z#pO~O!Y#rO!Z!Wa#V!Wa!T!Wa~P${O!Z#RX#V#RX!T#RX~P!ZO!Z!nO#V#ga!T#ga~O#^!qO#_!qO#`#xO~OZnO^qO_qOrsOyrO!PtO!SvO#WuO~Ou#Pa!U#Pab#Pa~P.pOq#zO}#{O~OZnO^qO_qOrsOyrO~Ou!Oi!P!Oi!S!Oi!U!Oi#W!Oib!Oi~P/qOu!Qi!P!Qi!S!Qi!U!Qi#W!Qib!Qi~P/qOu!Ri!P!Ri!S!Ri!U!Ri#W!Rib!Ri~P/qO!T#|O~Ob#fP~P(aOb#cP~P${Ob$TOk#XO~O!Z$VO~Ob$WOi$XOp$XO~Oq$ZO#Y#]O~O^!aXb!_X!c!_X~O^$[O~Ob$]O!c#dO~Ou#eO!U#ha!Z#ha~O!c#dOu!da!U!da!Z!dab!da~O!Z$bO~O!T$iO#Y$dO#e$cO~Ok#XOu$kO!Y$mO!Z!Wi#V!Wi!T!Wi~P${O!Z#Ra#V#Ra!T#Ra~P!ZO!Z!nO#V#gi!T#gi~Ob#fX~P#pOb$qO~Ok#XOQ!|Xb!|Xc!|Xg!|Xi!|Xo!|Xr!|Xu!|X#X!|X#Y!|X#e!|X~Ou$sOb#cX~P${Ob$uO~Ok#XOq$vO~Ob$wO~O!c#dOu#Sa!U#Sa!Z#Sa~Ob$yO~P.pOP#WOuhX!UhX~O#e$cOu!tX!U!tX~Ou${O!UwO~O!T%PO#Y$dO#e$cO~Ok#XOQ#QXc#QXg#QXi#QXo#QXr#QXu#QX!Y#QX!Z#QX#V#QX#X#QX#Y#QX#e#QX!T#QX~Ou$kO!Y%SO!Z!Wq#V!Wq!T!Wq~P${Ok#XOq%TO~OuoOb#fa~Ou$sOb#ca~Ob%WO~P${Ok#XOQ#Qac#Qag#Qai#Qao#Qar#Qau#Qa!Y#Qa!Z#Qa#V#Qa#X#Qa#Y#Qa#e#Qa!T#Qa~Ob#Oau#Oa~P${O#[p#]#ek!S#e~",goto:"-g#jPPP#kP#nP#w$WP#wP$g#wPP$mPPP$s$|$|P%`P$|P$|%z&^PPPP$|&vP&z'Q#wP'W#w'^P#wP#w#wPPP'd'y(WPP#nPP(_(_(i(_P(_P(_(_P#nP#nP#nP(l#nP(o(r(u(|#nP#nP)R)X)h)v)|*S*^*d*n*t*zPPPPPPPPPP+Q+Z+v+yP,o,r,x-RRkQ_bOPdhw!n#tkYOPdhotuvw!n#R#h#tkSOPdhotuvw!n#R#h#tQmTR!tnQ{VR!xqQ!x}Q#Z!XR#y!zq![Z]!T!m#S#U#X#q#{$Q$[$k$l$s$x%Up![Z]!T!m#S#U#X#q#{$Q$[$k$l$s$x%UU$f#m$h${R$z$eq!XZ]!T!m#S#U#X#q#{$Q$[$k$l$s$x%Up![Z]!T!m#S#U#X#q#{$Q$[$k$l$s$x%UQ!f^R#l!gT#^!Z#_Q|VR!yqQ!x|R#y!yQ!PWR!{rQ!RXR!|sQxUQ!wpQ#i!cQ#o!jQ#p!kQ$}$gR%Z$|SgPwQ!phQ#s!nR$n#tZfPhw!n#ta!b[`a!V!^!`#d#eR#b!^R!g^R!i_R#n!iS$g#m$hR%X${V$e#m$h${Q!rjR#w!rQdOShPwU!ldh#tR#t!nQ$Q#SU$r$Q$x%UQ$x$[R%U$sQ#_!ZR$Y#_Q$t$QR%V$tQpUS!vp$pR$p#}Q$l#qR%R$lQ!ogS#u!o#vR#v!pQ#f!_R$`#fQ$h#mR%O$hQ$|$gR%Y$|_cOPdhw!n#t^UOPdhw!n#tQ!uoQ!}tQ#OuQ#PvQ#}#RR$a#hR$R#SQ!VZQ!d]Q#V!TQ#q!m[$P#S$Q$[$s$x%UQ$S#UQ$U#XS$j#q$lQ$o#{R%Q$kR$O#RQiPR#QwQ!c[Q!kaR#Y!VU!_[a!VQ!j`Q#c!^Q#g!`Q$^#dR$_#e",nodeNames:" Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent ] [ LineNames LineName , PseudoClassName ArgList IdSelector # IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports AtRule Styles",maxTerm:117,nodeProps:[["isolate",-2,3,25,""],["openedBy",18,"(",33,"[",51,"{"],["closedBy",19,")",34,"]",52,"}"]],propSources:[kat],skippedNodes:[0,3,88],repeatNodeCount:11,tokenData:"J^~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Ab![!]B]!]!^CX!^!_$}!_!`Cj!`!aC{!a!b$}!b!cDw!c!}$}!}#OFa#O#P$}#P#QFr#Q#R6d#R#T$}#T#UGT#U#c$}#c#dHf#d#o$}#o#pH{#p#q6d#q#rI^#r#sIo#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`JW<%lO$}`%QSOy%^z;'S%^;'S;=`%o<%lO%^`%cSp`Oy%^z;'S%^;'S;=`%o<%lO%^`%rP;=`<%l%^~%zh#[~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#[~p`OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^l)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^l)sUp`Oy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^l*[Up`Oy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^l*sUp`Oy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^l+[Up`Oy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^l+sUp`Oy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^l,[Up`Oy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^l,sUp`Oy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^l-[Up`Oy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^l-uS!Y[p`Oy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOi~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.Rn/zYyQOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^l0oYp`Oy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^l1dYp`Oy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^l2ZYg[p`Oy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^l3QYg[p`Oy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^l3uYp`Oy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^l4lYg[p`Oy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^l5aYp`Oy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^l6WSg[p`Oy%^z;'S%^;'S;=`%o<%lO%^d6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^d7QS}Sp`Oy%^z;'S%^;'S;=`%o<%lO%^b7cSXQOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7on9cSc^Oy%^z;'S%^;'S;=`%o<%lO%^~9tOb~n9{UUQkWOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^n:fWkW!SQOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^l;TUp`Oy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^l;nYp`#e[Oy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^l<cYp`Oy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=WUp`Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=qUp`#e[Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l>[[p`#e[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^n?VSu^Oy%^z;'S%^;'S;=`%o<%lO%^l?hWkWOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^n@VUZQOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTkWOy%^z{@}{;'S%^;'S;=`%o<%lO%^~AUSp`#]~Oy%^z;'S%^;'S;=`%o<%lO%^lAg[#e[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^bBbU^QOy%^z![%^![!]Bt!];'S%^;'S;=`%o<%lO%^bB{S_Qp`Oy%^z;'S%^;'S;=`%o<%lO%^nC^S!Z^Oy%^z;'S%^;'S;=`%o<%lO%^dCoS}SOy%^z;'S%^;'S;=`%o<%lO%^bDQU!PQOy%^z!`%^!`!aDd!a;'S%^;'S;=`%o<%lO%^bDkS!PQp`Oy%^z;'S%^;'S;=`%o<%lO%^bDzWOy%^z!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^bEk[!]Qp`Oy%^z}%^}!OEd!O!Q%^!Q![Ed![!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^nFfSr^Oy%^z;'S%^;'S;=`%o<%lO%^nFwSq^Oy%^z;'S%^;'S;=`%o<%lO%^bGWUOy%^z#b%^#b#cGj#c;'S%^;'S;=`%o<%lO%^bGoUp`Oy%^z#W%^#W#XHR#X;'S%^;'S;=`%o<%lO%^bHYS!cQp`Oy%^z;'S%^;'S;=`%o<%lO%^bHiUOy%^z#f%^#f#gHR#g;'S%^;'S;=`%o<%lO%^fIQS!UUOy%^z;'S%^;'S;=`%o<%lO%^nIcS!T^Oy%^z;'S%^;'S;=`%o<%lO%^fItU!SQOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^`JZP;=`<%l$}",tokenizers:[Tat,Eat,$at,1,2,3,4,new XI("m~RRYZ[z{a~~g~aO#_~~dP!P!Qg~lO#`~~",28,106)],topRules:{StyleSheet:[0,4],Styles:[1,87]},specialized:[{term:101,get:t=>Cat[t]||-1},{term:59,get:t=>Mat[t]||-1},{term:102,get:t=>Aat[t]||-1}],tokenPrec:1219});let ZD=null;function HD(){if(!ZD&&typeof document=="object"&&document.body){let{style:t}=document.body,e=[],i=new Set;for(let r in t)r!="cssText"&&r!="cssFloat"&&typeof t[r]=="string"&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,n=>"-"+n.toLowerCase())),i.has(r)||(e.push(r),i.add(r)));ZD=e.sort().map(r=>({type:"property",label:r,apply:r+": "}))}return ZD||[]}const sne=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),one=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),Pat=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),Rat=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),mh=/^(\w[\w-]*|-\w[\w-]*|)$/,Lat=/^-(-[\w-]*)?$/;function Nat(t,e){var i;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let r=(i=t.parent)===null||i===void 0?void 0:i.firstChild;return(r==null?void 0:r.name)!="Callee"?!1:e.sliceString(r.from,r.to)=="var"}const ane=new jve,Dat=["Declaration"];function Vat(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function Ewe(t,e,i){if(e.to-e.from>4096){let r=ane.get(e);if(r)return r;let n=[],s=new Set,o=e.cursor(Ri.IncludeAnonymous);if(o.firstChild())do for(let a of Ewe(t,o.node,i))s.has(a.label)||(s.add(a.label),n.push(a));while(o.nextSibling());return ane.set(e,n),n}else{let r=[],n=new Set;return e.cursor().iterate(s=>{var o;if(i(s)&&s.matchContext(Dat)&&((o=s.node.nextSibling)===null||o===void 0?void 0:o.name)==":"){let a=t.sliceString(s.from,s.to);n.has(a)||(n.add(a),r.push({label:a,type:"variable"}))}}),r}}const Fat=t=>e=>{let{state:i,pos:r}=e,n=$r(i).resolveInner(r,-1),s=n.type.isError&&n.from==n.to-1&&i.doc.sliceString(n.from,n.to)=="-";if(n.name=="PropertyName"||(s||n.name=="TagName")&&/^(Block|Styles)$/.test(n.resolve(n.to).name))return{from:n.from,options:HD(),validFor:mh};if(n.name=="ValueName")return{from:n.from,options:one,validFor:mh};if(n.name=="PseudoClassName")return{from:n.from,options:sne,validFor:mh};if(t(n)||(e.explicit||s)&&Nat(n,i.doc))return{from:t(n)||s?n.from:r,options:Ewe(i.doc,Vat(n),t),validFor:Lat};if(n.name=="TagName"){for(let{parent:l}=n;l;l=l.parent)if(l.name=="Block")return{from:n.from,options:HD(),validFor:mh};return{from:n.from,options:Pat,validFor:mh}}if(n.name=="AtKeyword")return{from:n.from,options:Rat,validFor:mh};if(!e.explicit)return null;let o=n.resolve(r),a=o.childBefore(r);return a&&a.name==":"&&o.name=="PseudoClassSelector"?{from:r,options:sne,validFor:mh}:a&&a.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:r,options:one,validFor:mh}:o.name=="Block"||o.name=="Styles"?{from:r,options:HD(),validFor:mh}:null},jat=Fat(t=>t.name=="VariableName"),KI=Xw.define({name:"css",parser:Iat.configure({props:[qR.add({Declaration:DM()}),GR.add({"Block KeyframeList":Hve})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function zat(){return new k7(KI,KI.data.of({autocomplete:jat}))}const Uat=314,Qat=315,lne=1,Bat=2,qat=3,Gat=4,Zat=316,Hat=318,Wat=319,Xat=5,Yat=6,Jat=0,dU=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],kwe=125,Kat=59,pU=47,elt=42,tlt=43,ilt=45,rlt=60,nlt=44,slt=63,olt=46,alt=91,llt=new dwe({start:!1,shift(t,e){return e==Xat||e==Yat||e==Hat?t:e==Wat},strict:!1}),ult=new yl((t,e)=>{let{next:i}=t;(i==kwe||i==-1||e.context)&&t.acceptToken(Zat)},{contextual:!0,fallback:!0}),clt=new yl((t,e)=>{let{next:i}=t,r;dU.indexOf(i)>-1||i==pU&&((r=t.peek(1))==pU||r==elt)||i!=kwe&&i!=Kat&&i!=-1&&!e.context&&t.acceptToken(Uat)},{contextual:!0}),hlt=new yl((t,e)=>{t.next==alt&&!e.context&&t.acceptToken(Qat)},{contextual:!0}),dlt=new yl((t,e)=>{let{next:i}=t;if(i==tlt||i==ilt){if(t.advance(),i==t.next){t.advance();let r=!e.context&&e.canShift(lne);t.acceptToken(r?lne:Bat)}}else i==slt&&t.peek(1)==olt&&(t.advance(),t.advance(),(t.next<48||t.next>57)&&t.acceptToken(qat))},{contextual:!0});function WD(t,e){return t>=65&&t<=90||t>=97&&t<=122||t==95||t>=192||!e&&t>=48&&t<=57}const plt=new yl((t,e)=>{if(t.next!=rlt||!e.dialectEnabled(Jat)||(t.advance(),t.next==pU))return;let i=0;for(;dU.indexOf(t.next)>-1;)t.advance(),i++;if(WD(t.next,!0)){for(t.advance(),i++;WD(t.next,!1);)t.advance(),i++;for(;dU.indexOf(t.next)>-1;)t.advance(),i++;if(t.next==nlt)return;for(let r=0;;r++){if(r==7){if(!WD(t.next,!0))return;break}if(t.next!="extends".charCodeAt(r))break;t.advance(),i++}}t.acceptToken(Gat,-i)}),flt=QR({"get set async static":N.modifier,"for while do if else switch try catch finally return throw break continue default case":N.controlKeyword,"in of await yield void typeof delete instanceof":N.operatorKeyword,"let var const using function class extends":N.definitionKeyword,"import export from":N.moduleKeyword,"with debugger as new":N.keyword,TemplateString:N.special(N.string),super:N.atom,BooleanLiteral:N.bool,this:N.self,null:N.null,Star:N.modifier,VariableName:N.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":N.function(N.variableName),VariableDefinition:N.definition(N.variableName),Label:N.labelName,PropertyName:N.propertyName,PrivatePropertyName:N.special(N.propertyName),"CallExpression/MemberExpression/PropertyName":N.function(N.propertyName),"FunctionDeclaration/VariableDefinition":N.function(N.definition(N.variableName)),"ClassDeclaration/VariableDefinition":N.definition(N.className),"NewExpression/VariableName":N.className,PropertyDefinition:N.definition(N.propertyName),PrivatePropertyDefinition:N.definition(N.special(N.propertyName)),UpdateOp:N.updateOperator,"LineComment Hashbang":N.lineComment,BlockComment:N.blockComment,Number:N.number,String:N.string,Escape:N.escape,ArithOp:N.arithmeticOperator,LogicOp:N.logicOperator,BitOp:N.bitwiseOperator,CompareOp:N.compareOperator,RegExp:N.regexp,Equals:N.definitionOperator,Arrow:N.function(N.punctuation),": Spread":N.punctuation,"( )":N.paren,"[ ]":N.squareBracket,"{ }":N.brace,"InterpolationStart InterpolationEnd":N.special(N.brace),".":N.derefOperator,", ;":N.separator,"@":N.meta,TypeName:N.typeName,TypeDefinition:N.definition(N.typeName),"type enum interface implements namespace module declare":N.definitionKeyword,"abstract global Privacy readonly override":N.modifier,"is keyof unique infer asserts":N.operatorKeyword,JSXAttributeValue:N.attributeValue,JSXText:N.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":N.angleBracket,"JSXIdentifier JSXNameSpacedName":N.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":N.attributeName,"JSXBuiltin/JSXIdentifier":N.standard(N.tagName)}),mlt={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,const:52,extends:56,this:60,true:68,false:68,null:80,void:84,typeof:88,super:104,new:138,delete:150,yield:159,await:163,class:168,public:231,private:231,protected:231,readonly:233,instanceof:252,satisfies:255,in:256,import:290,keyof:347,unique:351,infer:357,asserts:393,is:395,abstract:415,implements:417,type:419,let:422,var:424,using:427,interface:433,enum:437,namespace:443,module:445,declare:449,global:453,for:472,of:481,while:484,with:488,do:492,if:496,else:498,switch:502,case:508,try:514,catch:518,finally:522,return:526,throw:530,break:534,continue:538,debugger:542},ylt={__proto__:null,async:125,get:127,set:129,declare:191,public:193,private:193,protected:193,static:195,abstract:197,override:199,readonly:205,accessor:207,new:399},glt={__proto__:null,"<":189},vlt=eO.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#D_O.QQlO'#DeO.bQlO'#DpO%[QlO'#DxO0fQlO'#EQOOQ!0Lf'#EY'#EYO1PQ`O'#EVOOQO'#En'#EnOOQO'#Ij'#IjO1XQ`O'#GrO1dQ`O'#EmO1iQ`O'#EmO3hQ!0MxO'#JpO6[Q!0MxO'#JqO6uQ`O'#F[O6zQ,UO'#FsOOQ!0Lf'#Fe'#FeO7VO7dO'#FeO7eQMhO'#F{O9UQ`O'#FzOOQ!0Lf'#Jq'#JqOOQ!0Lb'#Jp'#JpO9ZQ`O'#GvOOQ['#K]'#K]O9fQ`O'#IWO9kQ!0LrO'#IXOOQ['#J^'#J^OOQ['#I]'#I]Q`QlOOQ`QlOOO9sQ!L^O'#DtO9zQlO'#D|O:RQlO'#EOO9aQ`O'#GrO:YQMhO'#CoO:hQ`O'#ElO:sQ`O'#EwO:xQMhO'#FdO;gQ`O'#GrOOQO'#K^'#K^O;lQ`O'#K^O;zQ`O'#GzO;zQ`O'#G{O;zQ`O'#G}O9aQ`O'#HQO<qQ`O'#HTO>YQ`O'#CeO>jQ`O'#HaO>rQ`O'#HgO>rQ`O'#HiO`QlO'#HkO>rQ`O'#HmO>rQ`O'#HpO>wQ`O'#HvO>|Q!0LsO'#H|O%[QlO'#IOO?XQ!0LsO'#IQO?dQ!0LsO'#ISO9kQ!0LrO'#IUO?oQ!0MxO'#CiO@qQpO'#DjQOQ`OOO%[QlO'#EOOAXQ`O'#ERO:YQMhO'#ElOAdQ`O'#ElOAoQ!bO'#FdOOQ['#Cg'#CgOOQ!0Lb'#Do'#DoOOQ!0Lb'#Jt'#JtO%[QlO'#JtOOQO'#Jw'#JwOOQO'#If'#IfOBoQpO'#EeOOQ!0Lb'#Ed'#EdOOQ!0Lb'#J{'#J{OCkQ!0MSO'#EeOCuQpO'#EUOOQO'#Jv'#JvODZQpO'#JwOEhQpO'#EUOCuQpO'#EePEuO&2DjO'#CbPOOO)CD{)CD{OOOO'#I^'#I^OFQO#tO,59UOOQ!0Lh,59U,59UOOOO'#I_'#I_OF`O&jO,59UOFnQ!L^O'#DaOOOO'#Ia'#IaOFuO#@ItO,59yOOQ!0Lf,59y,59yOGTQlO'#IbOGhQ`O'#JrOIgQ!fO'#JrO+}QlO'#JrOInQ`O,5:POJUQ`O'#EnOJcQ`O'#KROJnQ`O'#KQOJnQ`O'#KQOJvQ`O,5;[OJ{Q`O'#KPOOQ!0Ln,5:[,5:[OKSQlO,5:[OMQQ!0MxO,5:dOMqQ`O,5:lON[Q!0LrO'#KOONcQ`O'#J}O9ZQ`O'#J}ONwQ`O'#J}O! PQ`O,5;ZO! UQ`O'#J}O!#ZQ!fO'#JqOOQ!0Lh'#Ci'#CiO%[QlO'#EQO!#yQ!fO,5:qOOQS'#Jx'#JxOOQO-E<h-E<hO9aQ`O,5=^O!$aQ`O,5=^O!$fQlO,5;XO!&iQMhO'#EiO!(SQ`O,5;XO!(XQlO'#DwO!(cQpO,5;bO!(kQpO,5;bO%[QlO,5;bOOQ['#FS'#FSOOQ['#FU'#FUO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cOOQ['#FY'#FYO!(yQlO,5;sOOQ!0Lf,5;x,5;xOOQ!0Lf,5;y,5;yOOQ!0Lf,5;{,5;{O%[QlO'#InO!*|Q!0LrO,5<hO%[QlO,5;cO!&iQMhO,5;cO!+kQMhO,5;cO!-]QMhO'#E[O%[QlO,5;vOOQ!0Lf,5;z,5;zO!-dQ,UO'#FiO!.aQ,UO'#KVO!-{Q,UO'#KVO!.hQ,UO'#KVOOQO'#KV'#KVO!.|Q,UO,5<ROOOW,5<_,5<_O!/_QlO'#FuOOOW'#Im'#ImO7VO7dO,5<PO!/fQ,UO'#FwOOQ!0Lf,5<P,5<PO!0VQ$IUO'#CwOOQ!0Lh'#C{'#C{O!0jO#@ItO'#DPO!1WQMjO,5<dO!1_Q`O,5<gO!2zQ(CWO'#GWO!3XQ`O'#GXO!3^Q`O'#GXO!4|Q(CWO'#G]O!6RQpO'#GaOOQO'#Gm'#GmO!+rQMhO'#GlOOQO'#Go'#GoO!+rQMhO'#GnO!6tQ$IUO'#JjOOQ!0Lh'#Jj'#JjO!7OQ`O'#JiO!7^Q`O'#JhO!7fQ`O'#CuOOQ!0Lh'#Cy'#CyO!7qQ`O'#C{OOQ!0Lh'#DT'#DTOOQ!0Lh'#DV'#DVO1SQ`O'#DXO!+rQMhO'#GOO!+rQMhO'#GQO!7vQ`O'#GSO!7{Q`O'#GTO!3^Q`O'#GZO!+rQMhO'#G`O;zQ`O'#JiO!8QQ`O'#EoO!8oQ`O,5<fOOQ!0Lb'#Cr'#CrO!8wQ`O'#EpO!9qQpO'#EqOOQ!0Lb'#KP'#KPO!9xQ!0LrO'#K_O9kQ!0LrO,5=bO`QlO,5>rOOQ['#Jf'#JfOOQ[,5>s,5>sOOQ[-E<Z-E<ZO!;wQ!0MxO,5:`O!9lQpO,5:^O!>bQ!0MxO,5:hO%[QlO,5:hO!@xQ!0MxO,5:jOOQO,5@x,5@xO!AiQMhO,5=^O!AwQ!0LrO'#JgO9UQ`O'#JgO!BYQ!0LrO,59ZO!BeQpO,59ZO!BmQMhO,59ZO:YQMhO,59ZO!BxQ`O,5;XO!CQQ`O'#H`O!CfQ`O'#KbO%[QlO,5;|O!9lQpO,5<OO!CnQ`O,5=yO!CsQ`O,5=yO!CxQ`O,5=yO9kQ!0LrO,5=yO;zQ`O,5=iOOQO'#Cw'#CwO!DWQpO,5=fO!D`QMhO,5=gO!DkQ`O,5=iO!DpQ!bO,5=lO!DxQ`O'#K^O>wQ`O'#HVO9aQ`O'#HXO!D}Q`O'#HXO:YQMhO'#HZO!ESQ`O'#HZOOQ[,5=o,5=oO!EXQ`O'#H[O!EjQ`O'#CoO!EoQ`O,59PO!EyQ`O,59PO!HOQlO,59POOQ[,59P,59PO!H`Q!0LrO,59PO%[QlO,59PO!JkQlO'#HcOOQ['#Hd'#HdOOQ['#He'#HeO`QlO,5={O!KRQ`O,5={O`QlO,5>RO`QlO,5>TO!KWQ`O,5>VO`QlO,5>XO!K]Q`O,5>[O!KbQlO,5>bOOQ[,5>h,5>hO%[QlO,5>hO9kQ!0LrO,5>jOOQ[,5>l,5>lO# lQ`O,5>lOOQ[,5>n,5>nO# lQ`O,5>nOOQ[,5>p,5>pO#!YQpO'#D]O%[QlO'#JtO#!{QpO'#JtO##VQpO'#DkO##hQpO'#DkO#%yQlO'#DkO#&QQ`O'#JsO#&YQ`O,5:UO#&_Q`O'#ErO#&mQ`O'#KSO#&uQ`O,5;]O#&zQpO'#DkO#'XQpO'#ETOOQ!0Lf,5:m,5:mO%[QlO,5:mO#'`Q`O,5:mO>wQ`O,5;WO!BeQpO,5;WO!BmQMhO,5;WO:YQMhO,5;WO#'hQ`O,5@`O#'mQ07dO,5:qOOQO-E<d-E<dO#(sQ!0MSO,5;POCuQpO,5:pO#(}QpO,5:pOCuQpO,5;PO!BYQ!0LrO,5:pOOQ!0Lb'#Eh'#EhOOQO,5;P,5;PO%[QlO,5;PO#)[Q!0LrO,5;PO#)gQ!0LrO,5;PO!BeQpO,5:pOOQO,5;V,5;VO#)uQ!0LrO,5;PPOOO'#I['#I[P#*ZO&2DjO,58|POOO,58|,58|OOOO-E<[-E<[OOQ!0Lh1G.p1G.pOOOO-E<]-E<]OOOO,59{,59{O#*fQ!bO,59{OOOO-E<_-E<_OOQ!0Lf1G/e1G/eO#*kQ!fO,5>|O+}QlO,5>|OOQO,5?S,5?SO#*uQlO'#IbOOQO-E<`-E<`O#+SQ`O,5@^O#+[Q!fO,5@^O#+cQ`O,5@lOOQ!0Lf1G/k1G/kO%[QlO,5@mO#+kQ`O'#IhOOQO-E<f-E<fO#+cQ`O,5@lOOQ!0Lb1G0v1G0vOOQ!0Ln1G/v1G/vOOQ!0Ln1G0W1G0WO%[QlO,5@jO#,PQ!0LrO,5@jO#,bQ!0LrO,5@jO#,iQ`O,5@iO9ZQ`O,5@iO#,qQ`O,5@iO#-PQ`O'#IkO#,iQ`O,5@iOOQ!0Lb1G0u1G0uO!(cQpO,5:sO!(nQpO,5:sOOQS,5:u,5:uO#-qQdO,5:uO#-yQMhO1G2xO9aQ`O1G2xOOQ!0Lf1G0s1G0sO#.XQ!0MxO1G0sO#/^Q!0MvO,5;TOOQ!0Lh'#GV'#GVO#/zQ!0MzO'#JjO!$fQlO1G0sO#2VQ!fO'#JuO%[QlO'#JuO#2aQ`O,5:cOOQ!0Lh'#D]'#D]OOQ!0Lf1G0|1G0|O%[QlO1G0|OOQ!0Lf1G1e1G1eO#2fQ`O1G0|O#4zQ!0MxO1G0}O#5RQ!0MxO1G0}O#7iQ!0MxO1G0}O#7pQ!0MxO1G0}O#:WQ!0MxO1G0}O#<nQ!0MxO1G0}O#<uQ!0MxO1G0}O#<|Q!0MxO1G0}O#?dQ!0MxO1G0}O#?kQ!0MxO1G0}O#AxQ?MtO'#CiO#CsQ?MtO1G1_O#CzQ?MtO'#JqO#D_Q!0MxO,5?YOOQ!0Lb-E<l-E<lO#FlQ!0MxO1G0}O#GiQ!0MzO1G0}OOQ!0Lf1G0}1G0}O#HlQMjO'#JzO#HvQ`O,5:vO#H{Q!0MxO1G1bO#IoQ,UO,5<VO#IwQ,UO,5<WO#JPQ,UO'#FnO#JhQ`O'#FmOOQO'#KW'#KWOOQO'#Il'#IlO#JmQ,UO1G1mOOQ!0Lf1G1m1G1mOOOW1G1x1G1xO#KOQ?MtO'#JpO#KYQ`O,5<aO!(yQlO,5<aOOOW-E<k-E<kOOQ!0Lf1G1k1G1kO#K_QpO'#KVOOQ!0Lf,5<c,5<cO#KgQpO,5<cO#KlQMhO'#DROOOO'#I`'#I`O#KsO#@ItO,59kOOQ!0Lh,59k,59kO%[QlO1G2OO!7{Q`O'#IpO#LOQ`O,5<yOOQ!0Lh,5<v,5<vO!+rQMhO'#IsO#LlQMjO,5=WO!+rQMhO'#IuO#M_QMjO,5=YO!&iQMhO,5=[OOQO1G2R1G2RO#MiQ!dO'#CrO#M|Q(CWO'#EpO$ RQpO'#GaO$ iQ!dO,5<rO$ pQ`O'#KYO9ZQ`O'#KYO$!OQ`O,5<tO!+rQMhO,5<sO$!TQ`O'#GYO$!fQ`O,5<sO$!kQ!dO'#GVO$!xQ!dO'#KZO$#SQ`O'#KZO!&iQMhO'#KZO$#XQ`O,5<wO$#^QlO'#JtO$#hQpO'#GbO##hQpO'#GbO$#yQ`O'#GfO!3^Q`O'#GjO$$OQ!0LrO'#IrO$$ZQpO,5<{OOQ!0Lp,5<{,5<{O$$bQpO'#GbO$$oQpO'#GcO$%QQpO'#GcO$%VQMjO,5=WO$%gQMjO,5=YOOQ!0Lh,5=],5=]O!+rQMhO,5@TO!+rQMhO,5@TO$%wQ`O'#IwO$&VQ`O,5@SO$&_Q`O,59aOOQ!0Lh,59g,59gO$'UQ$IYO,59sOOQ!0Lh'#Jn'#JnO$'wQMjO,5<jO$(jQMjO,5<lO@iQ`O,5<nOOQ!0Lh,5<o,5<oO$(tQ`O,5<uO$(yQMjO,5<zO$)ZQ`O,5@TO$)iQ`O'#J}O!$fQlO1G2QO$)nQ`O1G2QO9ZQ`O'#KQO9ZQ`O'#ErO%[QlO'#ErO9ZQ`O'#IyO$)sQ!0LrO,5@yOOQ[1G2|1G2|OOQ[1G4^1G4^OOQ!0Lf1G/z1G/zOOQ!0Lf1G/x1G/xO$+uQ!0MxO1G0SOOQ[1G2x1G2xO!&iQMhO1G2xO%[QlO1G2xO#-|Q`O1G2xO$-yQMhO'#EiOOQ!0Lb,5@R,5@RO$.WQ!0LrO,5@ROOQ[1G.u1G.uO!BYQ!0LrO1G.uO!BeQpO1G.uO!BmQMhO1G.uO$.iQ`O1G0sO$.nQ`O'#CiO$.yQ`O'#KcO$/RQ`O,5=zO$/WQ`O'#KcO$/]Q`O'#KcO$/kQ`O'#JPO$/yQ`O,5@|O$0RQ!fO1G1hOOQ!0Lf1G1j1G1jO9aQ`O1G3eO@iQ`O1G3eO$0YQ`O1G3eO$0_Q`O1G3eOOQ[1G3e1G3eO!DkQ`O1G3TO!&iQMhO1G3QO$0dQ`O1G3QOOQ[1G3R1G3RO!&iQMhO1G3RO$0iQ`O1G3RO$0qQpO'#HPOOQ[1G3T1G3TO!5|QpO'#I{O!DpQ!bO1G3WOOQ[1G3W1G3WOOQ[,5=q,5=qO$0yQMhO,5=sO9aQ`O,5=sO$#yQ`O,5=uO9UQ`O,5=uO!BeQpO,5=uO!BmQMhO,5=uO:YQMhO,5=uO$1XQ`O'#KaO$1dQ`O,5=vOOQ[1G.k1G.kO$1iQ!0LrO1G.kO@iQ`O1G.kO$1tQ`O1G.kO9kQ!0LrO1G.kO$3|Q!fO,5AOO$4ZQ`O,5AOO9ZQ`O,5AOO$4fQlO,5=}O$4mQ`O,5=}OOQ[1G3g1G3gO`QlO1G3gOOQ[1G3m1G3mOOQ[1G3o1G3oO>rQ`O1G3qO$4rQlO1G3sO$8vQlO'#HrOOQ[1G3v1G3vO$9TQ`O'#HxO>wQ`O'#HzOOQ[1G3|1G3|O$9]QlO1G3|O9kQ!0LrO1G4SOOQ[1G4U1G4UOOQ!0Lb'#G^'#G^O9kQ!0LrO1G4WO9kQ!0LrO1G4YO$=dQ`O,5@`O!(yQlO,5;^O9ZQ`O,5;^O>wQ`O,5:VO!(yQlO,5:VO!BeQpO,5:VO$=iQ?MtO,5:VOOQO,5;^,5;^O$=sQpO'#IcO$>ZQ`O,5@_OOQ!0Lf1G/p1G/pO$>cQpO'#IiO$>mQ`O,5@nOOQ!0Lb1G0w1G0wO##hQpO,5:VOOQO'#Ie'#IeO$>uQpO,5:oOOQ!0Ln,5:o,5:oO#'cQ`O1G0XOOQ!0Lf1G0X1G0XO%[QlO1G0XOOQ!0Lf1G0r1G0rO>wQ`O1G0rO!BeQpO1G0rO!BmQMhO1G0rOOQ!0Lb1G5z1G5zO!BYQ!0LrO1G0[OOQO1G0k1G0kO%[QlO1G0kO$>|Q!0LrO1G0kO$?XQ!0LrO1G0kO!BeQpO1G0[OCuQpO1G0[O$?gQ!0LrO1G0kOOQO1G0[1G0[O$?{Q!0MxO1G0kPOOO-E<Y-E<YPOOO1G.h1G.hOOOO1G/g1G/gO$@VQ!bO,5<hO$@_Q!fO1G4hOOQO1G4n1G4nO%[QlO,5>|O$@iQ`O1G5xO$@qQ`O1G6WO$@yQ!fO1G6XO9ZQ`O,5?SO$ATQ!0MxO1G6UO%[QlO1G6UO$AeQ!0LrO1G6UO$AvQ`O1G6TO$AvQ`O1G6TO9ZQ`O1G6TO$BOQ`O,5?VO9ZQ`O,5?VOOQO,5?V,5?VO$BdQ`O,5?VO$)iQ`O,5?VOOQO-E<i-E<iOOQS1G0_1G0_OOQS1G0a1G0aO#-tQ`O1G0aOOQ[7+(d7+(dO!&iQMhO7+(dO%[QlO7+(dO$BrQ`O7+(dO$B}QMhO7+(dO$C]Q!0MzO,5=WO$EhQ!0MzO,5=YO$GsQ!0MzO,5=WO$JUQ!0MzO,5=YO$LgQ!0MzO,59sO$NlQ!0MzO,5<jO%!wQ!0MzO,5<lO%%SQ!0MzO,5<zOOQ!0Lf7+&_7+&_O%'eQ!0MxO7+&_O%(XQlO'#IdO%(fQ`O,5@aO%(nQ!fO,5@aOOQ!0Lf1G/}1G/}O%(xQ`O7+&hOOQ!0Lf7+&h7+&hO%(}Q?MtO,5:dO%[QlO7+&yO%)XQ?MtO,5:`O%)fQ?MtO,5:hO%)pQ?MtO,5:jO%)zQMhO'#IgO%*UQ`O,5@fOOQ!0Lh1G0b1G0bOOQO1G1q1G1qOOQO1G1r1G1rO%*^Q!jO,5<YO!(yQlO,5<XOOQO-E<j-E<jOOQ!0Lf7+'X7+'XOOOW7+'d7+'dOOOW1G1{1G1{O%*iQ`O1G1{OOQ!0Lf1G1}1G1}OOOO,59m,59mO%*nQ!dO,59mOOOO-E<^-E<^OOQ!0Lh1G/V1G/VO%*uQ!0MxO7+'jOOQ!0Lh,5?[,5?[O%+iQMhO1G2eP%+pQ`O'#IpPOQ!0Lh-E<n-E<nO%,^QMjO,5?_OOQ!0Lh-E<q-E<qO%-PQMjO,5?aOOQ!0Lh-E<s-E<sO%-ZQ!dO1G2vO%-bQ!dO'#CrO%-xQMhO'#KQO$#^QlO'#JtOOQ!0Lh1G2^1G2^O%.PQ`O'#IoO%.eQ`O,5@tO%.eQ`O,5@tO%.mQ`O,5@tO%.xQ`O,5@tOOQO1G2`1G2`O%/WQMjO1G2_O!+rQMhO1G2_O%/hQ(CWO'#IqO%/uQ`O,5@uO!&iQMhO,5@uO%/}Q!dO,5@uOOQ!0Lh1G2c1G2cO%2_Q!fO'#CiO%2iQ`O,5=OOOQ!0Lb,5<|,5<|O%2qQpO,5<|OOQ!0Lb,5<},5<}OCfQ`O,5<|O%2|QpO,5<|OOQ!0Lb,5=Q,5=QO$)iQ`O,5=UOOQO,5?^,5?^OOQO-E<p-E<pOOQ!0Lp1G2g1G2gO##hQpO,5<|O$#^QlO,5=OO%3[Q`O,5<}O%3gQpO,5<}O!+rQMhO'#IsO%4aQMjO1G2rO!+rQMhO'#IuO%5SQMjO1G2tO%5^QMjO1G5oO%5hQMjO1G5oOOQO,5?c,5?cOOQO-E<u-E<uOOQO1G.{1G.{O!9lQpO,59uO%[QlO,59uOOQ!0Lh,5<i,5<iO%5uQ`O1G2YO!+rQMhO1G2aO!+rQMhO1G5oO!+rQMhO1G5oO%5zQ!0MxO7+'lOOQ!0Lf7+'l7+'lO!$fQlO7+'lO%6nQ`O,5;^OOQ!0Lb,5?e,5?eOOQ!0Lb-E<w-E<wO%6sQ!dO'#K[O#'cQ`O7+(dO4UQ!fO7+(dO$BuQ`O7+(dO%6}Q!0MvO'#CiO%7nQ!0LrO,5=RO%8PQ!0MvO,5=RO%8dQ`O,5=ROOQ!0Lb1G5m1G5mOOQ[7+$a7+$aO!BYQ!0LrO7+$aO!BeQpO7+$aO!$fQlO7+&_O%8lQ`O'#JOO%9TQ`O,5@}OOQO1G3f1G3fO9aQ`O,5@}O%9TQ`O,5@}O%9]Q`O,5@}OOQO,5?k,5?kOOQO-E<}-E<}OOQ!0Lf7+'S7+'SO%9bQ`O7+)PO9kQ!0LrO7+)PO9aQ`O7+)PO@iQ`O7+)POOQ[7+(o7+(oO%9gQ!0MvO7+(lO!&iQMhO7+(lO!DfQ`O7+(mOOQ[7+(m7+(mO!&iQMhO7+(mO%9qQ`O'#K`O%9|Q`O,5=kOOQO,5?g,5?gOOQO-E<y-E<yOOQ[7+(r7+(rO%;`QpO'#HYOOQ[1G3_1G3_O!&iQMhO1G3_O%[QlO1G3_O%;gQ`O1G3_O%;rQMhO1G3_O9kQ!0LrO1G3aO$#yQ`O1G3aO9UQ`O1G3aO!BeQpO1G3aO!BmQMhO1G3aO%<QQ`O'#I}O%<fQ`O,5@{O%<nQpO,5@{OOQ!0Lb1G3b1G3bOOQ[7+$V7+$VO@iQ`O7+$VO9kQ!0LrO7+$VO%<yQ`O7+$VO%[QlO1G6jO%[QlO1G6kO%=OQ!0LrO1G6jO%=YQlO1G3iO%=aQ`O1G3iO%=fQlO1G3iOOQ[7+)R7+)RO9kQ!0LrO7+)]O`QlO7+)_OOQ['#Kf'#KfOOQ['#JQ'#JQO%=mQlO,5>^OOQ[,5>^,5>^O%[QlO'#HsO%=zQ`O'#HuOOQ[,5>d,5>dO9ZQ`O,5>dOOQ[,5>f,5>fOOQ[7+)h7+)hOOQ[7+)n7+)nOOQ[7+)r7+)rOOQ[7+)t7+)tO%>PQpO1G5zO%>kQ?MtO1G0xO%>uQ`O1G0xOOQO1G/q1G/qO%?QQ?MtO1G/qO>wQ`O1G/qO!(yQlO'#DkOOQO,5>},5>}OOQO-E<a-E<aOOQO,5?T,5?TOOQO-E<g-E<gO!BeQpO1G/qOOQO-E<c-E<cOOQ!0Ln1G0Z1G0ZOOQ!0Lf7+%s7+%sO#'cQ`O7+%sOOQ!0Lf7+&^7+&^O>wQ`O7+&^O!BeQpO7+&^OOQO7+%v7+%vO$?{Q!0MxO7+&VOOQO7+&V7+&VO%[QlO7+&VO%?[Q!0LrO7+&VO!BYQ!0LrO7+%vO!BeQpO7+%vO%?gQ!0LrO7+&VO%?uQ!0MxO7++pO%[QlO7++pO%@VQ`O7++oO%@VQ`O7++oOOQO1G4q1G4qO9ZQ`O1G4qO%@_Q`O1G4qOOQS7+%{7+%{O#'cQ`O<<LOO4UQ!fO<<LOO%@mQ`O<<LOOOQ[<<LO<<LOO!&iQMhO<<LOO%[QlO<<LOO%@uQ`O<<LOO%AQQ!0MzO,5?_O%C]Q!0MzO,5?aO%EhQ!0MzO1G2_O%GyQ!0MzO1G2rO%JUQ!0MzO1G2tO%LaQ!fO,5?OO%[QlO,5?OOOQO-E<b-E<bO%LkQ`O1G5{OOQ!0Lf<<JS<<JSO%LsQ?MtO1G0sO%NzQ?MtO1G0}O& RQ?MtO1G0}O&#SQ?MtO1G0}O&#ZQ?MtO1G0}O&%[Q?MtO1G0}O&']Q?MtO1G0}O&'dQ?MtO1G0}O&'kQ?MtO1G0}O&)lQ?MtO1G0}O&)sQ?MtO1G0}O&)zQ!0MxO<<JeO&+rQ?MtO1G0}O&,oQ?MvO1G0}O&-rQ?MvO'#JjO&/xQ?MtO1G1bO&0VQ?MtO1G0SO&0aQMjO,5?ROOQO-E<e-E<eO!(yQlO'#FpOOQO'#KX'#KXOOQO1G1t1G1tO&0kQ`O1G1sO&0pQ?MtO,5?YOOOW7+'g7+'gOOOO1G/X1G/XO&0zQ!dO1G4vOOQ!0Lh7+(P7+(PP!&iQMhO,5?[O!+rQMhO7+(bO&1RQ`O,5?ZO9ZQ`O,5?ZOOQO-E<m-E<mO&1aQ`O1G6`O&1aQ`O1G6`O&1iQ`O1G6`O&1tQMjO7+'yO&2UQ!dO,5?]O&2`Q`O,5?]O!&iQMhO,5?]OOQO-E<o-E<oO&2eQ!dO1G6aO&2oQ`O1G6aO&2wQ`O1G2jO!&iQMhO1G2jOOQ!0Lb1G2h1G2hOOQ!0Lb1G2i1G2iO%2qQpO1G2hO!BeQpO1G2hOCfQ`O1G2hOOQ!0Lb1G2p1G2pO&2|QpO1G2hO&3[Q`O1G2jO$)iQ`O1G2iOCfQ`O1G2iO$#^QlO1G2jO&3dQ`O1G2iO&4WQMjO,5?_OOQ!0Lh-E<r-E<rO&4yQMjO,5?aOOQ!0Lh-E<t-E<tO!+rQMhO7++ZOOQ!0Lh1G/a1G/aO&5TQ`O1G/aOOQ!0Lh7+'t7+'tO&5YQMjO7+'{O&5jQMjO7++ZO&5tQMjO7++ZO&6RQ!0MxO<<KWOOQ!0Lf<<KW<<KWO&6uQ`O1G0xO!&iQMhO'#IxO&6zQ`O,5@vO&8|Q!fO<<LOO!&iQMhO1G2mO&9TQ!0LrO1G2mOOQ[<<G{<<G{O!BYQ!0LrO<<G{O&9fQ!0MxO<<IyOOQ!0Lf<<Iy<<IyOOQO,5?j,5?jO&:YQ`O,5?jO&:_Q`O,5?jOOQO-E<|-E<|O&:mQ`O1G6iO&:mQ`O1G6iO9aQ`O1G6iO@iQ`O<<LkOOQ[<<Lk<<LkO&:uQ`O<<LkO9kQ!0LrO<<LkOOQ[<<LW<<LWO%9gQ!0MvO<<LWOOQ[<<LX<<LXO!DfQ`O<<LXO&:zQpO'#IzO&;VQ`O,5@zO!(yQlO,5@zOOQ[1G3V1G3VOOQO'#I|'#I|O9kQ!0LrO'#I|O&;_QpO,5=tOOQ[,5=t,5=tO&;fQpO'#EeO&;mQpO'#GdO&;rQ`O7+(yO&;wQ`O7+(yOOQ[7+(y7+(yO!&iQMhO7+(yO%[QlO7+(yO&<PQ`O7+(yOOQ[7+({7+({O9kQ!0LrO7+({O$#yQ`O7+({O9UQ`O7+({O!BeQpO7+({O&<[Q`O,5?iOOQO-E<{-E<{OOQO'#H]'#H]O&<gQ`O1G6gO9kQ!0LrO<<GqOOQ[<<Gq<<GqO@iQ`O<<GqO&<oQ`O7+,UO&<tQ`O7+,VO%[QlO7+,UO%[QlO7+,VOOQ[7+)T7+)TO&<yQ`O7+)TO&=OQlO7+)TO&=VQ`O7+)TOOQ[<<Lw<<LwOOQ[<<Ly<<LyOOQ[-E=O-E=OOOQ[1G3x1G3xO&=[Q`O,5>_OOQ[,5>a,5>aO&=aQ`O1G4OO9ZQ`O7+&dO!(yQlO7+&dOOQO7+%]7+%]O&=fQ?MtO1G6XO>wQ`O7+%]OOQ!0Lf<<I_<<I_OOQ!0Lf<<Ix<<IxO>wQ`O<<IxOOQO<<Iq<<IqO$?{Q!0MxO<<IqO%[QlO<<IqOOQO<<Ib<<IbO!BYQ!0LrO<<IbO&=pQ!0LrO<<IqO&={Q!0MxO<= [O&>]Q`O<= ZOOQO7+*]7+*]O9ZQ`O7+*]OOQ[ANAjANAjO&>eQ!fOANAjO!&iQMhOANAjO#'cQ`OANAjO4UQ!fOANAjO&>lQ`OANAjO%[QlOANAjO&>tQ!0MzO7+'yO&AVQ!0MzO,5?_O&CbQ!0MzO,5?aO&EmQ!0MzO7+'{O&HOQ!fO1G4jO&HYQ?MtO7+&_O&J^Q?MvO,5=WO&LeQ?MvO,5=YO&LuQ?MvO,5=WO&MVQ?MvO,5=YO&MgQ?MvO,59sO' mQ?MvO,5<jO'#pQ?MvO,5<lO'&UQ?MvO,5<zO''zQ?MtO7+'jO'(XQ?MtO7+'lO'(fQ`O,5<[OOQO7+'_7+'_OOQ!0Lh7+*b7+*bO'(kQMjO<<K|OOQO1G4u1G4uO'(rQ`O1G4uO'(}Q`O1G4uO')]Q`O7++zO')]Q`O7++zO!&iQMhO1G4wO')eQ!dO1G4wO')oQ`O7++{O')wQ`O7+(UO'*SQ!dO7+(UOOQ!0Lb7+(S7+(SOOQ!0Lb7+(T7+(TO!BeQpO7+(SOCfQ`O7+(SO'*^Q`O7+(UO!&iQMhO7+(UO$)iQ`O7+(TO'*cQ`O7+(UOCfQ`O7+(TO'*kQMjO<<NuOOQ!0Lh7+${7+${O!+rQMhO<<NuO'*uQ!dO,5?dOOQO-E<v-E<vO'+PQ!0MvO7+(XO!&iQMhO7+(XOOQ[AN=gAN=gO9aQ`O1G5UOOQO1G5U1G5UO'+aQ`O1G5UO'+fQ`O7+,TO'+fQ`O7+,TO9kQ!0LrOANBVO@iQ`OANBVOOQ[ANBVANBVOOQ[ANArANArOOQ[ANAsANAsO'+nQ`O,5?fOOQO-E<x-E<xO'+yQ?MtO1G6fOOQO,5?h,5?hOOQO-E<z-E<zOOQ[1G3`1G3`O',TQ`O,5=OOOQ[<<Le<<LeO!&iQMhO<<LeO&;rQ`O<<LeO',YQ`O<<LeO%[QlO<<LeOOQ[<<Lg<<LgO9kQ!0LrO<<LgO$#yQ`O<<LgO9UQ`O<<LgO',bQpO1G5TO',mQ`O7+,ROOQ[AN=]AN=]O9kQ!0LrOAN=]OOQ[<= p<= pOOQ[<= q<= qO',uQ`O<= pO',zQ`O<= qOOQ[<<Lo<<LoO'-PQ`O<<LoO'-UQlO<<LoOOQ[1G3y1G3yO>wQ`O7+)jO'-]Q`O<<JOO'-hQ?MtO<<JOOOQO<<Hw<<HwOOQ!0LfAN?dAN?dOOQOAN?]AN?]O$?{Q!0MxOAN?]OOQOAN>|AN>|O%[QlOAN?]OOQO<<Mw<<MwOOQ[G27UG27UO!&iQMhOG27UO#'cQ`OG27UO'-rQ!fOG27UO4UQ!fOG27UO'-yQ`OG27UO'.RQ?MtO<<JeO'.`Q?MvO1G2_O'0UQ?MvO,5?_O'2XQ?MvO,5?aO'4[Q?MvO1G2rO'6_Q?MvO1G2tO'8bQ?MtO<<KWO'8oQ?MtO<<IyOOQO1G1v1G1vO!+rQMhOANAhOOQO7+*a7+*aO'8|Q`O7+*aO'9XQ`O<= fO'9aQ!dO7+*cOOQ!0Lb<<Kp<<KpO$)iQ`O<<KpOCfQ`O<<KpO'9kQ`O<<KpO!&iQMhO<<KpOOQ!0Lb<<Kn<<KnO!BeQpO<<KnO'9vQ!dO<<KpOOQ!0Lb<<Ko<<KoO':QQ`O<<KpO!&iQMhO<<KpO$)iQ`O<<KoO':VQMjOANDaO':aQ!0MvO<<KsOOQO7+*p7+*pO9aQ`O7+*pO':qQ`O<= oOOQ[G27qG27qO9kQ!0LrOG27qO!(yQlO1G5QO':yQ`O7+,QO';RQ`O1G2jO&;rQ`OANBPOOQ[ANBPANBPO!&iQMhOANBPO';WQ`OANBPOOQ[ANBRANBRO9kQ!0LrOANBRO$#yQ`OANBROOQO'#H^'#H^OOQO7+*o7+*oOOQ[G22wG22wOOQ[ANE[ANE[OOQ[ANE]ANE]OOQ[ANBZANBZO';`Q`OANBZOOQ[<<MU<<MUO!(yQlOAN?jOOQOG24wG24wO$?{Q!0MxOG24wO#'cQ`OLD,pOOQ[LD,pLD,pO!&iQMhOLD,pO';eQ!fOLD,pO';lQ?MvO7+'yO'=bQ?MvO,5?_O'?eQ?MvO,5?aO'AhQ?MvO7+'{O'C^QMjOG27SOOQO<<M{<<M{OOQ!0LbANA[ANA[O$)iQ`OANA[OCfQ`OANA[O'CnQ!dOANA[OOQ!0LbANAYANAYO'CuQ`OANA[O!&iQMhOANA[O'DQQ!dOANA[OOQ!0LbANAZANAZOOQO<<N[<<N[OOQ[LD-]LD-]O'D[Q?MtO7+*lOOQO'#Ge'#GeOOQ[G27kG27kO&;rQ`OG27kO!&iQMhOG27kOOQ[G27mG27mO9kQ!0LrOG27mOOQ[G27uG27uO'DfQ?MtOG25UOOQOLD*cLD*cOOQ[!$(![!$(![O#'cQ`O!$(![O!&iQMhO!$(![O'DpQ!0MzOG27SOOQ!0LbG26vG26vO$)iQ`OG26vO'GRQ`OG26vOCfQ`OG26vO'G^Q!dOG26vO!&iQMhOG26vOOQ[LD-VLD-VO&;rQ`OLD-VOOQ[LD-XLD-XOOQ[!)9Ev!)9EvO#'cQ`O!)9EvOOQ!0LbLD,bLD,bO$)iQ`OLD,bOCfQ`OLD,bO'GeQ`OLD,bO'GpQ!dOLD,bOOQ[!$(!q!$(!qOOQ[!.K;b!.K;bO'GwQ?MvOG27SOOQ!0Lb!$( |!$( |O$)iQ`O!$( |OCfQ`O!$( |O'ImQ`O!$( |OOQ!0Lb!)9Eh!)9EhO$)iQ`O!)9EhOCfQ`O!)9EhOOQ!0Lb!.K;S!.K;SO$)iQ`O!.K;SOOQ!0Lb!4/0n!4/0nO!(yQlO'#DxO1PQ`O'#EVO'IxQ!fO'#JpO'JPQ!L^O'#DtO'JWQlO'#D|O'J_Q!fO'#CiO'LuQ!fO'#CiO!(yQlO'#EOO'MVQlO,5;XO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO'#InO( YQ`O,5<hO!(yQlO,5;cO( bQMhO,5;cO(!{QMhO,5;cO!(yQlO,5;vO!&iQMhO'#GlO( bQMhO'#GlO!&iQMhO'#GnO( bQMhO'#GnO1SQ`O'#DXO1SQ`O'#DXO!&iQMhO'#GOO( bQMhO'#GOO!&iQMhO'#GQO( bQMhO'#GQO!&iQMhO'#G`O( bQMhO'#G`O!(yQlO,5:hO(#SQpO'#D]O(#^QpO'#JtO!(yQlO,5@mO'MVQlO1G0sO(#hQ?MtO'#CiO!(yQlO1G2OO!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO(#rQ!dO'#CrO!&iQMhO,5<sO( bQMhO,5<sO'MVQlO1G2QO!(yQlO7+&yO!&iQMhO1G2_O( bQMhO1G2_O!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO!&iQMhO1G2aO( bQMhO1G2aO'MVQlO7+'lO'MVQlO7+&_O!&iQMhOANAhO( bQMhOANAhO($VQ`O'#EmO($[Q`O'#EmO($dQ`O'#F[O($iQ`O'#EwO($nQ`O'#KRO($yQ`O'#KPO(%UQ`O,5;XO(%ZQMjO,5<dO(%bQ`O'#GXO(%gQ`O'#GXO(%lQ`O,5<fO(%tQ`O,5;XO(%|Q?MtO1G1_O(&TQ`O,5<sO(&YQ`O,5<sO(&_Q`O,5<uO(&dQ`O,5<uO(&iQ`O1G2QO(&nQ`O1G0sO(&sQMjO<<K|O(&zQMjO<<K|O7eQMhO'#F{O9UQ`O'#FzOAdQ`O'#ElO!(yQlO,5;sO!3^Q`O'#GXO!3^Q`O'#GXO!3^Q`O'#GZO!3^Q`O'#GZO!+rQMhO7+(bO!+rQMhO7+(bO%-ZQ!dO1G2vO%-ZQ!dO1G2vO!&iQMhO,5=[O!&iQMhO,5=[",stateData:"((P~O'zOS'{OSTOS'|RQ~OPYOQYOSfOY!VOaqOdzOeyOj!POnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!swO!vxO!z]O$V|O$miO%g}O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO&U!WO&[!XO&^!YO&`!ZO&b![O&e!]O&k!^O&q!_O&s!`O&u!aO&w!bO&y!cO(RSO(TTO(WUO(_VO(m[O~OWtO~P`OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa!wOq!nO!Q!oO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!xO#U!pO#V!pO#Y!zO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O'|!{O~OP]XR]X[]Xa]Xp]X!O]X!Q]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X'x]X(_]X(p]X(w]X(x]X~O!e%QX~P(qO_!}O(T#PO(U!}O(V#PO~O_#QO(V#PO(W#PO(X#QO~Ov#SO!S#TO(`#TO(a#VO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R;{O(TTO(WUO(_VO(m[O~O!Y#ZO!Z#WO!W(fP!W(tP~P+}O![#cO~P`OPYOQYOSfOd!jOe!iOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(TTO(WUO(_VO(m[O~On#mO!Y#iO!z]O#g#lO#h#iO(R;|O!i(qP~P.iO!j#oO(R#nO~O!v#sO!z]O%g#tO~O#i#uO~O!e#vO#i#uO~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z$_O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa(dX'x(dX'u(dX!i(dX!W(dX!](dX%h(dX!e(dX~P1qO#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX!](eX%h(eX~Oa(eX'x(eX'u(eX!W(eX!i(eXt(eX!e(eX~P4UO#^$eO~O$[$hO$^$gO$e$mO~OSfO!]$nO$h$oO$j$qO~Oh%VOj%cOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R$sO(TTO(WUO(_$uO(w$}O(x%POg([P~O!j%dO~O!Q%gO!]%hO(R%fO~O!e%lO~Oa%mO'x%mO~O!O%qO~P%[O(S!lO~P%[O%m%uO~P%[Oh%VO!j%dO(R%fO(S!lO~Oe%|O!j%dO(R%fO~O#t$RO~O!O&RO!]&OO!j&QO%i&UO(R%fO(S!lO(TTO(WUO`)UP~O!v#sO~O%r&WO!Q)QX!])QX(R)QX~O(R&XO~Oj!PO!s&^O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO~Od&cOe&bO!v&`O%g&aO%z&_O~P<POd&fOeyOj!PO!]&eO!s&^O!vxO!z]O%g}O%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO~Ob&iO#^&lO%i&gO(S!lO~P=UO!j&mO!s&qO~O!j#oO~O!]XO~Oa%mO'v&yO'x%mO~Oa%mO'v&|O'x%mO~Oa%mO'v'OO'x%mO~O'u]X!W]Xt]X!i]X&Y]X!]]X%h]X!e]X~P(qO!`']O!a'UO!b'UO(S!lO(TTO(WUO~Oq'SO!Q'RO!Y'VO(c'QO![(gP![(vP~P@]Ol'`O!]'^O(R%fO~Oe'eO!j%dO(R%fO~O!O&RO!j&QO~Oq!nO!Q!oO!z;wO#R!pO#S!pO#U!pO#V!pO(S!lO(TTO(WUO(c!mO(m!sO~O!`'kO!a'jO!b'jO#T!pO#Y'lO#Z'lO~PAwOa%mOh%VO!e#vO!j%dO'x%mO(p'nO~O!n'rO#^'pO~PCVOq!nO!Q!oO(TTO(WUO(c!mO(m!sO~O!]XOq(kX!Q(kX!`(kX!a(kX!b(kX!z(kX#R(kX#S(kX#T(kX#U(kX#V(kX#Y(kX#Z(kX(S(kX(T(kX(W(kX(c(kX(m(kX~O!a'jO!b'jO(S!lO~PCuO'}'vO(O'vO(P'xO~O_!}O(T'zO(U!}O(V'zO~O_#QO(V'zO(W'zO(X#QO~Ot'|O~P%[Ov#SO!S#TO(`#TO(a(PO~O!Y(RO!W'UX!W'[X!Z'UX!Z'[X~P+}O!Z(TO!W(fX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z(TO!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~O!W(fX~PGpO!W(YO~O!W(sX!Z(sX!e(sX!i(sX(p(sX~O#^(sX#i#bX![(sX~PIsO#^(ZO!W(uX!Z(uX~O!Z([O!W(tX~O!W(_O~O#^$eO~PIsO![(`O~P`OR#zO!O#yO!Q#{O!j#xO(_VOP!la[!lap!la!Z!la!n!la#P!la#l!la#m!la#n!la#o!la#p!la#q!la#r!la#s!la#t!la#u!la#w!la#y!la#z!la(p!la(w!la(x!la~Oa!la'x!la'u!la!W!la!i!lat!la!]!la%h!la!e!la~PKZO!i(aO~O!e#vO#^(bO(p'nO!Z(rXa(rX'x(rX~O!i(rX~PMvO!Q%gO!]%hO!z]O#g(gO#h(fO(R%fO~O!Z(hO!i(qX~O!i(jO~O!Q%gO!]%hO#h(fO(R%fO~OP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O!e#vO!i(eX~P! dOR(lO!O(kO!j#xO#Q$dO!z!ya!Q!ya~O!v!ya%g!ya!]!ya#g!ya#h!ya(R!ya~P!#eO!v(pO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~O#i(vO~O!Y(xO!i(iP~P%[O(c(zO(m[O~O!Q(|O!j#xO(c(zO(m[O~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z$_Oa$pa'x$pa'u$pa!i$pa!W$pa!]$pa%h$pa!e$pa~Oj)bO~P!&iOh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Og(nP~P!+rO!O)gO!e)fO!]$]X$Y$]X$[$]X$^$]X$e$]X~O!e)fO!](yX$Y(yX$[(yX$^(yX$e(yX~O!O)gO~P!-{O!O)gO!](yX$Y(yX$[(yX$^(yX$e(yX~O!])iO$Y)mO$[)hO$^)hO$e)nO~O!Y)qO~P!(yO$[$hO$^$gO$e)uO~Ol$yX!O$yX#Q$yX'w$yX(w$yX(x$yX~OgkXg$yXlkX!ZkX#^kX~P!/qOv)wO(`)xO(a)zO~Ol*TO!O)|O'w)}O(w$}O(x%PO~Og){O~P!0uOg*UO~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q*WO!]*XO!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~O!Y*[O(R*VO!i(|P~P!1dO#i*^O~O!j*_O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R*aO(TTO(WUO(_$uO(w$}O(x%PO~O!Y*dO!W(}P~P!3cOp*pOq!nO!Q*fO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO(c!mO~O![*mO~P!5WO#Q$dOl(^X!O(^X'w(^X(w(^X(x(^X!Z(^X#^(^X~Og(^X#}(^X~P!6YOl*uO#^*tOg(]X!Z(]X~O!Z*vOg([X~Oj%cO(R&XOg([P~Oq*yO~O!j+OO~O(R(tO~On+TO!Q%gO!Y#iO!]%hO!z]O#g#lO#h#iO(R%fO!i(qP~O!e#vO#i+UO~O!Q%gO!Y+WO!Z([O!]%hO(R%fO!W(tP~Oq'YO!Q+YO!Y+XO(TTO(WUO(c(zO~O![(vP~P!9]O!Z+ZOa)RX'x)RX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa!ha!Z!ha'x!ha'u!ha!W!ha!i!hat!ha!]!ha%h!ha!e!ha~P!:TOR#zO!O#yO!Q#{O!j#xO(_VOP!pa[!pap!pa!Z!pa!n!pa#P!pa#l!pa#m!pa#n!pa#o!pa#p!pa#q!pa#r!pa#s!pa#t!pa#u!pa#w!pa#y!pa#z!pa(p!pa(w!pa(x!pa~Oa!pa'x!pa'u!pa!W!pa!i!pat!pa!]!pa%h!pa!e!pa~P!<kOR#zO!O#yO!Q#{O!j#xO(_VOP!ra[!rap!ra!Z!ra!n!ra#P!ra#l!ra#m!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#w!ra#y!ra#z!ra(p!ra(w!ra(x!ra~Oa!ra'x!ra'u!ra!W!ra!i!rat!ra!]!ra%h!ra!e!ra~P!?ROh%VOl+dO!]'^O%h+cO~O!e+fOa(ZX!](ZX'x(ZX!Z(ZX~Oa%mO!]XO'x%mO~Oh%VO!j%dO~Oh%VO!j%dO(R%fO~O!e#vO#i(vO~Ob+qO%i+rO(R+nO(TTO(WUO![)VP~O!Z+sO`)UX~O[+wO~O`+xO~O!]&OO(R%fO(S!lO`)UP~Oh%VO#^+}O~Oh%VOl,QO!]$|O~O!],SO~O!O,UO!]XO~O%m%uO~O!v,ZO~Oe,`O~Ob,aO(R#nO(TTO(WUO![)TP~Oe%|O~O%i!QO(R&XO~P=UO[,fO`,eO~OPYOQYOSfOdzOeyOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!guO!jZO!mYO!nYO!oYO!qvO!vxO!z]O$miO%g}O(TTO(WUO(_VO(m[O~O!]!eO!s!gO$V!kO(R!dO~P!FRO`,eOa%mO'x%mO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa,kOj!OO!swO%k!OO%l!OO%m!OO~P!HkO!j&mO~O&[,qO~O!],sO~O&m,uO&o,vOP&jaQ&jaS&jaY&jaa&jad&jae&jaj&jan&jap&jaq&jar&jax&jaz&ja|&ja!Q&ja!U&ja!V&ja!]&ja!g&ja!j&ja!m&ja!n&ja!o&ja!q&ja!s&ja!v&ja!z&ja$V&ja$m&ja%g&ja%i&ja%k&ja%l&ja%m&ja%p&ja%r&ja%u&ja%v&ja%x&ja&U&ja&[&ja&^&ja&`&ja&b&ja&e&ja&k&ja&q&ja&s&ja&u&ja&w&ja&y&ja'u&ja(R&ja(T&ja(W&ja(_&ja(m&ja![&ja&c&jab&ja&h&ja~O(R,{O~Oh!cX!Z!PX![!PX!e!PX!e!cX!j!cX#^!PX~O!Z!cX![!cX~P# qO!e-QO#^-POh(hX!Z#fX![#fX!e(hX!j(hX~O!Z(hX![(hX~P#!dOh%VO!e-SO!j%dO!Z!_X![!_X~Oq!nO!Q!oO(TTO(WUO(c!mO~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(TTO(WUO(_VO(m[O~O(R<rO~P##yO!Z-WO![(gX~O![-YO~O!e-QO#^-PO!Z#fX![#fX~O!Z-ZO![(vX~O![-]O~O!a-^O!b-^O(S!lO~P##hO![-aO~P'_Ol-dO!]'^O~O!W-iO~Oq!ya!`!ya!a!ya!b!ya#R!ya#S!ya#T!ya#U!ya#V!ya#Y!ya#Z!ya(S!ya(T!ya(W!ya(c!ya(m!ya~P!#eO!n-nO#^-lO~PCVO!a-pO!b-pO(S!lO~PCuOa%mO#^-lO'x%mO~Oa%mO!e#vO#^-lO'x%mO~Oa%mO!e#vO!n-nO#^-lO'x%mO(p'nO~O'}'vO(O'vO(P-uO~Ot-vO~O!W'Ua!Z'Ua~P!:TO!Y-zO!W'UX!Z'UX~P%[O!Z(TO!W(fa~O!W(fa~PGpO!Z([O!W(ta~O!Q%gO!Y.OO!]%hO(R%fO!W'[X!Z'[X~O#^.QO!Z(ra!i(raa(ra'x(ra~O!e#vO~P#,PO!Z(hO!i(qa~O!Q%gO!]%hO#h.UO(R%fO~On.ZO!Q%gO!Y.WO!]%hO!z]O#g.YO#h.WO(R%fO!Z'_X!i'_X~OR._O!j#xO~Oh%VOl.bO!]'^O%h.aO~Oa#ai!Z#ai'x#ai'u#ai!W#ai!i#ait#ai!]#ai%h#ai!e#ai~P!:TOl=|O!O)|O'w)}O(w$}O(x%PO~O#i#]aa#]a#^#]a'x#]a!Z#]a!i#]a!]#]a!W#]a~P#.{O#i(^XP(^XR(^X[(^Xa(^Xp(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X'x(^X(_(^X(p(^X!i(^X!W(^X'u(^Xt(^X!](^X%h(^X!e(^X~P!6YO!Z.oO!i(iX~P!:TO!i.rO~O!W.tO~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kia#kip#ki!Z#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#l#ki~P#2kO#l$OO~P#2kOP$[OR#zOp$aO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO[#kia#ki!Z#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#p#ki~P#5YO#p$QO~P#5YOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO(_VOa#ki!Z#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#u#ki~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO(_VO(x#}Oa#ki!Z#ki#y#ki#z#ki'x#ki(p#ki(w#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#w$UO~P#:_O#w#ki~P#:_O#u$SO~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO(_VO(w#|O(x#}Oa#ki!Z#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#y#ki~P#=TO#y$WO~P#=TOP]XR]X[]Xp]X!O]X!Q]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X!Z]X![]X~O#}]X~P#?rOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO#y<XO#z<YO(_VO(p$YO(w#|O(x#}O~O#}.vO~P#BPO#Q$dO#^<`O$P<`O#}(eX![(eX~P! dOa'ba!Z'ba'x'ba'u'ba!i'ba!W'bat'ba!]'ba%h'ba!e'ba~P!:TO[#kia#kip#ki!Z#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO(w#ki(x#ki~P#EROl=|O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P#ERO!Z.zOg(nX~P!0uOg.|O~Oa$Oi!Z$Oi'x$Oi'u$Oi!W$Oi!i$Oit$Oi!]$Oi%h$Oi!e$Oi~P!:TO$[.}O$^.}O~O$[/OO$^/OO~O!e)fO#^/PO!]$bX$Y$bX$[$bX$^$bX$e$bX~O!Y/QO~O!])iO$Y/SO$[)hO$^)hO$e/TO~O!Z<ZO![(dX~P#BPO![/UO~O!e)fO$e(yX~O$e/WO~Ot/XO~P!&iOv)wO(`)xO(a/[O~O!Q/_O~O(w$}Ol%`a!O%`a'w%`a(x%`a!Z%`a#^%`a~Og%`a#}%`a~P#LTO(x%POl%ba!O%ba'w%ba(w%ba!Z%ba#^%ba~Og%ba#}%ba~P#LvO!ZfX!efX!ifX!i$yX(pfX~P!/qO!Y/hO!Z([O(R/gO!W(tP!W(}P~P!1dOp*pO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO~Oq<oO!Q/iO!Y+XO![*mO(c<nO![(vP~P#NaO!i/jO~P#.{O!Z/kO!e#vO(p'nO!i(|X~O!i/pO~O!Q%gO!Y*[O!]%hO(R%fO!i(|P~O#i/rO~O!W$yX!Z$yX!e%QX~P!/qO!Z/sO!W(}X~P#.{O!e/uO~O!W/wO~OnkO(R/xO~P.iOh%VOp/}O!e#vO!j%dO(p'nO~O!e+fO~Oa%mO!Z0RO'x%mO~O![0TO~P!5WO!a0UO!b0UO(S!lO~P##hOq!nO!Q0VO(TTO(WUO(c!mO~O#Y0XO~Og%`a!Z%`a#^%`a#}%`a~P!0uOg%ba!Z%ba#^%ba#}%ba~P!0uOj%cO(R&XOg'kX!Z'kX~O!Z*vOg([a~Og0bO~OR0cO!O0cO!Q0dO#Q$dOl{a'w{a(w{a(x{a!Z{a#^{a~Og{a#}{a~P$&dO!O)|O'w)}Ol$ra(w$ra(x$ra!Z$ra#^$ra~Og$ra#}$ra~P$'`O!O)|O'w)}Ol$ta(w$ta(x$ta!Z$ta#^$ta~Og$ta#}$ta~P$(RO#i0gO~Og%Sa!Z%Sa#^%Sa#}%Sa~P!0uOl0iO#^0hOg(]a!Z(]a~O!e#vO~O#i0lO~O!Z+ZOa)Ra'x)Ra~OR#zO!O#yO!Q#{O!j#xO(_VOP!pi[!pip!pi!Z!pi!n!pi#P!pi#l!pi#m!pi#n!pi#o!pi#p!pi#q!pi#r!pi#s!pi#t!pi#u!pi#w!pi#y!pi#z!pi(p!pi(w!pi(x!pi~Oa!pi'x!pi'u!pi!W!pi!i!pit!pi!]!pi%h!pi!e!pi~P$*OOh%VOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~On0vO%[0wO(R0tO~P$,fO!e+fOa(Za!](Za'x(Za!Z(Za~O#i0|O~O[]X!ZfX![fX~O!Z0}O![)VX~O![1PO~O[1QO~Ob1SO(R+nO(TTO(WUO~O!]&OO(R%fO`'sX!Z'sX~O!Z+sO`)Ua~O!i1VO~P!:TO[1YO~O`1ZO~O#^1^O~Ol1aO!]$|O~O(c(zO![)SP~Oh%VOl1jO!]1gO%h1iO~O[1tO!Z1rO![)TX~O![1uO~O`1wOa%mO'x%mO~O(R#nO(TTO(WUO~O#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O#t1zO&Y1{Oa(eX~P$2PO#^$eO#t1zO&Y1{O~Oa1}O~P%[Oa2PO~O&c2SOP&aiQ&aiS&aiY&aia&aid&aie&aij&ain&aip&aiq&air&aix&aiz&ai|&ai!Q&ai!U&ai!V&ai!]&ai!g&ai!j&ai!m&ai!n&ai!o&ai!q&ai!s&ai!v&ai!z&ai$V&ai$m&ai%g&ai%i&ai%k&ai%l&ai%m&ai%p&ai%r&ai%u&ai%v&ai%x&ai&U&ai&[&ai&^&ai&`&ai&b&ai&e&ai&k&ai&q&ai&s&ai&u&ai&w&ai&y&ai'u&ai(R&ai(T&ai(W&ai(_&ai(m&ai![&aib&ai&h&ai~Ob2YO![2WO&h2XO~P`O!]XO!j2[O~O&o,vOP&jiQ&jiS&jiY&jia&jid&jie&jij&jin&jip&jiq&jir&jix&jiz&ji|&ji!Q&ji!U&ji!V&ji!]&ji!g&ji!j&ji!m&ji!n&ji!o&ji!q&ji!s&ji!v&ji!z&ji$V&ji$m&ji%g&ji%i&ji%k&ji%l&ji%m&ji%p&ji%r&ji%u&ji%v&ji%x&ji&U&ji&[&ji&^&ji&`&ji&b&ji&e&ji&k&ji&q&ji&s&ji&u&ji&w&ji&y&ji'u&ji(R&ji(T&ji(W&ji(_&ji(m&ji![&ji&c&jib&ji&h&ji~O!W2bO~O!Z!_a![!_a~P#BPOq!nO!Q!oO!Y2hO(c!mO!Z'VX!['VX~P@]O!Z-WO![(ga~O!Z']X![']X~P!9]O!Z-ZO![(va~O![2oO~P'_Oa%mO#^2xO'x%mO~Oa%mO!e#vO#^2xO'x%mO~Oa%mO!e#vO!n2|O#^2xO'x%mO(p'nO~Oa%mO'x%mO~P!:TO!Z$_Ot$pa~O!W'Ui!Z'Ui~P!:TO!Z(TO!W(fi~O!Z([O!W(ti~O!W(ui!Z(ui~P!:TO!Z(ri!i(ria(ri'x(ri~P!:TO#^3OO!Z(ri!i(ria(ri'x(ri~O!Z(hO!i(qi~O!Q%gO!]%hO!z]O#g3TO#h3SO(R%fO~O!Q%gO!]%hO#h3SO(R%fO~Ol3[O!]'^O%h3ZO~Oh%VOl3[O!]'^O%h3ZO~O#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`at%`a!]%`a%h%`a!e%`a~P#LTO#i%baP%baR%ba[%baa%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%bat%ba!]%ba%h%ba!e%ba~P#LvO#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!Z%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`a#^%`at%`a!]%`a%h%`a!e%`a~P#.{O#i%baP%baR%ba[%baa%bap%ba!Q%ba!Z%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%ba#^%bat%ba!]%ba%h%ba!e%ba~P#.{O#i{aP{a[{aa{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a'x{a(_{a(p{a!i{a!W{a'u{at{a!]{a%h{a!e{a~P$&dO#i$raP$raR$ra[$raa$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra'x$ra(_$ra(p$ra!i$ra!W$ra'u$rat$ra!]$ra%h$ra!e$ra~P$'`O#i$taP$taR$ta[$taa$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta'x$ta(_$ta(p$ta!i$ta!W$ta'u$tat$ta!]$ta%h$ta!e$ta~P$(RO#i%SaP%SaR%Sa[%Saa%Sap%Sa!Q%Sa!Z%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa'x%Sa(_%Sa(p%Sa!i%Sa!W%Sa'u%Sa#^%Sat%Sa!]%Sa%h%Sa!e%Sa~P#.{Oa#aq!Z#aq'x#aq'u#aq!W#aq!i#aqt#aq!]#aq%h#aq!e#aq~P!:TO!Y3dO!Z'WX!i'WX~P%[O!Z.oO!i(ia~O!Z.oO!i(ia~P!:TO!W3gO~O#}!la![!la~PKZO#}!ha!Z!ha![!ha~P#BPO#}!pa![!pa~P!<kO#}!ra![!ra~P!?ROg'ZX!Z'ZX~P!+rO!Z.zOg(na~OSfO!]3{O$c3|O~O![4QO~Ot4RO~P#.{Oa$lq!Z$lq'x$lq'u$lq!W$lq!i$lqt$lq!]$lq%h$lq!e$lq~P!:TO!W4TO~P!&iO!Q4UO~O!O)|O'w)}O(x%POl'ga(w'ga!Z'ga#^'ga~Og'ga#}'ga~P%+uO!O)|O'w)}Ol'ia(w'ia(x'ia!Z'ia#^'ia~Og'ia#}'ia~P%,hO(p$YO~P#.{O!WfX!W$yX!ZfX!Z$yX!e%QX#^fX~P!/qO(R<xO~P!1dO!Q%gO!Y4XO!]%hO(R%fO!Z'cX!i'cX~O!Z/kO!i(|a~O!Z/kO!e#vO!i(|a~O!Z/kO!e#vO(p'nO!i(|a~Og${i!Z${i#^${i#}${i~P!0uO!Y4aO!W'eX!Z'eX~P!3cO!Z/sO!W(}a~O!Z/sO!W(}a~P#.{OP]XR]X[]Xp]X!O]X!Q]X!W]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!e%XX#t%XX~P%0XO!e#vO#t4fO~Oh%VO!e#vO!j%dO~Oh%VOp4kO!j%dO(p'nO~Op4pO!e#vO(p'nO~Oq!nO!Q4qO(TTO(WUO(c!mO~O(w$}Ol%`i!O%`i'w%`i(x%`i!Z%`i#^%`i~Og%`i#}%`i~P%3xO(x%POl%bi!O%bi'w%bi(w%bi!Z%bi#^%bi~Og%bi#}%bi~P%4kOg(]i!Z(]i~P!0uO#^4wOg(]i!Z(]i~P!0uO!i4zO~Oa$nq!Z$nq'x$nq'u$nq!W$nq!i$nqt$nq!]$nq%h$nq!e$nq~P!:TO!W5QO~O!Z5RO!])OX~P#.{Oa]Xa$yX!]]X!]$yX%]]X'x]X'x$yX!Z]X!Z$yX~P!/qO%]5UOa%Za!]%Za'x%Za!Z%Za~OlmX!OmX'wmX(wmX(xmX~P%7nOn5VO(R#nO~Ob5]O%i5^O(R+nO(TTO(WUO!Z'rX!['rX~O!Z0}O![)Va~O[5bO~O`5cO~Oa%mO'x%mO~P#.{O!Z5kO#^5mO![)SX~O![5nO~Op5tOq!nO!Q*fO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!pO#U!pO#V!pO#Y5sO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O![5rO~P%:ROl5yO!]1gO%h5xO~Oh%VOl5yO!]1gO%h5xO~Ob6QO(R#nO(TTO(WUO!Z'qX!['qX~O!Z1rO![)Ta~O(TTO(WUO(c6SO~O`6WO~O#t6ZO&Y6[O~PMvO!i6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO![6dO&h2XO~P`O!e6fO~O!e6hOh(hi!Z(hi![(hi!e(hi!j(hip(hi(p(hi~O!Z#fi![#fi~P#BPO#^6iO!Z#fi![#fi~O!Z!_i![!_i~P#BPOa%mO#^6rO'x%mO~Oa%mO!e#vO#^6rO'x%mO~O!Z(rq!i(rqa(rq'x(rq~P!:TO!Z(hO!i(qq~O!Q%gO!]%hO#h6yO(R%fO~O!]'^O%h6|O~Ol7QO!]'^O%h6|O~O#i'gaP'gaR'ga['gaa'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga'x'ga(_'ga(p'ga!i'ga!W'ga'u'gat'ga!]'ga%h'ga!e'ga~P%+uO#i'iaP'iaR'ia['iaa'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia'x'ia(_'ia(p'ia!i'ia!W'ia'u'iat'ia!]'ia%h'ia!e'ia~P%,hO#i${iP${iR${i[${ia${ip${i!Q${i!Z${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i'x${i(_${i(p${i!i${i!W${i'u${i#^${it${i!]${i%h${i!e${i~P#.{O#i%`iP%`iR%`i[%`ia%`ip%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i'x%`i(_%`i(p%`i!i%`i!W%`i'u%`it%`i!]%`i%h%`i!e%`i~P%3xO#i%biP%biR%bi[%bia%bip%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi'x%bi(_%bi(p%bi!i%bi!W%bi'u%bit%bi!]%bi%h%bi!e%bi~P%4kO!Z'Wa!i'Wa~P!:TO!Z.oO!i(ii~O#}#ai!Z#ai![#ai~P#BPOP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kip#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#l#ki~P%MQO#l<PO~P%MQOP$[OR#zOp<]O!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO[#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#p#ki~P& YO#p<RO~P& YOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO(_VO#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#u#ki~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO(_VO(x#}O#y#ki#z#ki#}#ki(p#ki(w#ki!Z#ki![#ki~O#w<VO~P&%cO#w#ki~P&%cO#u<TO~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO(_VO(w#|O(x#}O#z#ki#}#ki(p#ki!Z#ki![#ki~O#y#ki~P&'rO#y<XO~P&'rOa#{y!Z#{y'x#{y'u#{y!W#{y!i#{yt#{y!]#{y%h#{y!e#{y~P!:TO[#kip#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki!Z#ki![#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO(w#ki(x#ki~P&*nOl=}O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P&*nO#Q$dOP(^XR(^X[(^Xl(^Xp(^X!O(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X#}(^X'w(^X(_(^X(p(^X(w(^X(x(^X!Z(^X![(^X~O#}$Oi!Z$Oi![$Oi~P#BPO#}!pi![!pi~P$*OOg'Za!Z'Za~P!0uO![7dO~O!Z'ba!['ba~P#BPO!W7eO~P#.{O!e#vO(p'nO!Z'ca!i'ca~O!Z/kO!i(|i~O!Z/kO!e#vO!i(|i~Og${q!Z${q#^${q#}${q~P!0uO!W'ea!Z'ea~P#.{O!e7lO~O!Z/sO!W(}i~P#.{O!Z/sO!W(}i~O!W7oO~Oh%VOp7tO!j%dO(p'nO~O!e#vO#t7vO~Op7yO!e#vO(p'nO~O!O)|O'w)}O(x%POl'ha(w'ha!Z'ha#^'ha~Og'ha#}'ha~P&3oO!O)|O'w)}Ol'ja(w'ja(x'ja!Z'ja#^'ja~Og'ja#}'ja~P&4bO!W7{O~Og$}q!Z$}q#^$}q#}$}q~P!0uOg(]q!Z(]q~P!0uO#^7|Og(]q!Z(]q~P!0uOa$ny!Z$ny'x$ny'u$ny!W$ny!i$nyt$ny!]$ny%h$ny!e$ny~P!:TO!e6hO~O!Z5RO!])Oa~O!]'^OP$SaR$Sa[$Sap$Sa!O$Sa!Q$Sa!Z$Sa!j$Sa!n$Sa#P$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#t$Sa#u$Sa#w$Sa#y$Sa#z$Sa(_$Sa(p$Sa(w$Sa(x$Sa~O%h6|O~P&7SO%]8QOa%Zi!]%Zi'x%Zi!Z%Zi~Oa#ay!Z#ay'x#ay'u#ay!W#ay!i#ayt#ay!]#ay%h#ay!e#ay~P!:TO[8SO~Ob8UO(R+nO(TTO(WUO~O!Z0}O![)Vi~O`8YO~O(c(zO!Z'nX!['nX~O!Z5kO![)Sa~O![8cO~P%:RO(m!sO~P$$oO#Y8dO~O!]1gO~O!]1gO%h8fO~Ol8iO!]1gO%h8fO~O[8nO!Z'qa!['qa~O!Z1rO![)Ti~O!i8rO~O!i8sO~O!i8vO~O!i8vO~P%[Oa8xO~O!e8yO~O!i8zO~O!Z(ui![(ui~P#BPOa%mO#^9SO'x%mO~O!Z(ry!i(rya(ry'x(ry~P!:TO!Z(hO!i(qy~O%h9VO~P&7SO!]'^O%h9VO~O#i${qP${qR${q[${qa${qp${q!Q${q!Z${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q'x${q(_${q(p${q!i${q!W${q'u${q#^${qt${q!]${q%h${q!e${q~P#.{O#i'haP'haR'ha['haa'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha'x'ha(_'ha(p'ha!i'ha!W'ha'u'hat'ha!]'ha%h'ha!e'ha~P&3oO#i'jaP'jaR'ja['jaa'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja'x'ja(_'ja(p'ja!i'ja!W'ja'u'jat'ja!]'ja%h'ja!e'ja~P&4bO#i$}qP$}qR$}q[$}qa$}qp$}q!Q$}q!Z$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q'x$}q(_$}q(p$}q!i$}q!W$}q'u$}q#^$}qt$}q!]$}q%h$}q!e$}q~P#.{O!Z'Wi!i'Wi~P!:TO#}#aq!Z#aq![#aq~P#BPO(w$}OP%`aR%`a[%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a#}%`a(_%`a(p%`a!Z%`a![%`a~Ol%`a!O%`a'w%`a(x%`a~P&HgO(x%POP%baR%ba[%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba#}%ba(_%ba(p%ba!Z%ba![%ba~Ol%ba!O%ba'w%ba(w%ba~P&JnOl=}O!O)|O'w)}O(x%PO~P&HgOl=}O!O)|O'w)}O(w$}O~P&JnOR0cO!O0cO!Q0dO#Q$dOP{a[{al{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a#}{a'w{a(_{a(p{a(w{a(x{a!Z{a![{a~O!O)|O'w)}OP$raR$ra[$ral$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra#}$ra(_$ra(p$ra(w$ra(x$ra!Z$ra![$ra~O!O)|O'w)}OP$taR$ta[$tal$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta#}$ta(_$ta(p$ta(w$ta(x$ta!Z$ta![$ta~Ol=}O!O)|O'w)}O(w$}O(x%PO~OP%SaR%Sa[%Sap%Sa!Q%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa#}%Sa(_%Sa(p%Sa!Z%Sa![%Sa~P'%sO#}$lq!Z$lq![$lq~P#BPO#}$nq!Z$nq![$nq~P#BPO![9dO~O#}9eO~P!0uO!e#vO!Z'ci!i'ci~O!e#vO(p'nO!Z'ci!i'ci~O!Z/kO!i(|q~O!W'ei!Z'ei~P#.{O!Z/sO!W(}q~Op9lO!e#vO(p'nO~O[9nO!W9mO~P#.{O!W9mO~O!e#vO#t9tO~Og(]y!Z(]y~P!0uO!Z'la!]'la~P#.{Oa%Zq!]%Zq'x%Zq!Z%Zq~P#.{O[9yO~O!Z0}O![)Vq~O#^9}O!Z'na!['na~O!Z5kO![)Si~P#BPO!Q:PO~O!]1gO%h:SO~O(TTO(WUO(c:XO~O!Z1rO![)Tq~O!i:[O~O!i:]O~O!i:^O~O!i:^O~P%[O#^:aO!Z#fy![#fy~O!Z#fy![#fy~P#BPO%h:fO~P&7SO!]'^O%h:fO~O#}#{y!Z#{y![#{y~P#BPOP${iR${i[${ip${i!Q${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i#}${i(_${i(p${i!Z${i![${i~P'%sO!O)|O'w)}O(x%POP'gaR'ga['gal'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga#}'ga(_'ga(p'ga(w'ga!Z'ga!['ga~O!O)|O'w)}OP'iaR'ia['ial'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia#}'ia(_'ia(p'ia(w'ia(x'ia!Z'ia!['ia~O(w$}OP%`iR%`i[%`il%`ip%`i!O%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i#}%`i'w%`i(_%`i(p%`i(x%`i!Z%`i![%`i~O(x%POP%biR%bi[%bil%bip%bi!O%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi#}%bi'w%bi(_%bi(p%bi(w%bi!Z%bi![%bi~O#}$ny!Z$ny![$ny~P#BPO#}#ay!Z#ay![#ay~P#BPO!e#vO!Z'cq!i'cq~O!Z/kO!i(|y~O!W'eq!Z'eq~P#.{Op:pO!e#vO(p'nO~O[:tO!W:sO~P#.{O!W:sO~Og(]!R!Z(]!R~P!0uOa%Zy!]%Zy'x%Zy!Z%Zy~P#.{O!Z0}O![)Vy~O!Z5kO![)Sq~O(R:zO~O!]1gO%h:}O~O!i;QO~O%h;VO~P&7SOP${qR${q[${qp${q!Q${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q#}${q(_${q(p${q!Z${q![${q~P'%sO!O)|O'w)}O(x%POP'haR'ha['hal'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha#}'ha(_'ha(p'ha(w'ha!Z'ha!['ha~O!O)|O'w)}OP'jaR'ja['jal'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja#}'ja(_'ja(p'ja(w'ja(x'ja!Z'ja!['ja~OP$}qR$}q[$}qp$}q!Q$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q#}$}q(_$}q(p$}q!Z$}q![$}q~P'%sOg%d!Z!Z%d!Z#^%d!Z#}%d!Z~P!0uO!W;ZO~P#.{Op;[O!e#vO(p'nO~O[;^O!W;ZO~P#.{O!Z'nq!['nq~P#BPO!Z#f!Z![#f!Z~P#BPO#i%d!ZP%d!ZR%d!Z[%d!Za%d!Zp%d!Z!Q%d!Z!Z%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z'x%d!Z(_%d!Z(p%d!Z!i%d!Z!W%d!Z'u%d!Z#^%d!Zt%d!Z!]%d!Z%h%d!Z!e%d!Z~P#.{Op;fO!e#vO(p'nO~O!W;gO~P#.{Op;nO!e#vO(p'nO~O!W;oO~P#.{OP%d!ZR%d!Z[%d!Zp%d!Z!Q%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z#}%d!Z(_%d!Z(p%d!Z!Z%d!Z![%d!Z~P'%sOp;rO!e#vO(p'nO~Ot(dX~P1qO!O%qO~P!(yO(S!lO~P!(yO!WfX!ZfX#^fX~P%0XOP]XR]X[]Xp]X!O]X!Q]X!Z]X!ZfX!j]X!n]X#P]X#Q]X#^]X#^fX#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!efX!i]X!ifX(pfX~P'JlOP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]XO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z<ZO![$pa~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<fO!Q${O!]$|O!g=wO!j$xO#h<lO$V%_O$s<hO$u<jO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Oj)bO~P( bOp!cX(p!cX~P# qOp(hX(p(hX~P#!dO![]X![fX~P'JlO!WfX!W$yX!ZfX!Z$yX#^fX~P!/qO#i<OO~O!e#vO#i<OO~O#^<`O~O#t<SO~O#^<pO!Z(uX![(uX~O#^<`O!Z(sX![(sX~O#i<qO~Og<sO~P!0uO#i<yO~O#i<zO~O!e#vO#i<{O~O!e#vO#i<qO~O#}<|O~P#BPO#i<}O~O#i=OO~O#i=TO~O#i=UO~O#i=VO~O#i=WO~O#}=XO~P!0uO#}=YO~P!0uO#Q#R#S#U#V#Y#g#h#s$m$s$u$x%[%]%g%h%i%p%r%u%v%x%z~'|T#m!V'z(S#nq#l#op!O'{$['{(R$^(c~",goto:"$8f)ZPPPPPP)[PP)_P)pP+Q/VPPPP6aPP6wPP<oP@cP@yP@yPPP@yPCRP@yP@yP@yPCVPC[PCyPHsPPPHwPPPPHwKzPPPLQLrPHwPHwPP! QHwPPPHwPHwP!#XHwP!&o!'t!'}P!(q!(u!(q!,SPPPPPPP!,s!'tPP!-T!.uP!2RHwHw!2W!5d!:Q!:Q!>PPPP!>XHwPPPPPPPPPP!AhP!BuPPHw!DWPHwPHwHwHwHwHwPHw!EjP!HtP!KzP!LO!LY!L^!L^P!HqP!Lb!LbP# hP# lHwPHw# r#$wCV@yP@yP@y@yP#&U@y@y#(h@y#+`@y#-l@y@y#.[#0p#0p#0u#1O#0p#1ZPP#0pP@y#1s@y#5r@y@y6aPPP#9wPPP#:b#:bP#:bP#:x#:bPP#;OP#:uP#:u#;c#:u#;}#<T#<W)_#<Z)_P#<b#<b#<bP)_P)_P)_P)_PP)_P#<h#<kP#<k)_P#<oP#<rP)_P)_P)_P)_P)_P)_)_PP#<x#=O#=Z#=a#=g#=m#=s#>R#>X#>c#>i#>s#>y#?Z#?a#@R#@e#@k#@q#AP#Af#CZ#Ci#Cp#E[#Ej#G[#Gj#Gp#Gv#G|#HW#H^#Hd#Hn#IQ#IWPPPPPPPPPPP#I^PPPPPPP#JR#MY#Nr#Ny$ RPPP$&mP$&v$)o$0Y$0]$0`$1_$1b$1i$1qP$1w$1zP$2h$2l$3d$4r$4w$5_PP$5d$5j$5n$5q$5u$5y$6u$7^$7u$7y$7|$8P$8V$8Y$8^$8bR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0u+fQ1S+rQ1y,fQ3W.bQ5V0wQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:378,context:llt,nodeProps:[["isolate",-8,5,6,14,35,37,49,51,53,""],["group",-26,9,17,19,66,206,210,214,215,217,220,223,233,235,241,243,245,247,250,256,262,264,266,268,270,272,273,"Statement",-34,13,14,30,33,34,40,49,52,53,55,60,68,70,74,78,80,82,83,108,109,118,119,135,138,140,141,142,143,144,146,147,166,168,170,"Expression",-23,29,31,35,39,41,43,172,174,176,177,179,180,181,183,184,185,187,188,189,200,202,204,205,"Type",-3,86,101,107,"ClassItem"],["openedBy",23,"<",36,"InterpolationStart",54,"[",58,"{",71,"(",159,"JSXStartCloseTag"],["closedBy",-2,24,167,">",38,"InterpolationEnd",48,"]",59,"}",72,")",164,"JSXEndTag"]],propSources:[flt],skippedNodes:[0,5,6,276],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Up(X!b'z0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(V#S$h&j'{0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Up(X!b'{0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!n),Q(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(T':f$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(X!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Up(X!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Up(X!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(X!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(X!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(UpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(UpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Up(X!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(m%1l(Up(X!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Up(X!b$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Up(X!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Up(X!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(x+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(W';W$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(UpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!j/.^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!i!Lf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Up(X!b(S%&f#o(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Up(X!b#l(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Up(X!bp+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Z+Jf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Up(X!b!O.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!Y!L^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Up(X!b#m(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(X!b!V7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!V7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!V7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!V7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!V7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(X!b!V7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(X!b!V7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(X!b!V7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(X!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(X!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Up!V7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Up!V7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Up!V7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Up!V7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(UpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(UpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Up(X!b!V7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Up(X!b!V7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Up(X!b!V7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Up(X!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Up(X!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Up(X!b'|0/l!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Up(X!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(X!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(X!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(UpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(UpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Up(X!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!e$b$h&j#})Lv(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#P-<U(Up(X!b$m7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#p(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#q(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#^*!Y$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#i(Cl$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#q(Ch$e#|$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#q(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(p(Ct$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!z$Ip$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!Q0,v$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!W#)l$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Up(X!b(_+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Up(X!b(R,2j$^#t(c$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Up(X!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!]#Hb(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(w+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_![(CdtBr$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!o7`$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Up(X!b'z0/l$[#t(R,2j(c$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Up(X!b'{0/l$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[clt,hlt,dlt,plt,2,3,4,5,6,7,8,9,10,11,12,13,14,ult,new XI("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOv~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!S~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(a~~",141,338),new XI("j~RQYZXz{^~^O(O~~aP!P!Qd~iO(P~~",25,321)],topRules:{Script:[0,7],SingleExpression:[1,274],SingleClassItem:[2,275]},dialects:{jsx:0,ts:15091},dynamicPrecedences:{78:1,80:1,92:1,168:1,198:1},specialized:[{term:325,get:t=>mlt[t]||-1},{term:341,get:t=>ylt[t]||-1},{term:93,get:t=>glt[t]||-1}],tokenPrec:15116}),Cwe=[yo("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),yo("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),yo("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),yo("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),yo("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),yo(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),yo("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),yo(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),yo(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),yo('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),yo('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],blt=Cwe.concat([yo("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),yo("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),yo("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),une=new jve,Mwe=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function OS(t){return(e,i)=>{let r=e.node.getChild("VariableDefinition");return r&&i(r,t),!0}}const wlt=["FunctionDeclaration"],Olt={FunctionDeclaration:OS("function"),ClassDeclaration:OS("class"),ClassExpression:()=>!0,EnumDeclaration:OS("constant"),TypeAliasDeclaration:OS("type"),NamespaceDeclaration:OS("namespace"),VariableDefinition(t,e){t.matchContext(wlt)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function Awe(t,e){let i=une.get(e);if(i)return i;let r=[],n=!0;function s(o,a){let l=t.sliceString(o.from,o.to);r.push({label:l,type:a})}return e.cursor(Ri.IncludeAnonymous).iterate(o=>{if(n)n=!1;else if(o.name){let a=Olt[o.name];if(a&&a(o,s)||Mwe.has(o.name))return!1}else if(o.to-o.from>8192){for(let a of Awe(t,o.node))r.push(a);return!1}}),une.set(e,r),r}const cne=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Iwe=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function Slt(t){let e=$r(t.state).resolveInner(t.pos,-1);if(Iwe.indexOf(e.name)>-1)return null;let i=e.name=="VariableName"||e.to-e.from<20&&cne.test(t.state.sliceDoc(e.from,e.to));if(!i&&!t.explicit)return null;let r=[];for(let n=e;n;n=n.parent)Mwe.has(n.name)&&(r=r.concat(Awe(t.state.doc,n)));return{options:r,from:i?e.from:t.pos,validFor:cne}}const Oc=Xw.define({name:"javascript",parser:vlt.configure({props:[qR.add({IfStatement:DM({except:/^\s*({|else\b)/}),TryStatement:DM({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:Iit,SwitchBody:t=>{let e=t.textAfter,i=/^\s*\}/.test(e),r=/^\s*(case|default)\b/.test(e);return t.baseIndent+(i?0:r?1:2)*t.unit},Block:Ait({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":DM({except:/^{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag"(t){return t.column(t.node.from)+t.unit}}),GR.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":Hve,BlockComment(t){return{from:t.from+2,to:t.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Pwe={test:t=>/^JSX/.test(t.name),facet:Bve({commentTokens:{block:{open:"{/*",close:"*/}"}}})},Rwe=Oc.configure({dialect:"ts"},"typescript"),Lwe=Oc.configure({dialect:"jsx",props:[E7.add(t=>t.isTop?[Pwe]:void 0)]}),Nwe=Oc.configure({dialect:"jsx ts",props:[E7.add(t=>t.isTop?[Pwe]:void 0)]},"typescript");let Dwe=t=>({label:t,type:"keyword"});const Vwe="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(Dwe),_lt=Vwe.concat(["declare","implements","private","protected","public"].map(Dwe));function Q$(t={}){let e=t.jsx?t.typescript?Nwe:Lwe:t.typescript?Rwe:Oc,i=t.typescript?blt.concat(_lt):Cwe.concat(Vwe);return new k7(e,[Oc.data.of({autocomplete:Xnt(Iwe,Xbe(i))}),Oc.data.of({autocomplete:Slt}),t.jsx?Tlt:[]])}function xlt(t){for(;;){if(t.name=="JSXOpenTag"||t.name=="JSXSelfClosingTag"||t.name=="JSXFragmentTag")return t;if(t.name=="JSXEscape"||!t.parent)return null;t=t.parent}}function hne(t,e,i=t.length){for(let r=e==null?void 0:e.firstChild;r;r=r.nextSibling)if(r.name=="JSXIdentifier"||r.name=="JSXBuiltin"||r.name=="JSXNamespacedName"||r.name=="JSXMemberExpression")return t.sliceString(r.from,Math.min(r.to,i));return""}const $lt=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Tlt=Pe.inputHandler.of((t,e,i,r,n)=>{if(($lt?t.composing:t.compositionStarted)||t.state.readOnly||e!=i||r!=">"&&r!="/"||!Oc.isActiveAt(t.state,e,-1))return!1;let s=n(),{state:o}=s,a=o.changeByRange(l=>{var u;let{head:p}=l,m=$r(o).resolveInner(p-1,-1),g;if(m.name=="JSXStartTag"&&(m=m.parent),!(o.doc.sliceString(p-1,p)!=r||m.name=="JSXAttributeValue"&&m.to>p)){if(r==">"&&m.name=="JSXFragmentTag")return{range:l,changes:{from:p,insert:"</>"}};if(r=="/"&&m.name=="JSXStartCloseTag"){let w=m.parent,O=w.parent;if(O&&w.from==p-2&&((g=hne(o.doc,O.firstChild,p))||((u=O.firstChild)===null||u===void 0?void 0:u.name)=="JSXFragmentTag")){let _=`${g}>`;return{range:me.cursor(p+_.length,-1),changes:{from:p,insert:_}}}}else if(r==">"){let w=xlt(m);if(w&&w.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(o.doc.sliceString(p,p+2))&&(g=hne(o.doc,w,p)))return{range:l,changes:{from:p,insert:`</${g}>`}}}}return{range:l}});return a.changes.empty?!1:(t.dispatch([s,o.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),SS=["_blank","_self","_top","_parent"],XD=["ascii","utf-8","utf-16","latin1","latin1"],YD=["get","post","put","delete"],JD=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Qo=["true","false"],et={},Elt={a:{attrs:{href:null,ping:null,type:null,media:null,target:SS,hreflang:null}},abbr:et,address:et,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:et,aside:et,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:et,base:{attrs:{href:null,target:SS}},bdi:et,bdo:et,blockquote:{attrs:{cite:null}},body:et,br:et,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:JD,formmethod:YD,formnovalidate:["novalidate"],formtarget:SS,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:et,center:et,cite:et,code:et,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:et,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:et,div:et,dl:et,dt:et,em:et,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:et,figure:et,footer:et,form:{attrs:{action:null,name:null,"accept-charset":XD,autocomplete:["on","off"],enctype:JD,method:YD,novalidate:["novalidate"],target:SS}},h1:et,h2:et,h3:et,h4:et,h5:et,h6:et,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:et,hgroup:et,hr:et,html:{attrs:{manifest:null}},i:et,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:JD,formmethod:YD,formnovalidate:["novalidate"],formtarget:SS,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:et,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:et,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:et,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:XD,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:et,noscript:et,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:et,param:{attrs:{name:null,value:null}},pre:et,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:et,rt:et,ruby:et,samp:et,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:XD}},section:et,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:et,source:{attrs:{src:null,type:null,media:null}},span:et,strong:et,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:et,summary:et,sup:et,table:et,tbody:et,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:et,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:et,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:et,time:{attrs:{datetime:null}},title:et,tr:et,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:et,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:et},Fwe={accesskey:null,class:null,contenteditable:Qo,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Qo,autocorrect:Qo,autocapitalize:Qo,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Qo,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Qo,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Qo,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Qo,"aria-hidden":Qo,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Qo,"aria-multiselectable":Qo,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Qo,"aria-relevant":null,"aria-required":Qo,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},jwe="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(t=>"on"+t);for(let t of jwe)Fwe[t]=null;class eP{constructor(e,i){this.tags=Object.assign(Object.assign({},Elt),e),this.globalAttrs=Object.assign(Object.assign({},Fwe),i),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}eP.default=new eP;function tO(t,e,i=t.length){if(!e)return"";let r=e.firstChild,n=r&&r.getChild("TagName");return n?t.sliceString(n.from,Math.min(n.to,i)):""}function iO(t,e=!1){for(;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function zwe(t,e,i){let r=i.tags[tO(t,iO(e))];return(r==null?void 0:r.children)||i.allTags}function W7(t,e){let i=[];for(let r=iO(e);r&&!r.type.isTop;r=iO(r.parent)){let n=tO(t,r);if(n&&r.lastChild.name=="CloseTag")break;n&&i.indexOf(n)<0&&(e.name=="EndTag"||e.from>=r.firstChild.to)&&i.push(n)}return i}const Uwe=/^[:\-\.\w\u00b7-\uffff]*$/;function dne(t,e,i,r,n){let s=/\s*>/.test(t.sliceDoc(n,n+5))?"":">",o=iO(i,!0);return{from:r,to:n,options:zwe(t.doc,o,e).map(a=>({label:a,type:"type"})).concat(W7(t.doc,i).map((a,l)=>({label:"/"+a,apply:"/"+a+s,type:"type",boost:99-l}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function pne(t,e,i,r){let n=/\s*>/.test(t.sliceDoc(r,r+5))?"":">";return{from:i,to:r,options:W7(t.doc,e).map((s,o)=>({label:s,apply:s+n,type:"type",boost:99-o})),validFor:Uwe}}function klt(t,e,i,r){let n=[],s=0;for(let o of zwe(t.doc,i,e))n.push({label:"<"+o,type:"type"});for(let o of W7(t.doc,i))n.push({label:"</"+o+">",type:"type",boost:99-s++});return{from:r,to:r,options:n,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function Clt(t,e,i,r,n){let s=iO(i),o=s?e.tags[tO(t.doc,s)]:null,a=o&&o.attrs?Object.keys(o.attrs):[],l=o&&o.globalAttrs===!1?a:a.length?a.concat(e.globalAttrNames):e.globalAttrNames;return{from:r,to:n,options:l.map(u=>({label:u,type:"property"})),validFor:Uwe}}function Mlt(t,e,i,r,n){var s;let o=(s=i.parent)===null||s===void 0?void 0:s.getChild("AttributeName"),a=[],l;if(o){let u=t.sliceDoc(o.from,o.to),p=e.globalAttrs[u];if(!p){let m=iO(i),g=m?e.tags[tO(t.doc,m)]:null;p=(g==null?void 0:g.attrs)&&g.attrs[u]}if(p){let m=t.sliceDoc(r,n).toLowerCase(),g='"',w='"';/^['"]/.test(m)?(l=m[0]=='"'?/^[^"]*$/:/^[^']*$/,g="",w=t.sliceDoc(n,n+1)==m[0]?"":m[0],m=m.slice(1),r++):l=/^[^\s<>='"]*$/;for(let O of p)a.push({label:O,apply:g+O+w,type:"constant"})}}return{from:r,to:n,options:a,validFor:l}}function Alt(t,e){let{state:i,pos:r}=e,n=$r(i).resolveInner(r,-1),s=n.resolve(r);for(let o=r,a;s==n&&(a=n.childBefore(o));){let l=a.lastChild;if(!l||!l.type.isError||l.from<l.to)break;s=n=a,o=l.from}return n.name=="TagName"?n.parent&&/CloseTag$/.test(n.parent.name)?pne(i,n,n.from,r):dne(i,t,n,n.from,r):n.name=="StartTag"?dne(i,t,n,r,r):n.name=="StartCloseTag"||n.name=="IncompleteCloseTag"?pne(i,n,r,r):n.name=="OpenTag"||n.name=="SelfClosingTag"||n.name=="AttributeName"?Clt(i,t,n,n.name=="AttributeName"?n.from:r,r):n.name=="Is"||n.name=="AttributeValue"||n.name=="UnquotedAttributeValue"?Mlt(i,t,n,n.name=="Is"?r:n.from,r):e.explicit&&(s.name=="Element"||s.name=="Text"||s.name=="Document")?klt(i,t,n,r):null}function Ilt(t){let{extraTags:e,extraGlobalAttributes:i}=t,r=i||e?new eP(e,i):eP.default;return n=>Alt(r,n)}const Plt=Oc.parser.configure({top:"SingleExpression"}),Qwe=[{tag:"script",attrs:t=>t.type=="text/typescript"||t.lang=="ts",parser:Rwe.parser},{tag:"script",attrs:t=>t.type=="text/babel"||t.type=="text/jsx",parser:Lwe.parser},{tag:"script",attrs:t=>t.type=="text/typescript-jsx",parser:Nwe.parser},{tag:"script",attrs(t){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(t.type)},parser:Plt},{tag:"script",attrs(t){return!t.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(t.type)},parser:Oc.parser},{tag:"style",attrs(t){return(!t.lang||t.lang=="css")&&(!t.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(t.type))},parser:KI.parser}],Bwe=[{name:"style",parser:KI.parser.configure({top:"Styles"})}].concat(jwe.map(t=>({name:t,parser:Oc.parser}))),qwe=Xw.define({name:"html",parser:dat.configure({props:[qR.add({Element(t){let e=/^(\s*)(<\/)?/.exec(t.textAfter);return t.node.to<=t.pos+e[0].length?t.continue():t.lineIndent(t.node.from)+(e[2]?0:t.unit)},"OpenTag CloseTag SelfClosingTag"(t){return t.column(t.node.from)+t.unit},Document(t){if(t.pos+/\s*/.exec(t.textAfter)[0].length<t.node.to)return t.continue();let e=null,i;for(let r=t.node;;){let n=r.lastChild;if(!n||n.name!="Element"||n.to!=r.to)break;e=r=n}return e&&!((i=e.lastChild)&&(i.name=="CloseTag"||i.name=="SelfClosingTag"))?t.lineIndent(e.from)+t.unit:null}}),GR.add({Element(t){let e=t.firstChild,i=t.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:i.name=="CloseTag"?i.from:t.to}}}),obe.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),zM=qwe.configure({wrap:_we(Qwe,Bwe)});function Gwe(t={}){let e="",i;t.matchClosingTags===!1&&(e="noMatch"),t.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(t.nestedLanguages&&t.nestedLanguages.length||t.nestedAttributes&&t.nestedAttributes.length)&&(i=_we((t.nestedLanguages||[]).concat(Qwe),(t.nestedAttributes||[]).concat(Bwe)));let r=i?qwe.configure({wrap:i,dialect:e}):e?zM.configure({dialect:e}):zM;return new k7(r,[zM.data.of({autocomplete:Ilt(t)}),t.autoCloseTags!==!1?Rlt:[],Q$().support,zat().support])}const fne=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),Rlt=Pe.inputHandler.of((t,e,i,r,n)=>{if(t.composing||t.state.readOnly||e!=i||r!=">"&&r!="/"||!zM.isActiveAt(t.state,e,-1))return!1;let s=n(),{state:o}=s,a=o.changeByRange(l=>{var u,p,m;let g=o.doc.sliceString(l.from-1,l.to)==r,{head:w}=l,O=$r(o).resolveInner(w,-1),_;if(g&&r==">"&&O.name=="EndTag"){let x=O.parent;if(((p=(u=x.parent)===null||u===void 0?void 0:u.lastChild)===null||p===void 0?void 0:p.name)!="CloseTag"&&(_=tO(o.doc,x.parent,w))&&!fne.has(_)){let T=w+(o.doc.sliceString(w,w+1)===">"?1:0),E=`</${_}>`;return{range:l,changes:{from:w,to:T,insert:E}}}}else if(g&&r=="/"&&O.name=="IncompleteCloseTag"){let x=O.parent;if(O.from==w-2&&((m=x.lastChild)===null||m===void 0?void 0:m.name)!="CloseTag"&&(_=tO(o.doc,x,w))&&!fne.has(_)){let T=w+(o.doc.sliceString(w,w+1)===">"?1:0),E=`${_}>`;return{range:me.cursor(w+E.length,-1),changes:{from:w,to:T,insert:E}}}}return{range:l}});return a.changes.empty?!1:(t.dispatch([s,o.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});var Zwe=t=>{var{theme:e,settings:i={},styles:r=[]}=t,n={".cm-gutters":{}},s={};i.background&&(s.backgroundColor=i.background),i.backgroundImage&&(s.backgroundImage=i.backgroundImage),i.foreground&&(s.color=i.foreground),i.fontSize&&(s.fontSize=i.fontSize),(i.background||i.foreground)&&(n["&"]=s),i.fontFamily&&(n["&.cm-editor .cm-scroller"]={fontFamily:i.fontFamily}),i.gutterBackground&&(n[".cm-gutters"].backgroundColor=i.gutterBackground),i.gutterForeground&&(n[".cm-gutters"].color=i.gutterForeground),i.gutterBorder&&(n[".cm-gutters"].borderRightColor=i.gutterBorder),i.caret&&(n[".cm-content"]={caretColor:i.caret},n[".cm-cursor, .cm-dropCursor"]={borderLeftColor:i.caret});var o={};i.gutterActiveForeground&&(o.color=i.gutterActiveForeground),i.lineHighlight&&(n[".cm-activeLine"]={backgroundColor:i.lineHighlight},o.backgroundColor=i.lineHighlight),n[".cm-activeLineGutter"]=o,i.selection&&(n["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:i.selection+" !important"}),i.selectionMatch&&(n["& .cm-selectionMatch"]={backgroundColor:i.selectionMatch});var a=Pe.theme(n,{dark:e==="dark"}),l=zO.define(r),u=[a,A7(l)];return u},Llt={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Nlt=[{tag:[N.keyword,N.operatorKeyword,N.modifier,N.color,N.constant(N.name),N.standard(N.name),N.standard(N.tagName),N.special(N.brace),N.atom,N.bool,N.special(N.variableName)],color:"#0000ff"},{tag:[N.moduleKeyword,N.controlKeyword],color:"#af00db"},{tag:[N.name,N.deleted,N.character,N.macroName,N.propertyName,N.variableName,N.labelName,N.definition(N.name)],color:"#0070c1"},{tag:N.heading,fontWeight:"bold",color:"#0070c1"},{tag:[N.typeName,N.className,N.tagName,N.number,N.changed,N.annotation,N.self,N.namespace],color:"#267f99"},{tag:[N.function(N.variableName),N.function(N.propertyName)],color:"#795e26"},{tag:[N.number],color:"#098658"},{tag:[N.operator,N.punctuation,N.separator,N.url,N.escape,N.regexp],color:"#383a42"},{tag:[N.regexp],color:"#af00db"},{tag:[N.special(N.string),N.processingInstruction,N.string,N.inserted],color:"#a31515"},{tag:[N.angleBracket],color:"#383a42"},{tag:N.strong,fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:[N.meta,N.comment],color:"#008000"},{tag:N.link,color:"#4078f2",textDecoration:"underline"},{tag:N.invalid,color:"#e45649"}];function Dlt(t){var{theme:e="light",settings:i={},styles:r=[]}={};return Zwe({theme:e,settings:x$({},Llt,i),styles:[...Nlt,...r]})}var rO=Dlt(),Vlt={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Flt=[{tag:[N.keyword,N.operatorKeyword,N.modifier,N.color,N.constant(N.name),N.standard(N.name),N.standard(N.tagName),N.special(N.brace),N.atom,N.bool,N.special(N.variableName)],color:"#569cd6"},{tag:[N.controlKeyword,N.moduleKeyword],color:"#c586c0"},{tag:[N.name,N.deleted,N.character,N.macroName,N.propertyName,N.variableName,N.labelName,N.definition(N.name)],color:"#9cdcfe"},{tag:N.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[N.typeName,N.className,N.tagName,N.number,N.changed,N.annotation,N.self,N.namespace],color:"#4ec9b0"},{tag:[N.function(N.variableName),N.function(N.propertyName)],color:"#dcdcaa"},{tag:[N.number],color:"#b5cea8"},{tag:[N.operator,N.punctuation,N.separator,N.url,N.escape,N.regexp],color:"#d4d4d4"},{tag:[N.regexp],color:"#d16969"},{tag:[N.special(N.string),N.processingInstruction,N.string,N.inserted],color:"#ce9178"},{tag:[N.angleBracket],color:"#808080"},{tag:N.strong,fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:[N.meta,N.comment],color:"#6a9955"},{tag:N.link,color:"#6a9955",textDecoration:"underline"},{tag:N.invalid,color:"#ff0000"}];function jlt(t){var{theme:e="dark",settings:i={},styles:r=[]}={};return Zwe({theme:e,settings:x$({},Vlt,i),styles:[...Flt,...r]})}jlt();function zlt(){const t=le.useRef(null),e=r=>{t.current&&r.target.view.ready&&(t.current.showPrintAreaEnabled=!0)};return Be.jsxs("arcgis-map",{"item-id":"91af6caa495d440187ec3937e43a818e",onarcgisViewReadyChange:e,children:[Be.jsx("arcgis-placement",{position:"top-left",children:Be.jsx(n0,{extensions:[em(),Gwe()],editable:!1,value:`
<arcgis-print ref={printRef} position="top-right"></arcgis-print>   
`,theme:rO})}),Be.jsx("arcgis-print",{ref:t,position:"top-right"})]})}const Qa="esri-layer-list",yh=`${Qa}__item`,_S={base:Qa,actionMenu:`${Qa}__action-menu`,actionGroup:`${Qa}__action-group`,filterNoResults:`${Qa}__filter-no-results`,item:yh,itemActive:`${yh}--active`,itemContentBottom:`${yh}-content-bottom`,itemMessage:`${yh}-message`,itemActionIcon:`${yh}-action-icon`,itemActionImage:`${yh}-action-image`,itemTemporaryIcon:`${yh}-temporary-icon`,itemTableIcon:`${yh}-table-icon`,itemCatalogIcon:`${yh}-catalog-icon`,statusIndicator:`${Qa}__status-indicator`,publishing:`${Qa}__publishing`,updating:`${Qa}__updating`,connectionStatus:`${Qa}__connection-status`,connectionStatusConnected:`${Qa}__connection-status--connected`,visibleToggle:`${Qa}__visible-toggle`,visibleIcon:`${Qa}__visible-icon`};function mne(t){return t.icon?t.icon:"image"in t&&t.image||t.className?void 0:"question"}function Ult(t){return t?{backgroundImage:`url(${t})`}:{}}function i$t({action:t,feature:e}){const i=e==null?void 0:e.attributes,r="image"in t?t.image:void 0;return r&&i?o$(r,i):r??""}const Hwe={hide:"hide",hideChildren:"hide-children"},Qlt=10,Blt=2;function qlt({exclusive:t,visible:e,visibilityAppearance:i}){const r=i==="checkbox";return e?t?"circle-f":r?"check-square-f":"view-visible":t?"circle":r?"square":"view-hide"}function Glt({connectionStatus:t,publishing:e}){return t?t==="connected"?"beacon":"offline":e?"square":"bullet-point"}function Zlt(t){return(t==null?void 0:t.listMode)===Hwe.hideChildren}function tP(t){return(t==null?void 0:t.listMode)??void 0}function Hlt(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function Wlt(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function Xlt(t){if(!t)return"inherited";const e=rut(X7(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function Ylt(t){t==null||t.removeMany(t.filter(e=>e==null?void 0:e.destroyed))}function Wwe(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function Jlt(t,e){t&&(t.filterPredicate=e?i=>e(ru(i)):void 0)}function Klt(t){const e=(t!=null&&t.layer&&X7(t.layer)?t.layer.layer:void 0)??(t==null?void 0:t.layer);return!!e&&e.type!=="catalog"&&(nut(e)??!0)}function eut(t){return tP(t)!==Hwe.hide}function tut(t,e){if(!t||e==null||isNaN(e))return!1;const i=Hlt(t),r=Wlt(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,s=r!=null&&!isNaN(r)&&r>0&&e<r;return n||s}function Xwe(t,e){t==null||t.sort((i,r)=>{const n="uid"in i?e.indexOf(i.uid):-1,s="uid"in r?e.indexOf(r.uid):-1;return n>s?-1:n<s?1:0})}function iut(t,e){const i=t==null?void 0:t.layer;if(!i)return;const r=Wwe(i);if(!r)return;let n;r==="layers"&&"layers"in i?n=i.layers:r==="sublayers"&&"sublayers"in i&&(n=i.sublayers),Xwe(n,e)}function yne(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function X7(t){return t!=null&&"layer"in t&&t.layer!=null}function rut(t){const e=Ywe(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function nut(t){const e=Ywe(t);return e!=null&&"supportsDynamicLayers"in e?e.supportsDynamicLayers:void 0}function Ywe(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}function ru(t){return t==null?void 0:t["data-item"]}function gne(t){return t==null?void 0:t.getAttribute("data-layer-type")}function sut(t){const{children:e,error:i}=t,r="incompatible"in t&&t.incompatible;return!!(e!=null&&e.filter(n=>!n.hidden).length)&&!i&&!r}function out(t){for(const e of t)for(const i of e)if(i.type==="button"||i.type==="toggle")return i}var fU;let gt=fU=class extends Tr{constructor(t){super(t),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=e=>{this.item.actionsOpen=e.currentTarget.open},this._setTooltipReference=e=>{var i,r;(r=this.onTooltipReferenceChange)==null||r.call(this,(i=this.item.layer)==null?void 0:i.uid,e)},this._removeTooltipReference=()=>{var e,i;(i=this.onTooltipReferenceChange)==null||i.call(this,(e=this.item.layer)==null?void 0:e.uid,null)}}loadDependencies(){return um({"action-group":()=>J(()=>import("./index-TKnEqfGu.js").then(t=>t.i),__vite__mapDeps([259,243,235,236,237,244,245,246,247])),"action-menu":()=>J(()=>import("./index-BkW_GZi6.js").then(t=>t.i),__vite__mapDeps([246,243,235,236,237,244,245,247])),action:()=>J(()=>Promise.resolve().then(()=>lQ),void 0),icon:()=>J(()=>Promise.resolve().then(()=>gP),void 0),"list-item":()=>J(()=>import("./index-BQkGlfCK.js"),__vite__mapDeps([257,234,235,236,237,238,239,240,241,242,256,258])),list:()=>J(()=>import("./index-DnDa7YSf.js"),__vite__mapDeps([255,233,250,236,256])),notice:()=>J(()=>import("./index-Dv9oNo5c.js"),__vite__mapDeps([260,237]))})}render(){var w,O;const t=this.parentTitles??[],{_title:e,item:i,activeItem:r,selectionMode:n,selectedItems:s,messages:o,parent:a,css:l}=this,u="visibleAtCurrentTimeExtent"in i&&"layerInvisibleAtTime"in o&&!i.visibleAtCurrentTimeExtent?`${e} (${o.layerInvisibleAtTime})`:"visibleAtCurrentScale"in i&&"layerInvisibleAtScale"in o&&!i.visibleAtCurrentScale?`${e} (${o.layerInvisibleAtScale})`:e,p="parent"in i&&((O=(w=i.parent)==null?void 0:w.layer)==null?void 0:O.type)==="catalog",{layer:m}=i,g="visibleAtCurrentScale"in i&&!i.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in i&&!i.visibleAtCurrentTimeExtent;return P("calcite-list-item",{afterCreate:_=>this._focusSelectedDragEl(_,i),afterUpdate:_=>this._focusSelectedDragEl(_,i),class:this.classes(l.item,"itemActive"in l&&{[l.itemActive]:r===i}),"data-item":i,"data-layer-id":m==null?void 0:m.id,dragDisabled:!i.sortable||p,id:m==null?void 0:m.uid,key:`list-item-${m==null?void 0:m.uid}`,label:e,metadata:{parentTitles:t,_title:e},open:"open"in i&&i.open,selected:n!=="none"&&s.includes(i),title:u,unavailable:g,value:m==null?void 0:m.uid,onCalciteListItemSelect:_=>"visible"in i&&this._handleCalciteListItemSelect(_,i,a),onCalciteListItemToggle:_=>"open"in i&&this._handleCalciteListItemToggle(_,i)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:t}=this;return this.item.title||("untitledTable"in t?t.untitledTable:t.untitledLayer)}get _renderedItemStatus(){const{item:t,parent:e,visibleElements:i,css:r}=this;if(!i.statusIndicators)return null;const{publishing:n}=t,s="updating"in t&&t.updating&&!e,o="connectionStatus"in t?t.connectionStatus:void 0,a=!!o;return P("calcite-icon",{class:this.classes(r.statusIndicator,{[r.publishing]:n},"updating"in r&&{[r.updating]:s},"connectionStatus"in r&&{[r.connectionStatus]:a},"connectionStatusConnected"in r&&{[r.connectionStatusConnected]:a&&o==="connected"}),icon:Glt({connectionStatus:o,publishing:n}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:t,visibleElements:e,css:i}=this,{layer:r}=t,n="temporaryLayerIndicators"in e&&e.temporaryLayerIndicators,s="temporaryTableIndicators"in e&&e.temporaryTableIndicators,o=r&&"persistenceEnabled"in r&&(R8(r)||!r.persistenceEnabled);return(n||s)&&o?P("calcite-icon",{class:i.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{item:t,parent:e,messages:i,visibilityAppearance:r,css:n}=this;if(!("visible"in t&&"layerVisibility"in i&&"visibleToggle"in n&&r))return null;const{visible:s}=t,o=this._getParentVisibilityMode(e);if(o==="inherited")return null;const a=qlt({visible:s,exclusive:o==="exclusive",visibilityAppearance:r}),l=r==="checkbox",u=i.layerVisibility;return P("calcite-action",{appearance:"transparent",class:n.visibleToggle,icon:l?a:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(t,e),scale:"s",slot:l?"actions-start":"actions-end",text:u,title:u},l?null:P("calcite-icon",{class:this.classes({[n.visibleIcon]:o!=="exclusive"&&s}),icon:a,scale:"s"}))}get _renderedPanel(){const{panel:t}=this.item;return!(t!=null&&t.open)||t.disabled||t.flowEnabled?null:P("div",{class:this.css.itemContentBottom,key:`content-panel-${t.uid}`,slot:"content-bottom"},t.render())}get _renderedPanelAction(){const{panel:t}=this.item;if(!(t!=null&&t.visible))return null;const{open:e,title:i,disabled:r}=t;return P("calcite-action",{active:e,appearance:"transparent",disabled:r,icon:mne(t),key:`action-${t.uid}`,onclick:()=>this._togglePanel(t),scale:"s",slot:"actions-end",text:i??"",title:i??void 0},this._renderFallbackIcon(t))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:t,messagesCommon:e}=this,i=e.options;return P("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:e.menu,open:t.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},P("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:i,title:i}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(t=>P("calcite-action-group",{key:`action-section-${t.uid}`},t.toArray().map(e=>this._renderAction({action:e,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){const{css:t}=this,e=this.item.layer,i=(e==null?void 0:e.type)==="catalog-footprint",r=(e==null?void 0:e.type)==="sublayer"&&HX(e,"footprints");return"itemCatalogIcon"in t&&(i||r)?P("calcite-icon",{class:t.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:t}=this,e=this.item.layer,i=(e==null?void 0:e.type)==="catalog-dynamic-group",r=(e==null?void 0:e.type)==="sublayer"&&HX(e,"layers-in-view");return"itemCatalogIcon"in t&&(i||r)?P("calcite-icon",{class:t.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:t,item:e,visibleElements:i}=this;if(!("visible"in e))return;const{layer:r}=e,n=(r==null?void 0:r.type)==="catalog-dynamic-group";return"catalogLayerList"in i&&i.catalogLayerList&&n?P("calcite-action",{appearance:"transparent",disabled:!r.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(e),scale:"s",slot:"actions-end",text:t}):null}get _renderedChildList(){const{dragEnabled:t,item:e,rootGroupUid:i,listModeDisabled:r,selectionMode:n,displayMode:s}=this;if(!("children"in e))return;const o=[...this.parentTitles??[],e.title],{children:a,layer:l}=e,u=(l==null?void 0:l.type)!=="catalog-dynamic-group"&&sut(e),p=!r&&Zlt(l),m=(l==null?void 0:l.type)==="group",g=!p&&!u&&t&&m,w=!!t&&"childrenSortable"in e&&e.childrenSortable&&Klt(e);return u||g?P("calcite-list",{canPull:O=>!!this.canMove&&this.canMove(O,"pull"),canPut:O=>!!this.canMove&&this.canMove(O,"put"),"data-item":e,"data-layer-type":i,displayMode:s,dragEnabled:w,group:m?i:`${i}-${l==null?void 0:l.uid}`,key:`child-list-${l==null?void 0:l.uid}`,label:e.title,selectionAppearance:"border",selectionMode:n},a==null?void 0:a.filter(O=>!O.hidden&&(this.visibleElements.errors||!O.error)).toArray().map(O=>this._renderItem(O,e,o)),this._renderedTablesItem):null}get _hasTables(){var i,r;const{layerTablesEnabled:t}=this,e=this.item.layer;if(!t||!e)return!1;switch(e.type){case"knowledge-graph":return t.includes(e.type)&&"tables"in e&&!!((i=e.tables)!=null&&i.length);case"map-image":case"tile":return t.includes(e.type)&&"subtables"in e&&!!((r=e.subtables)!=null&&r.length);default:return!1}}get _renderedTablesItem(){const{item:t,messages:e,css:i}=this,{layer:r}=t;return"itemTableIcon"in i&&"visible"in t&&"tables"in e&&this._hasTables?P("calcite-list-item",{class:i.item,"data-layer-id":r==null?void 0:r.id,dragDisabled:!0,key:`list-item-table-list-tables-${r==null?void 0:r.uid}`,label:e.tables,title:e.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(t)},P("calcite-icon",{class:i.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),P("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:t,messages:e,css:i}=this;return t.error?P("div",{class:i.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},P("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},P("div",{slot:"message"},"tableError"in e?e.tableError:e.layerError))):"incompatible"in t&&t.incompatible&&"layerIncompatible"in e?P("div",{class:i.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},P("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},P("div",{slot:"message"},e.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:out(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(t=>t.filter(e=>e.visible))}get _actionsCount(){return this.item.actionsSections.reduce((t,e)=>t+e.length,0)}_renderAction(t){const{item:e}=this,{action:i,textEnabled:r}=t;if(!i)return null;const{active:n,disabled:s,title:o,type:a,indicator:l}=i;return P("calcite-action",{active:a==="toggle"&&i.value,appearance:"transparent","data-action-id":i.id,disabled:s,icon:mne(i),indicator:l,key:`action-${i.uid}`,loading:n,onclick:()=>this._triggerAction(e,i),scale:"s",slot:r?void 0:"actions-end",text:o??"",textEnabled:r,title:o??void 0},this._renderFallbackIcon(i))}_renderFallbackIcon(t){const{css:e}=this,{className:i,icon:r}=t;if(r)return null;const n="image"in t?t.image:void 0,s={[e.itemActionIcon]:!!i,[e.itemActionImage]:!!n};return i&&(s[i]=!0),n||i?P("span",{"aria-hidden":"true",class:this.classes(e.itemActionIcon,s),key:"icon",styles:Ult(n)}):null}_renderItem(t,e,i=[]){var r;return P(fU,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:t,key:`layerListItem-${(r=t.layer)==null?void 0:r.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:e,parentTitles:i,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(t,e){e&&t&&(e.type==="toggle"&&(e.value=!e.value),this.onAction(e,t))}_triggerOnTablesOpen(t){t&&this.onTablesOpen&&this.onTablesOpen(t)}_triggerOnCatalogOpen(t){var e;t&&((e=this.onCatalogOpen)==null||e.call(this,t))}_focusSelectedDragEl(t,e){var i,r;this.selectedDragItemLayerUid===((i=e.layer)==null?void 0:i.uid)&&(dx(t),(r=this.onSelectedDragItemLayerUidChange)==null||r.call(this,null))}_handleCalciteListItemToggle(t,e){t.stopPropagation(),e.open=t.target.open}_getParentVisibilityMode(t){return t&&"visibilityMode"in t?t.visibilityMode:null}_handleCalciteListItemSelect(t,e,i){if(ru(t.target)!==e)return;const r=this._getParentVisibilityMode(i);this.selectionMode==="none"&&r!=="inherited"&&this._toggleVisibility(e,i)}_togglePanel(t){t.open=!t.open,t.open&&this.onPanelOpen()}_toggleVisibility(t,e){!t||!("visible"in t)||this._getParentVisibilityMode(e)==="exclusive"&&t.visible||(t.visible=!t.visible)}};gt.vnodeSelector="calcite-list-item",h([f()],gt.prototype,"activeItem",void 0),h([f()],gt.prototype,"canMove",void 0),h([f()],gt.prototype,"css",void 0),h([f()],gt.prototype,"displayMode",void 0),h([f()],gt.prototype,"dragEnabled",void 0),h([f()],gt.prototype,"item",void 0),h([f()],gt.prototype,"layerTablesEnabled",void 0),h([f()],gt.prototype,"listModeDisabled",void 0),h([f()],gt.prototype,"messages",void 0),h([f()],gt.prototype,"messagesCommon",void 0),h([f()],gt.prototype,"onAction",void 0),h([f()],gt.prototype,"onPanelOpen",void 0),h([f()],gt.prototype,"onCatalogOpen",void 0),h([f()],gt.prototype,"onTablesOpen",void 0),h([f()],gt.prototype,"onSelectedDragItemLayerUidChange",void 0),h([f()],gt.prototype,"onTooltipReferenceChange",void 0),h([f()],gt.prototype,"parent",void 0),h([f()],gt.prototype,"parentTitles",void 0),h([f()],gt.prototype,"rootGroupUid",void 0),h([f()],gt.prototype,"selectionMode",void 0),h([f()],gt.prototype,"selectedItems",void 0),h([f()],gt.prototype,"selectedDragItemLayerUid",void 0),h([f()],gt.prototype,"visibleElements",void 0),h([f()],gt.prototype,"visibilityAppearance",void 0),h([f()],gt.prototype,"_title",null),h([f()],gt.prototype,"_renderedItemStatus",null),h([f()],gt.prototype,"_renderedItemTemporaryIcon",null),h([f()],gt.prototype,"_renderedItemToggle",null),h([f()],gt.prototype,"_renderedPanel",null),h([f()],gt.prototype,"_renderedPanelAction",null),h([f()],gt.prototype,"_renderedActions",null),h([f()],gt.prototype,"_renderedActionMenu",null),h([f()],gt.prototype,"_renderedActionMenuContent",null),h([f()],gt.prototype,"_renderedCatalogFootprintIcon",null),h([f()],gt.prototype,"_renderedCatalogDynamicIcon",null),h([f()],gt.prototype,"_renderedCatalogSelectNode",null),h([f()],gt.prototype,"_renderedChildList",null),h([f()],gt.prototype,"_hasTables",null),h([f()],gt.prototype,"_renderedTablesItem",null),h([f()],gt.prototype,"_renderedItemMessage",null),h([f()],gt.prototype,"_singleAction",null),h([f()],gt.prototype,"_filteredSections",null),h([f()],gt.prototype,"_actionsCount",null),gt=fU=h([A("esri.widgets.LayerList.LayerListItem")],gt);const aut=gt;function vne(t){return t!=null&&typeof t=="object"&&t.type==="2d"&&t.view2dType==="linkchart"}function lut(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:uut(t);i.push(...r)}}function uut(t){return t.split(",").map(e=>e.trim())}function Dx(t){return t&&typeof t.render=="function"}function cut(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}let qn=class extends Ed.IdentifiableMixin(Tr){constructor(e,i){super(e,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([Oe(()=>this._canCreateLegend,()=>this._createLegend(),It),Oe(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),It)])}destroy(){this._legend=bi(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const r="legend";return e===r||e!=null&&!!Array.isArray(e)&&e.includes(r)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,r=e==null?void 0:e.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){var o;const e=(o=this.listItem)==null?void 0:o.layer;if(!e||e.type==="subtype-sublayer")return null;const i=X7(e)?e:null,r=e==null?void 0:e.parent,n=r!=null&&"type"in r&&r.type==="map-image"?i==null?void 0:i.source:null,s="";return n&&r?{layer:r,title:s,sublayerIds:[n.mapLayerId]}:{layer:e,title:s}}get disabled(){var n;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return P("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r,open:n}=this;return e&&!r&&n?e==="legend"&&i?P("div",{key:"legend-widget"},i.render()):typeof e=="string"?P("div",{innerHTML:e,key:e}):Dx(e)?P("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?P("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(r=>this._renderContent(r)):this._renderContent(e):null}async _createLegend(){if(bi(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await J(()=>Promise.resolve().then(()=>spt),void 0),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:Dx(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};h([f()],qn.prototype,"_legend",void 0),h([f()],qn.prototype,"_canCreateLegend",null),h([f()],qn.prototype,"_legendOptions",null),h([f()],qn.prototype,"_legendLayerInfo",null),h([f()],qn.prototype,"className",void 0),h([f()],qn.prototype,"content",void 0),h([f()],qn.prototype,"disabled",null),h([f()],qn.prototype,"flowEnabled",void 0),h([f()],qn.prototype,"icon",null),h([f()],qn.prototype,"image",void 0),h([f()],qn.prototype,"listItem",void 0),h([f()],qn.prototype,"open",void 0),h([f()],qn.prototype,"title",null),h([f()],qn.prototype,"visible",void 0),qn=h([A("esri.widgets.LayerList.ListItemPanel")],qn);const Jwe=qn;var J_;const hut=Te.ofType({key:"type",defaultKeyValue:"button",base:rR,typeMap:{button:Ede,toggle:kde}}),Kwe=Te.ofType(hut),KD="layer",qk="child-list-mode",dut="hide";let hi=J_=class extends Ed.IdentifiableMixin(Ce){constructor(t){super(t),this.actionsSections=new Kwe,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Te.ofType(J_)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([Oe(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),It),Oe(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),It),Oe(()=>this.view,t=>this._updateChildrenView(t),It),Oe(()=>this.panel,t=>this._setListItemOnPanel(t),It)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(r=>r.layer===i)??null}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new Jwe(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=qs(this,"layer.layer");return(!t||t&&qs(this,"layer.layer.loaded"))&&qs(this,"layer.title")||qs(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return!!(e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing")}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return!!((t=this.layer)!=null&&t.visible)}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t,e;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!tut(this.layer,(e=this.view)==null?void 0:e.scale)}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return Xlt(this.layer)}clone(){return new J_({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){var e;(e=this.children)==null||e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,r=t.filter(n=>!i.some(s=>s.layer===n));i.addMany(this._createChildItems(r,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(r=>!!r.layer&&!t.includes(r.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(qk),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(qk),this.listModeDisabled||this.addHandles(t.toArray().map(e=>Oe(()=>e.listMode,()=>this._compileChildren(t))),qk)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>tP(i)!==dut);t!=null&&t.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),KD)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.reverse().map(i=>e||eut(i)?new J_({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(pn)}_watchLayerProperties(t){if(this.removeHandles(KD),this.removeHandles(qk),!t)return;if((!this.listModeDisabled&&tP(t))==="hide-children")return void this.children.destroyAll();const e=Wwe(t);e&&this.addHandles(Oe(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},It),KD)}};h([f({type:Kwe})],hi.prototype,"actionsSections",void 0),h([f()],hi.prototype,"actionsOpen",void 0),h([f()],hi.prototype,"checkPublishStatusEnabled",void 0),h([f({type:Te.ofType(hi)})],hi.prototype,"children",void 0),h([f()],hi.prototype,"childrenSortable",void 0),h([f({readOnly:!0})],hi.prototype,"connectionStatus",null),h([f({readOnly:!0})],hi.prototype,"error",null),h([f()],hi.prototype,"hidden",void 0),h([f({readOnly:!0})],hi.prototype,"incompatible",null),h([f()],hi.prototype,"layer",void 0),h([f({readOnly:!0})],hi.prototype,"layerView",null),h([f()],hi.prototype,"listItemCreatedFunction",void 0),h([f({nonNullable:!0})],hi.prototype,"listModeDisabled",void 0),h([f()],hi.prototype,"open",void 0),h([f({type:Jwe})],hi.prototype,"panel",void 0),h([Rt("panel")],hi.prototype,"castPanel",null),h([f()],hi.prototype,"parent",void 0),h([f({value:!0})],hi.prototype,"sortable",null),h([f()],hi.prototype,"title",null),h([f({readOnly:!0})],hi.prototype,"publishing",null),h([f({readOnly:!0})],hi.prototype,"updating",null),h([f()],hi.prototype,"view",void 0),h([f()],hi.prototype,"visible",null),h([f({readOnly:!0})],hi.prototype,"visibleAtCurrentScale",null),h([f({readOnly:!0})],hi.prototype,"visibleAtCurrentTimeExtent",null),h([f({readOnly:!0})],hi.prototype,"visibilityMode",null),hi=J_=h([A("esri.widgets.LayerList.ListItem")],hi);const Y7=hi,Ll={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},put="hide",eOe=Te.ofType(Y7);let ic=class extends ul.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new eOe,this.view=null}initialize(){this.addHandles([Oe(()=>{var e;return((e=this.view)==null?void 0:e.ready)===!0},()=>this._viewHandles(),It),Oe(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),Oe(()=>vne(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],Ll.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,r,n){var w,O;const s=e==null?void 0:e.layer;if(!s||s.type==="subtype-sublayer"||s.type==="sublayer")return;const o=(O=(w=this.view)==null?void 0:w.map)==null?void 0:O.layers,a=i?yne(i):o,l=r?yne(r):o;if(!a||!l)return;const{operationalItems:u}=this,p=(i==null?void 0:i.children)||u,m=(r==null?void 0:r.children)||u,g=l.length-n;e.parent=r||null,p.remove(e),a.remove(s),m.includes(e)||m.add(e,g),l.includes(s)||l.add(s,g),this._compileList()}_createLayerViewHandles(e){this.removeHandles(Ll.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Ll.layerViews)}_createMapLayerHandles(e){this.removeHandles(Ll.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Ll.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:n,listModeDisabled:s}=this;return new Y7({checkPublishStatusEnabled:n,listModeDisabled:s,layer:e,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>tP(i)!==put):void 0}_watchLayersListMode(e){this.removeHandles(Ll.layerListMode),e&&!this.listModeDisabled&&this.addHandles(Oe(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),Ll.layerListMode)}_compileList(){var n,s;const e=(s=(n=this.view)==null?void 0:n.map)==null?void 0:s.layers,i=vne(this.view)&&!this.view.inGeographicLayout?e==null?void 0:e.filter(({type:o})=>o==="link-chart"):e;this._watchLayersListMode(i);const r=this._getViewableLayers(i);r!=null&&r.length?(this._createNewItems(r),this._removeItems(r),this._sortItems(r)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(r=>{i.some(n=>n.layer===r)||i.add(this._createListItem(r))})}_removeItems(e){const{operationalItems:i}=this,r=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||r.push(n)}),i.destroyMany(r)}_sortItems(e){const{operationalItems:i}=this;i.sort((r,n)=>{const s=e.indexOf(r.layer),o=e.indexOf(n.layer);return s>o?-1:s<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Ll.mapLayers,Ll.layerViews,Ll.viewLayers]),e!=null&&e.ready?this.addHandles([Oe(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),It),Oe(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),It)],Ll.viewLayers):this._removeAllItems()}};h([f()],ic.prototype,"checkPublishStatusEnabled",void 0),h([f()],ic.prototype,"listItemCreatedFunction",void 0),h([f({nonNullable:!0})],ic.prototype,"listModeDisabled",void 0),h([f({type:eOe})],ic.prototype,"operationalItems",void 0),h([f({readOnly:!0})],ic.prototype,"state",null),h([f()],ic.prototype,"totalItems",null),h([f()],ic.prototype,"view",void 0),ic=h([A("esri.widgets.LayerList.LayerListViewModel")],ic);const tOe=ic;let Ba=class extends Ce{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};h([f({type:Boolean,nonNullable:!0})],Ba.prototype,"catalogLayerList",void 0),h([f({type:Boolean,nonNullable:!0})],Ba.prototype,"closeButton",void 0),h([f({type:Boolean,nonNullable:!0})],Ba.prototype,"collapseButton",void 0),h([f({type:Boolean,nonNullable:!0})],Ba.prototype,"errors",void 0),h([f({type:Boolean,nonNullable:!0})],Ba.prototype,"filter",void 0),h([f({type:Boolean,nonNullable:!0})],Ba.prototype,"flow",void 0),h([f({type:Boolean,nonNullable:!0})],Ba.prototype,"heading",void 0),h([f({type:Boolean,nonNullable:!0})],Ba.prototype,"statusIndicators",void 0),h([f({type:Boolean,nonNullable:!0})],Ba.prototype,"temporaryLayerIndicators",void 0),Ba=h([A("esri.widgets.LayerList.LayerListVisibleElements")],Ba);const iOe=Ba,fut=["label","description","metadata"],mut=Te.ofType(Y7),bne="nested";let vt=class extends Ed.IdentifiableMixin(Tr){constructor(e,i){super(e,i),this._rootListEl=null,this._activeItem=null,this._tooltipReferenceMap=new xg,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new xg,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new Te(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=Blt,this.minFilterItems=Qlt,this.openedLayers=new Te,this.openedLayerLists=new Te,this.selectedItems=new mut,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new tOe,this.visibilityAppearance="default",this.visibleElements=new iOe,this._canMove=({dragEl:r,fromEl:n,toEl:s},o)=>{var R,D,L;const a=o==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,l=ru(r);if(!(l!=null&&l.sortable))return!1;const u=ru(n),p=gne(n),m=ru(s),g=gne(s),w=!!p&&!!g&&p===g,O={selected:l,from:u,to:m},_=n.group,x=s.group,T=((R=u==null?void 0:u.layer)==null?void 0:R.type)??"",E=((D=m==null?void 0:m.layer)==null?void 0:D.type)??"",k=new Set(["map-image","catalog","knowledge-graph"]);return _&&x&&typeof a=="function"?a.call(null,O):w&&!k.has(T)&&!k.has(E)&&((L=l==null?void 0:l.layer)==null?void 0:L.type)!=="sublayer"},this._onCatalogOpen=r=>{var n,s;this.openedLayers.push((n=r.layer)==null?void 0:n.parent),this._focusLayerFlowItem=(s=r.layer)==null?void 0:s.uid},this._onTablesOpen=r=>{var n;this.openedLayers.push(r.layer),this._focusLayerFlowItem=(n=r.layer)==null?void 0:n.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onTooltipReferenceChange=(r,n)=>{n?this._tooltipReferenceMap.set(r,n):this._tooltipReferenceMap.delete(r)},this._onSelectedDragItemLayerUidChange=r=>{this._selectedDragItemLayerUid=r},this._onTriggerAction=(r,n)=>{this.triggerAction(r,n)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=r=>{if(this.visibilityAppearance!=="default")return;const n=Array.from(r.composedPath()).find(s=>{var o;return(o=s.classList)==null?void 0:o.contains(_S.item)});this._activeItem=ru(n)},this._onCalciteListOrderChange=r=>{const{_lastDragDetail:n}=this,{toEl:s,fromEl:o,dragEl:a,newIndex:l}=r;if(o&&s&&!((n==null?void 0:n.newIndex)===l&&(n==null?void 0:n.dragEl)===a&&(n==null?void 0:n.toEl)===s&&(n==null?void 0:n.fromEl)===o))if(this._lastDragDetail=r,this._selectedDragItemLayerUid=a.value,o!==s)this._moveLayerFromChildList({toEl:s,fromEl:o,dragEl:a,newIndex:l});else{const u=Array.from(o.children).filter(p=>p==null?void 0:p.matches("calcite-list-item")).map(p=>p.value);this._sortLayers(o,u)}}}initialize(){this.addHandles([Ss(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),It),Ss(()=>this.viewModel.operationalItems,"change",()=>Ylt(this.selectedItems),It),Oe(()=>[this.filterPredicate,this._rootListEl],()=>Jlt(this._rootListEl,this.filterPredicate))])}loadDependencies(){return um({button:()=>J(()=>Promise.resolve().then(()=>K2),void 0),flow:()=>J(()=>import("./index-Dj_kdE3U.js"),[]),"flow-item":()=>J(()=>import("./index-DFlwSnKt.js"),__vite__mapDeps([253,243,235,236,237,244,245,246,247,233,254])),list:()=>J(()=>import("./index-DnDa7YSf.js"),__vite__mapDeps([255,233,250,236,256])),notice:()=>J(()=>import("./index-Dv9oNo5c.js"),__vite__mapDeps([260,237])),tooltip:()=>J(()=>import("./index-CLq3TOwI.js"),__vite__mapDeps([261,235,236,237,244]))})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(e=>e.children.filter(i=>{var r;return((r=i.layer)==null?void 0:r.type)!=="catalog-dynamic-group"})).length}get _visibleItems(){var e;return(e=this.operationalItems)==null?void 0:e.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}get _openedPanelItems(){return this._visibleItems.flatten(e=>e.children).filter(({hidden:e,panel:i})=>!e&&(i==null?void 0:i.open)&&!i.disabled&&i.flowEnabled)}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:e}=this;return e.toArray().map((i,r)=>this._renderLayerFlowItem(i,r===e.length-1))}get icon(){return"layers"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){var n;const e=(n=this.viewModel)==null?void 0:n.state,{_visibleItems:i}=this,r={[lr.hidden]:e==="loading",[lr.disabled]:e==="disabled"};return P("div",{class:this.classes(_S.base,lr.widget,lr.panel,r)},i!=null&&i.length?[this._renderItemTooltips(),this._renderItems()]:this._renderNoItems())}async _createFlowList(e,i){const{_layerListMap:r}=this,n=r.get(e);if(n)return n;const s=e.type==="catalog"?await this._createCatalogLayerList(e):await this._createTableList(e);return i.aborted||r.set(e,s),s}async _handleOpenedLayersChange(){var l;const{_layerListMap:e,openedLayers:i,openedLayerLists:r}=this;(l=this._openedLayersController)==null||l.abort();const n=new AbortController,{signal:s}=n;this._openedLayersController=n,e.forEach((u,p)=>{i.includes(p)||(u.destroy(),e.delete(p))});const o=await Promise.all(i.map(u=>this._createFlowList(u,s)));if(s.aborted)return;r.removeAll(),r.addMany(o);const a=r.at(-1);a?"catalogLayer"in a?(this._set("catalogLayerList",a),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",a)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(e){var n,s;const{_tooltipReferenceMap:i,messages:r}=this;return e?P("calcite-tooltip",{key:`tooltip-${(n=e.layer)==null?void 0:n.uid}`,overlayPositioning:"fixed",referenceElement:i.get((s=e.layer)==null?void 0:s.uid)},r.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){var i;return e.incompatible?this._renderItemTooltip(e):(i=e.children)==null?void 0:i.filter(r=>!r.hidden).toArray().map(r=>this._renderItemTooltipNodes(r))}_renderItemTooltips(){var e;return(e=this._visibleItems)==null?void 0:e.toArray().map(i=>this._renderItemTooltipNodes(i))}_renderNoItemsMessage(){return P("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return P("div",{class:_S.itemMessage,key:"esri-layer-list__no-items"},P("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(e){const{default:i}=await J(()=>import("./CatalogLayerList-mjV2piTo.js"),[]),{headingLevel:r,catalogOptions:n,view:s,filterPlaceholder:o,listItemCreatedFunction:a,minFilterItems:l,selectionMode:u,visibilityAppearance:p,_onCatalogOpen:m,_onTablesOpen:g,layerTablesEnabled:w}=this;return new i({headingLevel:r,view:s,filterPlaceholder:o,listItemCreatedFunction:a,minFilterItems:l,selectionMode:u,visibilityAppearance:p,...n,catalogLayer:e,layerTablesEnabled:w,onCatalogOpen:m,onTablesOpen:g})}_getTableListParams(e){switch(e.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:e.tables};case"map-image":return{...this.mapImageOptions,tables:e.subtables};case"tile":return{...this.tileOptions,tables:e.subtables};default:return null}}async _createTableList(e){const{default:i}=await J(()=>import("./TableList-CPSRzEWh.js"),[]),{headingLevel:r,selectionMode:n,dragEnabled:s}=this;return new i({headingLevel:r,selectionMode:n,dragEnabled:s,...this._getTableListParams(e)})}_renderLayerFlowItem(e,i){var o;const{messages:r,openedLayers:n}=this,s=e.title||this.messages.untitledLayer;return P("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":e.uid,description:s,heading:r[e.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${e.uid}`,selected:i,onCalciteFlowItemBack:a=>{a.preventDefault(),n.pop();const l=n.at(-1);l?this._focusLayerFlowItem=l.uid:this._focusRootFlowItem=!0}},(o=this._layerListMap.get(e))==null?void 0:o.render())}_renderPanelFlowItems(){const{_openedPanelItems:e,openedLayers:i}=this;return e.toArray().map(({title:r,panel:n},s)=>{const o=()=>this._handlePanelFlowItemBack(n);return P("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:r,heading:n.title,headingLevel:this.headingLevel,key:`flow-panel-${n.uid}`,selected:!i.length&&s===e.length-1,onCalciteFlowItemBack:a=>{a.preventDefault(),o()}},n.render(),P("calcite-button",{appearance:"transparent",onclick:o,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,dx(e))}_focusLayerFlowItemNode(e){this._focusLayerFlowItem===e.dataset.layerUid&&(this._focusLayerFlowItem=null,dx(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,dx(e))}_renderItems(){const{visible:e,collapsed:i,_visibleItems:r,_openedPanelItems:n,_filterEnabled:s,_rootGroupUid:o,visibleElements:{closeButton:a,collapseButton:l,heading:u,flow:p},_dragEnabled:m,selectionMode:g,filterText:w,openedLayers:O,filterPlaceholder:_,messages:x}=this,T=[P("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:a,closed:!e,collapsed:i,collapsible:l,heading:u?x.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!O.length&&!n.length,onCalciteFlowItemClose:()=>this.visible=!1},P("calcite-list",{afterCreate:E=>{this._rootListEl=E,E.addEventListener("focusin",this._setActiveItem),E.addEventListener("focusout",this._clearActiveItem)},afterRemoved:E=>{this._rootListEl=null,E.removeEventListener("focusin",this._setActiveItem),E.removeEventListener("focusout",this._clearActiveItem)},canPull:E=>this._canMove(E,"pull"),canPut:E=>this._canMove(E,"put"),"data-layer-type":o,displayMode:bne,dragEnabled:m,filterEnabled:s,filterPlaceholder:_,filterProps:fut,filterText:s?w:"",group:o,key:"root-list",label:x.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:g,onCalciteListChange:E=>this._handleCalciteListChange(E),onCalciteListDragEnd:E=>this._handleCalciteListDragEnd(E.detail),onCalciteListFilter:E=>{var k;return this.filterText=((k=E.currentTarget)==null?void 0:k.filterText)??""},onCalciteListOrderChange:E=>this._onCalciteListOrderChange(E.detail)},r==null?void 0:r.toArray().map(E=>this._renderItem(E)),r!=null&&r.length&&s?P("div",{class:_S.filterNoResults,slot:"filter-no-results"},P("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return e?p?P("calcite-flow",{key:"root-flow"},T):T:null}_renderItem(e,i,r){var n;return P(aut,{activeItem:this._activeItem,canMove:this._canMove,css:_S,displayMode:bne,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${(n=e.layer)==null?void 0:n.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:e,fromEl:i,dragEl:r,newIndex:n}){const s=ru(r),o=ru(e),a=ru(i);this.viewModel.moveListItem(s,a,o,n)}_handleCalciteListDragEnd(e){const{fromEl:i,dragEl:r,oldIndex:n}=e;i.insertBefore(r,i.children[n])}_sortLayers(e,i){var r,n;if(e)if(e===this._rootListEl)Xwe((n=(r=this.view)==null?void 0:r.map)==null?void 0:n.layers,i);else{const s=ru(e);if(!s)return;iut(s,i)}}_handleCalciteListChange(e){const{selectionMode:i,selectedItems:r}=this;if(i==="none")return;const n=e.target.selectedItems.map(s=>ru(s)).filter(Boolean);r.removeAll(),r.addMany(n)}};h([f()],vt.prototype,"_rootListEl",void 0),h([f()],vt.prototype,"_activeItem",void 0),h([f()],vt.prototype,"_tooltipReferenceMap",void 0),h([f()],vt.prototype,"_focusRootFlowItem",void 0),h([f()],vt.prototype,"_focusPanelFlowItem",void 0),h([f()],vt.prototype,"_focusLayerFlowItem",void 0),h([f()],vt.prototype,"_layerListMap",void 0),h([f()],vt.prototype,"_totalItems",null),h([f()],vt.prototype,"_visibleItems",null),h([f()],vt.prototype,"_openedPanelItems",null),h([f()],vt.prototype,"_dragEnabled",null),h([f()],vt.prototype,"_filterEnabled",null),h([f()],vt.prototype,"_renderedOpenLayerFlowItems",null),h([f({readOnly:!0})],vt.prototype,"catalogLayerList",void 0),h([f()],vt.prototype,"catalogOptions",void 0),h([f()],vt.prototype,"collapsed",void 0),h([f()],vt.prototype,"dragEnabled",void 0),h([f()],vt.prototype,"filterPlaceholder",void 0),h([f()],vt.prototype,"filterPredicate",void 0),h([f()],vt.prototype,"filterText",void 0),h([f()],vt.prototype,"headingLevel",void 0),h([f()],vt.prototype,"icon",null),h([f()],vt.prototype,"knowledgeGraphOptions",void 0),h([f()],vt.prototype,"label",null),h([f()],vt.prototype,"layerTablesEnabled",void 0),h([f()],vt.prototype,"listItemCanGiveFunction",void 0),h([f()],vt.prototype,"listItemCanReceiveFunction",void 0),h([f()],vt.prototype,"listItemCreatedFunction",null),h([f()],vt.prototype,"mapImageOptions",void 0),h([f(),Ys("esri/widgets/LayerList/t9n/LayerList")],vt.prototype,"messages",void 0),h([f(),Ys("esri/t9n/common")],vt.prototype,"messagesCommon",void 0),h([f()],vt.prototype,"minDragEnabledItems",void 0),h([f()],vt.prototype,"minFilterItems",void 0),h([f({readOnly:!0})],vt.prototype,"openedLayers",void 0),h([f({readOnly:!0})],vt.prototype,"openedLayerLists",void 0),h([f()],vt.prototype,"operationalItems",null),h([f()],vt.prototype,"selectedItems",void 0),h([f()],vt.prototype,"selectionMode",void 0),h([f({readOnly:!0})],vt.prototype,"tableList",void 0),h([f()],vt.prototype,"tileOptions",void 0),h([f()],vt.prototype,"view",null),h([lut("trigger-action"),f({type:tOe})],vt.prototype,"viewModel",void 0),h([f()],vt.prototype,"visibilityAppearance",void 0),h([f({type:iOe,nonNullable:!0})],vt.prototype,"visibleElements",void 0),vt=h([A("esri.widgets.LayerList")],vt);const yut=vt;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.11 */const gut=Ln`@layer{arcgis-layer-list{display:block}}`,vut=VR(yut);var If;let but=(If=class extends gn{constructor(){super(...arguments),this.widget=vut(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.catalogOptions=this.widget.catalogOptions,this.collapsed=this.widget.collapsed,this.dragEnabled=this.widget.dragEnabled,this.filterPlaceholder=this.widget.filterPlaceholder,this.filterPredicate=this.widget.filterPredicate,this.filterText=this.widget.filterText,this.headingLevel=this.widget.headingLevel,this.hideCatalogLayerList=this.widget.visibleElements.catalogLayerList,this.hideFlow=this.widget.visibleElements.flow,this.hideStatusIndicators=this.widget.visibleElements.statusIndicators,this.icon=this.widget.icon,this.knowledgeGraphOptions=this.widget.knowledgeGraphOptions,this.label=this.widget.label,this.listItemCreatedFunction=this.widget.listItemCreatedFunction,this.minDragEnabledItems=this.widget.minDragEnabledItems,this.minFilterItems=this.widget.minFilterItems,this.openedLayers=this.widget.openedLayers,this.position="bottom-left",this.selectedItems=this.widget.selectedItems,this.selectionMode=this.widget.selectionMode,this.showCloseButton=this.widget.visibleElements.closeButton,this.showCollapseButton=this.widget.visibleElements.collapseButton,this.showErrors=this.widget.visibleElements.errors,this.showFilter=this.widget.visibleElements.filter,this.showHeading=this.widget.visibleElements.heading,this.showTemporaryLayerIndicators=this.widget.visibleElements.temporaryLayerIndicators,this.state=this.viewModel.state,this.visibilityAppearance=this.widget.visibilityAppearance,this.arcgisPropertyChange=JU()("state"),this.arcgisReady=xo(),this.arcgisTriggerAction=Zr(()=>this.widget,"trigger-action")}get catalogLayerList(){return this.widget.catalogLayerList}get operationalItems(){return this.widget.operationalItems}get tableList(){return this.widget.tableList}async destroy(){await this.manager.destroy()}async triggerAction(e,i){var r;(r=this.widget)==null||r.triggerAction(e,i)}},If.properties={autoDestroyDisabled:5,catalogLayerList:32,catalogOptions:0,collapsed:7,dragEnabled:5,filterPlaceholder:1,filterPredicate:0,filterText:1,headingLevel:9,hideCatalogLayerList:5,hideFlow:5,hideStatusIndicators:5,icon:1,knowledgeGraphOptions:0,label:1,listItemCreatedFunction:0,minDragEnabledItems:9,minFilterItems:9,openedLayers:0,operationalItems:32,position:1,referenceElement:1,selectedItems:0,selectionMode:1,showCloseButton:5,showCollapseButton:5,showErrors:5,showFilter:5,showHeading:5,showTemporaryLayerIndicators:5,state:3,tableList:32,visibilityAppearance:1},If.shadowRootOptions=Lf,If.styles=gut,If);fO("arcgis-layer-list",but);function wne(t,e){const i=t.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<e.scale)?i:null}const B$=-1;let eu=class extends Ce{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=te("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(One(e))}catch(i){this._transitionTo([]),pe.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&Sne(this._current,One(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&Sne(this._current,e,this.scale)?(this._final=e,this._to=q(e),wut(this._current,this._to,this.scale),this._from=q(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?q(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const n=this._current[r],s=this._from[r],o=this._to[r];n.scale=Out(s.scale,o.scale,i);for(let a=0;a<n.effects.length;a++){const l=n.effects[a],u=s.effects[a],p=o.effects[a];l.interpolate(u,p,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?q(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let n,s,o=1;if(i.length===1||e>=i[0].scale)s=n=i[0].effects;else if(e<=i[r].scale)s=n=i[r].effects;else for(let a=0;a<r;a++){const l=i[a],u=i[a+1];if(l.scale>=e&&u.scale<=e){o=(e-l.scale)/(u.scale-l.scale),n=l.effects,s=u.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(n[a],s[a],o)}};function One(t){const e=$9(t)||[];return Sut(e)?[{scale:B$,effects:e}]:e}function Sne(t,e,i){var r,n,s,o;return!((r=t[0])!=null&&r.effects)||!((n=e[0])!=null&&n.effects)?!0:!((((s=t[0])==null?void 0:s.scale)===B$||((o=e[0])==null?void 0:o.scale)===B$)&&(t.length>1||e.length>1)&&i<=0)&&Zhe(t[0].effects,e[0].effects)}function wut(t,e,i){const r=t.length>e.length?t:e,n=t.length>e.length?e:t,s=n[n.length-1],o=(s==null?void 0:s.scale)??i,a=(s==null?void 0:s.effects)??[];for(let l=n.length;l<r.length;l++)n.push({scale:o,effects:[...a]});for(let l=0;l<r.length;l++)n[l].scale=n[l].scale===B$?i:n[l].scale,r[l].scale=r[l].scale===B$?i:r[l].scale,Hhe(n[l].effects,r[l].effects)}function Out(t,e,i){return t+(e-t)*i}function Sut(t){const e=t[0];return!!e&&"type"in e}h([f()],eu.prototype,"_to",void 0),h([f()],eu.prototype,"duration",void 0),h([f({value:""})],eu.prototype,"effect",null),h([f({readOnly:!0})],eu.prototype,"effects",void 0),h([f({readOnly:!0})],eu.prototype,"final",null),h([f({readOnly:!0})],eu.prototype,"hasEffects",null),h([f({value:0})],eu.prototype,"scale",null),h([f({readOnly:!0})],eu.prototype,"transitioning",null),eu=h([A("esri.layers.effects.EffectView")],eu);function l$t(t,e,i){return e.flatten(({sublayers:n})=>n).length!==t.length?!0:!!t.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!rOe(t,e)}function _ut(t,e,i){return!!t.some(r=>{var a,l,u;const n=r.source,s=!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const o=((u=(l=(a=r.layer)==null?void 0:a.capabilities)==null?void 0:l.exportMap)==null?void 0:u.supportsSublayerOrderBy)??!1;return!s||r.originIdOf("renderer")>ht.SERVICE||r.originIdOf("labelingInfo")>ht.SERVICE||r.originIdOf("opacity")>ht.SERVICE||r.originIdOf("labelsVisible")>ht.SERVICE||o&&r.originIdOf("orderBy")>ht.SERVICE})||!rOe(t,e)}function rOe(t,e){if(!(t!=null&&t.length)||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(t.length>i.length)return!1;let r=0;const n=i.length;for(const{id:s}of t){for(;r<n&&i[r]!==s;)r++;if(r>=n)return!1}return!0}function u$t(t){return!!t&&t.some(e=>{var i;return e.minScale!=null||((i=e.layerDefinition)==null?void 0:i.minScale)!=null})}const xut={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let qa=class extends Ce{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=Dte(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&_ut(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(xut[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(n=>n.definitionExpression!=null||e&&n.floorInfo!=null);return i.length?JSON.stringify(i.reduce((n,s)=>{const o=Dte(this.floors,s),a=tde(o,s.definitionExpression);return a!=null&&(n[s.id]=a),n},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,n=o=>{o.visible&&(r===0||dqe(r,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(n):e.unshift(o))};i&&i.forEach(n);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some((o,a)=>e[a]!==o)?e:s}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};h([f({readOnly:!0})],qa.prototype,"dynamicLayers",null),h([f()],qa.prototype,"floors",void 0),h([f({readOnly:!0})],qa.prototype,"hasDynamicLayers",null),h([f()],qa.prototype,"layer",null),h([f({readOnly:!0})],qa.prototype,"layers",null),h([f({readOnly:!0})],qa.prototype,"layerDefs",null),h([f({type:Number})],qa.prototype,"scale",void 0),h([f({readOnly:!0})],qa.prototype,"version",null),h([f({readOnly:!0})],qa.prototype,"visibleSublayers",null),qa=h([A("esri.layers.support.ExportImageParameters")],qa);const $ut=9999999e31,Tut=2e-7,Eut={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function iP(t){return Eut[t]??[-34028234663852886e22,34028234663852886e22]}function h$t(t,e){return t==null||e==null?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function kut(t){return((t==null?void 0:t.startsWith("s"))||(t==null?void 0:t.startsWith("u")))??!1}function d$t(t,e,i,r){let[n,s]=iP(i);const o=kut(i);return o&&(n-=1e-5,s+=1e-5),o?i.startsWith("u")?Cut(t,e,r,[n,s]):Mut(t,e,r,[n,s]):Aut(t,e,r,[n,s])}function p$t(t,e){for(let i=0;i<e.length;i++)e[i]&&isNaN(t[i])&&(e[i]=0,t[i]=0)}function Cut(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a+.5|0}}function Mut(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a+(a>0?.5:-.5)|0}}function Aut(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a}}function f$t(t,e,i){var w,O;if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:n,pixelType:s}=t,o=r[0].length,a=t.bandMasks??[],l=t.mask??new Uint8Array(o).fill(255),u=s==="f32"||s==="f64",p=iP(s);let m=!1;for(let _=0;_<r.length;_++){const x=typeof e=="number"?e:e[_];if(x==null)continue;const T=((w=n==null?void 0:n[_])==null?void 0:w.minValue)??p[0],E=((O=n==null?void 0:n[_])==null?void 0:O.maxValue)??p[1];if(T>x+Number.EPSILON||E<x-Number.EPSILON)continue;const k=a[_]||l.slice(),M=r[_],R=i==null?void 0:i.customFloatTolerance;if(u&&R!==0){let D=R;D||(D=Math.abs(x)>=$ut?Tut*Math.abs(x):s==="f32"?2**-23:Number.EPSILON);for(let L=0;L<M.length;L++)k[L]&&Math.abs(M[L]-x)<D&&(M[L]=0,k[L]=0,l[L]=0,m=!0)}else for(let D=0;D<M.length;D++)k[D]&&M[D]===x&&(M[D]=0,k[D]=0,l[D]=0,m=!0);a[_]=k}if(m){const _=t.bandMasks||t.pixels.length>1?a:null;i!=null&&i.matchAllNoData?t.mask=_&&_.length>1?g(_):l:(t.bandMasks=_,t.mask=l)}function g(_){if(_.length<2)return _[0];const x=_[0].length,T=new Uint8Array(x).fill(0);for(let E=0;E<_.length;E++){const k=_[E];for(let M=0;M<x;M++)k[M]&&(T[M]=255)}return T}m&&"updateStatistics"in t&&t.updateStatistics()}function nOe(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function m$t(t,e){if(t==null)return null;if(!nOe(t))return new G("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type||t.declaredClass}'`,{renderer:t});switch(t.type){case"simple":return Iut(t,e);case"unique-value":return Put(t,e);case"class-breaks":return Rut(t,e);case"dictionary":case"heatmap":return null}return null}function J7(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map(n=>n.details.symbol.type||n.details.symbol.declaredClass).filter(n=>!!n);i.sort();const r=new Array;return i.forEach((n,s)=>{s!==0&&n===i[s-1]||r.push(n)}),new G("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}function Iut(t,e){const i={...ed,...e,cimFallbackEnabled:!0};return J7(t,Bw(t.symbol,i).error)}function Put(t,e){var s;const i={...ed,...e,cimFallbackEnabled:!0},r=(s=t.uniqueValueInfos)==null?void 0:s.map(o=>Bw(o.symbol,i).error).filter(pn),n=Bw(t.defaultSymbol,i);return n.error&&(r==null||r.unshift(n.error)),J7(t,r)}function Rut(t,e){const i={...ed,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map(s=>Bw(s.symbol,i).error).filter(pn),n=Bw(t.defaultSymbol,i);return n.error&&r.unshift(n.error),J7(t,r)}var mU;function Lut(t){switch(t){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function K7(t){var e;return(t==null?void 0:t.type)==="CIMVectorMarker"?(e=t.markerGraphics)==null?void 0:e[0]:void 0}function sOe(t){var e,i;return((e=t==null?void 0:t.symbol)==null?void 0:e.type)==="CIMPolygonSymbol"?(i=t.symbol.symbolLayers)==null?void 0:i[0]:void 0}function Nut(t,e){(t==null?void 0:t.type)==="CIMVectorMarker"&&e!=null&&(t.size=e)}function Dut(t,e){const i=K7(t);i&&e!=null&&(i.geometry=Lut(e))}function Vut(t,e){const i=sOe(K7(t));i&&e!=null&&(i.color=e.toArray())}function Fut(t,e,i){const r=sOe(K7(t));r&&e!=null&&i&&(r.colorLocked=e)}function oOe(t,e){var u;const{outerRingSize:i,innerDotSize:r,type:n,color:s,colorLocked:o,primitiveOverrides:a}=e,l=((u=t.data.symbol)==null?void 0:u.type)==="CIMPolygonSymbol"?t.data.symbol.symbolLayers:null;if((l==null?void 0:l.length)===2)for(const p of l){const m=p.primitiveName===mU.OuterRing;Nut(p,m?i:r),Dut(p,n),Vut(p,s),Fut(p,o,m)}return i!=null&&r!=null&&(t.data.primitiveOverrides=null),a!==void 0&&(t.data.primitiveOverrides=q(a)),t}(function(t){t.OuterRing="reference-size-outer-ring",t.InnerDot="reference-size-inner-dot"})(mU||(mU={}));function aOe(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(t.effects)for(const n of t.effects)_ne(n,e);if(t.symbolLayers)for(const n of t.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":jut(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":aOe(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}if(n.effects)for(const s of n.effects)_ne(s,e)}}else t.height!=null&&(t.height*=e)}function jut(t,e,i){if(t&&(t.markerPlacement&&zut(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||aOe(r.symbol,e,!0,i)}function zut(t,e){switch(IR(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function _ne(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function lOe(t){const e=[];return yU(dge(t),e),e.length?new xe(hge(e[0])):null}function yU(t,e){var n;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(fge(s)||pge(s)&&s.markerPlacement&&IR(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&xne(e,s.tintColor);break;case"CIMVectorMarker":(n=s.markerGraphics)==null||n.forEach(o=>{yU(o.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":xne(e,s.color);break;case"CIMHatchFill":yU(s.lineSymbol,e)}}}function xne(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function uOe(t,e,i){e instanceof xe||(e=new xe(e));const r=dge(t);r&&gU(r,e)}function gU(t,e,i){var s;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked||n&&(fge(o)||pge(o)&&o.markerPlacement&&IR(o.markerPlacement)))continue;const a=e.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach(l=>{gU(l.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMHatchFill":gU(o.lineSymbol,e)}}}var Kr;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(Kr||(Kr={}));const Vx={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function Uut(t,e,i){const r=Kr.size;let n=r,s=r;t<1?n*=.75:t>1&&(s*=1.25);const o=0,a=0;let l=r,u=r;return e&&i&&(n=s=l=u=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?n-.5*l:a,s-.5*u]},{command:"L",values:[n-.5*l,s-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,e?o:.125*u]},{command:"L",values:[n-.5*l,e?s-.5*u:u]},{command:"L",values:[n-.5*l,s-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*u]},{command:"L",values:[i?n-.5*l:a,s-.5*u]},{command:"L",values:[i?n-.5*l:a,e?s-.5*u:u]},{command:"L",values:[n-.5*l,e?s-.5*u:u]},{command:"Z",values:[]}]}]}function Qut(t){const e=Kr.size,i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[n,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,r]},{command:"L",values:[e,r]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[n,.7*e*.5]},{command:"Z",values:[]}]}]}function But(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function qut(t,e){let i=e?Kr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=Kr.size?i-=.5*n:i-=n;const s=0,o=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,s]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[o,r-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function Gut(t,e){let i=e?Kr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=Kr.size?i-=.5*n:i-=n;const s=.5*i,o=.15*i,a=0,l=r-o;return[{type:"ellipse",cx:.5*i,cy:l,rx:s,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[i,l]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:s,ry:o}]}function Zut(t,e){let i=e?Kr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=Kr.size?i-=.5*n:i-=n;const s=.15*i,o=r-s;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:s},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function Hut(t){let e=t;const i=t,r=6;e<Kr.size?e-=.5*r:e-=r;const n=.15*e,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[e,s]},{command:"L",values:[.5*e,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:s,rx:.5*e,ry:n}]}function Wut(t){let e=t;const i=t,r=4;e<Kr.size?e-=.5*r:e-=r;const n=0,s=0,o=e,a=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[s,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function Xut(t){const e=t,i=2;let r=t;r<Kr.size?r-=.5*i:r-=i;const n=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[e,r]},{command:"L",values:[.45*e,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[s,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,r]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[e,r]},{command:"Z",values:[]}]}]}function Ef(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function y$t(t,e){if(t==null)return new xe;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new xe(t);return new xe([Ef(i.r,e),Ef(i.g,e),Ef(i.b,e),i.a])}function Yut(t){return"r"in t&&"g"in t&&"b"in t}function cOe(t){return"h"in t&&"s"in t&&"v"in t}function hOe(t){return"l"in t&&"a"in t&&"b"in t}function dOe(t){return"l"in t&&"c"in t&&"h"in t}function Jut(t){return"x"in t&&"y"in t&&"z"in t}const Kut=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],ect=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function pOe(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,o=t[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=t[r][n]*e[n];i.push(a)}return i}function fOe(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=pOe(Kut,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function eB(t){const e=pOe(ect,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function mOe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function yOe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function tct(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}function ict(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function rct(t){return mOe(fOe(t))}function nct(t){return eB(yOe(t))}function sct(t){return tct(mOe(fOe(t)))}function oct(t){return eB(yOe(ict(t)))}function act(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),s=n-Math.min(e,i,r);let o=n,a=s===0?0:n===e?(i-r)/s%6:n===i?(r-e)/s+2:(e-i)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function lct(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,s=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}function g0(t){return Yut(t)?t:dOe(t)?oct(t):hOe(t)?nct(t):Jut(t)?eB(t):cOe(t)?lct(t):t}function KR(t){return cOe(t)?t:act(g0(t))}function uct(t){return hOe(t)?t:rct(g0(t))}function g$t(t){return dOe(t)?t:sct(g0(t))}function cct(t){let{r:e,g:i,b:r,a:n}=t;return n<1&&(e=Math.round(n*e+255*(1-n)),i=Math.round(n*i+255*(1-n)),r=Math.round(n*r+255*(1-n))),new xe({r:e,g:i,b:r})}function hct(t,e){const{r:i,g:r,b:n}=e!=null&&e.ignoreAlpha?t:cct(t);return .2126*i+.7152*r+.0722*n}var vU;function v$t(t,e=vU.High){return hct(t,{ignoreAlpha:!0})>e?new xe([0,0,0,t.a]):new xe([255,255,255,t.a])}function b$t(t,e){const i=uct(t);i.l*=1-e;const r=g0(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function w$t(t,e){const i=t.clone();return i.a*=e,i}function O$t(t,e){const i=KR(t);i.s*=e;const r=g0(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function S$t(t){return xe.toUnitRGBA(t)}function _$t(t){return y0(t[0],t[1],t[2],t.length>3?t[3]:1)}function x$t(t,e){const i=xe.toUnitRGBA(t);return i[3]*=e,i}function $$t(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map(r=>typeof r=="string"?new xe(r):r)).length===1||e===1){const r=[],n=t[0];for(let s=0;s<e;s++)r.push(n.clone());return r}if(i.shuffle&&(t=Eoe(q(t),i.seed)),t.length>=e){const r=[],n=(t.length-1)/(e-1);for(let s=0;s<e;s++){const o=Math.round(s*n);r.push(t[o].clone())}return r}return dct(t,e,i)}function dct(t,e,i={}){const r=[],n=t.length-1,s=Math.ceil((e-t.length)/n);e:for(let o=0;o<n;o++){const a=t[o],l=t[o+1];for(let u=1;u<=s;u++){const p=u/(s+1);if(r.push(pct(a,l,p,i)),r.length+t.length===e)break e}}return[...t.map(o=>o.clone()),...Eoe(r,i.seed??1)]}(function(t){t[t.Low=160]="Low",t[t.High=225]="High"})(vU||(vU={}));const e4=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function pct(t,e,i,r={}){const n=t.r,s=t.g,o=t.b,a=e.r,l=e.g,u=e.b,p=Math.round(n+(a-n)*i),m=Math.round(s+(l-s)*i),g=Math.round(o+(u-o)*i);if(!r.offset)return new xe([p,m,g]);const w=hQ(r.seed);return new xe([e4(p,w),e4(m,w),e4(g,w)])}const gOe="picture-fill",vOe="simple-fill",fct="simple-line",bOe="simple-marker",mct="text",yct="cim",$ne=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),t4=new lge(1e3);function gct(t){const e=t.style;let i=null;if(t)switch(t.type){case bOe:e!=="cross"&&e!=="x"&&(i=t.color);break;case vOe:e&&e!=="solid"?e!=="none"&&(i={type:"pattern",x:0,y:0,src:zi(`esri/symbols/patterns/${e}.png`),width:5,height:5}):i=t.color;break;case gOe:i={type:"pattern",src:t.url,width:wi(t.width)*t.xscale,height:wi(t.height)*t.yscale,x:wi(t.xoffset),y:wi(t.yoffset)};break;case mct:i=t.color;break;case yct:i=lOe(t)}return i}function vct(t,e){const i=t+"-"+e;return t4.get(i)!==void 0?Promise.resolve(t4.get(i)):bt(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.naturalWidth,o=n.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=e,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(n,0,0);const u=a.toDataURL();return t4.put(i,u),u})}function q$(t){if(!t)return null;let e=null;switch(t.type){case vOe:case gOe:case bOe:e=q$(t.outline);break;case fct:{const i=wi(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:tB(t.style),width:i,cap:t.cap,join:t.join==="miter"?wi(t.miterLimit):t.join},e.dashArray=wOe(e).join(",")||"none");break}default:e=null}return e}function wOe(t){if(!(t!=null&&t.style))return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(o=>Number(o));const n=r??0,s=$ne.has(i)?$ne.get(i).map(o=>o*n):[];if(t.cap!=="butt")for(const[o,a]of s.entries())s[o]=o%2==1?a+n:Math.max(a-n,1);return s}const tB=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),bct=new xe([128,128,128]);let wct=0;function Oct(){return wct++}let Sct=0;function _ct(){return Sct++}let xct=0;function $ct(){return xct++}const Tct="http://www.w3.org/2000/svg",Tne=te("android"),Ect=te("chrome")||Tne&&Tne>=4?"auto":"optimizeLegibility",kct={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Cct=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Ki={},ei={};const Mct=Math.PI;function wf(t,e){const i=t*(Mct/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function OOe(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function iB(t,e,i,r,n){if(t){if(t.type==="circle")return P("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return P("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return P("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return P("image",{alt:n||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const s=typeof t.path!="string"?OOe(t.path):t.path;return P("path",{d:s,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return i2(r),P("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":Ect,x:t.x,y:t.y},t.text)}return null}function rB(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new xe(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${Oct()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${_ct()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new xe(i.color).toString()}))}}}function nB(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new xe(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=wOe(t).join(",")||"none")),e}function SOe(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",i2(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function _Oe(t){const{pattern:e,linearGradient:i}=t;if(e)return P("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},P("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map((n,s)=>P("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color}));return P("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function Act(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:o,font:a}=r,l=rB(s),u=nB(o),p=n.type==="text"?SOe(n,a):null,m=iB(n,l.fill,u,p);m&&i.push(m)}return P("mask",{id:e,maskUnits:"userSpaceOnUse"},P("g",null,i))}function Ene(t,e,i){return zw(t,pR(t),[e,i])}function kne(t,e,i,r,n){return fR(t,pR(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function Ict(t,e,i,r){const n=e%360*Math.PI/180;L2(t,pR(t),n);const s=Math.cos(n),o=Math.sin(n),a=t[4],l=t[5];return t[4]=a*s-l*o+r*o-i*s+i,t[5]=l*s+a*o-i*o-r*s+r,t}function Rs(t,e){Ki&&"left"in Ki?(Ki.left!=null&&Ki.left>t&&(Ki.left=t),(Ki.right==null||Ki.right<t)&&(Ki.right=t),(Ki.top==null||Ki.top>e)&&(Ki.top=e),(Ki.bottom==null||Ki.bottom<e)&&(Ki.bottom=e)):Ki={left:t,bottom:e,right:t,top:e}}function Cne(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)Rs(e[r],e[r+1]);ei.x=e[i-2],ei.y=e[i-1];break;case"H":for(r=0;r<i;++r)Rs(e[r],ei.y);ei.x=e[i-1];break;case"V":for(r=0;r<i;++r)Rs(ei.x,e[r]);ei.y=e[i-1];break;case"m":{let n=0;for(("x"in ei)||(Rs(ei.x=e[0],ei.y=e[1]),n=2),r=n;r<i;r+=2)Rs(ei.x+=e[r],ei.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)Rs(ei.x+=e[r],ei.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)Rs(ei.x+=e[r],ei.y);break;case"v":for(r=0;r<i;++r)Rs(ei.x,ei.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)Rs(ei.x+e[r],ei.y+e[r+1]),Rs(ei.x+e[r+2],ei.y+e[r+3]),Rs(ei.x+=e[r+4],ei.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)Rs(ei.x+e[r],ei.y+e[r+1]),Rs(ei.x+=e[r+2],ei.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)Rs(e[r+5],e[r+6]);ei.x=e[i-2],ei.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)Rs(ei.x+=e[r+5],ei.y+=e[r+6])}}function Mne(t,e,i){const r=kct[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),Cne(n)):(n={action:t,args:[]},i.push(n),Cne(n)))}function Pct(t){const e=(typeof t.path!="string"?OOe(t.path):t.path).match(Cct),i=[];if(Ki={},ei={},!e)return null;let r="",n=[];const s=e.length;for(let a=0;a<s;++a){const l=e[a],u=parseFloat(l);isNaN(u)?(r&&Mne(r,n,i),n=[],r=l):n.push(u)}Mne(r,n,i);const o={x:0,y:0,width:0,height:0};return Ki&&"left"in Ki&&(o.x=Ki.left,o.y=Ki.top,o.width=Ki.right-Ki.left,o.height=Ki.bottom-Ki.top),o}function xOe(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=Pct(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function $Oe(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of t)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),r=Math.max(r,s.x+s.width),n=Math.max(n,s.y+s.height)):(i=e,i.x=s.x,i.y=s.y,r=s.x+s.width,n=s.y+s.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function bU(t,e,i,r,n,s,o,a,l){let u=(o&&s?wf(s,e):e)/2,p=(o&&s?wf(s,i):i)/2;if(l){const E=l[0],k=l[1];u=(o&&s?wf(s,E):E)/2,p=(o&&s?wf(s,k):k)/2}const m=t.width+r,g=t.height+r,w=tI(),O=tI();let _=!1;if(n&&m!==0&&g!==0){const E=e!==i?e/i:m/g,k=e>i?e:i;let M=1,R=1;isNaN(k)||(E>1?(M=k/m,R=k/E/g):(R=k/g,M=k*E/m)),Ky(O,O,kne(w,M,R,u,p)),_=!0}const x=t.x+(m-r)/2,T=t.y+(g-r)/2;if(Ky(O,O,Ene(w,u-x,p-T)),!_&&(m>e||g>i)){const E=m/e>g/i,k=(E?e:i)/(E?m:g);Ky(O,O,kne(w,k,k,x,T))}return a&&Ky(O,O,Ene(w,a[0],a[1])),s&&Ky(O,O,Ict(w,s,x,T)),`matrix(${O[0]},${O[1]},${O[2]},${O[3]},${O[4]},${O[5]})`}function Rct(t,e,i){const r=t==null?void 0:t.effects.find(u=>u.type==="bloom");if(!r)return null;const{strength:n,radius:s}=r,o=n>0?s:0,a=(n+o)*e,l=4*n+1;return P("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},P("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*o)*(5**(e/100)*(.4+e/100)),result:"dilate"}),P("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:a/25}),P("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:a/50}),P("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},P("feFuncR",{slope:l,type:"linear"}),P("feFuncG",{slope:l,type:"linear"}),P("feFuncB",{slope:l,type:"linear"})),P("feMerge",null,P("feMergeNode",{in:"intensityBlur"}),P("feMergeNode",{in:"intensityBrightness"}),P("feGaussianBlur",{stdDeviation:n/10})))}function TOe(t,e,i,r={}){var g,w,O;const n=[],s=[],o=$ct(),a=Rct(r.effectView,e,o);let l=null;if(a){const _=(g=r.effectView)==null?void 0:g.effects.find(k=>k.type==="bloom"),x=(_.strength?_.strength+_.radius/2:0)/3,T=e+e*x,E=i+i*x;l=[Math.max(T,10),Math.max(E,10)]}let u=e,p=i;if(r.useRotationSize)for(let _=0;_<t.length;_++){const x=((w=r.rotations)==null?void 0:w[_])??0;u=Math.max(wf(x,e),u),p=Math.max(wf(x,i),p)}for(let _=0;_<t.length;_++){const x=t[_],T=[],E=[];let k=0,M=0,R=0;for(const j of x){const{shape:B,fill:W,stroke:ie,font:oe,offset:ae}=j;r.ignoreStrokeWidth||B.type==="text"||(k+=(ie==null?void 0:ie.width)||0);const Ee=rB(W),ue=nB(ie),he=B.type==="text"?SOe(B,oe):null;n.push(_Oe(Ee)),T.push(iB(B,Ee.fill,ue,he,r.ariaLabel)),E.push(xOe(B)),ae&&(M+=ae[0],R+=ae[1])}const D=((O=r.rotations)==null?void 0:O[_])??0;r.useRotationSize&&(M+=(u-wf(D,e))/2,R+=(p-wf(D,i))/2);const L=bU($Oe(E),e,i,k,r.scale??!1,D,r.useRotationSize??!1,[M,R],l);let F=null;if(r.masking){const j=`mask-${_}`,B=r.masking[_];n.push(Act(B,j)),F=`url(#${j})`}s.push(F?P("g",{mask:F},P("g",{transform:L},T)):P("g",{transform:L},T))}return a&&(i2(l),u=l[0],p=l[1]),P("svg",{"aria-label":r.ariaLabel,focusable:!1,height:p,role:"img",style:"display: block;",width:u,xmlns:Tct},a,P("defs",null,n),a?P("g",{filter:`url(#bloom${o})`},s):s)}const Lct=new xe("white");function Nct(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function Dct(t){var e;if(!t)return 0;if(Dc(t)){const i=Nct(t);return i??0}return $s((e=q$(t))==null?void 0:e.width)}function e3(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function Vct(t){var e;return((e=t.resource)==null?void 0:e.href)??""}function T$t(t,e){if(!t)return null;let i=null;return Dc(t)?i=Fct(t):oR(t)&&(i=t.type==="cim"?lOe(t):t.color?new xe(t.color):null),i?G$(i,e):null}function Fct(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new xe(i):null}function G$(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new xe(i)}function jct(t,e,i){const r=t.symbolLayers;if(!r)return;const n=s=>G$(e=e??s??(i!=null?Lct:null),i);r.forEach(s=>{var o,a;if(s.type!=="object"||!((o=s.resource)!=null&&o.href)||e)if(s.type==="water")s.color=n(s.color);else{const l=s.material!=null?s.material.color:null,u=n(l);s.material==null?s.material=new To({color:u}):s.material.color=u,i!=null&&"outline"in s&&((a=s.outline)==null?void 0:a.color)!=null&&(s.outline.color=G$(s.outline.color,i))}})}function zct(t,e,i){var r;(e=e??t.color)&&(t.color=G$(e,i)),i!=null&&"outline"in t&&((r=t.outline)!=null&&r.color)&&(t.outline.color=G$(t.outline.color,i))}function i4(t,e,i){t&&(e||i!=null)&&(e&&(e=new xe(e)),Dc(t)?jct(t,e,i):oR(t)&&zct(t,e,i))}async function Uct(t,e){const i=t.symbolLayers;i&&await _Ce(i,async r=>Qct(r,e))}async function Qct(t,e){switch(t.type){case"extrude":qct(t,e);break;case"icon":case"line":case"text":Bct(t,e);break;case"path":Zct(t,e);break;case"object":await Gct(t,e)}}function Bct(t,e){const i=EOe(e);i!=null&&(t.size=i)}function EOe(t){for(const e of t)if(typeof e=="number")return e;return null}function qct(t,e){t.size=typeof e[2]=="number"?e[2]:0}async function Gct(t,e){const{resourceSize:i,symbolSize:r}=await Hct(t),n=kOe(e,i,r);t.width=Fx(e[0],r[0],i[0],n),t.depth=Fx(e[1],r[1],i[1],n),t.height=Fx(e[2],r[2],i[2],n)}function Zct(t,e){const i=kOe(e,Dce,[t.width,void 0,t.height]);t.width=Fx(e[0],t.width,1,i),t.height=Fx(e[2],t.height,1,i)}function kOe(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const s=i[r];return s!=null?s/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return 1}async function Hct(t){const{computeObjectLayerResourceSize:e}=await J(()=>import("./symbolLayerUtils-DN3da6oO.js"),[]),i=await e(t,10),{width:r,height:n,depth:s}=t,o=[r,s,n];let a=1;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function Fx(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function Wct(t,e){const i=EOe(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function Xct(t,e){if(t&&e)return Dc(t)?Uct(t,e):void(oR(t)&&Wct(t,e))}function Yct(t,e,i){if(t&&e!=null)if(Dc(t)){const r=t.symbolLayers;r&&r.forEach(n=>{if(n.type==="object")switch(i){case"tilt":n.tilt=(n.tilt??0)+e;break;case"roll":n.roll=(n.roll??0)+e;break;default:n.heading=(n.heading??0)+e}n.type==="icon"&&(n.angle+=e)})}else oR(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle+=e))}function Y2(t){if(!t)return null;const e=t.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return pI(e)}function E$t(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some(e=>e.type==="extrude")}const Ane=UA();function Jct(t,e){Ane.append(t,e),Ane.detach(e)}function J2(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some(o=>!!o.length))return null;const s=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(s.style.opacity=i.opacity.toString()),i.effectView!=null&&(s.style.filter=Y2(i.effectView)),Jct(s,()=>TOe(t,r,n,i)),s}function Kct(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function eht(t,e,i){return t?bt(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.width,o=n.height,a=s/o;let l=e;if(i){const u=Math.max(s,o);l=Math.min(l,u)}return{image:n,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new G("renderUtils: imageDataSize","href not provided."))}function tht(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function iht(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const s=KR({r:t[e],g:t[e+1],b:t[e+2]});s.h=r.h,s.s=r.s,s.v=s.v/100*r.v;const o=g0(s);t[e]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]*=i[3];break}}}function rht(t,e,i,r,n){return eht(t,e,n).then(s=>{const o=s.width??e,a=s.height??e;if(s.image&&tht(i,r)){let l=s.image.width,u=s.image.height;te("edge")&&/\.svg$/i.test(t)&&(l-=1,u-=1);const p=Kct(o,a);p.drawImage(s.image,0,0,l,u,0,0,o,a);const m=p.getImageData(0,0,o,a),g=[i.r/255,i.g/255,i.b/255,i.a],w=KR(i);for(let O=0;O<m.data.length;O+=4)iht(m.data,O,g,w,r);p.putImageData(m,0,0),t=p.canvas.toDataURL("image/png")}else{const l=Ye==null?void 0:Ye.findCredential(t);if(l!=null&&l.token){const u=t.includes("?")?"&":"?";t=`${t}${u}token=${l.token}`}}return{url:t,width:o,height:a}}).catch(()=>({url:t,width:e,height:e}))}const nht=["web-gltf","web","cim"],COe="esri-relationship-ramp",vv=`${COe}--diamond`,dp=`${COe}--square`,sht="http://www.w3.org/2000/svg",vi={diamondContainer:`${vv}__container`,diamondLeftCol:`${vv}__left-column`,diamondRightCol:`${vv}__right-column`,diamondMidCol:`${vv}__middle-column`,diamondMidColLabel:`${vv}__middle-column--label`,diamondMidColRamp:`${vv}__middle-column--ramp`,squareTable:`${dp}__table`,squareTableRow:`${dp}__table-row`,squareTableCell:`${dp}__table-cell`,squareTableLabel:`${dp}__table-label`,squareTableLabelLeftBottom:`${dp}__table-label--left-bottom`,squareTableLabelRightBottom:`${dp}__table-label--right-bottom`,squareTableLabelLeftTop:`${dp}__table-label--left-top`,squareTableLabelRightTop:`${dp}__table-label--right-top`};function MOe(t,e,i={}){const{focus:r,labels:n}=t,s=!!r,o=oht(t,e,i),a={justifyContent:"center"},l=S2(),u=i.key??e;return s?P("div",{class:vi.diamondContainer,key:`${u}-container`,styles:a},P("div",{class:vi.diamondLeftCol},l?n.right:n.left),P("div",{class:vi.diamondMidCol},P("div",{class:vi.diamondMidColLabel},n.top),o,P("div",{class:vi.diamondMidColLabel},n.bottom)),P("div",{class:vi.diamondRightCol},l?n.left:n.right)):P("div",{class:vi.squareTable,key:`${u}-container`},P("div",{class:vi.squareTableRow},P("div",{class:zb(vi.squareTableCell,vi.squareTableLabel,vi.squareTableLabelRightBottom)},l?n.top:n.left),P("div",{class:vi.squareTableCell}),P("div",{class:zb(vi.squareTableCell,vi.squareTableLabel,vi.squareTableLabelLeftBottom)},l?n.left:n.top)),P("div",{class:vi.squareTableRow},P("div",{class:vi.squareTableCell}),o,P("div",{class:vi.squareTableCell})),P("div",{class:vi.squareTableRow},P("div",{class:zb(vi.squareTableCell,vi.squareTableLabel,vi.squareTableLabelRightTop)},l?n.right:n.bottom),P("div",{class:vi.squareTableCell}),P("div",{class:zb(vi.squareTableCell,vi.squareTableLabel,vi.squareTableLabelLeftTop)},l?n.bottom:n.right)))}function Ine(t,e,i){const r=`${i}_arrowStart`,n=`${i}_arrowEnd`,s=t==="left",o={markerStart:null,markerEnd:null};switch(e){case"HL":s?o.markerStart=`url(#${n})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${n})`;break;case"LH":s?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${n})`;break;default:o.markerEnd=`url(#${r})`}return o}function oht(t,e,i={}){const{focus:r,numClasses:n,colors:s,rotation:o}=t,{opacity:a,effectList:l,ariaLabel:u}=i,p=i.size??60,m=!!r,g=Math.sqrt(p**2+p**2)+(m?0:5),w=[],O=[],_=[],x=(p||75)/n;for(let W=0;W<n;W++){const ie=W*x;for(let oe=0;oe<n;oe++){const ae=oe*x,Ee=rB(s[W][oe]),ue=nB(null),he={type:"rect",x:ae,y:ie,width:x,height:x},ye=_Oe(Ee);ye&&w.push(ye);const Ae=iB(he,Ee.fill,ue,null);Ae&&O.push(Ae),_.push(xOe(he))}}const T=15,E=15,k=10;let M=null;m||(M="margin: -15px -15px -18px -15px");const R=Ine("left",r,e),D=Ine("right",r,e),L=$Oe(_),F=bU(L,g,g,0,!1,o,!1),j=bU(L,g,g,0,!1,m?-45:null,!1),B={filter:Y2(l)??void 0,opacity:a==null?"":`${a}`};return P("div",{class:m?vi.diamondMidColRamp:vi.squareTableCell,styles:B},P("svg",{"aria-label":u,focusable:!1,height:g,role:"image",style:M,width:g,xmlns:sht},P("defs",null,P("marker",{id:`${e}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},P("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),P("marker",{id:`${e}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},P("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),w),P("g",{transform:F},O),P("g",{transform:j},P("line",{fill:"none","marker-end":R.markerEnd,"marker-start":R.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:p-T,y2:T}),P("line",{fill:"none","marker-end":D.markerEnd,"marker-start":D.markerStart,stroke:"#555555","stroke-width":"1",x1:E,x2:p-E,y1:p+k,y2:p+k}))))}function aht(t){return t=t||globalThis.location.hostname,lht.some(e=>(t==null?void 0:t.match(e))!=null)}function Pne(t,e){return t?(e=e||globalThis.location.hostname)?e.match(AOe)!=null||e.match(POe)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(IOe)!=null||e.match(ROe)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}const AOe=/^devext\.arcgis\.com$/,IOe=/^qaext\.arcgis\.com$/,POe=/^[\w-]*\.mapsdevext\.arcgis\.com$/,ROe=/^[\w-]*\.mapsqa\.arcgis\.com$/,lht=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,AOe,IOe,/^jsapps\.esri\.com$/,POe,ROe];function LOe(t,e,i){const r=t.name;return r==null?Promise.reject(new G("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?uht(r,e,i):jye(t,e,i).then(n=>DOe(n,r,e,qGe,i))}function NOe(t,e){return e.items.find(i=>i.name===t)}async function DOe(t,e,i,r,n){var x,T;const s=(i==null?void 0:i.portal)!=null?i.portal:Lr.getDefault(),o={portal:s,url:xr(t.baseUrl)},a=NOe(e,t.data);if(!a)throw new G("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const l=(n==null?void 0:n.acceptedFormats)??nht,u=r(a,l);if(!u)throw new G("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${l})`,{symbolName:e});const{url:p,format:m}=u;let g=Vf(p,o),w=((x=a.thumbnail)==null?void 0:x.href)??null;const O=(T=a.thumbnail)==null?void 0:T.imageData;aht()&&(g=Pne(g)??"",w=Pne(w));const _={portal:s,url:xr(zQ(g)),origin:"portal-item"};return j9(g,n).then(E=>{const k=m==="cim"?zye(E.data):E.data,M=Dye(k,_);if(M&&Dc(M)){if(w){const R=Vf(w,o);M.thumbnail=new _g({url:R})}else O&&(M.thumbnail=new _g({url:`data:image/png;base64,${O}`}));t.styleUrl?M.styleOrigin=new d$({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(M.styleOrigin=new d$({portal:i.portal,styleName:t.styleName,name:e}))}return M})}function uht(t,e,i){const r=GGe.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:Lr.getDefault();return j9(r,i).then(s=>{const o=zye(s.data);return Dye(o,{portal:n,url:xr(zQ(r)),origin:"portal-item"})})}const cht=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:DOe,getStyleItemFromStyle:NOe,resolveWebStyleSymbol:LOe},Symbol.toStringTag,{value:"Module"})),sg=Kr.size,UM=Kr.maxSize,sB=Kr.maxOutlineSize,Rne=Kr.lineWidth,wU=Kr.tallSymbolWidth;function Wb(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=wi(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,sB),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?tB(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function hht(t,e){var r,n,s;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((n=e==null?void 0:e.resource)==null?void 0:n.href))return Vct(e);const i=zi("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const o=await LOe(t.styleOrigin,{portal:t.styleOrigin.portal}).catch(()=>null);if(o&&"thumbnail"in o&&((s=o.thumbnail)!=null&&s.url))return o.thumbnail.url}return i}function r4(t,e=1){const i=t.a,r=KR(t),n=r.h,s=r.s/e,o=100-(100-r.v)/e,{r:a,g:l,b:u}=g0({h:n,s,v:o});return[a,l,u,i]}function rP(t){var e;return t.type==="water"?t.color==null?null:t.color:((e=t.material)==null?void 0:e.color)==null?null:t.material.color}function qt(t,e=0){const i=rP(t);if(!i){if(t.type==="fill")return null;const n=bct.r,s=Ef(n,e);return[s,s,s,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=Ef(r[n],e);return r}async function VOe(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await vct(zi(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function Lne(t){return t.outline?Wb(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function oB(t,e){const i=rP(t);if(!i)return null;let r="rgba(";return r+=Ef(i.r,e)+",",r+=Ef(i.g,e)+",",r+=Ef(i.b,e)+",",r+i.a+");"}function OU(t,e){const i=oB(t,e);return i?"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?wi(t.size):.75,sB),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?tB(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?wi(2):t.join:null}:{}}function Gk(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function dht(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function pht(t,e,i){var n,s;const r=[];if(!t)return r;switch(t.type){case"icon":{const l=e,u=e;switch(((n=t.resource)==null?void 0:n.primitive)??YVe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:qt(t,0),stroke:Wb(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,u]},{command:"L",values:[0,0]},{command:"L",values:[l,0]},{command:"L",values:[l,u]},{command:"Z",values:[]}]},fill:qt(t,0),stroke:Wb(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,u]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,u]},{command:"Z",values:[]}]},fill:qt(t,0),stroke:Wb(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*l,0]},{command:"L",values:[.5*l,u]},{command:"M",values:[0,.5*u]},{command:"L",values:[l,.5*u]}]},stroke:Lne(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[l,u]},{command:"M",values:[l,0]},{command:"L",values:[0,u]}]},stroke:Lne(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,.5*u]},{command:"L",values:[.5*l,u]},{command:"Z",values:[]}]},fill:qt(t,0),stroke:Wb(t)})}break}case"object":switch(((s=t.resource)==null?void 0:s.primitive)??iFe){case"cone":{const o=Gk(qt(t,0),qt(t,-.6),i?wU:e),a=Zut(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o});break}case"inverted-cone":{const o=qt(t,0),a=Gk(o,qt(t,-.6),e),l=Hut(e);r.push({shape:l[0],fill:a},{shape:l[1],fill:o});break}case"cube":{const o=qut(e,i);r.push({shape:o[0],fill:qt(t,0)},{shape:o[1],fill:qt(t,-.3)},{shape:o[2],fill:qt(t,-.5)});break}case"cylinder":{const o=Gk(qt(t,0),qt(t,-.6),i?wU:e),a=Gut(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o},{shape:a[2],fill:qt(t,0)});break}case"diamond":{const o=Wut(e);r.push({shape:o[0],fill:qt(t,-.3)},{shape:o[1],fill:qt(t,0)},{shape:o[2],fill:qt(t,-.3)},{shape:o[3],fill:qt(t,-.7)});break}case"sphere":{const o=Gk(qt(t,0),qt(t,-.6));o.x1=0,o.y1=0,o.x2=.25*e,o.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:o});break}case"tetrahedron":{const o=Xut(e);r.push({shape:o[0],fill:qt(t,-.3)},{shape:o[1],fill:qt(t,0)},{shape:o[2],fill:qt(t,-.6)});break}}break}return r}function t3(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?wi(e):null}function fht(t){return t.type==="icon"?"multiply":"tint"}async function mht(t,e){const i=t3(e),r=e!=null&&e.maxSize?wi(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,s=t.symbolLayers,o=[],a=[];let l=!1,u=0,p=0,m=0;s.forEach(O=>{var E,k,M,R;if(O.type!=="icon"&&O.type!=="object")return;O&&O.type==="icon"&&(m=Math.max(O.size&&wi(O.size),m));const _=O.type==="icon"?O.size&&wi(O.size):0,x=i||_?Math.ceil(Math.min(i||_,r||UM)):sg;let T=O.type==="icon"?O.angle:null;if((e==null?void 0:e.rotation)!=null&&(T=(T??0)+e.rotation),a.push(T),(E=O==null?void 0:O.resource)==null?void 0:E.href){const D=hht(t,O).then(L=>{var B;const F=(B=O==null?void 0:O.material)==null?void 0:B.color,j=fht(O);return rht(L,x,F,j,n)}).then(L=>{const F=L.width,j=L.height;return u=Math.max(u,F),p=Math.max(p,j),T&&(l=!0),[{shape:{type:"image",x:0,y:0,width:F,height:j,src:L.url},fill:null,stroke:null}]});o.push(D)}else{let D=x;O.type==="icon"&&i&&(D=x*(_/m));const L=(e==null?void 0:e.symbolConfig)==="tall"||((k=e==null?void 0:e.symbolConfig)==null?void 0:k.isTall)||O.type==="object"&&dht(O);u=Math.max(u,L?wU:D),p=Math.max(p,D),T&&((M=O.resource)!=null&&M.primitive)&&["square","triangle","x"].includes((R=O.resource)==null?void 0:R.primitive)&&(l=!0),o.push(Promise.resolve(pht(O,D,L)))}});const g=await Promise.allSettled(o),w=[];return g.forEach(O=>{O.status==="fulfilled"?w.push(O.value):O.reason&&pe.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",O.reason)}),J2(w,[u,p],{node:e==null?void 0:e.node,scale:!1,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel,rotations:a,useRotationSize:l})}function yht(t,e){const i=t.symbolLayers,r=[],n=e3(t),s=t3(e),o=(e!=null&&e.maxSize?wi(e.maxSize):null)||sB;let a,l=0,u=0;return i.forEach((p,m)=>{if(!p||p.type!=="line"&&p.type!=="path")return;const g=[];switch(p.type){case"line":{const w=OU(p,0);if(w==null)break;const O=(w==null?void 0:w.width)||0;m===0&&(a=O);const _=Math.min(s||O,o),x=m===0?_:s?_*(O/a):_,T=x>Rne/2?2*x:Rne;u=Math.max(u,x),l=Math.max(l,T),w.width=x,g.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[l,.5*u]}]},stroke:w});break}case"path":{const w=Math.min(s||sg,o),O=qt(p,0),_=qt(p,-.2),x=oB(p,-.4),T=x?{color:x,width:1}:{};if(p.profile==="quad"){const E=p.width,k=p.height,M=Uut(E&&k?E/k:1,k===0,E===0),R={...T,join:"bevel"};g.push({shape:M[0],fill:_,stroke:R},{shape:M[1],fill:_,stroke:R},{shape:M[2],fill:O,stroke:R})}else g.push({shape:Vx.pathSymbol3DLayer[0],fill:_,stroke:T},{shape:Vx.pathSymbol3DLayer[1],fill:O,stroke:T});u=Math.max(u,w),l=u}}r.push(g)}),Promise.resolve(J2(r,[l,u],{node:e==null?void 0:e.node,scale:n,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function ght(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=t3(e),s=e!=null&&e.maxSize?wi(e.maxSize):null,o=n||sg,a=[];let l=0,u=0,p=!1;for(let m=0;m<r.length;m++){const g=r.at(m),w=[];if(!i||g.type==="fill"){switch(g.type){case"fill":{const O=Math.min(o,s||UM);if(l=Math.max(l,O),u=Math.max(u,O),p=!0,i){const _=Vx.meshSymbol3DFill,x=oB(g,-.4),T=x?{color:x,width:1,join:"round"}:{};w.push({shape:_[0],fill:qt(g,0),stroke:T},{shape:_[1],fill:qt(g,-.2),stroke:T},{shape:_[2],fill:qt(g,-.6),stroke:T})}else{let _=qt(g,0);const x="pattern"in g?g.pattern:null,T=Wb(g),E=rP(g);x!=null&&x.type==="style"&&x.style!=="solid"&&E&&(_=await VOe(x,E)),w.push({shape:Vx.fill[0],fill:_,stroke:T})}break}case"line":{const O=OU(g,0);if(O==null)break;const _={stroke:O,shape:Vx.fill[0]};l=Math.max(l,sg),u=Math.max(u,sg),w.push(_);break}case"extrude":{const O={join:"round",width:1,...OU(g,-.4)},_=qt(g,0),x=qt(g,-.2),T=Math.min(o,s||UM),E=Qut(T);O.width=1,w.push({shape:E[0],fill:x,stroke:O},{shape:E[1],fill:x,stroke:O},{shape:E[2],fill:_,stroke:O});const k=sg,M=.7*sg+.5*T;l=Math.max(l,k),u=Math.max(u,M);break}case"water":{const O=rP(g),_=r4(O),x=r4(O,2),T=r4(O,3),E=But();p=!0,w.push({shape:E[0],fill:_},{shape:E[1],fill:x},{shape:E[2],fill:T});const k=Math.min(o,s||UM);l=Math.max(l,k),u=Math.max(u,k);break}}a.push(w)}}return J2(a,[l,u],{node:e==null?void 0:e.node,scale:p,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function vht(t,e){if(t.symbolLayers.length===0)return Promise.reject(new G("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return mht(t,e);case"line-3d":return yht(t,e);case"polygon-3d":case"mesh-3d":return ght(t,e)}return Promise.reject(new G("symbolPreview: swatchInfo3D","symbol not supported."))}const bht=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:VOe,getSizeFromOptions:t3,getSymbolLayerFill:qt,previewSymbol3D:vht},Symbol.toStringTag,{value:"Module"})),Nne={HH:315,HL:45,LL:135,LH:225},wht={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Oht(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return qt(t.symbolLayers.at(0));if(e==="simple-line"){const i=q$(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=q$(t);return i&&i.color}return gct(t)}function Sht(t,e){const i=e.HH.label,r=e.LL.label,n=e.HL.label,s=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:n,right:s};case"HL":return{top:n,bottom:s,left:r,right:i};case"LL":return{top:r,bottom:i,left:s,right:n};case"LH":return{top:s,bottom:n,left:i,right:r}}}function _ht(t){const{focus:e,infos:i,numClasses:r}=t,n=wht[r],s={};i.forEach(a=>{s[a.value]={label:a.label,fill:Oht(a.symbol)}});const o=[];for(let a=0;a<r;a++){const l=[];for(let u=0;u<r;u++){const p=s[n[a][u]];l.push(p.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:o,labels:Sht(e,s),rotation:FOe(e)}}function FOe(t){let e=Nne[t];return t&&e==null&&(e=Nne.HH),e||0}let bv=null;const Dne=[255,255,255];function Vne(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function xht(t,e,i){const{backgroundColor:r,outline:n,dotSize:s}=t,o=(i==null?void 0:i.swatchSize)||Kr.size,a=.8,l=Math.round(o*o/Math.max(s,.5)**2*a),u=window.devicePixelRatio,p=document.createElement("canvas"),m=o*u;p.width=m,p.height=m,p.style.width=p.width/u+"px",p.style.height=p.height/u+"px";const g=p.getContext("2d");if(r&&(g.fillStyle=r.toCss(!0),g.fillRect(0,0,m,m),g.fill()),g.fillStyle=(e==null?void 0:e.toCss(!0))??"",bv&&bv.length/2===l)for(let O=0;O<2*l;O+=2){const _=bv[O],x=bv[O+1];g.fillRect(_,x,s*u,s*u),g.fill()}else{bv=[];for(let O=0;O<2*l;O+=2){const _=Vne(0,m),x=Vne(0,m);bv.push(_,x),g.fillRect(_,x,s*u,s*u),g.fill()}}n&&(n.color&&(g.strokeStyle=n.color.toCss(!0)),g.lineWidth=n.width,g.strokeRect(0,0,m,m));const w=new Image(o,o);return w.src=p.toDataURL(),w.ariaLabel=(i==null?void 0:i.ariaLabel)??null,w.alt=(i==null?void 0:i.ariaLabel)??"",w}function $ht(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,s=r/n,o=[],a=q$(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,u=l&&l.length===n&&l.reduce((O,_)=>O+_,0)===100,p=[0];for(let O=0;O<n;O++){let _=null;u&&(_=l[O]*r/100,p.push(_+p[O])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(_??s)/2} ${r}`,dashoffset:"-"+(u?p[O]/2:O*(s/2)),color:t[O]},offset:[0,0]})}let m=null;const g=2*i+((a==null?void 0:a.width)||0),w=e.holePercentage;if(w){a&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*w},fill:null,stroke:a,offset:[0,0]});const O=g/2;m=[[{shape:{type:"circle",cx:O,cy:O,r:O},fill:Dne,stroke:a?{...a,color:Dne}:null,offset:[0,0]},{shape:{type:"circle",cx:O,cy:O,r:i*w},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return J2([o],[g,g],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:m,rotations:[-90],ariaLabel:e.ariaLabel})}function jy(t,e={}){const n=e.align==="horizontal",s=n?75:24,o=n?24:75,a=e.width??s,l=e.height??o,u=e.gradient??!0,p=window.devicePixelRatio,m=a*p,g=l*p,w=document.createElement("canvas");w.width=m,w.height=g,w.ariaLabel=e.ariaLabel??null,w.style.width=`${a}px`,w.style.height=`${l}px`;const O=w.getContext("2d"),_=n?m:0,x=n?0:g;if(u){const E=O.createLinearGradient(0,0,_,x),k=t.length,M=k===1?0:1/(k-1);t.forEach((R,D)=>E.addColorStop(D*M,R.toString())),O.fillStyle=E,O.fillRect(0,0,m,g)}else{const E=n?m/t.length:m,k=n?g:g/t.length;let M=0,R=0;for(const D of t)O.fillStyle=D.toString(),O.fillRect(M,R,E,k),M=n?M+E:0,R=n?0:R+k}const T=document.createElement("div");return T.style.width=`${a}px`,T.style.height=`${l}px`,Tht(T,e==null?void 0:e.effectList),T.appendChild(w),T}function Tht(t,e){if(!e)return;t.style.filter=Y2(e);const i=e.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?t.style.marginLeft=`${Math.abs(r.offsetX)}px`:t.style.marginRight=`${r.offsetX}px`;break}}}async function jOe(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await J(()=>import("./previewWebStyleSymbol-D8m9WRZ0.js"),[]);return i(t,jOe,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await J(()=>Promise.resolve().then(()=>bht),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await J(()=>import("./previewSymbol2D-DAlyz8lp.js"),__vite__mapDeps([262,69,4]));return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await J(()=>import("./previewCIMSymbol-Cb59vE95.js"),__vite__mapDeps([263,67,68,69,13,12,70,71,72,65,264,162,158,4]));return i(t,e)}default:return}}function zOe(t){return t&&"opacity"in t?t.opacity*zOe(t.parent):1}async function k$t(t,e){var k;if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=e!=null&&e.ignoreOpacity?1:zOe(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const M=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:["web","cim"],cache:e!=null?e.webStyleCache:null}):t.symbol.clone();return i4(M,null,n),M}const s=(e==null?void 0:e.renderer)??Eht(r);let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,cache:e!=null?e.webStyleCache:null}):o.clone(),!s||!("visualVariables"in s)||!((k=s.visualVariables)!=null&&k.length))return i4(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const M={...e};M.arcade=await Ec(),e=M}const{getColor:a,getOpacity:l,getAllSizes:u,getRotationAngle:p}=await J(()=>Promise.resolve().then(()=>m0),void 0),m=[],g=[],w=[],O=[];for(const M of s.visualVariables)switch(M.type){case"color":m.push(M);break;case"opacity":g.push(M);break;case"rotation":O.push(M);break;case"size":M.target||w.push(M)}const _=!!m.length&&m[m.length-1],x=_?a(_,t,e):null,T=!!g.length&&g[g.length-1];let E=T?l(T,t,e):null;if(n!=null&&(E=E!=null?E*n:n),e!=null&&e.ignoreOpacity&&(E=1),i4(o,x,E),w.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const M=u(w,t,e);await Xct(o,M)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const M of O)Yct(o,p(M,t,e),M.axis);return o}function Eht(t){if(t)return"renderer"in t?t.renderer:void 0}function kht(t,e,i){const r=t.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const n=r.visualVariables.find(p=>p.type==="size");if(!("stops"in n)||!n.stops)return null;const s=n.stops.find(p=>p.useMinValue),o=n.stops.find(p=>p.useMaxValue);if(s==null||o==null)return null;const a=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,l=n.field,u=e.getDisplayStatistics(a,l);return u?new DO({field:n.field,minSize:t.clusterMinSize,minDataValue:u.minValue,maxSize:t.clusterMaxSize,maxDataValue:u.maxValue}):null}const Cht=/^-?(\d+)(\.(\d+))?$/i;function Mht(t,e){return t-e}function Aht(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function Iht(t,e,i,r,n){const s=QM(t,e,i,r),o=s.previous==null||s.previous<=n,a=s.next==null||s.next<=n;return o&&a||s.previous+s.next<=2*n}function nP(t){const e=String(t),i=e.match(Cht);if(i!=null&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],s=r[1];if(n&&s){const o=Number(n);let a=Number(s);const l=a>0;l||(a=Math.abs(a));const u=nP(o);return l?(u.integer+=a,a>u.fractional?u.fractional=0:u.fractional-=a):(u.fractional+=a,a>u.integer?u.integer=1:u.integer-=a),u}}return{integer:0,fractional:0}}function QM(t,e,i,r){const n={previous:null,next:null};if(i!=null){const s=t-i,o=e-i-s;n.previous=Math.floor(Math.abs(100*o/s))}if(r!=null){const s=r-t,o=r-e-s;n.next=Math.floor(Math.abs(100*o/s))}return n}function sP(t,e={}){const i=t.slice(),{tolerance:r=2,strictBounds:n=!1,indexes:s=i.map((o,a)=>a)}=e;s.sort(Mht);for(let o=0;o<s.length;o++){const a=s[o],l=i[a],u=a===0?null:i[a-1],p=a===i.length-1?null:i[a+1],m=nP(l).fractional;if(m){let g,w=0,O=!1;for(;w<=m&&!O;){const _=Aht(l,w);g=n&&o===0?_[1]:_[0],O=Iht(l,g,u,p,r),w++}O&&(i[a]=g)}}return i}const Pht={maximumFractionDigits:20};function Rht(t){return pa(t,Pht)}const C$t=",",Lht={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},Nht=new Set(["integer","small-integer"]);let n4=null;function Dht(t){return j8(t)||sVe(t)||oVe(t)}async function M$t(t){const{field:e,field2:i,field3:r,normalizationField:n,valueExpression:s}=t;let o=[];if(s){if(!n4){const{arcadeUtils:a}=await Ec();n4=a}o=n4.extractFieldNames(s)}return e&&o.push(e),i&&o.push(i),r&&o.push(r),n&&o.push(n),o}function xS(t){return String(t).padStart(2,"0")}function Fne(t,e,i){let r;return e==="date"||e==="number"?(e==="number"&&(t=new Date(t)),r=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${xS((i?t.getMonth():t.getUTCMonth())+1)}-${xS(i?t.getDate():t.getUTCDate())} ${xS(i?t.getHours():t.getUTCHours())}:${xS(i?t.getMinutes():t.getUTCMinutes())}:${xS(i?t.getSeconds():t.getUTCSeconds())}'`):r=t,r}function A$t(t,e,i,r){const{hasQueryEngine:n}=t,s=`(${Fne(i,jne(t,i),n)} - ${Fne(e,jne(t,e),n)})`;let o=Lht[r],a="/";return o<1&&(o=1/o,a="*"),{sqlExpression:o===1?s:`(${s} ${a} ${o})`,sqlWhere:null}}function jne(t,e){if(e instanceof Date)return"date";if(typeof e=="number")return"number";if(typeof e=="string"){const i=t.getField(e);if(e.toLowerCase()==="<now>")return;if(j8(i))return"field"}}function I$t(t,e){const i=e&&t.getField(e);return!!i&&Nht.has(i.type)}function P$t(t){return`cast(${t} as float)`}function Vht(t,e){const{format:i,timeZoneOptions:r,fieldType:n}=e??{};let s,o;if(r&&({timeZone:s,timeZoneName:o}=a3e(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,Av(i||"short-date-short-time"),n)),typeof t=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(n){case"date-only":{const a=Av(i||"short-date");return typeof t=="string"?p3e(t,{...a}):rl(t,{...a,timeZone:$c})}case"time-only":{const a=Av(i||"short-time");return typeof t=="string"?f3e(t,a):rl(t,{...a,timeZone:$c})}case"timestamp-offset":{if(!s&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const a=i||r?Av(i||"short-date-short-time"):void 0,l=a?{...a,timeZone:s,timeZoneName:o}:void 0;return typeof t=="string"?m3e(t,l):rl(t,l)}default:{const a=i||r?Av(i||"short-date-short-time"):void 0;return rl(typeof t=="string"?new Date(t):t,a?{...a,timeZone:s,timeZoneName:o}:void 0)}}}const UOe="<",QOe=">";function BOe(t,e,i,r){let n="";return e===0?n=`${UOe} `:e===i&&(n=`${QOe} `),n+(r?Vht(t,r):Rht(t))}const Fht=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function SU(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(o=>o.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:s}=await J(async()=>{const{getColor:o}=await Promise.resolve().then(()=>m0);return{getColor:o}},void 0);return s(e,n)??null}async function qOe(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await SU(t)||t.color;return new es({cap:i,color:n,width:r})}function jht(t,e){var i,r;if(!e.field)return null;if("featureReduction"in t)switch((i=t.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find(({name:s})=>s.toLowerCase()===e.field.toLowerCase());return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?(r=t.getField)==null?void 0:r.call(t,e.field):null}function zht(t,e){var r,n,s;const i="popupTemplate"in t?(r=t.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&e)return(s=(n=i.find(o=>{var a;return((a=o.fieldName)==null?void 0:a.toLowerCase())===e.toLowerCase()}))==null?void 0:n.format)==null?void 0:s.dateFormat}function Uht(t,e,i){var s,o,a,l;const r=jht(t,e);if(!r||!Dht(r)&&!bde(r))return null;let n=zht(t,r.name);if(!n&&r.type==="date"){let u=0,p=0;e.stops?(u=((o=(s=e.stops)==null?void 0:s.at(0))==null?void 0:o.value)??u,p=((l=(a=e.stops)==null?void 0:a.at(-1))==null?void 0:l.value)??p):"minDataValue"in e&&"maxDataValue"in e&&(u=e.minDataValue??u,p=e.maxDataValue??p),n=p-u>2*DV.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:n,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}}}function _U(t){var e,i;if("authoringInfo"in t)return(i=(e=t.authoringInfo)==null?void 0:e.visualVariables)==null?void 0:i.find(({theme:r})=>r==="reference-size")}const Qht=new xe([64,64,64]);function GOe(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((n,s)=>i.includes(s)?BOe(n,s,r,e):null)}async function zne(t,e,i){let r=!1,n=[],s=[];if(t.stops){const u=t.stops;n=u.map(p=>p.value),r=u.some(p=>!!p.label),r&&(s=u.map(p=>p.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=r?null:GOe(n,i);return(await Promise.all(n.map(async(u,p)=>({value:u,color:t.type==="opacity"?await Bht(u,t,e):(await J(async()=>{const{getColor:m}=await Promise.resolve().then(()=>m0);return{getColor:m}},void 0)).getColor(t,u),label:r?s[p]:(l==null?void 0:l[p])??""})))).reverse()}async function Bht(t,e,i){const r=new xe(i??Qht),n=(await J(async()=>{const{getOpacity:s}=await Promise.resolve().then(()=>m0);return{getOpacity:s}},void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function qht(t){let e=!1,i=[],r=[];i=t.map(a=>a.value),e=t.some(a=>!!a.label),e&&(r=t.map(a=>a.label??""));const n=i[0],s=i[i.length-1];if(n==null&&s==null)return null;const o=e?null:GOe(i);return i.map((a,l)=>({value:a,color:ZOe(a,t),label:e?r[l]:(o==null?void 0:o[l])??""})).reverse()}function ZOe(t,e){const{startIndex:i,endIndex:r,weight:n}=Ght(t,e);if(i===r)return e[i].color;const s=xe.blendColors(e[i].color,e[r].color,n);return new xe(s)}function Ght(t,e){let i=0,r=e.length-1;return e.some((n,s)=>t<n.value?(r=s,!0):(i=s,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function Zht(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:e.max,color:new xe(r.toColor),label:"high"}):i.push({value:null,color:new xe(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new xe(r.fromColor),label:"low"}):i.push({value:null,color:new xe(r.fromColor),label:""})});else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new xe(n),label:"high"},{value:e.min,color:new xe(r),label:"low"}]}return i}function Hht(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=e.length-1;if(e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new kx({ratio:1,color:r.color})),i++)}return e.map((r,n)=>{var o,a;let s="";return n===0?s=((o=t.legendOptions)==null?void 0:o.minLabel)||"low":n===i&&(s=((a=t.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:s,ratio:r.ratio}}).reverse()}const xU=30,$U=12,TU=24,HOe=[255,255,255],aB=[200,200,200],Xb=[128,128,128],Wht=20,Xht=5;function Yht(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function Jht(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function Kht(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function edt(t){return t.declaredClass==="esri.symbols.TextSymbol"}function tdt(t,e){const i=t.length-1;return t.map((r,n)=>BOe(r,n,i,e))}async function idt(t,e,i,r,n,s,o){const a=e.legendOptions,l=a==null?void 0:a.customValues,u=o||await odt(t,i),p=e.stops,m=!!u,g=!!l,w=e.minSize!=null&&e.maxSize!=null,O=p&&p.length>1,_=!!e.target;if(!m||!g&&!(w||O&&!_))return;const x=e3(u);let T=!1,E=null,k=null;E=x&&!O?sP([e.minDataValue,e.maxDataValue]):l??await ldt(e,u,r,n==null?void 0:n.type);const M=t==null?void 0:t.authoringInfo,R=(M==null?void 0:M.type)==="univariate-color-size",D=R&&(M==null?void 0:M.univariateTheme)==="above-and-below",L=!!_U(t);if(!E&&O&&(E=p.map(W=>W.value),T=p.some(W=>!!W.label),t.type==="flow"&&(E=sP(E)),T&&(k=p.map(W=>W.label))),x&&E!=null&&(E==null?void 0:E.length)>2&&!D&&(E=[E[0],E[E.length-1]]),!E)return null;R&&(E==null?void 0:E.length)!==5&&(E=YOe({minSize:E[0],maxSize:E[E.length-1]}));const F=x?rdt(t,E):null,j=Dct(u),B=T?null:tdt(E,s);return(await Promise.all(E.map(async(W,ie)=>{const oe=x?F[ie]:await Rb(e,u,W,r,n==null?void 0:n.type);return{value:W,symbol:!L||t.type!=="class-breaks"&&t.type!=="unique-value"?hdt(D&&t.type==="class-breaks"?sdt(t,ie):u,oe):ndt(t,oe,e.maxSize,i)??u,label:T?k[ie]:B[ie],size:L?TU:oe,outlineSize:j}}))).reverse()}function rdt(t,e){const i=t==null?void 0:t.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let n=[$U,xU];if(r){const s=e[0],o=e[e.length-1],a=$U,l=xU;n=e.map(u=>a+(u-s)/(o-s)*(l-a))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&n.reverse(),n}function ndt(t,e,i,r){var o,a,l,u,p,m;const n=t.type==="class-breaks",s=n?(l=(a=(o=t.classBreakInfos)==null?void 0:o[0])==null?void 0:a.symbol)==null?void 0:l.clone():(m=(p=(u=t.uniqueValueInfos)==null?void 0:u[0])==null?void 0:p.symbol)==null?void 0:m.clone();return s&&"type"in s&&s.type==="cim"?(oOe(s,{color:r??(n?null:new xe(aB)),innerDotSize:e*(TU/i)||1,outerRingSize:TU}),s):null}function sdt(t,e){var o;const i=t.classBreakInfos,r=i.length,n=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return((o=t.visualVariables)==null?void 0:o.some(a=>a.type==="color"))&&(n.type.includes("3d")?WOe(n):XOe(n)),n}async function odt(t,e){var n,s;if(t.type==="flow")return qOe(t,e);if(t.type==="pie-chart")return new Jn({color:null,outline:(n=t.outline)!=null&&n.width?t.outline:new es});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const o=t.classBreakInfos;i=o&&o[0]&&o[0].symbol,r=o.length>1}else if(t.type==="unique-value"){const o=t.uniqueValueInfos;i=(s=o==null?void 0:o[0])==null?void 0:s.symbol,r=o!=null&&o.length>1}return!i||adt(i)?null:(i=i.clone(),(e||r)&&(i.type.includes("3d")?WOe(i):XOe(i)),i)}function adt(t){var e;return Dc(t)?((e=t.symbolLayers)==null?void 0:e.some(i=>(i==null?void 0:i.type)==="fill"))??!1:(t==null?void 0:t.type.includes("fill"))??!1}function WOe(t){t.type==="line-3d"?t.symbolLayers.forEach(e=>{e.material={color:Xb}}):t.symbolLayers.forEach(e=>{var i;e.type!=="icon"||(i=e.resource)!=null&&i.href?e.material={color:aB}:(e.material={color:HOe},e.outline={color:Xb,size:1.5})})}function XOe(t){var i,r;const e=fme();t.type==="cim"?uOe(t,new xe(aB)):t.type.includes("line")?t.color=Xb:(t.color=e?Xb:HOe,t.type==="simple-marker"&&(t.outline?((r=(i=t.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(t.outline.color=Xb):t.outline={color:Xb,width:1.5}))}async function ldt(t,e,i,r){const n=(await J(async()=>{const{getSizeRangeAtScale:a}=await Promise.resolve().then(()=>m0);return{getSizeRangeAtScale:a}},void 0)).getSizeRangeAtScale(t,i,r),s=n&&YOe(n);if(!n||!s)return;let o=s.map(a=>udt(a,t,n));o=sP(o);for(let a=1;a<o.length-1;a++){const l=await cdt(t,e,o[a],o[a-1],i,r);l&&(o[a]=l[0],s[a]=l[1])}return o}function YOe(t){const e=t.minSize,i=t.maxSize,r=Xht,n=(i-e)/(r-1),s=[];for(let o=0;o<r;o++)s.push(e+n*o);return s}function udt(t,e,i){const r=i.minSize,n=i.maxSize,s=e.minDataValue,o=e.maxDataValue;let a;return t<=r?a=s:t>=n?a=o:a=(t-r)/(n-r)*(o-s)+s,a}async function cdt(t,e,i,r,n,s){const o=await Rb(t,e,i,n,s),a=await Rb(t,e,r,n,s),l=nP(i),u=l.fractional,p=Wht;let m=l.integer,g=null,w=null;i>0&&i<1&&(g=10**u,m=nP(i*=g).integer);for(let O=m-1;O>=0;O--){const _=10**O;let x=Math.floor(i/_)*_,T=Math.ceil(i/_)*_;g!=null&&(x/=g,T/=g);let E=(x+T)/2;[,E]=sP([x,E,T],{indexes:[1]});const k=await Rb(t,e,x,n,s),M=await Rb(t,e,T,n,s),R=await Rb(t,e,E,n,s),D=QM(o,k,a,null),L=QM(o,M,a,null),F=QM(o,R,a,null);let j=D.previous<=p,B=L.previous<=p;if(j&&B&&(D.previous<=L.previous?(j=!0,B=!1):(B=!0,j=!1)),j?w=[x,k]:B?w=[T,M]:F.previous<=p&&(w=[E,R]),w)break}return w}async function Rb(t,e,i,r,n){const{getSize:s}=await J(()=>Promise.resolve().then(()=>m0),void 0);return s(t,i,{scale:r,view:n,shape:e.type==="simple-marker"?e.style:null})}function hdt(t,e){const i=t.clone();if(Dc(i))e3(i)||i.symbolLayers.forEach(r=>{r.type!=="fill"&&(r.size=e)});else if(Yht(i))i.size=e;else if(Jht(i)){const r=i.width,n=i.height;i.height=e,i.width=e*(r/n)}else Kht(i)?i.width=e:edt(i)&&i.font&&(i.font.size=e);return i}function ddt(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,n=1e6,s=Math.abs(t)>=n?"compact":"standard";return pa(t,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:r})}const Une=16,pdt="https://utility.arcgis.com/sharing/tools/legend",fdt="esri.layers.ImageryLayer",mdt="esri.layers.ImageryTileLayer",ydt="esri.layers.WCSLayer",Zk=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,gdt=new nt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Hk=new Jn({size:6,outline:{color:[128,128,128,.5],width:.5}}),vdt=new Nc({style:"solid"});function EU(t){return t.type==="flow"}function JOe(t){return t.type==="vector-field"}function KOe(t){return t.type==="raster-colormap"}function e1e(t){return t.type==="raster-stretch"}function t1e(t){return t.type==="raster-shaded-relief"}function Lb(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function zy(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function Uy(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function i1e(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function bdt(t){return lB(t)||uB(t)||cB(t)||wdt(t)}function wdt(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function lB(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function uB(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function cB(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function r1e(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function n1e(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function Odt(t,e){return Lb(t)||zy(t)||Uy(t)||i1e(t)||r1e(t)||n1e(t)?e.type==="2d"||nOe(t):e1e(t)||KOe(t)||t1e(t)||lB(t)||uB(t)||cB(t)||JOe(t)||EU(t)}function Sdt(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function s4(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function _dt(t){return t.declaredClass==="esri.layers.VoxelLayer"}function xdt(t){return t.declaredClass==="esri.layers.WMSLayer"}function $dt(t){return t.declaredClass==="esri.layers.WMTSLayer"}function o4(t){return t.declaredClass==="esri.layers.MapImageLayer"}function Qne(t){return t.declaredClass==="esri.layers.TileLayer"}function wv(t){return t.declaredClass===fdt}function Wk(t){return t.declaredClass===mdt}function Tdt(t){return t.declaredClass===ydt}function Edt(t){return t.type==="stretch-ramp"}function kdt(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"}function Cdt(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"&&(e==null?void 0:e.univariateTheme)==="above-and-below"}function Bne(t){return"sublayers"in t}async function gh(t,e){const i=await w8("esri/widgets/Legend/t9n/Legend");return t!=="previewTemplateAriaLabel"||e||(t="previewAriaLabel"),o$(i[t],{label:e})}function Mdt(t,e){const{field:i,field2:r,field3:n,fieldDelimiter:s,valueExpression:o}=t;if(!i)return null;const a=!i&&!o||!r&&!n?[e]:e==null?void 0:e.toString().split(s||""),l=i?{[i]:a==null?void 0:a[0]}:null;return l&&(r&&(l[r]=a==null?void 0:a[1]),n&&(l[n]=a==null?void 0:a[2])),l}const Adt=new Jn({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Ov={},Ir=class extends Ce{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new Te,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this.addHandles([Ss(()=>this.children,"change",e=>{const{added:i,removed:r}=e;i.forEach(n=>{const s=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(Oe(()=>n.ready,t,It),s)}),r.forEach(n=>this.removeHandles(n.layer.uid)),t()})]),this.keepCacheOnDestroy||(Ov={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Ov=null),this._layerDefinitionExpressionClause=null}get effectList(){const t=this.layer;let e=null;return"effect"in t&&t.effect&&(e=new eu,e.effect=t.effect,e.endTransition(),e.scale=this.scale),e}get opacity(){var n;const t=this.layer.opacity,e=(n=this.parent)==null?void 0:n.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return e!=null?e*t:r!=null?r*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var t;return((t=this.view)==null?void 0:t.scale)??0}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?!!("displayFilterInfo"in t&&t.displayFilterInfo&&Uy(t.renderer))||this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const e=Array.from(t,i=>{var r;if(xhe(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const n=i.layerDefinition,s=n==null?void 0:n.drawingInfo,o=s&&TWe(s.renderer),a=gdt.read(n.geometryType);return o?this._getRendererLegendElements(o,{title:i.name,geometryType:a}):(pe.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const i=[],r=await Promise.allSettled(e);for(const n of r)if(n.status==="fulfilled")for(const s of n.value??[])i.push(s);this.legendElements=i,this.notifyChange("ready")}catch(i){pe.getLogger(this).warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[],this.notifyChange("ready")}catch(e){pe.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForFeatureReduction(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[],this.notifyChange("ready")}catch(e){pe.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForTools(){var e,i;const t=this.layer;if(_dt(t))this._constructLegendElementsForVoxelLayer();else if($dt(t))this._constructLegendElementsForWMTSlayer();else if(xdt(t))await this._constructLegendElementsForWMSSublayers();else if(Sdt(t))await this._constructLegendElementsForBuildingSceneLayer();else if(o4(t)||Qne(t)||s4(t))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(wv(t)){const n=t;r=(((e=n==null?void 0:n.rasterFunction)==null?void 0:e.functionName)||"default")+"_"+((i=t.bandIds)!=null&&i.length?t.bandIds.join(""):"###")}if(Wk(t)||t.type==="link-chart")return;await this._getLegendLayers(`${t.uid}-${r}`).then(async n=>{this.legendElements=[],this.notifyChange("ready");const s=n.map(async o=>{if(wv(t)){const l=Oe(()=>[t.rasterFunction,t.bandIds],()=>l2(async()=>{Ov.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()})());this.addHandles(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a!=null&&a.infos.length&&(wv(t)&&(a.title=t.title),this.legendElements.push(a)),this.notifyChange("ready")});await Promise.allSettled(s)}).catch(n=>{pe.getLogger(this).warn("Request to server for legend has failed!",n)})}}async _isLayerInCurrentView(){const t=this.layer,e=this.layerView,i=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!i&&!(e&&"createQuery"in t&&"queryFeatureCount"in t))return!0;await l0(()=>!e.updating);const r=i?"createQuery"in e&&e.createQuery():"createQuery"in t&&t.createQuery();return r?(r.geometry=this.view.extent,(i?"queryFeatureCount"in e&&await e.queryFeatureCount(r):"queryFeatureCount"in t&&await t.queryFeatureCount(r))!==0):!0}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){return this.children.some(t=>t.ready)}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t?t.valueExpression:null;if(Zk.test(e))return!0;const i="visualVariables"in t?t.visualVariables:null;return!!(i!=null&&i.some(r=>this._isScaleDrivenSizeVariable(r)))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){var e;switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some(i=>this._isScaleDrivenSymbol(i.symbol));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!((e=t.uniqueValueInfos)!=null&&e.some(i=>this._isScaleDrivenSymbol(i.symbol)))}return!1}_isScaleDrivenSymbol(t){if((t==null?void 0:t.type)==="cim"){const{primitiveOverrides:e,minScale:i,maxScale:r}=t.data,n=(e==null?void 0:e.some(s=>{var o;return/\$view\.scale/.test(((o=s.valueExpressionInfo)==null?void 0:o.expression)||"")}))??!1;return i!=null||r!=null||n}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,i=e.minSize,r=e.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||Zk.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some(i=>this._isLayerScaleDriven(i));const e=t.parent;if(t.loaded===!1&&e&&o4(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const i of e.sourceJSON.layers??[])if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var s;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const t=this.layer;this.addHandles(Oe(()=>t.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(Oe(()=>t.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const e=t.getVariableStyle(null),i=[];if(e){if((s=e.uniqueValues)!=null&&s.length){const o=[];e.uniqueValues.forEach(a=>{a.enabled&&o.push({label:a.label||`${a.value}`,value:a.value,symbol:new Nc({color:a.color,outline:null})})}),o.length&&i.push({type:"symbol-table",title:e.label,infos:o})}else if(e.transferFunction){const{colorStops:o,stretchRange:a}=e.transferFunction,l=o.toArray().reverse(),u=a.map((m,g)=>`${g===0?UOe:QOe} ${ddt(m)}`).reverse(),p=l.map(m=>({color:m.color,value:null,label:null}));p[0].label=u[0],p[p.length-1].label=u[1],i.push({type:"color-ramp",title:e.label,infos:p,preview:jy(l.map(m=>m.color),{ariaLabel:await gh("previewColorRampAriaLabel")})})}}const r=t.opacity,n=i.reduce((o,a)=>[...o,...this._getAllInfos(a)],[]).filter(o=>!!(o!=null&&o.symbol)).map(o=>this._getSymbolPreview(o,r));await Promise.allSettled(n),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var i,r;this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const t=this.layer.activeLayer;this.addHandles(Oe(()=>{const{layer:n}=this;return n&&"activeLayer"in n&&n.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const e=t.styleId?(r=(i=t.styles)==null?void 0:i.find(({id:n})=>n===t.styleId))==null?void 0:r.legendUrl:void 0;e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this.addHandles(Oe(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){var o,a;const i=this.layer,r=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const n=((a=(o=this.sublayerIds)==null?void 0:o.map(l=>i.findSublayerById(l)))==null?void 0:a.filter(pn))??[],s=n.length?n:t.toArray();for(const l of s){const u=Oe(()=>[l.title,l.visible,l.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(u,"wms-sublayers-watcher"),!this.respectLayerVisibility||l.visible&&l.legendEnabled){const p=await this._generateSymbolTableElementForWMSSublayer(l,e);p!=null&&p.infos.length&&r.unshift(p)}}return r}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter(r=>r);return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){var o;let i=t.legendUrl;if(!i)return;const r={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(i=lC(i,e));let n=null;const s=(o=t.layer)==null?void 0:o.opacity;try{n=(await bt(i,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return r.infos.push({src:i,preview:n,opacity:s}),r}_getLegendLayers(t,e){const i=Ov&&Ov[t];return i?Promise.resolve(i):this._legendRequest(e).then(r=>{const n=r.layers;return Ov[t]=n,n})}_legendRequest(t){var n;const e=this.layer;let i={f:"json",dynamicLayers:t};if(wv(e)){const s=e.exportImageServiceParameters.rasterFunction;if(s&&(i.renderingRule=JSON.stringify(((n=s.functionDefinition)==null?void 0:n.toJSON())||s.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:o,viewId:a,customParameters:l}=e;i={raster:o,viewId:a,...i,...l}}}let r=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){const s=r.indexOf("?");s>-1?r=r.slice(0,s)+"/legend"+r.slice(s):r+="/legend"}else{const s=r.toLowerCase().indexOf("/rest/"),o=s===-1?r:r.slice(0,s)+r.slice(s+5);r=pdt+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return bt(r,{query:i}).then(s=>s.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;this.addHandles(Oe(()=>t.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){pe.getLogger(this).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=t.toArray();for(const n of r){const s=Oe(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(s,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const o=(n==null?void 0:n.opacity)!=null?n.opacity:null,a=o!=null?o*e:e;if(n.type==="building-group"){const l={type:"symbol-table",title:n.title,infos:[]},u=await this._generateLegendElementsForBuildingSublayers(n.sublayers,a);l.infos.push(...u),i=[l,...i]}else n.renderer&&(i=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:a,sublayer:n}),...i])}}return i.filter(n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;if(o4(t)||Qne(t)||s4(t)){this.addHandles(Oe(()=>t.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){pe.getLogger(this).warn("Request to server for legend has failed!",e)}}}async _generateLegendElementsForSublayers(t,e,i){const r=this.layer;let n=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let s=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(s=s4(r)?this.sublayerIds.map(o=>r.findSublayerForSubtypeCode(o)).filter(pn):this.sublayerIds.map(o=>r.findSublayerById(o)).filter(pn));for(const o of s){const a=Oe(()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this.addHandles(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const l=(o==null?void 0:o.opacity)!=null?o.opacity:null,u=l!=null?l*e:e,p=!Bne(o)||o.originIdOf("renderer")>ht.SERVICE&&!o.sublayers;if(o.renderer&&p)await o.load(),n=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:u,sublayer:o}),...n];else if(Bne(o)){const m=await this._generateSymbolTableElementForSublayer(o,u,i);m&&n.unshift(m)}}}return n.filter(o=>!!o&&(!("infos"in o)||!o.infos||o.infos.length>0))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const n=this.layer,s=t.source;let o=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===t.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||t.originIdOf("renderer")>ht.SERVICE||t.originIdOf("labelingInfo")>ht.SERVICE||t.originIdOf("labelsVisible")>ht.SERVICE){const l=new qa({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=o||`${n.uid}-default`;(await this._getLegendLayers(a,o)).forEach(l=>i.set(l.layerId,l))}const r=i.get(t.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&t.sublayers){const n=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(r,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){if(!(t!=null&&t.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=e==null?void 0:e.renderer;let n=(e==null?void 0:e.title)||t.layerName;if(r&&(!e||(e==null?void 0:e.originIdOf("renderer"))>ht.SERVICE)){const a=(e==null?void 0:e.title)||this._getRendererTitle(r,e);a&&(n&&typeof a!="string"&&"title"in a&&(a.title=n),n=a)}const s={type:"symbol-table",title:n,legendType:t.legendType||null,infos:[]},o=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach(a=>{var u;const l={type:"symbol-table",title:a.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter(p=>p.groupId===a.id),t.layerId,i)};((u=l.infos)==null?void 0:u.length)>0&&s.infos.push(l)}):s.infos=this._generateSymbolTableElementInfosForLegendLayer(o,t.layerId,i),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i){return t.map(r=>{let n=r.url;if(r.imageData&&r.imageData.length>0)n=`data:image/png;base64,${r.imageData}`;else{if(n.indexOf("http")===0)return null;n=kMe(`${this.layer.url}/${e}/images/${n}`)}return{label:r.label,src:n,opacity:i??this.opacity,width:r.width,height:r.height}}).filter(pn)}_isSublayerInScale(t){const e=t.minScale||0,i=t.maxScale||0;return!(e>0&&e<this.scale||i>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let r=null,n=null,s=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(t.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),t.maxScale===0&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,n=Math.max(i.maxScale,t.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(t,e){var o;if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;const i=e.renderer,r=t.some(a=>a.values);let n=0,s=null;return r&&t.some((a,l)=>(a.values||(n=l,s=a,s.label||(s.label="others")),s!=null)),i?i.type==="unique-value"?s&&(t.splice(n,1),t.push(s)):i.type==="class-breaks"&&(s&&t.splice(n,1),(o=i.legendOptions)!=null&&o.order||t.reverse(),s&&t.push(s)):s&&(t.splice(n,1),t.push(s)),t}async _getRendererLegendElements(t,e={}){if(!Odt(t,this.view))return pe.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(bdt(t))return this._constructPointCloudRendererLegendElements(t,e);if(r1e(t))return this._constructDotDensityRendererLegendElements(t);const i=await this._loadRenderer(t);return n1e(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e):[]}_getPointCloudRendererTitle(t){var e;return(((e=t.legendOptions)==null?void 0:e.title)||t.field)??""}async _constructPointCloudRendererLegendElements(t,e={}){var a;const i=e.title,r=[];let n=null,s=null;if(lB(t))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach(l=>{n.infos.unshift({label:l.label||l.minValue+" - "+l.maxValue,value:[l.minValue,l.maxValue],symbol:this._getAppliedCloneSymbol(Hk,l.color)})});else if(uB(t)){const l=t.stops;let u=null;if(l!=null&&l.length&&(l.length===1&&(u=l[0].color),!u)){const m=l[0].value,g=l[l.length-1].value;m!=null&&g!=null&&(u=ZOe(m+(g-m)/2,l))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Hk,u||Hk.color)}]};const p=qht(t.stops??[])??[];s={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:p,preview:jy(p.map(m=>m.color),{ariaLabel:await gh("previewColorRampAriaLabel")})}}else cB(t)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},(a=t.colorUniqueValueInfos)==null||a.forEach(l=>{n.infos.push({label:l.label||l.values.join(", "),value:l.values.join(", "),symbol:this._getAppliedCloneSymbol(Hk,l.color)})}));n!=null&&n.infos.length&&r.push(n),s!=null&&s.infos.length&&r.push(s);const o=r.reduce((l,u)=>[...l,...u.infos??[]],[]).filter(l=>!!l.symbol).map(l=>this._getSymbolPreview(l,this.opacity,{symbolConfig:{applyColorModulation:!!t.colorModulation}}));return await Promise.allSettled(o),r}async _getElementInfoForDotDensity(t,e){const{color:i,label:r,valueExpressionTitle:n}=e,{backgroundColor:s,outline:o,dotSize:a}=t,l=this.effectList,u=l==null?void 0:l.effects.map(T=>T.toJSON()),p=pI(u),m=await gh("previewTemplateAriaLabel",r||n),g=a+"-"+i+"-"+s+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+p,w=this._dotDensityUrlCache,O=w.has(g)?w.get(g):xht(t,i,{ariaLabel:m});w.set(g,O);const _={shape:{type:"image",x:0,y:0,width:O.width,height:O.height,src:O.src},fill:null,stroke:null,offset:[0,0]},x=J2([[_]],[O.width,O.height],{effectView:this.effectList,ariaLabel:m});return{opacity:1,src:O.src,preview:x,width:O.width,height:O.height}}async _constructDotDensityRendererLegendElements(t){var n;const e=t.calculateDotValue(this.view.scale),i=(n=t.legendOptions)==null?void 0:n.unit,r={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};for(const s of t.attributes){const o=await this._getElementInfoForDotDensity(t,s);o.label=s.label||s.valueExpressionTitle||s.field,r.infos.push(o)}return[r]}async _constructPieChartRendererLegendElements(t){var l,u,p,m;const e=this.layer.opacity,i=[];let r=null;const n=t.outline;t.attributes.forEach(g=>{const w=new Jn({color:g.color,outline:n}),O=g.label||g.valueExpressionTitle||g.field;i.push({label:O,symbol:w})});const s=i.length?[...i]:[];if((l=t.othersCategory)!=null&&l.color&&((u=t.othersCategory)==null?void 0:u.threshold)!==0){const g=new Jn({color:t.othersCategory.color,outline:n});r=t.othersCategory.label||"Other",i.push({label:r,symbol:g})}if((p=t.defaultColor)!=null&&p.a){const g=new Jn({color:t.defaultColor,outline:n});i.push({label:t.defaultLabel,symbol:g})}const o=await this._getVisualVariableLegendElements(t,this.layer)||[];if(i.length){o.unshift({type:"symbol-table",title:null,infos:i});const g=s.filter(O=>O.label!==r).map(O=>O.symbol.color).filter(Boolean),w=$ht(g,{holePercentage:t.holePercentage,backgroundColor:(m=t.backgroundFillSymbol)==null?void 0:m.color,effectList:this.effectList,outline:n,ariaLabel:await gh("previewPieChartAriaLabel")});o.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:i,preview:w})}const a=o.reduce((g,w)=>[...g,...this._getAllInfos(w)],[]).filter(g=>!!(g!=null&&g.symbol)&&!(g!=null&&g.preview)).map(g=>this._getSymbolPreview(g,e,{effectList:this.effectList}));return await Promise.allSettled(a),o}async _getWhereClause(t,e,i){const r=await V8(t,i),n=await gVe(e,i),s=new Set(n.map(a=>a.toLowerCase())),o=r==null?void 0:r.fieldNames.map(a=>a.toLowerCase());return o!=null&&o.some(a=>!s.has(a))?null:r}async _processDefinitionExpression(t,e){if(!("definitionExpression"in t))return;const i=t.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,e,t.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(t,e){if(!("displayFilterInfo"in t))return;const i=t.displayFilterInfo?gqe(t.displayFilterInfo,this.view):null;return i!=null&&i.where?this._layerDisplayFilterId!==(i==null?void 0:i.id)&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,e,t.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=i==null?void 0:i.id,i}async _constructRendererLegendElements(t,e={}){var T,E,k,M,R,D;const{title:i,sublayer:r}=e,n=r||this.layer,s=_U(t);let o=null;Uy(t)&&(await this._processDefinitionExpression(n,t),o=await this._processDisplayFilter(n,t)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const a=await this._getVisualVariableLegendElements(t,n)||[],l={type:"symbol-table",title:i||this._getRendererTitle(t,n),infos:[]};let u=null,p=!1;const m=new Set;if(EU(t)&&!this._hasSizeRamp){const L=await qOe(t);l.infos.push({label:null,symbol:L})}else if(kdt(t)){let L=i;const F=Cdt(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",j=a.findIndex(ae=>ae.type==="color-ramp"),B=j!==-1?a.splice(j,1)[0]:null,W=a.findIndex(ae=>ae.type==="size-ramp"),ie=W!==-1?a.splice(W,1)[0]:null,oe=[];B&&(L=B.title,oe.push(B)),ie&&(L=ie.title,oe.push(ie)),oe.length>0&&a.push({type:F,title:L,infos:oe})}else if(i1e(t)){const L=Hht(t);a.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,n),infos:L,preview:jy(L.map(F=>F.color),{effectList:this.effectList,ariaLabel:await gh("previewColorRampAriaLabel")})})}else if(Uy(t)){const L=t.authoringInfo;if(L&&L.type==="relationship"){const{numClasses:F,field1:j,field2:B}=L,W=L.focus;if(F&&j&&B){const ie=[j,B];let oe=FOe(W)||0;for(const Ee of ie){const{field:ue,normalizationField:he,label:ye}=Ee,Ae=ye||{field:this._getFieldAlias(ue,n),normField:he&&this._getFieldAlias(he,n)},Q=Adt.clone();Q.angle=oe,l.infos.push({label:Ae,symbol:Q}),m.add(Q),oe+=90}const ae=_ht({focus:W,numClasses:F,infos:t.uniqueValueInfos??[]});a.unshift(ae)}}else if(wv(this.layer)||Wk(this.layer))(T=t.uniqueValueInfos)==null||T.forEach(F=>{F.symbol&&this._checkClausesForUVR(t,F.value)&&l.infos.push({label:F.label||F.value,value:F.value,symbol:F.symbol})});else{const{field:F,field2:j,field3:B,fieldDelimiter:W,valueExpression:ie,defaultSymbol:oe}=t,ae=!(!F&&!ie||!j&&!B),Ee=this._layerDisplayFilterClause?o==null?void 0:o.title:null,ue=[];if((E=t.uniqueValueGroups)==null||E.forEach(he=>{var Ae;const ye={type:"symbol-table",title:Ee||he.heading,infos:[]};(Ae=he.classes)==null||Ae.forEach(Q=>{const{symbol:ge,values:Ve}=Q;if(ge){const Ne=[],ke=[];for(const St of Ve??[]){const{value:ri,value2:Ft,value3:Er}=St,en=[],kr=[];(F||ie)&&(en.push(ri),kr.push(this._getDomainName(F,ri,n))),j&&(en.push(Ft),kr.push(this._getDomainName(j,Ft,n))),B&&(en.push(Er),kr.push(this._getDomainName(B,Er,n))),Ne.push(ae?en.join(W||""):en[0]),ke.push(kr.join(" - "))}const ct=Ne.join(", ");let ot=Q.label;if(!ot){const St=ke.filter(Boolean);ot=St.length?St.join(", "):ct}const ai=ge.clone();ai.type==="cim"&&s&&oOe(ai,{innerDotSize:.5*Une,outerRingSize:Une}),Ne.some(St=>this._checkClausesForUVR(t,St))&&ye.infos.push({label:ot,value:ct,symbol:ai})}}),ye.infos.length&&ue.push(ye)}),ue.length){const he=ue[0];ue.length===1&&"title"in he&&!he.title?l.infos.push(...he.infos??[]):(oe&&(ue.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:oe}]}),p=!0),l.infos.push(...ue)),i||(k=t.legendOptions)!=null&&k.title||t.valueExpressionTitle||(l.title=null)}}t.defaultSymbol&&!p&&(l.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),p=!0)}else if(zy(t)){if(!s){if(u=this._isUnclassedRenderer(t),!u||!this._hasSizeRamp){const L=t.classBreakInfos.filter(({symbol:j})=>j),F=((M=t.legendOptions)==null?void 0:M.order)==="ascending-values";for(const{label:j,minValue:B,maxValue:W,symbol:ie}of L){const oe={label:j||(u?null:`${B} - ${W}`),value:[B,W],symbol:ie};F?l.infos.push(oe):l.infos.unshift(oe)}u&&(l.title=null),this._updateInfosForClassedSizeRenderer(t,l.infos)}t.defaultSymbol&&!u&&(l.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),p=!0)}}else if(e1e(t))if(Wk(this.layer)||Tdt(this.layer)){const L=await this._constructTileImageryStretchRendererElements(t);Edt(L)?a.push(L):l.infos=L}else{const L=this.layer;let F,j;(R=t.customStatistics)!=null&&R.length&&({min:F,max:j}=t.customStatistics[0]);let B=[],W=L.serviceRasterInfo;if(L.rasterFunction)try{W=await L.generateRasterInfo(L.rasterFunction)}catch{}const ie=iP(W.pixelType);if(W.bandCount===1){const oe=((D=L.bandIds)==null?void 0:D[0])||0;F=F??(W.statistics?W.statistics[oe].min:ie[0]),j=j??(W.statistics?W.statistics[oe].max:ie[1]),F||j?a.push(await this._getStretchLegendElements(t,{min:F,max:j})):this._getServerSideLegend()}else if(L.bandIds&&L.bandIds.length===1)F=F??(W.statistics?W.statistics[L.bandIds[0]].min:ie[0]),j=j??(W.statistics?W.statistics[L.bandIds[0]].max:ie[1]),F||j?a.push(await this._getStretchLegendElements(t,{min:F,max:j})):this._getServerSideLegend();else if(W.bandCount>=3){const{bandInfos:oe}=W,{bandIds:ae}=L;oe.length>=W.bandCount?(ae==null?void 0:ae.length)===3?(B=ae.map(Ee=>oe[Ee].name),l.infos=this._createSymbolTableElementMultiBand(B)):L.format==="lerc"?(B=[0,1,2].map(Ee=>oe[Ee].name),l.infos=this._createSymbolTableElementMultiBand(B)):this._getServerSideLegend():L.format==="lerc"?(B=["band1","band2","band3"],l.infos=this._createSymbolTableElementMultiBand(B)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(KOe(t))t.colormapInfos.forEach(L=>{l.infos.push({label:L.label,value:L.value,symbol:this._getAppliedCloneSymbol(vdt,L.color)})});else if(Lb(t)){let L=t.symbol;switch(e.geometryType){case"point":L="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":L="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":L="polygonSymbol"in n?n.polygonSymbol:null}const F=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&F&&l.infos.push({label:t.label,symbol:L})}else if(JOe(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),l.title=t.attributeField;const L=t.getClassBreakInfos();L!=null&&L.length?L.forEach(F=>{l.infos.push({label:F.minValue+" - "+F.maxValue,symbol:F.symbol})}):l.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else t1e(t)&&a.push(await this._getStretchLegendElements(t,{min:0,max:255}));const g=t.defaultSymbol;!g||p||Lb(t)||u&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||a.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:g}]}),l.infos.length&&a.unshift(l);const w=e.opacity==null?this.opacity:e.opacity,O=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),_=wv(this.layer)||Wk(this.layer),x=a.reduce((L,F)=>[...L,...this._getAllInfos(F)],[]).filter(L=>!!(L!=null&&L.symbol)).filter(L=>{if(L.symbol.type==="cim"){const{minScale:F,maxScale:j}=L.symbol.data;if(F&&F<this.scale||j&&j>this.scale)return!1}return!0}).map(L=>this._getSymbolPreview(L,w,{isDefault:L.symbol===g,applyScaleDrivenSize:!m.has(L.symbol),symbolConfig:{isTall:O,isSquareFill:_},effectList:m.has(L.symbol)?null:this.effectList}));return t=null,await Promise.allSettled(x),a}_checkClausesForUVR(t,e){const i=Mdt(t,e);return!i||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i))}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(t){const e=t==null?void 0:t.infos;return e?e.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[t]}async _constructTileImageryStretchRendererElements(t){var a,l,u;const e=this.layer,i=e.symbolizer.rasterInfo??e.raster.rasterInfo;let r,n;const s=(a=t==null?void 0:t.customStatistics)!=null&&a.length?t.customStatistics:i==null?void 0:i.statistics;if(s)({min:r,max:n}=s[0]);else{const p=iP(i.pixelType);r=p[0],n=p[1]}if(e.hasStandardTime()&&(r=e.getStandardTimeValue(r),n=e.getStandardTimeValue(n)),i.bandCount===1||((l=e.bandIds)==null?void 0:l.length)===1)return this._getStretchLegendElements(t,{min:r,max:n});const o=((u=e==null?void 0:e.bandIds)!=null&&u.length?e.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(p=>i.bandInfos[p].name);return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)}async _getStretchLegendElements(t,e){const i=t.colorRamp,r=Zht(i,e);return{type:"stretch-ramp",title:"",infos:r,preview:jy(r.map(n=>n.color),{ariaLabel:await gh("previewColorRampAriaLabel")})}}_getClusterSymbol(){var r;const t=this.layer,e="featureReduction"in t&&t.featureReduction,i=e&&"symbol"in e&&e.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:e&&"symbol"in e?e.symbol:null}async _getSizeLegendElement(t,e,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(e):t,infos:await idt(i,e,await SU(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach((r,n)=>{e.push({label:{colorName:i[n],bandName:r},src:Fht[n],opacity:this.opacity??1})}),e}_updateInfosForClassedSizeRenderer(t,e){const i=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",r=t.classBreakInfos.some(n=>e3(n.symbol));if(i&&r){const n=xU,s=$U,o=t.classBreakInfos.length,a=(n-s)/(o>1?o-1:o);e.forEach((l,u)=>{l.size=n-a*u})}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let r=0;r<t.length&&(!e||!i);r++){const n=t[r];n.type==="size"&&(n.axis==="height"&&(e=!0),n.axis==="width-and-depth"&&(i=!0))}return e&&i}async _getSymbolPreview(t,e,i){var s,o,a;let r=!(i!=null&&i.isDefault)&&t.size==null&&this._hasSizeRamp?$s(Kr.size):t.size;if(this._scaleDrivenSizeVariable&&(i!=null&&i.applyScaleDrivenSize)){const{getSize:l}=await J(()=>Promise.resolve().then(()=>m0),void 0);r=l(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}const n=!(i!=null&&i.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(i!=null&&i.applyScaleDrivenSize));return jOe(t.symbol,{size:r,opacity:e,scale:!1,symbolConfig:i==null?void 0:i.symbolConfig,effectView:i==null?void 0:i.effectList,style:"legend",cimOptions:{allowScalingUp:n,viewParams:this.isScaleDriven?{viewingMode:((s=this.view)==null?void 0:s.type)==="2d"?"map":(o=this.view)==null?void 0:o.viewingMode,scale:(a=this.view)==null?void 0:a.scale}:null},ariaLabel:t.label&&typeof t.label!="string"?null:await gh("previewTemplateAriaLabel",t.label)}).then(l=>(t.preview=l,t)).catch(()=>(t.preview=null,t))}_getClusterRenderer(t){var n,s;this._hasClusterSizeVariable=!1;const e="renderer"in this.layer?this.layer.renderer:null,i=((n=t.renderer)==null?void 0:n.clone())||(e==null?void 0:e.clone()),r=kht(t,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!((s=i.visualVariables)==null?void 0:s.some(a=>a.type==="size"&&a.target!=="outline"&&!Zk.test(a.valueExpression)))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:l,clusterMaxSize:u}=t;r.legendOptions=new $ye({showLegend:l!==u})}const a=i.visualVariables||[];i.visualVariables=a.concat([r]),this._hasClusterSizeVariable=!0}return i}async _loadRenderer(t){const e=[],i=t.clone(),r=await SU(i);if(zy(i)||Uy(i)){const n=(i.classBreakInfos||i.uniqueValueInfos).map(s=>this._fetchSymbol(s.symbol,r).then(o=>{s.symbol=o}).catch(()=>{s.symbol=null}));Array.prototype.push.apply(e,n)}return e.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then(n=>{this._applySymbolToRenderer(i,n,Lb(i))}).catch(()=>{this._applySymbolToRenderer(i,null,Lb(i))})),await Promise.allSettled(e),i}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await(this.view.type==="2d"?t.fetchCIMSymbol({cache:i}):t.fetchSymbol({cache:i}));return this._getAppliedCloneSymbol(r,e)}catch{throw pe.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),r=e&&e.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?uOe(i,e):i.color&&(i.color=new xe(r||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new xe(e))})}async _getVisualVariableLegendElements(t,e){var m,g;if(!("visualVariables"in t)||t.type==="vector-field")return null;const i=t.visualVariables??[],r=[],n=[],s=[],o=_U(t);if(((m=o==null?void 0:o.sizeStops)==null?void 0:m.length)===2&&(zy(t)||Uy(t))){const[w,O]=o.sizeStops;n.push(new DO({field:o.field??void 0,normalizationField:o.normalizationField,minSize:w.size,maxSize:O.size,minDataValue:w.value,maxDataValue:O.value}))}for(const w of i)w.type==="color"?r.push(w):w.type==="size"?n.push(w):w.type==="opacity"&&s.push(w);const a=[...r,...n,...s];let l,u;if(r.length===0&&zy(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const w=t.classBreakInfos[0];l=w&&w.symbol}if(r.length===0&&Lb(t)&&(l=t.symbol),l)if(l.type.includes("3d")){const w=l.symbolLayers.at(0);w.type==="water"?w.color!=null&&(u=w.color):((g=w.material)==null?void 0:g.color)!=null&&(u=w.material.color)}else l.url||(u=l.color);const p=this.effectList;return(await Promise.all(a.map(async w=>{if(!w.legendOptions||w.legendOptions.showLegend!==!1){const O=EU(t)?w.field:this._getRampTitle(w,e);let _=null;const x=Uht(e,w,this.view.timeZone);if(w.type==="color"){const T=await zne(w,null,x)??[];_={type:"color-ramp",title:O,infos:T,preview:jy(T.map(E=>E.color),{effectList:p,ariaLabel:await gh("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=T.length>0)}else if(w.type==="size"&&w.target!=="outline")Zk.test(w.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=w):(_=await this._getSizeLegendElement(O,w,t,x),this._hasSizeRamp||(this._hasSizeRamp=!(_.infos==null||!_.infos.length)));else if(w.type==="opacity"){const T=await zne(w,u,x)??[];_={type:"opacity-ramp",title:O,infos:T,preview:jy(T.map(E=>E.color),{effectList:p,ariaLabel:await gh("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=T.length>0)}return _!=null&&_.infos?_:null}}))).filter(pn)}_getDomainName(t,e,i){var r;if(t&&typeof t!="function"){const n="getField"in i&&((r=i.getField)==null?void 0:r.call(i,t)),s=n&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(n.name,{excludeImpliedDomains:te("esri-widget-legacy-field-domain-calculation")}):null;return(s==null?void 0:s.type)==="coded-value"?s.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const r=e.featureReduction,n="popupTemplate"in r&&r.popupTemplate,s=n&&n.fieldInfos;if(s){for(const o of s)if(o.fieldName===i)return i==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(t,e){var u,p;let i=t.field,r=t.normalizationField,n=!1,s=!1,o=!1,a=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const l=(u=t.legendOptions)==null?void 0:u.title;if(l!=null)a=l;else if(t.valueExpressionTitle)a=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&((p=e.renderer.authoringInfo)!=null&&p.visualVariables)){const m=e.renderer.authoringInfo.visualVariables;for(let g=0;g<m.length;g++){const w=m[g];if(w.type==="color"){if(w.style==="ratio"){n=!0;break}if(w.style==="percent"){s=!0;break}if(w.style==="percent-of-total"){o=!0;break}}}}a={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),ratio:n,ratioPercent:s,ratioPercentTotal:o}}return a}_getRendererTitle(t,e){var a;const i=t;if((a=i.legendOptions)!=null&&a.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,s=null;if(zy(i)&&(n=i.normalizationField,s=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,n=typeof n=="function"?null:n,Uy(i)){const{field2:l,field3:u,fieldDelimiter:p}=i;let m=r&&this._getFieldAlias(r,e);return l&&(m=`<${m}>${p}<${this._getFieldAlias(l,e)}>`,u&&(m=`${m}${p}<${this._getFieldAlias(u,e)}>`)),m}let o=null;return(r||n)&&(o={field:r&&this._getFieldAlias(r,e),normField:n&&this._getFieldAlias(n,e),normByPct:s}),o}_getFieldAlias(t,e){var p,m;const i="popupTemplate"in e?e.popupTemplate:null,r=i==null?void 0:i.fieldInfos;let n=r==null?void 0:r.find(g=>t===g.fieldName),s=null;"getField"in e&&e.getField?s=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(s=e.fieldsIndex.get(t));let o=null;const a="featureReduction"in e&&e.featureReduction;a&&(n??(n="popupTemplate"in a?(m=(p=a.popupTemplate)==null?void 0:p.fieldInfos)==null?void 0:m.find(g=>{var w;return(t==null?void 0:t.toLowerCase())===((w=g.fieldName)==null?void 0:w.toLowerCase())}):void 0),"fields"in a&&a.fields&&(o=a.fields.find(g=>{var w;return((w=g.name)==null?void 0:w.toLowerCase())===(t==null?void 0:t.toLowerCase())})));const l=n||s||o;let u=null;return l&&(u=(n==null?void 0:n.label)||(s==null?void 0:s.alias)||(o==null?void 0:o.alias)||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),u}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return zy(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(i=t.field?e.some(r=>!(!r||t.field!==r.field||(t.normalizationField||r.normalizationField)&&t.normalizationField!==r.normalizationField)):!!e.length),i}};h([f()],Ir.prototype,"children",void 0),h([f({readOnly:!0})],Ir.prototype,"effectList",null),h([f()],Ir.prototype,"layerView",void 0),h([f()],Ir.prototype,"layer",void 0),h([f()],Ir.prototype,"legendElements",void 0),h([f({readOnly:!0})],Ir.prototype,"opacity",null),h([f()],Ir.prototype,"parent",void 0),h([f({readOnly:!0,dependsOn:[]})],Ir.prototype,"ready",null),h([f()],Ir.prototype,"hideLayersNotInCurrentView",void 0),h([f()],Ir.prototype,"keepCacheOnDestroy",void 0),h([f()],Ir.prototype,"respectLayerDefinitionExpression",void 0),h([f()],Ir.prototype,"respectLayerVisibility",void 0),h([f({readOnly:!0})],Ir.prototype,"scale",null),h([f()],Ir.prototype,"sublayerIds",void 0),h([f({readOnly:!0})],Ir.prototype,"isScaleDriven",null),h([f()],Ir.prototype,"title",void 0),h([f({readOnly:!0,dependsOn:["ready"],value:0})],Ir.prototype,"version",null),h([f()],Ir.prototype,"view",void 0),Ir=h([A("esri.widgets.Legend.support.ActiveLayerInfo")],Ir);const s1e=Ir,Xm={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},o1e=Te.ofType(s1e),Idt=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),a1e="view.basemapView.baseLayerViews",l1e="view.groundView.layerViews",u1e="view.basemapView.referenceLayerViews",Pdt=[a1e,l1e,"view.layerViews",u1e];let ta=class extends Ce{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new Te,this.activeLayerInfos=new o1e,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(Oe(()=>this.view,()=>this._viewHandles(),It),Xm.view),this.addHandles(l8(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Xm.state),this.view&&this.addHandles(Oe(()=>this.state,()=>this._stateHandles(),It),Xm.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Xm.allLayerViews,Xm.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i!=null&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),Xm.allLayerViews),this.addHandles(Oe(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),Xm.legendProperties)}_allLayerViewsChangeHandle(e){e.moved.length?this._propertiesChangeHandle():(e.removed.forEach(i=>this._destroyViewActiveLayerInfo(i.uid)),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach(s=>{if(!s.parent){const o=s.layer.parent,a=o&&"uid"in o&&this._layerViewByLayerId[o.uid],l=a&&this._activeLayerInfosByLayerViewId[a.uid];l&&e.includes(l)&&(r.push(s),s.parent=l,l.children.add(s),this._sortActiveLayerInfos(l.children))}}),e.removeMany(r);const n={};i.allLayerViews.forEach((s,o)=>n[s.layer.uid]=o),e.sort((s,o)=>{const a=n[s.layer.uid]||0;return(n[o.layer.uid]||0)-a})}_generateLayerViews(){const e=[];return Pdt.filter(this._filterLayerViews,this).map(i=>qs(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===a1e||e===u1e),r=!this.groundLegendVisible&&e===l1e;return!i&&!r}_collectLayerViews(e,i){const r=n=>(n&&n.forEach(s=>{i.push(s),r(s[e])}),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,e))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(e){return!!Idt.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(Oe(()=>{var i;return[e.legendEnabled,(i=e.layer)==null?void 0:i.legendEnabled]},()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){var i;return!this.respectLayerVisibility||e.legendEnabled&&((i=e.layer)==null?void 0:i.legendEnabled)}_buildActiveLayerInfo(e){var a;const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let s=this._activeLayerInfosByLayerViewId[r];if(!s){const l=(n==null?void 0:n.title)!==void 0&&n.layer.uid===i.uid;s=new s1e({layer:i,layerView:e,title:l?n.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(n==null?void 0:n.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[r]=s}const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(a=i.parent)==null?void 0:a.uid]:null;if(s.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this.hasHandles(r)){const l=[Oe(()=>i.title,u=>this._titleHandle(u,s)),Oe(()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol],()=>this._constructLegendElements(s)),Kn(()=>{var u;return((u=this.view)==null?void 0:u.stationary)===!0},()=>this._scaleHandle(s),It),Oe(()=>e.layer?wne(e.layer,e.view):null,()=>this._constructLegendElements(s)),Oe(()=>e.updating,()=>{e.layer!=null&&wne(e.layer,e.view)!=null&&this._constructLegendElements(s)}),Oe(()=>"effect"in i&&i.effect,()=>this._constructLegendElements(s)),Kn(()=>{var u;return(u=this.view)==null?void 0:u.timeZone},()=>this._constructLegendElements(s),It)];if(this.respectLayerVisibility){const u=Oe(()=>e.legendEnabled,m=>this._legendEnabledHandle(m,s)),p=Oe(()=>i.legendEnabled,m=>this._legendEnabledHandle(m,s));l.push(u,p)}if(this.respectLayerDefinitionExpression&&"definitionExpression"in i){const u=Oe(()=>[i.definitionExpression,this.respectLayerDefinitionExpression],()=>{s.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(s)});l.push(u)}this.addHandles(l,r)}s.isScaleDriven||this._constructLegendElements(s),this._addActiveLayerInfo(s)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var n;const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const s=e.parent;if(s)s.children.includes(e)||s.children.push(e),this._sortActiveLayerInfos(s.children);else{const o=(n=this.layerInfos)==null?void 0:n.some(l=>l.layer.uid===r.uid),a=r.parent;a&&"uid"in a&&this._layerViewByLayerId[a.uid]&&!o?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const o=[];this._activeLayerInfosWithNoParent.forEach(a=>{const l=a.layer.parent,u=l&&"uid"in l?this._layerViewByLayerId[l==null?void 0:l.uid]:null,p=this._activeLayerInfosByLayerViewId[u==null?void 0:u.uid];p&&(o.push(a),a.parent=p)}),o.length&&(this._activeLayerInfosWithNoParent.removeMany(o),o.forEach(a=>this._addActiveLayerInfo(a)))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(i.featureReduction):"renderer"in i&&i.renderer&&!("sublayers"in i)?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph"?e.buildLegendElementsForTools():e.children.forEach(r=>this._constructLegendElements(r))}};h([f({type:o1e})],ta.prototype,"activeLayerInfos",void 0),h([f()],ta.prototype,"basemapLegendVisible",void 0),h([f()],ta.prototype,"groundLegendVisible",void 0),h([f()],ta.prototype,"hideLayersNotInCurrentView",void 0),h([f()],ta.prototype,"keepCacheOnDestroy",void 0),h([f()],ta.prototype,"respectLayerDefinitionExpression",void 0),h([f()],ta.prototype,"respectLayerVisibility",void 0),h([f()],ta.prototype,"layerInfos",void 0),h([f({readOnly:!0})],ta.prototype,"state",null),h([f()],ta.prototype,"view",void 0),ta=h([A("esri.widgets.Legend.LegendViewModel")],ta);const Rdt=ta,Jt="esri-legend--card",$S="esri-legend",tt={base:Jt,stacked:`${$S}--stacked`,carouselTitle:`${Jt}__carousel-title`,intervalSeparator:`${Jt}__interval-separator`,imageryLayerStretchedImage:`${Jt}__imagery-layer-image--stretched`,imageLabel:`${Jt}__image-label`,layerCaption:`${Jt}__layer-caption`,labelElement:`${Jt}__label-element`,layerRow:`${Jt}__layer-row`,labelCell:`${Jt}__label-cell`,message:`${Jt}__message`,rampLabel:`${Jt}__ramp-label`,section:`${Jt}__section`,serviceCaptionText:`${Jt}__service-caption-text`,serviceContent:`${Jt}__service-content`,service:`${Jt}__service`,groupLayer:`${Jt}__group-layer`,groupLayerChild:`${Jt}__group-layer-child`,symbol:`${Jt}__symbol`,sizeRampRow:`${Jt}__size-ramp-row`,symbolRow:`${Jt}__symbol-row`,symbolCell:`${Jt}__symbol-cell`,carousel:`${Jt}__carousel`,carouselItem:`${Jt}__carousel-item`,intervalSeparatorsContainer:`${Jt}__interval-separators-container`,relationshipLabelContainer:`${Jt}__relationship-label-container`,labelContainer:`${Jt}__label-container`,serviceCaptionContainer:`${Jt}__service-caption-container`,symbolContainer:`${Jt}__symbol-container`,colorRampContainer:`${Jt}__color-ramp-container`,sizeRampContainer:`${Jt}__size-ramp-container`,sizeRampPreview:`${Jt}__size-ramp-preview`,pieChartRampPreview:`${Jt}__pie-chart-ramp-preview`,sizeRampHorizontal:`${$S}__size-ramp--horizontal`,rampLabelsContainer:`${$S}__ramp-labels`,layerInfo:`${$S}__layer-cell ${$S}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function Ldt(t,e){return e}function Jr(t){const e=this;t.appendChild(e)}function nO(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return PEe(e);if("value"in e||"unit"in e)return o$(t.dotValue,e);if("colorName"in e&&"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return Ldt(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:c1e(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?o$(r==="showField"?"{field}":t[r],{field:e.field,normField:e.normField}):void 0}function c1e(t,e){return!e}function h1e(t,e){return!!(e&&e==="Stretched"&&"version"in t&&typeof t.version=="number"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function Ndt(t,e){var i;return t.label?e[t.label]+": "+(typeof t.value=="string"?t.value:pa(t.value??0,{style:"decimal",notation:(i=t.value)!=null&&i.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function d1e(t,e,i){switch(e){case"heatmap-ramp":return i[t.label]||t.label;case"stretch-ramp":return Ndt(t,i);default:return t.label}}function p1e(t,e){if(!t.title||typeof t.title=="string")return t.title;const i=t.type==="color-ramp"||t.type==="opacity-ramp",r=t.title,n=nO(e,r,i);return c1e(r,i)&&r.title?`${r.title} (${n})`:n}const Ddt=25,Vdt=25,Fdt=100;let Qy=class extends Tr{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return P("div",{class:this.classes(tt.layerRow,tt.colorRampContainer)},this._renderRampLabel(e[0]),P("div",{class:tt.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",n=e.length-1,s=Vdt,o=n>2&&!r?Ddt*n:Fdt,a=o+20,l=10,u=[[{shape:{type:"path",path:`M0 ${s/2} L${l} 0 L${l} ${s} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:o,height:s},fill:{type:"linear",x1:l,y1:0,x2:o+l,y2:0,colors:e.map((g,w)=>({color:g.color,offset:r&&"ratio"in g?g.ratio:w/n}))},stroke:{width:0}},{shape:{type:"path",path:`M${o+l} 0 L${a} ${s/2} L${o+l} ${s} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],p=TOe(u,a,s),m={filter:Y2(this.effectList)??void 0,opacity:i==null?void 0:`${i}`};return P("div",{styles:m},p)}_renderMiddleStopRampLabel(e){const i=e.length%2!=0?e[e.length/2|0]:null;return i?P("div",{class:tt.intervalSeparatorsContainer},P("div",{class:tt.intervalSeparator},"|"),this._renderRampLabel(i)):null}_renderRampLabel(e){return P("div",{class:tt.rampLabel},d1e(e,this.legendElement.type,this.messages))}};h([f()],Qy.prototype,"effectList",void 0),h([f()],Qy.prototype,"legendElement",void 0),h([f()],Qy.prototype,"messages",void 0),h([f()],Qy.prototype,"opacity",void 0),Qy=h([A("esri.widgets.Legend.styles.card.ColorRamp")],Qy);const jdt=Qy,zdt="#ddd",Sv=window.devicePixelRatio;function Udt(t){var i,r;if(!t)return;if(t.type.includes("3d")){if(!((i=t.symbolLayers)!=null&&i.length))return;const n=t.symbolLayers.at(-1),s=(r=n.resource)==null?void 0:r.primitive;return s==="circle"||s==="cross"||s==="kite"||s==="sphere"||s==="cube"||s==="diamond"}const e=t.style;return e==="circle"||e==="diamond"||e==="cross"}function Qdt(t){var e,i;if(t){if(t.type.includes("3d")){if(!((e=t.symbolLayers)!=null&&e.length))return;const r=t.symbolLayers.at(-1),n=(i=r==null?void 0:r.resource)==null?void 0:i.primitive;return n==="triangle"||n==="cone"||n==="tetrahedron"}return t.style==="triangle"}}let By=class extends Tr{constructor(e,i){super(e,i),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,hasIndicators:i,opacity:r}=this,n=e.infos,{label:s,...o}=n.at(0),{label:a,...l}=n.at(-1);let u=o.preview,p=l.preview;const m={"flex-direction":i?"column":"row-reverse"};u&&(u=u.cloneNode(!0),u.style.display="flex"),p&&(p=p.cloneNode(!0),p.style.display="flex");const g={opacity:r!=null?`${r}`:""};return P("div",{class:this.classes(tt.layerRow,{[tt.sizeRampRow]:i})},P("div",{class:tt.rampLabel},i?s:a),P("div",{class:tt.sizeRampContainer,styles:m},P("div",{afterCreate:Jr,bind:u,class:tt.sizeRampPreview,styles:g}),this._renderSizeRampLines(e),P("div",{afterCreate:Jr,bind:p,class:tt.sizeRampContainer,styles:g})),P("div",{class:tt.rampLabel},i?a:s))}_renderSizeRampLines(e){const i=e.infos,r=i[0],n=i.at(-1),s=r.symbol,o=this.hasIndicators,a=wi(r.size+r.outlineSize)*Sv,l=wi(n.size+n.outlineSize)*Sv,u=o?a:a+50*Sv,p=o?a/2+50*Sv:a,m=Qdt(s),g=Udt(s),w=document.createElement("canvas");w.width=u,w.height=p,w.style.width=w.width/Sv+"px",w.style.height=w.height/Sv+"px";const O=w.getContext("2d");if(o){O.beginPath();const _=0,x=0,T=u/2-l/2,E=p;O.moveTo(_,x),O.lineTo(T,E);const k=u,M=0,R=u/2+l/2,D=p;O.moveTo(k,M),O.lineTo(R,D)}else{O.beginPath();const _=0,x=p/2-l/2,T=u;O.moveTo(_,x),O.lineTo(T,0);const k=0,M=p/2+l/2,R=u,D=p;O.moveTo(k,M),O.lineTo(R,D)}return O.strokeStyle=zdt,O.stroke(),P("div",{afterCreate:Jr,bind:w,styles:o?{display:"flex",marginTop:`-${m?0:g?a/2:0}px`,marginBottom:`-${m?l:g?l/2:0}px`}:{display:"flex",marginRight:`-${m?0:g?a/2:0}px`,marginLeft:`-${m?0:g?l/2:0}px`}})}};h([f()],By.prototype,"hasIndicators",void 0),h([f()],By.prototype,"legendElement",void 0),h([f()],By.prototype,"messages",void 0),h([f()],By.prototype,"opacity",void 0),By=h([A("esri.widgets.Legend.styles.card.SizeRamp")],By);const Bdt=By,qdt=UA(),f1e=10,hB=20,i3=10,dB=20,pB={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function Gdt(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?P("svg",{height:"4",width:"10"},P("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):P("svg",{height:"10",width:"10"},P("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function Zdt(t,e="vertical"){const i=document.createElement("div");return i.style.height=`${hB}px`,i.className=pB.univariateAboveAndBelowSymbol,t!=null&&(i.style.opacity=t.toString()),qdt.append(i,Gdt.bind(null,e)),i}function m1e(t,e,i="vertical",r){t.infos.forEach((n,s)=>{if(r&&s===2)n.preview=Zdt(e,i);else{const o=wi(n.size)+(i==="horizontal"?dB:i3),a=n.preview,l=(a==null?void 0:a.tagName.toLowerCase())==="div",u=l?a:document.createElement("div");u.className=pB.univariateAboveAndBelowSymbol,i==="horizontal"?u.style.width=`${o}px`:u.style.height=`${o}px`,!l&&a&&u.appendChild(a),n.preview=u}})}function r3(t,e="classic"){const i=t.infos;return e==="classic"?(wi(i[0].size)+i3)/2:(wi(i[0].size)-wi(i[i.length-1].size))/2}function sO(t,e){if(!t)return null;const i=t.infos.map(n=>n.color),r=jy(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effectList:e.effectList,ariaLabel:e.ariaLabel});return r.className=pB.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function fB(t,e,i,r="vertical"){let n=0;const s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o;for(let u=a;u<=l;u++)i&&u===o?n+=r==="horizontal"?f1e:hB:n+=wi(s[u].size)+(r==="horizontal"?dB:i3);return Math.round(n)}function oO(t,e,i,r="vertical"){const n=fB(t,e,i,r),s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o,u=e==="full"?s[a].size+s[l].size:e==="above"?s[a].size:s[l].size,p=i?r==="vertical"?hB:f1e:0,m=r==="vertical"?i3*(e==="full"?2:1):dB*(e==="full"?2:1);return Math.round(n-(wi(u)/2+p/2+m/2))}function y1e(t,e,i="vertical"){const r=t.infos;let n=r.find(({type:o})=>o==="size-ramp"),s=r.find(({type:o})=>o==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],m1e(n,e,i,!0)),s&&(s={...s},s.infos=[...s.infos]),i==="horizontal"&&(n==null||n.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}function g1e(t,e="vertical"){const i=t.infos;let r=i.find(({type:s})=>s==="size-ramp"),n=i.find(({type:s})=>s==="color-ramp");return r&&(r={...r},r.infos=[...r.infos],m1e(r,null,e,!1)),n&&(n={...n},n.infos=[...n.infos]),e==="horizontal"&&(r==null||r.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:r,colorRampElement:n}}const kU={marginLeft:"3px"},Yb={display:"table-cell",verticalAlign:"middle"},v1e={display:"flex",alignItems:"flex-start"};let qy=class extends Tr{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var D;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=y1e(e,i,"horizontal");if(!s)return null;const a=fB(s,"full",!0,"horizontal"),l=oO(s,"above",!0,"horizontal"),u=oO(s,"below",!0,"horizontal"),p=12,m=(D=this.messages)==null?void 0:D.previewColorRampAriaLabel,g=sO(o,{width:l,height:p,rampAlignment:"horizontal",opacity:i,type:"above",effectList:r,ariaLabel:m}),w=sO(o,{width:u,height:p,rampAlignment:"horizontal",opacity:i,type:"below",effectList:r,ariaLabel:m}),O=r3(s,"card"),_=s.infos.map(L=>L.label),x=_.length-1,T=_.map((L,F)=>F===0||F===x?P("div",{key:F},L):null),E={display:"flex",flexDirection:"column"},k={display:"flex",flexDirection:"row"},M={marginTop:"3px",display:"flex"};S2(this.container)?M.marginRight=`${O}px`:M.marginLeft=`${O}px`;const R={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return P("div",{class:tt.layerRow,key:`${n}-container`,styles:E},P("div",{class:this.classes(tt.symbolContainer,tt.sizeRampHorizontal),styles:k},s.infos.map((L,F)=>P("div",{afterCreate:Jr,bind:L.preview,class:tt.symbol,key:F}))),g?P("div",{class:tt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:M},P("div",{afterCreate:Jr,bind:g}),P("div",{afterCreate:Jr,bind:w})):null,P("div",{class:tt.layerInfo},P("div",{class:tt.rampLabelsContainer,styles:R},T)))}};h([f()],qy.prototype,"effectList",void 0),h([f()],qy.prototype,"legendElement",void 0),h([f()],qy.prototype,"messages",void 0),h([f()],qy.prototype,"opacity",void 0),qy=h([A("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],qy);const Hdt=qy;let Gy=class extends Tr{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var T;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=g1e(e,"horizontal");if(!s)return null;const a=fB(s,"full",!1,"horizontal"),l=oO(s,"full",!1,"horizontal"),u=sO(o,{width:l,height:12,rampAlignment:"horizontal",opacity:i,type:"full",effectList:r,ariaLabel:(T=this.messages)==null?void 0:T.previewColorRampAriaLabel}),p=r3(s,"card"),m=s.infos.length-1,g=s.infos.map((E,k)=>k===0||k===m?P("div",{key:k},E.label):null),w={display:"flex",flexDirection:"column"},O={display:"flex",flexDirection:"row"},_={marginTop:"3px",display:"flex"};S2(this.container)?_.marginRight=`${p}px`:_.marginLeft=`${p}px`;const x={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return P("div",{class:tt.layerRow,key:`${n}-container`,styles:w},P("div",{class:this.classes(tt.symbolContainer,tt.sizeRampHorizontal),styles:O},s.infos.map((E,k)=>P("div",{afterCreate:Jr,bind:E.preview,class:tt.symbol,key:k}))),P("div",{class:tt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:_},P("div",{afterCreate:Jr,bind:u})),P("div",{class:tt.layerInfo},P("div",{class:tt.rampLabelsContainer,styles:x},g)))}};h([f()],Gy.prototype,"effectList",void 0),h([f()],Gy.prototype,"legendElement",void 0),h([f()],Gy.prototype,"messages",void 0),h([f()],Gy.prototype,"opacity",void 0),Gy=h([A("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],Gy);const Wdt=Gy;var CU;let tu=CU=class extends Tr{constructor(t,e){super(t,e),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=p1e(this.legendElement,this.messages),i=this.hasIndicators&&!this.isChild?P("div",null,P(Mx,{class:tt.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),P(Mx,{class:tt.layerCaption,level:jJe(this.headingLevel)},e)):e?P(Mx,{class:tt.layerCaption,level:this.headingLevel},e):null;return P("section",{"aria-labelledby":this.key,class:tt.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},i,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return P(Bdt,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return P(jdt,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return MOe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return P("div",{afterCreate:Jr,bind:this.legendElement.preview,class:tt.pieChartRampPreview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return P(Hdt,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return P(Wdt,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){var s,o,a;const e=t.infos.map(l=>this._renderElementInfo(l,t.legendType)).filter(Boolean);if(!e.length)return null;const i=this.activeLayerInfo.legendElements.some(({type:l})=>l==="relationship-ramp"),r=(a=(o=(s=e[0])==null?void 0:s.properties)==null?void 0:o.classes)==null?void 0:a[tt.symbolRow],n={[tt.labelContainer]:!r&&!i,[tt.relationshipLabelContainer]:i};return P("div",{class:this.classes(n)},e)}_renderElementInfo(t,e){var a;const{layer:i}=this,r="label"in t?t.label:null,n=`${this.key}-${r}`;if("type"in t&&t.type)return P(CU,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:n,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const s=h1e(i,e),o=nO(this.messages,r,!1)||"";if("src"in t&&t.src)return P("div",{class:tt.layerRow,key:`${n}-row`},this._renderImage(t,i,s),P("div",{class:tt.imageLabel},o));if("symbol"in t&&t.preview){if(!((a=t.symbol)!=null&&a.type.includes("simple-fill"))){if(!t.label)return P("div",{afterCreate:Jr,bind:t.preview,key:`${n}-row`});const l={[tt.symbolCell]:this.hasIndicators};return P("div",{class:this.classes(tt.layerRow,{[tt.symbolRow]:this.hasIndicators}),key:`${n}-row`},P("div",{afterCreate:Jr,bind:t.preview,class:this.classes(l)}),P("div",{class:this.classes(tt.imageLabel,{[tt.labelCell]:this.hasIndicators})},o))}return P("div",{class:tt.layerRow,key:`${n}-row`},P("div",{class:tt.labelElement,styles:this._getBackgroundStyles(t)},o))}return null}_getBackgroundStyles(t){var m,g;const e=t.symbol,i=e.color,r=!!(i!=null&&i.a),n="outline"in e?e.outline:null,s=!!((m=n==null?void 0:n.color)!=null&&m.a),o=new xe(r&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),a=s&&n.color?new xe([n.color.r,n.color.g,n.color.b,n.color.a*this.layer.opacity]):new xe([255,255,255,0]),l=((g=t.symbol.color)==null?void 0:g.isBright)??!0,u=l?"black":"white",p=l?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:r?o.toCss(!0):"none",color:u,textShadow:`-1px -1px 0 ${p},
                  1px -1px 0 ${p},
                  -1px 1px 0 ${p},
                  1px 1px 0 ${p}`,border:s?`1px solid ${a.toCss(!0)}`:"none",filter:Y2(this.effectList)??void 0}}_renderImage(t,e,i){const{label:r,src:n,opacity:s}=t,o={[tt.imageryLayerStretchedImage]:i,[tt.symbol]:!i},a={opacity:`${s??e.opacity}`},l=nO(this.messages,r,!1);return P("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:n,styles:a,width:t.width})}};h([f()],tu.prototype,"activeLayerInfo",void 0),h([f()],tu.prototype,"effectList",void 0),h([f()],tu.prototype,"hasIndicators",void 0),h([f()],tu.prototype,"headingLevel",void 0),h([f()],tu.prototype,"isChild",void 0),h([f()],tu.prototype,"layer",void 0),h([f()],tu.prototype,"legendElement",void 0),h([f()],tu.prototype,"messages",void 0),tu=CU=h([A("esri.widgets.Legend.styles.card.LegendElement")],tu);const qne=tu,Xdt=768;let rc=class extends Tr{constructor(e,i){super(e,i),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return um({carousel:()=>J(()=>import("./index-z3mNsee9.js"),__vite__mapDeps([265,247])),"carousel-item":()=>J(()=>import("./index-rE8dCARY.js"),[])})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=Xdt||this.layout==="stack";const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),i={[tt.stacked]:this._hasIndicators};return P("div",{class:this.classes(tt.base,i)},e||P("div",{class:tt.message},this.messages.noLegend))}_renderCarousel(){const e=[],i=this.activeLayerInfos;if(i)for(const r of i)this._renderSections(r,e);return e!=null&&e.length?P("calcite-carousel",{class:tt.carousel,label:this.messages.carousel},e.map((r,n)=>P("calcite-carousel-item",{class:tt.carouselItem,key:n,label:o$(this.messagesCommon.pagination.pageText,{index:n+1,total:e.length})},r))):null}_renderLayers(){var r;const e=this.activeLayerInfos,i=(r=e==null?void 0:e.toArray())==null?void 0:r.map(n=>this._renderLegendForLayer(n)).filter(Boolean);return i!=null&&i.length?i:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const i=e.children.toArray().map(this._renderLegendForLayer,this);return P("section",{class:this.classes(tt.service,tt.groupLayer),key:e.layer.uid},P("div",{class:tt.serviceCaptionContainer},e.title),i)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){var s;const i=(s=e.legendElements)==null?void 0:s.filter(Boolean);if(!(i!=null&&i.length))return null;const r=i.map(o=>P(qne,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${o.type}`,layer:e.layer,legendElement:o,messages:this.messages})),n={[tt.groupLayerChild]:!!e.parent};return P("section",{class:this.classes(tt.service,n),key:e.layer.uid},P("div",{class:tt.serviceCaptionContainer},P("div",{class:tt.serviceCaptionText},e.title)),P("div",{class:tt.serviceContent},r))}_renderSections(e,i){if(!e.ready)return;if(e.children.length)for(const n of e.children)this._renderSections(n,i);const r=e.legendElements;if(r!=null&&r.length)for(const n of r){const s=P(qne,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${n.type}`,layer:e.layer,legendElement:n,messages:this.messages});s&&i.push(s)}}};h([f()],rc.prototype,"activeLayerInfos",void 0),h([f()],rc.prototype,"headingLevel",void 0),h([f()],rc.prototype,"layout",void 0),h([f(),Ys("esri/widgets/Legend/t9n/Legend")],rc.prototype,"messages",void 0),h([f(),Ys("esri/t9n/common")],rc.prototype,"messagesCommon",void 0),h([f({readOnly:!0})],rc.prototype,"type",void 0),h([f()],rc.prototype,"view",void 0),rc=h([A("esri.widgets.Legend.styles.card.CardView")],rc);const a4=rc,Mi="esri-legend",lt={service:`${Mi}__service`,label:`${Mi}__service-label`,layer:`${Mi}__layer`,groupLayer:`${Mi}__group-layer`,groupLayerChild:`${Mi}__group-layer-child`,layerTable:`${Mi}__layer-table`,layerTableSizeRamp:`${Mi}__layer-table--size-ramp`,layerChildTable:`${Mi}__layer-child-table`,layerCaption:`${Mi}__layer-caption`,layerBody:`${Mi}__layer-body`,layerRow:`${Mi}__layer-row`,layerInfo:`${Mi}__layer-cell ${Mi}__layer-cell--info`,imageryLayerStretchedImage:`${Mi}__imagery-layer-image--stretched`,imageryLayerInfoStretched:`${Mi}__imagery-layer-info--stretched`,symbolContainer:`${Mi}__layer-cell ${Mi}__layer-cell--symbols`,symbol:`${Mi}__symbol`,rampContainer:`${Mi}__ramps`,sizeRamp:`${Mi}__size-ramp`,colorRamp:`${Mi}__color-ramp`,opacityRamp:`${Mi}__opacity-ramp`,rampLabelsContainer:`${Mi}__ramp-labels`,rampLabel:`${Mi}__ramp-label`,message:`${Mi}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},Ydt=24;let Zy=class extends Tr{constructor(e,i){super(e,i),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const i=this.legendElement.type==="opacity-ramp"?lt.opacityRamp:"";return e.className=`${lt.colorRamp} ${i}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:i}=this;if(!i)return null;const r={width:`${Ydt}px`},n={height:i.style.height};return P("div",{class:lt.layerRow,key:`${this.key}-row`},P("div",{class:lt.symbolContainer,styles:r},P("div",{afterCreate:Jr,bind:i,class:lt.rampContainer})),P("div",{class:lt.layerInfo},P("div",{class:lt.rampLabelsContainer,styles:n},e.infos.map((s,o)=>this._renderRampLabel(s,o,e.type)))))}_renderRampLabel(e,i,r){return P("div",{class:e.label?lt.rampLabel:void 0,key:`${this.key}-stop-${e.label??i}-label`},d1e(e,r,this.messages))}};h([f()],Zy.prototype,"_preview",null),h([f()],Zy.prototype,"legendElement",void 0),h([f()],Zy.prototype,"messages",void 0),h([f()],Zy.prototype,"opacity",void 0),Zy=h([A("esri.widgets.Legend.styles.classic.ColorRamp")],Zy);const Jdt=Zy;let K_=class extends Tr{constructor(e,i){super(e,i),this.legendElement=null}render(){const e=this.legendElement.infos.map(i=>this._renderRow(i)).filter(Boolean);return e.length?P("div",{class:lt.layerBody},e):null}_renderRow(e){return e.preview?P("div",{class:lt.layerRow,key:`${this.key}-${e.label}-row`},P("div",{class:this.classes(lt.symbolContainer,lt.sizeRamp)},P("div",{afterCreate:Jr,bind:e.preview,class:lt.symbol})),P("div",{class:lt.layerInfo},nO(this.messages,e.label,!1)||"")):null}};h([f()],K_.prototype,"legendElement",void 0),h([f()],K_.prototype,"messages",void 0),K_=h([A("esri.widgets.Legend.styles.classic.SizeRamp")],K_);const Kdt=K_;let Hy=class extends Tr{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=y1e(e,i);if(!s)return null;const a=this.messages.previewColorRampAriaLabel,l=oO(s,"above",!0),u=oO(s,"below",!0),p=12,m=sO(o,{width:p,height:l,rampAlignment:"vertical",opacity:i,type:"above",effectList:r,ariaLabel:a}),g=sO(o,{width:p,height:u,rampAlignment:"vertical",opacity:i,type:"below",effectList:r,ariaLabel:a}),w=r3(s),O=s.infos.map(L=>L.label),_=O.map((L,F)=>F===0?P("div",{class:L?m?lt.univariateAboveAndBelowLabel:lt.rampLabel:void 0,key:`${n}-color-ramp-above-label-${L??F}`},L):F===2?P("div",null):null),x=O.length-1,T=Math.floor(O.length/2),E=O.map((L,F)=>F===T||F===x?P("div",{class:L?m?lt.univariateAboveAndBelowLabel:lt.rampLabel:void 0,key:`${n}-color-ramp-below-label-${L??F}`},L):null),k={display:"table-cell",verticalAlign:"middle"},M={marginTop:`${w}px`},R={height:`${l}px`},D={height:`${u}px`};return P("div",{key:`${n}-container`,styles:v1e},P("div",{class:lt.layerBody},s.infos.map((L,F)=>P("div",{class:this.classes(lt.layerRow,lt.sizeRamp),key:`${n}-row-${F}`},P("div",{afterCreate:Jr,bind:L.preview,class:lt.symbol,styles:k}),m||F%2!=0?null:P("div",{class:lt.layerInfo},O[F])))),m?P("div",{styles:M},P("div",{styles:kU},P("div",{styles:Yb},P("div",{afterCreate:Jr,bind:m,class:lt.rampContainer})),P("div",{styles:Yb},P("div",{class:lt.rampLabelsContainer,styles:R},_))),P("div",{styles:kU},P("div",{styles:Yb},P("div",{afterCreate:Jr,bind:g,class:lt.rampContainer})),P("div",{styles:Yb},P("div",{class:lt.rampLabelsContainer,styles:D},E)))):null)}};h([f()],Hy.prototype,"effectList",void 0),h([f()],Hy.prototype,"legendElement",void 0),h([f()],Hy.prototype,"messages",void 0),h([f()],Hy.prototype,"opacity",void 0),Hy=h([A("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],Hy);const ept=Hy;let Wy=class extends Tr{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var x;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=g1e(e);if(!s)return null;const a=r3(s),l=12,u=oO(s,"full",!1),p=sO(o,{width:l,height:u,rampAlignment:"vertical",opacity:i,type:"full",effectList:r,ariaLabel:(x=this.messages)==null?void 0:x.previewColorRampAriaLabel}),m=s.infos.length-1,g=s.infos.map((T,E)=>E===0||E===m?P("div",{class:T.label?o?lt.univariateAboveAndBelowLabel:lt.rampLabel:void 0,key:`${n}-color-ramp-label-${T.label??E}`},T.label):null),w={display:"table-cell",verticalAlign:"middle"},O={marginTop:`${a}px`},_={height:`${u}px`};return P("div",{key:`${n}-container`,styles:v1e},P("div",{class:lt.layerBody},s.infos.map((T,E)=>P("div",{class:this.classes(lt.layerRow,lt.sizeRamp),key:`${n}-row-${E}`},P("div",{afterCreate:Jr,bind:T.preview,class:lt.symbol,styles:w})))),P("div",{styles:O},P("div",{styles:kU},P("div",{styles:Yb},P("div",{afterCreate:Jr,bind:p,class:lt.rampContainer})),P("div",{styles:Yb},P("div",{class:lt.rampLabelsContainer,styles:_},g)))))}};h([f()],Wy.prototype,"effectList",void 0),h([f()],Wy.prototype,"legendElement",void 0),h([f()],Wy.prototype,"messages",void 0),h([f()],Wy.prototype,"opacity",void 0),Wy=h([A("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],Wy);const tpt=Wy;var MU;let Gp=MU=class extends Tr{constructor(t,e){super(t,e),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=p1e(this.legendElement,this.messages),i=this.isChild?lt.layerChildTable:lt.layerTable,r=e?P("div",{class:lt.layerCaption},e):null,n={[lt.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return P("section",{class:this.classes(i,n),key:`${this.key}-table`},r,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return P(Kdt,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return P(Jdt,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return MOe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return P("div",{afterCreate:Jr,bind:this.legendElement.preview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return P(ept,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return P(tpt,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){const e=t.infos.map(i=>this._renderElementInfo(i,t.legendType)).filter(Boolean);return e.length?P("div",{class:lt.layerBody},e):null}_renderElementInfo(t,e){const{layer:i}=this,r="label"in t?t.label:null,n=`${this.key}-${r}`;if("type"in t&&t.type)return P(MU,{effectList:this.effectList,isChild:!0,key:n,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const s=h1e(i,e),o={[lt.imageryLayerInfoStretched]:s},a={[lt.imageryLayerInfoStretched]:s};return P("div",{class:lt.layerRow,key:`${n}-row`},P("div",{class:this.classes(lt.symbolContainer,a)},this._renderPreview(t,s)),P("div",{class:this.classes(lt.layerInfo,o)},nO(this.messages,r,!1)||""))}_renderPreview(t,e){const{layer:i}=this;return"preview"in t&&t.preview?P("div",{afterCreate:Jr,bind:t.preview,class:lt.symbol}):"src"in t&&t.src?this._renderImage(t,i,e):null}_renderImage(t,e,i){const{label:r,src:n,opacity:s}=t,o={[lt.imageryLayerStretchedImage]:i,[lt.symbol]:!i},a={opacity:`${s??e.opacity}`},l=nO(this.messages,r,!1);return P("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:n,styles:a,width:t.width})}};h([f()],Gp.prototype,"effectList",void 0),h([f()],Gp.prototype,"isChild",void 0),h([f()],Gp.prototype,"layer",void 0),h([f()],Gp.prototype,"legendElement",void 0),h([f()],Gp.prototype,"messages",void 0),Gp=MU=h([A("esri.widgets.Legend.styles.classic.LegendElement")],Gp);const ipt=Gp,rpt=`${Mi}__`;let Xy=class extends Tr{constructor(e,i){super(e,i),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,i=e==null?void 0:e.toArray().map(r=>this._renderLegendForLayer(r)).filter(Boolean);return i!=null&&i.length?P("section",null,i):P("div",{class:lt.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,i){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,n=`${rpt}${i?`${i}-`:""}${r}`,s=e.title?Mx({level:this.headingLevel,class:this.classes(lr.heading,lt.label)},e.title):null;if(e.children.length){const o=e.children.toArray().map(a=>this._renderLegendForLayer(a,r));return P("section",{class:this.classes(lt.service,lt.groupLayer),key:n},s,o)}return this._renderLegendElementsForLayer(e,s,n)}_renderLegendElementsForLayer(e,i,r){var a;const n=(a=e.legendElements)==null?void 0:a.filter(Boolean);if(!(n!=null&&n.length))return null;const s=n.map(l=>P(ipt,{effectList:e.effectList,isChild:!1,key:`${r}-${l.type}`,layer:e.layer,legendElement:l,messages:this.messages})),o={[lt.groupLayerChild]:!!e.parent};return P("section",{class:this.classes(lt.service,o),key:r},i,P("div",{class:lt.layer},s))}};h([f()],Xy.prototype,"activeLayerInfos",void 0),h([f()],Xy.prototype,"headingLevel",void 0),h([f(),Ys("esri/widgets/Legend/t9n/Legend")],Xy.prototype,"messages",void 0),h([f({readOnly:!0})],Xy.prototype,"type",void 0),Xy=h([A("esri.widgets.Legend.styles.classic.ClassicView")],Xy);const _v=Xy,npt={base:"esri-legend"};let un=class extends Tr{constructor(e,i){super(e,i),this.headingLevel=3,this.messages=null,this.style=new _v,this.viewModel=new Rdt}initialize(){this.addHandles([Ss(()=>this.view,"resize",()=>this.scheduleRender()),Ss(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),Oe(()=>this.headingLevel,e=>{const{style:i}=this;i&&(i.headingLevel=e)}),Oe(()=>this.style,(e,i)=>{i&&e!==i&&i.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},It)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof a4||e instanceof _v)return e;if(typeof e=="string")return e==="card"?new a4:new _v;if(e&&typeof e.type=="string"){const i={...e};return delete i.type,e.type==="card"?new a4(i):new _v(i)}return new _v}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return P("div",{class:this.classes(npt.base,lr.widget,this.style instanceof _v?lr.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(i=>{this.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const i=Oe(()=>e.version,()=>this.scheduleRender());this.addHandles(i,`version_${e.layer.uid}`);const r=Ss(()=>e.children,"change",()=>e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n)),It);this.addHandles(r,`version_${e.layer.uid}`),e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n))}};h([f()],un.prototype,"activeLayerInfos",null),h([f()],un.prototype,"basemapLegendVisible",null),h([f()],un.prototype,"groundLegendVisible",null),h([f()],un.prototype,"headingLevel",void 0),h([f()],un.prototype,"hideLayersNotInCurrentView",null),h([f()],un.prototype,"keepCacheOnDestroy",null),h([f()],un.prototype,"respectLayerDefinitionExpression",null),h([f()],un.prototype,"respectLayerVisibility",null),h([f()],un.prototype,"icon",null),h([f()],un.prototype,"label",null),h([f()],un.prototype,"layerInfos",null),h([f(),Ys("esri/widgets/Legend/t9n/Legend")],un.prototype,"messages",void 0),h([f()],un.prototype,"style",void 0),h([Rt("style")],un.prototype,"castStyle",null),h([f()],un.prototype,"view",null),h([f()],un.prototype,"viewModel",void 0),un=h([A("esri.widgets.Legend")],un);const b1e=un,spt=Object.freeze(Object.defineProperty({__proto__:null,default:b1e},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.11 */const opt=Ln`@layer{arcgis-legend{display:block}}`,apt=VR(b1e);var Pf;let lpt=(Pf=class extends gn{constructor(){super(...arguments),this.widget=apt(this),this.viewModel=this.widget.viewModel,this.activeLayerInfos=this.widget.activeLayerInfos,this.autoDestroyDisabled=!1,this.basemapLegendVisible=this.widget.basemapLegendVisible,this.headingLevel=this.widget.headingLevel,this.hideLayersNotInCurrentView=this.widget.hideLayersNotInCurrentView,this.icon=this.widget.icon,this.label=this.widget.label,this.layerInfos=this.widget.layerInfos,this.legendStyle=this.widget.style,this.position="bottom-left",this.respectLayerDefinitionExpression=this.widget.respectLayerDefinitionExpression,this.respectLayerVisibilityDisabled=this.widget.respectLayerVisibility,this.state=this.viewModel.state,this.arcgisPropertyChange=JU()("state"),this.arcgisReady=xo()}async destroy(){await this.manager.destroy()}},Pf.properties={activeLayerInfos:0,autoDestroyDisabled:5,basemapLegendVisible:5,headingLevel:9,hideLayersNotInCurrentView:5,icon:1,label:1,layerInfos:0,legendStyle:1,position:1,referenceElement:1,respectLayerDefinitionExpression:5,respectLayerVisibilityDisabled:5,state:3},Pf.shadowRootOptions=Lf,Pf.styles=opt,Pf);fO("arcgis-legend",lpt);let Zp=class extends Ce{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Ss(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){var n;const i=!!e;this._set("expanded",i);const r=(n=this.view)==null?void 0:n.ui;r&&r.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&Kn(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?Kn(()=>{var i;return(i=this.view)==null?void 0:i.stationary},()=>{var i;return(i=this._viewpointHandle)==null?void 0:i.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:i,view:r}=this;if(!r||!i)return;const n=Lae(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this.addHandles(n,e),this._viewpointHandle=n}_collapse(){this.expanded=!1}};h([f({value:!1})],Zp.prototype,"autoCollapse",null),h([f({value:!1})],Zp.prototype,"expanded",null),h([f()],Zp.prototype,"group",void 0),h([f({readOnly:!0})],Zp.prototype,"state",null),h([f({value:null})],Zp.prototype,"view",null),Zp=h([A("esri.widgets.Expand.ExpandViewModel")],Zp);const w1e=Zp,pp="esri-expand",Bo={base:pp,toggle:`${pp}__toggle`,popoverContent:`${pp}__popover-content`,panel:`${pp}__panel`,panelContent:`${pp}__panel-content`,sheet:`${pp}__sheet`,contentContainer:`${pp}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconNumber:`${pp}__icon-number`},Gne="chevrons-left",Zne="chevrons-right";let Fi=class extends Tr{constructor(e,i){super(e,i),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.focusTrapDisabled=!1,this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new w1e,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=r=>{r.target===this._popoverEl&&(this.viewModel.expanded=r.currentTarget.open)},this._handleSheetClose=r=>{this.viewModel.expanded=r.currentTarget.open},this._handlePanelClose=r=>{this.viewModel.expanded=!r.currentTarget.closed},this._handleKeyDown=r=>{this.viewModel.expanded&&r.key==="Escape"&&!this._willCloseOnEsc(r)&&r.preventDefault()},this._storeToggleActionEl=r=>{this._toggleActionEl=r},this._storePopoverEl=r=>{this._popoverEl=r}}initialize(){this.addHandles(Oe(()=>{var e,i;return(i=(e=this.viewModel)==null?void 0:e.view)==null?void 0:i.size},()=>{var e;return(e=this._popoverEl)==null?void 0:e.reposition()},It))}loadDependencies(){return um({action:()=>J(()=>Promise.resolve().then(()=>lQ),void 0),icon:()=>J(()=>Promise.resolve().then(()=>gP),void 0),panel:()=>J(()=>import("./index-Dk7uRXM3.js").then(e=>e.i),__vite__mapDeps([254,243,235,236,237,244,245,246,247,233])),popover:()=>J(()=>import("./index-4WWG3ort.js"),__vite__mapDeps([243,235,236,237,244,245])),sheet:()=>J(()=>import("./index-DgOaXfFf.js"),__vite__mapDeps([266,233,267,237,238,245]))})}get expandTitle(){const{expanded:e,messagesCommon:i,collapseTooltip:r,expandTooltip:n}=this;return(e?r||(i==null?void 0:i.collapse):n||(i==null?void 0:i.expand))??""}get _displaySheet(){var e;switch(this.mode){case"drawer":return!0;case"auto":return((e=this.viewModel.view)==null?void 0:e.widthBreakpoint)==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIcon(){return Zne}set collapseIcon(e){this._overrideIfSome("collapseIcon",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIcon(){return Dx(this.content)?this.content.icon:Gne}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get icon(){return null}get label(){var e;return(Dx(this.content)?this.content.label:null)??((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:e,_toggleActionEl:i,viewModel:{expanded:r},label:n,placement:s}=this;return P("div",{class:this.classes(Bo.base,lr.widget)},this._renderToggle(),e?P("calcite-sheet",{class:Bo.sheet,heightScale:"l",label:n,onkeydown:this._handleKeyDown,open:r,position:"block-end",onCalciteSheetClose:this._handleSheetClose},P("calcite-panel",{class:Bo.panel,closable:!0,closed:!r,heading:n,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},P("div",{class:Bo.panelContent},this._renderContent()))):i?P("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,focusTrapDisabled:this.focusTrapDisabled,label:n,onkeydown:this._handleKeyDown,open:r,overlayPositioning:"fixed",placement:s??this._getPlacement(),referenceElement:i,onCalcitePopoverClose:this._handlePopoverClose},P("div",{class:Bo.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:e,view:i}=this,r=e&&i?i.ui.getPosition(e):null;if(!r||r==="manual")return"auto";const[n,s]=r.split("-");return`${s==="right"?"left":"right"}-${n==="bottom"?"end":"start"}`}_willCloseOnEsc(e){const{closeOnEsc:i}=this;return typeof i=="function"?i(e):i}_renderBadgeNumber(){const{expanded:e,iconNumber:i}=this;return i&&!e?P("span",{class:Bo.iconNumber,key:"expand__icon-number"},i):null}_renderToggleButton(){const{expanded:e,expandTitle:i,expandIcon:r,collapseIcon:n}=this,s=e?n:r,o=s===Gne||s===Zne;return P("calcite-action",{afterCreate:this._storeToggleActionEl,afterUpdate:this._storeToggleActionEl,class:lr.widgetButton,onclick:this.toggle,scale:"s",text:i,title:i},s?P("calcite-icon",{class:this.classes(Bo.icon,o&&Bo.iconFlip),icon:s,scale:"s"}):null)}_renderToggle(){return P("div",{class:Bo.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:e}=this;return typeof e=="string"?P("div",{class:Bo.contentContainer,innerHTML:e,key:"content__string"}):Dx(e)?P("div",{class:Bo.contentContainer,key:"content__widget"},e.render()):e instanceof HTMLElement?P("div",{afterCreate:this._attachToNode,bind:e,class:Bo.contentContainer,key:"content__html-element"}):cut(e)?P("div",{afterCreate:this._attachToNode,bind:e.domNode,class:Bo.contentContainer,key:"content__node"}):null}_attachToNode(e){const i=this;e.appendChild(i)}};h([f({readOnly:!0})],Fi.prototype,"expandTitle",null),h([f()],Fi.prototype,"_toggleActionEl",void 0),h([f()],Fi.prototype,"_displaySheet",null),h([f()],Fi.prototype,"autoCollapse",null),h([f()],Fi.prototype,"closeOnEsc",void 0),h([f()],Fi.prototype,"collapseIcon",null),h([f()],Fi.prototype,"collapseTooltip",void 0),h([f()],Fi.prototype,"content",void 0),h([f()],Fi.prototype,"expanded",null),h([f()],Fi.prototype,"expandIcon",null),h([f()],Fi.prototype,"expandTooltip",void 0),h([f()],Fi.prototype,"focusTrapDisabled",void 0),h([f()],Fi.prototype,"group",null),h([f()],Fi.prototype,"icon",null),h([f()],Fi.prototype,"iconNumber",void 0),h([f()],Fi.prototype,"label",null),h([f(),Ys("esri/widgets/Expand/t9n/Expand")],Fi.prototype,"messages",void 0),h([f(),Ys("esri/t9n/common")],Fi.prototype,"messagesCommon",void 0),h([f()],Fi.prototype,"mode",void 0),h([f()],Fi.prototype,"placement",void 0),h([f()],Fi.prototype,"view",null),h([f({type:w1e})],Fi.prototype,"viewModel",void 0),Fi=h([A("esri.widgets.Expand")],Fi);const upt=Fi;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.11 */const cpt=Ln`@layer{arcgis-expand{display:flex;pointer-events:auto}arcgis-expand>.esri-expand__content--expanded{background-color:var(--calcite-color-background)}}`,hpt=VR(upt),zx=class zx extends gn{constructor(){super(),this.widget=hpt(this),this.viewModel=this.widget.viewModel,this.autoCollapse=this.widget.autoCollapse,this.autoDestroyDisabled=!1,this.closeOnEsc=this.widget.closeOnEsc,this.collapseIcon=this.widget.collapseIcon,this.collapseTooltip=this.widget.collapseTooltip,this.content=this.widget.content,this.expandIcon=this.widget.expandIcon,this.expandTooltip=this.widget.expandTooltip,this.expanded=this.widget.expanded,this.focusTrapEnabled=this.widget.focusTrapDisabled,this.group=this.widget.group,this.icon=this.widget.icon,this.iconNumber=this.widget.iconNumber,this.label=this.widget.label,this.mode=this.widget.mode,this.placement=this.widget.placement,this.position="top-right",this.arcgisReady=xo(),this.content??(this.content=document.createElement("div"))}async collapse(){var e;(e=this.widget)==null||e.collapse()}async destroy(){await this.manager.destroy()}async expand(){var e;(e=this.widget)==null||e.expand()}async toggle(){this.expanded?await this.collapse():await this.expand()}};zx.properties={autoCollapse:5,autoDestroyDisabled:5,closeOnEsc:5,collapseIcon:1,collapseTooltip:1,content:1,expandIcon:1,expandTooltip:1,expanded:7,focusTrapEnabled:5,group:1,icon:1,iconNumber:9,label:1,mode:1,placement:1,position:1,referenceElement:1},zx.shadowRootOptions=Lf,zx.styles=cpt;let AU=zx;fO("arcgis-expand",AU);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.11 */const dpt=Ln`@layer{arcgis-placement{display:flex;pointer-events:auto;box-shadow:none}.arcgis-placement__container{display:block}}`;var Rf;let ppt=(Rf=class extends gn{constructor(){super(),this._observer=void 0,this._moveChildren=()=>{if(this.el.childElem.parentElement!==this.el)for(let e=this.el.firstElementChild;e!==null;e=this.el.firstElementChild)this.el.childElem.append(e)},this.position="bottom-left",this.arcgisReady=xo(),this.el.childElem=document.createElement("div"),this.el.childElem.classList.add("arcgis-placement__container"),this.listen("arcgisReady",this._startObserving,{once:!0})}connectedCallback(){super.connectedCallback(),this.el.view&&this._startObserving()}willUpdate(e){var i,r;e.has("referenceElement")&&mYe(this,this.referenceElement),e.has("position")&&this.el.childElem&&this.position!==void 0&&((r=(i=this.el.view)==null?void 0:i.ui)==null||r.move(this.el.childElem,this.position))}loaded(){pYe(this),z_(this)}disconnectedCallback(){var e,i,r;super.disconnectedCallback(),this.el.childElem&&((i=(e=this.el.view)==null?void 0:e.ui)==null||i.remove(this.el.childElem)),(r=this._observer)==null||r.disconnect()}_startObserving(){this._moveChildren(),this._observer=new MutationObserver(this._moveChildren),this._observer.observe(this.el,{childList:!0})}},Rf.properties={position:1,referenceElement:1},Rf.shadowRootOptions=Lf,Rf.styles=dpt,Rf);fO("arcgis-placement",ppt);function fpt(){const t=`
  <arcgis-print
    ref={printRef}
    position="top-right"
    allowedFormats={["pdf", "png32"]}
    templateOptions={
      {
        layout: "a4-landscape",
        legendEnabled: false,
        dpi: 200,
      } as __esri.TemplateOptions
    }
    printServiceUrl={"customUrl"}
  ></arcgis-print>
  `,e=`
  const run = () => {
    const { view } = document.querySelector(
      "arcgis-map"
    ) as HTMLArcgisMapElement;
    const map = view.map as __esri.WebMap;

    if (printRef.current && view.ready) {
      printRef.current.templateOptions.legendEnabled = true;
      printRef.current.templateOptions.dpi = 100;
      printRef.current.templateOptions.fileName = map.portalItem?.title;
    }
  };
  `,i=le.useRef(null),r=s=>{i.current&&s.target.view.ready&&(i.current.showPrintAreaEnabled=!0)},n=()=>{var a;const{view:s}=document.querySelector("arcgis-map"),o=s.map;i.current&&s.ready&&(i.current.templateOptions.legendEnabled=!0,i.current.templateOptions.dpi=100,i.current.templateOptions.fileName=(a=o.portalItem)==null?void 0:a.title)};return Be.jsxs("arcgis-map",{"item-id":"91af6caa495d440187ec3937e43a818e",onarcgisViewReadyChange:r,children:[Be.jsx("arcgis-placement",{position:"top-left",children:Be.jsx(n0,{extensions:[em(),Gwe()],editable:!1,value:t,theme:rO})}),Be.jsx("arcgis-expand",{position:"top-left",children:Be.jsxs("arcgis-placement",{children:[Be.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px"},children:[Be.jsx("div",{style:{fontStyle:"oblique",padding:"5px"},children:"// Change configuration programmatically"}),Be.jsx("calcite-button",{iconStart:"play",onClick:()=>n(),children:"Run"})]}),Be.jsx(n0,{extensions:[em(),Q$()],editable:!1,value:e,theme:rO})]})}),Be.jsx("arcgis-print",{ref:i,position:"top-right",allowedFormats:["pdf","png32"],templateOptions:{layout:"a4-landscape",legendEnabled:!1,dpi:200},printServiceUrl:"https://jfp1091.cloud.eaglegis.co.nz/server/rest/services/CustomPrint/ExportWebMapJP/GPServer/Export%20Web%20Map"})]})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const mpt=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function ypt(t){return`${t.split("-").map((e,i)=>i===0?e:`${e[0].toUpperCase()}${e.slice(1)}`).join("")}${mpt.includes(t)?"Input":"Change"}`}const IU="hidden-form-input";function mB(t){return"checked"in t}const PU=new WeakMap,yB=new WeakSet;function gpt(t,e){if(pO(e.parentElement,"[form]"))return!0;const i="calciteInternalFormComponentRegister";let r=!1;return t.addEventListener(i,n=>{r=n.composedPath().some(s=>yB.has(s)),n.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(i,{bubbles:!0,composed:!0})),r}function vpt(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function O1e(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?pO(t,"calcite-radio-button-group"):t}const bpt=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function Hne(t){var a;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,r=O1e(e==null?void 0:e.parentElement);if(!r)return;const n=(a=r==null?void 0:r.nodeName)==null?void 0:a.toLowerCase(),s=n==null?void 0:n.split("-");if(s.length<2||s[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in r&&(r.validity=e==null?void 0:e.validity),r.dispatchEvent(bpt),vpt(r,{message:i,icon:!0,status:"invalid"});const o=ypt(n);r.addEventListener(o,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e==null?void 0:e.validity)},{once:!0})}function S1e(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",Hne,!0),e.requestSubmit(),e.removeEventListener("invalid",Hne,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r!=null&&r.validationMessage){r==null||r.setFocus();break}}),!0):!1}function wpt(t){var e;(e=t.formEl)==null||e.reset()}function Opt(t){const{el:e,value:i}=t,r=_1e(t);if(!r||gpt(r,e))return;t.formEl=r,t.defaultValue=i,mB(t)&&(t.defaultChecked=t.checked);const n=Spt.bind(t);r.addEventListener("reset",n),PU.set(t.el,n),yB.add(e)}function _1e(t){const{el:e,form:i}=t;return i?sQ(e,{id:i}):pO(e,"form")}function Spt(){var t;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),mB(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(t=this.onFormReset)==null||t.call(this)}function _pt(t){const{el:e,formEl:i}=t;if(!i)return;const r=PU.get(e);i.removeEventListener("reset",r),PU.delete(e),t.formEl=null,yB.delete(e)}function H$t(t,e){t.defaultValue=e}const RU="calciteInternalHiddenInputInput",x1e=t=>{t.target.dispatchEvent(new CustomEvent(RU,{bubbles:!0}))},Wne=t=>t.removeEventListener("input",x1e);function xpt(t){const{el:e,formEl:i,name:r,value:n}=t,{ownerDocument:s}=e,o=e.querySelectorAll(`input[slot="${IU}"]`);if(!i||!r){o.forEach(m=>{Wne(m),m.remove()});return}const a=Array.isArray(n)?n:[n],l=[],u=new Set;o.forEach(m=>{const g=a.find(w=>w==m.value);g!=null?(u.add(g),Xne(t,m,g)):l.push(m)});let p;a.forEach(m=>{if(u.has(m))return;let g=l.pop();g||(g=s.createElement("input"),g.ariaHidden="true",g.slot=IU),p||(p=s.createDocumentFragment()),p.append(g),g.addEventListener("input",x1e),Xne(t,g,m)}),p&&e.append(p),l.forEach(m=>{Wne(m),m.remove()})}function Xne(t,e,i){var u;const{defaultValue:r,disabled:n,form:s,name:o,required:a}=t;e.defaultValue=r,e.disabled=n,e.name=o,e.required=a,e.tabIndex=-1,s?e.setAttribute("form",s):e.removeAttribute("form"),mB(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(u=t.syncHiddenFormInput)==null||u.call(t,e);const l=O1e(t.el);if(l&&"validity"in l)for(const p in{...e==null?void 0:e.validity})l.validity[p]=e.validity[p]}const $pt=({component:t})=>(xpt(t),Me`<slot name=${IU}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const $1e="calciteInternalLabelClick",gB="calciteInternalLabelConnected",LU="calciteInternalLabelDisconnected",Yne="calcite-label",aO=new WeakMap,jx=new WeakMap,Z$=new WeakMap,oP=new WeakMap,Eg=new Set,Tpt=t=>{const{id:e}=t,i=e&&sQ(t,{selector:`${Yne}[for="${e}"]`});if(i)return i;const r=pO(t,Yne);return!r||Ept(r,t)?null:r};function Ept(t,e){let i;const r="custom-element-ancestor-check",n=s=>{s.stopImmediatePropagation();const o=s.composedPath();i=o.slice(o.indexOf(e),o.indexOf(t))};return t.addEventListener(r,n,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,n),i.filter(s=>s!==e&&s!==t).filter(s=>{var o;return(o=s.tagName)==null?void 0:o.includes("-")}).length>0}function n3(t){if(!t)return;const e=Tpt(t.el);if(jx.has(e)&&e===t.labelEl||!e&&Eg.has(t))return;const i=Cpt.bind(t);if(e){t.labelEl=e;const r=aO.get(e)||[];r.push(t),aO.set(e,r.sort(E1e)),jx.has(t.labelEl)||(jx.set(t.labelEl,Jne),t.labelEl.addEventListener($1e,Jne)),Eg.delete(t),document.removeEventListener(gB,Z$.get(t)),oP.set(t,i),document.addEventListener(LU,i)}else Eg.has(t)||(i(),document.removeEventListener(LU,oP.get(t)))}function T1e(t){if(!t||(Eg.delete(t),document.removeEventListener(gB,Z$.get(t)),document.removeEventListener(LU,oP.get(t)),Z$.delete(t),oP.delete(t),!t.labelEl))return;const e=aO.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener($1e,jx.get(t.labelEl)),jx.delete(t.labelEl)),aO.set(t.labelEl,e.filter(i=>i!==t).sort(E1e)),t.labelEl=null}function E1e(t,e){return $Te(t.el,e.el)?-1:1}function NU(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function Jne(t){const e=t.detail.sourceEvent.target,i=aO.get(this),r=i.find(s=>s.el===e);if(i.includes(r))return;const n=i[0];n.disabled||n.onLabelClick(t)}function kpt(){Eg.has(this)&&n3(this)}function Cpt(){Eg.add(this);const t=Z$.get(this)||kpt.bind(this);Z$.set(this,t),document.addEventListener(gB,t)}async function W$t(t){var i;if(await t.componentOnReady(),aO.has(t))return;const e=(i=t.ownerDocument)==null?void 0:i.getElementById(t.for);e&&requestAnimationFrame(()=>{for(const r of Eg)if(r.el===e){n3(r);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const qo={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},Mpt=Ln`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y-internal: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent)));border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y-internal);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, currentColor))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}.icon{position:relative;margin:0;display:inline-flex;font-weight:var(--calcite-font-weight-normal);line-height:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand)}:host([kind=brand]) button:hover,:host([kind=brand]) button:focus,:host([kind=brand]) a:hover,:host([kind=brand]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger)}:host([kind=danger]) button:hover,:host([kind=danger]) button:focus,:host([kind=danger]) a:hover,:host([kind=danger]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([kind=neutral]) button:hover,:host([kind=neutral]) button:focus,:host([kind=neutral]) a:hover,:host([kind=neutral]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) button:focus,:host([kind=inverse]) a:hover,:host([kind=inverse]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) a,:host([appearance=outline-fill]) button,:host([appearance=outline]) a,:host([appearance=outline]) button{box-shadow:inset 0 0 0 1px var(--calcite-button-shadow-color, var(--calcite-internal-button-shadow-color, transparent))}:host([appearance=outline-fill]) a:hover,:host([appearance=outline-fill]) button:hover,:host([appearance=outline]) a:hover,:host([appearance=outline]) button:hover{box-shadow:inset 0 0 0 1px var(--calcite-button-shadow-color, var(--calcite-internal-button-shadow-color, var(--calcite-color-foreground-3)))}:host([appearance=outline-fill]) a:focus,:host([appearance=outline-fill]) a:active,:host([appearance=outline-fill]) button:focus,:host([appearance=outline-fill]) button:active,:host([appearance=outline]) a:focus,:host([appearance=outline]) a:active,:host([appearance=outline]) button:focus,:host([appearance=outline]) button:active{box-shadow:inset 0 0 0 2px var(--calcite-button-shadow-color, var(--calcite-internal-button-shadow-color, var(--calcite-color-foreground-3)))}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover);--calcite-internal-button-shadow-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-shadow-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press);--calcite-internal-button-shadow-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-background-color: var(--calcite-color-foreground-1);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-1);--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-shadow-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover);--calcite-internal-button-shadow-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-shadow-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press);--calcite-internal-button-shadow-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-transparent);--calcite-internal-button-border-color: var(--calcite-color-border-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-transparent);--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-shadow-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) button:focus,:host([appearance=transparent]:not(.enable-editing-button)) a:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3);border-block-start-width:1px;border-block-end-width:1px;color:var(--calcite-color-text-3);border-block-start-color:var(--calcite-color-border-input);border-block-end-color:var(--calcite-color-border-input);border-block-style:solid}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:not(.content--slotted){--calcite-internal-button-padding-y-internal: 0}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].enable-editing-button) button{background-color:transparent}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button,:host([appearance=transparent][kind=inverse]) a,:host([appearance=transparent][kind=inverse]) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y-internal: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y-internal: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y-internal: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y-internal: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y-internal: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y-internal: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y-internal: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y-internal: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`;var Lg;let k1e=(Lg=class extends gn{constructor(){super(...arguments),this.attributeWatch=YU(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentEl=Fg(),this.mutationObserver=JM("mutation",()=>this.updateHasContent()),this.resizeObserver=JM("resize",()=>this.setTooltipText()),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.messages=dO(),this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(){var e;await o0(this),(e=this.childEl)==null||e.focus()}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),n3(this),this.formEl=_1e(this)}async load(){e2()&&this.updateHasContent()}updated(){oQ(this)}loaded(){this.setTooltipText()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),T1e(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=wTe(this.el)}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?S1e(this):e==="reset"&&wpt(this))}setTooltipText(){const{contentEl:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){var i;this.childEl=e,e&&((i=this.resizeObserver)==null||i.observe(e))}render(){const e=this.href?"a":"button",i=this.href?Gx`a`:Gx`button`,r=this.loading?Me`<div class=${Xe(qo.buttonLoader)}><calcite-loader class=${Xe(this.loading?qo.loadingIn:qo.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,n=!this.iconStart&&!this.iconEnd,s=Me`<calcite-icon class=${Xe({[qo.icon]:!0,[qo.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${ag(this.scale)}></calcite-icon>`,o=Me`<calcite-icon class=${Xe({[qo.icon]:!0,[qo.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${ag(this.scale)}></calcite-icon>`,a=Me`<span class=${Xe(qo.content)} ${lu(this.contentEl)}><slot></slot></span>`;return aQ({disabled:this.disabled,children:cQ`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:NU(this)} aria-live=polite class=${Xe({[qo.buttonPadding]:n,[qo.buttonPaddingShrunk]:!n,[qo.contentSlotted]:this.hasContent,[qo.iconStartEmpty]:!this.iconStart,[qo.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??tr} href=${(e==="a"&&this.href)??tr} name=${(e==="button"&&this.name)??tr} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??tr} tabindex=${(this.disabled?-1:null)??tr} target=${(e==="a"&&this.target)??tr} title=${this.tooltipText??tr} type=${(e==="button"?this.type:null)??tr} ${lu(this.setChildEl)}>${r}${this.iconStart?s:null}${this.hasContent?a:null}${this.iconEnd?o:null}</${i}>`})}},Lg.properties={hasContent:16,tooltipText:16,alignment:3,appearance:3,disabled:7,download:[3,{converter:HM}],form:3,href:3,iconEnd:3,iconFlipRtl:3,iconStart:3,kind:3,label:1,loading:7,messageOverrides:0,name:3,rel:3,round:7,scale:3,splitChild:3,target:3,type:3,width:3},Lg.styles=Mpt,Lg);hl("calcite-button",k1e);const K2=Object.freeze(Object.defineProperty({__proto__:null,Button:k1e},Symbol.toStringTag,{value:"Module"})),Apt=()=>Be.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",padding:"1rem",position:"relative"},children:[Be.jsx("div",{style:{position:"absolute",bottom:"50%",opacity:.025},children:Be.jsx("calcite-icon",{style:{width:"100%",height:"100%"},scale:"l",icon:"print"})}),Be.jsx("div",{style:{fontSize:"20px"},children:"Welcome to"}),Be.jsx("div",{style:{fontSize:"40px",fontWeight:"bold",paddingBottom:"1rem"},children:"Print for Web Developers"}),Be.jsx("calcite-button",{"icon-start":"print",scale:"l",href:"/demo1",children:"Get Started"})]});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const Kne={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},Ipt=Ln`:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;--calcite-input-message-spacing-value: .25rem;margin-block-start:var(--calcite-input-message-spacing-value)}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:.5rem}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-color-status-danger)}:host([status=warning]) .calcite-input-message-icon{color:var(--calcite-color-status-warning)}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-color-status-success)}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-color-brand)}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`,cP=class cP extends gn{constructor(){super(...arguments),this.iconFlipRtl=!1,this.scale="m",this.status="idle"}connectedCallback(){super.connectedCallback(),this.requestedIcon=YM(Kne,this.icon,this.status)}willUpdate(e){(e.has("status")&&(this.hasUpdated||this.status!=="idle")||e.has("icon"))&&(this.requestedIcon=YM(Kne,this.icon,this.status))}render(){const e=this.el.hidden;return eoe(this.el,"calcite-hydrated-hidden",e),Me`${this.renderIcon(this.requestedIcon)}<slot></slot>`}renderIcon(e){if(e)return Me`<calcite-icon class="calcite-input-message-icon" .flipRtl=${this.iconFlipRtl} .icon=${e} scale=s></calcite-icon>`}};cP.properties={icon:[3,{converter:HM}],iconFlipRtl:7,scale:3,status:3},cP.styles=Ipt;let aP=cP;hl("calcite-input-message",aP);const X$t=Object.freeze(Object.defineProperty({__proto__:null,InputMessage:aP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const Ppt=Ln`:host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%,0,0)}50%{inline-size:40%}to{transform:translate3d(600%,0,0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%,0,0)}50%{inline-size:40%}to{transform:translate3d(-600%,0,0)}}:host([hidden]){display:none}[hidden]{display:none}`;var Ng;let Rpt=(Ng=class extends gn{constructor(){super(...arguments),this.reversed=!1,this.type="determinate",this.value=0}render(){const e=this.type==="determinate",i=e?{width:`${this.value}%`}:{},r=yP(this.el);return Me`<div .ariaLabel=${this.label||this.text} .ariaValueMax=${e?"100":void 0} .ariaValueMin=${e?"0":void 0} .ariaValueNow=${e?this.value:void 0} role=progressbar><div class="track"><div class=${Xe({bar:!0,indeterminate:this.type==="indeterminate",[iQ.rtl]:r==="rtl",reversed:this.reversed})} style=${Kse(i)}></div></div>${this.text?Me`<div class="text">${this.text}</div>`:null}</div>`}},Ng.properties={label:1,reversed:7,text:1,type:3,value:9},Ng.styles=Ppt,Ng);hl("calcite-progress",Rpt);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */function Y$t(t){return t==="Enter"||t===" "}const vB=["0","1","2","3","4","5","6","7","8","9"];/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const Lpt=new RegExp("\\.(0+)?$"),Npt=new RegExp("0+$"),pi=class pi{constructor(e){if(e instanceof pi)return e;const[i,r]=Bpt(e).split(".").concat("");this.value=BigInt(i+r.padEnd(pi.DECIMALS,"0").slice(0,pi.DECIMALS))+BigInt(pi.ROUNDED&&r[pi.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(pi.DECIMALS+1,"0"),i=e.slice(0,-pi.DECIMALS),r=e.slice(-pi.DECIMALS).replace(Npt,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),r.length&&(n.push({type:"decimal",value:e.decimal}),r.split("").forEach(s=>n.push({type:"fraction",value:s}))),n}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=r.length?`${e.decimal}${r.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${n}${s}`}add(e){return pi.fromBigInt(this.value+new pi(e).value)}subtract(e){return pi.fromBigInt(this.value-new pi(e).value)}multiply(e){return pi._divRound(this.value*new pi(e).value,pi.SHIFT)}divide(e){return pi._divRound(this.value*pi.SHIFT,new pi(e).value)}};pi.DECIMALS=100,pi.ROUNDED=!0,pi.SHIFT=BigInt("1"+"0".repeat(pi.DECIMALS)),pi._divRound=(e,i)=>pi.fromBigInt(e/i+(pi.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),pi.fromBigInt=e=>Object.assign(Object.create(pi.prototype),{value:e,isNegative:e<BigInt(0)});let lO=pi;function id(t){return!(!t||isNaN(Number(t)))}function Dpt(t){return!t||!qpt(t)?"":lP(t,e=>{let i=!1;const r=e.split("").filter((n,s)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&s===0?!0:vB.includes(n)).join("");return id(r)?new lO(r).toString():""})}const C1e=/^([-0])0+(?=\d)/,Vpt=/(?!^\.)\.$/,Fpt=/(?!^-)-/g,jpt=/^-\b0\b\.?0*$/,zpt=/0*$/,Upt=t=>lP(t,e=>{const i=e.replace(Fpt,"").replace(Vpt,"").replace(C1e,"$1");return id(i)?jpt.test(i)?i:Qpt(i):e});function Qpt(t){const e=t.split(".")[1],i=new lO(t).toString(),[r,n]=i.split(".");return e&&n!==e?`${r}.${e}`:i}function lP(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>e(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function Bpt(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",n=+e[1],s=e[0].split("."),o=(r?s[0].substring(1):s[0])||"",a=s[1]||"",l=(m,g)=>{const w=Math.abs(g)-m.length,O=w>0?`${"0".repeat(w)}${m}`:m;return`${O.slice(0,g)}.${O.slice(g)}`},u=(m,g)=>{const w=g>m.length?`${m}${"0".repeat(g-m.length)}`:m;return`${w.slice(0,g)}.${w.slice(g)}`},p=n>0?`${o}${u(a,n)}`:`${l(o,n)}${a}`;return`${r?"-":""}${p.charAt(0)==="."?"0":""}${p.replace(Lpt,"").replace(C1e,"")}`}function qpt(t){return vB.some(e=>t.includes(e))}function Gpt(t,e,i){const r=e.split(".")[1];if(r){const n=r.match(zpt)[0];if(n&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const s=i.decimal;return t=t.includes(s)?t:`${t}${s}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const H$="en",M1e=["ar","bg","bs","ca","cs","da","de","el",H$,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],A1e=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",H$,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"..",pm:".."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a.m.",pm:"p.m."},cs:{am:"dop.",pm:"odp."},es:{am:"a.m.",pm:"p.m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"",pm:""},hu:{am:"de. ",pm:"du."},lt:{am:"priepiet",pm:"popiet"},lv:{am:"priekpusdien",pm:"pcpusdien"},mk:{am:".",pm:"."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manh",pm:"da tarde"},"pt-PT":{am:"da manh",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"",pm:""},tr:{am:"",pm:"S"},uk:{am:"",pm:""},vi:{am:"SA",pm:"CH"}}));const Zpt=["arab","arabext","latn"];[...new Set([...M1e,...A1e])];const I1e=t=>Zpt.includes(t),l4=new Intl.NumberFormat().resolvedOptions().numberingSystem,P1e=l4==="arab"||!I1e(l4)?"latn":l4,Hpt=t=>I1e(t)?t:P1e;function Wpt(t,e="cldr"){const i=e==="cldr"?A1e:M1e;return t?i.includes(t)?t:(t=t.toLowerCase(),t==="nb"?"no":e==="t9n"&&t==="pt"?"pt-BR":(t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(r,n,s)=>`${n}-${s.toUpperCase()}`),i.includes(t)||(t=t.split("-")[0])),t==="zh"?"zh-CN":i.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),H$))):H$}class Xpt{constructor(){this.delocalize=e=>this._numberFormatOptions?lP(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?lP(e,i=>id(i.trim())?new lO(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=Wpt(e==null?void 0:e.locale),e.numberingSystem=Hpt(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===H$&&e.numberingSystem===P1e&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,s)=>[n,s])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const Ru=new Xpt;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const Ypt={validationContainer:"validation-container"},Jpt=({scale:t,status:e,id:i,icon:r,message:n})=>Me`<div class=${Xe(Ypt.validationContainer)}><calcite-input-message aria-live=polite .icon=${r} id=${i??ut} .scale=${t} .status=${e}>${n}</calcite-input-message></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const Kpt=["date","datetime-local","month","number","range","time","week"],eft=["email","password","search","tel","text","url"],tft=["email","password","search","tel","text","textarea","url"];function xv(t,e,i,r){const n=i.toLowerCase(),s=t[i];r&&s!=null?e.setAttribute(n,`${s}`):e.removeAttribute(n)}function ift(t,e,i){i.type=t==="textarea"?"text":t;const r=Kpt.includes(t),n=e;xv(n,i,"min",r),xv(n,i,"max",r),xv(n,i,"step",r);const s=tft.includes(t),o=e;xv(o,i,"minLength",s),xv(o,i,"maxLength",s);const a=eft.includes(t);xv(o,i,"pattern",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const Un={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",numberButtonItem:"number-button-item",hasSuffix:"has-suffix",hasPrefix:"has-prefix"},u4={validationMessage:"inputValidationMessage"},ese={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},rft={action:"action"},nft=Ln`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) input[type=file],:host([scale=s]) textarea{min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea,:host([scale=m]) input[type=file]{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea,:host([scale=l]) input[type=file]{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{position:relative;margin:0;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;text-overflow:ellipsis;border-width:1px;border-style:solid;font-family:inherit;font-weight:var(--calcite-font-weight-normal);border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-background-color, var(--calcite-color-foreground-1));color:var(--calcite-input-text-color, var(--calcite-color-text-1));transition:var(--calcite-animation-timing),block-size 0,outline-offset 0s;-webkit-appearance:none}textarea:placeholder-shown,input:placeholder-shown{text-overflow:ellipsis}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}textarea{border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-prefix input{border-start-start-radius:0;border-end-start-radius:0}.has-suffix input,.element-wrapper:has(.clear-button) input,:host([number-button-type=vertical][type=number]) input,:host([number-button-type=horizontal]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .clear-button,:host([number-button-type=horizontal][type=number]) .clear-button{border-start-end-radius:0;border-end-end-radius:0}:host([number-button-type=horizontal]) input{border-start-start-radius:0;border-start-end-radius:0;border-end-start-radius:0;border-end-end-radius:0}.has-prefix .prefix:first-child,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=down]{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-suffix .suffix,:host([number-button-type=vertical][type=number][read-only]) .has-suffix .suffix,:host([clearable]) .clear-button,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=up]{border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([clearable]) .has-suffix .clear-button{border-end-end-radius:0;border-start-end-radius:0}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px;border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]{border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-input-text-color, var(--calcite-color-text-1))}input[readonly],textarea[readonly]{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-input-background-color, var(--calcite-color-background))}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-input-text-color, var(--calcite-color-text-1))}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .icon{inset-inline-start:.5rem}:host([scale=m]) .icon{inset-inline-start:.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;display:block;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-icon-color, var(--calcite-color-text-3));z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;outline-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.clear-button calcite-icon{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.clear-button:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.clear-button:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.clear-button:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.clear-button:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.clear-button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block;--calcite-progress-background-color: var(--calcite-input-loading-background-color);--calcite-progress-fill-color: var(--calcite-input-loading-fill-color)}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-medium);line-height:1;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input))}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto);background-color:var(--calcite-input-prefix-background-color, var(--calcite-color-background));color:var(--calcite-input-prefix-text-color, var(--calcite-color-text-2))}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto);background-color:var(--calcite-input-suffix-background-color, var(--calcite-color-background));color:var(--calcite-input-suffix-text-color, var(--calcite-color-text-2))}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal{border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));order:1;max-block-size:100%;min-block-size:100%;align-self:stretch;border-width:1px;border-style:solid}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=up]{border-inline-start-width:0px;order:5}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:.5rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.number-button-item:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.number-button-item:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.number-button-item:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.number-button-item:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center;border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));box-shadow:var(--calcite-input-shadow, var(--calcite-shadow-none))}input[type=date]::-webkit-input-placeholder{visibility:hidden!important}:host([type=color]) input{padding:.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;background-color:var(--calcite-color-foreground-1);text-align:center;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));block-size:initial}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:.5rem}:host([type=file][scale=m]) input{padding-block:.25rem;padding-inline:.75rem}:host([type=file][scale=l]) input{padding-block:.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,hP=class hP extends gn{constructor(){super(),this.actionWrapperEl=Fg(),this.attributeWatch=YU(["autofocus","enterkeyhint","inputmode","spellcheck"],this.handleGlobalAttributesChanged),this.childElType="input",this.inputWrapperEl=Fg(),this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.previousValueOrigin="initial",this.userChangedValue=!1,this._value="",this.slottedActionElDisabledInternally=!1,this.alignment="start",this.clearable=!1,this.disabled=!1,this.editingEnabled=!1,this.groupSeparator=!1,this.iconFlipRtl=!1,this.loading=!1,this.localeFormat=!1,this.messages=dO(),this.multiple=!1,this.numberButtonType="vertical",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.type="text",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputChange=xo({cancelable:!1}),this.calciteInputInput=xo(),this.calciteInternalInputBlur=xo({cancelable:!1}),this.calciteInternalInputFocus=xo({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}get isClearable(){var e;return!this.isTextarea&&(this.clearable||this.type==="search")&&((e=this.value)==null?void 0:e.length)>0}get isTextarea(){return this.childElType==="textarea"}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueWatcher(e,i),e&&this._value===""&&this.setValue({origin:"reset",value:i}))}async selectText(){var e,i;this.type==="number"?(e=this.childNumberEl)==null||e.select():(i=this.childEl)==null||i.select()}async setFocus(){await o0(this),uoe(this.type==="number"?this.childNumberEl:this.childEl)}connectedCallback(){super.connectedCallback(),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),n3(this),Opt(this),this.el.addEventListener(RU,this.onHiddenFormInputInput)}async load(){var e,i;this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(e=this.max)==null?void 0:e.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=YM(ese,this.icon,this.type),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:id(this.value)?this.value:""})))}willUpdate(e){var i,r;e.has("max")&&(this.maxString=((i=this.max)==null?void 0:i.toString())||null),e.has("min")&&(this.minString=((r=this.min)==null?void 0:r.toString())||null),(e.has("icon")||e.has("type")&&(this.hasUpdated||this.type!=="text"))&&(this.requestedIcon=YM(ese,this.icon,this.type))}updated(){oQ(this)}loaded(){}disconnectedCallback(){super.disconnectedCallback(),T1e(this),_pt(this),this.el.removeEventListener(RU,this.onHiddenFormInputInput)}handleGlobalAttributesChanged(){this.requestUpdate()}valueWatcher(e,i){if(!this.userChangedValue){if(this.type==="number"&&(e==="Infinity"||e==="-Infinity")){this.displayedValue=e,this.previousEmittedValue=e;return}this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?id(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}keyDownHandler(e){this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&S1e(this)&&e.preventDefault())}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,r,n){const{value:s}=this;if(s==="Infinity"||s==="-Infinity")return;const o=e==="up"?1:-1,a=this.step==="any"?1:Math.abs(this.step||1),l=new lO(s!==""?s:"0").add(`${a*o}`),u=()=>typeof r=="number"&&!isNaN(r)&&l.subtract(`${r}`).isNegative,p=()=>typeof i=="number"&&!isNaN(i)&&!l.subtract(`${i}`).isNegative,m=u()?`${r}`:p()?`${i}`:l.toString();this.setValue({committing:!0,nativeEvent:n,origin:"user",value:m})}clearInputValue(e){this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})}emitChangeIfUserModified(){this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))}inputBlurHandler(){window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()}clickHandler(e){if(this.disabled)return;const i=e.composedPath();!i.includes(this.inputWrapperEl.value)||i.includes(this.actionWrapperEl.value)||this.setFocus()}inputFocusHandler(){this.calciteInternalInputFocus.emit()}inputInputHandler(e){this.disabled||this.readOnly||(this.type==="file"&&(this.files=this.childEl.files),this.setValue({nativeEvent:e,origin:"user",value:e.target.value}))}inputKeyDownHandler(e){this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()}inputNumberInputHandler(e){if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;Ru.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=Ru.delocalize(i);e.inputType==="insertFromPaste"?(id(r)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:Dpt(r)}),this.childNumberEl.value=this.displayedValue):this.setValue({nativeEvent:e,origin:"user",value:r})}inputNumberKeyDownHandler(e){if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...vB,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const r=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||r){e.key==="Enter"&&this.emitChangeIfUserModified();return}Ru.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===Ru.decimal&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.indexOf(Ru.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberEl.value||this.value&&!/[eE]/.test(this.childNumberEl.value))||e.key==="-"&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.split("-").length<=2)||e.preventDefault())}nudgeNumberValue(e,i){if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const r=this.maxString?parseFloat(this.maxString):null,n=this.minString?parseFloat(this.minString):null,s=150;this.incrementOrDecrementNumberValue(e,r,n,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let o=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(o){o=!1;return}this.incrementOrDecrementNumberValue(e,r,n,i)},s)}numberButtonPointerUpAndOutHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}numberButtonPointerDownHandler(e){if(!xTe(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)}syncHiddenFormInput(e){ift(this.type,this,e)}setChildElRef(e){this.childEl=e}setChildNumberElRef(e){this.childNumberEl=e}setInputValue(e){this.type==="number"&&this.childNumberEl?this.childNumberEl.value=e:this.childEl&&(this.childEl.value=e)}setPreviousEmittedValue(e){this.previousEmittedValue=this.normalizeValue(e)}normalizeValue(e){return this.type==="number"?id(e)?e:"":e}setPreviousValue(e){this.previousValue=this.normalizeValue(e)}setValue({committing:e=!1,nativeEvent:i,origin:r,previousValue:n,value:s}){var o,a;if(this.setPreviousValue(n??this.value),this.previousValueOrigin=r,this.type==="number"){Ru.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const l=((o=this.previousValue)==null?void 0:o.length)>s.length||((a=this.value)==null?void 0:a.length)>s.length,u=s.charAt(s.length-1)===".",p=u&&l?s:Upt(s),m=s&&!p?id(this.previousValue)?this.previousValue:"":p;let g=Ru.localize(m);r!=="connected"&&!u&&(g=Gpt(g,m,Ru)),this.displayedValue=u&&l?`${g}${Ru.decimal}`:g,this.userChangedValue=r==="user"&&this.value!==m,this.value=["-","."].includes(m)?"":m}else this.userChangedValue=r==="user"&&this.value!==s,this.value=s;r==="direct"&&(this.setInputValue(s),this.previousEmittedValue=s),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?Ru.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())}inputKeyUpHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!id(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=yP(this.el),i=Me`<div class=${Xe(Un.loader)}><calcite-progress .label=${this.messages.loading} type=indeterminate></calcite-progress></div>`,r=Me`<button .ariaLabel=${this.messages.clear} class=${Xe(Un.clearButton)} .disabled=${this.disabled||this.readOnly} @click=${this.clearInputValue} tabindex=-1 type=button><calcite-icon icon=x .scale=${ag(this.scale)}></calcite-icon></button>`,n=Me`<calcite-icon class=${Xe(Un.inputIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${ag(this.scale)}></calcite-icon>`,s=this.numberButtonType==="horizontal",o=Me`<button aria-hidden=true class=${Xe({[Un.numberButtonItem]:!0,[Un.buttonItemHorizontal]:s})} data-adjustment=up .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon icon=chevron-up .scale=${ag(this.scale)}></calcite-icon></button>`,a=Me`<button aria-hidden=true class=${Xe({[Un.numberButtonItem]:!0,[Un.buttonItemHorizontal]:s})} data-adjustment=down .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon icon=chevron-down .scale=${ag(this.scale)}></calcite-icon></button>`,l=Me`<div class=${Xe(Un.numberButtonWrapper)}>${o}${a}</div>`,u=Me`<div class=${Xe(Un.prefix)}>${this.prefixText}</div>`,p=Me`<div class=${Xe(Un.suffix)}>${this.suffixText}</div>`,m=this.el.autofocus,g=this.el.enterKeyHint,w=this.el.inputMode,O=this.type==="number"?Pi("localized-input",Me`<input accept=${this.accept??ut} aria-errormessage=${u4.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${NU(this)} autocomplete=${this.autocomplete??ut} .autofocus=${m} value=${this.defaultValue??ut} .disabled=${this.disabled?!0:null} enterkeyhint=${g??ut} inputmode=${w??ut} maxlength=${this.maxLength??ut} minlength=${this.minLength??ut} .multiple=${this.multiple} name=${ut} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputNumberInputHandler} @keydown=${this.inputNumberKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??ut} placeholder=${(this.placeholder||"")??ut} .readOnly=${this.readOnly} type=text .value=${yH(this.displayedValue??"")} ${lu(this.setChildNumberElRef)}>`):null,_=this.childElType==="input"?Gx`input`:Gx`textarea`,x=this.type!=="number"?cQ`<${_} accept=${this.accept??ut} aria-errormessage=${u4.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${NU(this)} autocomplete=${this.autocomplete??ut} .autofocus=${m} class=${Xe({[Un.editingEnabled]:this.editingEnabled,[Un.inlineChild]:!!this.inlineEditableEl})} .defaultValue=${this.defaultValue??""} .disabled=${this.disabled?!0:null} enterkeyhint=${g??ut} inputmode=${w??ut} max=${this.maxString??ut} maxlength=${this.maxLength??ut} min=${this.minString??ut} minlength=${this.minLength??ut} .multiple=${this.multiple} name=${this.name??ut} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputInputHandler} @keydown=${this.inputKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??ut} placeholder=${(this.placeholder||"")??ut} .readOnly=${this.readOnly} .required=${this.required?!0:null} spellcheck=${this.el.spellcheck??ut} step=${this.step??ut} tabindex=${(this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null)??ut} type=${this.type??ut} .value=${yH(this.value??"")} ${lu(this.setChildElRef)}></${_}>`:null;return aQ({disabled:this.disabled,children:Me`<div class=${Xe({[Un.inputWrapper]:!0,[iQ.rtl]:e==="rtl",[Un.hasSuffix]:this.suffixText,[Un.hasPrefix]:this.prefixText})} ${lu(this.inputWrapperEl)}>${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?a:null}${this.prefixText?u:null}<div class=${Xe(Un.wrapper)}>${O}${x}${this.isClearable?r:null}${this.requestedIcon?n:null}${this.loading?i:null}</div><div class=${Xe(Un.actionWrapper)} ${lu(this.actionWrapperEl)}><slot name=${rft.action}></slot></div>${this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?l:null}${this.suffixText?p:null}${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?o:null}${$pt({component:this})}</div>${this.validationMessage&&this.status==="invalid"?Jpt({icon:this.validationIcon,id:u4.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};hP.properties={displayedValue:16,slottedActionElDisabledInternally:16,accept:1,alignment:3,autocomplete:0,clearable:7,disabled:7,editingEnabled:7,files:0,form:3,groupSeparator:7,icon:[3,{converter:HM}],iconFlipRtl:7,label:1,loading:7,localeFormat:5,max:11,maxLength:11,messageOverrides:0,min:11,minLength:11,multiple:5,name:3,numberButtonType:3,numberingSystem:3,pattern:1,placeholder:1,prefixText:1,readOnly:7,required:7,scale:3,status:3,step:3,suffixText:1,type:3,validationIcon:[3,{converter:HM}],validationMessage:1,validity:0,value:1},hP.styles=nft;let uP=hP;hl("calcite-input",uP);const sft=Object.freeze(Object.defineProperty({__proto__:null,Input:uP},Symbol.toStringTag,{value:"Module"}));function oft(){const[t,e]=le.useState(""),[i,r]=le.useState("277e16e68d4b426183c760e9435f7fac"),[n,s]=le.useState(),o=le.useRef(null),a=g=>{o.current&&g.target.view.ready&&(o.current.showPrintAreaEnabled=!0,s(o.current))},l=`
const { view } = document.querySelector("arcgis-map") as HTMLArcgisMapElement;
const printEl = document.createElement("arcgis-print");
printEl.portal = new Portal({
  url: "${t}sharing",
  authMode: "immediate",
  authorizedCrossOriginDomains: [portalUrl],
});
printEl.showPrintAreaEnabled = true;
view.ui.add(printEl, "bottom-left");
  `,u=`
const applyPrintTemplate = () => {
  if (print) {
    print.showPrintAreaEnabled = false;
    const layoutItem = new PortalItem({
      portal: print.portal,
      id: "${i}",
    });
    layoutItem.load().then(() => {
      print.templateOptions = { layoutItem } as __esri.TemplateOptions;
      print.showPrintAreaEnabled = true;
    });
  }
};
  `,p=()=>{const{view:g}=document.querySelector("arcgis-map");n&&n.destroy();const w=document.createElement("arcgis-print");w.portal=new Lr({url:`${t}sharing`,authMode:"immediate",authorizedCrossOriginDomains:[t]}),w.showPrintAreaEnabled=!0,s(w),g.ui.add(w,"bottom-left")},m=()=>{if(n){n.showPrintAreaEnabled=!1;const g=new Hs({portal:n.portal,id:i});g.load().then(()=>{n.templateOptions={layoutItem:g},n.showPrintAreaEnabled=!0})}};return Be.jsxs("arcgis-map",{"item-id":"91af6caa495d440187ec3937e43a818e",onarcgisViewReadyChange:a,children:[Be.jsx("arcgis-placement",{position:"top-right",children:Be.jsxs("div",{style:{padding:"10px",background:"white"},children:[Be.jsxs("div",{style:{display:"flex"},children:[Be.jsx("calcite-input",{placeholder:"portalUrl",value:t,onInput:g=>e(g.currentTarget.value),style:{flexGrow:1}}),Be.jsx("calcite-button",{iconStart:"play",onClick:()=>p(),children:"Apply Portal"})]}),Be.jsx(n0,{extensions:[em(),Q$()],editable:!1,value:l,theme:rO})]})}),Be.jsx("arcgis-expand",{position:"top-right",children:Be.jsx("arcgis-placement",{children:Be.jsxs("div",{style:{padding:"10px",background:"white"},children:[Be.jsxs("div",{style:{display:"flex"},children:[Be.jsx("calcite-input",{disabled:!t||!(n!=null&&n.portal.url.includes(t)),placeholder:"layoutItemId",value:i,onInput:g=>r(g.currentTarget.value),style:{flexGrow:1}}),Be.jsx("calcite-button",{disabled:!t||!(n!=null&&n.portal.url.includes(t)),iconStart:"play",onClick:()=>m(),children:"Apply Layout Item"})]}),Be.jsx(n0,{extensions:[em(),Q$()],editable:!1,value:u,theme:rO})]})})}),Be.jsx("arcgis-print",{ref:o,position:"bottom-left"})]})}function aft(){const[t,e]=le.useState(""),[i,r]=le.useState(),n=le.useRef(null),s=l=>{n.current&&l.target.view.ready&&(n.current.showPrintAreaEnabled=!0,r(n.current))},o=`
  const print = document.createElement("arcgis-print");
  print.printServiceUrl = printServiceUrl;
  print.showPrintAreaEnabled = true;
  `,a=()=>{const{view:l}=document.querySelector("arcgis-map");i&&i.destroy();const u=document.createElement("arcgis-print");u.printServiceUrl=t,u.showPrintAreaEnabled=!0,r(u),l.ui.add(u,"bottom-left")};return Be.jsxs("arcgis-map",{"item-id":"91af6caa495d440187ec3937e43a818e",onarcgisViewReadyChange:s,children:[Be.jsx("arcgis-placement",{position:"top-right",children:Be.jsxs("div",{style:{padding:"10px",background:"white"},children:[Be.jsxs("div",{style:{display:"flex"},children:[Be.jsx("calcite-input",{placeholder:"printServiceUrl",value:t,onChange:l=>e(l.currentTarget.value),style:{flexGrow:1}}),Be.jsx("calcite-button",{iconStart:"play",onClick:()=>a(),children:"Run"})]}),Be.jsx(n0,{extensions:[em(),Q$()],editable:!1,value:o,theme:rO})]})}),Be.jsx("arcgis-print",{ref:n,position:"bottom-left"})]})}function lft(){const t=window.location.pathname;return Be.jsxs("calcite-shell",{children:[Be.jsxs("calcite-navigation",{slot:"header",children:[Be.jsx("calcite-navigation-logo",{slot:"logo",heading:"Print for Web Developers",description:t}),Be.jsxs("calcite-menu",{slot:"content-end",label:"",children:[Be.jsx("calcite-menu-item",{active:t==="/",text:"Home","icon-start":"home","text-enabled":!0,label:"",href:"/"}),Be.jsx("calcite-menu-item",{active:t==="/demo1",text:"Demo 1","icon-start":"book","text-enabled":!0,label:"",href:"/demo1"}),Be.jsx("calcite-menu-item",{active:t==="/demo2","text-enabled":!0,text:"Demo 2","icon-start":"book",label:"",href:"/demo2"}),Be.jsx("calcite-menu-item",{active:t==="/demo3","text-enabled":!0,text:"Demo 3","icon-start":"book",label:"",href:"/demo3"}),Be.jsx("calcite-menu-item",{active:t==="/demo4","text-enabled":!0,text:"Demo 4","icon-start":"book",label:"",href:"/demo4"})]})]}),Be.jsxs(Vxe,{children:[Be.jsx($v,{index:!0,element:Be.jsx(Apt,{})}),Be.jsx($v,{path:"demo1",element:Be.jsx(zlt,{})}),Be.jsx($v,{path:"demo2",element:Be.jsx(fpt,{})}),Be.jsx($v,{path:"demo3",element:Be.jsx(oft,{})}),Be.jsx($v,{path:"demo4",element:Be.jsx(aft,{})})]})]})}Z_e.createRoot(document.getElementById("root")).render(Be.jsx(le.StrictMode,{children:Be.jsx(a$e,{basename:"/esri-devsummit-2025",children:Be.jsx(lft,{})})}));export{S1e as $,HM as A,$pt as B,RU as C,Opt as D,ut as E,YM as F,id as G,Ru as H,NU as I,lO as J,vB as K,gn as L,xTe as M,ift as N,Upt as O,Gpt as P,ag as Q,yH as R,hl as S,T1e as T,Dpt as U,Jpt as V,_pt as W,gB as X,W$t as Y,LU as Z,yTe as _,hoe as a,_ge as a$,loe as a0,Gx as a1,cQ as a2,rQ as a3,eoe as a4,sQ as a5,Cft as a6,G as a7,F3e as a8,pe as a9,uUe as aA,bj as aB,OUe as aC,K as aD,tm as aE,z3e as aF,kO as aG,O8 as aH,bDe as aI,Ihe as aJ,PDe as aK,h as aL,f as aM,A as aN,q as aO,Rt as aP,Ot as aQ,_Ue as aR,Ws as aS,RHe as aT,YHe as aU,Mfe as aV,qHe as aW,AUe as aX,xge as aY,zHe as aZ,$ge as a_,Bt as aa,koe as ab,rr as ac,EEe as ad,kw as ae,bt as af,Oyt as ag,Aft as ah,Rft as ai,xg as aj,Vw as ak,IA as al,qi as am,Co as an,vQ as ao,ha as ap,Wt as aq,u2 as ar,Rc as as,W6e as at,Fae as au,kP as av,vDe as aw,B3e as ax,q3e as ay,G3e as az,oQ as b,Ume as b$,JHe as b0,GHe as b1,IHe as b2,LHe as b3,YP as b4,Poe as b5,Jmt as b6,Tc as b7,O2 as b8,a$ as b9,Mc as bA,P1t as bB,wK as bC,Te as bD,Hpe as bE,Cc as bF,$Ne as bG,_Ne as bH,VOt as bI,Df as bJ,dSt as bK,G0t as bL,SO as bM,yn as bN,Bg as bO,xc as bP,mue as bQ,wg as bR,o8 as bS,fue as bT,hY as bU,Pvt as bV,igt as bW,i2 as bX,a0 as bY,J as bZ,l0t as b_,$8 as ba,Je as bb,pAe as bc,IP as bd,PP as be,WQ as bf,XQ as bg,dAe as bh,h0t as bi,vP as bj,kZe as bk,AR as bl,Ff as bm,Hs as bn,Lr as bo,uc as bp,Ye as bq,Q0t as br,KP as bs,Po as bt,SGe as bu,_Ge as bv,xGe as bw,te as bx,g$ as by,af as bz,xo as c,a3e as c$,da as c0,rm as c1,im as c2,Qf as c3,oi as c4,pn as c5,ma as c6,H4 as c7,Qi as c8,Zs as c9,iyt as cA,Cfe as cB,AA as cC,kfe as cD,P4e as cE,gde as cF,aVe as cG,H0t as cH,$o as cI,Z0t as cJ,vde as cK,j8 as cL,vO as cM,zXe as cN,g_t as cO,we as cP,v_t as cQ,ft as cR,l3e as cS,nt as cT,Re as cU,bd as cV,_O as cW,LFe as cX,RFe as cY,mn as cZ,_r as c_,TA as ca,Z4 as cb,X4 as cc,Bce as cd,cqe as ce,iXe as cf,D8 as cg,Ox as ch,Iqe as ci,JX as cj,gg as ck,b4 as cl,Xft as cm,g8e as cn,$oe as co,lge as cp,Sfe as cq,sm as cr,mUe as cs,Tfe as ct,Y6e as cu,cDe as cv,_fe as cw,X6e as cx,Efe as cy,$Ue as cz,Xe as d,MO as d$,Av as d0,rl as d1,yVe as d2,Vht as d3,pa as d4,Tgt as d5,fVe as d6,yO as d7,Dht as d8,bde as d9,Pgt as dA,Agt as dB,Igt as dC,IOt as dD,sc as dE,gJ as dF,dJ as dG,joe as dH,Uw as dI,hfe as dJ,Xz as dK,Cmt as dL,bg as dM,na as dN,p8e as dO,mwt as dP,Tt as dQ,gwt as dR,MOt as dS,wpe as dT,vn as dU,qf as dV,qH as dW,Ss as dX,zi as dY,Oe as dZ,It as d_,Ec as da,cR as db,We as dc,jE as dd,p2 as de,rt as df,Zx as dg,t7 as dh,y2 as di,el as dj,Sle as dk,ZQ as dl,sAe as dm,ve as dn,Bpe as dp,qpe as dq,UXe as dr,AJ as ds,lI as dt,COt as du,Ht as dv,pue as dw,Hwt as dx,k8e as dy,Dt as dz,Ln as e,FEe as e$,TWe as e0,pd as e1,Kn as e2,bi as e3,Wfe as e4,qe as e5,y$ as e6,cn as e7,oI as e8,xj as e9,QSt as eA,$s as eB,Svt as eC,$2 as eD,Dvt as eE,Mo as eF,lmt as eG,Mle as eH,uge as eI,t9 as eJ,H4e as eK,q0t as eL,$c as eM,d2 as eN,g2 as eO,nyt as eP,bP as eQ,wP as eR,Lft as eS,pMe as eT,kMe as eU,mK as eV,EA as eW,Bft as eX,Ce as eY,Sg as eZ,l2 as e_,tze as ea,Ii as eb,SJ as ec,wd as ed,whe as ee,qme as ef,B7e as eg,EXe as eh,RMe as ei,xr as ej,byt as ek,U7e as el,yXe as em,nht as en,wi as eo,Kr as ep,gct as eq,q$ as er,xe as es,hct as et,Vx as eu,wOe as ev,y$t as ew,J2 as ex,vct as ey,Fvt as ez,Fg as f,Lyt as f$,bc as f0,mmt as f1,Ayt as f2,Iyt as f3,d4e as f4,x2 as f5,k0t as f6,Td as f7,C0t as f8,eY as f9,H$t as fA,kft as fB,Vft as fC,Mft as fD,jft as fE,Fft as fF,Kse as fG,Tft as fH,CA as fI,hvt as fJ,cvt as fK,zVe as fL,Xle as fM,yUe as fN,Uyt as fO,c6e as fP,syt as fQ,Xze as fR,yW as fS,kle as fT,Cle as fU,dr as fV,ryt as fW,rDe as fX,Ahe as fY,aUe as fZ,Phe as f_,E0t as fa,qft as fb,Gft as fc,f$ as fd,hr as fe,Lpe as ff,om as fg,Uee as fh,Vee as fi,Jn as fj,es as fk,Gyt as fl,Gs as fm,Rw as fn,W_t as fo,Uce as fp,a9 as fq,k1t as fr,wUe as fs,nae as ft,tde as fu,pke as fv,$Ee as fw,E$t as fx,DIe as fy,xft as fz,yP as g,L0t as g$,lAe as g0,W3e as g1,Y as g2,lDe as g3,H3e as g4,JP as g5,bR as g6,Emt as g7,bQ as g8,h1t as g9,bV as gA,Vb as gB,LP as gC,wgt as gD,u0 as gE,nee as gF,ree as gG,RXe as gH,gk as gI,kt as gJ,kAe as gK,vAe as gL,Ule as gM,wEe as gN,Oj as gO,aI as gP,hv as gQ,Coe as gR,Aoe as gS,Ioe as gT,emt as gU,hmt as gV,vOt as gW,qSt as gX,HSt as gY,ZSt as gZ,zSt as g_,mMe as ga,l0 as gb,M7e as gc,Qme as gd,C7e as ge,kj as gf,Fb as gg,c0t as gh,HP as gi,Eyt as gj,Wft as gk,OLe as gl,_C as gm,Syt as gn,fa as go,yZe as gp,PBe as gq,bK as gr,lM as gs,I1t as gt,lz as gu,wA as gv,sae as gw,Rr as gx,mSt as gy,uC as gz,eEe as h,iUe as h$,Yut as h0,$St as h1,TSt as h2,Y9 as h3,Eze as h4,yJ as h5,mJ as h6,fJ as h7,pJ as h8,jwt as h9,Z1t as hA,v0t as hB,JA as hC,p0t as hD,Nc as hE,Us as hF,SNe as hG,QYe as hH,kYe as hI,xhe as hJ,PCe as hK,Q3e as hL,j3e as hM,gUe as hN,eUe as hO,MUe as hP,IUe as hQ,l6e as hR,i6e as hS,PR as hT,HHe as hU,Vce as hV,uAe as hW,yAe as hX,TUe as hY,rUe as hZ,YA as h_,Jz as ha,Kmt as hb,Jwt as hc,Mvt as hd,vvt as he,mgt as hf,ogt as hg,mN as hh,vIe as hi,kLe as hj,r2 as hk,Hx as hl,mu as hm,qa as hn,Tqe as ho,s1t as hp,n1t as hq,CH as hr,LXe as hs,jce as ht,nC as hu,oUe as hv,M0t as hw,U9 as hx,Kb as hy,ul as hz,Pi as i,P as i$,tUe as i0,xfe as i1,Ivt as i2,a2 as i3,zm as i4,Rn as i5,Zyt as i6,mO as i7,o2 as i8,Xr as i9,NJ as iA,hJ as iB,Qft as iC,_x as iD,Sj as iE,ife as iF,N8 as iG,c2 as iH,L1t as iI,y0 as iJ,hUe as iK,Cn as iL,Z_t as iM,Qxt as iN,Gu as iO,Lae as iP,Xyt as iQ,Tw as iR,Wle as iS,Y7 as iT,tP as iU,Ed as iV,Tr as iW,Qlt as iX,ru as iY,Ylt as iZ,um as i_,SEe as ia,Zft as ib,ole as ic,zg as id,jQ as ie,$yt as ig,ll as ih,Aw as ii,SYe as ij,L8e as ik,_j as il,wJ as im,yOt as io,bJ as ip,Ja as iq,Hfe as ir,Zh as is,eu as it,HC as iu,Sbt as iv,lfe as iw,d9 as ix,hj as iy,ufe as iz,tr as j,Dc as j$,lr as j0,dx as j1,fut as j2,aut as j3,Ys as j4,lut as j5,Jlt as j6,$ft as j7,fTe as j8,uft as j9,Sft as jA,Oft as jB,wft as jC,_ft as jD,Ka as jE,Xse as jF,hE as jG,bIe as jH,RP as jI,rgt as jJ,ELe as jK,EP as jL,wIe as jM,I as jN,ca as jO,f2 as jP,AOt as jQ,Ug as jR,jqe as jS,$R as jT,Ame as jU,r1t as jV,ht as jW,OR as jX,tge as jY,$P as jZ,nY as j_,aA as ja,LCe as jb,cAe as jc,t_t as jd,DV as je,e_t as jf,lC as jg,gF as jh,bgt as ji,mvt as jj,Lvt as jk,LQ as jl,Jx as jm,ple as jn,cJ as jo,Pwt as jp,Iwt as jq,Awt as jr,Mwt as js,Lwt as jt,Rwt as ju,Cwt as jv,kwt as jw,J$ as jx,K$ as jy,Yh as jz,iQ as k,nQ as k$,jv as k0,Io as k1,gXe as k2,Hye as k3,XGe as k4,c_t as k5,$Ze as k6,V2 as k7,QWe as k8,Nge as k9,eIe as kA,m2 as kB,Byt as kC,vJ as kD,gOt as kE,TW as kF,_ut as kG,Dte as kH,Xg as kI,r6e as kJ,BH as kK,Ewt as kL,ECe as kM,dgt as kN,OQ as kO,Nmt as kP,Lmt as kQ,j9e as kR,kke as kS,OI as kT,Eke as kU,lgt as kV,Kft as kW,o$ as kX,d7e as kY,d_t as kZ,PEe as k_,TZe as ka,OWe as kb,F2 as kc,su as kd,Fge as ke,cf as kf,i$ as kg,u$t as kh,nA as ki,sXe as kj,VBe as kk,UWe as kl,ZWe as km,tXe as kn,DBe as ko,hqe as kp,l$t as kq,E1t as kr,ZP as ks,mXe as kt,DA as ku,Nqe as kv,lWe as kw,iP as kx,eC as ky,ZAe as kz,m4 as l,Ske as l$,I9e as l0,kEe as l1,yyt as l2,tMe as l3,Jae as l4,_s as l5,CP as l6,t2 as l7,_yt as l8,pQ as l9,Dx as lA,qs as lB,eut as lC,Wwe as lD,kde as lE,Ede as lF,rR as lG,Blt as lH,gne as lI,An as lJ,rSt as lK,dt as lL,Jze as lM,e6e as lN,afe as lO,yLe as lP,e8 as lQ,XAe as lR,P8e as lS,xf as lT,e9e as lU,BYe as lV,i9e as lW,r9e as lX,vne as lY,CO as lZ,Bxt as l_,fQ as la,MZe as lb,sVe as lc,oVe as ld,hue as le,cIe as lf,Kyt as lg,Dde as lh,gfe as li,ggt as lj,mke as lk,Mmt as ll,fSt as lm,pSt as ln,Yye as lo,Wye as lp,hSt as lq,dR as lr,uyt as ls,lyt as lt,xYe as lu,NR as lv,Rpe as lw,Ipe as lx,Ije as ly,Rje as lz,uoe as m,dvt as m$,dmt as m0,_2 as m1,uJ as m2,hIe as m3,t6e as m4,hu as m5,t8 as m6,i8 as m7,sI as m8,Kle as m9,cFe as mA,PO as mB,Xp as mC,R6e as mD,Sf as mE,Kwt as mF,zmt as mG,jpe as mH,tI as mI,zw as mJ,cc as mK,n9 as mL,uj as mM,Cpe as mN,P2 as mO,R0t as mP,P0t as mQ,h0 as mR,au as mS,$4e as mT,oyt as mU,uOe as mV,Q5e as mW,v$t as mX,rze as mY,pvt as mZ,fvt as m_,Qwt as ma,zwt as mb,Uwt as mc,E8e as md,W1t as me,X1t as mf,H1t as mg,gMe as mh,$d as mi,gvt as mj,omt as mk,amt as ml,smt as mm,E6e as mn,k6e as mo,Pne as mp,$fe as mq,ize as mr,hDe as ms,iDe as mt,nDe as mu,CS as mv,od as mw,Zde as mx,K8 as my,IO as mz,lu as n,P$t as n$,zQ as n0,VQ as n1,wDe as n2,gDe as n3,lUe as n4,yDe as n5,Dce as n6,qVe as n7,SLe as n8,Wyt as n9,yv as nA,F9 as nB,tGe as nC,nmt as nD,OJ as nE,_9e as nF,mOt as nG,R8e as nH,TJ as nI,$J as nJ,n6e as nK,Qs as nL,R2 as nM,hw as nN,Jft as nO,xEe as nP,Yft as nQ,Kze as nR,Ovt as nS,wvt as nT,Bke as nU,bOt as nV,g$t as nW,g0 as nX,uct as nY,oS as nZ,I$t as n_,Hyt as na,T2 as nb,E2 as nc,k2 as nd,oWe as ne,hWe as nf,aDe as ng,sDe as nh,oDe as ni,Ixt as nj,Cxt as nk,Axt as nl,pxt as nm,Mxt as nn,bxt as no,vxt as np,Ext as nq,ff as nr,Txt as ns,Sxt as nt,$xt as nu,wxt as nv,xxt as nw,_xt as nx,Oxt as ny,K9 as nz,e2 as o,see as o$,hg as o0,lR as o1,A$t as o2,v8 as o3,kmt as o4,M$t as o5,C$t as o6,dpe as o7,imt as o8,tfe as o9,O0t as oA,M2 as oB,p0 as oC,u0t as oD,pmt as oE,nm as oF,H8 as oG,ugt as oH,Nvt as oI,QE as oJ,Qpe as oK,dg as oL,oIe as oM,A0t as oN,yu as oO,Wg as oP,V8 as oQ,lOt as oR,Gfe as oS,eHe as oT,qyt as oU,wI as oV,BSt as oW,cOt as oX,uOt as oY,Swt as oZ,_wt as o_,S6e as oa,m$ as ob,jGe as oc,FGe as od,Fwt as oe,IJ as of,xwt as og,f7e as oh,fn as oi,yR as oj,efe as ok,rfe as ol,Pze as om,_bt as on,zze as oo,xbt as op,Dyt as oq,KA as or,xUe as os,Uje as ot,$Ye as ou,Qae as ov,MQ as ow,jje as ox,nze as oy,qN as oz,aQ as p,xke as p$,pR as p0,L2 as p1,_Ye as p2,Vyt as p3,Kje as p4,Qje as p5,Fje as p6,Bje as p7,Jyt as p8,G_t as p9,J_t as pA,SQ as pB,Cje as pC,Mje as pD,Fyt as pE,kA as pF,FO as pG,K_t as pH,rxt as pI,uxt as pJ,DR as pK,ixt as pL,oxt as pM,txt as pN,sxt as pO,ext as pP,nxt as pQ,axt as pR,lxt as pS,K4 as pT,Egt as pU,r7 as pV,Ryt as pW,Pyt as pX,xAe as pY,zb as pZ,Ope as p_,q_t as pa,X_t as pb,Y_t as pc,Ble as pd,oze as pe,Ky as pf,DJ as pg,eme as ph,nOt as pi,sOt as pj,oOt as pk,aOt as pl,qwt as pm,Zwt as pn,Gwt as po,t9e as pp,EAe as pq,p$ as pr,jY as ps,Nyt as pt,NEe as pu,hd as pv,gze as pw,s9 as px,lIe as py,Yyt as pz,Eft as q,NSt as q$,_ke as q0,S2 as q1,P9e as q2,d0t as q3,Eqe as q4,__t as q5,N0t as q6,gqe as q7,sSt as q8,Z4e as q9,vgt as qA,Cee as qB,Zee as qC,Hee as qD,Wee as qE,SIe as qF,egt as qG,sIe as qH,nV as qI,Xee as qJ,tgt as qK,Wze as qL,kSt as qM,GSt as qN,CSt as qO,USt as qP,ngt as qQ,XSt as qR,cgt as qS,Bwt as qT,VSt as qU,DSt as qV,FSt as qW,jSt as qX,cte as qY,hte as qZ,dte as q_,V0t as qa,z0t as qb,F0t as qc,U0t as qd,j0t as qe,B0t as qf,Xs as qg,hn as qh,xR as qi,wne as qj,KSt as qk,Owt as ql,aee as qm,x9e as qn,l4e as qo,T0t as qp,EOt as qq,oSt as qr,IH as qs,D0t as qt,Tee as qu,Oee as qv,rIe as qw,See as qx,Fee as qy,_ee as qz,o0 as r,U8 as r$,LSt as r0,nte as r1,vee as r2,ote as r3,rte as r4,Mee as r5,hee as r6,cee as r7,uee as r8,gee as r9,Twt as rA,tOt as rB,iOt as rC,hOt as rD,dOt as rE,Nwt as rF,pOt as rG,fOt as rH,T8e as rI,M8e as rJ,dme as rK,Ew as rL,rOt as rM,wyt as rN,s6e as rO,zne as rP,Hht as rQ,T$t as rR,vVe as rS,Fgt as rT,jgt as rU,cxt as rV,zJe as rW,umt as rX,Mx as rY,Xa as rZ,TVe as r_,N9 as ra,nR as rb,eOt as rc,PSt as rd,RSt as re,Bmt as rf,kOt as rg,WSt as rh,Yz as ri,MSt as rj,xSt as rk,hge as rl,IR as rm,ISt as rn,xHe as ro,ASt as rp,Ywt as rq,_He as rr,fR as rs,THe as rt,Xwt as ru,ESt as rv,U8e as rw,Wwt as rx,RJ as ry,$wt as rz,dO as s,D1t as s$,OVe as s0,fme as s1,u$ as s2,h$ as s3,jw as s4,wVe as s5,cut as s6,y7e as s7,k$t as s8,i$t as s9,Dwt as sA,W8e as sB,TOt as sC,Vt as sD,wwt as sE,KR as sF,f$t as sG,p$t as sH,d$t as sI,kut as sJ,Xqe as sK,Yqe as sL,h$t as sM,sW as sN,VA as sO,CUe as sP,h4e as sQ,MP as sR,zMe as sS,kvt as sT,Cvt as sU,NDe as sV,LDe as sW,u6e as sX,Ice as sY,Bs as sZ,Qce as s_,Ult as sa,J3e as sb,Hje as sc,fgt as sd,hbt as se,cWe as sf,TDe as sg,Ppe as sh,Pce as si,uae as sj,$De as sk,_gt as sl,S8e as sm,YQ as sn,pgt as so,M1t as sp,HIe as sq,K1t as sr,J1t as ss,lJ as st,$Ot as su,xOt as sv,_Ot as sw,J8e as sx,Kfe as sy,Vwt as sz,Y$t as t,zf as t$,dZe as t0,lXe as t1,cNe as t2,LMe as t3,qQ as t4,DMe as t5,VMe as t6,Ade as t7,V1t as t8,Dqe as t9,YDe as tA,fc as tB,PV as tC,DO as tD,VO as tE,I9 as tF,xye as tG,Xct as tH,fGe as tI,Yct as tJ,Aye as tK,age as tL,bI as tM,Oye as tN,Ex as tO,z9 as tP,LAe as tQ,RAe as tR,jyt as tS,Hke as tT,NMe as tU,YIe as tV,Cyt as tW,$Le as tX,Vf as tY,Jge as tZ,rge as t_,Vqe as ta,vz as tb,Cqe as tc,Qqe as td,IBe as te,dD as tf,TR as tg,Uqe as th,zqe as ti,Sqe as tj,WZe as tk,$qe as tl,GWe as tm,KGe as tn,uZe as to,nle as tp,QQ as tq,jWe as tr,aXe as ts,ude as tt,Lqe as tu,e7 as tv,ts as tw,A2 as tx,s4e as ty,r4e as tz,Mn as u,oZe as u$,i4 as u0,lqe as u1,_qe as u2,xqe as u3,uqe as u4,kqe as u5,kWe as u6,qWe as u7,Vge as u8,nXe as u9,Yg as uA,bZe as uB,OZe as uC,cSt as uD,uSt as uE,bte as uF,$f as uG,l$ as uH,B9 as uI,wO as uJ,Md as uK,$$t as uL,fXe as uM,cZe as uN,fZe as uO,Lye as uP,mI as uQ,Rqe as uR,Gi as uS,YGe as uT,JGe as uU,tZe as uV,iZe as uW,pZe as uX,rZe as uY,nZe as uZ,sZe as u_,la as ua,sgt as ub,ygt as uc,xW as ud,eyt as ue,MMe as uf,Kx as ug,vyt as uh,rae as ui,_Me as uj,_c as uk,Hvt as ul,Wvt as um,Xvt as un,mxt as uo,Lxt as up,fxt as uq,ale as ur,Xge as us,Nxt as ut,Rxt as uu,Pxt as uv,yxt as uw,kxt as ux,gxt as uy,S$ as uz,n3 as v,DOe as v$,aZe as v0,lZe as v1,YNe as v2,Moe as v3,myt as v4,Ale as v5,lW as v6,fle as v7,kyt as v8,ySt as v9,bje as vA,vbt as vB,Bw as vC,J5e as vD,P6e as vE,yfe as vF,jmt as vG,lk as vH,kX as vI,sR as vJ,Y1t as vK,Bf as vL,nOe as vM,m$t as vN,Wz as vO,nUe as vP,xvt as vQ,KNe as vR,yvt as vS,Vct as vT,_St as vU,aOe as vV,Ub as vW,YVe as vX,QVe as vY,jye as vZ,NOe as v_,w0t as va,Fqe as vb,Tyt as vc,ZCe as vd,Myt as ve,vTe as vf,Ift as vg,aWe as vh,SDe as vi,RDe as vj,Sge as vk,f0t as vl,R1t as vm,pGe as vn,Rvt as vo,$vt as vp,iFe as vq,_vt as vr,cmt as vs,Bvt as vt,Qvt as vu,rmt as vv,_Ce as vw,bvt as vx,agt as vy,Avt as vz,JM as w,qGe as w0,Yje as w1,tyt as w2,Nje as w3,UVe as w4,Amt as w5,bae as w6,xyt as w7,OP as w8,AMe as w9,x$t as wA,H2e as wB,gP as wC,lQ as wD,Rgt as wE,Ngt as wF,POt as wG,m0 as wH,nSt as wI,TXe as wJ,K2 as wK,X$t as wL,sft as wM,gyt as wa,y0t as wb,_Y as wc,m0t as wd,hgt as we,SY as wf,_8 as wg,Tvt as wh,_$t as wi,pDe as wj,w$t as wk,ODe as wl,g0t as wm,uDe as wn,O$t as wo,S$t as wp,b$t as wq,l8 as wr,vU as ws,w8 as wt,Uoe as wu,fmt as wv,Evt as ww,H_t as wx,e3 as wy,OY as wz,Me as x,Pft as y,YU as z};
