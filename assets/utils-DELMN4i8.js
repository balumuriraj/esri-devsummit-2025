const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/symbolLayerUtils-BNimrZB1.js","assets/index-BYYG-xAB.js","assets/index-CSP37mtf.css","assets/CodeBlock-DBIw63CI.js","assets/CodeBlock-CnI_Xe9l.css"])))=>i.map(i=>d[i]);
import{_ as w}from"./index-BYYG-xAB.js";import{cM as d,bx as a,fL as h,hA as m,hB as g,hC as k,hD as L}from"./CodeBlock-DBIw63CI.js";import{C as z}from"./cimSymbolUtils-BKUa-w8i.js";new d(1e3);new a([128,128,128]);const x=new a("white");function J(n){if(n==null||!("symbolLayers"in n)||n.symbolLayers==null)return!1;switch(n.type){case"point-3d":return n.symbolLayers.some(r=>r.type==="object");case"line-3d":return n.symbolLayers.some(r=>r.type==="path");case"polygon-3d":return n.symbolLayers.some(r=>r.type==="object"||r.type==="extrude");default:return!1}}function M(n){var r;return((r=n.resource)==null?void 0:r.href)??""}function N(n,r){if(!n)return null;let t=null;return h(n)?t=j(n):m(n)&&(t=n.type==="cim"?z(n):n.color?new a(n.color):null),t?y(t,r):null}function j(n){const r=n.symbolLayers;if(!r)return null;let t=null;return r.forEach(o=>{var l;o.type==="object"&&((l=o.resource)!=null&&l.href)||(t=o.type==="water"?o.color:o.material?o.material.color:null)}),t?new a(t):null}function y(n,r){if(r==null||n==null)return n;const t=n.toRgba();return t[3]=t[3]*r,new a(t)}function _(n,r,t){const o=n.symbolLayers;if(!o)return;const l=e=>y(r=r??e??(t!=null?x:null),t);o.forEach(e=>{var c,s;if(e.type!=="object"||!((c=e.resource)!=null&&c.href)||r)if(e.type==="water")e.color=l(e.color);else{const i=e.material!=null?e.material.color:null,u=l(i);e.material==null?e.material=new g({color:u}):e.material.color=u,t!=null&&"outline"in e&&((s=e.outline)==null?void 0:s.color)!=null&&(e.outline.color=y(e.outline.color,t))}})}function v(n,r,t){var o;(r=r??n.color)&&(n.color=y(r,t)),t!=null&&"outline"in n&&((o=n.outline)!=null&&o.color)&&(n.outline.color=y(n.outline.color,t))}function T(n,r,t){n&&(r||t!=null)&&(r&&(r=new a(r)),h(n)?_(n,r,t):m(n)&&v(n,r,t))}async function S(n,r){const t=n.symbolLayers;t&&await k(t,async o=>E(o,r))}async function E(n,r){switch(n.type){case"extrude":C(n,r);break;case"icon":case"line":case"text":$(n,r);break;case"path":D(n,r);break;case"object":await R(n,r)}}function $(n,r){const t=p(r);t!=null&&(n.size=t)}function p(n){for(const r of n)if(typeof r=="number")return r;return null}function C(n,r){n.size=typeof r[2]=="number"?r[2]:0}async function R(n,r){const{resourceSize:t,symbolSize:o}=await O(n),l=b(r,t,o);n.width=f(r[0],o[0],t[0],l),n.depth=f(r[1],o[1],t[1],l),n.height=f(r[2],o[2],t[2],l)}function D(n,r){const t=b(r,L,[n.width,void 0,n.height]);n.width=f(r[0],n.width,1,t),n.height=f(r[2],n.height,1,t)}function b(n,r,t){for(let o=0;o<3;o++){const l=n[o];switch(l){case"symbol-value":{const e=t[o];return e!=null?e/r[o]:1}case"proportional":break;default:if(l&&r[o])return l/r[o]}}return 1}async function O(n){const{computeObjectLayerResourceSize:r}=await w(()=>import("./symbolLayerUtils-BNimrZB1.js"),__vite__mapDeps([0,1,2,3,4])),t=await r(n,10),{width:o,height:l,depth:e}=n,c=[o,e,l];let s=1;for(let i=0;i<3;i++){const u=c[i];if(u!=null){s=u/t[i];break}}for(let i=0;i<3;i++)c[i]==null&&(c[i]=t[i]*s);return{resourceSize:t,symbolSize:c}}function f(n,r,t,o){switch(n){case"proportional":return t*o;case"symbol-value":return r??t;default:return n}}function A(n,r){const t=p(r);if(t!=null)switch(n.type){case"simple-marker":n.size=t;break;case"picture-marker":{const o=n.width/n.height;o>1?(n.width=t,n.height=t*o):(n.width=t*o,n.height=t);break}case"simple-line":n.width=t;break;case"text":n.font.size=t}}async function U(n,r){if(n&&r)return h(n)?S(n,r):void(m(n)&&A(n,r))}function V(n,r,t){if(n&&r!=null)if(h(n)){const o=n.symbolLayers;o&&o.forEach(l=>{if(l.type==="object")switch(t){case"tilt":l.tilt=(l.tilt??0)+r;break;case"roll":l.roll=(l.roll??0)+r;break;default:l.heading=(l.heading??0)+r}l.type==="icon"&&(l.angle+=r)})}else m(n)&&(n.type!=="simple-marker"&&n.type!=="picture-marker"&&n.type!=="text"||(n.angle+=r))}function q(n){return n!=null&&n.type==="polygon-3d"&&n.symbolLayers.some(r=>r.type==="extrude")}export{U as D,V as J,q as N,T as g,N as h,M as p,J as y};
